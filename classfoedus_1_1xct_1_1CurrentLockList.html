<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::xct::CurrentLockList Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1xct_1_1CurrentLockList.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1xct_1_1CurrentLockList-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::xct::CurrentLockList Class Reference<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__XCT.html">Transaction Manager</a> &raquo; <a class="el" href="group__RLL.html">Retrospective Lock List</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Sorted list of all locks, either read-lock or write-lock, taken in the current run.  
 <a href="classfoedus_1_1xct_1_1CurrentLockList.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Sorted list of all locks, either read-lock or write-lock, taken in the current run. </p>
<p>This is <em>NOT</em> a POD because we need dynamic memory for the list. This holds all locks in address order to help our commit protocol.</p>
<p>We so far maintain this object in addition to read-set/write-set. We can merge these objects in to one, which will allow us to add some functionality and optimizations. For example, "read my own write" semantics would be practically implemented with such an integrated list. We can reduce the number of sorting and tracking, too. But, let's do them later. </p><dl class="section note"><dt>Note</dt><dd>This object itself is thread-private. No concurrency control needed. </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00309">309</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a706b0c0a7f4c44b0f9dd395154873780"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a706b0c0a7f4c44b0f9dd395154873780">CurrentLockList</a> ()</td></tr>
<tr class="separator:a706b0c0a7f4c44b0f9dd395154873780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a040661fef567664e4f223f327d4e6a90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a040661fef567664e4f223f327d4e6a90">~CurrentLockList</a> ()</td></tr>
<tr class="separator:a040661fef567664e4f223f327d4e6a90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac79149bb167fa69b2afc7861c0c70483"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">init</a> (<a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *array, uint32_t capacity, const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;resolver)</td></tr>
<tr class="separator:ac79149bb167fa69b2afc7861c0c70483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55773472fd16796b2b28cc6ca4840ec4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4">uninit</a> ()</td></tr>
<tr class="separator:a55773472fd16796b2b28cc6ca4840ec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb020fdb3951460f9c283d4700696ad2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries</a> ()</td></tr>
<tr class="separator:abb020fdb3951460f9c283d4700696ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb71937e25bc68318ef0c9808a4a482"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482">binary_search</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) const </td></tr>
<tr class="memdesc:a3cb71937e25bc68318ef0c9808a4a482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogous to std::binary_search() for the given lock.  <a href="#a3cb71937e25bc68318ef0c9808a4a482">More...</a><br /></td></tr>
<tr class="separator:a3cb71937e25bc68318ef0c9808a4a482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db689767722f1d30821d63144bf8bde"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">get_or_add_entry</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *lock, <a class="el" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> preferred_mode)</td></tr>
<tr class="memdesc:a6db689767722f1d30821d63144bf8bde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness.  <a href="#a6db689767722f1d30821d63144bf8bde">More...</a><br /></td></tr>
<tr class="separator:a6db689767722f1d30821d63144bf8bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0b8f0d95e3ae99293ffc14cf4067573"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573">lower_bound</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) const </td></tr>
<tr class="memdesc:af0b8f0d95e3ae99293ffc14cf4067573"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogous to std::lower_bound() for the given lock.  <a href="#af0b8f0d95e3ae99293ffc14cf4067573">More...</a><br /></td></tr>
<tr class="separator:af0b8f0d95e3ae99293ffc14cf4067573"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75e45c9dd7129e1f202252cf124e76ff"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a75e45c9dd7129e1f202252cf124e76ff">get_array</a> () const </td></tr>
<tr class="separator:a75e45c9dd7129e1f202252cf124e76ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ca03e6543963a43121db4c7fb44fe6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a2ca03e6543963a43121db4c7fb44fe6e">get_array</a> ()</td></tr>
<tr class="separator:a2ca03e6543963a43121db4c7fb44fe6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab360f7fc3d8c0880b394084d45e492e9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos)</td></tr>
<tr class="separator:ab360f7fc3d8c0880b394084d45e492e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af67e1af35b36686bda298171dd4c9991"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#af67e1af35b36686bda298171dd4c9991">get_entry</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) const </td></tr>
<tr class="separator:af67e1af35b36686bda298171dd4c9991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f33e3dc5973ab4010adb9e5de2fc749"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a5f33e3dc5973ab4010adb9e5de2fc749">get_capacity</a> () const </td></tr>
<tr class="separator:a5f33e3dc5973ab4010adb9e5de2fc749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af24dd2ea6848b84443095530b3c25d8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#af24dd2ea6848b84443095530b3c25d8f">get_last_active_entry</a> () const </td></tr>
<tr class="separator:af24dd2ea6848b84443095530b3c25d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78b6d1612fda232b7e8c52dd3f6c2504"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">is_valid_entry</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) const </td></tr>
<tr class="separator:a78b6d1612fda232b7e8c52dd3f6c2504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761b506c86d1d8e5681cab34fac1ad29"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">is_empty</a> () const </td></tr>
<tr class="separator:a761b506c86d1d8e5681cab34fac1ad29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbed8e324b88389217b42a132e0547b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:acbed8e324b88389217b42a132e0547b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7485f0d26810767b3bef18e12233daa7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7">assert_sorted_impl</a> () const </td></tr>
<tr class="separator:a7485f0d26810767b3bef18e12233daa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0cbd2f6b369d0340c3222f124fe122b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">begin</a> ()</td></tr>
<tr class="separator:ae0cbd2f6b369d0340c3222f124fe122b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad34e69a6289f0860fe000c3bbecda1cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">end</a> ()</td></tr>
<tr class="separator:ad34e69a6289f0860fe000c3bbecda1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da52220a86285f625d057e4db4faab4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a0da52220a86285f625d057e4db4faab4">cbegin</a> () const </td></tr>
<tr class="separator:a0da52220a86285f625d057e4db4faab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9640c2cb1590155356189c7b8f09040e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a9640c2cb1590155356189c7b8f09040e">cend</a> () const </td></tr>
<tr class="separator:a9640c2cb1590155356189c7b8f09040e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e57fd76a57791018ce74dca876d8886"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6e57fd76a57791018ce74dca876d8886">get_volatile_page_resolver</a> () const </td></tr>
<tr class="separator:a6e57fd76a57791018ce74dca876d8886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18887a3fb16dc1ca458892ce4b0b27c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad18887a3fb16dc1ca458892ce4b0b27c">get_last_locked_entry</a> () const </td></tr>
<tr class="separator:ad18887a3fb16dc1ca458892ce4b0b27c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398ec264786992d102b8edd74d5767b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3">get_max_locked_id</a> () const </td></tr>
<tr class="separator:a398ec264786992d102b8edd74d5767b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a668d5dd1b711abed1a9962a8cb4ec1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">calculate_last_locked_entry</a> () const </td></tr>
<tr class="memdesc:a1a668d5dd1b711abed1a9962a8cb4ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate last_locked_entry_ by really checking the whole list.  <a href="#a1a668d5dd1b711abed1a9962a8cb4ec1">More...</a><br /></td></tr>
<tr class="separator:a1a668d5dd1b711abed1a9962a8cb4ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e818494c4d716f9fc996081f6c419f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> from) const </td></tr>
<tr class="memdesc:a03e818494c4d716f9fc996081f6c419f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only searches among entries at or before "from".  <a href="#a03e818494c4d716f9fc996081f6c419f">More...</a><br /></td></tr>
<tr class="separator:a03e818494c4d716f9fc996081f6c419f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed99dee60f9529d5cfabb5e1742038da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a> () const </td></tr>
<tr class="separator:aed99dee60f9529d5cfabb5e1742038da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaacdb674d1296394cff252f995ce001"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001">batch_insert_write_placeholders</a> (const <a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a> *write_set, uint32_t write_set_size)</td></tr>
<tr class="memdesc:abaacdb674d1296394cff252f995ce001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create entries for all write-sets in one-shot.  <a href="#abaacdb674d1296394cff252f995ce001">More...</a><br /></td></tr>
<tr class="separator:abaacdb674d1296394cff252f995ce001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a10e19f1d603ab47e74c605a9909fb5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5">prepopulate_for_retrospective_lock_list</a> (const <a class="el" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">RetrospectiveLockList</a> &amp;rll)</td></tr>
<tr class="memdesc:a4a10e19f1d603ab47e74c605a9909fb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Another batch-insert method used at the beginning of a transaction.  <a href="#a4a10e19f1d603ab47e74c605a9909fb5">More...</a><br /></td></tr>
<tr class="separator:a4a10e19f1d603ab47e74c605a9909fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8023ecc3dc58816a010a3415ebfc1dd"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:aa8023ecc3dc58816a010a3415ebfc1dd"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">try_or_acquire_single_lock</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="memdesc:aa8023ecc3dc58816a010a3415ebfc1dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Methods below take or release locks, so they receive MCS_RW_IMPL, a template param.  <a href="#aa8023ecc3dc58816a010a3415ebfc1dd">More...</a><br /></td></tr>
<tr class="separator:aa8023ecc3dc58816a010a3415ebfc1dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7029aa2b4a2d3ec394aa0a0b378b088"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:ad7029aa2b4a2d3ec394aa0a0b378b088"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088">try_or_acquire_multiple_locks</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> upto_pos, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="memdesc:ad7029aa2b4a2d3ec394aa0a0b378b088"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquire multiple locks up to the given position in canonical order.  <a href="#ad7029aa2b4a2d3ec394aa0a0b378b088">More...</a><br /></td></tr>
<tr class="separator:ad7029aa2b4a2d3ec394aa0a0b378b088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f903145f3f1b0f2a030e51eb981d6ab"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:a1f903145f3f1b0f2a030e51eb981d6ab"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">try_async_single_lock</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="separator:a1f903145f3f1b0f2a030e51eb981d6ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7532b1cf91086e276b6318664bf68ca9"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:a7532b1cf91086e276b6318664bf68ca9"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9">retry_async_single_lock</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="separator:a7532b1cf91086e276b6318664bf68ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23e6efe1f2fb69b13cc9559e56e2181"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:ab23e6efe1f2fb69b13cc9559e56e2181"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181">cancel_async_single_lock</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="separator:ab23e6efe1f2fb69b13cc9559e56e2181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af61431071af14d67f681679267cd0364"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:af61431071af14d67f681679267cd0364"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364">try_async_multiple_locks</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> upto_pos, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="separator:af61431071af14d67f681679267cd0364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a069941b140019c23d86092e68cd9b331"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:a069941b140019c23d86092e68cd9b331"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331">release_all_locks</a> (MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="separator:a069941b140019c23d86092e68cd9b331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2e6a593d7b975f1756ce9eec0fd1f2"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:ace2e6a593d7b975f1756ce9eec0fd1f2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">release_all_after</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="memdesc:ace2e6a593d7b975f1756ce9eec0fd1f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release all locks in CLL whose addresses are canonically ordered before the parameter.  <a href="#ace2e6a593d7b975f1756ce9eec0fd1f2">More...</a><br /></td></tr>
<tr class="separator:ace2e6a593d7b975f1756ce9eec0fd1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e7c2cec33775df3d5e219b3b6e55974"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:a7e7c2cec33775df3d5e219b3b6e55974"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7e7c2cec33775df3d5e219b3b6e55974">release_all_at_and_after</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="memdesc:a7e7c2cec33775df3d5e219b3b6e55974"><td class="mdescLeft">&#160;</td><td class="mdescRight">same as release_all_after(address - 1)  <a href="#a7e7c2cec33775df3d5e219b3b6e55974">More...</a><br /></td></tr>
<tr class="separator:a7e7c2cec33775df3d5e219b3b6e55974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac4e854509ec8a1cf9a70fcba501a68"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:a3ac4e854509ec8a1cf9a70fcba501a68"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68">giveup_all_after</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="memdesc:a3ac4e854509ec8a1cf9a70fcba501a68"><td class="mdescLeft">&#160;</td><td class="mdescRight">This <em>gives-up</em> locks in CLL that are not yet taken.  <a href="#a3ac4e854509ec8a1cf9a70fcba501a68">More...</a><br /></td></tr>
<tr class="separator:a3ac4e854509ec8a1cf9a70fcba501a68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ee69a6e7731cbebe3511fcf9809bc7"><td class="memTemplParams" colspan="2">template&lt;typename MCS_RW_IMPL &gt; </td></tr>
<tr class="memitem:a10ee69a6e7731cbebe3511fcf9809bc7"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a10ee69a6e7731cbebe3511fcf9809bc7">giveup_all_at_and_after</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL *mcs_rw_impl)</td></tr>
<tr class="separator:a10ee69a6e7731cbebe3511fcf9809bc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a6095aa74c375ba360c61ab5d861497f5"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6095aa74c375ba360c61ab5d861497f5">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">CurrentLockList</a> &amp;v)</td></tr>
<tr class="separator:a6095aa74c375ba360c61ab5d861497f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a706b0c0a7f4c44b0f9dd395154873780"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::CurrentLockList::CurrentLockList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00076">76</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8cpp_source.html#l00096">clear_entries()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                 {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  array_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  capacity_ = 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_abb020fdb3951460f9c283d4700696ad2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">foedus::xct::CurrentLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00096">retrospective_lock_list.cpp:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a706b0c0a7f4c44b0f9dd395154873780_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a706b0c0a7f4c44b0f9dd395154873780_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a706b0c0a7f4c44b0f9dd395154873780_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a706b0c0a7f4c44b0f9dd395154873780_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2" title="foedus::xct::CurrentLock\lList::clear_entries" alt="" coords="217,5,381,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a040661fef567664e4f223f327d4e6a90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::CurrentLockList::~CurrentLockList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00082">82</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8cpp_source.html#l00109">uninit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                                  {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4">uninit</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a55773472fd16796b2b28cc6ca4840ec4"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4">foedus::xct::CurrentLockList::uninit</a></div><div class="ttdeci">void uninit()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00109">retrospective_lock_list.cpp:109</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a040661fef567664e4f223f327d4e6a90_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a040661fef567664e4f223f327d4e6a90_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a040661fef567664e4f223f327d4e6a90_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a040661fef567664e4f223f327d4e6a90_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4" title="foedus::xct::CurrentLock\lList::uninit" alt="" coords="217,5,381,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2" title="foedus::xct::CurrentLock\lList::clear_entries" alt="" coords="429,5,593,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aed99dee60f9529d5cfabb5e1742038da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::assert_last_locked_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">405</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00393">calculate_last_locked_entry()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8cpp_source.html#l00178">assert_sorted_impl()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00189">binary_search()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00204">get_or_add_entry()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00196">lower_bound()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">release_all_after()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00696">retry_async_single_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00649">try_async_single_lock()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00569">try_or_acquire_single_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                        {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> correct = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">calculate_last_locked_entry</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(correct == last_locked_entry_);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a1a668d5dd1b711abed1a9962a8cb4ec1"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">foedus::xct::CurrentLockList::calculate_last_locked_entry</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry() const </div><div class="ttdoc">Calculate last_locked_entry_ by really checking the whole list. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00393">retrospective_lock_list.hpp:393</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="249,13,461,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="509,5,685,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_aed99dee60f9529d5cfabb5e1742038da_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="263,376,427,417"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="775,144,939,185"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="775,517,939,559"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482" title="Analogous to std::binary_search() for the given lock. " alt="" coords="509,261,673,303"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="263,452,427,493"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9" title="foedus::xct::CurrentLock\lList::retry_async_single_lock" alt="" coords="249,620,440,661"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab" title="foedus::xct::CurrentLock\lList::try_async_single_lock" alt="" coords="255,685,435,727"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="488,576,693,617"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="509,371,673,412"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="775,371,939,412"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="741,437,972,493"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write&#45;sets in one&#45;shot. " alt="" coords="775,210,939,266"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="775,290,939,346"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="1049,75,1213,116"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="1039,144,1223,185"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="1310,71,1494,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="1589,5,1740,47"/>
<area shape="rect" id="node8" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="1561,71,1768,112"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="1311,144,1493,185"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="1589,137,1740,193"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="1567,217,1762,259"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1816,192,2011,233"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2063,179,2258,220"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="1039,392,1223,433"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="1314,435,1490,476"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="1581,566,1748,622"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1846,625,1981,667"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="2093,405,2228,447"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="2078,471,2243,527"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="2078,551,2243,607"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="2078,631,2243,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="2078,711,2243,767"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="2059,791,2263,847"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="2078,871,2243,927"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="2078,951,2243,1007"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="2078,1031,2243,1087"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="2072,245,2249,301"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="2072,325,2249,381"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="2311,479,2485,520"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="2311,551,2485,607"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="2311,631,2485,687"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="1049,305,1213,331"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="1305,297,1499,339"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364" title="foedus::xct::CurrentLock\lList::try_async_multiple_locks" alt="" coords="491,685,690,727"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="745,637,968,679"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="1029,573,1233,615"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="1020,639,1243,680"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1291,639,1513,680"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="1300,573,1504,615"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acbed8e324b88389217b42a132e0547b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::assert_sorted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">555</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8cpp_source.html#l00178">assert_sorted_impl()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8cpp_source.html#l00329">batch_insert_write_placeholders()</a>, <a class="el" href="xct__manager__pimpl_8hpp_source.html#l00277">foedus::xct::CurrentLockListIteratorForWriteSet::CurrentLockListIteratorForWriteSet()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00204">get_or_add_entry()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00826">giveup_all_after()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00445">prepopulate_for_retrospective_lock_list()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">release_all_after()</a>.</p>
<div class="fragment"><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                                 {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">#ifndef  NDEBUG</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7">assert_sorted_impl</a>();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a7485f0d26810767b3bef18e12233daa7"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7">foedus::xct::CurrentLockList::assert_sorted_impl</a></div><div class="ttdeci">void assert_sorted_impl() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00178">retrospective_lock_list.cpp:178</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="217,75,381,117"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="429,27,625,69"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="447,122,608,163"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="673,13,885,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="942,5,1118,61"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="705,78,854,119"/>
<area shape="rect" id="node8" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="697,144,862,171"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="698,195,861,237"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="933,162,1127,203"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="949,227,1111,269"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_acbed8e324b88389217b42a132e0547b8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write&#45;sets in one&#45;shot. " alt="" coords="506,929,670,985"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="217,717,448,773"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="743,659,907,701"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="251,798,415,839"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="251,864,415,920"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="251,1010,415,1051"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="977,937,1171,978"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1225,986,1420,1027"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1473,1035,1667,1077"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1731,1035,1893,1077"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="991,652,1157,708"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1255,602,1390,643"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1503,249,1637,290"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1487,315,1653,371"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1487,395,1653,451"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1487,475,1653,531"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1487,555,1653,611"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1468,635,1672,691"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1487,715,1653,771"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1487,795,1653,851"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1487,875,1653,931"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1481,955,1659,1011"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1481,165,1659,221"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1725,326,1899,367"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1725,395,1899,451"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1725,475,1899,531"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1725,555,1899,611"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1727,635,1897,691"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1725,715,1899,771"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1725,795,1899,851"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1725,875,1899,931"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1721,955,1903,1011"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1725,165,1899,221"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1723,245,1901,301"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1725,5,1899,61"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1720,85,1904,141"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="496,769,680,810"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="737,754,913,795"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="999,747,1149,803"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="506,879,670,905"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="728,871,923,913"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="993,871,1155,913"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="506,1079,670,1121"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="496,1010,680,1051"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="733,1083,917,1125"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="999,1149,1149,1190"/>
<area shape="rect" id="node47" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="971,1083,1177,1125"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="734,1010,917,1051"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="999,1003,1149,1059"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7485f0d26810767b3bef18e12233daa7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::assert_sorted_impl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00178">178</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, and <a class="el" href="retrospective__lock__list_8cpp_source.html#l00159">foedus::xct::lock_assert_sorted()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">assert_sorted()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                               {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68">lock_assert_sorted</a>(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a736225e9852f9c75b92e134dbbe40a68"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68">foedus::xct::lock_assert_sorted</a></div><div class="ttdeci">void lock_assert_sorted(const LOCK_LIST &amp;list)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00159">retrospective_lock_list.cpp:159</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="217,27,413,69"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="235,122,396,163"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="461,13,673,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="730,5,906,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="493,78,642,119"/>
<area shape="rect" id="node7" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="485,144,650,171"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="486,195,649,237"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="721,162,915,203"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="737,227,899,269"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a7485f0d26810767b3bef18e12233daa7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="217,755,381,797"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write&#45;sets in one&#45;shot. " alt="" coords="718,849,882,905"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="429,637,660,693"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="955,579,1119,621"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="463,718,627,759"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="463,784,627,840"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="463,930,627,971"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="1189,857,1383,898"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1437,906,1632,947"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1685,955,1879,997"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1941,955,2104,997"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="1203,572,1369,628"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1467,522,1602,563"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1715,169,1849,210"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1699,235,1865,291"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1699,315,1865,371"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1699,395,1865,451"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1699,475,1865,531"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1680,555,1884,611"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1699,635,1865,691"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1699,715,1865,771"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1699,795,1865,851"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1693,875,1871,931"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1693,85,1871,141"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1935,246,2110,287"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1935,315,2110,371"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1935,395,2110,451"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1935,475,2110,531"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1937,555,2108,611"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1935,635,2110,691"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1935,715,2110,771"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1935,795,2110,851"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1932,875,2113,931"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1936,85,2109,141"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1933,165,2112,221"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1936,5,2109,61"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="708,689,892,730"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="949,674,1125,715"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="1211,667,1361,723"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="718,799,882,825"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="940,791,1135,833"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="1205,791,1367,833"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="718,999,882,1041"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="708,930,892,971"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="945,1003,1129,1045"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="1211,1069,1361,1110"/>
<area shape="rect" id="node47" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="1183,1003,1389,1045"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="946,930,1129,971"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="1211,923,1361,979"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abaacdb674d1296394cff252f995ce001"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::batch_insert_write_placeholders </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a> *&#160;</td>
          <td class="paramname"><em>write_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>write_set_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create entries for all write-sets in one-shot. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">write_set</td><td>write-sets to create placeholders for. Must be canonically sorted. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">write_set_size</td><td>count of entries in write_set</td></tr>
  </table>
  </dd>
</dl>
<p>During precommit, we must create an entry for every write-set. Rather than doing it one by one, this method creates placeholder entries for all of them. The placeholders are not locked yet (taken_mode_ == kNoLock). </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00329">329</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">assert_sorted()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00189">binary_search()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00393">calculate_last_locked_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>, <a class="el" href="xct__access_8hpp_source.html#l00096">foedus::xct::RecordXctAccess::ordinal_</a>, <a class="el" href="xct__access_8hpp_source.html#l00102">foedus::xct::RecordXctAccess::owner_id_address_</a>, <a class="el" href="xct__access_8hpp_source.html#l00105">foedus::xct::RecordXctAccess::owner_lock_id_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00150">foedus::xct::LockEntry::set()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00125">foedus::xct::LockEntry::universal_lock_id_</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                           {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// We want to avoid full-sorting and minimize the number of copies/shifts.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// Luckily, write_set is already sorted, so is our array_. Just merge them in order.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span> (write_set_size == 0) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 1; i &lt; write_set_size; ++i) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set[i - 1].ordinal_ != write_set[i].ordinal_);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">if</span> (write_set[i].owner_lock_id_ == write_set[i - 1].owner_lock_id_) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set[i - 1].ordinal_ &lt; write_set[i].ordinal_);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set[i - 1].owner_lock_id_ &lt; write_set[i].owner_lock_id_);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// Implementation note: I considered a few approaches to efficiently do the merge.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">//  1) insertion-sort: that sounds expensive... we might be inserting several</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">//  2) a bit complex. first path to identify the number of new entries, then second path to</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">//   merge from the end, not the beginning, to copy/shift only what we need to.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">//  3) insert all write-sets at the end then invoke std::sort once.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// For now I picked 3) for simplicity. Revisit laster if CPU profile tells something.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (last_active_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// If CLL is now empty, it&#39;s even easier. Just add all write-sets</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    uint32_t added = 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">for</span> (uint32_t write_pos = 0; write_pos &lt; write_set_size; ++write_pos) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keyword">const</span> WriteXctAccess* write = write_set + write_pos;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordflow">if</span> (write_pos &gt; 0) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <span class="keyword">const</span> WriteXctAccess* prev = write_set + write_pos - 1;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;ordinal_ != prev-&gt;ordinal_);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;owner_lock_id_ &gt;= prev-&gt;owner_lock_id_);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="keywordflow">if</span> (write-&gt;owner_lock_id_ == prev-&gt;owner_lock_id_) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;ordinal_ &gt; prev-&gt;ordinal_);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      ++added;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      LockEntry* new_entry = array_ + added;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      new_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">set</a>(write-&gt;owner_lock_id_, write-&gt;owner_id_address_, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    last_active_entry_ = added;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    uint32_t write_pos = 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    uint32_t added = 0;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 1U; pos &lt;= last_active_entry_ &amp;&amp; write_pos &lt; write_set_size;) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      LockEntry* existing = array_ + pos;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keyword">const</span> WriteXctAccess* write = write_set + write_pos;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> write_lock_id = write-&gt;owner_lock_id_;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span> (existing-&gt;universal_lock_id_ &lt; write_lock_id) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        ++pos;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (existing-&gt;universal_lock_id_ == write_lock_id) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">if</span> (existing-&gt;preferred_mode_ != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;          existing-&gt;preferred_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        ++write_pos;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="comment">// yuppy, new entry.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(existing-&gt;universal_lock_id_ &gt; write_lock_id);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        ++added;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        LockEntry* new_entry = array_ + last_active_entry_ + added;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        new_entry-&gt;set(write_lock_id, write-&gt;owner_id_address_, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="comment">// be careful on duplicate in write-set.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment">// It might contain multiple writes to one record.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">for</span> (++write_pos; write_pos &lt; write_set_size; ++write_pos) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;          <span class="keyword">const</span> WriteXctAccess* next_write = write_set + write_pos;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;          <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> next_write_id = next_write-&gt;owner_lock_id_;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_write_id &gt;= write_lock_id);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;          <span class="keywordflow">if</span> (next_write_id &gt; write_lock_id) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;          }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">while</span> (write_pos &lt; write_set_size) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="comment">// After iterating over all existing entries, still some write-set entry remains.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="comment">// Hence they are all after the existing entries.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keyword">const</span> WriteXctAccess* write = write_set + write_pos;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> write_lock_id = write-&gt;owner_lock_id_;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(last_active_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        || array_[last_active_entry_].universal_lock_id_ &lt; write_lock_id);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">// Again, be careful on duplicate in write set.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      ++added;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      LockEntry* new_entry = array_ + last_active_entry_ + added;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      new_entry-&gt;set(write_lock_id, write-&gt;owner_id_address_, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">for</span> (++write_pos; write_pos &lt; write_set_size; ++write_pos) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keyword">const</span> WriteXctAccess* next_write = write_set + write_pos;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> next_write_id = next_write-&gt;owner_lock_id_;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_write_id &gt;= write_lock_id);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (next_write_id &gt; write_lock_id) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (added &gt; 0) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      last_active_entry_ += added;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      std::sort(array_ + 1U, array_ + 1U + last_active_entry_);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Adjusting last_locked_entry_ is not impossible.. but let&#39;s just recalculate. Not too often.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  last_locked_entry_ = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">calculate_last_locked_entry</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; write_set_size; ++i) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482">binary_search</a>(write_set[i].owner_lock_id_) != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a54190c5faf4f6943043c1d83ed435f44"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">foedus::xct::LockEntry::set</a></div><div class="ttdeci">void set(UniversalLockId id, RwLockableXctId *lock, LockMode preferred_mode, LockMode taken_mode)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00150">retrospective_lock_list.hpp:150</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a3cb71937e25bc68318ef0c9808a4a482"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482">foedus::xct::CurrentLockList::binary_search</a></div><div class="ttdeci">LockListPosition binary_search(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::binary_search() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00189">retrospective_lock_list.cpp:189</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a1a668d5dd1b711abed1a9962a8cb4ec1"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">foedus::xct::CurrentLockList::calculate_last_locked_entry</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry() const </div><div class="ttdoc">Calculate last_locked_entry_ by really checking the whole list. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00393">retrospective_lock_list.hpp:393</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_acbed8e324b88389217b42a132e0547b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">foedus::xct::CurrentLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00555">retrospective_lock_list.hpp:555</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="225,130,389,171"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="900,13,1112,54"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482" title="Analogous to std::binary_search() for the given lock. " alt="" coords="444,71,608,113"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44" title="foedus::xct::LockEntry::set" alt="" coords="217,196,396,223"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="444,137,608,178"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="656,71,852,113"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="673,137,835,178"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1169,5,1345,61"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="931,78,1081,119"/>
<area shape="rect" id="node9" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="923,144,1089,171"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="925,195,1087,237"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1160,227,1353,269"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1176,162,1337,203"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_abaacdb674d1296394cff252f995ce001_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="217,13,412,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="460,13,655,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="703,13,897,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="945,13,1108,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0cbd2f6b369d0340c3222f124fe122b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00371">371</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00826">giveup_all_after()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">release_all_after()</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ae0cbd2f6b369d0340c3222f124fe122b_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ae0cbd2f6b369d0340c3222f124fe122b_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ae0cbd2f6b369d0340c3222f124fe122b_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ae0cbd2f6b369d0340c3222f124fe122b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="217,842,381,883"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="217,963,381,1005"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="429,785,613,826"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="665,749,841,790"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="921,661,1072,717"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="913,741,1080,797"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1201,599,1335,641"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1471,406,1605,447"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1455,472,1621,528"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1455,552,1621,608"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1455,632,1621,688"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1455,712,1621,768"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1436,792,1640,848"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1455,872,1621,928"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1455,952,1621,1008"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1455,45,1621,101"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1449,165,1627,221"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1449,325,1627,381"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1698,486,1873,527"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1698,552,1873,608"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1698,632,1873,688"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1698,712,1873,768"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1700,792,1871,848"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1698,872,1873,928"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1698,952,1873,1008"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1698,5,1873,61"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1695,85,1876,141"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1947,125,2129,181"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1947,45,2129,101"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1699,405,1872,461"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1696,165,1875,221"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1699,245,1872,301"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1693,325,1877,381"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1931,446,2145,487"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1939,381,2137,422"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="439,963,603,1005"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="429,1033,613,1074"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="661,963,845,1005"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="921,930,1072,971"/>
<area shape="rect" id="node45" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="893,995,1100,1037"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="1148,1033,1388,1074"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1688,1098,1883,1139"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="1441,1033,1635,1074"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1957,1098,2119,1139"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="1704,1033,1867,1074"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="662,1069,845,1110"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="921,1061,1072,1117"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="899,1142,1094,1183"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1171,1142,1365,1183"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3cb71937e25bc68318ef0c9808a4a482"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::binary_search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analogous to std::binary_search() for the given lock. </p>
<p>Data manipulation (search/add/etc)</p>
<dl class="section return"><dt>Returns</dt><dd>Index of an entry whose lock_ == lock. kLockListPositionInvalid if not found. </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00189">189</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8cpp_source.html#l00329">batch_insert_write_placeholders()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                                          {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> lock_binary_search&lt;CurrentLockList, LockEntry&gt;(*<span class="keyword">this</span>, lock);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="217,13,413,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="461,13,673,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="721,5,897,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a3cb71937e25bc68318ef0c9808a4a482_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write&#45;sets in one&#45;shot. " alt="" coords="217,5,381,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="429,13,624,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="672,13,867,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="915,13,1109,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1157,13,1320,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1a668d5dd1b711abed1a9962a8cb4ec1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::calculate_last_locked_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate last_locked_entry_ by really checking the whole list. </p>
<p>Usually for sanity checks </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00393">393</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00397">calculate_last_locked_entry_from()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, and <a class="el" href="retrospective__lock__list_8cpp_source.html#l00329">batch_insert_write_placeholders()</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                                       {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(last_active_entry_);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a03e818494c4d716f9fc996081f6c419f"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">foedus::xct::CurrentLockList::calculate_last_locked_entry_from</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry_from(LockListPosition from) const </div><div class="ttdoc">Only searches among entries at or before "from". </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00397">retrospective_lock_list.hpp:397</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="265,5,441,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a1a668d5dd1b711abed1a9962a8cb4ec1_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="265,215,461,256"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write&#45;sets in one&#45;shot. " alt="" coords="1035,26,1199,82"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="523,273,687,315"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="1035,416,1199,457"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="1035,123,1199,164"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482" title="Analogous to std::binary_search() for the given lock. " alt="" coords="523,156,687,197"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="769,399,933,440"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9" title="foedus::xct::CurrentLock\lList::retry_async_single_lock" alt="" coords="509,25,700,67"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab" title="foedus::xct::CurrentLock\lList::try_async_single_lock" alt="" coords="515,91,695,132"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="748,475,953,516"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="769,273,933,315"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="1001,335,1232,391"/>
<area shape="rect" id="node26" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="1035,269,1199,311"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="1035,189,1199,245"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="1827,27,2022,68"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2076,23,2271,64"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2323,20,2518,61"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2577,20,2739,61"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="1841,465,2008,521"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="2106,479,2241,520"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="2353,247,2488,288"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="2338,313,2503,369"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="2338,393,2503,449"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="2338,473,2503,529"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="2338,553,2503,609"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="2319,633,2523,689"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="2338,713,2503,769"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="2338,793,2503,849"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="2338,873,2503,929"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="2332,86,2509,142"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="2332,166,2509,222"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="2571,320,2745,361"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="1299,307,1483,348"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="1574,339,1750,380"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="1309,239,1473,266"/>
<area shape="rect" id="node31" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="1565,235,1759,276"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="1309,169,1473,211"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="1299,104,1483,145"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="1570,169,1754,211"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="1849,173,2000,215"/>
<area shape="rect" id="node36" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="1821,239,2028,280"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="1571,100,1753,141"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="1849,93,2000,149"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364" title="foedus::xct::CurrentLock\lList::try_async_multiple_locks" alt="" coords="751,91,950,132"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1005,536,1228,577"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="1289,472,1493,513"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="1280,537,1503,579"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1551,537,1773,579"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="1560,472,1764,513"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a03e818494c4d716f9fc996081f6c419f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::calculate_last_locked_entry_from </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Only searches among entries at or before "from". </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00397">397</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00393">calculate_last_locked_entry()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00649">try_async_single_lock()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00569">try_or_acquire_single_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = from; pos &gt; <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; --pos) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (array_[pos].is_locked()) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a03e818494c4d716f9fc996081f6c419f_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a03e818494c4d716f9fc996081f6c419f_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a03e818494c4d716f9fc996081f6c419f_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a03e818494c4d716f9fc996081f6c419f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="229,421,441,463"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab" title="foedus::xct::CurrentLock\lList::try_async_single_lock" alt="" coords="746,635,926,676"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="733,569,939,611"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="489,421,685,463"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write&#45;sets in one&#45;shot. " alt="" coords="1272,210,1436,266"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="754,392,918,433"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="1272,516,1436,557"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="1272,144,1436,185"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482" title="Analogous to std::binary_search() for the given lock. " alt="" coords="1007,293,1171,335"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="1007,509,1171,551"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9" title="foedus::xct::CurrentLock\lList::retry_async_single_lock" alt="" coords="741,275,931,316"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="1007,377,1171,419"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="1239,370,1469,426"/>
<area shape="rect" id="node26" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="1272,451,1436,492"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="1272,290,1436,346"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="2065,217,2259,259"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2313,179,2508,220"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2561,159,2755,200"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2808,159,2971,200"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="2079,513,2245,569"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="2343,599,2478,640"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="2591,305,2725,347"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="2575,371,2741,427"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="2575,451,2741,507"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="2575,531,2741,587"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="2575,611,2741,667"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="2556,691,2760,747"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="2575,771,2741,827"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="2575,851,2741,907"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="2575,931,2741,987"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="2569,1011,2747,1067"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="2569,225,2747,281"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="1537,456,1721,497"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="1811,461,1987,503"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="1547,305,1711,331"/>
<area shape="rect" id="node31" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="1802,297,1997,339"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="1547,75,1711,116"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="1537,144,1721,185"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="1807,71,1991,112"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="2087,71,2237,112"/>
<area shape="rect" id="node36" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="2059,5,2265,47"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="1808,144,1991,185"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="2087,137,2237,193"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364" title="foedus::xct::CurrentLock\lList::try_async_multiple_locks" alt="" coords="989,692,1188,733"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1243,633,1465,675"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="987,575,1191,616"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="1517,633,1740,675"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1788,605,2011,647"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="1797,396,2001,437"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab23e6efe1f2fb69b13cc9559e56e2181"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::cancel_async_single_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00724">724</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">get_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l01139">foedus::xct::RwLockableXctId::get_key_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00163">foedus::xct::LockEntry::is_enough()</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00130">foedus::xct::LockEntry::lock_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00144">foedus::xct::LockEntry::mcs_block_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00139">foedus::xct::LockEntry::taken_mode_</a>.</p>
<div class="fragment"><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                            {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  LockEntry* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!lock_entry-&gt;is_enough());</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  McsRwLock* lock_addr = lock_entry-&gt;lock_-&gt;get_key_lock();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    mcs_rw_impl-&gt;cancel_async_rw_reader(lock_addr, lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    mcs_rw_impl-&gt;cancel_async_rw_writer(lock_addr, lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  lock_entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;}</div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ab23e6efe1f2fb69b13cc9559e56e2181_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ab23e6efe1f2fb69b13cc9559e56e2181_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ab23e6efe1f2fb69b13cc9559e56e2181_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ab23e6efe1f2fb69b13cc9559e56e2181_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="265,5,429,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="256,71,439,112"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="271,136,424,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="487,5,651,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0da52220a86285f625d057e4db4faab4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::cbegin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00373">373</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9640c2cb1590155356189c7b8f09040e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::cend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00374">374</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abb020fdb3951460f9c283d4700696ad2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::clear_entries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00096">96</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00130">foedus::xct::LockEntry::lock_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00139">foedus::xct::LockEntry::taken_mode_</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00125">foedus::xct::LockEntry::universal_lock_id_</a>.</p>

<p>Referenced by <a class="el" href="xct_8hpp_source.html#l00079">foedus::xct::Xct::activate()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00076">CurrentLockList()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00086">init()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00997">foedus::xct::XctManagerPimpl::release_and_clear_all_current_locks()</a>, and <a class="el" href="retrospective__lock__list_8cpp_source.html#l00109">uninit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                    {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  last_active_entry_ = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  last_locked_entry_ = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span> (array_) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Dummy entry</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    array_[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a> = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    array_[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">lock_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    array_[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    array_[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_ac4dd063e8f157e49b468d9acb3efa276"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">foedus::xct::LockEntry::universal_lock_id_</a></div><div class="ttdeci">UniversalLockId universal_lock_id_</div><div class="ttdoc">Used to order locks in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00125">retrospective_lock_list.hpp:125</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a6dd08e0e30b67bb07a86dfd66dba2fd1"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">foedus::xct::LockEntry::preferred_mode_</a></div><div class="ttdeci">LockMode preferred_mode_</div><div class="ttdoc">Whick lock mode we should take according to RLL. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00136">retrospective_lock_list.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a045022b5415f8fa093fe7ec0ff17b565"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">foedus::xct::LockEntry::taken_mode_</a></div><div class="ttdeci">LockMode taken_mode_</div><div class="ttdoc">Whick lock mode we have taken during the current run (of course initially kNoLock) ...</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00139">retrospective_lock_list.hpp:139</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a1a081cde83f98cb29241c65708ac84ed"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">foedus::xct::LockEntry::lock_</a></div><div class="ttdeci">RwLockableXctId * lock_</div><div class="ttdoc">Virtual address of the lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00130">retrospective_lock_list.hpp:130</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_abb020fdb3951460f9c283d4700696ad2_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_abb020fdb3951460f9c283d4700696ad2_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_abb020fdb3951460f9c283d4700696ad2_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_abb020fdb3951460f9c283d4700696ad2_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="255,13,419,39"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a706b0c0a7f4c44b0f9dd395154873780" title="foedus::xct::CurrentLock\lList::CurrentLockList" alt="" coords="255,64,419,105"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483" title="foedus::xct::CurrentLock\lList::init" alt="" coords="255,129,419,171"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="217,195,457,236"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4" title="foedus::xct::CurrentLock\lList::uninit" alt="" coords="255,260,419,301"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="505,5,700,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="764,5,927,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="519,110,686,137"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="753,96,937,137"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="748,161,943,203"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="505,220,700,261"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="991,161,1153,203"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="764,227,927,268"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1CurrentLockList.html#a040661fef567664e4f223f327d4e6a90" title="foedus::xct::CurrentLock\lList::~CurrentLockList" alt="" coords="521,285,685,327"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad34e69a6289f0860fe000c3bbecda1cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00372">372</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00826">giveup_all_after()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">release_all_after()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ad34e69a6289f0860fe000c3bbecda1cb_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ad34e69a6289f0860fe000c3bbecda1cb_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ad34e69a6289f0860fe000c3bbecda1cb_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ad34e69a6289f0860fe000c3bbecda1cb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="217,842,381,883"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="217,963,381,1005"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="429,785,613,826"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="665,749,841,790"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="921,661,1072,717"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="913,741,1080,797"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1201,599,1335,641"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1471,406,1605,447"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1455,472,1621,528"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1455,552,1621,608"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1455,632,1621,688"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1455,712,1621,768"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1436,792,1640,848"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1455,872,1621,928"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1455,952,1621,1008"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1455,45,1621,101"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1449,165,1627,221"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1449,325,1627,381"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1698,486,1873,527"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1698,552,1873,608"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1698,632,1873,688"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1698,712,1873,768"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1700,792,1871,848"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1698,872,1873,928"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1698,952,1873,1008"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1698,5,1873,61"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1695,85,1876,141"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1947,125,2129,181"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1947,45,2129,101"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1699,405,1872,461"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1696,165,1875,221"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1699,245,1872,301"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1693,325,1877,381"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1931,446,2145,487"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1939,381,2137,422"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="439,963,603,1005"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="429,1033,613,1074"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="661,963,845,1005"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="921,930,1072,971"/>
<area shape="rect" id="node45" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="893,995,1100,1037"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="1148,1033,1388,1074"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1688,1098,1883,1139"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="1441,1033,1635,1074"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1957,1098,2119,1139"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="1704,1033,1867,1074"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="662,1069,845,1110"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="921,1061,1072,1117"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="899,1142,1094,1183"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1171,1142,1365,1183"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a75e45c9dd7129e1f202252cf124e76ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::get_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00350">350</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;{ <span class="keywordflow">return</span> array_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a75e45c9dd7129e1f202252cf124e76ff_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a75e45c9dd7129e1f202252cf124e76ff_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a75e45c9dd7129e1f202252cf124e76ff_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a75e45c9dd7129e1f202252cf124e76ff_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="217,5,412,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="460,5,655,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="703,5,897,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="945,5,1108,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ca03e6543963a43121db4c7fb44fe6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::get_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00351">351</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{ <span class="keywordflow">return</span> array_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5f33e3dc5973ab4010adb9e5de2fc749"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::CurrentLockList::get_capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00360">360</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{ <span class="keywordflow">return</span> capacity_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab360f7fc3d8c0880b394084d45e492e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::get_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">352</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00362">is_valid_entry()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00724">cancel_async_single_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00385">get_max_locked_id()</a>, <a class="el" href="xct__manager__pimpl_8hpp_source.html#l00292">foedus::xct::CurrentLockListIteratorForWriteSet::next_writes()</a>, <a class="el" href="xct_8cpp_source.html#l00334">foedus::xct::Xct::on_record_read_take_locks_if_needed()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00696">retry_async_single_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00649">try_async_single_lock()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00569">try_or_acquire_single_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                             {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a78b6d1612fda232b7e8c52dd3f6c2504"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">foedus::xct::CurrentLockList::is_valid_entry</a></div><div class="ttdeci">bool is_valid_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00362">retrospective_lock_list.hpp:362</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="217,5,381,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ab360f7fc3d8c0880b394084d45e492e9_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181" title="foedus::xct::CurrentLock\lList::cancel_async_single_lock" alt="" coords="219,664,421,706"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3" title="foedus::xct::CurrentLock\lList::get_max_locked_id" alt="" coords="779,454,943,495"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#a08009fe2c6acb0bf1c484e194dfe7bb4" title="Look for next record&#39;s write&#45;set(s). " alt="" coords="238,964,402,1020"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="1299,840,1466,896"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9" title="foedus::xct::CurrentLock\lList::retry_async_single_lock" alt="" coords="225,1044,415,1086"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab" title="foedus::xct::CurrentLock\lList::try_async_single_lock" alt="" coords="230,1110,410,1151"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="217,847,423,888"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761" title="foedus::thread::ThreadPimpl\l::cll_get_max_locked_id" alt="" coords="1039,435,1223,476"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="1291,287,1475,328"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="1523,250,1673,291"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1979,25,2152,81"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1737,242,1910,298"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1979,402,2152,458"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1973,162,2157,218"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1737,402,1910,458"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1737,162,1910,218"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1734,82,1913,138"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="1733,533,1914,589"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1979,322,2152,378"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1976,242,2155,298"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1975,573,2156,629"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="471,964,701,1020"/>
<area shape="rect" id="node21" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1531,922,1665,963"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1756,1094,1891,1135"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1741,1160,1906,1216"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1741,1240,1906,1296"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1741,1320,1906,1376"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1741,693,1906,749"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1721,773,1925,829"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1741,853,1906,909"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1741,933,1906,989"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1741,1013,1906,1069"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1735,613,1912,669"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1735,322,1912,378"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1978,1167,2153,1208"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1978,1240,2153,1296"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1978,1320,2153,1376"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1978,693,2153,749"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1980,773,2151,829"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1978,853,2153,909"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1978,933,2153,989"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1978,1013,2153,1069"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364" title="foedus::xct::CurrentLock\lList::try_async_multiple_locks" alt="" coords="487,1110,685,1151"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="475,782,697,823"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="484,847,688,888"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="749,756,972,798"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1020,730,1243,771"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="759,847,963,888"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="1034,847,1229,888"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af67e1af35b36686bda298171dd4c9991"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* foedus::xct::CurrentLockList::get_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00356">356</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00362">is_valid_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                                         {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a78b6d1612fda232b7e8c52dd3f6c2504"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">foedus::xct::CurrentLockList::is_valid_entry</a></div><div class="ttdeci">bool is_valid_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00362">retrospective_lock_list.hpp:362</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_af67e1af35b36686bda298171dd4c9991_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_af67e1af35b36686bda298171dd4c9991_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_af67e1af35b36686bda298171dd4c9991_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_af67e1af35b36686bda298171dd4c9991_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="217,5,381,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af24dd2ea6848b84443095530b3c25d8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::get_last_active_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00361">361</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;{ <span class="keywordflow">return</span> last_active_entry_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad18887a3fb16dc1ca458892ce4b0b27c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::get_last_locked_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>largest index of entries that are already locked. kLockListPositionInvalid if no entry is locked. </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00383">383</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;{ <span class="keywordflow">return</span> last_locked_entry_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ad18887a3fb16dc1ca458892ce4b0b27c_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ad18887a3fb16dc1ca458892ce4b0b27c_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ad18887a3fb16dc1ca458892ce4b0b27c_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ad18887a3fb16dc1ca458892ce4b0b27c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="232,5,427,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="475,5,669,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="717,5,912,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="960,5,1123,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a398ec264786992d102b8edd74d5767b3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> foedus::xct::CurrentLockList::get_max_locked_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the biggest Id of locks actually locked. If none, kNullUniversalLockId. </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00385">385</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">get_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00125">foedus::xct::LockEntry::universal_lock_id_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00930">foedus::thread::ThreadPimpl::cll_get_max_locked_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                                            {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (last_locked_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(last_locked_entry_)-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_ac4dd063e8f157e49b468d9acb3efa276"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">foedus::xct::LockEntry::universal_lock_id_</a></div><div class="ttdeci">UniversalLockId universal_lock_id_</div><div class="ttdoc">Used to order locks in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00125">retrospective_lock_list.hpp:125</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="217,5,381,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="429,5,593,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a398ec264786992d102b8edd74d5767b3_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761" title="foedus::thread::ThreadPimpl\l::cll_get_max_locked_id" alt="" coords="217,899,401,941"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="449,899,633,941"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="681,899,832,941"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1367,1243,1540,1299"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="884,552,1057,608"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1117,320,1290,376"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1111,819,1295,875"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="884,385,1057,441"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="884,892,1057,948"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1639,1293,1817,1349"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="880,1373,1061,1429"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1637,1613,1819,1669"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1641,1195,1815,1251"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a70b1c5e023fa0aac150e7b607e37727c" title="Deliberately causes splits under the volatile root of first layer, or &quot;fatify&quot; it. " alt="" coords="1895,1195,2068,1251"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1367,152,1540,208"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1114,552,1293,608"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1621,511,1835,553"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1629,609,1827,650"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1641,232,1815,288"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1641,85,1815,141"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1609,166,1847,207"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1613,397,1843,438"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1635,5,1821,61"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1367,552,1540,608"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1367,632,1540,688"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1367,232,1540,288"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1359,312,1548,368"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1356,392,1551,448"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1360,472,1547,528"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1359,712,1548,768"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1347,86,1559,127"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1345,21,1561,62"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1367,872,1540,928"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1367,792,1540,848"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1117,1126,1290,1197"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1117,899,1290,941"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1109,965,1297,1021"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1117,1045,1290,1101"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a3ca58d4acdbc13f9cfd341d95f45caa2" title="foedus::storage::masstree\l::MasstreeCursor::open\l_normalized" alt="" coords="1367,952,1540,1008"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="1362,1032,1545,1088"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1367,1112,1540,1168"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1908,1293,2055,1349"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1113,1373,1294,1429"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1363,1453,1544,1509"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1363,1373,1544,1429"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1637,1453,1819,1509"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1646,1533,1810,1589"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1646,1373,1810,1429"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1907,1613,2056,1669"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6db689767722f1d30821d63144bf8bde"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::get_or_add_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>lock_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a>&#160;</td>
          <td class="paramname"><em>preferred_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness. </p>
<p>If there is an existing entry for the lock, it just returns its position. If not, this method creates a new entry with taken_mode=kNoLock. </p><dl class="section return"><dt>Returns</dt><dd>the position of the newly added entry. kLockListPositionInvalid means the list was full and couldn't add (which is very unlikely, tho). </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Do not frequently use this method. You should batch your insert when you can. This method is used when we couldn't batch/expect the new entry. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001" title="Create entries for all write-sets in one-shot. ">batch_insert_write_placeholders()</a> </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00204">204</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">assert_sorted()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00196">lower_bound()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00150">foedus::xct::LockEntry::set()</a>, and <a class="el" href="xct__id_8hpp_source.html#l01226">foedus::xct::xct_id_to_universal_lock_id()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00334">foedus::xct::Xct::on_record_read_take_locks_if_needed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                           {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keywordtype">id</span> == <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(volatile_page_resolver_, lock));</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// Easy case? (lock &gt;= the last entry)</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> insert_pos = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573">lower_bound</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// Larger than all existing entries? Append to the last!</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (insert_pos &gt; last_active_entry_) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos == last_active_entry_ + 1U);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> new_pos = issue_new_position();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    array_[new_pos].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">set</a>(<span class="keywordtype">id</span>, lock, preferred_mode, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_pos == insert_pos);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> new_pos;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// lower_bound returns the first entry that is NOT less than. is it equal?</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array_[insert_pos].universal_lock_id_ &gt;= <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">if</span> (array_[insert_pos].universal_lock_id_ == <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">// Found existing!</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (array_[insert_pos].preferred_mode_ &lt; preferred_mode) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      array_[insert_pos].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> = preferred_mode;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">return</span> insert_pos;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;not an easy case. We need to adjust the order. This is costly!&quot;</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos &lt;= last_active_entry_);  <span class="comment">// otherwise we went into the 1st branch</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array_[insert_pos].universal_lock_id_ &gt; <span class="keywordtype">id</span>);  <span class="comment">// if ==, we went into the 2nd branch</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos == 1U || array_[insert_pos - 1U].universal_lock_id_ &lt; <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> new_last_pos = issue_new_position();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_last_pos &gt; insert_pos);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  uint64_t moved_bytes = <span class="keyword">sizeof</span>(LockEntry) * (new_last_pos - insert_pos);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  std::memmove(array_ + insert_pos + 1U, array_ + insert_pos, moved_bytes);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Re-sorted. hope this won&#39;t happen often&quot;</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  array_[insert_pos].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">set</a>(<span class="keywordtype">id</span>, lock, preferred_mode, <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (last_locked_entry_ &gt;= insert_pos) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    ++last_locked_entry_;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">return</span> insert_pos;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a54190c5faf4f6943043c1d83ed435f44"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">foedus::xct::LockEntry::set</a></div><div class="ttdeci">void set(UniversalLockId id, RwLockableXctId *lock, LockMode preferred_mode, LockMode taken_mode)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00150">retrospective_lock_list.hpp:150</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_af0b8f0d95e3ae99293ffc14cf4067573"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573">foedus::xct::CurrentLockList::lower_bound</a></div><div class="ttdeci">LockListPosition lower_bound(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::lower_bound() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00196">retrospective_lock_list.cpp:196</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ae36b3307af22f430a8f11765e3e57748"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">foedus::xct::xct_id_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId xct_id_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, RwLockableXctId *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01226">xct_id.hpp:1226</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a6dd08e0e30b67bb07a86dfd66dba2fd1"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">foedus::xct::LockEntry::preferred_mode_</a></div><div class="ttdeci">LockMode preferred_mode_</div><div class="ttdoc">Whick lock mode we should take according to RLL. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00136">retrospective_lock_list.hpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_acbed8e324b88389217b42a132e0547b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">foedus::xct::CurrentLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00555">retrospective_lock_list.hpp:555</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="656,125,852,167"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="225,64,389,105"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="444,125,608,167"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44" title="foedus::xct::LockEntry::set" alt="" coords="217,293,396,319"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="453,243,599,284"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="900,125,1112,167"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1169,118,1345,174"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="444,60,608,101"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="673,60,835,101"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="931,5,1081,47"/>
<area shape="rect" id="node9" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="923,71,1089,98"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="925,227,1087,268"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1160,285,1353,327"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1176,220,1337,261"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a6db689767722f1d30821d63144bf8bde_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="217,391,384,447"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="432,399,567,440"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="649,5,784,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="634,71,799,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="634,151,799,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="634,231,799,287"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="634,311,799,367"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="615,391,819,447"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="634,471,799,527"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="634,551,799,607"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="634,631,799,687"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="628,711,805,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="628,1111,805,1167"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="871,79,1046,120"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="871,151,1046,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="871,231,1046,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="871,311,1046,367"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="873,391,1044,447"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="871,471,1046,527"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="871,551,1046,607"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="871,631,1046,687"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="868,711,1049,767"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1116,631,1297,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1116,711,1297,767"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1391,551,1572,607"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1399,631,1563,687"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1399,711,1563,767"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1120,951,1293,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="869,1111,1048,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="872,1425,1045,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="867,1563,1051,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1374,799,1589,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1382,864,1581,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1395,1157,1568,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1395,930,1568,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1363,1011,1600,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1366,1257,1597,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1388,1077,1575,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1120,791,1293,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1120,871,1293,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1120,1031,1293,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1112,1111,1301,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1109,1191,1304,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1113,1271,1300,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1112,1351,1301,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1101,1432,1313,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1099,1497,1315,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1120,1563,1293,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1120,1643,1293,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e57fd76a57791018ce74dca876d8886"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; foedus::xct::CurrentLockList::get_volatile_page_resolver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00375">375</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                                                             {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> volatile_page_resolver_;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ac4e854509ec8a1cf9a70fcba501a68"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::giveup_all_after </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This <em>gives-up</em> locks in CLL that are not yet taken. </p>
<p>preferred mode will be set to either NoLock or same as taken_mode, and all incomplete async locks will be cancelled. Unlike <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries()</a>, this leaves the entries. </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00826">826</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">assert_sorted()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00371">begin()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00372">end()</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, and <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00887">foedus::thread::ThreadPimpl::cll_giveup_all_locks_after()</a>.</p>
<div class="fragment"><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                                                                               {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  uint32_t givenup_read_locks = 0;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  uint32_t givenup_write_locks = 0;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  uint32_t givenup_upgrades = 0;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  uint32_t already_enough_locks = 0;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  uint32_t canceled_async_read_locks = 0;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  uint32_t canceled_async_write_locks = 0;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">for</span> (LockEntry* entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">begin</a>(); entry != <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">end</a>(); ++entry) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;universal_lock_id_ &lt;= address) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;is_enough()) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      ++already_enough_locks;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      ++givenup_upgrades;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      entry-&gt;preferred_mode_ = entry-&gt;taken_mode_;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;mcs_block_) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_reader(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        ++canceled_async_read_locks;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_writer(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        ++canceled_async_write_locks;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      entry-&gt;preferred_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        ++givenup_read_locks;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        ++givenup_write_locks;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      entry-&gt;preferred_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  giveup_all_after_debuglog(</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    givenup_read_locks,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    givenup_write_locks,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    givenup_upgrades,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    already_enough_locks,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    canceled_async_read_locks,</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    canceled_async_write_locks);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}</div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ad34e69a6289f0860fe000c3bbecda1cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">foedus::xct::CurrentLockList::end</a></div><div class="ttdeci">LockEntry * end()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00372">retrospective_lock_list.hpp:372</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_acbed8e324b88389217b42a132e0547b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">foedus::xct::CurrentLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00555">retrospective_lock_list.hpp:555</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ae0cbd2f6b369d0340c3222f124fe122b"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">foedus::xct::CurrentLockList::begin</a></div><div class="ttdeci">LockEntry * begin()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00371">retrospective_lock_list.hpp:371</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="217,75,381,117"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="217,141,381,182"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="217,206,381,247"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="429,75,593,117"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="641,27,837,69"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="659,122,820,163"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="885,13,1097,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1154,5,1330,61"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="917,78,1066,119"/>
<area shape="rect" id="node9" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="909,144,1074,171"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="910,195,1073,237"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1145,162,1339,203"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1161,227,1323,269"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a3ac4e854509ec8a1cf9a70fcba501a68_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="217,359,401,400"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="449,359,625,400"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="681,311,832,367"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="673,391,840,447"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="888,399,1023,440"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1105,5,1240,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1090,71,1255,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1090,151,1255,207"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1090,231,1255,287"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1090,311,1255,367"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1071,391,1275,447"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1090,471,1255,527"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1090,551,1255,607"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1090,631,1255,687"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1084,711,1261,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1084,1111,1261,1167"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1327,79,1502,120"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1327,151,1502,207"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1327,231,1502,287"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1327,311,1502,367"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1329,391,1500,447"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1327,471,1502,527"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1327,551,1502,607"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1327,631,1502,687"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1324,711,1505,767"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1572,631,1753,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1572,711,1753,767"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1576,951,1749,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1325,1111,1504,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1328,1425,1501,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1323,1563,1507,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1830,799,2045,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1838,864,2037,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1851,1157,2024,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1851,930,2024,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1819,1011,2056,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1822,1257,2053,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1844,1077,2031,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1576,791,1749,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1576,871,1749,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1576,1031,1749,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1568,1111,1757,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1565,1191,1760,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1569,1271,1756,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1568,1351,1757,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1557,1432,1769,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1555,1497,1771,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1576,1563,1749,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1576,1643,1749,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10ee69a6e7731cbebe3511fcf9809bc7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::giveup_all_at_and_after </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00886">886</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>.</p>
<div class="fragment"><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                            {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (address == <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    giveup_all_after&lt;MCS_RW_IMPL&gt;(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>, mcs_rw_impl);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    giveup_all_after&lt;MCS_RW_IMPL&gt;(address - 1U, mcs_rw_impl);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac79149bb167fa69b2afc7861c0c70483"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> *&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>resolver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00086">86</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8cpp_source.html#l00096">clear_entries()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                                    {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  array_ = array;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  capacity_ = capacity;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  volatile_page_resolver_ = resolver;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_abb020fdb3951460f9c283d4700696ad2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">foedus::xct::CurrentLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00096">retrospective_lock_list.cpp:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2" title="foedus::xct::CurrentLock\lList::clear_entries" alt="" coords="217,5,381,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ac79149bb167fa69b2afc7861c0c70483_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="217,13,384,39"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="432,5,616,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a761b506c86d1d8e5681cab34fac1ad29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::CurrentLockList::is_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00365">365</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>

<p>Referenced by <a class="el" href="xct_8hpp_source.html#l00108">foedus::xct::Xct::deactivate()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>, and <a class="el" href="retrospective__lock__list_8cpp_source.html#l00445">prepopulate_for_retrospective_lock_list()</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{ <span class="keywordflow">return</span> last_active_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a761b506c86d1d8e5681cab34fac1ad29_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a761b506c86d1d8e5681cab34fac1ad29_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a761b506c86d1d8e5681cab34fac1ad29_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a761b506c86d1d8e5681cab34fac1ad29_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#abbc9a5e976aadfba9f1fbf9e9fb39a9a" title="Closes the transaction. " alt="" coords="217,74,396,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="687,71,881,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="225,175,389,231"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="444,8,639,49"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="929,71,1092,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="703,5,865,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="459,190,623,217"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="687,183,881,224"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="929,183,1092,224"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a78b6d1612fda232b7e8c52dd3f6c2504"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::CurrentLockList::is_valid_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00362">362</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">get_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                                  {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> &amp;&amp; pos &lt;= last_active_entry_;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a78b6d1612fda232b7e8c52dd3f6c2504_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a78b6d1612fda232b7e8c52dd3f6c2504_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a78b6d1612fda232b7e8c52dd3f6c2504_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a78b6d1612fda232b7e8c52dd3f6c2504_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="217,802,381,843"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181" title="foedus::xct::CurrentLock\lList::cancel_async_single_lock" alt="" coords="431,561,633,602"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3" title="foedus::xct::CurrentLock\lList::get_max_locked_id" alt="" coords="991,409,1155,450"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#a08009fe2c6acb0bf1c484e194dfe7bb4" title="Look for next record&#39;s write&#45;set(s). " alt="" coords="450,860,614,916"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="1511,765,1678,821"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9" title="foedus::xct::CurrentLock\lList::retry_async_single_lock" alt="" coords="437,941,627,982"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab" title="foedus::xct::CurrentLock\lList::try_async_single_lock" alt="" coords="442,1006,622,1047"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="429,743,635,785"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761" title="foedus::thread::ThreadPimpl\l::cll_get_max_locked_id" alt="" coords="1251,374,1435,415"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="1503,258,1687,299"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="1735,229,1885,270"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="2191,5,2364,61"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1949,261,2122,317"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="2191,403,2364,459"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="2185,123,2369,179"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1949,421,2122,477"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1949,101,2122,157"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1946,181,2125,237"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="2191,323,2364,379"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="2188,243,2367,299"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1CurrentLockListIteratorForWriteSet.html#af4f5b753e2ee5c978d11aaa3a6f38d1c" title="foedus::xct::CurrentLock\lListIteratorForWriteSet\l::CurrentLockListIteratorForWriteSet" alt="" coords="683,860,913,916"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1743,831,1877,873"/>
<area shape="rect" id="node21" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1968,553,2103,594"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1953,699,2118,755"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1953,779,2118,835"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1953,859,2118,915"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1953,939,2118,995"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1933,1019,2137,1075"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1953,1099,2118,1155"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1953,1179,2118,1235"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1953,1259,2118,1315"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1947,619,2124,675"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1947,341,2124,397"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="2190,706,2365,747"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="2190,779,2365,835"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="2190,859,2365,915"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="2190,939,2365,995"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="2192,1019,2363,1075"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="2190,1099,2365,1155"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="2190,1179,2365,1235"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="2190,1259,2365,1315"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="2187,619,2368,675"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364" title="foedus::xct::CurrentLock\lList::try_async_multiple_locks" alt="" coords="699,1006,897,1047"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="687,743,909,785"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="696,678,900,719"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="961,743,1184,785"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1232,743,1455,785"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="971,678,1175,719"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="1246,678,1441,719"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0b8f0d95e3ae99293ffc14cf4067573"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::CurrentLockList::lower_bound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analogous to std::lower_bound() for the given lock. </p>
<dl class="section return"><dt>Returns</dt><dd>Index of the fist entry whose lock_ is not less than lock. If no such entry, last_active_entry_ + 1U, whether last_active_entry_ is 0 or not. Thus the return value is always &gt;0. This is to immitate std::lower_bound's behavior. </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00196">196</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8cpp_source.html#l00204">get_or_add_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                                                        {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">return</span> lock_lower_bound&lt;CurrentLockList, LockEntry&gt;(*<span class="keyword">this</span>, lock);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="217,13,413,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="461,13,673,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="721,5,897,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_af0b8f0d95e3ae99293ffc14cf4067573_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="217,399,381,440"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="429,391,596,447"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="644,399,779,440"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="861,5,996,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="846,71,1011,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="846,151,1011,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="846,231,1011,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="846,311,1011,367"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="827,391,1031,447"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="846,471,1011,527"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="846,551,1011,607"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="846,631,1011,687"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="840,711,1017,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="840,1111,1017,1167"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1083,79,1258,120"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1083,151,1258,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1083,231,1258,287"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1083,311,1258,367"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1085,391,1256,447"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1083,471,1258,527"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1083,551,1258,607"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1083,631,1258,687"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1080,711,1261,767"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1328,631,1509,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1328,711,1509,767"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1603,591,1784,647"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1611,671,1775,727"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1332,951,1505,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1081,1111,1260,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1084,1425,1257,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1079,1563,1263,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1586,799,1801,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1594,864,1793,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1607,1157,1780,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1607,930,1780,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1575,1011,1812,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1578,1257,1809,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1600,1077,1787,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1332,791,1505,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1332,871,1505,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1332,1031,1505,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1324,1111,1513,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1321,1191,1516,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1325,1271,1512,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1324,1351,1513,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1313,1432,1525,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1311,1497,1527,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1332,1563,1505,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1332,1643,1505,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4a10e19f1d603ab47e74c605a9909fb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::prepopulate_for_retrospective_lock_list </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">RetrospectiveLockList</a> &amp;&#160;</td>
          <td class="paramname"><em>rll</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Another batch-insert method used at the beginning of a transaction. </p>
<p>When an <a class="el" href="classfoedus_1_1xct_1_1Xct.html" title="Represents a user transaction. ">Xct</a> has RLL, it will highly likely lock all of them. So, it pre-populates CLL entries for all of them at the beginning. This is both for simplicity and performance. </p><dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">is_empty()</a> : call this at the beginning of xct. </dd>
<dd>
!rll.<a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">is_empty()</a> : then why the heck are you calling. </dd></dl>

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00445">445</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00548">foedus::xct::RetrospectiveLockList::assert_sorted()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">assert_sorted()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00234">foedus::xct::RetrospectiveLockList::get_array()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00244">foedus::xct::RetrospectiveLockList::get_last_active_entry()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00248">foedus::xct::RetrospectiveLockList::is_empty()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00365">is_empty()</a>, and <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>

<p>Referenced by <a class="el" href="xct_8hpp_source.html#l00079">foedus::xct::Xct::activate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                                                                              {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">is_empty</a>());</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!rll.is_empty());</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  rll.assert_sorted();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="comment">// Because now we use LockEntry for both RLL and CLL, we can do just one memcpy</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  std::memcpy(array_ + 1U, rll.get_array() + 1U, <span class="keyword">sizeof</span>(LockEntry) * rll.get_last_active_entry());</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  last_active_entry_ = rll.get_last_active_entry();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  last_locked_entry_ = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_acbed8e324b88389217b42a132e0547b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">foedus::xct::CurrentLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00555">retrospective_lock_list.hpp:555</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a761b506c86d1d8e5681cab34fac1ad29"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">foedus::xct::CurrentLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00365">retrospective_lock_list.hpp:365</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1397c6847c1ee46ba9c09457b4f5866e" title="foedus::xct::Retrospective\lLockList::assert_sorted" alt="" coords="232,93,404,135"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="236,159,400,200"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="232,224,404,265"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#afeae5ce72d1c324ecc32dce36459340a" title="foedus::xct::Retrospective\lLockList::get_last_active_entry" alt="" coords="217,289,419,331"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="232,355,404,396"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29" title="foedus::xct::CurrentLock\lList::is_empty" alt="" coords="236,420,400,461"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a14d555cbd9ddee31c68c9c81ff84c129" title="foedus::xct::Retrospective\lLockList::assert_sorted_impl" alt="" coords="467,93,656,135"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="721,93,883,135"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="979,5,1129,47"/>
<area shape="rect" id="node6" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="971,71,1137,98"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="973,123,1135,164"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1208,57,1401,99"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1224,123,1385,164"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="479,159,643,200"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="704,163,900,204"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="948,192,1160,233"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1217,189,1393,245"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a4a10e19f1d603ab47e74c605a9909fb5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30" title="Begins the transaction. " alt="" coords="217,20,381,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="429,13,624,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="672,13,835,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace2e6a593d7b975f1756ce9eec0fd1f2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::release_all_after </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release all locks in CLL whose addresses are canonically ordered before the parameter. </p>
<p>This is used where we need to rule out the risk of deadlock. Unlike <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries()</a>, this leaves the entries. </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">753</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00555">assert_sorted()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00371">begin()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00372">end()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, and <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00876">foedus::thread::ThreadPimpl::cll_release_all_locks_after()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00473">release_all_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                                                                                                {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// Only this and below logics are implemented here because this needs to know about CLL.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// This is not quite about the lock algorithm itself. It&#39;s something on higher level.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  uint32_t released_read_locks = 0;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  uint32_t released_write_locks = 0;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  uint32_t already_released_locks = 0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  uint32_t canceled_async_read_locks = 0;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  uint32_t canceled_async_write_locks = 0;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> new_last_locked_entry = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">for</span> (LockEntry* entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">begin</a>(); entry != <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">end</a>(); ++entry) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;universal_lock_id_ &lt;= address) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        new_last_locked_entry = entry - array_;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        mcs_rw_impl-&gt;release_rw_reader(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        ++released_read_locks;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        mcs_rw_impl-&gt;release_rw_writer(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        ++released_write_locks;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      entry-&gt;taken_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;mcs_block_) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// Not locked yet, but we have mcs_block_ set, this means we tried it in</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// async mode, then still waiting or at least haven&#39;t confirmed that we acquired it.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="comment">// Cancel these &quot;retrieable&quot; locks to which we already pushed our qnode.</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_reader(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        ++canceled_async_read_locks;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_writer(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        ++canceled_async_write_locks;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      ++already_released_locks;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  last_locked_entry_ = new_last_locked_entry;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  release_all_after_debuglog(</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    released_read_locks,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    released_write_locks,</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    already_released_locks,</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    canceled_async_read_locks,</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    canceled_async_write_locks);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ad34e69a6289f0860fe000c3bbecda1cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">foedus::xct::CurrentLockList::end</a></div><div class="ttdeci">LockEntry * end()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00372">retrospective_lock_list.hpp:372</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_acbed8e324b88389217b42a132e0547b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">foedus::xct::CurrentLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00555">retrospective_lock_list.hpp:555</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ae0cbd2f6b369d0340c3222f124fe122b"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">foedus::xct::CurrentLockList::begin</a></div><div class="ttdeci">LockEntry * begin()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00371">retrospective_lock_list.hpp:371</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="641,27,837,69"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="217,86,381,127"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="217,151,381,193"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="217,217,381,258"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="885,13,1097,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1154,5,1330,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="429,86,593,127"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="659,122,820,163"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="917,78,1066,119"/>
<area shape="rect" id="node9" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="909,144,1074,171"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="910,195,1073,237"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1145,162,1339,203"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1161,227,1323,269"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ace2e6a593d7b975f1756ce9eec0fd1f2_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="217,86,401,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="227,151,391,193"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="450,86,633,127"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="709,5,860,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="687,86,882,127"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1224,86,1419,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1467,141,1661,182"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1709,141,1872,182"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="449,151,633,193"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="709,151,860,193"/>
<area shape="rect" id="node15" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="681,217,888,258"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="936,151,1176,193"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="1224,203,1419,245"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="1483,206,1645,247"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7e7c2cec33775df3d5e219b3b6e55974"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::release_all_at_and_after </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>same as release_all_after(address - 1) </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00815">815</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>.</p>
<div class="fragment"><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                            {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (address == <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    release_all_after&lt;MCS_RW_IMPL&gt;(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>, mcs_rw_impl);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    release_all_after&lt;MCS_RW_IMPL&gt;(address - 1U, mcs_rw_impl);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a069941b140019c23d86092e68cd9b331"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::release_all_locks </td>
          <td>(</td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<ul>
<li>Release all locks in CLL </li>
</ul>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00473">473</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">release_all_after()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00919">foedus::thread::ThreadPimpl::cll_release_all_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                                          {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">release_all_after</a>(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>, mcs_rw_impl);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ace2e6a593d7b975f1756ce9eec0fd1f2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">foedus::xct::CurrentLockList::release_all_after</a></div><div class="ttdeci">void release_all_after(UniversalLockId address, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">Release all locks in CLL whose addresses are canonically ordered before the parameter. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00753">retrospective_lock_list.hpp:753</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="217,119,381,161"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="853,27,1049,69"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="429,86,593,127"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="429,151,593,193"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="429,217,593,258"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1097,13,1309,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1366,5,1542,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="641,86,805,127"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="871,122,1032,163"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="1129,78,1278,119"/>
<area shape="rect" id="node10" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1121,144,1286,171"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1122,195,1285,237"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1357,162,1551,203"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1373,227,1535,269"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a069941b140019c23d86092e68cd9b331_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="217,68,401,109"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="477,35,628,76"/>
<area shape="rect" id="node9" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="449,100,656,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="704,35,944,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1235,5,1429,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="992,64,1187,105"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1477,5,1640,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="1251,71,1413,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7532b1cf91086e276b6318664bf68ca9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::CurrentLockList::retry_async_single_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00696">696</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">get_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l01139">foedus::xct::RwLockableXctId::get_key_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00163">foedus::xct::LockEntry::is_enough()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00162">foedus::xct::LockEntry::is_locked()</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00130">foedus::xct::LockEntry::lock_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00144">foedus::xct::LockEntry::mcs_block_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00139">foedus::xct::LockEntry::taken_mode_</a>.</p>
<div class="fragment"><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                            {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  LockEntry* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// Must be not taken yet, and must have pushed a qnode to the lock queue</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!lock_entry-&gt;is_enough());</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!lock_entry-&gt;is_locked());</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  McsRwLock* lock_addr = lock_entry-&gt;lock_-&gt;get_key_lock();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordtype">bool</span> acquired = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    acquired = mcs_rw_impl-&gt;retry_async_rw_writer(lock_addr, lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    acquired = mcs_rw_impl-&gt;retry_async_rw_reader(lock_addr, lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (acquired) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    lock_entry-&gt;taken_mode_ = lock_entry-&gt;preferred_mode_;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;is_locked());</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    last_locked_entry_ = std::max(last_locked_entry_, pos);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">return</span> acquired;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a7532b1cf91086e276b6318664bf68ca9_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a7532b1cf91086e276b6318664bf68ca9_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a7532b1cf91086e276b6318664bf68ca9_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a7532b1cf91086e276b6318664bf68ca9_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="244,13,440,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="260,78,424,119"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="251,143,433,185"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="265,209,419,250"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167" title="foedus::xct::LockEntry\l::is_locked" alt="" coords="265,274,419,315"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="488,13,700,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="748,5,924,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="512,78,676,119"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af61431071af14d67f681679267cd0364"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::try_async_multiple_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>upto_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00742">742</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00649">try_async_single_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                            {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos &lt;= last_active_entry_);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 1U; pos &lt;= upto_pos; ++pos) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">try_async_single_lock</a>(pos, mcs_rw_impl);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a1f903145f3f1b0f2a030e51eb981d6ab"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">foedus::xct::CurrentLockList::try_async_single_lock</a></div><div class="ttdeci">void try_async_single_lock(LockListPosition pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00649">retrospective_lock_list.hpp:649</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_af61431071af14d67f681679267cd0364_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_af61431071af14d67f681679267cd0364_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_af61431071af14d67f681679267cd0364_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_af61431071af14d67f681679267cd0364_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab" title="foedus::xct::CurrentLock\lList::try_async_single_lock" alt="" coords="252,136,432,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="496,5,660,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="501,71,655,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="487,136,669,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="984,217,1160,273"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="480,253,676,295"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="748,5,912,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="724,253,936,295"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f903145f3f1b0f2a030e51eb981d6ab"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::try_async_single_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00649">649</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00163">foedus::xct::AcquireAsyncRet::acquired_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00170">foedus::xct::AcquireAsyncRet::block_index_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00397">calculate_last_locked_entry_from()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">get_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l01139">foedus::xct::RwLockableXctId::get_key_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00163">foedus::xct::LockEntry::is_enough()</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00130">foedus::xct::LockEntry::lock_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00144">foedus::xct::LockEntry::mcs_block_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00139">foedus::xct::LockEntry::taken_mode_</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8hpp_source.html#l00742">try_async_multiple_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                            {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  LockEntry* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;is_enough()) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  McsRwLock* lock_addr = lock_entry-&gt;lock_-&gt;get_key_lock();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;taken_mode_ != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// This is reader-&gt;writer upgrade.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// We simply release read-lock first then take write-lock in this case.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// In traditional 2PL, such an unlock-then-lock violates serializability,</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// but we guarantee serializability by read-verification anyways.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// We can release any lock anytime.. great flexibility!</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    mcs_rw_impl-&gt;release_rw_reader(lock_addr, lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    lock_entry-&gt;taken_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    last_locked_entry_ = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(pos - 1U);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// This function is for pushing the queue node in the extended rwlock.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// Doomed if we already have a queue node.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_ == 0);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Don&#39;t really care canonical order here, just send out the request.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  AcquireAsyncRet async_ret;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    async_ret = mcs_rw_impl-&gt;acquire_async_rw_writer(lock_addr);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    async_ret = mcs_rw_impl-&gt;acquire_async_rw_reader(lock_addr);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(async_ret.block_index_);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  lock_entry-&gt;mcs_block_ = async_ret.block_index_;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (async_ret.acquired_) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    lock_entry-&gt;taken_mode_ = lock_entry-&gt;preferred_mode_;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;is_enough());</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a03e818494c4d716f9fc996081f6c419f"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">foedus::xct::CurrentLockList::calculate_last_locked_entry_from</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry_from(LockListPosition from) const </div><div class="ttdoc">Only searches among entries at or before "from". </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00397">retrospective_lock_list.hpp:397</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="233,5,429,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="737,27,913,83"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="249,123,413,164"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="240,188,423,229"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="255,253,408,295"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="477,5,689,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="501,123,665,164"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a1f903145f3f1b0f2a030e51eb981d6ab_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364" title="foedus::xct::CurrentLock\lList::try_async_multiple_locks" alt="" coords="233,5,432,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad7029aa2b4a2d3ec394aa0a0b378b088"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::CurrentLockList::try_or_acquire_multiple_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>upto_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquire multiple locks up to the given position in canonical order. </p>
<p>This is invoked by the thread to keep itself in canonical mode. This method is <em>unconditional</em>, meaning waits forever until we acquire the locks. Hence, this method must be invoked when the thread is still in canonical mode. Otherwise, it risks deadlock. </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00636">636</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00569">try_or_acquire_single_lock()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00909">foedus::thread::ThreadPimpl::cll_try_or_acquire_multiple_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                            {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos &lt;= last_active_entry_);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// Especially in this case, we probably should release locks after upto_pos first.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 1U; pos &lt;= upto_pos; ++pos) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">try_or_acquire_single_lock</a>(pos, mcs_rw_impl));</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aa8023ecc3dc58816a010a3415ebfc1dd"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">foedus::xct::CurrentLockList::try_or_acquire_single_lock</a></div><div class="ttdeci">ErrorCode try_or_acquire_single_lock(LockListPosition pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00569">retrospective_lock_list.hpp:569</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="276,165,481,207"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="545,5,709,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="551,71,704,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="536,136,719,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1033,217,1209,273"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="529,253,725,295"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167" title="foedus::xct::LockEntry\l::is_locked" alt="" coords="551,319,704,360"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="797,5,961,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="773,253,985,295"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_ad7029aa2b4a2d3ec394aa0a0b378b088_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="276,399,499,440"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="547,399,769,440"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="817,391,984,447"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1032,399,1167,440"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1249,5,1384,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1234,71,1399,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1234,151,1399,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1234,231,1399,287"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1234,311,1399,367"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1215,391,1419,447"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1234,471,1399,527"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1234,551,1399,607"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1234,631,1399,687"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1228,711,1405,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1228,1111,1405,1167"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1471,79,1646,120"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1471,151,1646,207"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1471,231,1646,287"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1471,311,1646,367"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1473,391,1644,447"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1471,471,1646,527"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1471,551,1646,607"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1471,631,1646,687"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1468,711,1649,767"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1716,631,1897,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1716,711,1897,767"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1991,631,2172,687"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1720,951,1893,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1469,1111,1648,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1472,1425,1645,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1467,1563,1651,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1974,799,2189,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1982,864,2181,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1995,1157,2168,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1995,930,2168,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1963,1011,2200,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1966,1257,2197,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1988,1077,2175,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1720,791,1893,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1720,871,1893,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1720,1031,1893,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1712,1111,1901,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1709,1191,1904,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1713,1271,1900,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1712,1351,1901,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1701,1432,1913,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1699,1497,1915,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1720,1563,1893,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1720,1643,1893,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa8023ecc3dc58816a010a3415ebfc1dd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_RW_IMPL &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::CurrentLockList::try_or_acquire_single_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_RW_IMPL *&#160;</td>
          <td class="paramname"><em>mcs_rw_impl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. </p>
<p>Inline definitions of <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html" title="Sorted list of all locks, either read-lock or write-lock, taken in the current run. ">CurrentLockList</a> methods below.</p>
<p>To avoid vtable and allow inlining, we define them at the bottom of this file. Acquire one lock in this CLL.</p>
<p>This method automatically checks if we are following canonical mode, and acquire the lock unconditionally when in canonical mode (never returns until acquire), and try the lock instanteneously when not in canonical mode (returns RaceAbort immediately).</p>
<p>These are inlined primarily because they receive a template param, not because we want to inline for performance. We could do explicit instantiations, but not that lengthy, either. Just inlining them is easier in this case. </p>

<p>Definition at line <a class="el" href="retrospective__lock__list_8hpp_source.html#l00569">569</a> of file <a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00405">assert_last_locked_entry()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00397">calculate_last_locked_entry_from()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">get_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l01139">foedus::xct::RwLockableXctId::get_key_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00163">foedus::xct::LockEntry::is_enough()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00162">foedus::xct::LockEntry::is_locked()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00206">foedus::kErrorCodeXctLockAbort</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00100">foedus::xct::kNoLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00130">foedus::xct::LockEntry::lock_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00144">foedus::xct::LockEntry::mcs_block_</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00136">foedus::xct::LockEntry::preferred_mode_</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00139">foedus::xct::LockEntry::taken_mode_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00898">foedus::thread::ThreadPimpl::cll_try_or_acquire_single_lock()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00636">try_or_acquire_multiple_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                            {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  LockEntry* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;is_enough()) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  McsRwLock* lock_addr = lock_entry-&gt;lock_-&gt;get_key_lock();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;taken_mode_ != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// This is reader-&gt;writer upgrade.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// We simply release read-lock first then take write-lock in this case.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// In traditional 2PL, such an unlock-then-lock violates serializability,</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// but we guarantee serializability by read-verification anyways.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// We can release any lock anytime.. great flexibility!</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    mcs_rw_impl-&gt;release_rw_reader(lock_addr, lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    lock_entry-&gt;taken_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    last_locked_entry_ = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(pos - 1U);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// This method is for unconditional acquire and try, not aync/retry.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// If we have a queue node already, something was misused.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_ == 0);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Now we need to take the lock. Are we in canonical mode?</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (last_locked_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> || last_locked_entry_ &lt; pos) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// yay, we are in canonical mode. we can unconditionally get the lock</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);  <span class="comment">// not a lock upgrade, either</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      lock_entry-&gt;mcs_block_ = mcs_rw_impl-&gt;acquire_unconditional_rw_writer(lock_addr);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      lock_entry-&gt;mcs_block_ = mcs_rw_impl-&gt;acquire_unconditional_rw_reader(lock_addr);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    lock_entry-&gt;taken_mode_ = lock_entry-&gt;preferred_mode_;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    last_locked_entry_ = pos;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// hmm, we violated canonical mode. has a risk of deadlock.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Let&#39;s just try acquire the lock and immediately give up if it fails.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// The RLL will take care of the next run.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// TODO(Hideaki) release some of the lock we have taken to restore canonical mode.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// We haven&#39;t imlpemented this optimization yet.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_ == 0);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      lock_entry-&gt;mcs_block_ = mcs_rw_impl-&gt;acquire_try_rw_writer(lock_addr);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      lock_entry-&gt;mcs_block_ = mcs_rw_impl-&gt;acquire_try_rw_reader(lock_addr);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (lock_entry-&gt;mcs_block_ == 0) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">kErrorCodeXctLockAbort</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    lock_entry-&gt;taken_mode_ = lock_entry-&gt;preferred_mode_;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;is_locked());</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">foedus::kErrorCodeXctLockAbort</a></div><div class="ttdoc">0x0AA1 : "XCTION : Lock acquire failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00206">error_code.hpp:206</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a03e818494c4d716f9fc996081f6c419f"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">foedus::xct::CurrentLockList::calculate_last_locked_entry_from</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry_from(LockListPosition from) const </div><div class="ttdoc">Only searches among entries at or before "from". </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00397">retrospective_lock_list.hpp:397</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="259,5,455,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="763,27,939,83"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="275,123,439,164"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="265,188,448,229"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="280,253,433,295"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167" title="foedus::xct::LockEntry\l::is_locked" alt="" coords="280,319,433,360"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="503,5,715,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="527,123,691,164"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_aa8023ecc3dc58816a010a3415ebfc1dd_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="268,330,472,371"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="259,395,481,437"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="539,330,743,371"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="1085,388,1251,444"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="814,234,1009,275"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1343,566,1478,607"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1591,354,1725,395"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1575,420,1741,476"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1575,500,1741,556"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1575,580,1741,636"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1575,660,1741,716"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1556,740,1760,796"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1575,820,1741,876"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1575,900,1741,956"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1575,980,1741,1036"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1569,193,1747,249"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1569,273,1747,329"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1813,431,1987,473"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1813,500,1987,556"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1813,580,1987,636"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1813,660,1987,716"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1815,740,1985,796"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1813,820,1987,876"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1813,900,1987,956"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1813,980,1987,1036"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1809,60,1991,116"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="2047,5,2228,61"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="2047,85,2228,141"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="2051,177,2224,233"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1811,351,1989,407"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1813,140,1987,196"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1808,220,1992,276"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="2294,338,2509,379"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="2302,414,2501,455"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="2315,523,2488,579"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="2315,112,2488,168"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="2283,193,2520,234"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="2286,258,2517,299"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="2308,32,2495,88"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="2051,337,2224,393"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="2051,417,2224,473"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="2051,577,2224,633"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="2043,257,2232,313"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="2040,497,2235,553"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1071,149,1265,190"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1313,138,1508,179"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1577,127,1739,169"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="529,395,752,437"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="800,395,1023,437"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a55773472fd16796b2b28cc6ca4840ec4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::CurrentLockList::uninit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00109">109</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8cpp_source.html#l00096">clear_entries()</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8cpp_source.html#l00082">~CurrentLockList()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                             {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  array_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  capacity_ = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries</a>();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_abb020fdb3951460f9c283d4700696ad2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">foedus::xct::CurrentLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00096">retrospective_lock_list.cpp:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_cgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2" title="foedus::xct::CurrentLock\lList::clear_entries" alt="" coords="217,5,381,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_icgraph" id="classfoedus_1_1xct_1_1CurrentLockList_a55773472fd16796b2b28cc6ca4840ec4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a040661fef567664e4f223f327d4e6a90" title="foedus::xct::CurrentLock\lList::~CurrentLockList" alt="" coords="217,5,381,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a6095aa74c375ba360c61ab5d861497f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">CurrentLockList</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="retrospective__lock__list_8cpp_source.html#l00132">132</a> of file <a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                                                {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;CurrentLockList&gt;&quot;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;Capacity&gt;&quot;</span> &lt;&lt; v.capacity_ &lt;&lt; <span class="stringliteral">&quot;&lt;/Capacity&gt;&quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;LastActiveEntry&gt;&quot;</span> &lt;&lt; v.last_active_entry_ &lt;&lt; <span class="stringliteral">&quot;&lt;/LastActiveEntry&gt;&quot;</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;LastLockedEntry&gt;&quot;</span> &lt;&lt; v.last_locked_entry_ &lt;&lt; <span class="stringliteral">&quot;&lt;/LastLockedEntry&gt;&quot;</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keyword">const</span> uint32_t kMaxShown = 32U;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 1U; i &lt;= std::min(v.last_active_entry_, kMaxShown); ++i) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    o &lt;&lt; v.array_[i];</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/CurrentLockList&gt;&quot;</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/xct/<a class="el" href="retrospective__lock__list_8hpp_source.html">retrospective_lock_list.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/xct/<a class="el" href="retrospective__lock__list_8cpp_source.html">retrospective_lock_list.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1xct.html">xct</a></li><li class="navelem"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">CurrentLockList</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
