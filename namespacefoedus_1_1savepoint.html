<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::savepoint Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacefoedus_1_1savepoint.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">foedus::savepoint Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><b><a class="el" href="structfoedus_1_1savepoint_1_1Savepoint.html" title="The information we maintain in savepoint manager and externalize to a file. ">Savepoint</a></b> <b>Manager</b>, which durably and atomically remembers what happened in the engine occasionally (eg.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><b><a class="el" href="structfoedus_1_1savepoint_1_1Savepoint.html" title="The information we maintain in savepoint manager and externalize to a file. ">Savepoint</a></b> <b>Manager</b>, which durably and atomically remembers what happened in the engine occasionally (eg. </p>
<p>every group commit).</p>
<dl class="section user"><dt>Overview</dt><dd>In nutshell, this package durably and atomically (*) writes out a tiny file (<b>savepoint</b> file) whenever we advance the global epoch, replacing the savepoint file durably and atomically. The savepoint file is an XML file that describes the progress of individual loggers, log gleaners, and whatever we have to take note for durability and serializablity. These are very compact data, essentially only one or two integers per modules/threads. Thus, the dominating cost is <a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a>, which is not cheap but we are okay to pay assuming epoch-based commit and reasonably fast media (SSD/NVRAM).</dd></dl>
<dl class="section user"><dt>Why XML</dt><dd>As writing savepoint files happens only occasionally, file format doesn't matter for performance. Thus, we use XML for better debuggability and flexibility. We already use tinyxml for config files, so why not.</dd></dl>
<dl class="section user"><dt>Terminology</dt><dd>We named this package <em>savepoint</em> rather than <em>checkpoint</em>. Checkpoint has a <em>slightly</em> different meaning in DBMS, so we avoid that. <a class="el" href="structfoedus_1_1savepoint_1_1Savepoint.html" title="The information we maintain in savepoint manager and externalize to a file. ">Savepoint</a> also has a different meaning in DBMS, but it's <em>very</em> different, so no confusion.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee" title="fsync() on source file before rename, then fsync() on the parent folder after rename. ">foedus::fs::durable_atomic_rename()</a> </dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1savepoint_1_1FixedSavepoint.html">FixedSavepoint</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structfoedus_1_1savepoint_1_1Savepoint.html" title="The information we maintain in savepoint manager and externalize to a file. ">Savepoint</a> that can be stored in shared memory.  <a href="structfoedus_1_1savepoint_1_1FixedSavepoint.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfoedus_1_1savepoint_1_1LoggerSavepointInfo"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefoedus_1_1savepoint.html#structfoedus_1_1savepoint_1_1LoggerSavepointInfo">LoggerSavepointInfo</a></td></tr>
<tr class="memdesc:structfoedus_1_1savepoint_1_1LoggerSavepointInfo"><td class="mdescLeft">&#160;</td><td class="mdescRight">Information in savepoint for one logger.  <a href="namespacefoedus_1_1savepoint.html#structfoedus_1_1savepoint_1_1LoggerSavepointInfo">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1savepoint_1_1LoggerSavepointInfo"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1savepoint_1_1Savepoint.html">Savepoint</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The information we maintain in savepoint manager and externalize to a file.  <a href="structfoedus_1_1savepoint_1_1Savepoint.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1savepoint_1_1SavepointManager.html">SavepointManager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structfoedus_1_1savepoint_1_1Savepoint.html" title="The information we maintain in savepoint manager and externalize to a file. ">Savepoint</a> manager that atomically and durably writes out a savepoint file.  <a href="classfoedus_1_1savepoint_1_1SavepointManager.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1savepoint_1_1SavepointManagerControlBlock.html">SavepointManagerControlBlock</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shared data in <a class="el" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html" title="Pimpl object of SavepointManager. ">SavepointManagerPimpl</a>.  <a href="structfoedus_1_1savepoint_1_1SavepointManagerControlBlock.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html">SavepointManagerPimpl</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pimpl object of <a class="el" href="classfoedus_1_1savepoint_1_1SavepointManager.html" title="Savepoint manager that atomically and durably writes out a savepoint file. ">SavepointManager</a>.  <a href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1savepoint_1_1SavepointOptions.html">SavepointOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of options for savepoint manager.  <a href="structfoedus_1_1savepoint_1_1SavepointOptions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structfoedus_1_1savepoint_1_1LoggerSavepointInfo" id="structfoedus_1_1savepoint_1_1LoggerSavepointInfo"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct foedus::savepoint::LoggerSavepointInfo</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Information in savepoint for one logger. </p>

<p>Definition at line <a class="el" href="savepoint_8hpp_source.html#l00140">140</a> of file <a class="el" href="savepoint_8hpp_source.html">savepoint.hpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aece664b673eed85fddb0609a758dd8d6"></a>LogFileOrdinal</td>
<td class="fieldname">
current_log_file_</td>
<td class="fielddoc">
Indicates the log file each logger is currently appending to. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aae345923e4e3cc34ef204160cca8bb84"></a>uint64_t</td>
<td class="fieldname">
current_log_file_offset_durable_</td>
<td class="fielddoc">
Indicates the exclusive end of durable region in the current log file. <p>In other words, epochs are larger than durable_epoch_ from this offset. During restart, current log files are truncated to this size to discard incomplete logs. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a5472b031c1b96537aa753e0b3224ead8"></a>LogFileOrdinal</td>
<td class="fieldname">
oldest_log_file_</td>
<td class="fielddoc">
Ordinal of the oldest active log file in each logger. <dl class="section invariant"><dt>Invariant</dt><dd>oldest_log_files_[x] &lt;= current_log_files_[x]</dd></dl>
<p>Each logger writes out files suffixed with ordinal (eg ".0", ".1"...). The older logs files are deactivated and deleted after log gleaner consumes them. This variable indicates the oldest active file for each logger. </p>
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a3d1ac98ea1eff9376cd83ab71019b3a4"></a>uint64_t</td>
<td class="fieldname">
oldest_log_file_offset_begin_</td>
<td class="fielddoc">
Indicates the inclusive beginning of active region in the oldest log file. </td></tr>
</table>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1savepoint.html">savepoint</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
