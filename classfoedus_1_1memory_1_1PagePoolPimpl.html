<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::memory::PagePoolPimpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1memory_1_1PagePoolPimpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1memory_1_1PagePoolPimpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::memory::PagePoolPimpl Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__MEMORY.html">Memory Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Pimpl object of <a class="el" href="classfoedus_1_1memory_1_1PagePool.html" title="Page pool for volatile read/write store (VolatilePage) and the read-only bufferpool (SnapshotPage)...">PagePool</a>.  
 <a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pimpl object of <a class="el" href="classfoedus_1_1memory_1_1PagePool.html" title="Page pool for volatile read/write store (VolatilePage) and the read-only bufferpool (SnapshotPage)...">PagePool</a>. </p>
<p>A private pimpl object for <a class="el" href="classfoedus_1_1memory_1_1PagePool.html" title="Page pool for volatile read/write store (VolatilePage) and the read-only bufferpool (SnapshotPage)...">PagePool</a>. Do not include this header from a client program unless you know what you are doing. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00074">74</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::memory::PagePoolPimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl__inherit__graph.png" border="0" usemap="#foedus_1_1memory_1_1PagePoolPimpl_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1memory_1_1PagePoolPimpl_inherit__map" id="foedus_1_1memory_1_1PagePoolPimpl_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="9,80,181,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="29,5,161,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::memory::PagePoolPimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl__coll__graph.png" border="0" usemap="#foedus_1_1memory_1_1PagePoolPimpl_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1memory_1_1PagePoolPimpl_coll__map" id="foedus_1_1memory_1_1PagePoolPimpl_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="369,23,541,49"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="35,5,167,32"/>
<area shape="rect" id="node4" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html" title="Shared data in PagePoolPimpl. " alt="" coords="365,93,544,134"/>
<area shape="rect" id="node5" href="classfoedus_1_1assorted_1_1FixedString.html" title="foedus::assorted::FixedString\l\&lt; 60 \&gt;" alt="" coords="5,57,197,98"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="14,123,189,149"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html" title="Just a marker to denote that the memory region represents a data page. " alt="" coords="27,192,176,219"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1LocalPageResolver.html" title="Resolves an offset in local (same NUMA node) page pool to a pointer and vice versa. " alt="" coords="363,222,547,263"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a81db578aec1ebf12e57327af44bbf313"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a81db578aec1ebf12e57327af44bbf313">PagePoolPimpl</a> ()</td></tr>
<tr class="separator:a81db578aec1ebf12e57327af44bbf313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a655d84c0582b445cbbdb5560e5fe4e07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a655d84c0582b445cbbdb5560e5fe4e07">attach</a> (<a class="el" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html">PagePoolControlBlock</a> *control_block, void *memory, uint64_t memory_size, bool owns, bool rigorous_page_boundary_check)</td></tr>
<tr class="separator:a655d84c0582b445cbbdb5560e5fe4e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a28e3c04c25c6d6cb2cd0628d4fe397"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397">initialize_once</a> () override</td></tr>
<tr class="separator:a3a28e3c04c25c6d6cb2cd0628d4fe397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa079d110c76126386b0d3eefeaf1ae38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38">uninitialize_once</a> () override</td></tr>
<tr class="separator:aa079d110c76126386b0d3eefeaf1ae38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec400efafc2d5e23b8f240e10abdfb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3">grab</a> (uint32_t desired_grab_count, <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *chunk)</td></tr>
<tr class="separator:abec400efafc2d5e23b8f240e10abdfb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76cbbda4fd32d9176cbc4098d8b5b2b1"><td class="memTemplParams" colspan="2">template&lt;typename CHUNK &gt; </td></tr>
<tr class="memitem:a76cbbda4fd32d9176cbc4098d8b5b2b1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a76cbbda4fd32d9176cbc4098d8b5b2b1">release_impl</a> (uint32_t desired_release_count, CHUNK *chunk)</td></tr>
<tr class="separator:a76cbbda4fd32d9176cbc4098d8b5b2b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d785355359fd936c2b3863d296ba2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c">release</a> (uint32_t desired_release_count, <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *chunk)</td></tr>
<tr class="separator:a13d785355359fd936c2b3863d296ba2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a068e903c4597b9f1d31cceb0109cf5ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a068e903c4597b9f1d31cceb0109cf5ee">release</a> (uint32_t desired_release_count, <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetDynamicChunk.html">PagePoolOffsetDynamicChunk</a> *chunk)</td></tr>
<tr class="separator:a068e903c4597b9f1d31cceb0109cf5ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2d6d0673ec69c1e6520a06663d43c73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ad2d6d0673ec69c1e6520a06663d43c73">release</a> (uint32_t desired_release_count, <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html">PagePoolOffsetAndEpochChunk</a> *chunk)</td></tr>
<tr class="separator:ad2d6d0673ec69c1e6520a06663d43c73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3293a43a76f3720cf5c92c5fbcf2d02f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f">grab_one</a> (<a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> *offset)</td></tr>
<tr class="separator:a3293a43a76f3720cf5c92c5fbcf2d02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741d98bc9dd15581c1316ae5eaf492d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5">release_one</a> (<a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> offset)</td></tr>
<tr class="separator:a741d98bc9dd15581c1316ae5eaf492d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae901dc06f6b6f4594626ed0b233daec6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">LocalPageResolver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6">get_resolver</a> () const </td></tr>
<tr class="separator:ae901dc06f6b6f4594626ed0b233daec6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ba648cb98718804a890ea3b4965e39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MEMORY.html#structfoedus_1_1memory_1_1PagePool_1_1Stat">PagePool::Stat</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a55ba648cb98718804a890ea3b4965e39">get_stat</a> () const </td></tr>
<tr class="separator:a55ba648cb98718804a890ea3b4965e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa545fc1cffac905225d3a7c7c457b5a8"><td class="memItemLeft" align="right" valign="top">uint64_t &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a> ()</td></tr>
<tr class="separator:aa545fc1cffac905225d3a7c7c457b5a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934f994d90a88015cc3c67a2cc993af8"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a934f994d90a88015cc3c67a2cc993af8">free_pool_head</a> () const </td></tr>
<tr class="separator:a934f994d90a88015cc3c67a2cc993af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb133ecb2760b19892c492b1a8e07fa8"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#afb133ecb2760b19892c492b1a8e07fa8">get_free_pool_capacity</a> () const </td></tr>
<tr class="separator:afb133ecb2760b19892c492b1a8e07fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e6fad1a2e9735182f83a52a5e329b0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a> () const </td></tr>
<tr class="separator:a50e6fad1a2e9735182f83a52a5e329b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5b895c26ed502d93e753389ce0a21b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b">increase_free_pool_count</a> (uint64_t op)</td></tr>
<tr class="separator:a3b5b895c26ed502d93e753389ce0a21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a41295b63274fb300e5937a9bb1eca7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7">decrease_free_pool_count</a> (uint64_t op)</td></tr>
<tr class="separator:a1a41295b63274fb300e5937a9bb1eca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c94997f724139b950b66b18d786bd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a> () const </td></tr>
<tr class="memdesc:ab2c94997f724139b950b66b18d786bd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Not thread safe.  <a href="#ab2c94997f724139b950b66b18d786bd5">More...</a><br /></td></tr>
<tr class="separator:ab2c94997f724139b950b66b18d786bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd594ac94d8ac0445ebef734b7305fb6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a> () const </td></tr>
<tr class="separator:abd594ac94d8ac0445ebef734b7305fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b74a063f1e70b1a634a77092b61e435"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a4b74a063f1e70b1a634a77092b61e435">set_debug_pool_name</a> (const std::string &amp;name)</td></tr>
<tr class="separator:a4b74a063f1e70b1a634a77092b61e435"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1DefaultInitializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1DefaultInitializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1DefaultInitializable.html">foedus::DefaultInitializable</a></td></tr>
<tr class="memitem:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a5e0a2679baa030e297c1a51847352945">DefaultInitializable</a> ()</td></tr>
<tr class="separator:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afe7a18ec3e5edd143eb7d6a75d65ef9b">~DefaultInitializable</a> ()</td></tr>
<tr class="separator:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afd6a8f8296ab570b545430593287d454">DefaultInitializable</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a31eb5acadf0544b97414efd33aed08c7">operator=</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a> () override final</td></tr>
<tr class="memdesc:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#aa087b096d1edaeb0304c250eadb0d7e1" title="Acquires resources in this object, usually called right after constructor. ">Initializable::initialize()</a> that provides initialize-once semantics.  <a href="#a22a0dc3bbbca682c3bc41eace9b6d1ff">More...</a><br /></td></tr>
<tr class="separator:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a> () override final</td></tr>
<tr class="memdesc:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#afbe5738b0bc85362fba80bdf788fd3c3" title="An idempotent method to release all resources of this object, if any. ">Initializable::uninitialize()</a> that provides uninitialize-once semantics.  <a href="#ab14b136a7d26f9f499ab9dc15a45a8cb">More...</a><br /></td></tr>
<tr class="separator:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a> () const  override final</td></tr>
<tr class="memdesc:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already initialized or not.  <a href="#a1abda1e84b8af8bd6916e52fd0a09f3e">More...</a><br /></td></tr>
<tr class="separator:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Initializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Initializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Initializable.html">foedus::Initializable</a></td></tr>
<tr class="memitem:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Initializable.html#aff308260543d18b3fd1367fd9017b176">~Initializable</a> ()</td></tr>
<tr class="separator:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aab66247cf8a84236aedfd5ea2e7589ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html">PagePoolControlBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a></td></tr>
<tr class="separator:aab66247cf8a84236aedfd5ea2e7589ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9867b0cbbf07604b3c53d0f028312b3"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">memory_</a></td></tr>
<tr class="memdesc:af9867b0cbbf07604b3c53d0f028312b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The whole memory region of the pool.  <a href="#af9867b0cbbf07604b3c53d0f028312b3">More...</a><br /></td></tr>
<tr class="separator:af9867b0cbbf07604b3c53d0f028312b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c50e36539db6cd804fb455d9e05210"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a86c50e36539db6cd804fb455d9e05210">memory_size_</a></td></tr>
<tr class="memdesc:a86c50e36539db6cd804fb455d9e05210"><td class="mdescLeft">&#160;</td><td class="mdescRight">Byte size of this page pool.  <a href="#a86c50e36539db6cd804fb455d9e05210">More...</a><br /></td></tr>
<tr class="separator:a86c50e36539db6cd804fb455d9e05210"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2976dff68bec18ca43917791bf2256db"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">owns_</a></td></tr>
<tr class="memdesc:a2976dff68bec18ca43917791bf2256db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this engine owns this page pool.  <a href="#a2976dff68bec18ca43917791bf2256db">More...</a><br /></td></tr>
<tr class="separator:a2976dff68bec18ca43917791bf2256db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade9927750ed1e5985014a909c182d501"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">rigorous_page_boundary_check_</a></td></tr>
<tr class="memdesc:ade9927750ed1e5985014a909c182d501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether to use mprotect() for page boundaries to detect bogus memory accesses.  <a href="#ade9927750ed1e5985014a909c182d501">More...</a><br /></td></tr>
<tr class="separator:ade9927750ed1e5985014a909c182d501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371773fd41c2732e4299e9296468640b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">LocalPageResolver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a371773fd41c2732e4299e9296468640b">resolver_</a></td></tr>
<tr class="memdesc:a371773fd41c2732e4299e9296468640b"><td class="mdescLeft">&#160;</td><td class="mdescRight">An object to resolve an offset in <em>this</em> page pool (thus <em>local</em>) to an actual pointer and vice versa.  <a href="#a371773fd41c2732e4299e9296468640b">More...</a><br /></td></tr>
<tr class="separator:a371773fd41c2732e4299e9296468640b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b0a48f828f795b128ce9bc2e73b44a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">pool_base_</a></td></tr>
<tr class="memdesc:a90b0a48f828f795b128ce9bc2e73b44a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just an auxiliary variable to the beginning of the pool.  <a href="#a90b0a48f828f795b128ce9bc2e73b44a">More...</a><br /></td></tr>
<tr class="separator:a90b0a48f828f795b128ce9bc2e73b44a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab06be51f6c04a3630d40abf6a946e73b"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a></td></tr>
<tr class="memdesc:ab06be51f6c04a3630d40abf6a946e73b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just an auxiliary variable of the size of pool.  <a href="#ab06be51f6c04a3630d40abf6a946e73b">More...</a><br /></td></tr>
<tr class="separator:ab06be51f6c04a3630d40abf6a946e73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a279486c595f8d08c53e9efbd1c7d8590"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a></td></tr>
<tr class="memdesc:a279486c595f8d08c53e9efbd1c7d8590"><td class="mdescLeft">&#160;</td><td class="mdescRight">This many first pages are used for free page maintainance.  <a href="#a279486c595f8d08c53e9efbd1c7d8590">More...</a><br /></td></tr>
<tr class="separator:a279486c595f8d08c53e9efbd1c7d8590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefff716272ce45dcfee6fb55138496d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a></td></tr>
<tr class="memdesc:aefff716272ce45dcfee6fb55138496d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">We maintain free pages as a simple circular queue.  <a href="#aefff716272ce45dcfee6fb55138496d0">More...</a><br /></td></tr>
<tr class="separator:aefff716272ce45dcfee6fb55138496d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a438e3edeac7f4d4a92c666f8c8117f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a></td></tr>
<tr class="memdesc:a5a438e3edeac7f4d4a92c666f8c8117f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of free_pool_.  <a href="#a5a438e3edeac7f4d4a92c666f8c8117f">More...</a><br /></td></tr>
<tr class="separator:a5a438e3edeac7f4d4a92c666f8c8117f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:abf1110b6b18293d7206bf1e09b80a312"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abf1110b6b18293d7206bf1e09b80a312">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html">PagePoolPimpl</a> &amp;v)</td></tr>
<tr class="separator:abf1110b6b18293d7206bf1e09b80a312"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a81db578aec1ebf12e57327af44bbf313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::PagePoolPimpl::PagePoolPimpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00040">40</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  : <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">memory_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a86c50e36539db6cd804fb455d9e05210">memory_size_</a>(0),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">owns_</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">rigorous_page_boundary_check_</a>(<span class="keyword">false</span>) {}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ade9927750ed1e5985014a909c182d501"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">foedus::memory::PagePoolPimpl::rigorous_page_boundary_check_</a></div><div class="ttdeci">bool rigorous_page_boundary_check_</div><div class="ttdoc">Whether to use mprotect() for page boundaries to detect bogus memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00155">page_pool_pimpl.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_af9867b0cbbf07604b3c53d0f028312b3"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">foedus::memory::PagePoolPimpl::memory_</a></div><div class="ttdeci">void * memory_</div><div class="ttdoc">The whole memory region of the pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00146">page_pool_pimpl.hpp:146</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a2976dff68bec18ca43917791bf2256db"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">foedus::memory::PagePoolPimpl::owns_</a></div><div class="ttdeci">bool owns_</div><div class="ttdoc">Whether this engine owns this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00152">page_pool_pimpl.hpp:152</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a86c50e36539db6cd804fb455d9e05210"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a86c50e36539db6cd804fb455d9e05210">foedus::memory::PagePoolPimpl::memory_size_</a></div><div class="ttdeci">uint64_t memory_size_</div><div class="ttdoc">Byte size of this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00149">page_pool_pimpl.hpp:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab2c94997f724139b950b66b18d786bd5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::assert_free_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Not thread safe. </p>
<p>Use it after taking a lock. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">108</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">free_pool_head()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00175">pages_for_free_pool_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00167">pool_size_</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                               {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">const</span> uint64_t free_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">const</span> uint64_t free_head = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; free_count; ++i) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      uint64_t index = free_head + i;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">while</span> (index &gt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        index -= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>* address = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a> + index;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*address &gt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*address &lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aa545fc1cffac905225d3a7c7c457b5a8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">foedus::memory::PagePoolPimpl::free_pool_head</a></div><div class="ttdeci">uint64_t &amp; free_pool_head()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00098">page_pool_pimpl.hpp:98</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab06be51f6c04a3630d40abf6a946e73b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">foedus::memory::PagePoolPimpl::pool_size_</a></div><div class="ttdeci">uint64_t pool_size_</div><div class="ttdoc">Just an auxiliary variable of the size of pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00167">page_pool_pimpl.hpp:167</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a279486c595f8d08c53e9efbd1c7d8590"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">foedus::memory::PagePoolPimpl::pages_for_free_pool_</a></div><div class="ttdeci">uint64_t pages_for_free_pool_</div><div class="ttdoc">This many first pages are used for free page maintainance. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00175">page_pool_pimpl.hpp:175</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="232,5,411,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="232,71,411,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_ab2c94997f724139b950b66b18d786bd5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3" title="foedus::memory::PagePool\lPimpl::grab" alt="" coords="232,71,411,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397" title="foedus::memory::PagePool\lPimpl::initialize_once" alt="" coords="232,136,411,177"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a76cbbda4fd32d9176cbc4098d8b5b2b1" title="foedus::memory::PagePool\lPimpl::release_impl" alt="" coords="232,201,411,243"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="232,267,411,308"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="459,71,637,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="687,5,880,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="685,71,881,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="691,136,875,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="929,71,1125,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a655d84c0582b445cbbdb5560e5fe4e07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html">PagePoolControlBlock</a> *&#160;</td>
          <td class="paramname"><em>control_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>memory_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>owns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>rigorous_page_boundary_check</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">47</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="fixed__string_8hpp_source.html#l00170">foedus::assorted::FixedString&lt; MAXLEN, CHAR &gt;::clear()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00058">foedus::memory::PagePoolControlBlock::debug_pool_name_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="assorted__func_8cpp_source.html#l00040">foedus::assorted::int_div_ceil()</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00146">memory_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00149">memory_size_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00152">owns_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00175">pages_for_free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00164">pool_base_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00167">pool_size_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00161">resolver_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00155">rigorous_page_boundary_check_</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00101">foedus::memory::PagePool::attach()</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                     {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a> = control_block;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">if</span> (owns) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">debug_pool_name_</a>.<a class="code" href="classfoedus_1_1assorted_1_1FixedString.html#ad175b4520982eaf19692255255125b06">clear</a>();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">memory_</a> = memory;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a86c50e36539db6cd804fb455d9e05210">memory_size_</a> = memory_size;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">owns_</a> = owns;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">rigorous_page_boundary_check_</a> = rigorous_page_boundary_check;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">pool_base_</a> = <span class="keyword">reinterpret_cast&lt;</span>storage::Page*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">memory_</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a86c50e36539db6cd804fb455d9e05210">memory_size_</a> / <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  uint64_t pointers_total_size = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a> = <a class="code" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824">assorted::int_div_ceil</a>(pointers_total_size, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">memory_</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> - <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span> (rigorous_page_boundary_check) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> / 2U;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a371773fd41c2732e4299e9296468640b">resolver_</a> = LocalPageResolver(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">pool_base_</a>, pages_for_free_pool_, <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ade9927750ed1e5985014a909c182d501"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">foedus::memory::PagePoolPimpl::rigorous_page_boundary_check_</a></div><div class="ttdeci">bool rigorous_page_boundary_check_</div><div class="ttdoc">Whether to use mprotect() for page boundaries to detect bogus memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00155">page_pool_pimpl.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_af9867b0cbbf07604b3c53d0f028312b3"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#af9867b0cbbf07604b3c53d0f028312b3">foedus::memory::PagePoolPimpl::memory_</a></div><div class="ttdeci">void * memory_</div><div class="ttdoc">The whole memory region of the pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00146">page_pool_pimpl.hpp:146</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a90b0a48f828f795b128ce9bc2e73b44a"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">foedus::memory::PagePoolPimpl::pool_base_</a></div><div class="ttdeci">storage::Page * pool_base_</div><div class="ttdoc">Just an auxiliary variable to the beginning of the pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00164">page_pool_pimpl.hpp:164</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab06be51f6c04a3630d40abf6a946e73b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">foedus::memory::PagePoolPimpl::pool_size_</a></div><div class="ttdeci">uint64_t pool_size_</div><div class="ttdoc">Just an auxiliary variable of the size of pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00167">page_pool_pimpl.hpp:167</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a2976dff68bec18ca43917791bf2256db"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">foedus::memory::PagePoolPimpl::owns_</a></div><div class="ttdeci">bool owns_</div><div class="ttdoc">Whether this engine owns this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00152">page_pool_pimpl.hpp:152</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a371773fd41c2732e4299e9296468640b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a371773fd41c2732e4299e9296468640b">foedus::memory::PagePoolPimpl::resolver_</a></div><div class="ttdeci">LocalPageResolver resolver_</div><div class="ttdoc">An object to resolve an offset in this page pool (thus local) to an actual pointer and vice versa...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00161">page_pool_pimpl.hpp:161</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a71934f7af2ece8722d0cefa28fa7d7e4"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">foedus::memory::PagePoolControlBlock::debug_pool_name_</a></div><div class="ttdeci">assorted::FixedString&lt; 60 &gt; debug_pool_name_</div><div class="ttdoc">just for debugging/logging. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00058">page_pool_pimpl.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a279486c595f8d08c53e9efbd1c7d8590"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">foedus::memory::PagePoolPimpl::pages_for_free_pool_</a></div><div class="ttdeci">uint64_t pages_for_free_pool_</div><div class="ttdoc">This many first pages are used for free page maintainance. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00175">page_pool_pimpl.hpp:175</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gae2beea4717aef7ca9d43b91e48cf5824"><div class="ttname"><a href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824">foedus::assorted::int_div_ceil</a></div><div class="ttdeci">int64_t int_div_ceil(int64_t dividee, int64_t dividor)</div><div class="ttdoc">Efficient ceil(dividee/dividor) for integer. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8cpp_source.html#l00040">assorted_func.cpp:40</a></div></div>
<div class="ttc" id="classfoedus_1_1assorted_1_1FixedString_html_ad175b4520982eaf19692255255125b06"><div class="ttname"><a href="classfoedus_1_1assorted_1_1FixedString.html#ad175b4520982eaf19692255255125b06">foedus::assorted::FixedString::clear</a></div><div class="ttdeci">void clear() noexcept</div><div class="ttdoc">Clear string. </div><div class="ttdef"><b>Definition:</b> <a href="fixed__string_8hpp_source.html#l00170">fixed_string.hpp:170</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a86c50e36539db6cd804fb455d9e05210"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a86c50e36539db6cd804fb455d9e05210">foedus::memory::PagePoolPimpl::memory_size_</a></div><div class="ttdeci">uint64_t memory_size_</div><div class="ttdoc">Byte size of this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00149">page_pool_pimpl.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1assorted_1_1FixedString.html#ad175b4520982eaf19692255255125b06" title="Clear string. " alt="" coords="232,5,424,47"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824" title="Efficient ceil(dividee/dividor) for integer. " alt="" coords="258,71,398,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a655d84c0582b445cbbdb5560e5fe4e07_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#a6522fe3b6b37b4e87c0e4170e573b8d2" title="foedus::memory::PagePool\l::attach" alt="" coords="232,39,411,80"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a70fdc4e831999f941d4105de0c3ce3fd" title="foedus::memory::NumaNode\lMemory::initialize_once" alt="" coords="479,5,665,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a8e735f7411d3a28d4ddf0c25f3eced4e" title="foedus::memory::NumaNode\lMemoryRef::NumaNodeMemoryRef" alt="" coords="459,71,685,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1a41295b63274fb300e5937a9bb1eca7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::decrease_free_pool_count </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00103">103</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00055">foedus::memory::PagePoolControlBlock::free_pool_count_</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                                  {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">free_pool_count_</a> &gt;= op);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">free_pool_count_</a> -= op;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_adcca5a6003329659b44ed0cc56b266f7"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">foedus::memory::PagePoolControlBlock::free_pool_count_</a></div><div class="ttdeci">uint64_t free_pool_count_</div><div class="ttdoc">Number of free pages. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00055">page_pool_pimpl.hpp:55</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a1a41295b63274fb300e5937a9bb1eca7_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a1a41295b63274fb300e5937a9bb1eca7_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a1a41295b63274fb300e5937a9bb1eca7_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a1a41295b63274fb300e5937a9bb1eca7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3" title="foedus::memory::PagePool\lPimpl::grab" alt="" coords="268,169,447,211"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="268,300,447,341"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="495,104,673,145"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="730,71,923,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="729,136,925,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="735,5,919,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="989,103,1185,144"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="495,333,673,375"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="735,545,918,587"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="721,233,932,275"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="737,433,916,489"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="740,326,913,382"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="1013,579,1162,620"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="980,168,1195,209"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="982,233,1193,275"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="1249,103,1431,144"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="1255,168,1425,209"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="1497,103,1647,144"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="1498,168,1646,209"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="1243,299,1437,340"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="1255,233,1425,275"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="1485,299,1659,340"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="1499,233,1645,275"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="998,433,1177,489"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="987,513,1188,555"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="1250,440,1430,481"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="1251,513,1429,555"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="1001,353,1174,409"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="1253,364,1427,405"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa545fc1cffac905225d3a7c7c457b5a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t&amp; foedus::memory::PagePoolPimpl::free_pool_head </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">98</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00053">foedus::memory::PagePoolControlBlock::free_pool_head_</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a5fb2401bed036b97097f00cd0f092feb">free_pool_head_</a>;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a5fb2401bed036b97097f00cd0f092feb"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a5fb2401bed036b97097f00cd0f092feb">foedus::memory::PagePoolControlBlock::free_pool_head_</a></div><div class="ttdeci">uint64_t free_pool_head_</div><div class="ttdoc">Inclusive head of the circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00053">page_pool_pimpl.hpp:53</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_aa545fc1cffac905225d3a7c7c457b5a8_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_aa545fc1cffac905225d3a7c7c457b5a8_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_aa545fc1cffac905225d3a7c7c457b5a8_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_aa545fc1cffac905225d3a7c7c457b5a8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="236,260,415,301"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3" title="foedus::memory::PagePool\lPimpl::grab" alt="" coords="467,129,645,171"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a76cbbda4fd32d9176cbc4098d8b5b2b1" title="foedus::memory::PagePool\lPimpl::release_impl" alt="" coords="467,325,645,367"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="236,384,415,425"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1memory.html#a9f6849b481b87443719a07d5cb7520ed" title="foedus::memory::operator\&lt;\&lt;" alt="" coords="232,450,419,477"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5" title="foedus::memory::PagePool\lPimpl::release_one" alt="" coords="236,625,415,667"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397" title="foedus::memory::PagePool\lPimpl::initialize_once" alt="" coords="467,195,645,236"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="467,260,645,301"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="709,120,888,161"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="963,136,1156,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="961,5,1157,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="967,71,1151,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="1215,5,1411,47"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="467,391,645,432"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="707,217,890,259"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="693,327,904,368"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="709,531,888,587"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="712,393,885,449"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="985,201,1134,243"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="952,267,1167,308"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="954,332,1165,373"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="1221,201,1404,243"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="1227,267,1398,308"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="1470,201,1621,243"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="1471,267,1619,308"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="1215,397,1410,439"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="1227,332,1398,373"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="1459,397,1632,439"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="1472,332,1619,373"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="970,531,1149,587"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="959,612,1160,653"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="1223,539,1403,580"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="1223,612,1402,653"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="973,451,1146,507"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="1226,463,1399,504"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="467,709,645,751"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="697,749,900,791"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="713,815,885,885"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="706,655,891,725"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="970,749,1149,791"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="974,829,1145,871"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1239,829,1386,871"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="962,677,1157,719"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1226,677,1399,719"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a934f994d90a88015cc3c67a2cc993af8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::free_pool_head </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00099">99</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00053">foedus::memory::PagePoolControlBlock::free_pool_head_</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a5fb2401bed036b97097f00cd0f092feb">free_pool_head_</a>;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a5fb2401bed036b97097f00cd0f092feb"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a5fb2401bed036b97097f00cd0f092feb">foedus::memory::PagePoolControlBlock::free_pool_head_</a></div><div class="ttdeci">uint64_t free_pool_head_</div><div class="ttdoc">Inclusive head of the circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00053">page_pool_pimpl.hpp:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abd594ac94d8ac0445ebef734b7305fb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::memory::PagePoolPimpl::get_debug_pool_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">124</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00058">foedus::memory::PagePoolControlBlock::debug_pool_name_</a>, <a class="el" href="fixed__string_8hpp_source.html#l00172">foedus::assorted::FixedString&lt; MAXLEN, CHAR &gt;::empty()</a>, and <a class="el" href="fixed__string_8hpp_source.html#l00185">foedus::assorted::FixedString&lt; MAXLEN, CHAR &gt;::str()</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00121">foedus::memory::PagePool::get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                                {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">debug_pool_name_</a>.<a class="code" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2">empty</a>()) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">debug_pool_name_</a>.<a class="code" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01">str</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unnamed&quot;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Not-attached&quot;</span>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1assorted_1_1FixedString_html_a3269f7c68f175a1fd42e78110a57cbf2"><div class="ttname"><a href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2">foedus::assorted::FixedString::empty</a></div><div class="ttdeci">bool empty() const  noexcept</div><div class="ttdoc">Test if string is empty. </div><div class="ttdef"><b>Definition:</b> <a href="fixed__string_8hpp_source.html#l00172">fixed_string.hpp:172</a></div></div>
<div class="ttc" id="classfoedus_1_1assorted_1_1FixedString_html_a16f6de0859f599127e2d4a51a6537a01"><div class="ttname"><a href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01">foedus::assorted::FixedString::str</a></div><div class="ttdeci">std::basic_string&lt; CHAR &gt; str() const </div><div class="ttdoc">Convert to a std::string object. </div><div class="ttdef"><b>Definition:</b> <a href="fixed__string_8hpp_source.html#l00185">fixed_string.hpp:185</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a71934f7af2ece8722d0cefa28fa7d7e4"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">foedus::memory::PagePoolControlBlock::debug_pool_name_</a></div><div class="ttdeci">assorted::FixedString&lt; 60 &gt; debug_pool_name_</div><div class="ttdoc">just for debugging/logging. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00058">page_pool_pimpl.hpp:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="258,5,450,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="247,71,461,98"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_abd594ac94d8ac0445ebef734b7305fb6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#ab48069fa315e278b85dc3509527f97f7" title="foedus::memory::PagePool\l::get_debug_pool_name" alt="" coords="251,279,429,320"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3" title="foedus::memory::PagePool\lPimpl::grab" alt="" coords="251,344,429,385"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="251,409,429,451"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397" title="foedus::memory::PagePool\lPimpl::initialize_once" alt="" coords="251,475,429,516"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1memory.html#a9f6849b481b87443719a07d5cb7520ed" title="foedus::memory::operator\&lt;\&lt;" alt="" coords="247,541,433,567"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a76cbbda4fd32d9176cbc4098d8b5b2b1" title="foedus::memory::PagePool\lPimpl::release_impl" alt="" coords="251,592,429,633"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5" title="foedus::memory::PagePool\lPimpl::release_one" alt="" coords="251,657,429,699"/>
<area shape="rect" id="node45" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="251,723,429,764"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="481,104,660,145"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="717,71,910,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="715,136,911,177"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="721,5,905,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="976,103,1172,144"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="481,409,660,451"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="722,445,905,487"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="708,511,919,552"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="724,234,903,290"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="727,365,900,421"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="999,445,1149,487"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="967,576,1181,617"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="969,511,1179,552"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="1235,583,1418,624"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="1241,517,1412,559"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="1483,583,1634,624"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="1485,517,1633,559"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="1229,387,1424,428"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="1241,452,1412,493"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="1472,387,1645,428"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="1485,452,1632,493"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="985,234,1163,290"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="973,168,1175,209"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="1237,241,1417,283"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="1237,168,1416,209"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="987,314,1161,370"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="1240,321,1413,363"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="481,687,660,728"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="712,716,915,757"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="727,781,899,852"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="721,621,906,692"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="985,716,1163,757"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="989,796,1159,837"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1253,796,1400,837"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="977,644,1171,685"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1240,648,1413,689"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afb133ecb2760b19892c492b1a8e07fa8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::get_free_pool_capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00100">100</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00120">foedus::memory::PagePool::get_free_pool_capacity()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>; }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_afb133ecb2760b19892c492b1a8e07fa8_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_afb133ecb2760b19892c492b1a8e07fa8_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_afb133ecb2760b19892c492b1a8e07fa8_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_afb133ecb2760b19892c492b1a8e07fa8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#adaba316ea864179aa8460a57a61f1ff3" title="foedus::memory::PagePool\l::get_free_pool_capacity" alt="" coords="249,5,428,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="476,5,660,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a50e6fad1a2e9735182f83a52a5e329b0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::get_free_pool_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">101</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00055">foedus::memory::PagePoolControlBlock::free_pool_count_</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00359">get_stat()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">free_pool_count_</a>;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_adcca5a6003329659b44ed0cc56b266f7"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">foedus::memory::PagePoolControlBlock::free_pool_count_</a></div><div class="ttdeci">uint64_t free_pool_count_</div><div class="ttdoc">Number of free pages. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00055">page_pool_pimpl.hpp:55</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a50e6fad1a2e9735182f83a52a5e329b0_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a50e6fad1a2e9735182f83a52a5e329b0_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a50e6fad1a2e9735182f83a52a5e329b0_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a50e6fad1a2e9735182f83a52a5e329b0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="236,252,415,293"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3" title="foedus::memory::PagePool\lPimpl::grab" alt="" coords="467,161,645,203"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a76cbbda4fd32d9176cbc4098d8b5b2b1" title="foedus::memory::PagePool\lPimpl::release_impl" alt="" coords="467,292,645,333"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="467,357,645,399"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a55ba648cb98718804a890ea3b4965e39" title="foedus::memory::PagePool\lPimpl::get_stat" alt="" coords="236,420,415,461"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="236,485,415,527"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1memory.html#a9f6849b481b87443719a07d5cb7520ed" title="foedus::memory::operator\&lt;\&lt;" alt="" coords="232,551,419,578"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5" title="foedus::memory::PagePool\lPimpl::release_one" alt="" coords="236,827,415,868"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397" title="foedus::memory::PagePool\lPimpl::initialize_once" alt="" coords="467,227,645,268"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="723,136,902,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="991,5,1184,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="989,71,1185,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="995,136,1179,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="1244,71,1440,112"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c" title="foedus::memory::PagePool\l::get_stat" alt="" coords="467,423,645,464"/>
<area shape="rect" id="node14" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369" title="foedus::cache::CacheManager\lPimpl::describe" alt="" coords="713,253,912,295"/>
<area shape="rect" id="node16" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="988,332,1187,373"/>
<area shape="rect" id="node17" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="1243,377,1441,419"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a3dbec4cb10130e169f203c7a8d52d3c9" title="Report rough statistics of free memory. " alt="" coords="703,371,923,412"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a269381dd81631fda44b63559d0a9fbd0" title="Report rough statistics of free memory. " alt="" coords="693,436,932,477"/>
<area shape="rect" id="node15" href="classfoedus_1_1cache_1_1CacheManager.html#a210cd75b484f0961e84c3400f203d69b" title="kind of to_string(). " alt="" coords="988,201,1187,243"/>
<area shape="rect" id="node19" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1322d8be16a7fe558bd83de18eb41c85" title="foedus::cache::CacheManager\lPimpl::uninitialize_once" alt="" coords="988,267,1187,308"/>
<area shape="rect" id="node18" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="1489,377,1688,419"/>
<area shape="rect" id="node20" href="classfoedus_1_1cache_1_1CacheManager.html#ab7dbe48b7c06d1bcefcf787bce285c25" title="foedus::cache::CacheManager\l::uninitialize_once" alt="" coords="1243,267,1441,308"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1EngineMemory.html#a7d348c5c4edbe01bbe7d72676880d2a2" title="Report rough statistics of free memory. " alt="" coords="982,436,1193,477"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="467,717,645,759"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="721,921,904,963"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="707,619,918,660"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="723,815,902,871"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="726,710,899,766"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="1013,961,1162,1003"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="980,553,1195,595"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="982,619,1193,660"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="1251,488,1433,529"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="1257,553,1427,595"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="1245,684,1439,725"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="1257,619,1427,660"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="998,815,1177,871"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="987,896,1188,937"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="1252,823,1432,864"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="1253,896,1431,937"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="1001,735,1174,791"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="467,1059,645,1100"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="711,1019,914,1060"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="727,1084,899,1155"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="720,1179,905,1249"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="998,1027,1177,1068"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="1002,1099,1173,1140"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="990,1193,1185,1235"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae901dc06f6b6f4594626ed0b233daec6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">LocalPageResolver</a>&amp; foedus::memory::PagePoolPimpl::get_resolver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00096">96</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00161">resolver_</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a371773fd41c2732e4299e9296468640b">resolver_</a>; }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a371773fd41c2732e4299e9296468640b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a371773fd41c2732e4299e9296468640b">foedus::memory::PagePoolPimpl::resolver_</a></div><div class="ttdeci">LocalPageResolver resolver_</div><div class="ttdoc">An object to resolve an offset in this page pool (thus local) to an actual pointer and vice versa...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00161">page_pool_pimpl.hpp:161</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_ae901dc06f6b6f4594626ed0b233daec6_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_ae901dc06f6b6f4594626ed0b233daec6_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_ae901dc06f6b6f4594626ed0b233daec6_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_ae901dc06f6b6f4594626ed0b233daec6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="232,316,411,357"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="473,15,655,56"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="463,80,665,121"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1sequential_1_1SequentialComposer.html#a93883e6731ee4a8f2efc4cf7cec2560f" title="foedus::storage::sequential\l::SequentialComposer::drop\l_volatiles" alt="" coords="473,147,655,203"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab8595b7fa861e2f16b04f6758a7508a5" title="Traverse all pages and call back the handler for every page. " alt="" coords="475,230,653,286"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="459,316,669,357"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="475,462,653,518"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1EngineMemory.html#a56f86610c89fff23bf3f834a6fcbf7a5" title="foedus::memory::EngineMemory\l::initialize_once" alt="" coords="459,543,669,584"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="472,608,656,649"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="477,382,651,438"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="750,5,899,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="735,71,914,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1Composer.html#a0995635b97031b208127004382947acd" title="Drops volatile pages that have not been modified since the snapshotted epoch. " alt="" coords="735,136,914,177"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a26c51902174b692c91aedd15218f01b7" title="subroutine invoked by one thread for one node. " alt="" coords="985,121,1169,177"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a5d474e7a6b4de127153103f2295cb0fa" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="1223,128,1449,169"/>
<area shape="rect" id="node11" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1497,121,1708,177"/>
<area shape="rect" id="node12" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1784,95,1939,136"/>
<area shape="rect" id="node14" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1756,160,1967,201"/>
<area shape="rect" id="node13" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="2015,95,2209,136"/>
<area shape="rect" id="node15" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="2015,160,2209,201"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1storage_1_1sequential.html#aab3041ddf08dbde93ee896a1efff26d1" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="735,201,914,243"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="717,267,932,308"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="719,332,930,373"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="986,201,1169,243"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="992,267,1163,308"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="1261,201,1411,243"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="1262,267,1410,308"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="980,397,1175,439"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="992,332,1163,373"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="1249,397,1423,439"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="1263,332,1409,373"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="735,529,914,585"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="724,609,925,651"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="987,536,1167,577"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="988,609,1167,651"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="738,449,911,505"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="991,463,1164,504"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a55ba648cb98718804a890ea3b4965e39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MEMORY.html#structfoedus_1_1memory_1_1PagePool_1_1Stat">PagePool::Stat</a> foedus::memory::PagePoolPimpl::get_stat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00359">359</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="page__pool_8hpp_source.html#l00177">foedus::memory::PagePool::Stat::allocated_pages_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00175">pages_for_free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00167">pool_size_</a>, and <a class="el" href="page__pool_8hpp_source.html#l00176">foedus::memory::PagePool::Stat::total_pages_</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00118">foedus::memory::PagePool::get_stat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                           {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  PagePool::Stat ret;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  ret.total_pages_ = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> - <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  ret.allocated_pages_ = ret.total_pages_ - <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab06be51f6c04a3630d40abf6a946e73b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">foedus::memory::PagePoolPimpl::pool_size_</a></div><div class="ttdeci">uint64_t pool_size_</div><div class="ttdoc">Just an auxiliary variable of the size of pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00167">page_pool_pimpl.hpp:167</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a279486c595f8d08c53e9efbd1c7d8590"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">foedus::memory::PagePoolPimpl::pages_for_free_pool_</a></div><div class="ttdeci">uint64_t pages_for_free_pool_</div><div class="ttdoc">This many first pages are used for free page maintainance. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00175">page_pool_pimpl.hpp:175</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="232,5,411,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a55ba648cb98718804a890ea3b4965e39_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c" title="foedus::memory::PagePool\l::get_stat" alt="" coords="232,195,411,236"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369" title="foedus::cache::CacheManager\lPimpl::describe" alt="" coords="479,73,677,115"/>
<area shape="rect" id="node5" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="751,136,950,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="1004,165,1203,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a3dbec4cb10130e169f203c7a8d52d3c9" title="Report rough statistics of free memory. " alt="" coords="468,253,688,295"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a269381dd81631fda44b63559d0a9fbd0" title="Report rough statistics of free memory. " alt="" coords="459,319,697,360"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheManager.html#a210cd75b484f0961e84c3400f203d69b" title="kind of to_string(). " alt="" coords="751,71,950,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1322d8be16a7fe558bd83de18eb41c85" title="foedus::cache::CacheManager\lPimpl::uninitialize_once" alt="" coords="751,5,950,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="1251,165,1449,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1cache_1_1CacheManager.html#ab7dbe48b7c06d1bcefcf787bce285c25" title="foedus::cache::CacheManager\l::uninitialize_once" alt="" coords="1004,5,1203,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1EngineMemory.html#a7d348c5c4edbe01bbe7d72676880d2a2" title="Report rough statistics of free memory. " alt="" coords="745,319,956,360"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abec400efafc2d5e23b8f240e10abdfb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::memory::PagePoolPimpl::grab </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desired_grab_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">191</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8hpp_source.html#l00058">foedus::memory::PagePoolOffsetChunk::capacity()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00103">decrease_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">free_pool_head()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="error__code_8hpp_source.html#l00142">foedus::kErrorCodeMemoryNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00064">foedus::memory::PagePoolControlBlock::lock_</a>, <a class="el" href="page__pool_8hpp_source.html#l00068">foedus::memory::PagePoolOffsetChunk::push_back()</a>, <a class="el" href="page__pool_8hpp_source.html#l00059">foedus::memory::PagePoolOffsetChunk::size()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00129">foedus::memory::PagePool::grab()</a>.</p>
<div class="fragment"><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunk-&gt;size() + desired_grab_count &lt;= chunk-&gt;capacity());</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  VLOG(0) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - Grabbing &quot;</span> &lt;&lt; desired_grab_count &lt;&lt; <span class="stringliteral">&quot; pages.&quot;</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; free_pool_count_=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>()</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    &lt;&lt; (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() &gt;= desired_grab_count</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      ? <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() - desired_grab_count</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      : 0);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  soc::SharedMutexScope guard(&amp;<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">lock_</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  uint64_t free_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(free_count == 0)) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    LOG(WARNING) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - No more free pages left in the pool&quot;</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">kErrorCodeMemoryNoFreePages</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// grab from the head</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  uint64_t grab_count = std::min&lt;uint64_t&gt;(desired_grab_count, free_count);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>* head = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a> + <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() + grab_count &gt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// wrap around</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    uint64_t wrap_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> - <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    chunk-&gt;push_back(head, head + wrap_count);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7">decrease_free_pool_count</a>(wrap_count);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    grab_count -= wrap_count;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    head = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <span class="comment">// no wrap around (or no more wrap around)</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() + grab_count &lt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  chunk-&gt;push_back(head, head + grab_count);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() += grab_count;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7">decrease_free_pool_count</a>(grab_count);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_abd594ac94d8ac0445ebef734b7305fb6"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">foedus::memory::PagePoolPimpl::get_debug_pool_name</a></div><div class="ttdeci">std::string get_debug_pool_name() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00124">page_pool_pimpl.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aa545fc1cffac905225d3a7c7c457b5a8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">foedus::memory::PagePoolPimpl::free_pool_head</a></div><div class="ttdeci">uint64_t &amp; free_pool_head()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00098">page_pool_pimpl.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_af34db25bb1b47c87f0f22f6a521089e0"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">foedus::memory::PagePoolControlBlock::lock_</a></div><div class="ttdeci">soc::SharedMutex lock_</div><div class="ttdoc">grab()/release() are protected with this lock. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00064">page_pool_pimpl.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a1a41295b63274fb300e5937a9bb1eca7"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7">foedus::memory::PagePoolPimpl::decrease_free_pool_count</a></div><div class="ttdeci">void decrease_free_pool_count(uint64_t op)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00103">page_pool_pimpl.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab2c94997f724139b950b66b18d786bd5"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">foedus::memory::PagePoolPimpl::assert_free_pool</a></div><div class="ttdeci">void assert_free_pool() const </div><div class="ttdoc">Not thread safe. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00108">page_pool_pimpl.hpp:108</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">foedus::kErrorCodeMemoryNoFreePages</a></div><div class="ttdoc">0x0301 : "MEMORY : Not enough free volatile pages. Check the config of MemoryOptions" ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00142">error_code.hpp:142</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="250,56,429,97"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="513,10,691,52"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="513,101,691,142"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a73a995a98dc72fa504271482bf14ac56" title="foedus::memory::PagePool\lOffsetChunk::capacity" alt="" coords="250,173,429,214"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="232,238,447,280"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="243,304,436,345"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="250,369,429,410"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2" title="foedus::memory::PagePool\lOffsetChunk::size" alt="" coords="250,434,429,476"/>
<area shape="rect" id="node8" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="506,248,698,289"/>
<area shape="rect" id="node9" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="495,314,709,340"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="513,369,691,410"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_abec400efafc2d5e23b8f240e10abdfb3_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="232,71,411,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="460,5,653,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="459,71,655,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="465,136,649,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="703,71,899,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3293a43a76f3720cf5c92c5fbcf2d02f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::memory::PagePoolPimpl::grab_one </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> *&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">230</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00103">decrease_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">free_pool_head()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="error__code_8hpp_source.html#l00142">foedus::kErrorCodeMemoryNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00064">foedus::memory::PagePoolControlBlock::lock_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00132">foedus::memory::PagePool::grab_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                                        {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  VLOG(1) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>()</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; - Grabbing just one page. free_pool_count_=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    &lt;&lt; (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() - 1);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  *offset = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  soc::SharedMutexScope guard(&amp;<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">lock_</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  uint64_t free_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(free_count == 0)) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    LOG(WARNING) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - No more free pages left in the pool&quot;</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">kErrorCodeMemoryNoFreePages</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// grab from the head</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>* head = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a> + <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() == <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// wrap around</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() = 0;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    head = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// no wrap around (or no more wrap around)</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() + 1 &lt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  *offset = *head;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  ++<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7">decrease_free_pool_count</a>(1);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_abd594ac94d8ac0445ebef734b7305fb6"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">foedus::memory::PagePoolPimpl::get_debug_pool_name</a></div><div class="ttdeci">std::string get_debug_pool_name() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00124">page_pool_pimpl.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aa545fc1cffac905225d3a7c7c457b5a8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">foedus::memory::PagePoolPimpl::free_pool_head</a></div><div class="ttdeci">uint64_t &amp; free_pool_head()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00098">page_pool_pimpl.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_af34db25bb1b47c87f0f22f6a521089e0"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">foedus::memory::PagePoolControlBlock::lock_</a></div><div class="ttdeci">soc::SharedMutex lock_</div><div class="ttdoc">grab()/release() are protected with this lock. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00064">page_pool_pimpl.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a1a41295b63274fb300e5937a9bb1eca7"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7">foedus::memory::PagePoolPimpl::decrease_free_pool_count</a></div><div class="ttdeci">void decrease_free_pool_count(uint64_t op)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00103">page_pool_pimpl.hpp:103</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">foedus::kErrorCodeMemoryNoFreePages</a></div><div class="ttdoc">0x0301 : "MEMORY : Not enough free volatile pages. Check the config of MemoryOptions" ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00142">error_code.hpp:142</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="232,5,447,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="250,71,429,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="243,136,436,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="250,201,429,243"/>
<area shape="rect" id="node5" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="506,107,698,148"/>
<area shape="rect" id="node6" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="495,173,709,199"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a3293a43a76f3720cf5c92c5fbcf2d02f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="232,169,411,211"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="473,35,655,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="459,132,669,173"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="475,339,653,395"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="477,198,651,254"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="750,5,899,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="717,71,932,112"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="719,136,930,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="986,5,1169,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="992,71,1163,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="1234,5,1385,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="1235,71,1383,112"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="980,201,1175,243"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="992,136,1163,177"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="1223,201,1396,243"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="1236,136,1383,177"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="735,339,914,395"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="724,420,925,461"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="987,347,1167,388"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="988,420,1167,461"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="738,259,911,315"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="991,267,1164,308"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3b5b895c26ed502d93e753389ce0a21b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::increase_free_pool_count </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00102">102</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00055">foedus::memory::PagePoolControlBlock::free_pool_count_</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{ <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">free_pool_count_</a> += op; }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_adcca5a6003329659b44ed0cc56b266f7"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">foedus::memory::PagePoolControlBlock::free_pool_count_</a></div><div class="ttdeci">uint64_t free_pool_count_</div><div class="ttdoc">Number of free pages. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00055">page_pool_pimpl.hpp:55</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a3b5b895c26ed502d93e753389ce0a21b_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a3b5b895c26ed502d93e753389ce0a21b_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a3b5b895c26ed502d93e753389ce0a21b_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a3b5b895c26ed502d93e753389ce0a21b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a76cbbda4fd32d9176cbc4098d8b5b2b1" title="foedus::memory::PagePool\lPimpl::release_impl" alt="" coords="264,20,443,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5" title="foedus::memory::PagePool\lPimpl::release_one" alt="" coords="264,85,443,127"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="491,85,669,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="717,5,920,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="733,71,905,141"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="726,165,911,236"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="976,5,1155,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="980,85,1151,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1224,85,1371,127"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="968,180,1163,221"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1211,180,1384,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3a28e3c04c25c6d6cb2cd0628d4fe397"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::PagePoolPimpl::initialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">75</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="protected__boundary_8cpp_source.html#l00025">foedus::assorted::ProtectedBoundary::acquire_protect()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="stop__watch_8hpp_source.html#l00048">foedus::debugging::StopWatch::elapsed_ms()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00055">foedus::memory::PagePoolControlBlock::free_pool_count_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00053">foedus::memory::PagePoolControlBlock::free_pool_head_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00045">foedus::memory::PagePoolControlBlock::initialize()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="assorted__func_8cpp_source.html#l00067">foedus::assorted::os_error()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00152">owns_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00175">pages_for_free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00164">pool_base_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00167">pool_size_</a>, <a class="el" href="protected__boundary_8hpp_source.html#l00088">foedus::assorted::ProtectedBoundary::reset()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00155">rigorous_page_boundary_check_</a>, and <a class="el" href="stop__watch_8cpp_source.html#l00035">foedus::debugging::StopWatch::stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                          {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">owns_</a>) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>()</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; - total_pages=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> &lt;&lt; <span class="stringliteral">&quot;, pages_for_free_pool_=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, boundary_check=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">rigorous_page_boundary_check_</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a40c0ba438ca028c52d447d79b000fdb3">initialize</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - Constructing circular free pool...&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// all pages after pages_for_free_pool_-th page is in the free pool at first</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (!rigorous_page_boundary_check_) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> == <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> - <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a>);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>; ++i) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a>[i] = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a> + i;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="comment">// Use even-numbered pages only</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> == (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">pool_size_</a> - <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a>) / 2U);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>; ++i) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a>[i] = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a> + i * 2U;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - mprotect()-ing odd-numbered pages...&quot;</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      debugging::StopWatch watch;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordtype">bool</span> error_reported = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>; ++i) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        uint64_t index = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a> + i * 2U + 1U;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        static_assert(<span class="keyword">sizeof</span>(assorted::ProtectedBoundary) == <span class="keyword">sizeof</span>(storage::Page), <span class="stringliteral">&quot;Hoosh!&quot;</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        assorted::ProtectedBoundary* boundary = <span class="keyword">reinterpret_cast&lt;</span>assorted::ProtectedBoundary*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;          <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">pool_base_</a> + index);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        boundary-&gt;reset(std::to_string(index));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> mprotect_ret = boundary-&gt;acquire_protect();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (mprotect_ret != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a> &amp;&amp; !error_reported) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          LOG(ERROR) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - mprotect() failed: &quot;</span> &lt;&lt; <a class="code" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">assorted::os_error</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;          error_reported = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        }</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      watch.stop();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - mprotect()-ed &quot;</span> &lt;&lt; free_pool_capacity_</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; pages in &quot;</span> &lt;&lt; watch.elapsed_ms() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">/* to enable this, we need a version for rigorous_page_boundary_check_</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">    // [experimental] randomize the free pool pointers so that we can evenly utilize all</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">    // memory banks</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">    if (false) {  // disabled for now</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">      // this should be an option...</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">      LOG(INFO) &lt;&lt; get_debug_pool_name() &lt;&lt; &quot; - Randomizing free pool...&quot;;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">      struct Randomizer {</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">        PagePoolOffset  offset_;</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">        uint32_t        rank_;</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">        static bool compare(const Randomizer&amp; left, const Randomizer&amp; right) {</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">          return left.rank_ &lt; right.rank_;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">        }</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">      };</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">      Randomizer* randomizers = new Randomizer[free_pool_capacity_];</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">      assorted::UniformRandom rnd(123456L);</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">      for (uint64_t i = 0; i &lt; free_pool_capacity_; ++i) {</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">        randomizers[i].offset_ = pages_for_free_pool_ + i;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">        randomizers[i].rank_ = rnd.next_uint32();</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">      }</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">      std::sort(randomizers, randomizers + free_pool_capacity_, Randomizer::compare);</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">      for (uint64_t i = 0; i &lt; free_pool_capacity_; ++i) {</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">        free_pool_[i] = randomizers[i].offset_;</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">      }</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">      delete[] randomizers;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">      LOG(INFO) &lt;&lt; get_debug_pool_name() &lt;&lt; &quot; - Randomized free pool.&quot;;</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a5fb2401bed036b97097f00cd0f092feb">free_pool_head_</a> = 0;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">free_pool_count_</a> = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - Constructed circular free pool.&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_abd594ac94d8ac0445ebef734b7305fb6"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">foedus::memory::PagePoolPimpl::get_debug_pool_name</a></div><div class="ttdeci">std::string get_debug_pool_name() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00124">page_pool_pimpl.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ade9927750ed1e5985014a909c182d501"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">foedus::memory::PagePoolPimpl::rigorous_page_boundary_check_</a></div><div class="ttdeci">bool rigorous_page_boundary_check_</div><div class="ttdoc">Whether to use mprotect() for page boundaries to detect bogus memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00155">page_pool_pimpl.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a90b0a48f828f795b128ce9bc2e73b44a"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">foedus::memory::PagePoolPimpl::pool_base_</a></div><div class="ttdeci">storage::Page * pool_base_</div><div class="ttdoc">Just an auxiliary variable to the beginning of the pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00164">page_pool_pimpl.hpp:164</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab06be51f6c04a3630d40abf6a946e73b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab06be51f6c04a3630d40abf6a946e73b">foedus::memory::PagePoolPimpl::pool_size_</a></div><div class="ttdeci">uint64_t pool_size_</div><div class="ttdoc">Just an auxiliary variable of the size of pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00167">page_pool_pimpl.hpp:167</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab2c94997f724139b950b66b18d786bd5"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">foedus::memory::PagePoolPimpl::assert_free_pool</a></div><div class="ttdeci">void assert_free_pool() const </div><div class="ttdoc">Not thread safe. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00108">page_pool_pimpl.hpp:108</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a5fb2401bed036b97097f00cd0f092feb"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a5fb2401bed036b97097f00cd0f092feb">foedus::memory::PagePoolControlBlock::free_pool_head_</a></div><div class="ttdeci">uint64_t free_pool_head_</div><div class="ttdoc">Inclusive head of the circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00053">page_pool_pimpl.hpp:53</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a2976dff68bec18ca43917791bf2256db"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">foedus::memory::PagePoolPimpl::owns_</a></div><div class="ttdeci">bool owns_</div><div class="ttdoc">Whether this engine owns this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00152">page_pool_pimpl.hpp:152</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a40c0ba438ca028c52d447d79b000fdb3"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a40c0ba438ca028c52d447d79b000fdb3">foedus::memory::PagePoolControlBlock::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00045">page_pool_pimpl.hpp:45</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_adcca5a6003329659b44ed0cc56b266f7"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#adcca5a6003329659b44ed0cc56b266f7">foedus::memory::PagePoolControlBlock::free_pool_count_</a></div><div class="ttdeci">uint64_t free_pool_count_</div><div class="ttdoc">Number of free pages. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00055">page_pool_pimpl.hpp:55</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaaa260096daf8620266c2799d1f5a0270"><div class="ttname"><a href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">foedus::assorted::os_error</a></div><div class="ttdeci">std::string os_error()</div><div class="ttdoc">Thread-safe strerror(errno). </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8cpp_source.html#l00067">assorted_func.cpp:67</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a279486c595f8d08c53e9efbd1c7d8590"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">foedus::memory::PagePoolPimpl::pages_for_free_pool_</a></div><div class="ttdeci">uint64_t pages_for_free_pool_</div><div class="ttdoc">This many first pages are used for free page maintainance. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00175">page_pool_pimpl.hpp:175</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a3a28e3c04c25c6d6cb2cd0628d4fe397_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a3a28e3c04c25c6d6cb2cd0628d4fe397_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a3a28e3c04c25c6d6cb2cd0628d4fe397_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a3a28e3c04c25c6d6cb2cd0628d4fe397_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#aef6a0854f4740f503674fcb51378992b" title="Puts a strict access prohibition via mprotect(). " alt="" coords="237,5,420,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="239,71,418,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1debugging_1_1StopWatch.html#ac8a42ba406ab38b098e27a19e6803638" title="foedus::debugging::\lStopWatch::elapsed_ms" alt="" coords="246,136,411,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="232,201,425,243"/>
<area shape="rect" id="node10" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a40c0ba438ca028c52d447d79b000fdb3" title="foedus::memory::PagePool\lControlBlock::initialize" alt="" coords="239,267,418,308"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="259,332,399,373"/>
<area shape="rect" id="node14" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#afb7cfb4bdec2ed57900b87c31d164bf4" title="Fills the block with magic words. " alt="" coords="237,397,420,439"/>
<area shape="rect" id="node15" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="261,463,396,504"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="491,11,670,52"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="491,76,670,117"/>
<area shape="rect" id="node8" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="485,147,677,188"/>
<area shape="rect" id="node9" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="473,213,688,239"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SharedMutex.html#a752dda273486899f5a58171c2ede01fb" title="foedus::soc::SharedMutex\l::initialize" alt="" coords="493,267,668,308"/>
<area shape="rect" id="node12" href="classfoedus_1_1soc_1_1SharedMutex.html#a8631c8500a5ab03940e1358f23b654c4" title="foedus::soc::SharedMutex\l::uninitialize" alt="" coords="736,267,911,308"/>
<area shape="rect" id="node16" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="500,429,661,471"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="513,495,648,536"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a13d785355359fd936c2b3863d296ba2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::release </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desired_release_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00302">302</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00134">foedus::memory::PagePool::release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                                                                      {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  release_impl&lt;PagePoolOffsetChunk&gt;(desired_release_count, chunk);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a13d785355359fd936c2b3863d296ba2c_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a13d785355359fd936c2b3863d296ba2c_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a13d785355359fd936c2b3863d296ba2c_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a13d785355359fd936c2b3863d296ba2c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="232,301,411,343"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="459,5,661,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html#aa29872b9c654848dde2e5c0ca1409da0" title="Returns (might cache) the given pointer to volatile pool. " alt="" coords="459,133,661,175"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a26c51902174b692c91aedd15218f01b7" title="subroutine invoked by one thread for one node. " alt="" coords="1241,57,1425,113"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb" title="Subroutine of collect_retired_volatile_page() in case the chunk becomes full. " alt="" coords="468,203,652,244"/>
<area shape="rect" id="node27" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="461,268,659,309"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a256ca43b80dc2eb1dfdf5fd630fe3dd4" title="Called at the end to return all remaining pages to their pools. " alt="" coords="463,333,657,375"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ab199aa6af43bf8493868d70a5e1732fe" title="Called at the end to return all remaining pages to their pools. " alt="" coords="462,399,658,440"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30" title="Return all batched pages in the given chunk to its pool. " alt="" coords="460,464,660,505"/>
<area shape="rect" id="node46" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a4a7a7f3ef2839774e1e35fc0b9f79336" title="foedus::memory::NumaCore\lMemory::uninitialize_once" alt="" coords="468,529,652,571"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aba7104a56eaff1c1f8c87f5bb03f4045" title="foedus::thread::ThreadPimpl\l::uninitialize_once" alt="" coords="468,595,652,636"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="737,5,916,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialComposer.html#a93883e6731ee4a8f2efc4cf7cec2560f" title="foedus::storage::sequential\l::SequentialComposer::drop\l_volatiles" alt="" coords="735,122,918,178"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1Composer.html#a0995635b97031b208127004382947acd" title="Drops volatile pages that have not been modified since the snapshotted epoch. " alt="" coords="1003,127,1181,168"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a5d474e7a6b4de127153103f2295cb0fa" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="1473,64,1700,105"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1748,57,1959,113"/>
<area shape="rect" id="node11" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="2035,31,2189,72"/>
<area shape="rect" id="node13" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="2007,96,2217,137"/>
<area shape="rect" id="node12" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="2265,31,2460,72"/>
<area shape="rect" id="node14" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="2265,96,2460,137"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="731,203,923,244"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="996,203,1188,244"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a31564163126364e4810f2f00398afd15" title="foedus::storage::masstree\l::Adopt::adopt_case_a" alt="" coords="1246,333,1419,375"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="1246,268,1419,309"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1storage_1_1masstree.html#a554f6fb34b45687df09df15076aac190" title="foedus::storage::masstree\l::grow_case_a_common" alt="" coords="1246,137,1419,179"/>
<area shape="rect" id="node24" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="1246,203,1419,244"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#a96de88f03cf5683529e00d2c209a07e9" title="The core implementation after locking relevant pages and acquiring free page resource. " alt="" coords="1246,399,1419,455"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="1500,301,1673,343"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="1500,203,1673,244"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="1489,137,1684,179"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="1500,407,1673,448"/>
<area shape="rect" id="node28" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="727,268,926,309"/>
<area shape="rect" id="node29" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="993,268,1191,309"/>
<area shape="rect" id="node31" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a9e55ed7e111f63dc91c5fbb610baf30e" title="foedus::memory::RoundRobin\lPageGrabBatch::~RoundRobinPage\lGrabBatch" alt="" coords="711,334,942,390"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad3b2fa88186f79546ae747162510af76" title="foedus::memory::DivvyupPage\lGrabBatch::~DivvyupPageGrabBatch" alt="" coords="709,415,944,456"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aedda2314df207e1d39509858cbee6bbd" title="Returns the given in&#45;memory page to the specified NUMA node. " alt="" coords="727,545,927,587"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. " alt="" coords="727,480,927,521"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ac93d73bec0e959851e5a29482e83c5a9" title="foedus::memory::PageRelease\lBatch::~PageReleaseBatch" alt="" coords="992,375,1192,416"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="1018,440,1166,481"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="1006,505,1178,576"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="1005,600,1179,641"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="1247,520,1418,561"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1513,520,1660,561"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="1240,585,1425,656"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="1489,600,1684,641"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1767,600,1940,641"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a068e903c4597b9f1d31cceb0109cf5ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::release </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desired_release_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetDynamicChunk.html">PagePoolOffsetDynamicChunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00305">305</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                                                                                             {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  release_impl&lt;PagePoolOffsetDynamicChunk&gt;(desired_release_count, chunk);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad2d6d0673ec69c1e6520a06663d43c73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::release </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desired_release_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html">PagePoolOffsetAndEpochChunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00308">308</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                                                                              {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  release_impl&lt;PagePoolOffsetAndEpochChunk&gt;(desired_release_count, chunk);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76cbbda4fd32d9176cbc4098d8b5b2b1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename CHUNK &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::release_impl </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desired_release_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CHUNK *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">259</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">free_pool_head()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00102">increase_free_pool_count()</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00064">foedus::memory::PagePoolControlBlock::lock_</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                                                             {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunk-&gt;size() &gt;= desired_release_count);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  VLOG(0) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - Releasing &quot;</span> &lt;&lt; desired_release_count &lt;&lt; <span class="stringliteral">&quot; pages.&quot;</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; free_pool_count_=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    &lt;&lt; (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() + desired_release_count);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  soc::SharedMutexScope guard(&amp;<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">lock_</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  uint64_t free_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">if</span> (free_count + desired_release_count &gt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// this can&#39;t happen unless something is wrong! This is a critical issue from which</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// we can&#39;t recover because page pool is inconsistent!</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    LOG(ERROR) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>()</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; - PagePoolPimpl::release() More than full free-pool. inconsistent state!&quot;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; free_count/capacity/release_count=&quot;</span> &lt;&lt; free_count &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; desired_release_count;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// TASK(Hideaki) Do a duplicate-check here to identify the problemetic pages.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// crash here only in debug mode. otherwise just log the error</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// ASSERT_ND(free_count + desired_release_count &lt;= free_pool_capacity_);</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// TASK(Hideaki) need to figure out why we hit this.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// append to the tail</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  uint64_t release_count = std::min&lt;uint64_t&gt;(desired_release_count, chunk-&gt;size());</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  uint64_t tail = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() + free_count;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">if</span> (tail &gt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    tail -= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">if</span> (tail + release_count &gt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment">// wrap around</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    uint32_t wrap_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a> - tail;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    chunk-&gt;move_to(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a> + tail, wrap_count);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b">increase_free_pool_count</a>(wrap_count);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    release_count -= wrap_count;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    tail = 0;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// no wrap around (or no more wrap around)</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tail + release_count &lt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  chunk-&gt;move_to(<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a> + tail, release_count);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b">increase_free_pool_count</a>(release_count);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a3b5b895c26ed502d93e753389ce0a21b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b">foedus::memory::PagePoolPimpl::increase_free_pool_count</a></div><div class="ttdeci">void increase_free_pool_count(uint64_t op)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00102">page_pool_pimpl.hpp:102</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_abd594ac94d8ac0445ebef734b7305fb6"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">foedus::memory::PagePoolPimpl::get_debug_pool_name</a></div><div class="ttdeci">std::string get_debug_pool_name() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00124">page_pool_pimpl.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aa545fc1cffac905225d3a7c7c457b5a8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">foedus::memory::PagePoolPimpl::free_pool_head</a></div><div class="ttdeci">uint64_t &amp; free_pool_head()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00098">page_pool_pimpl.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_af34db25bb1b47c87f0f22f6a521089e0"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">foedus::memory::PagePoolControlBlock::lock_</a></div><div class="ttdeci">soc::SharedMutex lock_</div><div class="ttdoc">grab()/release() are protected with this lock. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00064">page_pool_pimpl.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab2c94997f724139b950b66b18d786bd5"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">foedus::memory::PagePoolPimpl::assert_free_pool</a></div><div class="ttdeci">void assert_free_pool() const </div><div class="ttdoc">Not thread safe. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00108">page_pool_pimpl.hpp:108</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a76cbbda4fd32d9176cbc4098d8b5b2b1_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a76cbbda4fd32d9176cbc4098d8b5b2b1_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a76cbbda4fd32d9176cbc4098d8b5b2b1_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a76cbbda4fd32d9176cbc4098d8b5b2b1_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="248,57,427,99"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="509,5,687,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="509,81,687,123"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="241,175,434,216"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b" title="foedus::memory::PagePool\lPimpl::increase_free_pool_count" alt="" coords="232,240,443,281"/>
<area shape="rect" id="node6" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="502,169,694,211"/>
<area shape="rect" id="node7" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="491,235,705,262"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a741d98bc9dd15581c1316ae5eaf492d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::release_one </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">312</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__stack_8hpp_source.html#l00610">COERCE_ERROR</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">free_pool_head()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00102">increase_free_pool_count()</a>, <a class="el" href="initializable_8hpp_source.html#l00196">foedus::DefaultInitializable::is_initialized()</a>, <a class="el" href="error__code_8hpp_source.html#l00143">foedus::kErrorCodeMemoryDuplicatePage</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00064">foedus::memory::PagePoolControlBlock::lock_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00152">owns_</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00144">foedus::memory::PagePool::release_one()</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                                     {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a>() || !<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">owns_</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  VLOG(1) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - Releasing just one page. free_pool_count_=&quot;</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span> &lt;&lt; (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>() + 1);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  soc::SharedMutexScope guard(&amp;<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">lock_</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  uint64_t free_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">if</span> (free_count &gt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="comment">// this can&#39;t happen unless something is wrong! This is a critical issue from which</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// we can&#39;t recover because page pool is inconsistent!</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    LOG(ERROR) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>()</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; - PagePoolPimpl::release_one() More than full free-pool. inconsistent state!&quot;</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaffe5682593fcb16d1afef651612f5909">COERCE_ERROR</a>(<a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a76aaa1be755656d6dddfff902992c657">kErrorCodeMemoryDuplicatePage</a>));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// append to the tail</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  uint64_t tail = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">free_pool_head</a>() + free_count;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">if</span> (tail &gt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    tail -= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (tail == <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// wrap around</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    tail = 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// no wrap around (or no more wrap around)</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tail + 1 &lt;= <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">free_pool_</a>[tail] = offset;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b">increase_free_pool_count</a>(1);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a3b5b895c26ed502d93e753389ce0a21b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b">foedus::memory::PagePoolPimpl::increase_free_pool_count</a></div><div class="ttdeci">void increase_free_pool_count(uint64_t op)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00102">page_pool_pimpl.hpp:102</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_abd594ac94d8ac0445ebef734b7305fb6"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">foedus::memory::PagePoolPimpl::get_debug_pool_name</a></div><div class="ttdeci">std::string get_debug_pool_name() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00124">page_pool_pimpl.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aa545fc1cffac905225d3a7c7c457b5a8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8">foedus::memory::PagePoolPimpl::free_pool_head</a></div><div class="ttdeci">uint64_t &amp; free_pool_head()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00098">page_pool_pimpl.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_af34db25bb1b47c87f0f22f6a521089e0"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#af34db25bb1b47c87f0f22f6a521089e0">foedus::memory::PagePoolControlBlock::lock_</a></div><div class="ttdeci">soc::SharedMutex lock_</div><div class="ttdoc">grab()/release() are protected with this lock. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00064">page_pool_pimpl.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaffe5682593fcb16d1afef651612f5909"><div class="ttname"><a href="group__ERRORCODES.html#gaffe5682593fcb16d1afef651612f5909">COERCE_ERROR</a></div><div class="ttdeci">#define COERCE_ERROR(x)</div><div class="ttdoc">This macro calls x and aborts if encounters an error. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00610">error_stack.hpp:610</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a76aaa1be755656d6dddfff902992c657"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a76aaa1be755656d6dddfff902992c657">foedus::kErrorCodeMemoryDuplicatePage</a></div><div class="ttdoc">0x0302 : "MEMORY : Duplicate entry in free-page pool." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00143">error_code.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a2976dff68bec18ca43917791bf2256db"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">foedus::memory::PagePoolPimpl::owns_</a></div><div class="ttdeci">bool owns_</div><div class="ttdoc">Whether this engine owns this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00152">page_pool_pimpl.hpp:152</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a1abda1e84b8af8bd6916e52fd0a09f3e"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">foedus::DefaultInitializable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override final</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00196">initializable.hpp:196</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aefff716272ce45dcfee6fb55138496d0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aefff716272ce45dcfee6fb55138496d0">foedus::memory::PagePoolPimpl::free_pool_</a></div><div class="ttdeci">PagePoolOffset * free_pool_</div><div class="ttdoc">We maintain free pages as a simple circular queue. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00181">page_pool_pimpl.hpp:181</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="248,5,427,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="241,71,434,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="248,136,427,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b" title="foedus::memory::PagePool\lPimpl::increase_free_pool_count" alt="" coords="232,201,443,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="251,267,423,308"/>
<area shape="rect" id="node4" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="502,41,694,83"/>
<area shape="rect" id="node5" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="491,107,705,134"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a741d98bc9dd15581c1316ae5eaf492d5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="232,85,411,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="459,5,661,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="474,71,646,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="467,165,653,236"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="717,5,896,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="721,85,892,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="965,85,1112,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="709,180,904,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="952,180,1125,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4b74a063f1e70b1a634a77092b61e435"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PagePoolPimpl::set_debug_pool_name </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00135">135</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>References <a class="el" href="fixed__string_8hpp_source.html#l00119">foedus::assorted::FixedString&lt; MAXLEN, CHAR &gt;::assign()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00058">foedus::memory::PagePoolControlBlock::debug_pool_name_</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00122">foedus::memory::PagePool::set_debug_pool_name()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                                                 {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">debug_pool_name_</a>.<a class="code" href="classfoedus_1_1assorted_1_1FixedString.html#a4d6e347fcdae7d141e0167ad5a4a4bd2">assign</a>(name);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="classfoedus_1_1assorted_1_1FixedString_html_a4d6e347fcdae7d141e0167ad5a4a4bd2"><div class="ttname"><a href="classfoedus_1_1assorted_1_1FixedString.html#a4d6e347fcdae7d141e0167ad5a4a4bd2">foedus::assorted::FixedString::assign</a></div><div class="ttdeci">void assign(const FixedString&lt; MAXLEN2, CHAR &gt; &amp;other) noexcept</div><div class="ttdoc">Assign operator for all FixedString objects. </div><div class="ttdef"><b>Definition:</b> <a href="fixed__string_8hpp_source.html#l00119">fixed_string.hpp:119</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a71934f7af2ece8722d0cefa28fa7d7e4"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a71934f7af2ece8722d0cefa28fa7d7e4">foedus::memory::PagePoolControlBlock::debug_pool_name_</a></div><div class="ttdeci">assorted::FixedString&lt; 60 &gt; debug_pool_name_</div><div class="ttdoc">just for debugging/logging. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00058">page_pool_pimpl.hpp:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1assorted_1_1FixedString.html#a4d6e347fcdae7d141e0167ad5a4a4bd2" title="Assign operator for all FixedString objects. " alt="" coords="247,5,439,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_icgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_a4b74a063f1e70b1a634a77092b61e435_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#aeaee1accaade5856ad8786a2f8a3a22a" title="Call this anytime after attach() " alt="" coords="247,5,425,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a70fdc4e831999f941d4105de0c3ce3fd" title="foedus::memory::NumaNode\lMemory::initialize_once" alt="" coords="473,5,660,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa079d110c76126386b0d3eefeaf1ae38"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::PagePoolPimpl::uninitialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">152</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>

<p>References <a class="el" href="protected__boundary_8hpp_source.html#l00103">foedus::assorted::ProtectedBoundary::assert_boundary()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">control_block_</a>, <a class="el" href="stop__watch_8hpp_source.html#l00048">foedus::debugging::StopWatch::elapsed_ms()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">free_pool_capacity_</a>, <a class="el" href="protected__boundary_8hpp_source.html#l00109">foedus::assorted::ProtectedBoundary::get_boundary_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="assorted__func_8cpp_source.html#l00067">foedus::assorted::os_error()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00152">owns_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00175">pages_for_free_pool_</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00164">pool_base_</a>, <a class="el" href="protected__boundary_8cpp_source.html#l00033">foedus::assorted::ProtectedBoundary::release_protect()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00155">rigorous_page_boundary_check_</a>, <a class="el" href="stop__watch_8cpp_source.html#l00035">foedus::debugging::StopWatch::stop()</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00048">foedus::memory::PagePoolControlBlock::uninitialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                            {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">owns_</a>) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">assert_free_pool</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">rigorous_page_boundary_check_</a>) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - releasing mprotect() odd-numbered pages...&quot;</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      debugging::StopWatch watch;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordtype">bool</span> error_reported = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>; ++i) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        uint64_t index = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">pages_for_free_pool_</a> + i * 2U + 1U;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        assorted::ProtectedBoundary* boundary = <span class="keyword">reinterpret_cast&lt;</span>assorted::ProtectedBoundary*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">pool_base_</a> + index);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> mprotect_ret = boundary-&gt;release_protect();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">if</span> (mprotect_ret != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a> &amp;&amp; !error_reported) {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          LOG(ERROR) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - mprotect() failed: &quot;</span> &lt;&lt; <a class="code" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">assorted::os_error</a>();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          error_reported = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        boundary-&gt;assert_boundary();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(boundary-&gt;get_boundary_name() == std::to_string(index));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      watch.stop();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>() &lt;&lt; <span class="stringliteral">&quot; - released mprotect() &quot;</span> &lt;&lt; free_pool_capacity_</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; pages in &quot;</span> &lt;&lt; watch.elapsed_ms() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    uint64_t free_count = <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">get_free_pool_count</a>();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (free_count != free_pool_capacity_) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="comment">// This is not a memory leak as we anyway releases everything, but it&#39;s a smell of bug.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      LOG(WARNING) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; - Page Pool has not received back all free pages by its uninitialization!!&quot;</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; count=&quot;</span> &lt;&lt; free_count &lt;&lt; <span class="stringliteral">&quot;, capacity=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">free_pool_capacity_</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      LOG(INFO) &lt;&lt; <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">get_debug_pool_name</a>()</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; - Page Pool has received back all free pages. No suspicious behavior.&quot;</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a45f2f1868dc6b74f3909f6bec37d8a8b">uninitialize</a>();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1PagePoolControlBlock_html_a45f2f1868dc6b74f3909f6bec37d8a8b"><div class="ttname"><a href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a45f2f1868dc6b74f3909f6bec37d8a8b">foedus::memory::PagePoolControlBlock::uninitialize</a></div><div class="ttdeci">void uninitialize()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00048">page_pool_pimpl.hpp:48</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_abd594ac94d8ac0445ebef734b7305fb6"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6">foedus::memory::PagePoolPimpl::get_debug_pool_name</a></div><div class="ttdeci">std::string get_debug_pool_name() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00124">page_pool_pimpl.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ade9927750ed1e5985014a909c182d501"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ade9927750ed1e5985014a909c182d501">foedus::memory::PagePoolPimpl::rigorous_page_boundary_check_</a></div><div class="ttdeci">bool rigorous_page_boundary_check_</div><div class="ttdoc">Whether to use mprotect() for page boundaries to detect bogus memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00155">page_pool_pimpl.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a50e6fad1a2e9735182f83a52a5e329b0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0">foedus::memory::PagePoolPimpl::get_free_pool_count</a></div><div class="ttdeci">uint64_t get_free_pool_count() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00101">page_pool_pimpl.hpp:101</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a90b0a48f828f795b128ce9bc2e73b44a"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a90b0a48f828f795b128ce9bc2e73b44a">foedus::memory::PagePoolPimpl::pool_base_</a></div><div class="ttdeci">storage::Page * pool_base_</div><div class="ttdoc">Just an auxiliary variable to the beginning of the pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00164">page_pool_pimpl.hpp:164</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a5a438e3edeac7f4d4a92c666f8c8117f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a5a438e3edeac7f4d4a92c666f8c8117f">foedus::memory::PagePoolPimpl::free_pool_capacity_</a></div><div class="ttdeci">uint64_t free_pool_capacity_</div><div class="ttdoc">Size of free_pool_. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00183">page_pool_pimpl.hpp:183</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_aab66247cf8a84236aedfd5ea2e7589ad"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aab66247cf8a84236aedfd5ea2e7589ad">foedus::memory::PagePoolPimpl::control_block_</a></div><div class="ttdeci">PagePoolControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00143">page_pool_pimpl.hpp:143</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_ab2c94997f724139b950b66b18d786bd5"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5">foedus::memory::PagePoolPimpl::assert_free_pool</a></div><div class="ttdeci">void assert_free_pool() const </div><div class="ttdoc">Not thread safe. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00108">page_pool_pimpl.hpp:108</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a2976dff68bec18ca43917791bf2256db"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a2976dff68bec18ca43917791bf2256db">foedus::memory::PagePoolPimpl::owns_</a></div><div class="ttdeci">bool owns_</div><div class="ttdoc">Whether this engine owns this page pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00152">page_pool_pimpl.hpp:152</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaaa260096daf8620266c2799d1f5a0270"><div class="ttname"><a href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">foedus::assorted::os_error</a></div><div class="ttdeci">std::string os_error()</div><div class="ttdoc">Thread-safe strerror(errno). </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8cpp_source.html#l00067">assorted_func.cpp:67</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolPimpl_html_a279486c595f8d08c53e9efbd1c7d8590"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a279486c595f8d08c53e9efbd1c7d8590">foedus::memory::PagePoolPimpl::pages_for_free_pool_</a></div><div class="ttdeci">uint64_t pages_for_free_pool_</div><div class="ttdoc">This many first pages are used for free page maintainance. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool__pimpl_8hpp_source.html#l00175">page_pool_pimpl.hpp:175</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PagePoolPimpl_aa079d110c76126386b0d3eefeaf1ae38_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PagePoolPimpl_aa079d110c76126386b0d3eefeaf1ae38_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PagePoolPimpl_aa079d110c76126386b0d3eefeaf1ae38_cgraph" id="classfoedus_1_1memory_1_1PagePoolPimpl_aa079d110c76126386b0d3eefeaf1ae38_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a2242e8ed93e24a8cba2097c3433e0216" title="Called at shutdown to check whether these boundaries were not accessed. " alt="" coords="242,5,425,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="244,71,423,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="501,129,679,171"/>
<area shape="rect" id="node6" href="classfoedus_1_1debugging_1_1StopWatch.html#ac8a42ba406ab38b098e27a19e6803638" title="foedus::debugging::\lStopWatch::elapsed_ms" alt="" coords="251,188,416,229"/>
<area shape="rect" id="node7" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#aa49284d94b43a9820c2e3ed2d8770db0" title="foedus::assorted::Protected\lBoundary::get_boundary_name" alt="" coords="232,253,435,295"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="237,319,430,360"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="263,384,403,425"/>
<area shape="rect" id="node12" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a10383a5371b4bac033184c7441719fee" title="Removes all access restrictions via mprotect(). " alt="" coords="242,449,425,491"/>
<area shape="rect" id="node13" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="266,515,401,556"/>
<area shape="rect" id="node16" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html#a45f2f1868dc6b74f3909f6bec37d8a8b" title="foedus::memory::PagePool\lControlBlock::uninitialize" alt="" coords="244,580,423,621"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="501,64,679,105"/>
<area shape="rect" id="node9" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="494,289,686,331"/>
<area shape="rect" id="node10" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="483,355,697,382"/>
<area shape="rect" id="node14" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="509,449,671,491"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="523,515,657,556"/>
<area shape="rect" id="node17" href="classfoedus_1_1soc_1_1SharedMutex.html#a8631c8500a5ab03940e1358f23b654c4" title="foedus::soc::SharedMutex\l::uninitialize" alt="" coords="503,580,677,621"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="abf1110b6b18293d7206bf1e09b80a312"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html">PagePoolPimpl</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">343</a> of file <a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                                                              {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;PagePool&gt;&quot;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;name_&gt;&quot;</span> &lt;&lt; v.get_debug_pool_name() &lt;&lt; <span class="stringliteral">&quot;&lt;/name_&gt;&quot;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;memory_&gt;&quot;</span> &lt;&lt; v.memory_ &lt;&lt; <span class="stringliteral">&quot;&lt;/memory_&gt;&quot;</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;memory_size&gt;&quot;</span> &lt;&lt; v.memory_size_ &lt;&lt; <span class="stringliteral">&quot;&lt;/memory_size&gt;&quot;</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;owns_&gt;&quot;</span> &lt;&lt; v.owns_ &lt;&lt; <span class="stringliteral">&quot;&lt;/owns_&gt;&quot;</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;rigorous_page_boundary_check_&gt;&quot;</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      &lt;&lt; v.rigorous_page_boundary_check_ &lt;&lt; <span class="stringliteral">&quot;&lt;/rigorous_page_boundary_check_&gt;&quot;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;pages_for_free_pool_&gt;&quot;</span> &lt;&lt; v.pages_for_free_pool_ &lt;&lt; <span class="stringliteral">&quot;&lt;/pages_for_free_pool_&gt;&quot;</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;free_pool_capacity_&gt;&quot;</span> &lt;&lt; v.free_pool_capacity_ &lt;&lt; <span class="stringliteral">&quot;&lt;/free_pool_capacity_&gt;&quot;</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;free_pool_head_&gt;&quot;</span> &lt;&lt; v.free_pool_head() &lt;&lt; <span class="stringliteral">&quot;&lt;/free_pool_head_&gt;&quot;</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;free_pool_count_&gt;&quot;</span> &lt;&lt; v.get_free_pool_count() &lt;&lt; <span class="stringliteral">&quot;&lt;/free_pool_count_&gt;&quot;</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/PagePool&gt;&quot;</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aab66247cf8a84236aedfd5ea2e7589ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1memory_1_1PagePoolControlBlock.html">PagePoolControlBlock</a>* foedus::memory::PagePoolPimpl::control_block_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00143">143</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00103">decrease_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00098">free_pool_head()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00124">get_debug_pool_name()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00101">get_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00102">increase_free_pool_count()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00135">set_debug_pool_name()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="aefff716272ce45dcfee6fb55138496d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>* foedus::memory::PagePoolPimpl::free_pool_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>We maintain free pages as a simple circular queue. </p>
<p>We append new/released pages to tail while we eat from head. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00181">181</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a438e3edeac7f4d4a92c666f8c8117f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::free_pool_capacity_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of free_pool_. </p>
<p>Immutable once initialized. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00183">183</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8hpp_source.html#l00100">get_free_pool_capacity()</a>, <a class="el" href="page__pool_8cpp_source.html#l00124">foedus::memory::PagePool::get_recommended_pages_per_grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00191">grab()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00230">grab_one()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00259">release_impl()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="af9867b0cbbf07604b3c53d0f028312b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* foedus::memory::PagePoolPimpl::memory_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The whole memory region of the pool. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00146">146</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>.</p>

</div>
</div>
<a class="anchor" id="a86c50e36539db6cd804fb455d9e05210"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::memory_size_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Byte size of this page pool. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00149">149</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool_8cpp_source.html#l00117">foedus::memory::PagePool::get_memory_size()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>.</p>

</div>
</div>
<a class="anchor" id="a2976dff68bec18ca43917791bf2256db"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::memory::PagePoolPimpl::owns_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether this engine owns this page pool. </p>
<p>If not, initialize just attaches </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00152">152</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00312">release_one()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a279486c595f8d08c53e9efbd1c7d8590"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::pages_for_free_pool_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This many first pages are used for free page maintainance. </p>
<p>This also means that "Page-0" never appears in our engine, thus we can use offset=0 as null. In other words, all offsets grabbed/released should be equal or larger than this value. Immutable once initialized. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00175">175</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00359">get_stat()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a90b0a48f828f795b128ce9bc2e73b44a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a>* foedus::memory::PagePoolPimpl::pool_base_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Just an auxiliary variable to the beginning of the pool. </p>
<p>Same as memory_.get_block(). </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00164">164</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool_8cpp_source.html#l00119">foedus::memory::PagePool::get_base()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="ab06be51f6c04a3630d40abf6a946e73b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::PagePoolPimpl::pool_size_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Just an auxiliary variable of the size of pool. </p>
<p>Same as memory_byte_size/kPageSize. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00167">167</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8hpp_source.html#l00108">assert_free_pool()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00359">get_stat()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a371773fd41c2732e4299e9296468640b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">LocalPageResolver</a> foedus::memory::PagePoolPimpl::resolver_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>An object to resolve an offset in <em>this</em> page pool (thus <em>local</em>) to an actual pointer and vice versa. </p>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00161">161</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, and <a class="el" href="page__pool__pimpl_8hpp_source.html#l00096">get_resolver()</a>.</p>

</div>
</div>
<a class="anchor" id="ade9927750ed1e5985014a909c182d501"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::memory::PagePoolPimpl::rigorous_page_boundary_check_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Whether to use mprotect() for page boundaries to detect bogus memory accesses. </p>
<p>Similar to rigorous_memory_boundary_check_, but this one is about page pools. When true, we <em>waste</em> a half of volatile/snapshot page pool, putting mprotect in odd-numbered page indexes. The threads receive only the even-numbered indexes, so if any read/write overruns a page, a signal is fired. This makes the execution quite slower and wastes half of memory, so use it just for debugging. This flag also disables hugepages used for snapshot page pool for mprotect to work, so makes it really SLOW. Default is false. </p><dl class="section attention"><dt>Attention</dt><dd>To use this feature with large page pool sizes, you must increase max_map_count. sudo sysctl -w vm.max_map_count=2147483647 Otherwise you will get out-of-memory crashes. Linux's default value is only 65530. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>When FOEDUS is running on a valgrind process, you shouldn't turn this on because valgrind uses a hard-coded limit VG_N_SEGMENTS rather than vm.max_map_count. However, if you are sure the number of mprotect-ed pages are less than 64k, you can. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html" title="A 4kb dummy data placed between separate memory regions so that we can check if/where a bogus memory ...">foedus::assorted::ProtectedBoundary</a> </dd></dl>

<p>Definition at line <a class="el" href="page__pool__pimpl_8hpp_source.html#l00155">155</a> of file <a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00047">attach()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">initialize_once()</a>, <a class="el" href="page__pool__pimpl_8cpp_source.html#l00343">foedus::memory::operator&lt;&lt;()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">uninitialize_once()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/memory/<a class="el" href="page__pool__pimpl_8hpp_source.html">page_pool_pimpl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/memory/<a class="el" href="page__pool__pimpl_8cpp_source.html">page_pool_pimpl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1memory.html">memory</a></li><li class="navelem"><a class="el" href="classfoedus_1_1memory_1_1PagePoolPimpl.html">PagePoolPimpl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
