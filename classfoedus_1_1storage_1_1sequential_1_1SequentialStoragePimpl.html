<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::sequential::SequentialStoragePimpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::sequential::SequentialStoragePimpl Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__SEQUENTIAL.html">Sequential Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Lock-free list of records stored in the volatile part of sequential storage.  
 <a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Lock-free list of records stored in the volatile part of sequential storage. </p>
<p>Volatile parts of sequential storages are completely separated from stable snapshot pages and maintained as a <em>lock-free</em> list of <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html" title="Represents one data page in Sequential Storage. ">SequentialPage</a>.</p>
<p>The append of record in page involves one atomic CAS, and append of a new page involves one atomic CAS too. Because this list is an append/scan only list, this is way simpler than typical lock-free lists.</p>
<h1><a class="anchor" id="SEQ_VOL_LIST_CONCUR"></a>
Concurrency Control</h1>
<p>In this volatile list, we assume the following things to simplify concurrency control:</p>
<ul>
<li>Each <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html" title="Represents one data page in Sequential Storage. ">SequentialPage</a> contains records only in one epoch. When epoch switches, we insert new records to new page even if the page is almost vacant. </li>
<li>The order in page does not necessarily reflect serialization order. The sequential storage provides a <em>set</em> semantics rather than <em>list</em> semantics in terms of serializability although it's loosely ordered. </li>
<li>Each thread maintains its own head/tail pages so that they don't interfere each other at all. This, combined with the assumption above, makes it completely without blocking and atomic operations <b>EXCEPT:</b> </li>
<li>For scanning cursors (which only rarely occur and are fundamentally slow anyways), we take an exclusive lock when they touch <em>unsafe</em> epochs. Further, the scanning thread must wait until all other threads did NOT start before the scanning thread take lock. (otherwise serializability is not guaranteed). We will have something like Xct::InCommitEpochGuard for this purpose. As scanning threads are rare, they can wait for a while, so it's okay for other threads to complete at least one transacion before they get aware of the lock. </li>
<li>However, the above requirement is not mandatory if the scanning threads are running in snapshot mode or dirty-read mode. We just make sure that what is reads is within the epoch. Because other threads append record in serialization order to their own lists, this can be trivially achieved.</li>
</ul>
<p>With these assumptions, sequential storages don't require any locking for serializability. Thus, we separate write-sets of sequential storages from other write-sets in transaction objects.</p>
<dl class="section user"><dt>Page replacement policy after snapshot</dt><dd>This is an append-optimized storage, so there is no point to keep volatile pages for future use. We thus drop all volatile pages that were snapshot.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is a private implementation-details of <a class="el" href="group__SEQUENTIAL.html">Sequential Storage</a>, thus file name ends with _impl. Do not include this header from a client program. There is no case client program needs to access this internal class. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd>Implement the scanning functionality as above. </dd></dl>

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00139">139</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::storage::sequential::SequentialStoragePimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl__inherit__graph.png" border="0" usemap="#foedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_inherit__map" id="foedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; SequentialStorageControl\lBlock \&gt;" alt="" coords="5,5,187,61"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::storage::sequential::SequentialStoragePimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl__coll__graph.png" border="0" usemap="#foedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_coll__map" id="foedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; SequentialStorageControl\lBlock \&gt;" alt="" coords="1431,243,1612,299"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html" title="Shared data of this storage type. " alt="" coords="1083,209,1293,251"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata.html" title="Metadata of a sequential storage. " alt="" coords="703,40,881,81"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Metadata.html" title="Metadata of one storage. " alt="" coords="377,46,551,73"/>
<area shape="rect" id="node6" href="classfoedus_1_1assorted_1_1FixedString.html" title="foedus::assorted::FixedString\l\&lt; 60 \&gt;" alt="" coords="5,5,197,47"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Metadata_1_1SnapshotThresholds.html" title="Tuning parameters related to snapshotting. " alt="" coords="15,71,188,112"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1RwLockableXctId.html" title="The MCS reader&#45;writer lock variant of LockableXctId. " alt="" coords="696,109,888,135"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1McsRwLock.html" title="An MCS reader&#45;writer lock data structure. " alt="" coords="381,97,547,123"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1XctId.html" title="Persistent status part of Transaction ID. " alt="" coords="403,147,525,174"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1DualPagePointer.html" title="Represents a pointer to another page (usually a child page). " alt="" coords="705,252,879,293"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html" title="Represents a pointer to a volatile page with modification count for preventing ABA. " alt="" coords="383,216,545,257"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="705,318,879,345"/>
<area shape="rect" id="node14" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. " alt="" coords="1134,309,1242,335"/>
<area shape="rect" id="node15" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="726,369,858,395"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__SEQUENTIAL.html#structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage">PointerPage</a></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a91e88774749dc31c06b9a9a9b73eee6d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a91e88774749dc31c06b9a9a9b73eee6d">SequentialStoragePimpl</a> ()=delete</td></tr>
<tr class="separator:a91e88774749dc31c06b9a9a9b73eee6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af979b81551117454cf89c9aa1068f775"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#af979b81551117454cf89c9aa1068f775">SequentialStoragePimpl</a> (<a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html">SequentialStorage</a> *storage)</td></tr>
<tr class="separator:af979b81551117454cf89c9aa1068f775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c3dceab18dfe8e749edd67357ea70e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a67c3dceab18dfe8e749edd67357ea70e">SequentialStoragePimpl</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html">SequentialStorageControlBlock</a> *control_block)</td></tr>
<tr class="separator:a67c3dceab18dfe8e749edd67357ea70e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7deab12645a7867f1c4e262c3d9b0b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9e7deab12645a7867f1c4e262c3d9b0b">exists</a> () const </td></tr>
<tr class="separator:a9e7deab12645a7867f1c4e262c3d9b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637f582ce67ec9d4bfe7d6f1f55829a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">get_id</a> () const </td></tr>
<tr class="separator:a637f582ce67ec9d4bfe7d6f1f55829a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8cfc752735602f2b1afeacf10a94b6d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacefoedus_1_1storage.html#a0c15c034d49af969335271617a73a846">StorageName</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a> () const </td></tr>
<tr class="separator:ad8cfc752735602f2b1afeacf10a94b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ccf59655effed1a259100c4d46b06b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b">create</a> (const <a class="el" href="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata.html">SequentialMetadata</a> &amp;metadata)</td></tr>
<tr class="separator:ab9ccf59655effed1a259100c4d46b06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf7d413df08f874c5d7caf175260c02f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f">load</a> (const <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> &amp;snapshot_block)</td></tr>
<tr class="separator:aaf7d413df08f874c5d7caf175260c02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc045528304f2d22f64b3f1c76b99fa5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">initialize_head_tail_pages</a> ()</td></tr>
<tr class="separator:acc045528304f2d22f64b3f1c76b99fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4ea4254f3eefd06d1c62ca8fdbe217c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c">drop</a> ()</td></tr>
<tr class="separator:ad4ea4254f3eefd06d1c62ca8fdbe217c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8917edb5d2712fba660a33c6cf2fb19f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f">truncate</a> (<a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> new_truncate_epoch, <a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> *commit_epoch)</td></tr>
<tr class="separator:a8917edb5d2712fba660a33c6cf2fb19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4">apply_truncate</a> (const <a class="el" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a> &amp;the_log)</td></tr>
<tr class="separator:af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9754dc5a7c8b8f1f45a77714dfa8a53f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">get_head</a> (const <a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a> &amp;resolver, <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id) const </td></tr>
<tr class="separator:a9754dc5a7c8b8f1f45a77714dfa8a53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed5645880f0c4dfe3bca57ad9846ea4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aeed5645880f0c4dfe3bca57ad9846ea4">get_tail</a> (const <a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a> &amp;resolver, <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id) const </td></tr>
<tr class="separator:aeed5645880f0c4dfe3bca57ad9846ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa13fb52d28c1ad2fd240bc877b18dc85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id) const </td></tr>
<tr class="separator:aa13fb52d28c1ad2fd240bc877b18dc85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae819655e8bea414d1152509866ddfd39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">get_tail_pointer</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id) const </td></tr>
<tr class="separator:ae819655e8bea414d1152509866ddfd39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65a45c9727f65048b1b55b7b69dfdce1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1">append_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> owner_id, const void *payload, uint16_t payload_count)</td></tr>
<tr class="memdesc:a65a45c9727f65048b1b55b7b69dfdce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appends an already-commited record to this volatile list.  <a href="#a65a45c9727f65048b1b55b7b69dfdce1">More...</a><br /></td></tr>
<tr class="separator:a65a45c9727f65048b1b55b7b69dfdce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8595b7fa861e2f16b04f6758a7508a5"><td class="memTemplParams" colspan="2">template&lt;typename HANDLER &gt; </td></tr>
<tr class="memitem:ab8595b7fa861e2f16b04f6758a7508a5"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab8595b7fa861e2f16b04f6758a7508a5">for_every_page</a> (HANDLER handler) const </td></tr>
<tr class="memdesc:ab8595b7fa861e2f16b04f6758a7508a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Traverse all pages and call back the handler for every page.  <a href="#ab8595b7fa861e2f16b04f6758a7508a5">More...</a><br /></td></tr>
<tr class="separator:ab8595b7fa861e2f16b04f6758a7508a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; SequentialStorageControlBlock &gt;</a></td></tr>
<tr class="memitem:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ab3209bc9bd57c99f0ad601f33ec77d1e">Attachable</a> ()</td></tr>
<tr class="separator:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad91af21656ffcf7eeb56a5f7d0f5f661">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ac28be42953c806e4c4e0ad8f99201dae">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, SequentialStorageControlBlock *control_block)</td></tr>
<tr class="separator:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad1182f6bd28f64e3c48bf5ee36d54cce">Attachable</a> (SequentialStorageControlBlock *control_block)</td></tr>
<tr class="separator:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a7892c78e38fb5f025ea73939a25c9d2e">Attachable</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aed95388e1a77a81a5d7d04cf28ef3577">~Attachable</a> ()</td></tr>
<tr class="separator:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a0666676a4eaed1c0fdf94a2e1b00c099">operator=</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a484796b2fffa361b9a6ed2f1b7f61a35">attach</a> (SequentialStorageControlBlock *control_block)</td></tr>
<tr class="memdesc:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches to the given shared memory.  <a href="#a484796b2fffa361b9a6ed2f1b7f61a35">More...</a><br /></td></tr>
<tr class="separator:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aebf4adece08c298864ce05ddd9461a0c">is_attached</a> () const</td></tr>
<tr class="memdesc:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already attached to some shared memory.  <a href="#aebf4adece08c298864ce05ddd9461a0c">More...</a><br /></td></tr>
<tr class="separator:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">SequentialStorageControlBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad">get_control_block</a> () const</td></tr>
<tr class="separator:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a44f07b6dbb803d41d16b40182e8ff583">get_engine</a> () const</td></tr>
<tr class="separator:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#acd701f80820c2ef1f665bda157346021">set_engine</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; SequentialStorageControlBlock &gt;</a></td></tr>
<tr class="memitem:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a></td></tr>
<tr class="memdesc:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most attachable object stores an engine pointer (local engine), so we define it here.  <a href="#a5f84f871a1d36f9ee990f3175661cd99">More...</a><br /></td></tr>
<tr class="separator:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">SequentialStorageControlBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a></td></tr>
<tr class="memdesc:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The shared data on shared memory that has been initialized in some SOC or master engine.  <a href="#af9f87c691e2df0b04322e6df8d7c0d81">More...</a><br /></td></tr>
<tr class="separator:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a91e88774749dc31c06b9a9a9b73eee6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::sequential::SequentialStoragePimpl::SequentialStoragePimpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af979b81551117454cf89c9aa1068f775"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::sequential::SequentialStoragePimpl::SequentialStoragePimpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html">SequentialStorage</a> *&#160;</td>
          <td class="paramname"><em>storage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00145">145</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    : Attachable&lt;SequentialStorageControlBlock&gt;(</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      storage-&gt;get_engine(),</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      storage-&gt;get_control_block()) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67c3dceab18dfe8e749edd67357ea70e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::sequential::SequentialStoragePimpl::SequentialStoragePimpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html">SequentialStorageControlBlock</a> *&#160;</td>
          <td class="paramname"><em>control_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00150">150</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    : Attachable&lt;SequentialStorageControlBlock&gt;(engine, control_block) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a65a45c9727f65048b1b55b7b69dfdce1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::sequential::SequentialStoragePimpl::append_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a>&#160;</td>
          <td class="paramname"><em>owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appends an already-commited record to this volatile list. </p>
<p>This method is guaranteed to succeed, so it does not return error code, which is essential to be used after commit. Actually, there is one very rare case this method might fail: we need a new page and the page pool has zero free page. However, we can trivially avoid this case by checking if we have at least one free page in <em>thread-local</em> cache during pre-commit. </p>

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00323">323</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="sequential__page__impl_8hpp_source.html#l00155">foedus::storage::sequential::SequentialPage::append_record_nosync()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="sequential__page__impl_8hpp_source.html#l00184">foedus::storage::sequential::SequentialPage::can_insert_record()</a>, <a class="el" href="xct__id_8hpp_source.html#l00964">foedus::xct::XctId::get_epoch()</a>, <a class="el" href="sequential__page__impl_8hpp_source.html#l00193">foedus::storage::sequential::SequentialPage::get_first_record_epoch()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00378">get_head_pointer()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00155">get_id()</a>, <a class="el" href="thread_8cpp_source.html#l00080">foedus::thread::Thread::get_local_volatile_page_resolver()</a>, <a class="el" href="thread_8hpp_source.html#l00066">foedus::thread::Thread::get_numa_node()</a>, <a class="el" href="sequential__page__impl_8hpp_source.html#l00071">foedus::storage::sequential::SequentialPage::get_record_count()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00392">get_tail_pointer()</a>, <a class="el" href="thread_8cpp_source.html#l00053">foedus::thread::Thread::get_thread_id()</a>, <a class="el" href="thread_8cpp_source.html#l00057">foedus::thread::Thread::get_thread_memory()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00199">foedus::memory::NumaCoreMemory::grab_free_volatile_page()</a>, <a class="el" href="sequential__page__impl_8hpp_source.html#l00134">foedus::storage::sequential::SequentialPage::initialize_volatile_page()</a>, <a class="el" href="sequential__page__impl_8hpp_source.html#l00130">foedus::storage::sequential::SequentialPage::next_page()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00057">foedus::memory::LocalPageResolver::resolve_offset()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00076">foedus::storage::sequential::SequentialStorage::apply_append_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                          {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id = context-&gt;get_thread_id();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> node = context-&gt;get_numa_node();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// the list is local to this core, so no race possible EXCEPT scanning thread</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// and snapshot thread, but they are read-only or only dropping pages.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>* tail_pointer = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">get_tail_pointer</a>(thread_id);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tail_pointer);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  SequentialPage* tail = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (*tail_pointer != 0) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    tail = <span class="keyword">reinterpret_cast&lt;</span>SequentialPage*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      context-&gt;get_local_volatile_page_resolver().resolve_offset(*tail_pointer));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (tail == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      !tail-&gt;can_insert_record(payload_count) ||</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// note: we make sure no volatile page has records from two epochs.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="comment">// this makes us easy to drop volatile pages after snapshotting.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      (tail-&gt;get_record_count() &gt; 0 &amp;&amp; tail-&gt;get_first_record_epoch() != owner_id.get_epoch())) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> new_page_offset</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      = context-&gt;get_thread_memory()-&gt;grab_free_volatile_page();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(new_page_offset == 0)) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot; Unexpected error. we ran out of free page while inserting to sequential&quot;</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="stringliteral">&quot; storage after commit.&quot;</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    VolatilePagePointer new_page_pointer;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    new_page_pointer.set(node, new_page_offset);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    SequentialPage* new_page = <span class="keyword">reinterpret_cast&lt;</span>SequentialPage*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      context-&gt;get_local_volatile_page_resolver().resolve_offset_newpage(new_page_offset));</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    new_page-&gt;initialize_volatile_page(<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">get_id</a>(), new_page_pointer);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (tail == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">// this is the first access to this head pointer. Let&#39;s install the first page.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*tail_pointer == 0);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>* head_pointer = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a>(thread_id);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*head_pointer == 0);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      *head_pointer = new_page_offset;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      *tail_pointer = new_page_offset;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a>(thread_id) != 0);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      *tail_pointer = new_page_offset;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      tail-&gt;next_page().volatile_pointer_ = new_page_pointer;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    tail = new_page;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tail &amp;&amp;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    tail-&gt;can_insert_record(payload_count) &amp;&amp;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    (tail-&gt;get_record_count() == 0 || tail-&gt;get_first_record_epoch() == owner_id.get_epoch()));</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  tail-&gt;append_record_nosync(owner_id, payload_count, payload);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_aa13fb52d28c1ad2fd240bc877b18dc85"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">foedus::storage::sequential::SequentialStoragePimpl::get_head_pointer</a></div><div class="ttdeci">memory::PagePoolOffset * get_head_pointer(thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00378">sequential_storage_pimpl.cpp:378</a></div></div>
<div class="ttc" id="group__THREAD_html_ga709a79fc1ed05a3543d8309ba391da93"><div class="ttname"><a href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a></div><div class="ttdeci">uint16_t ThreadId</div><div class="ttdoc">Typedef for a global ID of Thread (core), which is unique across NUMA nodes. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00080">thread_id.hpp:80</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a637f582ce67ec9d4bfe7d6f1f55829a9"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">foedus::storage::sequential::SequentialStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00155">sequential_storage_pimpl.hpp:155</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ae819655e8bea414d1152509866ddfd39"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">foedus::storage::sequential::SequentialStoragePimpl::get_tail_pointer</a></div><div class="ttdeci">memory::PagePoolOffset * get_tail_pointer(thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00392">sequential_storage_pimpl.cpp:392</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aec915d81c404fca9de77c9eed625afa9" title="Appends a record to this page. " alt="" coords="259,247,437,303"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#adfc56f09f9e4e09466c4f102b9283076" title="Returns how many records in this page placed so far. " alt="" coords="1048,393,1277,434"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac3f12983b3c02d8a6e3cae2867f9d4a2" title="Returns if this page has enough room to insert a record with the given payload length. " alt="" coords="232,89,464,130"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="571,603,694,645"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aebcdc0447e1317476fe28d4303680112" title="Returns the epoch of the fist record in this page (undefined behavior if no record). " alt="" coords="259,539,437,595"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head_pointer" alt="" coords="259,857,437,913"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_id" alt="" coords="259,1135,437,1191"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#ac8953b86c90ec5ee1730b05397a259da" title="Returns page resolver to convert only local page ID to page pointer. " alt="" coords="267,1215,429,1271"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="273,734,423,775"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="557,669,708,710"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_tail_pointer" alt="" coords="259,937,437,993"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1Thread.html#a4e553f5e14ec00d8ba23fbdfa26d687e" title="Returns the private memory repository of this thread. " alt="" coords="273,1295,423,1337"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="243,1361,453,1402"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac05740b312c9c0024d090145d2a4dde0" title="Called only when this page is initialized. " alt="" coords="259,1427,437,1483"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a7ed4fd4e290f1e49a0b187d43b83674e" title="foedus::storage::sequential\l::SequentialPage::next_page" alt="" coords="253,1507,443,1549"/>
<area shape="rect" id="node44" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be" title="Resolves offset in this pool to storage::Page*. " alt="" coords="256,1018,440,1059"/>
<area shape="rect" id="node49" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="541,1288,725,1344"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="267,1573,429,1614"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="553,5,713,32"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a38b891ada2a3ed7381bc0d048570fb18" title="foedus::storage::sequential\l::SequentialPage::assert\l_consistent" alt="" coords="811,291,990,347"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1PageVersionStatus.html#a5d7a0b120ba1d28530f04f347e8a889f" title="foedus::storage::PageVersion\lStatus::increment_version\l_counter" alt="" coords="537,173,729,229"/>
<area shape="rect" id="node9" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="814,115,987,157"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a2f8f9a8460228df5790ad3181be49e3b" title="foedus::storage::sequential\l::SequentialPage::owner\l_id_from_offset" alt="" coords="543,472,722,528"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4" title="foedus::xct::McsRwLock\l::reset" alt="" coords="550,57,715,98"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a5a28eb20d977bb416b92a5f0386a7d80" title="Sets byte length of payload of the specified record in this page. " alt="" coords="512,254,753,295"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a664f776eddf9d3988a62f5043e57d9e3" title="How many data bytes in this page consumed so far. " alt="" coords="1071,291,1254,347"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1PageVersionStatus.html#a938cd4d9d491c3b6a4eb14afdbfd6b19" title="foedus::storage::PageVersion\lStatus::get_version_counter" alt="" coords="805,181,997,222"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1McsRwLock.html#a252a31f1689940909fe3520162b685f7" title="foedus::xct::McsRwLock\l::set_next_writer" alt="" coords="818,50,983,91"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1McsRwLock.html#a0bd9c402804ed75f85852e0f9e429cba" title="foedus::xct::McsRwLock\l::xchg_next_writer" alt="" coords="1080,50,1245,91"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="839,603,962,645"/>
<area shape="rect" id="node20" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="543,734,722,775"/>
<area shape="rect" id="node21" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="565,799,700,841"/>
<area shape="rect" id="node22" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="543,865,722,906"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="535,930,730,971"/>
<area shape="rect" id="node24" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="565,995,700,1037"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="527,1061,738,1117"/>
<area shape="rect" id="node26" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="531,1141,734,1197"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="823,1149,978,1190"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="811,1413,990,1454"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="543,1419,722,1461"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="537,1485,728,1526"/>
<area shape="rect" id="node39" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="801,1547,1000,1589"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="805,1482,997,1523"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="1067,1514,1259,1555"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="1078,1449,1247,1490"/>
<area shape="rect" id="node45" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="555,1222,710,1263"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="826,1214,975,1255"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="820,1279,981,1321"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="805,1345,996,1386"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a65a45c9727f65048b1b55b7b69dfdce1_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb" title="Used to apply the effect of appending to volatile list. " alt="" coords="232,5,411,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a18cd427115cf86d01382cd0c7e4df417" title="foedus::storage::sequential\l::SequentialAppendLogType\l::apply_record" alt="" coords="459,5,641,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::sequential::SequentialStoragePimpl::apply_truncate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a> &amp;&#160;</td>
          <td class="paramname"><em>the_log</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00313">313</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00156">get_name()</a>, <a class="el" href="common__log__types_8hpp_source.html#l00113">foedus::log::BaseLogType::header_</a>, <a class="el" href="sequential__log__types_8hpp_source.html#l00082">foedus::storage::sequential::SequentialTruncateLogType::new_truncate_epoch_</a>, <a class="el" href="epoch_8hpp_source.html#l00102">foedus::Epoch::value()</a>, and <a class="el" href="common__log__types_8hpp_source.html#l00075">foedus::log::LogHeader::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage_8cpp_source.html#l00081">foedus::storage::sequential::SequentialStorage::apply_truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                                                                    {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// this method is called only during restart, so no race.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;exists());</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_ = the_log.header_.xct_id_;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(the_log.new_truncate_epoch_.value());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = the_log.new_truncate_epoch_.value();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Applied redo-log of truncation on sequential storage- &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>()</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; epoch=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad8cfc752735602f2b1afeacf10a94b6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">foedus::storage::sequential::SequentialStoragePimpl::get_name</a></div><div class="ttdeci">const StorageName &amp; get_name() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00156">sequential_storage_pimpl.hpp:156</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_name" alt="" coords="232,5,411,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="250,85,393,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ac9b9bbfc26efa2c3413a43349c8c0fa4" title="foedus::storage::sequential\l::SequentialStorage::apply\l_truncate" alt="" coords="232,5,411,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html#aad6838461c13796ec1011b3b150b19b0" title="foedus::storage::sequential\l::SequentialTruncateLogType\l::apply_storage" alt="" coords="459,5,648,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab9ccf59655effed1a259100c4d46b06b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::sequential::SequentialStoragePimpl::create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata.html">SequentialMetadata</a> &amp;&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00147">147</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00154">exists()</a>, <a class="el" href="engine__pimpl_8cpp_source.html#l00279">foedus::Engine::get_earliest_epoch()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00156">get_name()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00188">initialize_head_tail_pages()</a>, <a class="el" href="error__code_8hpp_source.html#l00168">foedus::kErrorCodeStrAlreadyExists</a>, <a class="el" href="storage__id_8hpp_source.html#l00158">foedus::storage::kExists</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, and <a class="el" href="epoch_8hpp_source.html#l00102">foedus::Epoch::value()</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage_8cpp_source.html#l00061">foedus::storage::sequential::SequentialStorage::create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                                            {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9e7deab12645a7867f1c4e262c3d9b0b">exists</a>()) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;This sequential-storage already exists: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8">kErrorCodeStrAlreadyExists</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_ = metadata;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keyword">const</span> Epoch initial_truncate_epoch = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">get_earliest_epoch</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = initial_truncate_epoch.value();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(initial_truncate_epoch.value());</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.reset();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_epoch(initial_truncate_epoch);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_ordinal(1);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">initialize_head_tail_pages</a>());</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;status_ = <a class="code" href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">kExists</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Newly created a sequential-storage &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_acc045528304f2d22f64b3f1c76b99fa5"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">foedus::storage::sequential::SequentialStoragePimpl::initialize_head_tail_pages</a></div><div class="ttdeci">ErrorStack initialize_head_tail_pages()</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00188">sequential_storage_pimpl.cpp:188</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="group__STORAGE_html_ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1"><div class="ttname"><a href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">foedus::storage::kExists</a></div><div class="ttdoc">The storage has been created and ready for use. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00158">storage_id.hpp:158</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a9e7deab12645a7867f1c4e262c3d9b0b"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9e7deab12645a7867f1c4e262c3d9b0b">foedus::storage::sequential::SequentialStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00154">sequential_storage_pimpl.hpp:154</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8">foedus::kErrorCodeStrAlreadyExists</a></div><div class="ttdoc">0x0802 : "STORAGE: This storage already exists" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00168">error_code.hpp:168</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a32ee0dd2b600a921b7f6b7e99a579550"><div class="ttname"><a href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">foedus::Engine::get_earliest_epoch</a></div><div class="ttdeci">Epoch get_earliest_epoch() const </div><div class="ttdoc">Returns the Earliest-Epoch, the minimum epoch that is valid within this engine. </div><div class="ttdef"><b>Definition:</b> <a href="engine__pimpl_8cpp_source.html#l00279">engine_pimpl.cpp:279</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad8cfc752735602f2b1afeacf10a94b6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">foedus::storage::sequential::SequentialStoragePimpl::get_name</a></div><div class="ttdeci">const StorageName &amp; get_name() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00156">sequential_storage_pimpl.hpp:156</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9e7deab12645a7867f1c4e262c3d9b0b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::exists" alt="" coords="232,16,411,72"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550" title="Returns the Earliest&#45;Epoch, the minimum epoch that is valid within this engine. " alt="" coords="254,97,389,138"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_name" alt="" coords="232,163,411,219"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="232,243,411,299"/>
<area shape="rect" id="node23" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="250,323,393,349"/>
<area shape="rect" id="node4" href="classfoedus_1_1savepoint_1_1SavepointManager.html#ac8c418cf8e39002b4a55cc3b3120807f" title="foedus::savepoint::\lSavepointManager::get\l_earliest_epoch" alt="" coords="487,5,641,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a49af44d8c179c9a28bdcf7b5dda0d6fd" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_earliest_epoch" alt="" coords="726,5,887,61"/>
<area shape="rect" id="node8" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="497,86,631,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="497,151,631,193"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="459,217,669,258"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="469,282,659,323"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="475,347,653,389"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="475,413,653,454"/>
<area shape="rect" id="node22" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="472,479,656,535"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="717,347,896,389"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="944,249,1159,290"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="962,314,1141,355"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="955,379,1148,421"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="962,445,1141,486"/>
<area shape="rect" id="node17" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1218,350,1410,391"/>
<area shape="rect" id="node18" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1207,416,1421,443"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="717,413,896,454"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab9ccf59655effed1a259100c4d46b06b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="232,13,412,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad4ea4254f3eefd06d1c62ca8fdbe217c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::sequential::SequentialStoragePimpl::drop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00086">86</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__id_8hpp_source.html#l00123">foedus::thread::compose_thread_id()</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="page__pool_8hpp_source.html#l00061">foedus::memory::PagePoolOffsetChunk::full()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00407">get_head()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00156">get_name()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00076">foedus::memory::EngineMemory::get_node_memory()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="page__pool_8hpp_source.html#l00068">foedus::memory::PagePoolOffsetChunk::push_back()</a>, <a class="el" href="page__pool_8cpp_source.html#l00134">foedus::memory::PagePool::release()</a>, <a class="el" href="page__pool_8cpp_source.html#l00144">foedus::memory::PagePool::release_one()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00057">foedus::memory::LocalPageResolver::resolve_offset()</a>, <a class="el" href="page__pool_8hpp_source.html#l00059">foedus::memory::PagePoolOffsetChunk::size()</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, <a class="el" href="thread__options_8hpp_source.html#l00050">foedus::thread::ThreadOptions::thread_count_per_group_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage_8cpp_source.html#l00067">foedus::storage::sequential::SequentialStorage::drop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                                        {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Uninitializing an sequential-storage &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// release all pages in this list.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  uint16_t nodes = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  uint16_t threads_per_node = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">for</span> (uint16_t node = 0; node &lt; nodes; ++node) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// we are sure these pages are from only one NUMA node, so we can easily batch-return.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    memory::NumaNodeMemoryRef* memory = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    memory::PagePool* pool = memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">const</span> memory::LocalPageResolver&amp; resolver = pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">get_resolver</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    memory::PagePoolOffsetChunk chunk;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">for</span> (uint16_t local_ordinal = 0; local_ordinal &lt; threads_per_node; ++local_ordinal) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id = <a class="code" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">thread::compose_thread_id</a>(node, local_ordinal);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">for</span> (SequentialPage* page = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">get_head</a>(resolver, thread_id); page;) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;header().page_id_);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        VolatilePagePointer cur_pointer;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        cur_pointer.word = page-&gt;header().page_id_;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page == reinterpret_cast&lt;SequentialPage*&gt;(resolver.resolve_offset(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          cur_pointer.get_offset())));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(node == cur_pointer.get_numa_node());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        VolatilePagePointer next_pointer = page-&gt;next_page().volatile_pointer_;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (chunk.full()) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          pool-&gt;release(chunk.size(), &amp;chunk);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!chunk.full());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        chunk.push_back(cur_pointer.get_offset());</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (!next_pointer.is_null()) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(node == next_pointer.get_numa_node());</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          page = <span class="keyword">reinterpret_cast&lt;</span>SequentialPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            next_pointer.get_offset()));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          page = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (chunk.size() &gt; 0) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      pool-&gt;release(chunk.size(), &amp;chunk);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunk.size() == 0);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// release pointer pages</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">for</span> (uint16_t p = 0; p * 4 &lt; nodes; ++p) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    uint16_t node = p * 4;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    memory::NumaNodeMemoryRef* memory = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    memory::PagePool* pool = memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].is_null()) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].get_numa_node() == node);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      pool-&gt;release_one(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].get_offset());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].is_null()) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].get_numa_node() == node);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      pool-&gt;release_one(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].get_offset());</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="group__THREAD_html_ga3cfa4441e96554e775ec6013c180e192"><div class="ttname"><a href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">foedus::thread::compose_thread_id</a></div><div class="ttdeci">ThreadId compose_thread_id(ThreadGroupId node, ThreadLocalOrdinal local_core)</div><div class="ttdoc">Returns a globally unique ID of Thread (core) for the given node and ordinal in the node...</div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00123">thread_id.hpp:123</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a9754dc5a7c8b8f1f45a77714dfa8a53f"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">foedus::storage::sequential::SequentialStoragePimpl::get_head</a></div><div class="ttdeci">SequentialPage * get_head(const memory::LocalPageResolver &amp;resolver, thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00407">sequential_storage_pimpl.cpp:407</a></div></div>
<div class="ttc" id="group__THREAD_html_ga709a79fc1ed05a3543d8309ba391da93"><div class="ttname"><a href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a></div><div class="ttdeci">uint16_t ThreadId</div><div class="ttdoc">Typedef for a global ID of Thread (core), which is unique across NUMA nodes. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00080">thread_id.hpp:80</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a18916c76eea7aa49572e69e48e75717e"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">foedus::memory::PagePool::get_resolver</a></div><div class="ttdeci">const LocalPageResolver &amp; get_resolver() const </div><div class="ttdoc">Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00146">page_pool.cpp:146</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad8cfc752735602f2b1afeacf10a94b6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">foedus::storage::sequential::SequentialStoragePimpl::get_name</a></div><div class="ttdeci">const StorageName &amp; get_name() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00156">sequential_storage_pimpl.hpp:156</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192" title="Returns a globally unique ID of Thread (core) for the given node and ordinal in the node..." alt="" coords="279,56,444,97"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="517,144,696,185"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head" alt="" coords="272,290,451,346"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="785,5,919,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="785,428,919,469"/>
<area shape="rect" id="node14" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be" title="Resolves offset in this pool to storage::Page*. " alt="" coords="515,457,699,499"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_name" alt="" coords="272,471,451,527"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="256,552,467,593"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="272,617,451,659"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="266,683,457,724"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="272,173,451,215"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="272,748,451,789"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="272,813,451,855"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2" title="foedus::memory::PagePool\lOffsetChunk::size" alt="" coords="272,879,451,920"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head_pointer" alt="" coords="517,290,696,346"/>
<area shape="rect" id="node6" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="763,232,941,273"/>
<area shape="rect" id="node8" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="763,297,941,339"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="755,363,949,404"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="747,71,957,127"/>
<area shape="rect" id="node12" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="751,151,953,207"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1035,261,1190,303"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="775,493,929,535"/>
<area shape="rect" id="node19" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="760,559,944,615"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1038,428,1187,469"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1032,493,1193,535"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1017,559,1208,600"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="517,617,696,659"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="517,748,696,789"/>
<area shape="rect" id="node29" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5" title="foedus::memory::PagePool\lPimpl::release_one" alt="" coords="517,813,696,855"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="763,813,941,855"/>
<area shape="rect" id="node31" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="755,879,949,920"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="763,944,941,985"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b" title="foedus::memory::PagePool\lPimpl::increase_free_pool_count" alt="" coords="747,683,957,724"/>
<area shape="rect" id="node36" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="766,748,938,789"/>
<area shape="rect" id="node32" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1017,849,1209,891"/>
<area shape="rect" id="node33" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1005,915,1220,942"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad4ea4254f3eefd06d1c62ca8fdbe217c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="256,5,435,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9e7deab12645a7867f1c4e262c3d9b0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::sequential::SequentialStoragePimpl::exists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00154">154</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00147">create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;exists(); }</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9e7deab12645a7867f1c4e262c3d9b0b_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9e7deab12645a7867f1c4e262c3d9b0b_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9e7deab12645a7867f1c4e262c3d9b0b_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9e7deab12645a7867f1c4e262c3d9b0b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="232,5,411,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="459,13,639,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab8595b7fa861e2f16b04f6758a7508a5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HANDLER &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::sequential::SequentialStoragePimpl::for_every_page </td>
          <td>(</td>
          <td class="paramtype">HANDLER&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Traverse all pages and call back the handler for every page. </p>
<p>Handler must look like "ErrorCode func(SequentialPage* page) { ... } ". </p>

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00196">196</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__id_8hpp_source.html#l00123">foedus::thread::compose_thread_id()</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00407">get_head()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00076">foedus::memory::EngineMemory::get_node_memory()</a>, <a class="el" href="storage__id_8hpp_source.html#l00202">foedus::storage::VolatilePagePointer::get_offset()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="page__resolver_8hpp_source.html#l00057">foedus::memory::LocalPageResolver::resolve_offset()</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, and <a class="el" href="thread__options_8hpp_source.html#l00050">foedus::thread::ThreadOptions::thread_count_per_group_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage_8cpp_source.html#l00086">foedus::storage::sequential::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                                  {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    uint16_t nodes = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    uint16_t threads_per_node = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">for</span> (uint16_t node = 0; node &lt; nodes; ++node) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keyword">const</span> memory::LocalPageResolver&amp; resolver</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node)-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">get_resolver</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">for</span> (uint16_t local_ordinal = 0; local_ordinal &lt; threads_per_node; ++local_ordinal) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id = <a class="code" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">thread::compose_thread_id</a>(node, local_ordinal);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">for</span> (SequentialPage* page = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">get_head</a>(resolver, thread_id); page;) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;header().page_id_);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(handler(page));</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          VolatilePagePointer next_pointer = page-&gt;next_page().volatile_pointer_;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = next_pointer.get_offset();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          <span class="keywordflow">if</span> (offset != 0) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            page = <span class="keyword">reinterpret_cast&lt;</span>SequentialPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(offset));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            page = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="group__THREAD_html_ga3cfa4441e96554e775ec6013c180e192"><div class="ttname"><a href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">foedus::thread::compose_thread_id</a></div><div class="ttdeci">ThreadId compose_thread_id(ThreadGroupId node, ThreadLocalOrdinal local_core)</div><div class="ttdoc">Returns a globally unique ID of Thread (core) for the given node and ordinal in the node...</div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00123">thread_id.hpp:123</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a9754dc5a7c8b8f1f45a77714dfa8a53f"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">foedus::storage::sequential::SequentialStoragePimpl::get_head</a></div><div class="ttdeci">SequentialPage * get_head(const memory::LocalPageResolver &amp;resolver, thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00407">sequential_storage_pimpl.cpp:407</a></div></div>
<div class="ttc" id="group__THREAD_html_ga709a79fc1ed05a3543d8309ba391da93"><div class="ttname"><a href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a></div><div class="ttdeci">uint16_t ThreadId</div><div class="ttdoc">Typedef for a global ID of Thread (core), which is unique across NUMA nodes. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00080">thread_id.hpp:80</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a18916c76eea7aa49572e69e48e75717e"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">foedus::memory::PagePool::get_resolver</a></div><div class="ttdeci">const LocalPageResolver &amp; get_resolver() const </div><div class="ttdoc">Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00146">page_pool.cpp:146</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192" title="Returns a globally unique ID of Thread (core) for the given node and ordinal in the node..." alt="" coords="255,92,420,133"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head" alt="" coords="248,453,427,509"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="761,5,895,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="761,71,895,112"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be" title="Resolves offset in this pool to storage::Page*. " alt="" coords="491,504,675,545"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="996,627,1157,668"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="232,645,443,687"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="248,711,427,752"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="242,776,433,817"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head_pointer" alt="" coords="493,259,672,315"/>
<area shape="rect" id="node5" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="739,136,917,177"/>
<area shape="rect" id="node7" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="739,201,917,243"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="731,267,925,308"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="723,333,933,389"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="727,413,929,469"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="999,423,1154,464"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="751,493,905,535"/>
<area shape="rect" id="node18" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="736,559,920,615"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1002,492,1151,533"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="981,557,1172,599"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="493,711,672,752"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ab8595b7fa861e2f16b04f6758a7508a5_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1sequential.html#aab3041ddf08dbde93ee896a1efff26d1" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="232,13,411,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9754dc5a7c8b8f1f45a77714dfa8a53f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a> * foedus::storage::sequential::SequentialStoragePimpl::get_head </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>thread_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00407">407</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00378">get_head_pointer()</a>, and <a class="el" href="page__resolver_8hpp_source.html#l00057">foedus::memory::LocalPageResolver::resolve_offset()</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00086">drop()</a>, and <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00196">for_every_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                  {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = *<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a>(thread_id);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span> (offset == 0) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>SequentialPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(offset));</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_aa13fb52d28c1ad2fd240bc877b18dc85"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">foedus::storage::sequential::SequentialStoragePimpl::get_head_pointer</a></div><div class="ttdeci">memory::PagePoolOffset * get_head_pointer(thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00378">sequential_storage_pimpl.cpp:378</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head_pointer" alt="" coords="235,227,413,283"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be" title="Resolves offset in this pool to storage::Page*. " alt="" coords="232,493,416,535"/>
<area shape="rect" id="node3" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="480,5,659,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="502,71,637,112"/>
<area shape="rect" id="node5" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="480,136,659,177"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="472,201,667,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="502,267,637,308"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="464,333,675,389"/>
<area shape="rect" id="node9" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="468,413,671,469"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="741,420,895,461"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="492,493,647,535"/>
<area shape="rect" id="node16" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="477,559,661,615"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="743,485,893,527"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="737,551,899,592"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="723,616,913,657"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a9754dc5a7c8b8f1f45a77714dfa8a53f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="232,5,435,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab8595b7fa861e2f16b04f6758a7508a5" title="Traverse all pages and call back the handler for every page. " alt="" coords="244,71,423,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="483,5,661,47"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1sequential.html#aab3041ddf08dbde93ee896a1efff26d1" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="483,79,661,120"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa13fb52d28c1ad2fd240bc877b18dc85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> * foedus::storage::sequential::SequentialStoragePimpl::get_head_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>thread_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00378">378</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="thread__id_8hpp_source.html#l00139">foedus::thread::decompose_numa_local_ordinal()</a>, <a class="el" href="thread__id_8hpp_source.html#l00131">foedus::thread::decompose_numa_node()</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="sequential__id_8hpp_source.html#l00108">foedus::storage::sequential::get_pointer_page_and_index()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00142">foedus::storage::sequential::SequentialStoragePimpl::PointerPage::pointers_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00134">foedus::memory::GlobalVolatilePageResolver::resolve_offset_newpage()</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, and <a class="el" href="thread__options_8hpp_source.html#l00050">foedus::thread::ThreadOptions::thread_count_per_group_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00323">append_record()</a>, and <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00407">get_head()</a>.</p>
<div class="fragment"><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                                                                             {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">thread::decompose_numa_node</a>(thread_id) &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">thread::decompose_numa_local_ordinal</a>(thread_id)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  uint16_t page;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  uint16_t index;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">get_pointer_page_and_index</a>(thread_id, &amp;page, &amp;index);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  PointerPage* head_page</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    = <span class="keyword">reinterpret_cast&lt;</span>PointerPage*<span class="keyword">&gt;</span>(resolver.resolve_offset_newpage(</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[page]));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> head_page-&gt;pointers_ + index;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="group__THREAD_html_ga93083d6b052db01851cb61c120522c1d"><div class="ttname"><a href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">foedus::thread::decompose_numa_local_ordinal</a></div><div class="ttdeci">ThreadLocalOrdinal decompose_numa_local_ordinal(ThreadId global_id)</div><div class="ttdoc">Extracts local ordinal from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00139">thread_id.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1sequential_html_af598f2edf5a573df9e636aa314250d94"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">foedus::storage::sequential::get_pointer_page_and_index</a></div><div class="ttdeci">void get_pointer_page_and_index(uint16_t thread_id, uint16_t *page, uint16_t *index)</div><div class="ttdoc">Calculate the page/index of the thread-private head/tail pointer. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__id_8hpp_source.html#l00108">sequential_id.hpp:108</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="group__THREAD_html_ga1622c6d8c64ca80f51c1bef5190ec4fa"><div class="ttname"><a href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">foedus::thread::decompose_numa_node</a></div><div class="ttdeci">ThreadGroupId decompose_numa_node(ThreadId global_id)</div><div class="ttdoc">Extracts NUMA node ID from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00131">thread_id.hpp:131</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="248,5,427,47"/>
<area shape="rect" id="node3" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="248,71,427,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="232,137,443,193"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="270,217,405,259"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="270,283,405,324"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="240,348,435,389"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="236,414,439,470"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="491,421,645,463"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aa13fb52d28c1ad2fd240bc877b18dc85_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1" title="Appends an already&#45;commited record to this volatile list. " alt="" coords="232,5,411,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head" alt="" coords="232,85,411,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb" title="Used to apply the effect of appending to volatile list. " alt="" coords="471,5,649,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a18cd427115cf86d01382cd0c7e4df417" title="foedus::storage::sequential\l::SequentialAppendLogType\l::apply_record" alt="" coords="709,5,892,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="459,89,661,130"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab8595b7fa861e2f16b04f6758a7508a5" title="Traverse all pages and call back the handler for every page. " alt="" coords="471,155,649,211"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="711,89,890,130"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1sequential.html#aab3041ddf08dbde93ee896a1efff26d1" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="711,162,890,203"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a637f582ce67ec9d4bfe7d6f1f55829a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> foedus::storage::sequential::SequentialStoragePimpl::get_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00155">155</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00323">append_record()</a>, and <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00236">truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.id_; }</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a637f582ce67ec9d4bfe7d6f1f55829a9_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a637f582ce67ec9d4bfe7d6f1f55829a9_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a637f582ce67ec9d4bfe7d6f1f55829a9_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a637f582ce67ec9d4bfe7d6f1f55829a9_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1" title="Appends an already&#45;commited record to this volatile list. " alt="" coords="232,5,411,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::truncate" alt="" coords="232,85,411,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb" title="Used to apply the effect of appending to volatile list. " alt="" coords="465,5,643,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a18cd427115cf86d01382cd0c7e4df417" title="foedus::storage::sequential\l::SequentialAppendLogType\l::apply_record" alt="" coords="697,5,880,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a4d7e58057f2fb648b7ff9ee6ab7fa0" title="Discards all records in this storage before the given epoch. " alt="" coords="459,93,649,134"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad8cfc752735602f2b1afeacf10a94b6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacefoedus_1_1storage.html#a0c15c034d49af969335271617a73a846">StorageName</a>&amp; foedus::storage::sequential::SequentialStoragePimpl::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00156">156</a> of file <a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00313">apply_truncate()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00147">create()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00086">drop()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00166">load()</a>, and <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00236">truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.name_; }</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad8cfc752735602f2b1afeacf10a94b6d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad8cfc752735602f2b1afeacf10a94b6d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad8cfc752735602f2b1afeacf10a94b6d_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ad8cfc752735602f2b1afeacf10a94b6d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::apply_truncate" alt="" coords="244,5,423,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="244,85,423,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="232,166,435,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="233,231,434,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::truncate" alt="" coords="244,297,423,353"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ac9b9bbfc26efa2c3413a43349c8c0fa4" title="foedus::storage::sequential\l::SequentialStorage::apply\l_truncate" alt="" coords="489,5,667,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html#aad6838461c13796ec1011b3b150b19b0" title="foedus::storage::sequential\l::SequentialTruncateLogType\l::apply_storage" alt="" coords="721,5,911,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="488,93,668,134"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="489,166,667,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="489,231,667,273"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a4d7e58057f2fb648b7ff9ee6ab7fa0" title="Discards all records in this storage before the given epoch. " alt="" coords="483,305,673,346"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeed5645880f0c4dfe3bca57ad9846ea4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a> * foedus::storage::sequential::SequentialStoragePimpl::get_tail </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>thread_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00417">417</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00392">get_tail_pointer()</a>, and <a class="el" href="page__resolver_8hpp_source.html#l00057">foedus::memory::LocalPageResolver::resolve_offset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                  {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = *<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">get_tail_pointer</a>(thread_id);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (offset == 0) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>SequentialPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(offset));</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ae819655e8bea414d1152509866ddfd39"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">foedus::storage::sequential::SequentialStoragePimpl::get_tail_pointer</a></div><div class="ttdeci">memory::PagePoolOffset * get_tail_pointer(thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00392">sequential_storage_pimpl.cpp:392</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aeed5645880f0c4dfe3bca57ad9846ea4_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aeed5645880f0c4dfe3bca57ad9846ea4_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aeed5645880f0c4dfe3bca57ad9846ea4_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aeed5645880f0c4dfe3bca57ad9846ea4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_tail_pointer" alt="" coords="235,227,413,283"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be" title="Resolves offset in this pool to storage::Page*. " alt="" coords="232,493,416,535"/>
<area shape="rect" id="node3" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="480,5,659,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="502,71,637,112"/>
<area shape="rect" id="node5" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="480,136,659,177"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="472,201,667,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="502,267,637,308"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="464,333,675,389"/>
<area shape="rect" id="node9" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="468,413,671,469"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="741,420,895,461"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="492,493,647,535"/>
<area shape="rect" id="node16" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="477,559,661,615"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="743,485,893,527"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="737,551,899,592"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="723,616,913,657"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae819655e8bea414d1152509866ddfd39"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> * foedus::storage::sequential::SequentialStoragePimpl::get_tail_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>thread_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00392">392</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="thread__id_8hpp_source.html#l00139">foedus::thread::decompose_numa_local_ordinal()</a>, <a class="el" href="thread__id_8hpp_source.html#l00131">foedus::thread::decompose_numa_node()</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="sequential__id_8hpp_source.html#l00108">foedus::storage::sequential::get_pointer_page_and_index()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00142">foedus::storage::sequential::SequentialStoragePimpl::PointerPage::pointers_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00134">foedus::memory::GlobalVolatilePageResolver::resolve_offset_newpage()</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, and <a class="el" href="thread__options_8hpp_source.html#l00050">foedus::thread::ThreadOptions::thread_count_per_group_</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00323">append_record()</a>, and <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00417">get_tail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                                                                             {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">thread::decompose_numa_node</a>(thread_id) &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">thread::decompose_numa_local_ordinal</a>(thread_id)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  uint16_t page;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  uint16_t index;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">get_pointer_page_and_index</a>(thread_id, &amp;page, &amp;index);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  PointerPage* tail_page</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    = <span class="keyword">reinterpret_cast&lt;</span>PointerPage*<span class="keyword">&gt;</span>(resolver.resolve_offset_newpage(</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[page]));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> tail_page-&gt;pointers_ + index;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="group__THREAD_html_ga93083d6b052db01851cb61c120522c1d"><div class="ttname"><a href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">foedus::thread::decompose_numa_local_ordinal</a></div><div class="ttdeci">ThreadLocalOrdinal decompose_numa_local_ordinal(ThreadId global_id)</div><div class="ttdoc">Extracts local ordinal from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00139">thread_id.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1sequential_html_af598f2edf5a573df9e636aa314250d94"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">foedus::storage::sequential::get_pointer_page_and_index</a></div><div class="ttdeci">void get_pointer_page_and_index(uint16_t thread_id, uint16_t *page, uint16_t *index)</div><div class="ttdoc">Calculate the page/index of the thread-private head/tail pointer. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__id_8hpp_source.html#l00108">sequential_id.hpp:108</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="group__THREAD_html_ga1622c6d8c64ca80f51c1bef5190ec4fa"><div class="ttname"><a href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">foedus::thread::decompose_numa_node</a></div><div class="ttdeci">ThreadGroupId decompose_numa_node(ThreadId global_id)</div><div class="ttdoc">Extracts NUMA node ID from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00131">thread_id.hpp:131</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="248,5,427,47"/>
<area shape="rect" id="node3" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="248,71,427,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="232,137,443,193"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="270,217,405,259"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="270,283,405,324"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94" title="Calculate the page/index of the thread&#45;private head/tail pointer. " alt="" coords="240,348,435,389"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="236,414,439,470"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="491,421,645,463"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_ae819655e8bea414d1152509866ddfd39_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1" title="Appends an already&#45;commited record to this volatile list. " alt="" coords="232,5,411,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aeed5645880f0c4dfe3bca57ad9846ea4" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_tail" alt="" coords="232,85,411,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb" title="Used to apply the effect of appending to volatile list. " alt="" coords="459,5,637,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a18cd427115cf86d01382cd0c7e4df417" title="foedus::storage::sequential\l::SequentialAppendLogType\l::apply_record" alt="" coords="685,5,868,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acc045528304f2d22f64b3f1c76b99fa5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::sequential::SequentialStoragePimpl::initialize_head_tail_pages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00188">188</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00076">foedus::memory::EngineMemory::get_node_memory()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="page__pool_8cpp_source.html#l00132">foedus::memory::PagePool::grab_one()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, and <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00147">create()</a>, and <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00166">load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                                              {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// we pre-allocate pointer pages for all required nodes.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// 2^10 pointers (threads) per page : 4 nodes per page</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  uint32_t nodes = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">for</span> (uint16_t p = 0; p * 4 &lt; nodes; ++p) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    uint16_t node = p * 4;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    memory::NumaNodeMemoryRef* memory = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    memory::PagePool* pool = memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> head_offset, tail_offset;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// minor todo: gracefully fail in case of out of memory</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(pool-&gt;grab_one(&amp;head_offset));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(pool-&gt;grab_one(&amp;tail_offset));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].set(node, head_offset);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].set(node, tail_offset);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span>* head_page =  pool-&gt;get_resolver().resolve_offset_newpage(head_offset);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">void</span>* tail_page =  pool-&gt;get_resolver().resolve_offset_newpage(tail_offset);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    std::memset(head_page, 0, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    std::memset(tail_page, 0, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="270,5,405,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="232,71,443,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="270,136,405,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="248,201,427,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="242,267,433,308"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="248,332,427,373"/>
<area shape="rect" id="node16" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="245,398,429,454"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="491,201,669,243"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="491,332,669,373"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="717,233,932,275"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="735,299,914,340"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="728,364,921,405"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="735,429,914,471"/>
<area shape="rect" id="node13" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="991,335,1183,376"/>
<area shape="rect" id="node14" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="980,401,1195,427"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_acc045528304f2d22f64b3f1c76b99fa5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="243,5,422,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="232,86,433,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="481,13,661,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="482,86,661,127"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaf7d413df08f874c5d7caf175260c02f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::sequential::SequentialStoragePimpl::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>snapshot_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00166">166</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="engine__pimpl_8cpp_source.html#l00279">foedus::Engine::get_earliest_epoch()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00156">get_name()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00188">initialize_head_tail_pages()</a>, <a class="el" href="epoch_8hpp_source.html#l00096">foedus::Epoch::is_valid()</a>, <a class="el" href="storage__id_8hpp_source.html#l00158">foedus::storage::kExists</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="storage_8hpp_source.html#l00084">foedus::storage::StorageControlBlock::meta_</a>, and <a class="el" href="epoch_8hpp_source.html#l00102">foedus::Epoch::value()</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage_8cpp_source.html#l00064">foedus::storage::sequential::SequentialStorage::load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// for sequential storage, whether the snapshot root pointer is null or not doesn&#39;t matter.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// essentially load==create, except that it just sets the snapshot root pointer.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_ = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>SequentialMetadata&amp;<span class="keyword">&gt;</span>(snapshot_block.meta_);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  Epoch initial_truncate_epoch(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span> (!initial_truncate_epoch.is_valid()) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    initial_truncate_epoch = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">get_earliest_epoch</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(initial_truncate_epoch.is_valid());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = initial_truncate_epoch.value();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(initial_truncate_epoch.value());</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.reset();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_epoch(initial_truncate_epoch);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_ordinal(1);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">initialize_head_tail_pages</a>());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;root_page_pointer_.snapshot_pointer_</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    = <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.root_snapshot_page_id_;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;status_ = <a class="code" href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">kExists</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Loaded a sequential-storage &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_acc045528304f2d22f64b3f1c76b99fa5"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">foedus::storage::sequential::SequentialStoragePimpl::initialize_head_tail_pages</a></div><div class="ttdeci">ErrorStack initialize_head_tail_pages()</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00188">sequential_storage_pimpl.cpp:188</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="group__STORAGE_html_ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1"><div class="ttname"><a href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">foedus::storage::kExists</a></div><div class="ttdoc">The storage has been created and ready for use. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00158">storage_id.hpp:158</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a32ee0dd2b600a921b7f6b7e99a579550"><div class="ttname"><a href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">foedus::Engine::get_earliest_epoch</a></div><div class="ttdeci">Epoch get_earliest_epoch() const </div><div class="ttdoc">Returns the Earliest-Epoch, the minimum epoch that is valid within this engine. </div><div class="ttdef"><b>Definition:</b> <a href="engine__pimpl_8cpp_source.html#l00279">engine_pimpl.cpp:279</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad8cfc752735602f2b1afeacf10a94b6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">foedus::storage::sequential::SequentialStoragePimpl::get_name</a></div><div class="ttdeci">const StorageName &amp; get_name() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00156">sequential_storage_pimpl.hpp:156</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550" title="Returns the Earliest&#45;Epoch, the minimum epoch that is valid within this engine. " alt="" coords="277,70,411,111"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_name" alt="" coords="255,161,433,217"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="255,241,433,297"/>
<area shape="rect" id="node22" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="267,321,421,348"/>
<area shape="rect" id="node23" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="273,372,415,399"/>
<area shape="rect" id="node3" href="classfoedus_1_1savepoint_1_1SavepointManager.html#ac8c418cf8e39002b4a55cc3b3120807f" title="foedus::savepoint::\lSavepointManager::get\l_earliest_epoch" alt="" coords="509,5,664,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a49af44d8c179c9a28bdcf7b5dda0d6fd" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_earliest_epoch" alt="" coords="749,5,910,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="519,86,654,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="481,151,692,193"/>
<area shape="rect" id="node9" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="519,217,654,258"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="497,282,676,323"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="491,347,682,389"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="497,413,676,454"/>
<area shape="rect" id="node21" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="495,479,679,535"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="740,282,919,323"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="740,413,919,454"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="967,314,1181,355"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="985,379,1163,421"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="977,445,1171,486"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="985,510,1163,551"/>
<area shape="rect" id="node18" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1241,415,1433,457"/>
<area shape="rect" id="node19" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1229,481,1444,508"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_aaf7d413df08f874c5d7caf175260c02f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="255,5,433,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8917edb5d2712fba660a33c6cf2fb19f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::sequential::SequentialStoragePimpl::truncate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td>
          <td class="paramname"><em>new_truncate_epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> *&#160;</td>
          <td class="paramname"><em>commit_epoch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00236">236</a> of file <a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="meta__log__buffer_8cpp_source.html#l00033">foedus::log::MetaLogBuffer::commit()</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="engine__pimpl_8cpp_source.html#l00282">foedus::Engine::get_current_global_epoch()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00155">get_id()</a>, <a class="el" href="engine_8cpp_source.html#l00049">foedus::Engine::get_log_manager()</a>, <a class="el" href="log__manager_8cpp_source.html#l00061">foedus::log::LogManager::get_meta_buffer()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00156">get_name()</a>, <a class="el" href="common__log__types_8hpp_source.html#l00113">foedus::log::BaseLogType::header_</a>, <a class="el" href="epoch_8hpp_source.html#l00096">foedus::Epoch::is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00106">foedus::kErrorCodeInvalidParameter</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="common__log__types_8hpp_source.html#l00061">foedus::log::LogHeader::log_length_</a>, <a class="el" href="common__log__types_8hpp_source.html#l00055">foedus::log::LogHeader::log_type_code_</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00069">foedus::assorted::memory_fence_acq_rel()</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00058">foedus::assorted::memory_fence_release()</a>, <a class="el" href="sequential__log__types_8hpp_source.html#l00082">foedus::storage::sequential::SequentialTruncateLogType::new_truncate_epoch_</a>, <a class="el" href="xct__id_8hpp_source.html#l00958">foedus::xct::XctId::set()</a>, <a class="el" href="common__log__types_8hpp_source.html#l00066">foedus::log::LogHeader::storage_id_</a>, and <a class="el" href="epoch_8hpp_source.html#l00102">foedus::Epoch::value()</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage_8cpp_source.html#l00078">foedus::storage::sequential::SequentialStorage::truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Truncating &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>() &lt;&lt; <span class="stringliteral">&quot; upto Epoch &quot;</span> &lt;&lt; new_truncate_epoch</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;. old value=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (!new_truncate_epoch.is_valid()) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;truncate() was called with an invalid epoch&quot;</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">kErrorCodeInvalidParameter</a>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_truncate_epoch &lt; engine_-&gt;get_earliest_epoch()) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;too-old epoch for this system. &quot;</span> &lt;&lt; new_truncate_epoch;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">kErrorCodeInvalidParameter</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// will check this again after locking.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (Epoch(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_) &gt;= new_truncate_epoch) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Already truncated up to &quot;</span> &lt;&lt; Epoch(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;. Requested = &quot;</span> &lt;&lt; new_truncate_epoch;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (new_truncate_epoch &gt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1">get_current_global_epoch</a>()) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Ohh? we don&#39;t prohibit it, but are you sure? Truncating up to a future&quot;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; epoch-&quot;</span> &lt;&lt; new_truncate_epoch &lt;&lt; <span class="stringliteral">&quot;. cur_global=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1">get_current_global_epoch</a>();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// We lock it first so that there are no concurrent truncate.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// TODO(Hideaki) Ownerless-lock here</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// xct::McsOwnerlessLockScope scope(&amp;control_block_-&gt;cur_truncate_epoch_tid_);</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (Epoch(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_) &gt;= new_truncate_epoch) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Already truncated up to &quot;</span> &lt;&lt; Epoch(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;. Requested = &quot;</span> &lt;&lt; new_truncate_epoch;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// First, let scanner know that something is happening.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// 1. Scanners that didn&#39;t observe this and commit before us: fine.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// 2. Scanners that didn&#39;t observe this and commit after us:</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">//      will see this flag and abort in precommit, fine.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// 3. Scanners that observe this:</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">//      spin until we are done, fine (see optimistic_read_truncate_epoch()).</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// NOTE: Below, we must NOT have any error-return path. Otherwise being_written state is left.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_being_written();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">assorted::memory_fence_acq_rel</a>();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Log this operation as a metadata operation. We get a commit_epoch here.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordtype">char</span> log_buffer[<span class="keyword">sizeof</span>(SequentialTruncateLogType)];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      std::memset(log_buffer, 0, <span class="keyword">sizeof</span>(log_buffer));</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      SequentialTruncateLogType* the_log = <span class="keyword">reinterpret_cast&lt;</span>SequentialTruncateLogType*<span class="keyword">&gt;</span>(log_buffer);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      the_log-&gt;header_.storage_id_ = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">get_id</a>();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      the_log-&gt;header_.log_type_code_ = log::get_log_code&lt;SequentialTruncateLogType&gt;();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      the_log-&gt;header_.log_length_ = <span class="keyword">sizeof</span>(SequentialTruncateLogType);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      the_log-&gt;new_truncate_epoch_ = new_truncate_epoch;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc">get_log_manager</a>()-&gt;<a class="code" href="classfoedus_1_1log_1_1LogManager.html#a52b21aa441034df16ef60232abde9760">get_meta_buffer</a>()-&gt;<a class="code" href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3">commit</a>(the_log, commit_epoch);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// Then, apply it. This also clears the being_written flag</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      xct::XctId xct_id;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      xct_id.set(commit_epoch-&gt;value(), 1);  <span class="comment">// no dependency, so minimal ordinal is always correct</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(new_truncate_epoch.value());  <span class="comment">// atomic!</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_ = xct_id;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="comment">// Also set to the metadata to make this permanent.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="comment">// The metadata will be written out in next snapshot.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="comment">// Until that, REDO-operation below will re-apply that after crash.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = new_truncate_epoch.value();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Truncated&quot;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1log_1_1LogManager_html_a52b21aa441034df16ef60232abde9760"><div class="ttname"><a href="classfoedus_1_1log_1_1LogManager.html#a52b21aa441034df16ef60232abde9760">foedus::log::LogManager::get_meta_buffer</a></div><div class="ttdeci">MetaLogBuffer * get_meta_buffer()</div><div class="ttdef"><b>Definition:</b> <a href="log__manager_8cpp_source.html#l00061">log_manager.cpp:61</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">foedus::kErrorCodeInvalidParameter</a></div><div class="ttdoc">0x0002 : "GENERAL: Invalid parameter given" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00106">error_code.hpp:106</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_aa27f031bd1e256d38e616ec9a499eefc"><div class="ttname"><a href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc">foedus::Engine::get_log_manager</a></div><div class="ttdeci">log::LogManager * get_log_manager() const </div><div class="ttdoc">See Log Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00049">engine.cpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a8d468737935eab05b3f9757cb6757fe1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1">foedus::Engine::get_current_global_epoch</a></div><div class="ttdeci">Epoch get_current_global_epoch() const </div><div class="ttdoc">Returns the current global epoch, the epoch a newly started transaction will be in. </div><div class="ttdef"><b>Definition:</b> <a href="engine__pimpl_8cpp_source.html#l00282">engine_pimpl.cpp:282</a></div></div>
<div class="ttc" id="classfoedus_1_1log_1_1MetaLogBuffer_html_ab94212c9c14361971679c5581c99e7c3"><div class="ttname"><a href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3">foedus::log::MetaLogBuffer::commit</a></div><div class="ttdeci">void commit(BaseLogType *metalog, Epoch *commit_epoch)</div><div class="ttdoc">Synchronously writes out the given log to metadata log file. </div><div class="ttdef"><b>Definition:</b> <a href="meta__log__buffer_8cpp_source.html#l00033">meta_log_buffer.cpp:33</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a637f582ce67ec9d4bfe7d6f1f55829a9"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">foedus::storage::sequential::SequentialStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00155">sequential_storage_pimpl.hpp:155</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gafc1110de4c6bb85c7e1f7feccc27f6d7"><div class="ttname"><a href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">foedus::assorted::memory_fence_release</a></div><div class="ttdeci">void memory_fence_release()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_release). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00058">atomic_fences.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad8cfc752735602f2b1afeacf10a94b6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">foedus::storage::sequential::SequentialStoragePimpl::get_name</a></div><div class="ttdeci">const StorageName &amp; get_name() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00156">sequential_storage_pimpl.hpp:156</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaff9fa4aedd631410da28740f6e1dddbf"><div class="ttname"><a href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">foedus::assorted::memory_fence_acq_rel</a></div><div class="ttdeci">void memory_fence_acq_rel()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00069">atomic_fences.hpp:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3" title="Synchronously writes out the given log to metadata log file. " alt="" coords="233,201,409,243"/>
<area shape="rect" id="node9" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="1243,398,1386,425"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1469,163,1642,204"/>
<area shape="rect" id="node24" href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1" title="Returns the current global epoch, the epoch a newly started transaction will be in. " alt="" coords="245,71,397,112"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_id" alt="" coords="232,499,411,555"/>
<area shape="rect" id="node26" href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc" title="See Log Manager. " alt="" coords="254,580,389,621"/>
<area shape="rect" id="node27" href="classfoedus_1_1log_1_1LogManager.html#a52b21aa441034df16ef60232abde9760" title="foedus::log::LogManager\l::get_meta_buffer" alt="" coords="239,645,403,687"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_name" alt="" coords="232,711,411,767"/>
<area shape="rect" id="node29" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="244,791,399,818"/>
<area shape="rect" id="node30" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="235,843,408,884"/>
<area shape="rect" id="node31" href="structfoedus_1_1xct_1_1XctId.html#ad18a2d4a528fa063786b6efaf1035377" title="foedus::xct::XctId::set" alt="" coords="247,909,395,935"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="459,267,665,308"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a" title="Returns the current global epoch, the epoch a newly started transaction will be in. " alt="" coords="473,5,651,47"/>
<area shape="rect" id="node17" href="structfoedus_1_1log_1_1LogHeader.html#ab54b6d5754b5543e7de5b49c6c317499" title="Convenience method to get LogCodeKind. " alt="" coords="485,332,639,373"/>
<area shape="rect" id="node20" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95" title="See Transaction Manager. " alt="" coords="495,71,629,112"/>
<area shape="rect" id="node21" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="475,136,649,177"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc" title="foedus::xct::XctId\l::set_epoch" alt="" coords="501,201,623,243"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="713,201,920,243"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a787bb892079cb32d5a2065188825a522" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch" alt="" coords="971,25,1166,67"/>
<area shape="rect" id="node6" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3" title="foedus::Epoch::one_more" alt="" coords="983,281,1154,307"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a03678427b184e7ce71f9bbb164dd0bad" title="foedus::xct::XctManagerPimpl\l::set_requested_global_epoch" alt="" coords="971,332,1166,373"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#afce787897428bd372c67224acd3e8ea7" title="foedus::xct::XctManagerPimpl\l::wakeup_epoch_chime_thread" alt="" coords="968,97,1169,139"/>
<area shape="rect" id="node14" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1226,163,1403,204"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SharedPolling.html#a9fc7bfaf57e1f2224be9869a8e9708d3" title="Unconditionally wait for signal. " alt="" coords="980,215,1157,256"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a6071efec3ffc3876192101db2a1873b4" title="foedus::xct::XctManagerPimpl\l::get_requested_global_epoch" alt="" coords="1217,332,1412,373"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="1226,97,1403,139"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1460,105,1651,131"/>
<area shape="rect" id="node18" href="group__LOGTYPE.html#gaa283974b1bc0fdbf11e034f8a11c4b9c" title="Returns the kind of the given log code. " alt="" coords="749,267,884,308"/>
<area shape="rect" id="node19" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="739,332,894,373"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1XctId.html#afd81e3e00ee902aa673a9d3fe62be17b" title="foedus::xct::XctId\l::set_epoch_int" alt="" coords="755,136,878,177"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_a8917edb5d2712fba660a33c6cf2fb19f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a4d7e58057f2fb648b7ff9ee6ab7fa0" title="Discards all records in this storage before the given epoch. " alt="" coords="232,13,423,54"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/sequential/<a class="el" href="sequential__storage__pimpl_8hpp_source.html">sequential_storage_pimpl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/sequential/<a class="el" href="sequential__storage__pimpl_8cpp_source.html">sequential_storage_pimpl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1sequential.html">sequential</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html">SequentialStoragePimpl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
