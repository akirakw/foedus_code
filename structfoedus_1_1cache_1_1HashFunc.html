<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::cache::HashFunc Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structfoedus_1_1cache_1_1HashFunc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="structfoedus_1_1cache_1_1HashFunc-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::cache::HashFunc Struct Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__CACHE.html">Snapshot Cache Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A simple hash function logic used in snasphot cache.  
 <a href="structfoedus_1_1cache_1_1HashFunc.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple hash function logic used in snasphot cache. </p>
<p>The hash key is SnapshotPagePointer, whose least significant bits are local page IDs, which are sequnetial. To avoid placing adjacent page IDs in adjacent hash buckets, we use byte-swap and a few bit shifts, then divide by logical table size which is adjusted to an almost-prime number. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00090">90</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for foedus::cache::HashFunc:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1cache_1_1HashFunc__coll__graph.png" border="0" usemap="#foedus_1_1cache_1_1HashFunc_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1cache_1_1HashFunc_coll__map" id="foedus_1_1cache_1_1HashFunc_coll__map">
<area shape="rect" id="node2" href="structfoedus_1_1assorted_1_1ConstDiv.html" title="The pre&#45;calculated p&#45;m pair for optimized integer division by constant. " alt="" coords="5,5,183,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af3556a191cd1a3f96817d868d58f3db7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#af3556a191cd1a3f96817d868d58f3db7">HashFunc</a> (<a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a> physical_buckets)</td></tr>
<tr class="separator:af3556a191cd1a3f96817d868d58f3db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19737fa3c91676f9c85536f5928b7501"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501">get_bucket_number</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a19737fa3c91676f9c85536f5928b7501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a bucket number the given snapshot page ID <em>should</em> belong to.  <a href="#a19737fa3c91676f9c85536f5928b7501">More...</a><br /></td></tr>
<tr class="separator:a19737fa3c91676f9c85536f5928b7501"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa9020cb1e5915b6777d089521ef618a9"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9">get_hash</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id) __attribute__((always_inline))</td></tr>
<tr class="memdesc:aa9020cb1e5915b6777d089521ef618a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a hash value for the given snapshot page ID.  <a href="#aa9020cb1e5915b6777d089521ef618a9">More...</a><br /></td></tr>
<tr class="separator:aa9020cb1e5915b6777d089521ef618a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9470855bb66d98df48f82fc5ba6655c6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">PageIdTag</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6">get_tag</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a9470855bb66d98df48f82fc5ba6655c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns another hash value used to differentiate IDs with similar hash values.  <a href="#a9470855bb66d98df48f82fc5ba6655c6">More...</a><br /></td></tr>
<tr class="separator:a9470855bb66d98df48f82fc5ba6655c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1b749296267e5825518d43799c987d5f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">logical_buckets_</a></td></tr>
<tr class="memdesc:a1b749296267e5825518d43799c987d5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of logical (actually used) buckets in this table.  <a href="#a1b749296267e5825518d43799c987d5f">More...</a><br /></td></tr>
<tr class="separator:a1b749296267e5825518d43799c987d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1cfd4550ca00368b3be5b8b20cb7250"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#ab1cfd4550ca00368b3be5b8b20cb7250">physical_buckets_</a></td></tr>
<tr class="memdesc:ab1cfd4550ca00368b3be5b8b20cb7250"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of buckets that are physically allocated, at least kHopNeighbors more than logical.  <a href="#ab1cfd4550ca00368b3be5b8b20cb7250">More...</a><br /></td></tr>
<tr class="separator:ab1cfd4550ca00368b3be5b8b20cb7250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae9ad2d193cd1db2ef05669ada26fc8"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1assorted_1_1ConstDiv.html">assorted::ConstDiv</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#a6ae9ad2d193cd1db2ef05669ada26fc8">bucket_div_</a></td></tr>
<tr class="memdesc:a6ae9ad2d193cd1db2ef05669ada26fc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">to efficiently divide a number by bucket_div_.  <a href="#a6ae9ad2d193cd1db2ef05669ada26fc8">More...</a><br /></td></tr>
<tr class="separator:a6ae9ad2d193cd1db2ef05669ada26fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ac0aafcddbe3e0a2b30e073fd656527cc"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html#ac0aafcddbe3e0a2b30e073fd656527cc">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="structfoedus_1_1cache_1_1HashFunc.html">HashFunc</a> &amp;v)</td></tr>
<tr class="separator:ac0aafcddbe3e0a2b30e073fd656527cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af3556a191cd1a3f96817d868d58f3db7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::cache::HashFunc::HashFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a>&#160;</td>
          <td class="paramname"><em>physical_buckets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cache__hashtable_8cpp_source.html#l00060">60</a> of file <a class="el" href="cache__hashtable_8cpp_source.html">cache_hashtable.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  : <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">logical_buckets_</a>(<a class="code" href="namespacefoedus_1_1cache.html#a9b43ef6b796c99e0e4188af14667c571">determine_logical_buckets</a>(physical_buckets)),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#ab1cfd4550ca00368b3be5b8b20cb7250">physical_buckets_</a>(physical_buckets),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a6ae9ad2d193cd1db2ef05669ada26fc8">bucket_div_</a>(<a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">logical_buckets_</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1cache_1_1HashFunc_html_a1b749296267e5825518d43799c987d5f"><div class="ttname"><a href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">foedus::cache::HashFunc::logical_buckets_</a></div><div class="ttdeci">const BucketId logical_buckets_</div><div class="ttdoc">Number of logical (actually used) buckets in this table. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00092">cache_hashtable.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_1_1cache_html_a9b43ef6b796c99e0e4188af14667c571"><div class="ttname"><a href="namespacefoedus_1_1cache.html#a9b43ef6b796c99e0e4188af14667c571">foedus::cache::determine_logical_buckets</a></div><div class="ttdeci">BucketId determine_logical_buckets(BucketId physical_buckets)</div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8cpp_source.html#l00035">cache_hashtable.cpp:35</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1HashFunc_html_a6ae9ad2d193cd1db2ef05669ada26fc8"><div class="ttname"><a href="structfoedus_1_1cache_1_1HashFunc.html#a6ae9ad2d193cd1db2ef05669ada26fc8">foedus::cache::HashFunc::bucket_div_</a></div><div class="ttdeci">const assorted::ConstDiv bucket_div_</div><div class="ttdoc">to efficiently divide a number by bucket_div_. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00096">cache_hashtable.hpp:96</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1HashFunc_html_ab1cfd4550ca00368b3be5b8b20cb7250"><div class="ttname"><a href="structfoedus_1_1cache_1_1HashFunc.html#ab1cfd4550ca00368b3be5b8b20cb7250">foedus::cache::HashFunc::physical_buckets_</a></div><div class="ttdeci">const BucketId physical_buckets_</div><div class="ttdoc">Number of buckets that are physically allocated, at least kHopNeighbors more than logical...</div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00094">cache_hashtable.hpp:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a19737fa3c91676f9c85536f5928b7501"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a> foedus::cache::HashFunc::get_bucket_number </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a bucket number the given snapshot page ID <em>should</em> belong to. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00110">110</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="const__div_8hpp_source.html#l00228">foedus::assorted::ConstDiv::div32()</a>, <a class="el" href="cache__hashtable_8hpp_source.html#l00384">get_hash()</a>, and <a class="el" href="const__div_8hpp_source.html#l00205">foedus::assorted::ConstDiv::rem32()</a>.</p>

<p>Referenced by <a class="el" href="cache__hashtable_8hpp_source.html#l00319">foedus::cache::CacheHashtable::get_bucket_number()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    uint32_t seed = <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9">get_hash</a>(page_id);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    uint32_t quotient = <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a6ae9ad2d193cd1db2ef05669ada26fc8">bucket_div_</a>.<a class="code" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21">div32</a>(seed);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    uint32_t bucket = <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a6ae9ad2d193cd1db2ef05669ada26fc8">bucket_div_</a>.<a class="code" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230">rem32</a>(seed, <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">logical_buckets_</a>, quotient);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(bucket == seed % <a class="code" href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">logical_buckets_</a>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> bucket;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1cache_1_1HashFunc_html_a1b749296267e5825518d43799c987d5f"><div class="ttname"><a href="structfoedus_1_1cache_1_1HashFunc.html#a1b749296267e5825518d43799c987d5f">foedus::cache::HashFunc::logical_buckets_</a></div><div class="ttdeci">const BucketId logical_buckets_</div><div class="ttdoc">Number of logical (actually used) buckets in this table. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00092">cache_hashtable.hpp:92</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ConstDiv_html_afbfa08664902f9b633edbd395706b230"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230">foedus::assorted::ConstDiv::rem32</a></div><div class="ttdeci">uint32_t rem32(uint32_t n, uint32_t d, uint32_t q) const </div><div class="ttdoc">Calculate remainder. </div><div class="ttdef"><b>Definition:</b> <a href="const__div_8hpp_source.html#l00205">const_div.hpp:205</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1HashFunc_html_aa9020cb1e5915b6777d089521ef618a9"><div class="ttname"><a href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9">foedus::cache::HashFunc::get_hash</a></div><div class="ttdeci">static uint32_t get_hash(storage::SnapshotPagePointer page_id) __attribute__((always_inline))</div><div class="ttdoc">Returns a hash value for the given snapshot page ID. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00384">cache_hashtable.hpp:384</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1HashFunc_html_a6ae9ad2d193cd1db2ef05669ada26fc8"><div class="ttname"><a href="structfoedus_1_1cache_1_1HashFunc.html#a6ae9ad2d193cd1db2ef05669ada26fc8">foedus::cache::HashFunc::bucket_div_</a></div><div class="ttdeci">const assorted::ConstDiv bucket_div_</div><div class="ttdoc">to efficiently divide a number by bucket_div_. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00096">cache_hashtable.hpp:96</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ConstDiv_html_a6892a2d35b9ae08a00190c9440e22a21"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21">foedus::assorted::ConstDiv::div32</a></div><div class="ttdeci">uint32_t div32(uint32_t n) const </div><div class="ttdoc">32-bit integer division that outputs both quotient and remainder. </div><div class="ttdef"><b>Definition:</b> <a href="const__div_8hpp_source.html#l00228">const_div.hpp:228</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_cgraph.png" border="0" usemap="#structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_cgraph" alt=""/></div>
<map name="structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_cgraph" id="structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="224,27,401,69"/>
<area shape="rect" id="node3" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9" title="Returns a hash value for the given snapshot page ID. " alt="" coords="227,93,398,134"/>
<area shape="rect" id="node7" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230" title="Calculate remainder. " alt="" coords="224,158,401,199"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="454,5,645,61"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="455,85,643,141"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="449,165,649,221"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_icgraph.png" border="0" usemap="#structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_icgraph" alt=""/></div>
<map name="structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_icgraph" id="structfoedus_1_1cache_1_1HashFunc_a19737fa3c91676f9c85536f5928b7501_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="224,619,431,660"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="479,553,685,595"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131" title="Batched version of find(). " alt="" coords="479,684,685,725"/>
<area shape="rect" id="node50" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="479,619,685,660"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="733,553,943,595"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1455,253,1664,295"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="991,524,1175,565"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1223,595,1407,636"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1712,93,1905,149"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1964,395,2177,436"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1719,383,1898,439"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1718,173,1899,229"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1722,13,1895,69"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1953,329,2188,371"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="2237,329,2440,371"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="2236,395,2441,436"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2509,278,2673,334"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2509,358,2673,414"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2501,438,2680,494"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2500,518,2681,574"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2499,38,2682,94"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2493,118,2689,174"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2489,198,2692,254"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1980,173,2161,229"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="2248,249,2429,305"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="2248,169,2429,225"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1977,5,2165,76"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="2245,86,2433,142"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1480,100,1639,141"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1223,514,1407,570"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1484,599,1635,640"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1719,754,1898,810"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1726,674,1891,730"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1727,893,1891,949"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1722,253,1895,309"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1722,594,1895,650"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1978,674,2163,730"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1978,754,2163,810"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1978,834,2163,890"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1978,514,2163,570"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1983,594,2159,650"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1984,260,2157,301"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1484,514,1635,570"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1719,514,1898,570"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="746,677,930,733"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="1003,677,1163,733"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="991,797,1175,853"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="1239,801,1390,857"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1470,821,1649,877"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa9020cb1e5915b6777d089521ef618a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::cache::HashFunc::get_hash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a hash value for the given snapshot page ID. </p>
<p>This needs no member variables. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00384">384</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>

<p>References <a class="el" href="storage__id_8hpp_source.html#l00091">foedus::storage::extract_local_page_id_from_snapshot_pointer()</a>, <a class="el" href="storage__id_8hpp_source.html#l00095">foedus::storage::extract_numa_node_from_snapshot_pointer()</a>, and <a class="el" href="storage__id_8hpp_source.html#l00098">foedus::storage::extract_snapshot_id_from_snapshot_pointer()</a>.</p>

<p>Referenced by <a class="el" href="cache__hashtable_8hpp_source.html#l00110">get_bucket_number()</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                                                     {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  uint16_t snapshot_id = <a class="code" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c">storage::extract_snapshot_id_from_snapshot_pointer</a>(page_id);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  uint8_t numa_node = <a class="code" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1">storage::extract_numa_node_from_snapshot_pointer</a>(page_id);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  uint64_t local_page_id = <a class="code" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be">storage::extract_local_page_id_from_snapshot_pointer</a>(page_id);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// snapshot_id is usually very sparse. and has no correlation with local_page_id.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// numa_node too. thus just use them as seeds for good old multiplicative hashing.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  uint32_t seed = snapshot_id * 0x5a2948074497175aULL;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  seed += numa_node * 0xc30a95f6e63dd908ULL;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// local_page_id is 40 bits. 32-40 bits are very sparse, and it has no correlation with</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// other bits (how come 4kb-th page and 16Tb+4kb-th page has anything in common..).</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// so, let&#39;s treat it with another multiplicative.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  uint8_t highest_bits = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(local_page_id &gt;&gt; 32);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  uint32_t folded_local_page_id = local_page_id + highest_bits * 0xd3561f5bedac324cULL;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="comment">// now, we don&#39;t want to place adjacent pages in adjacent hash buckets. so, let&#39;s swap bytes.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// this benefits hop-scotch hashing table.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  uint32_t swaped_page_id = __builtin_bswap32(folded_local_page_id);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  seed ^= swaped_page_id;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">return</span> seed;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a3c3e7a984303d1ef88e001db1591b1be"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be">foedus::storage::extract_local_page_id_from_snapshot_pointer</a></div><div class="ttdeci">SnapshotLocalPageId extract_local_page_id_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00091">storage_id.hpp:91</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a82df0b3921d7c863275baf4f9c59959c"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c">foedus::storage::extract_snapshot_id_from_snapshot_pointer</a></div><div class="ttdeci">uint16_t extract_snapshot_id_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00098">storage_id.hpp:98</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a8f6e96ac10eb804602349a54292d26a1"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1">foedus::storage::extract_numa_node_from_snapshot_pointer</a></div><div class="ttdeci">uint8_t extract_numa_node_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00095">storage_id.hpp:95</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_cgraph.png" border="0" usemap="#structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_cgraph" alt=""/></div>
<map name="structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_cgraph" id="structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="224,5,424,61"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="230,85,418,141"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="229,165,419,221"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_icgraph.png" border="0" usemap="#structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_icgraph" alt=""/></div>
<map name="structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_icgraph" id="structfoedus_1_1cache_1_1HashFunc_aa9020cb1e5915b6777d089521ef618a9_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="224,620,395,661"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="443,620,649,661"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="697,555,904,596"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131" title="Batched version of find(). " alt="" coords="697,685,904,727"/>
<area shape="rect" id="node50" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="697,620,904,661"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="952,555,1161,596"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1673,213,1883,255"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1209,525,1393,567"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1441,595,1625,636"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1931,93,2124,149"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="2183,395,2396,436"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1938,383,2117,439"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1937,173,2118,229"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1941,13,2114,69"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="2172,329,2407,371"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="2456,329,2659,371"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="2455,395,2660,436"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2727,118,2891,174"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2727,198,2891,254"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2720,278,2899,334"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2719,358,2900,414"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2718,438,2901,494"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2711,518,2907,574"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2708,38,2911,94"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="2199,173,2380,229"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="2467,249,2648,305"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="2467,169,2648,225"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="2195,5,2383,76"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="2463,86,2651,142"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1699,100,1857,141"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1441,514,1625,570"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1703,599,1853,640"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1938,754,2117,810"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1945,674,2110,730"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="2207,834,2371,890"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1941,303,2114,359"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1941,594,2114,650"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="2197,674,2382,730"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="2197,754,2382,810"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="2197,914,2382,970"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="2197,514,2382,570"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="2201,594,2377,650"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1703,514,1853,570"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1938,514,2117,570"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="965,678,1149,734"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="1221,678,1381,734"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="1209,838,1393,894"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="1458,845,1609,901"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1689,885,1867,941"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9470855bb66d98df48f82fc5ba6655c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">PageIdTag</a> foedus::cache::HashFunc::get_tag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns another hash value used to differentiate IDs with similar hash values. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00406">406</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>

<p>Referenced by <a class="el" href="cache__hashtable_8hpp_source.html#l00415">foedus::cache::CacheHashtable::find()</a>, <a class="el" href="cache__hashtable_8cpp_source.html#l00376">foedus::cache::CacheHashtable::find_batch()</a>, and <a class="el" href="cache__hashtable_8cpp_source.html#l00114">foedus::cache::CacheHashtable::install()</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                                                     {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">PageIdTag</a> high_bits = <span class="keyword">static_cast&lt;</span><a class="code" href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">PageIdTag</a><span class="keyword">&gt;</span>(page_id &gt;&gt; 32);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">PageIdTag</a> tag = high_bits * 0x8e1d76486c3e638dULL + <span class="keyword">static_cast&lt;</span><a class="code" href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">PageIdTag</a><span class="keyword">&gt;</span>(page_id);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">if</span> (tag == 0) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    tag = 1;  <span class="comment">// we avoid 0 as a valid value. this enables sanity checks.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">return</span> tag;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1cache_html_a9e55979322d3cfceff78e1f77d901a82"><div class="ttname"><a href="namespacefoedus_1_1cache.html#a9e55979322d3cfceff78e1f77d901a82">foedus::cache::PageIdTag</a></div><div class="ttdeci">uint32_t PageIdTag</div><div class="ttdoc">This is a lossy-compressed representation of SnapshotPagePointer used to quickly identify whether the...</div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00067">cache_hashtable.hpp:67</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1cache_1_1HashFunc_a9470855bb66d98df48f82fc5ba6655c6_icgraph.png" border="0" usemap="#structfoedus_1_1cache_1_1HashFunc_a9470855bb66d98df48f82fc5ba6655c6_icgraph" alt=""/></div>
<map name="structfoedus_1_1cache_1_1HashFunc_a9470855bb66d98df48f82fc5ba6655c6_icgraph" id="structfoedus_1_1cache_1_1HashFunc_a9470855bb66d98df48f82fc5ba6655c6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="224,594,431,635"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131" title="Batched version of find(). " alt="" coords="224,725,431,766"/>
<area shape="rect" id="node50" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="224,659,431,701"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="479,594,688,635"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1200,337,1409,378"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="736,623,920,665"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="968,613,1152,654"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1457,264,1651,320"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1709,402,1923,443"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1465,395,1643,451"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1463,100,1645,156"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1467,184,1641,240"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1699,337,1933,378"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1983,337,2185,378"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1981,402,2187,443"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2254,485,2418,541"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2254,5,2418,61"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2247,85,2425,141"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2245,165,2427,221"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2245,245,2427,301"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2238,325,2434,381"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2235,405,2437,461"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1725,97,1907,153"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1993,176,2175,232"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1993,96,2175,152"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1722,178,1910,249"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1990,256,2178,312"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1225,271,1384,313"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="968,681,1152,737"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1229,613,1380,654"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1465,845,1643,901"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1471,765,1637,821"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1472,925,1636,981"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1467,525,1641,581"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1467,605,1641,661"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1723,788,1909,844"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1723,868,1909,924"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1723,948,1909,1004"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1723,628,1909,684"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1728,708,1904,764"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1729,562,1903,603"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1729,467,1903,538"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1229,684,1380,740"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1465,685,1643,741"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="491,717,675,773"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="748,717,908,773"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="736,913,920,969"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="985,925,1135,981"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1215,969,1394,1025"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="ac0aafcddbe3e0a2b30e073fd656527cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1cache_1_1HashFunc.html">HashFunc</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="cache__hashtable_8cpp_source.html#l00332">332</a> of file <a class="el" href="cache__hashtable_8cpp_source.html">cache_hashtable.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                                         {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;HashFunc&gt;&quot;</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;logical_buckets_&gt;&quot;</span> &lt;&lt; v.logical_buckets_ &lt;&lt; <span class="stringliteral">&quot;&lt;logical_buckets_&gt;&quot;</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;physical_buckets_&gt;&quot;</span> &lt;&lt; v.physical_buckets_ &lt;&lt; <span class="stringliteral">&quot;&lt;physical_buckets_&gt;&quot;</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/HashFunc&gt;&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a6ae9ad2d193cd1db2ef05669ada26fc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1assorted_1_1ConstDiv.html">assorted::ConstDiv</a> foedus::cache::HashFunc::bucket_div_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>to efficiently divide a number by bucket_div_. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00096">96</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1b749296267e5825518d43799c987d5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a> foedus::cache::HashFunc::logical_buckets_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of logical (actually used) buckets in this table. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00092">92</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>

<p>Referenced by <a class="el" href="cache__hashtable_8hpp_source.html#l00313">foedus::cache::CacheHashtable::get_logical_buckets()</a>, and <a class="el" href="cache__hashtable_8cpp_source.html#l00332">foedus::cache::operator&lt;&lt;()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1cfd4550ca00368b3be5b8b20cb7250"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacefoedus_1_1cache.html#abfca49eb29e5129b80bf087c7b9cfaa7">BucketId</a> foedus::cache::HashFunc::physical_buckets_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of buckets that are physically allocated, at least kHopNeighbors more than logical. </p>

<p>Definition at line <a class="el" href="cache__hashtable_8hpp_source.html#l00094">94</a> of file <a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a>.</p>

<p>Referenced by <a class="el" href="cache__hashtable_8hpp_source.html#l00314">foedus::cache::CacheHashtable::get_physical_buckets()</a>, and <a class="el" href="cache__hashtable_8cpp_source.html#l00332">foedus::cache::operator&lt;&lt;()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/cache/<a class="el" href="cache__hashtable_8hpp_source.html">cache_hashtable.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/cache/<a class="el" href="cache__hashtable_8cpp_source.html">cache_hashtable.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1cache.html">cache</a></li><li class="navelem"><a class="el" href="structfoedus_1_1cache_1_1HashFunc.html">HashFunc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
