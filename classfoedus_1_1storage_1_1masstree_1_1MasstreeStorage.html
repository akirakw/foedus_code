<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::masstree::MasstreeStorage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::masstree::MasstreeStorage Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__MASSTREE.html">Masstree Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents a Masstree storage.  
 <a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents a Masstree storage. </p>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00043">43</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::storage::masstree::MasstreeStorage:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage__inherit__graph.png" border="0" usemap="#foedus_1_1storage_1_1masstree_1_1MasstreeStorage_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1storage_1_1masstree_1_1MasstreeStorage_inherit__map" id="foedus_1_1storage_1_1masstree_1_1MasstreeStorage_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Storage.html" title="foedus::storage::Storage\l\&lt; MasstreeStorageControlBlock \&gt;" alt="" coords="5,95,224,136"/>
<area shape="rect" id="node3" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; MasstreeStorageControlBlock \&gt;" alt="" coords="5,5,224,47"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::storage::masstree::MasstreeStorage:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage__coll__graph.png" border="0" usemap="#foedus_1_1storage_1_1masstree_1_1MasstreeStorage_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1storage_1_1masstree_1_1MasstreeStorage_coll__map" id="foedus_1_1storage_1_1masstree_1_1MasstreeStorage_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Storage.html" title="foedus::storage::Storage\l\&lt; MasstreeStorageControlBlock \&gt;" alt="" coords="1641,53,1860,94"/>
<area shape="rect" id="node3" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; MasstreeStorageControlBlock \&gt;" alt="" coords="1373,53,1592,94"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. " alt="" coords="1081,21,1189,48"/>
<area shape="rect" id="node5" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="717,5,849,32"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeStorageControlBlock.html" title="Shared data of this storage type. " alt="" coords="1033,102,1236,143"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeMetadata.html" title="Metadata of a masstree storage. " alt="" coords="697,57,870,98"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Metadata.html" title="Metadata of one storage. " alt="" coords="377,64,551,91"/>
<area shape="rect" id="node9" href="classfoedus_1_1assorted_1_1FixedString.html" title="foedus::assorted::FixedString\l\&lt; 60 \&gt;" alt="" coords="5,23,197,65"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1Metadata_1_1SnapshotThresholds.html" title="Tuning parameters related to snapshotting. " alt="" coords="15,89,188,130"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1DualPagePointer.html" title="Represents a pointer to another page (usually a child page). " alt="" coords="696,122,871,163"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html" title="Represents a pointer to a volatile page with modification count for preventing ABA. " alt="" coords="383,122,545,163"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="696,188,871,215"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments">PeekBoundariesArguments</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arguments for <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99" title="Checks the volatile pages of this storage to give hints to decide page boundary keys. ">peek_volatile_page_boundaries()</a>  <a href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1881e5495dc78e5ce9f54ee81563090a"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html">MasstreeStoragePimpl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a1881e5495dc78e5ce9f54ee81563090a">ThisPimpl</a></td></tr>
<tr class="separator:a1881e5495dc78e5ce9f54ee81563090a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7677ad526ffb084e1860bfb6bc6d0763"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCreateLogType.html">MasstreeCreateLogType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a7677ad526ffb084e1860bfb6bc6d0763">ThisCreateLogType</a></td></tr>
<tr class="separator:a7677ad526ffb084e1860bfb6bc6d0763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb28f64867c590a3a369ed76043b2ba"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeMetadata.html">MasstreeMetadata</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aecb28f64867c590a3a369ed76043b2ba">ThisMetadata</a></td></tr>
<tr class="separator:aecb28f64867c590a3a369ed76043b2ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad8353b8f39363f165cb6c40ec1a85313"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad8353b8f39363f165cb6c40ec1a85313">MasstreeStorage</a> ()</td></tr>
<tr class="separator:ad8353b8f39363f165cb6c40ec1a85313"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2838579fd4f57dda9122317fc0867d59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2838579fd4f57dda9122317fc0867d59">MasstreeStorage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeStorageControlBlock.html">MasstreeStorageControlBlock</a> *control_block)</td></tr>
<tr class="separator:a2838579fd4f57dda9122317fc0867d59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c647da9000fd0cd03cdb322c73e2958"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6c647da9000fd0cd03cdb322c73e2958">MasstreeStorage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> *control_block)</td></tr>
<tr class="separator:a6c647da9000fd0cd03cdb322c73e2958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80208c5300e6eacdfec156b92cc93bc5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a80208c5300e6eacdfec156b92cc93bc5">MasstreeStorage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> id)</td></tr>
<tr class="separator:a80208c5300e6eacdfec156b92cc93bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae2f827c75fdee917776ee8fe3c99e09"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aae2f827c75fdee917776ee8fe3c99e09">MasstreeStorage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, const <a class="el" href="namespacefoedus_1_1storage.html#a0c15c034d49af969335271617a73a846">StorageName</a> &amp;name)</td></tr>
<tr class="separator:aae2f827c75fdee917776ee8fe3c99e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1abcded49e72aa71cc7ac9a9405513c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#af1abcded49e72aa71cc7ac9a9405513c">MasstreeStorage</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;other)</td></tr>
<tr class="separator:af1abcded49e72aa71cc7ac9a9405513c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901422371b485bbdca770270f1a43f48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a901422371b485bbdca770270f1a43f48">operator=</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;other)</td></tr>
<tr class="separator:a901422371b485bbdca770270f1a43f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94bc2a1ae36c0a1ce1de99715072c59d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeMetadata.html">MasstreeMetadata</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a94bc2a1ae36c0a1ce1de99715072c59d">get_masstree_metadata</a> () const </td></tr>
<tr class="separator:a94bc2a1ae36c0a1ce1de99715072c59d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92ad35031262ae95e767c53746de2e29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29">create</a> (const <a class="el" href="structfoedus_1_1storage_1_1Metadata.html">Metadata</a> &amp;metadata)</td></tr>
<tr class="separator:a92ad35031262ae95e767c53746de2e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2731aaf3a733c773a63df6d691ede3ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac">load</a> (const <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> &amp;snapshot_block)</td></tr>
<tr class="separator:a2731aaf3a733c773a63df6d691ede3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e22349aa6902839d3b80ac35e84790"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790">drop</a> ()</td></tr>
<tr class="separator:a40e22349aa6902839d3b80ac35e84790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10db264b9d354e1813bd20ef8fdb72bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb">prefetch_pages_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, bool install_volatile, bool cache_snapshot, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> from=<a class="el" href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">kInfimumSlice</a>, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> to=<a class="el" href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">kSupremumSlice</a>)</td></tr>
<tr class="memdesc:a10db264b9d354e1813bd20ef8fdb72bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prefetch data pages in this storage.  <a href="#a10db264b9d354e1813bd20ef8fdb72bb">More...</a><br /></td></tr>
<tr class="separator:a10db264b9d354e1813bd20ef8fdb72bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2370f71beab1eb4b8b02e3ac9e4f29bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd">track_moved_record</a> (<a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *old_address, <a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">xct::WriteXctAccess</a> *write_set)</td></tr>
<tr class="memdesc:a2370f71beab1eb4b8b02e3ac9e4f29bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves a "moved" record.  <a href="#a2370f71beab1eb4b8b02e3ac9e4f29bd">More...</a><br /></td></tr>
<tr class="separator:a2370f71beab1eb4b8b02e3ac9e4f29bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf38eea62d1432e3715a661d0790caf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf">get_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> *payload_capacity, bool read_only)</td></tr>
<tr class="memdesc:acdf38eea62d1432e3715a661d0790caf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves an entire record of the given key in this Masstree.  <a href="#acdf38eea62d1432e3715a661d0790caf">More...</a><br /></td></tr>
<tr class="separator:acdf38eea62d1432e3715a661d0790caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a2996a1ee370611b72c88f33fe2753"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753">get_record_part</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, bool read_only)</td></tr>
<tr class="memdesc:a01a2996a1ee370611b72c88f33fe2753"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a part of the given key in this Masstree.  <a href="#a01a2996a1ee370611b72c88f33fe2753">More...</a><br /></td></tr>
<tr class="separator:a01a2996a1ee370611b72c88f33fe2753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3be736c76c38dd23444cbd78947a63fd"><td class="memTemplParams" colspan="2">template&lt;typename PAYLOAD &gt; </td></tr>
<tr class="memitem:a3be736c76c38dd23444cbd78947a63fd"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd">get_record_primitive</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, PAYLOAD *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset, bool read_only)</td></tr>
<tr class="memdesc:a3be736c76c38dd23444cbd78947a63fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a part of the given key in this Masstree as a primitive value.  <a href="#a3be736c76c38dd23444cbd78947a63fd">More...</a><br /></td></tr>
<tr class="separator:a3be736c76c38dd23444cbd78947a63fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2492b6a04c2db18cdf2a4a2d7fecc0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0">get_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> *payload_capacity, bool read_only)</td></tr>
<tr class="memdesc:a4f2492b6a04c2db18cdf2a4a2d7fecc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves an entire record of the given primitive key in this Masstree.  <a href="#a4f2492b6a04c2db18cdf2a4a2d7fecc0">More...</a><br /></td></tr>
<tr class="separator:a4f2492b6a04c2db18cdf2a4a2d7fecc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda60c43db1237644270e90f2a255d35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35">get_record_part_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, bool read_only)</td></tr>
<tr class="memdesc:adda60c43db1237644270e90f2a255d35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a part of the given primitive key in this Masstree.  <a href="#adda60c43db1237644270e90f2a255d35">More...</a><br /></td></tr>
<tr class="separator:adda60c43db1237644270e90f2a255d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4bf2da94babc15bf43bd50b17ffb562"><td class="memTemplParams" colspan="2">template&lt;typename PAYLOAD &gt; </td></tr>
<tr class="memitem:ae4bf2da94babc15bf43bd50b17ffb562"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562">get_record_primitive_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, PAYLOAD *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset, bool read_only)</td></tr>
<tr class="memdesc:ae4bf2da94babc15bf43bd50b17ffb562"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a part of the given primitive key in this Masstree as a primitive value.  <a href="#ae4bf2da94babc15bf43bd50b17ffb562">More...</a><br /></td></tr>
<tr class="separator:ae4bf2da94babc15bf43bd50b17ffb562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef357bd4f0db9d2faa93a0bcd70c905"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a8ef357bd4f0db9d2faa93a0bcd70c905">insert_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a8ef357bd4f0db9d2faa93a0bcd70c905"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new record of the given key in this Masstree.  <a href="#a8ef357bd4f0db9d2faa93a0bcd70c905">More...</a><br /></td></tr>
<tr class="separator:a8ef357bd4f0db9d2faa93a0bcd70c905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86b4db183c677a364c7ddf71100699b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9">insert_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> physical_payload_hint)</td></tr>
<tr class="memdesc:a86b4db183c677a364c7ddf71100699b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this method, you can also specify <em>physical_payload_hint</em>, the physical size of the record's payload part.  <a href="#a86b4db183c677a364c7ddf71100699b9">More...</a><br /></td></tr>
<tr class="separator:a86b4db183c677a364c7ddf71100699b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674d7d08a3be524ff158d00e817b02b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a674d7d08a3be524ff158d00e817b02b5">insert_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a674d7d08a3be524ff158d00e817b02b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new record without payload of the given key in this Masstree.  <a href="#a674d7d08a3be524ff158d00e817b02b5">More...</a><br /></td></tr>
<tr class="separator:a674d7d08a3be524ff158d00e817b02b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61d3b4c9a894070e8937bede0eacf749"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">insert_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a61d3b4c9a894070e8937bede0eacf749"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new record of the given primitive key in this Masstree.  <a href="#a61d3b4c9a894070e8937bede0eacf749">More...</a><br /></td></tr>
<tr class="separator:a61d3b4c9a894070e8937bede0eacf749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d7f9dea9af7356face9815ac10c37b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4">insert_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> physical_payload_hint)</td></tr>
<tr class="memdesc:a6d7f9dea9af7356face9815ac10c37b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this method, you can also specify <em>physical_payload_hint</em>.  <a href="#a6d7f9dea9af7356face9815ac10c37b4">More...</a><br /></td></tr>
<tr class="separator:a6d7f9dea9af7356face9815ac10c37b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa428e27cf2673484b040048631b9f8fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aa428e27cf2673484b040048631b9f8fd">insert_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key) __attribute__((always_inline))</td></tr>
<tr class="memdesc:aa428e27cf2673484b040048631b9f8fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new record without payload of the given primitive key in this Masstree.  <a href="#aa428e27cf2673484b040048631b9f8fd">More...</a><br /></td></tr>
<tr class="separator:aa428e27cf2673484b040048631b9f8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b8b9c2d3b756b4559e43fbe93950a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5">delete_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)</td></tr>
<tr class="memdesc:ac6b8b9c2d3b756b4559e43fbe93950a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a record of the given key from this Masstree.  <a href="#ac6b8b9c2d3b756b4559e43fbe93950a5">More...</a><br /></td></tr>
<tr class="separator:ac6b8b9c2d3b756b4559e43fbe93950a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0051986148bca838483cf3a81d3f5236"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236">delete_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key)</td></tr>
<tr class="memdesc:a0051986148bca838483cf3a81d3f5236"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a record of the given primitive key from this Masstree.  <a href="#a0051986148bca838483cf3a81d3f5236">More...</a><br /></td></tr>
<tr class="separator:a0051986148bca838483cf3a81d3f5236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad680c95d2cfb7aa2c8974ba3004a8703"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad680c95d2cfb7aa2c8974ba3004a8703">upsert_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) __attribute__((always_inline))</td></tr>
<tr class="memdesc:ad680c95d2cfb7aa2c8974ba3004a8703"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a new record of the given key or replaces the existing one, or so-called <em>upsert</em>.  <a href="#ad680c95d2cfb7aa2c8974ba3004a8703">More...</a><br /></td></tr>
<tr class="separator:ad680c95d2cfb7aa2c8974ba3004a8703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f917244d33e9cdb2fa6ffd686a2a701"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701">upsert_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> physical_payload_hint)</td></tr>
<tr class="memdesc:a0f917244d33e9cdb2fa6ffd686a2a701"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this method, you can also specify <em>physical_payload_hint</em>, the physical size of the record's payload part.  <a href="#a0f917244d33e9cdb2fa6ffd686a2a701">More...</a><br /></td></tr>
<tr class="separator:a0f917244d33e9cdb2fa6ffd686a2a701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53eef933a44f04de0cb594e56799b6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae53eef933a44f04de0cb594e56799b6e">upsert_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) __attribute__((always_inline))</td></tr>
<tr class="memdesc:ae53eef933a44f04de0cb594e56799b6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upserts a new record without payload of the given key in this Masstree.  <a href="#ae53eef933a44f04de0cb594e56799b6e">More...</a><br /></td></tr>
<tr class="separator:ae53eef933a44f04de0cb594e56799b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7be54387721545e6a8191014a370893"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">upsert_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) __attribute__((always_inline))</td></tr>
<tr class="memdesc:ad7be54387721545e6a8191014a370893"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upserts a new record of the given primitive key in this Masstree.  <a href="#ad7be54387721545e6a8191014a370893">More...</a><br /></td></tr>
<tr class="separator:ad7be54387721545e6a8191014a370893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a152a0ecbad9b56385ec7f13e8a1fce19"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19">upsert_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> physical_payload_hint)</td></tr>
<tr class="memdesc:a152a0ecbad9b56385ec7f13e8a1fce19"><td class="mdescLeft">&#160;</td><td class="mdescRight">With this method, you can also specify <em>physical_payload_hint</em>.  <a href="#a152a0ecbad9b56385ec7f13e8a1fce19">More...</a><br /></td></tr>
<tr class="separator:a152a0ecbad9b56385ec7f13e8a1fce19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bfa9692185bbf487a4775092556a88c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3bfa9692185bbf487a4775092556a88c">upsert_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a3bfa9692185bbf487a4775092556a88c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upserts a new record without payload of the given primitive key in this Masstree.  <a href="#a3bfa9692185bbf487a4775092556a88c">More...</a><br /></td></tr>
<tr class="separator:a3bfa9692185bbf487a4775092556a88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7221368afad2669e36cdf1bfe8dcb5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f">overwrite_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count)</td></tr>
<tr class="memdesc:ae7221368afad2669e36cdf1bfe8dcb5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrites a part of one record of the given key in this Masstree.  <a href="#ae7221368afad2669e36cdf1bfe8dcb5f">More...</a><br /></td></tr>
<tr class="separator:ae7221368afad2669e36cdf1bfe8dcb5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a384c8fadf63901aa055285c7f680570f"><td class="memTemplParams" colspan="2">template&lt;typename PAYLOAD &gt; </td></tr>
<tr class="memitem:a384c8fadf63901aa055285c7f680570f"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f">overwrite_record_primitive</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, PAYLOAD payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset)</td></tr>
<tr class="memdesc:a384c8fadf63901aa055285c7f680570f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrites a part of one record of the given key in this Masstree as a primitive value.  <a href="#a384c8fadf63901aa055285c7f680570f">More...</a><br /></td></tr>
<tr class="separator:a384c8fadf63901aa055285c7f680570f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad27ac2a920f1f63adc768f7c95ea5c6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f">overwrite_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, const void *payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count)</td></tr>
<tr class="memdesc:ad27ac2a920f1f63adc768f7c95ea5c6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrites a part of one record of the given primitive key in this Masstree.  <a href="#ad27ac2a920f1f63adc768f7c95ea5c6f">More...</a><br /></td></tr>
<tr class="separator:ad27ac2a920f1f63adc768f7c95ea5c6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadbf62a4594062706294a2402777e223"><td class="memTemplParams" colspan="2">template&lt;typename PAYLOAD &gt; </td></tr>
<tr class="memitem:aadbf62a4594062706294a2402777e223"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223">overwrite_record_primitive_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, PAYLOAD payload, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset)</td></tr>
<tr class="memdesc:aadbf62a4594062706294a2402777e223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrites a part of one record of the given primitive key in this Masstree as a primitive value.  <a href="#aadbf62a4594062706294a2402777e223">More...</a><br /></td></tr>
<tr class="separator:aadbf62a4594062706294a2402777e223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc21940320e38fa61ebfc88af210fde"><td class="memTemplParams" colspan="2">template&lt;typename PAYLOAD &gt; </td></tr>
<tr class="memitem:a0fc21940320e38fa61ebfc88af210fde"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde">increment_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const void *key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, PAYLOAD *value, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset)</td></tr>
<tr class="memdesc:a0fc21940320e38fa61ebfc88af210fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">This one further optimizes overwrite methods for the frequent use case of incrementing some data in primitive type.  <a href="#a0fc21940320e38fa61ebfc88af210fde">More...</a><br /></td></tr>
<tr class="separator:a0fc21940320e38fa61ebfc88af210fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba3fe323a9ea3e8f8e006459ef7e442"><td class="memTemplParams" colspan="2">template&lt;typename PAYLOAD &gt; </td></tr>
<tr class="memitem:adba3fe323a9ea3e8f8e006459ef7e442"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442">increment_record_normalized</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> key, PAYLOAD *value, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_offset)</td></tr>
<tr class="memdesc:adba3fe323a9ea3e8f8e006459ef7e442"><td class="mdescLeft">&#160;</td><td class="mdescRight">For primitive key.  <a href="#adba3fe323a9ea3e8f8e006459ef7e442">More...</a><br /></td></tr>
<tr class="separator:adba3fe323a9ea3e8f8e006459ef7e442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedee683fbced316953d1cbc622f22c87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87">verify_single_thread</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context)</td></tr>
<tr class="separator:aedee683fbced316953d1cbc622f22c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d2f5eb65777d851bee6809acf6fe153"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a9d2f5eb65777d851bee6809acf6fe153">debugout_single_thread</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, bool volatile_only=false, uint32_t max_pages=1024U)</td></tr>
<tr class="memdesc:a9d2f5eb65777d851bee6809acf6fe153"><td class="mdescLeft">&#160;</td><td class="mdescRight">A super-expensive and single-thread only debugging feature to write out gigantic human-readable texts to describe the Masstree in details.  <a href="#a9d2f5eb65777d851bee6809acf6fe153">More...</a><br /></td></tr>
<tr class="separator:a9d2f5eb65777d851bee6809acf6fe153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad23c8139c379dac6b0a1c07a52debd62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad23c8139c379dac6b0a1c07a52debd62">hcc_reset_all_temperature_stat</a> ()</td></tr>
<tr class="memdesc:ad23c8139c379dac6b0a1c07a52debd62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets all volatile pages' temperature stat to be zero in this storage.  <a href="#ad23c8139c379dac6b0a1c07a52debd62">More...</a><br /></td></tr>
<tr class="separator:ad23c8139c379dac6b0a1c07a52debd62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf137494ad55ab4d60cec25c7c654e99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99">peek_volatile_page_boundaries</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, const <a class="el" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments">PeekBoundariesArguments</a> &amp;args)</td></tr>
<tr class="memdesc:abf137494ad55ab4d60cec25c7c654e99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the volatile pages of this storage to give hints to decide page boundary keys.  <a href="#abf137494ad55ab4d60cec25c7c654e99">More...</a><br /></td></tr>
<tr class="separator:abf137494ad55ab4d60cec25c7c654e99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70b1c5e023fa0aac150e7b607e37727c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a70b1c5e023fa0aac150e7b607e37727c">fatify_first_root</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint32_t desired_count, bool disable_no_record_split=true)</td></tr>
<tr class="memdesc:a70b1c5e023fa0aac150e7b607e37727c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deliberately causes splits under the volatile root of first layer, or "fatify" it.  <a href="#a70b1c5e023fa0aac150e7b607e37727c">More...</a><br /></td></tr>
<tr class="separator:a70b1c5e023fa0aac150e7b607e37727c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1storage_1_1Storage"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1storage_1_1Storage')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1storage_1_1Storage.html">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;</a></td></tr>
<tr class="memitem:afd9af874de90ee35544bcb8a0b562890 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#afd9af874de90ee35544bcb8a0b562890">Storage</a> ()</td></tr>
<tr class="separator:afd9af874de90ee35544bcb8a0b562890 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a816534199b6ecc2362e865ba6b69fcc7 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a816534199b6ecc2362e865ba6b69fcc7">Storage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, MasstreeStorageControlBlock *control_block)</td></tr>
<tr class="separator:a816534199b6ecc2362e865ba6b69fcc7 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237ac4e220f5b1f60d02d3ba60b3e957 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a237ac4e220f5b1f60d02d3ba60b3e957">Storage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> *control_block)</td></tr>
<tr class="separator:a237ac4e220f5b1f60d02d3ba60b3e957 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a8a206a33ec9e288c7428f5a84fa42 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a99a8a206a33ec9e288c7428f5a84fa42">Storage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> id)</td></tr>
<tr class="memdesc:a99a8a206a33ec9e288c7428f5a84fa42 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shorthand for engine-&gt;get_storage_manager()-&gt;get_storage(id)  <a href="#a99a8a206a33ec9e288c7428f5a84fa42">More...</a><br /></td></tr>
<tr class="separator:a99a8a206a33ec9e288c7428f5a84fa42 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0da37bccd7cff653167727ba4610bb6a inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a0da37bccd7cff653167727ba4610bb6a">Storage</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, const <a class="el" href="namespacefoedus_1_1storage.html#a0c15c034d49af969335271617a73a846">StorageName</a> &amp;name)</td></tr>
<tr class="memdesc:a0da37bccd7cff653167727ba4610bb6a inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shorthand for engine-&gt;get_storage_manager()-&gt;get_storage(name)  <a href="#a0da37bccd7cff653167727ba4610bb6a">More...</a><br /></td></tr>
<tr class="separator:a0da37bccd7cff653167727ba4610bb6a inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d6eeb9c79fded26452c2b60e509f53 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a30d6eeb9c79fded26452c2b60e509f53">Storage</a> (const <a class="el" href="classfoedus_1_1storage_1_1Storage.html">Storage</a> &amp;other)</td></tr>
<tr class="separator:a30d6eeb9c79fded26452c2b60e509f53 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f116fdabdd0c488b59b318600fce465 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1Storage.html">Storage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a1f116fdabdd0c488b59b318600fce465">operator=</a> (const <a class="el" href="classfoedus_1_1storage_1_1Storage.html">Storage</a> &amp;other)</td></tr>
<tr class="separator:a1f116fdabdd0c488b59b318600fce465 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9fcb57f0ee2a79e884c0b8b64c8b824 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#ad9fcb57f0ee2a79e884c0b8b64c8b824">get_id</a> () const</td></tr>
<tr class="memdesc:ad9fcb57f0ee2a79e884c0b8b64c8b824 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the unique ID of this storage.  <a href="#ad9fcb57f0ee2a79e884c0b8b64c8b824">More...</a><br /></td></tr>
<tr class="separator:ad9fcb57f0ee2a79e884c0b8b64c8b824 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a131e005bb11678c1824d5075aa3df77a inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga016025043f5ef9c02be03f2f2a17a0de">StorageType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a">get_type</a> () const</td></tr>
<tr class="memdesc:a131e005bb11678c1824d5075aa3df77a inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the type of this storage.  <a href="#a131e005bb11678c1824d5075aa3df77a">More...</a><br /></td></tr>
<tr class="separator:a131e005bb11678c1824d5075aa3df77a inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1b54d4e7f3ad9f7f7c17598911abb01 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacefoedus_1_1storage.html#a0c15c034d49af969335271617a73a846">StorageName</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#ac1b54d4e7f3ad9f7f7c17598911abb01">get_name</a> () const</td></tr>
<tr class="memdesc:ac1b54d4e7f3ad9f7f7c17598911abb01 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the unique name of this storage.  <a href="#ac1b54d4e7f3ad9f7f7c17598911abb01">More...</a><br /></td></tr>
<tr class="separator:ac1b54d4e7f3ad9f7f7c17598911abb01 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3cca5dd58aa9bbf419cc07986bbc668 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1Metadata.html">Metadata</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#ae3cca5dd58aa9bbf419cc07986bbc668">get_metadata</a> () const</td></tr>
<tr class="memdesc:ae3cca5dd58aa9bbf419cc07986bbc668 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the metadata of this storage.  <a href="#ae3cca5dd58aa9bbf419cc07986bbc668">More...</a><br /></td></tr>
<tr class="separator:ae3cca5dd58aa9bbf419cc07986bbc668 inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade24602975f3928e77762f8cb4da51ca inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca">exists</a> () const</td></tr>
<tr class="memdesc:ade24602975f3928e77762f8cb4da51ca inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether this storage is already created.  <a href="#ade24602975f3928e77762f8cb4da51ca">More...</a><br /></td></tr>
<tr class="separator:ade24602975f3928e77762f8cb4da51ca inherit pub_methods_classfoedus_1_1storage_1_1Storage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;</a></td></tr>
<tr class="memitem:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ab3209bc9bd57c99f0ad601f33ec77d1e">Attachable</a> ()</td></tr>
<tr class="separator:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad91af21656ffcf7eeb56a5f7d0f5f661">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ac28be42953c806e4c4e0ad8f99201dae">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, MasstreeStorageControlBlock *control_block)</td></tr>
<tr class="separator:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad1182f6bd28f64e3c48bf5ee36d54cce">Attachable</a> (MasstreeStorageControlBlock *control_block)</td></tr>
<tr class="separator:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a7892c78e38fb5f025ea73939a25c9d2e">Attachable</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aed95388e1a77a81a5d7d04cf28ef3577">~Attachable</a> ()</td></tr>
<tr class="separator:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a0666676a4eaed1c0fdf94a2e1b00c099">operator=</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a484796b2fffa361b9a6ed2f1b7f61a35">attach</a> (MasstreeStorageControlBlock *control_block)</td></tr>
<tr class="memdesc:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches to the given shared memory.  <a href="#a484796b2fffa361b9a6ed2f1b7f61a35">More...</a><br /></td></tr>
<tr class="separator:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aebf4adece08c298864ce05ddd9461a0c">is_attached</a> () const</td></tr>
<tr class="memdesc:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already attached to some shared memory.  <a href="#aebf4adece08c298864ce05ddd9461a0c">More...</a><br /></td></tr>
<tr class="separator:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">MasstreeStorageControlBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad">get_control_block</a> () const</td></tr>
<tr class="separator:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a44f07b6dbb803d41d16b40182e8ff583">get_engine</a> () const</td></tr>
<tr class="separator:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#acd701f80820c2ef1f665bda157346021">set_engine</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab87ac9b0763bba9d8dda06e0b7e66ab2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ab87ac9b0763bba9d8dda06e0b7e66ab2">estimate_records_per_page</a> (<a class="el" href="group__MASSTREE.html#gaeb8e2ed51f11bc2df537c109de8032dd">Layer</a> layer, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length)</td></tr>
<tr class="separator:ab87ac9b0763bba9d8dda06e0b7e66ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a94cd69f346f2ebe2df42653e785ff40d"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a94cd69f346f2ebe2df42653e785ff40d">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;v)</td></tr>
<tr class="separator:a94cd69f346f2ebe2df42653e785ff40d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;</a></td></tr>
<tr class="memitem:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a></td></tr>
<tr class="memdesc:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most attachable object stores an engine pointer (local engine), so we define it here.  <a href="#a5f84f871a1d36f9ee990f3175661cd99">More...</a><br /></td></tr>
<tr class="separator:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">MasstreeStorageControlBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a></td></tr>
<tr class="memdesc:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The shared data on shared memory that has been initialized in some SOC or master engine.  <a href="#af9f87c691e2df0b04322e6df8d7c0d81">More...</a><br /></td></tr>
<tr class="separator:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a7677ad526ffb084e1860bfb6bc6d0763"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCreateLogType.html">MasstreeCreateLogType</a> <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a7677ad526ffb084e1860bfb6bc6d0763">foedus::storage::masstree::MasstreeStorage::ThisCreateLogType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00046">46</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aecb28f64867c590a3a369ed76043b2ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeMetadata.html">MasstreeMetadata</a> <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aecb28f64867c590a3a369ed76043b2ba">foedus::storage::masstree::MasstreeStorage::ThisMetadata</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00047">47</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1881e5495dc78e5ce9f54ee81563090a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html">MasstreeStoragePimpl</a> <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a1881e5495dc78e5ce9f54ee81563090a">foedus::storage::masstree::MasstreeStorage::ThisPimpl</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00045">45</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad8353b8f39363f165cb6c40ec1a85313"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeStorage::MasstreeStorage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00037">37</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;: Storage&lt;MasstreeStorageControlBlock&gt;() {}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2838579fd4f57dda9122317fc0867d59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeStorage::MasstreeStorage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeStorageControlBlock.html">MasstreeStorageControlBlock</a> *&#160;</td>
          <td class="paramname"><em>control_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00038">38</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage_8hpp_source.html#l00169">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::exists()</a>, <a class="el" href="storage_8hpp_source.html#l00150">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::get_type()</a>, and <a class="el" href="storage__id_8hpp_source.html#l00130">foedus::storage::kMasstreeStorage</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  : Storage&lt;MasstreeStorageControlBlock&gt;(engine, control_block) {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a">get_type</a>() == <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">kMasstreeStorage</a> || !<a class="code" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca">exists</a>());</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1Storage_html_a131e005bb11678c1824d5075aa3df77a"><div class="ttname"><a href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::get_type</a></div><div class="ttdeci">StorageType get_type() const</div><div class="ttdoc">Returns the type of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00150">storage.hpp:150</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">foedus::storage::kMasstreeStorage</a></div><div class="ttdoc">Masstree Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00130">storage_id.hpp:130</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1Storage_html_ade24602975f3928e77762f8cb4da51ca"><div class="ttname"><a href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::exists</a></div><div class="ttdeci">bool exists() const</div><div class="ttdoc">Returns whether this storage is already created. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00169">storage.hpp:169</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2838579fd4f57dda9122317fc0867d59_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2838579fd4f57dda9122317fc0867d59_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2838579fd4f57dda9122317fc0867d59_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2838579fd4f57dda9122317fc0867d59_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="289,29,496,85"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a" title="Returns the type of this storage. " alt="" coords="289,109,496,165"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1Storage.html#ae3cca5dd58aa9bbf419cc07986bbc668" title="Returns the metadata of this storage. " alt="" coords="544,117,708,158"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c647da9000fd0cd03cdb322c73e2958"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeStorage::MasstreeStorage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> *&#160;</td>
          <td class="paramname"><em>control_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00042">42</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage_8hpp_source.html#l00169">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::exists()</a>, <a class="el" href="storage_8hpp_source.html#l00150">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::get_type()</a>, and <a class="el" href="storage__id_8hpp_source.html#l00130">foedus::storage::kMasstreeStorage</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  : Storage&lt;MasstreeStorageControlBlock&gt;(engine, control_block) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a">get_type</a>() == <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">kMasstreeStorage</a> || !<a class="code" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca">exists</a>());</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1Storage_html_a131e005bb11678c1824d5075aa3df77a"><div class="ttname"><a href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::get_type</a></div><div class="ttdeci">StorageType get_type() const</div><div class="ttdoc">Returns the type of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00150">storage.hpp:150</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">foedus::storage::kMasstreeStorage</a></div><div class="ttdoc">Masstree Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00130">storage_id.hpp:130</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1Storage_html_ade24602975f3928e77762f8cb4da51ca"><div class="ttname"><a href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca">foedus::storage::Storage&lt; MasstreeStorageControlBlock &gt;::exists</a></div><div class="ttdeci">bool exists() const</div><div class="ttdoc">Returns whether this storage is already created. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00169">storage.hpp:169</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6c647da9000fd0cd03cdb322c73e2958_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6c647da9000fd0cd03cdb322c73e2958_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6c647da9000fd0cd03cdb322c73e2958_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6c647da9000fd0cd03cdb322c73e2958_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="289,29,496,85"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Storage.html#a131e005bb11678c1824d5075aa3df77a" title="Returns the type of this storage. " alt="" coords="289,109,496,165"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1Storage.html#ae3cca5dd58aa9bbf419cc07986bbc668" title="Returns the metadata of this storage. " alt="" coords="544,117,708,158"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a80208c5300e6eacdfec156b92cc93bc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeStorage::MasstreeStorage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00046">46</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  : Storage&lt;MasstreeStorageControlBlock&gt;(engine, id) {}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae2f827c75fdee917776ee8fe3c99e09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeStorage::MasstreeStorage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacefoedus_1_1storage.html#a0c15c034d49af969335271617a73a846">StorageName</a> &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00048">48</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  : Storage&lt;MasstreeStorageControlBlock&gt;(engine, name) {}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af1abcded49e72aa71cc7ac9a9405513c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeStorage::MasstreeStorage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00050">50</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  : Storage&lt;MasstreeStorageControlBlock&gt;(other.engine_, other.control_block_) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a92ad35031262ae95e767c53746de2e29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1Metadata.html">Metadata</a> &amp;&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00063">63</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00164">foedus::storage::masstree::MasstreeStoragePimpl::create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                                            {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).create(static_cast&lt;const MasstreeMetadata&amp;&gt;(metadata));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a92ad35031262ae95e767c53746de2e29_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a92ad35031262ae95e767c53746de2e29_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a92ad35031262ae95e767c53746de2e29_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a92ad35031262ae95e767c53746de2e29_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="227,253,400,309"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4a025ff60e7c0717967a091f2c1e01fb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::exists" alt="" coords="448,173,621,229"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a94e2b69404cabddbead1d1fb0ef1dc42" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_name" alt="" coords="448,253,621,309"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="448,333,621,389"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="707,5,842,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="669,71,880,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="679,136,870,177"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="685,201,864,243"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="685,267,864,308"/>
<area shape="rect" id="node19" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="683,333,867,389"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ab25cb34a8304c744bf309cc02b515e72" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::initialize_volatile_page" alt="" coords="682,463,867,519"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="928,433,1113,489"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="688,543,861,599"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="694,624,855,665"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f" title="foedus::storage::masstree\l::MasstreeBorderPage::initialize\l_volatile_page" alt="" coords="671,690,878,746"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="931,201,1110,243"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="931,267,1110,308"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="1161,191,1376,232"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1179,256,1358,297"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="1172,321,1365,363"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1179,387,1358,428"/>
<area shape="rect" id="node16" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1435,292,1627,333"/>
<area shape="rect" id="node17" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1424,358,1639,385"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e" title="foedus::storage::masstree\l::MasstreePage::initialize\l_volatile_common" alt="" coords="934,534,1107,590"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1165,481,1372,523"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="1173,547,1364,588"/>
<area shape="rect" id="node25" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="1432,513,1631,555"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="1435,579,1627,620"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="1687,545,1879,587"/>
<area shape="rect" id="node28" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="1698,611,1867,652"/>
<area shape="rect" id="node29" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="1927,611,2128,652"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d2f5eb65777d851bee6809acf6fe153"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::debugout_single_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>volatile_only</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_pages</em> = <code>1024U</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A super-expensive and single-thread only debugging feature to write out gigantic human-readable texts to describe the Masstree in details. </p>
<p>Do not invoke this method for more than 100 pages, or in production use. This is for debugging. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00579">579</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__debug_8cpp_source.html#l00036">foedus::storage::masstree::MasstreeStoragePimpl::debugout_single_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                      {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).debugout_single_thread(engine, volatile_only, max_pages);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a9d2f5eb65777d851bee6809acf6fe153_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a9d2f5eb65777d851bee6809acf6fe153_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a9d2f5eb65777d851bee6809acf6fe153_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a9d2f5eb65777d851bee6809acf6fe153_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a41e664c7035f1b89121ef06678a71386" title="These are defined in masstree_storage_debug.cpp. " alt="" coords="244,226,417,282"/>
<area shape="rect" id="node3" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="483,136,655,177"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="746,267,907,308"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adb503d118f53a417bf11f9e486bd3cf7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread_follow" alt="" coords="465,779,672,835"/>
<area shape="rect" id="node50" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="483,201,655,243"/>
<area shape="rect" id="node4" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="741,5,913,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="761,71,892,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="741,136,913,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="741,201,913,243"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1288,123,1449,164"/>
<area shape="rect" id="node11" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="759,1083,894,1124"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="721,1149,932,1205"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="725,332,928,373"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="740,660,913,731"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e" title="Allocate a memory, releasing the current memory if exists. " alt="" coords="720,900,933,941"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="720,965,933,1007"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1006,1375,1193,1416"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1022,229,1177,271"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1294,189,1443,231"/>
<area shape="rect" id="node18" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1013,295,1186,336"/>
<area shape="rect" id="node19" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="998,361,1201,417"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1291,257,1446,299"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1273,328,1464,369"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1520,609,1727,651"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="1012,441,1187,483"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="1005,507,1193,563"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="1010,587,1189,643"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator\l::is_valid" alt="" coords="981,667,1217,723"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1265,405,1472,447"/>
<area shape="rect" id="node25" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1307,471,1430,512"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="1279,537,1458,593"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1276,667,1461,723"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1memory.html#ac2422aa4fe378da8a9594901762e17df" title="foedus::memory::alloc_mmap" alt="" coords="1272,907,1465,934"/>
<area shape="rect" id="node33" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1553,1272,1693,1313"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1memory.html#ae51e4a90f52316ba9dce8ff783f30d84" title="foedus::memory::alloc\l_mmap_1gb_pages" alt="" coords="1024,900,1175,941"/>
<area shape="rect" id="node35" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="1288,1024,1449,1065"/>
<area shape="rect" id="node36" href="group__ASSORTED.html#gab3d1892edaa7db4b02029567b7993f37" title="In order to run even on a non&#45;numa machine or a machine with fewer sockets, we allow specifying arbit..." alt="" coords="1024,1133,1175,1175"/>
<area shape="rect" id="node37" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="1313,1090,1424,1117"/>
<area shape="rect" id="node39" href="numa_8h.html#aba49c14c68d23dc05d046db02766b928" title="numa_preferred" alt="" coords="1044,1199,1155,1226"/>
<area shape="rect" id="node40" href="numa_8h.html#a56f33968932f6550e5e5eb4d1acc67b3" title="numa_set_preferred" alt="" coords="1031,798,1167,825"/>
<area shape="rect" id="node41" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="1032,965,1167,1007"/>
<area shape="rect" id="node32" href="namespacefoedus_1_1memory.html#af6145d9296231995c84badafb6a2a0a9" title="Returns if 1GB hugepages were enabled. " alt="" coords="1541,900,1706,941"/>
<area shape="rect" id="node38" href="numa_8h.html#a22585176d6e08c221de8377637bd72a7" title="numa_num_configured\l_nodes" alt="" coords="1293,1141,1445,1183"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="1301,959,1436,1000"/>
<area shape="rect" id="node45" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1269,1367,1469,1423"/>
<area shape="rect" id="node46" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1275,1513,1462,1555"/>
<area shape="rect" id="node48" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1293,1301,1444,1343"/>
<area shape="rect" id="node49" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1293,1448,1444,1489"/>
<area shape="rect" id="node47" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1529,1506,1717,1562"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac6b8b9c2d3b756b4559e43fbe93950a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::delete_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a record of the given key from this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key.</td></tr>
  </table>
  </dd>
</dl>
<p>When the key does not exist, it returns kErrorCodeStrKeyNotFound and also adds an appropriate record to <em>range-lock</em> read set because it is part of transactional information. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00312">312</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00691">foedus::storage::masstree::MasstreeStoragePimpl::delete_general()</a>, <a class="el" href="masstree__storage_8cpp_source.html#l00333">delete_record_normalized()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236">delete_record_normalized</a>(context, slice);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    context,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    key,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    key_length,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">return</span> pimpl.delete_general(context, location, key, key_length);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a0051986148bca838483cf3a81d3f5236"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236">foedus::storage::masstree::MasstreeStorage::delete_record_normalized</a></div><div class="ttdeci">ErrorCode delete_record_normalized(thread::Thread *context, KeySlice key)</div><div class="ttdoc">Deletes a record of the given primitive key from this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00333">masstree_storage.cpp:333</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ac6b8b9c2d3b756b4559e43fbe93950a5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ac6b8b9c2d3b756b4559e43fbe93950a5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ac6b8b9c2d3b756b4559e43fbe93950a5_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ac6b8b9c2d3b756b4559e43fbe93950a5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="492,389,665,445"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="268,990,441,1046"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="492,1295,665,1351"/>
<area shape="rect" id="node47" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="996,1853,1169,1895"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="759,5,881,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="733,429,907,485"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeDeleteLogType.html#a66a9832bd3efbb872578200928a219b9" title="foedus::storage::masstree\l::MasstreeDeleteLogType\l::calculate_log_length" alt="" coords="733,71,907,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="743,217,897,259"/>
<area shape="rect" id="node9" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="727,152,913,193"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeDeleteLogType.html#a8f2fd3207f8a7a2f67668c4cc293e24f" title="foedus::storage::masstree\l::MasstreeDeleteLogType\l::populate" alt="" coords="733,349,907,405"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="996,627,1169,683"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="996,892,1169,933"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="745,283,895,324"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="733,559,907,615"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1273,1599,1396,1640"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="991,15,1175,71"/>
<area shape="rect" id="node10" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="989,96,1176,137"/>
<area shape="rect" id="node11" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="1241,184,1428,225"/>
<area shape="rect" id="node12" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="989,213,1176,255"/>
<area shape="rect" id="node17" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="993,281,1172,323"/>
<area shape="rect" id="node18" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="1007,347,1158,388"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="993,1583,1172,1639"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="972,797,1193,839"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="1007,708,1158,749"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="1012,561,1153,603"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="1264,532,1405,573"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="489,1026,668,1082"/>
<area shape="rect" id="node44" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="499,960,658,1001"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="733,923,907,964"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="733,1369,907,1425"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="733,1449,907,1505"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="730,741,910,797"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="979,972,1186,1013"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="727,1135,913,1176"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="747,1069,893,1111"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="727,989,913,1045"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="989,1663,1177,1719"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="731,1529,909,1585"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="996,1111,1169,1181"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1007,1205,1158,1247"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1005,1467,1160,1508"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="995,1271,1170,1312"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="981,1336,1185,1377"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="978,1045,1187,1087"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="975,1401,1191,1443"/>
<area shape="rect" id="node46" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="733,1791,907,1832"/>
<area shape="rect" id="node48" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="733,1856,907,1897"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="716,1303,924,1344"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="733,1710,907,1766"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0051986148bca838483cf3a81d3f5236"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::delete_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a record of the given primitive key from this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00333">333</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00691">foedus::storage::masstree::MasstreeStoragePimpl::delete_general()</a>, <a class="el" href="endianness_8hpp_source.html#l00087">foedus::assorted::htobe&lt; uint64_t &gt;()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8cpp_source.html#l00312">delete_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    context,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    key,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  uint64_t be_key = <a class="code" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">assorted::htobe&lt;uint64_t&gt;</a>(key);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">return</span> pimpl.delete_general(context, location, &amp;be_key, <span class="keyword">sizeof</span>(be_key));</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_a99eded50e5dc85b918f799fdca46a06b"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">foedus::assorted::htobe&lt; uint64_t &gt;</a></div><div class="ttdeci">uint64_t htobe&lt; uint64_t &gt;(uint64_t host_value)</div><div class="ttdef"><b>Definition:</b> <a href="endianness_8hpp_source.html#l00087">endianness.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="229,523,403,579"/>
<area shape="rect" id="node25" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="237,837,395,879"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="227,1135,405,1191"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="486,465,609,507"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="461,778,634,834"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeDeleteLogType.html#a66a9832bd3efbb872578200928a219b9" title="foedus::storage::masstree\l::MasstreeDeleteLogType\l::calculate_log_length" alt="" coords="461,187,634,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="471,531,624,572"/>
<area shape="rect" id="node9" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="454,293,641,335"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeDeleteLogType.html#a8f2fd3207f8a7a2f67668c4cc293e24f" title="foedus::storage::masstree\l::MasstreeDeleteLogType\l::populate" alt="" coords="461,597,634,653"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="713,727,887,783"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="713,2069,887,2111"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="472,71,623,112"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="460,385,635,441"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="739,865,861,907"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="708,137,892,193"/>
<area shape="rect" id="node10" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="707,333,893,375"/>
<area shape="rect" id="node11" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="969,239,1155,280"/>
<area shape="rect" id="node12" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="707,268,893,309"/>
<area shape="rect" id="node17" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="711,5,889,47"/>
<area shape="rect" id="node18" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="725,71,875,112"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="711,647,889,703"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="689,451,911,492"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="725,581,875,623"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="729,516,871,557"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="991,455,1133,496"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="461,1069,634,1111"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="461,1706,634,1762"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="461,1427,634,1483"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="959,1025,1165,1067"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="457,1135,637,1191"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="454,1216,641,1257"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="474,1281,621,1323"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="454,1347,641,1403"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="453,938,641,994"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="459,858,636,914"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="713,1844,887,1915"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="725,1939,875,1980"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="723,1648,877,1689"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="713,2004,887,2045"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="698,1713,902,1755"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="695,1779,905,1820"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="692,1517,908,1559"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="725,1583,875,1624"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="713,1291,887,1347"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="713,1371,887,1427"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="725,1452,875,1493"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="707,1051,893,1107"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="707,1131,893,1187"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="707,1211,893,1267"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0051986148bca838483cf3a81d3f5236_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="227,13,441,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a40e22349aa6902839d3b80ac35e84790"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::drop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00069">69</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00105">foedus::storage::masstree::MasstreeStoragePimpl::drop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{ <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).drop(); }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a40e22349aa6902839d3b80ac35e84790_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a40e22349aa6902839d3b80ac35e84790_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a40e22349aa6902839d3b80ac35e84790_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a40e22349aa6902839d3b80ac35e84790_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="227,178,421,219"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a94e2b69404cabddbead1d1fb0ef1dc42" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_name" alt="" coords="475,55,649,111"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="1501,239,1636,281"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="944,287,1155,343"/>
<area shape="rect" id="node6" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1467,582,1670,623"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="469,483,655,554"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1750,435,1905,477"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2015,483,2164,525"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1741,699,1914,741"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1726,619,1929,675"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="2012,587,2167,629"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="2009,173,2170,214"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1994,406,2185,447"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1986,783,2193,825"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1476,1116,1661,1172"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="1463,43,1674,85"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="703,469,896,510"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="1482,985,1655,1026"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="1731,987,1923,1029"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1488,305,1649,346"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995" title="Returns only one page. " alt="" coords="710,945,889,986"/>
<area shape="rect" id="node32" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="713,403,886,445"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="1993,987,2185,1029"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a741d98bc9dd15581c1316ae5eaf492d5" title="foedus::memory::PagePool\lPimpl::release_one" alt="" coords="960,994,1139,1035"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1219,1026,1397,1067"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="1211,1310,1405,1351"/>
<area shape="rect" id="node29" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1219,1091,1397,1133"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3b5b895c26ed502d93e753389ce0a21b" title="foedus::memory::PagePool\lPimpl::increase_free_pool_count" alt="" coords="1203,895,1413,937"/>
<area shape="rect" id="node31" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="1222,961,1394,1002"/>
<area shape="rect" id="node27" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1473,1310,1665,1351"/>
<area shape="rect" id="node28" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1461,1376,1676,1403"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. " alt="" coords="949,367,1149,409"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="960,660,1139,716"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30" title="Return all batched pages in the given chunk to its pool. " alt="" coords="1208,119,1408,161"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="1473,174,1664,215"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="1479,109,1658,150"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="1738,109,1917,150"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::release_pages_recursive" alt="" coords="1215,764,1401,820"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="1207,660,1409,716"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663" title="An empty&#45;range page, either intermediate or border, never has any entries. " alt="" coords="1461,867,1676,909"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="1481,1050,1657,1091"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179" title="Returns the given in&#45;memory volatile page to appropriate NUMA node. " alt="" coords="1469,750,1669,791"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="1475,501,1663,557"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="1479,421,1658,477"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1724,553,1931,594"/>
<area shape="rect" id="node46" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1766,370,1889,411"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="1738,239,1917,295"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="1979,319,2200,361"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="2000,239,2179,295"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab87ac9b0763bba9d8dda06e0b7e66ab2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> foedus::storage::masstree::MasstreeStorage::estimate_records_per_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaeb8e2ed51f11bc2df537c109de8032dd">Layer</a>&#160;</td>
          <td class="paramname"><em>layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">layer</td><td>B-trie layer most border pages would be in. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>estimated byte size of each key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_length</td><td>estimated byte size of each payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Estimated number of records that fit in one border page. </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00612">612</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__id_8hpp_source.html#l00171">foedus::storage::masstree::kBorderPageDataPartSize</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00156">foedus::storage::masstree::kBorderPageSlotSize</a>.</p>
<div class="fragment"><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> aligned_payload = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> aligned_suffix = 0;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">if</span> (key_length &gt; (layer + 1U) * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    aligned_suffix = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(key_length - (layer + 1U) * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> ret = <a class="code" href="group__MASSTREE.html#ga91326b566ce7355c1ee6fd3848af01cd">kBorderPageDataPartSize</a></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    / (aligned_suffix + aligned_payload + <a class="code" href="group__MASSTREE.html#ga5f09e6bde697b5e2d6389505d17cecb1">kBorderPageSlotSize</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(ret &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga9d05e904033c0bba7113cdafb43d6610"><div class="ttname"><a href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">foedus::storage::masstree::PayloadLength</a></div><div class="ttdeci">uint16_t PayloadLength</div><div class="ttdoc">Represents a byte-length of a payload in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00092">masstree_id.hpp:92</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga5f09e6bde697b5e2d6389505d17cecb1"><div class="ttname"><a href="group__MASSTREE.html#ga5f09e6bde697b5e2d6389505d17cecb1">foedus::storage::masstree::kBorderPageSlotSize</a></div><div class="ttdeci">const uint32_t kBorderPageSlotSize</div><div class="ttdoc">Byte size of one slot in MasstreeBorderPage excluding slice information. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00156">masstree_id.hpp:156</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga91326b566ce7355c1ee6fd3848af01cd"><div class="ttname"><a href="group__MASSTREE.html#ga91326b566ce7355c1ee6fd3848af01cd">foedus::storage::masstree::kBorderPageDataPartSize</a></div><div class="ttdeci">const uint32_t kBorderPageDataPartSize</div><div class="ttdoc">Byte size of the record data part (data_) in MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00171">masstree_id.hpp:171</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ab87ac9b0763bba9d8dda06e0b7e66ab2_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ab87ac9b0763bba9d8dda06e0b7e66ab2_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ab87ac9b0763bba9d8dda06e0b7e66ab2_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ab87ac9b0763bba9d8dda06e0b7e66ab2_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="240,20,400,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a70b1c5e023fa0aac150e7b607e37727c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::fatify_first_root </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>desired_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>disable_no_record_split</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deliberately causes splits under the volatile root of first layer, or "fatify" it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">desired_count</td><td>Does nothing if the root of first layer already has this many children. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">disable_no_record_split</td><td>when this method triggers page splits, whether to always split pages in half, ignoring chance for no-record-split. usually you should just leave the default value.</td></tr>
  </table>
  </dd>
</dl>
<p>This is a special-purpose, physical-only method that does nothing logically. It increases the number of direct children in first root, which is useful when we partition based on children in first root. Fatifying beforehand shouldn't have any significant drawback, but we so far restrict the use of this method to performance benchmarks. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000014">Todo:</a></b></dt><dd>testcase for this method. TDD? shut up. </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00604">604</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__fatify_8cpp_source.html#l00054">foedus::storage::masstree::MasstreeStoragePimpl::fatify_first_root()</a>.</p>
<div class="fragment"><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                                {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  MasstreeStoragePimpl impl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">return</span> impl.fatify_first_root(context, desired_count, disable_no_record_split);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a70b1c5e023fa0aac150e7b607e37727c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a70b1c5e023fa0aac150e7b607e37727c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a70b1c5e023fa0aac150e7b607e37727c_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a70b1c5e023fa0aac150e7b607e37727c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="227,717,400,773"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a94e2b69404cabddbead1d1fb0ef1dc42" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_name" alt="" coords="448,495,621,551"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="675,195,849,266"/>
<area shape="rect" id="node39" href="classfoedus_1_1debugging_1_1StopWatch.html#a9f35df8dc3c371659227375baa247074" title="Take current time tick. " alt="" coords="695,931,829,973"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="448,625,621,681"/>
<area shape="rect" id="node48" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="695,997,829,1038"/>
<area shape="rect" id="node50" href="classfoedus_1_1debugging_1_1StopWatch.html#a7f1f05f4dd494dd57c3ecafb5d9131fb" title="foedus::debugging::\lStopWatch::elapsed_us" alt="" coords="681,1062,843,1103"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="912,491,1085,547"/>
<area shape="rect" id="node36" href="namespacefoedus_1_1storage_1_1masstree.html#aa275c1ef79668cf8c173ee51f0753dc3" title="foedus::storage::masstree\l::count_children_approximate" alt="" coords="903,137,1095,178"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="1164,474,1337,545"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1175,817,1326,858"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="2654,547,2809,589"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="1163,327,1338,369"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="1149,634,1353,675"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="1146,882,1355,923"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="1164,210,1337,251"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="1143,569,1359,610"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="1164,393,1337,449"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="1175,751,1326,793"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1411,887,1595,929"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="2183,995,2345,1037"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2657,963,2806,1005"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1647,1091,1857,1133"/>
<area shape="rect" id="node12" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="2172,719,2356,775"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="2183,917,2345,958"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="2423,647,2578,689"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1917,858,2103,899"/>
<area shape="rect" id="node18" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="2163,799,2365,841"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1660,1026,1844,1067"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1905,1127,2115,1169"/>
<area shape="rect" id="node21" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1683,858,1821,899"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="2636,282,2827,323"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="1407,491,1599,533"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="1656,327,1848,369"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="1411,557,1595,598"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54" title="foedus::xct::Xct::get\l_sysxct_workspace" alt="" coords="1683,589,1821,630"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761" title="foedus::thread::ThreadPimpl\l::cll_get_max_locked_id" alt="" coords="1660,393,1844,434"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="1660,458,1844,499"/>
<area shape="rect" id="node35" href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618" title="Runs a system transaction nested in a user transaction. " alt="" coords="1673,523,1831,565"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1147,13,1354,54"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1158,79,1343,135"/>
<area shape="rect" id="node40" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="931,931,1066,973"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="674,633,850,674"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="906,5,1091,61"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="669,800,855,856"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="912,800,1085,856"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="2413,181,2588,222"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1DualPagePointer.html#aedde91e76a6e345f6d19539942f13a43" title="foedus::storage::DualPage\lPointer::is_both_null" alt="" coords="1923,1259,2097,1301"/>
<area shape="rect" id="node49" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="918,997,1079,1038"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a94bc2a1ae36c0a1ce1de99715072c59d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeMetadata.html">MasstreeMetadata</a> * foedus::storage::masstree::MasstreeStorage::get_masstree_metadata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00059">59</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;::control_block_</a>.</p>

<p>Referenced by <a class="el" href="masstree__composer__impl_8cpp_source.html#l02622">foedus::storage::masstree::MasstreeComposer::drop_root_volatile()</a>, and <a class="el" href="masstree__composer__impl_8cpp_source.html#l02558">foedus::storage::masstree::MasstreeComposer::drop_volatiles()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                                                      {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">MasstreeStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a94bc2a1ae36c0a1ce1de99715072c59d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a94bc2a1ae36c0a1ce1de99715072c59d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a94bc2a1ae36c0a1ce1de99715072c59d_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a94bc2a1ae36c0a1ce1de99715072c59d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#aa0cb9d19afa32166a7c128697f291ea2" title="foedus::storage::masstree\l::MasstreeComposer::drop\l_root_volatile" alt="" coords="227,5,403,61"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#ad25781d742feeced13ed8b047b485a3e" title="drop_volatiles and related methods " alt="" coords="227,85,403,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Composer.html#af6d90399f471e1461fd4e59b0f3b923f" title="This is additionally called when no partitions observed any new modifications. " alt="" coords="680,15,859,57"/>
<area shape="rect" id="node4" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a5d474e7a6b4de127153103f2295cb0fa" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="909,53,1136,94"/>
<area shape="rect" id="node5" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1184,45,1395,101"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1443,19,1653,61"/>
<area shape="rect" id="node8" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1471,85,1625,126"/>
<area shape="rect" id="node7" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1701,19,1896,61"/>
<area shape="rect" id="node9" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1701,85,1896,126"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1Composer.html#a0995635b97031b208127004382947acd" title="Drops volatile pages that have not been modified since the snapshotted epoch. " alt="" coords="451,90,629,131"/>
<area shape="rect" id="node12" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a26c51902174b692c91aedd15218f01b7" title="subroutine invoked by one thread for one node. " alt="" coords="677,81,861,137"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acdf38eea62d1432e3715a661d0790caf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::get_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> *&#160;</td>
          <td class="paramname"><em>payload_capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves an entire record of the given key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">payload</td><td>Buffer to receive the payload of the record. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">payload_capacity</td><td>[In] Byte size of the payload buffer, [Out] length of the payload. This is set whether the payload capacity was too small or not. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read_only</td><td>Whether this read will not be followed by writes. When MOCC triggers pessimistic lock, this guides us to take either read- or write-lock.</td></tr>
  </table>
  </dd>
</dl>
<p>When payload_capacity is smaller than the actual payload, this method returns kErrorCodeStrTooSmallPayloadBuffer and payload_capacity is set to be the required length.</p>
<p>When the key is not found (kErrorCodeStrKeyNotFound), we also add an appropriate record to <em>range-lock</em> read set because it is part of a transactional information. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00079">79</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage_8cpp_source.html#l00169">get_record_normalized()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00599">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                  {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0">get_record_normalized</a>(context, slice, payload, payload_capacity, read_only);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    context,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    key,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    key_length,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    !read_only,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">return</span> pimpl.retrieve_general(</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    context,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    location,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    payload,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    payload_capacity);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a4f2492b6a04c2db18cdf2a4a2d7fecc0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0">foedus::storage::masstree::MasstreeStorage::get_record_normalized</a></div><div class="ttdeci">ErrorCode get_record_normalized(thread::Thread *context, KeySlice key, void *payload, PayloadLength *payload_capacity, bool read_only)</div><div class="ttdoc">Retrieves an entire record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00169">masstree_storage.cpp:169</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_acdf38eea62d1432e3715a661d0790caf_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_acdf38eea62d1432e3715a661d0790caf_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_acdf38eea62d1432e3715a661d0790caf_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_acdf38eea62d1432e3715a661d0790caf_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="252,821,425,877"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="476,1361,649,1417"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="476,701,649,757"/>
<area shape="rect" id="node47" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1242,35,1415,77"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="473,821,652,877"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="717,782,891,823"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="729,847,879,889"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="717,1511,891,1567"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="980,1921,1153,1962"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="717,1059,891,1115"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1225,883,1432,925"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="714,299,894,355"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="711,913,897,954"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="731,555,877,597"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="711,621,897,677"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="973,160,1161,216"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="715,701,893,757"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="980,1761,1153,1831"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1253,1439,1404,1481"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="989,1367,1144,1409"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="979,1695,1154,1737"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="965,1433,1169,1474"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="962,1855,1171,1897"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="959,1498,1175,1539"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="980,1615,1153,1671"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="991,957,1142,998"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1242,1272,1415,1328"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="980,1023,1153,1079"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="991,1103,1142,1145"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="974,876,1159,932"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="974,1169,1159,1225"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="974,584,1159,640"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="974,664,1159,720"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="980,504,1153,560"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="967,1250,1167,1291"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="978,745,1155,786"/>
<area shape="rect" id="node29" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="980,810,1153,851"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="977,307,1156,363"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="961,241,1173,282"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="743,2018,865,2059"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="717,2084,891,2140"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="715,2164,893,2220"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="715,979,893,1035"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="956,438,1177,479"/>
<area shape="rect" id="node45" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="717,111,891,153"/>
<area shape="rect" id="node48" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="717,46,891,87"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="700,379,908,421"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="717,475,891,531"/>
<area shape="rect" id="node46" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="965,94,1168,135"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f2492b6a04c2db18cdf2a4a2d7fecc0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::get_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> *&#160;</td>
          <td class="paramname"><em>payload_capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves an entire record of the given primitive key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">payload</td><td>Buffer to receive the payload of the record. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">payload_capacity</td><td>[In] Byte size of the payload buffer, [Out] length of the payload. This is set whether the payload capacity was too small or not. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read_only</td><td>Whether this read will not be followed by writes. When MOCC triggers pessimistic lock, this guides us to take either read- or write-lock. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00169">169</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00599">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_general()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8cpp_source.html#l00079">get_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                  {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    context,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    key,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    !read_only,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">return</span> pimpl.retrieve_general(</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    context,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    location,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    payload,</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    payload_capacity);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="227,553,405,609"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="460,2322,633,2378"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="460,356,633,397"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="471,421,622,463"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="460,487,633,543"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="709,364,883,405"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="460,891,633,947"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1221,1716,1428,1757"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="457,1482,637,1538"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="453,144,640,185"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="473,209,620,251"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="453,275,640,331"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="702,1669,890,1725"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="458,1881,635,1937"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="709,217,883,288"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="987,503,1138,544"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="719,495,873,536"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="709,5,883,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="694,560,898,601"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="691,71,901,112"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="688,625,904,667"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="709,137,883,193"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="721,429,871,471"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="976,1225,1149,1281"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="709,1129,883,1185"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="721,1209,871,1251"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="970,1370,1155,1426"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="703,771,889,827"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="703,851,889,907"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="703,931,889,987"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="709,691,883,747"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="696,1275,896,1316"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="707,1012,885,1053"/>
<area shape="rect" id="node28" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="976,1581,1149,1623"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="707,1442,885,1498"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="690,1603,902,1644"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="693,1522,899,1578"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="959,1716,1166,1757"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1001,2125,1124,2167"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="729,2027,863,2068"/>
<area shape="rect" id="node41" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="1001,1935,1124,1976"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="1001,2048,1124,2089"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="707,1749,885,1805"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="735,1829,857,1871"/>
<area shape="rect" id="node46" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="735,2328,857,2369"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="709,2194,883,2250"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="707,1946,885,2002"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="707,2394,885,2450"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="952,2401,1173,2443"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a4f2492b6a04c2db18cdf2a4a2d7fecc0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="227,13,425,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a01a2996a1ee370611b72c88f33fe2753"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::get_record_part </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a part of the given key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">payload</td><td>Buffer to receive the payload of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_offset</td><td>We copy from this byte position of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>How many bytes we copy. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read_only</td><td>Whether this read will not be followed by writes. When MOCC triggers pessimistic lock, this guides us to take either read- or write-lock. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>payload_offset + payload_count must be within the record's actual payload size (returns kErrorCodeStrTooShortPayload if not) </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00107">107</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage_8cpp_source.html#l00189">get_record_part_normalized()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00625">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_part_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                  {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35">get_record_part_normalized</a>(</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      context, slice, payload, payload_offset, payload_count, read_only);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    context,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    key,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    key_length,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    !read_only,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> pimpl.retrieve_part_general(</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    context,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    location,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    payload,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    payload_count);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_adda60c43db1237644270e90f2a255d35"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35">foedus::storage::masstree::MasstreeStorage::get_record_part_normalized</a></div><div class="ttdeci">ErrorCode get_record_part_normalized(thread::Thread *context, KeySlice key, void *payload, PayloadLength payload_offset, PayloadLength payload_count, bool read_only)</div><div class="ttdoc">Retrieves a part of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00189">masstree_storage.cpp:189</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a01a2996a1ee370611b72c88f33fe2753_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a01a2996a1ee370611b72c88f33fe2753_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a01a2996a1ee370611b72c88f33fe2753_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a01a2996a1ee370611b72c88f33fe2753_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="227,821,400,877"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="451,1361,624,1417"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="451,701,624,757"/>
<area shape="rect" id="node47" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1217,35,1390,77"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="448,821,627,877"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="692,782,865,823"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="703,847,854,889"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="692,1511,865,1567"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="955,1921,1128,1962"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="692,1059,865,1115"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1200,883,1407,925"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="689,299,869,355"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="685,913,872,954"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="705,555,852,597"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="685,621,872,677"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="947,160,1135,216"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="690,701,867,757"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="955,1761,1128,1831"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1228,1439,1379,1481"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="964,1367,1119,1409"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="954,1695,1129,1737"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="939,1433,1143,1474"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="937,1855,1146,1897"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="933,1498,1149,1539"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="955,1615,1128,1671"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="966,957,1117,998"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1217,1272,1390,1328"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="955,1023,1128,1079"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="966,1103,1117,1145"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="949,876,1134,932"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="949,1169,1134,1225"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="949,584,1134,640"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="949,664,1134,720"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="955,504,1128,560"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="941,1250,1141,1291"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="953,745,1130,786"/>
<area shape="rect" id="node29" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="955,810,1128,851"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="952,307,1131,363"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="935,241,1147,282"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="717,2018,840,2059"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="692,2084,865,2140"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="689,2164,868,2220"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="689,979,868,1035"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="931,438,1152,479"/>
<area shape="rect" id="node45" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="692,111,865,153"/>
<area shape="rect" id="node48" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="692,46,865,87"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="675,379,883,421"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="692,475,865,531"/>
<area shape="rect" id="node46" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="940,94,1143,135"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adda60c43db1237644270e90f2a255d35"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::get_record_part_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a part of the given primitive key in this Masstree. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. ">get_record_part()</a> </dd>
<dd>
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. ">get_record_normalized()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00189">189</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00625">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_part_general()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8cpp_source.html#l00107">get_record_part()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                  {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    context,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    key,</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    !read_only,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">return</span> pimpl.retrieve_part_general(</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    context,</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    location,</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    payload,</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    payload_count);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="227,553,405,609"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="460,2322,633,2378"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="460,356,633,397"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="471,421,622,463"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="460,487,633,543"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="709,364,883,405"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="460,891,633,947"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1221,1716,1428,1757"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="457,1482,637,1538"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="453,144,640,185"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="473,209,620,251"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="453,275,640,331"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="702,1669,890,1725"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="458,1881,635,1937"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="709,217,883,288"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="987,503,1138,544"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="719,495,873,536"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="709,5,883,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="694,560,898,601"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="691,71,901,112"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="688,625,904,667"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="709,137,883,193"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="721,429,871,471"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="976,1225,1149,1281"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="709,1129,883,1185"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="721,1209,871,1251"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="970,1370,1155,1426"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="703,771,889,827"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="703,851,889,907"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="703,931,889,987"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="709,691,883,747"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="696,1275,896,1316"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="707,1012,885,1053"/>
<area shape="rect" id="node28" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="976,1581,1149,1623"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="707,1442,885,1498"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="690,1603,902,1644"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="693,1522,899,1578"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="959,1716,1166,1757"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1001,2125,1124,2167"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="729,2027,863,2068"/>
<area shape="rect" id="node41" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="1001,1935,1124,1976"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="1001,2048,1124,2089"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="707,1749,885,1805"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="735,1829,857,1871"/>
<area shape="rect" id="node46" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="735,2328,857,2369"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="709,2194,883,2250"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="707,1946,885,2002"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="707,2394,885,2450"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="952,2401,1173,2443"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adda60c43db1237644270e90f2a255d35_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="227,5,400,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3be736c76c38dd23444cbd78947a63fd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PAYLOAD &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::get_record_primitive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PAYLOAD *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a part of the given key in this Masstree as a primitive value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">payload</td><td>Receive the payload of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_offset</td><td>We copy from this byte position of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">read_only</td><td>Whether this read will not be followed by writes. When MOCC triggers pessimistic lock, this guides us to take either read- or write-lock. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>payload_offset + sizeof(PAYLOAD) must be within the record's actual payload size (returns kErrorCodeStrTooShortPayload if not) </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">PAYLOAD</td><td>primitive type of the payload. all integers and floats are allowed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00139">139</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00625">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_part_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                  {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">return</span> get_record_primitive_normalized&lt;PAYLOAD&gt;(</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      context, slice, payload, payload_offset, read_only);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    context,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    key,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    key_length,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    !read_only,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">return</span> pimpl.retrieve_part_general(</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    context,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    location,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    payload,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">sizeof</span>(PAYLOAD));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3be736c76c38dd23444cbd78947a63fd_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3be736c76c38dd23444cbd78947a63fd_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3be736c76c38dd23444cbd78947a63fd_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3be736c76c38dd23444cbd78947a63fd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="227,937,400,993"/>
<area shape="rect" id="node18" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="990,2222,1163,2263"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="227,152,400,208"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="465,1054,639,1095"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="477,1119,627,1161"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="465,1725,639,1781"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="728,2098,901,2139"/>
<area shape="rect" id="node16" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="465,2163,639,2205"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="465,1185,639,1241"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="459,777,645,818"/>
<area shape="rect" id="node33" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="465,842,639,883"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="448,469,656,510"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="721,301,909,357"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="479,907,625,949"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="459,973,645,1029"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="465,696,639,752"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="463,316,641,372"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="728,1857,901,1927"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1001,978,1152,1019"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="737,1543,892,1585"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="727,2033,902,2074"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="713,1674,917,1715"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="710,1791,919,1833"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="707,1609,923,1650"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="728,1952,901,2008"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="739,1054,890,1095"/>
<area shape="rect" id="node17" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="713,2163,916,2205"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="990,728,1163,784"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="728,973,901,1029"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="739,1119,890,1161"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="984,1332,1169,1388"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="722,1185,907,1241"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="722,1265,907,1321"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="722,1345,907,1401"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="728,827,901,883"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="715,710,915,751"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="726,1426,903,1467"/>
<area shape="rect" id="node31" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="728,907,901,949"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1228,601,1435,642"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="704,235,925,277"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="725,381,904,437"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="709,542,921,583"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="711,461,918,517"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="973,349,1180,390"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1015,243,1138,285"/>
<area shape="rect" id="node47" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="491,86,613,127"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="465,5,639,61"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="463,152,641,208"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="463,232,641,288"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae4bf2da94babc15bf43bd50b17ffb562"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PAYLOAD &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::get_record_primitive_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PAYLOAD *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>read_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a part of the given primitive key in this Masstree as a primitive value. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. ">get_record_normalized()</a> </dd>
<dd>
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. ">get_record_primitive()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00212">212</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00625">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_part_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                  {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    context,</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    key,</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    !read_only,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> pimpl.retrieve_part_general(</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    context,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    location,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    payload,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">sizeof</span>(PAYLOAD));</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae4bf2da94babc15bf43bd50b17ffb562_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae4bf2da94babc15bf43bd50b17ffb562_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae4bf2da94babc15bf43bd50b17ffb562_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae4bf2da94babc15bf43bd50b17ffb562_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="243,553,421,609"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="476,2322,649,2378"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="476,356,649,397"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="487,421,638,463"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="476,487,649,543"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="725,364,899,405"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="476,891,649,947"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1237,1716,1444,1757"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="473,1482,653,1538"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="469,144,656,185"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="489,209,636,251"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="469,275,656,331"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="718,1669,906,1725"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="474,1881,651,1937"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="725,217,899,288"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1003,503,1154,544"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="735,495,889,536"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="725,5,899,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="710,560,914,601"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="707,71,917,112"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="704,625,920,667"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="725,137,899,193"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="737,429,887,471"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="992,1225,1165,1281"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="725,1129,899,1185"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="737,1209,887,1251"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="986,1370,1171,1426"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="719,771,905,827"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="719,851,905,907"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="719,931,905,987"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="725,691,899,747"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="712,1275,912,1316"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="723,1012,901,1053"/>
<area shape="rect" id="node28" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="992,1581,1165,1623"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="723,1442,901,1498"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="706,1603,918,1644"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="709,1522,915,1578"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="975,1716,1182,1757"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1017,2125,1140,2167"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="745,2027,879,2068"/>
<area shape="rect" id="node41" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="1017,1935,1140,1976"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="1017,2048,1140,2089"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="723,1749,901,1805"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="751,1829,873,1871"/>
<area shape="rect" id="node46" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="751,2328,873,2369"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="725,2194,899,2250"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="723,1946,901,2002"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="723,2394,901,2450"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="968,2401,1189,2443"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad23c8139c379dac6b0a1c07a52debd62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::hcc_reset_all_temperature_stat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets all volatile pages' temperature stat to be zero in this storage. </p>
<p>Used only in HCC-branch. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00586">586</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__debug_8cpp_source.html#l00151">foedus::storage::masstree::MasstreeStoragePimpl::hcc_reset_all_temperature_stat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                                                           {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).hcc_reset_all_temperature_stat();</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad23c8139c379dac6b0a1c07a52debd62_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad23c8139c379dac6b0a1c07a52debd62_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad23c8139c379dac6b0a1c07a52debd62_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad23c8139c379dac6b0a1c07a52debd62_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0fe6a82d90f30d4b9724009ba2fc40ae" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="236,85,448,141"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="751,5,913,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a89828c1df02cadd8a38824f24e2adef9" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_follow" alt="" coords="496,129,679,200"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1284,17,1445,59"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="765,71,899,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="727,137,937,193"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="731,217,933,259"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="741,429,923,500"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1026,115,1181,156"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1290,104,1439,145"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1017,180,1190,221"/>
<area shape="rect" id="node14" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1002,246,1205,302"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1287,205,1442,247"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1269,299,1460,340"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="2259,501,2465,543"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="1016,327,1191,368"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="1017,444,1190,485"/>
<area shape="rect" id="node19" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="1004,509,1203,551"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="1009,575,1197,631"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="1014,655,1193,711"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator\l::is_valid" alt="" coords="985,799,1221,855"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="2004,501,2211,543"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1303,583,1426,624"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="1275,655,1454,711"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="1508,581,1729,623"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="1529,655,1708,711"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1777,494,1956,550"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="1777,574,1956,630"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1780,734,1953,790"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1777,654,1956,710"/>
<area shape="rect" id="node30" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="2027,693,2187,719"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="2021,744,2194,785"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1272,865,1457,921"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0fc21940320e38fa61ebfc88af210fde"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PAYLOAD &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::increment_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PAYLOAD *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This one further optimizes overwrite methods for the frequent use case of incrementing some data in primitive type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">value</td><td>(in) addendum, (out) value after addition. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_offset</td><td>We overwrite to this byte position of the record. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>payload_offset + sizeof(PAYLOAD) must be within the record's actual payload size (returns kErrorCodeStrTooShortPayload if not) </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">PAYLOAD</td><td>primitive type of the payload. all integers and floats are allowed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00523">523</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00806">foedus::storage::masstree::MasstreeStoragePimpl::increment_general()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> increment_record_normalized&lt;PAYLOAD&gt;(context, slice, value, payload_offset);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    context,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    key,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    key_length,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">return</span> pimpl.increment_general&lt;PAYLOAD&gt;(</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    context,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    location,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    key,</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    key_length,</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    value,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    payload_offset);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0fc21940320e38fa61ebfc88af210fde_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0fc21940320e38fa61ebfc88af210fde_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0fc21940320e38fa61ebfc88af210fde_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0fc21940320e38fa61ebfc88af210fde_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="291,501,464,557"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="291,1329,464,1385"/>
<area shape="rect" id="node41" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="792,1892,965,1933"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="555,35,677,76"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="529,829,703,885"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="527,341,705,397"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="527,421,705,477"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="524,261,708,317"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="539,581,693,623"/>
<area shape="rect" id="node14" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="523,195,709,236"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="523,647,709,703"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="792,749,965,805"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="792,1275,965,1316"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="541,100,691,141"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="529,501,703,557"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1079,993,1202,1035"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1037,844,1244,885"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="768,617,989,659"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="789,421,968,477"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="799,319,959,346"/>
<area shape="rect" id="node15" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="785,253,972,295"/>
<area shape="rect" id="node16" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="1047,165,1234,207"/>
<area shape="rect" id="node17" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="785,136,972,177"/>
<area shape="rect" id="node22" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="789,71,968,112"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="803,5,954,47"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="789,837,968,893"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="803,683,954,724"/>
<area shape="rect" id="node27" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="808,552,949,593"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="1070,523,1211,564"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="529,1237,703,1279"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="529,1630,703,1686"/>
<area shape="rect" id="node40" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="529,1815,703,1856"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="529,1710,703,1766"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="523,1303,709,1344"/>
<area shape="rect" id="node44" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="529,1368,703,1409"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="512,989,720,1031"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="785,1018,973,1074"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="543,1433,689,1475"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="523,1499,709,1555"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="529,1106,703,1162"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="527,909,705,965"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="792,1536,965,1607"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="803,1631,954,1672"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="801,1761,956,1803"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="791,1405,966,1447"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="777,1827,981,1868"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="774,1471,983,1512"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="771,1696,987,1737"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="803,1340,954,1381"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adba3fe323a9ea3e8f8e006459ef7e442"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PAYLOAD &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::increment_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PAYLOAD *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>For primitive key. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p...">increment_record()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00553">553</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="endianness_8hpp_source.html#l00087">foedus::assorted::htobe&lt; uint64_t &gt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00806">foedus::storage::masstree::MasstreeStoragePimpl::increment_general()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    context,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    key,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  uint64_t be_key = <a class="code" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">assorted::htobe&lt;uint64_t&gt;</a>(key);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">return</span> pimpl.increment_general&lt;PAYLOAD&gt;(</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    context,</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    location,</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    &amp;be_key,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keyword">sizeof</span>(be_key),</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    value,</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    payload_offset);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_a99eded50e5dc85b918f799fdca46a06b"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">foedus::assorted::htobe&lt; uint64_t &gt;</a></div><div class="ttdeci">uint64_t htobe&lt; uint64_t &gt;(uint64_t host_value)</div><div class="ttdef"><b>Definition:</b> <a href="endianness_8hpp_source.html#l00087">endianness.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adba3fe323a9ea3e8f8e006459ef7e442_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adba3fe323a9ea3e8f8e006459ef7e442_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adba3fe323a9ea3e8f8e006459ef7e442_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_adba3fe323a9ea3e8f8e006459ef7e442_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="258,391,417,433"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="251,457,424,513"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="248,1207,427,1263"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="507,27,630,69"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="482,799,655,855"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="479,457,658,513"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="479,311,658,367"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="477,93,661,149"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="492,391,645,433"/>
<area shape="rect" id="node16" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="475,174,662,215"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="476,537,661,593"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="735,831,908,887"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="735,1029,908,1070"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="493,245,644,286"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="481,617,656,673"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="760,911,883,953"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="980,865,1187,906"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1235,1333,1441,1374"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="711,502,932,543"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="732,371,911,427"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="741,5,901,32"/>
<area shape="rect" id="node17" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="728,174,915,215"/>
<area shape="rect" id="node18" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="990,86,1177,127"/>
<area shape="rect" id="node19" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="728,57,915,98"/>
<area shape="rect" id="node24" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="732,239,911,281"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="746,305,897,346"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="732,751,911,807"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="746,685,897,726"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="751,567,892,609"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="1013,597,1154,638"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="482,1090,655,1131"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="482,1207,655,1263"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="482,1579,655,1635"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="479,1287,659,1343"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="475,1367,662,1409"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="495,1433,642,1474"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="475,1499,662,1555"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="475,959,663,1015"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="480,879,657,935"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="735,1225,908,1295"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="746,1319,897,1361"/>
<area shape="rect" id="node36" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="744,1581,899,1622"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="734,1094,909,1135"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="719,1385,923,1426"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="717,1159,926,1201"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="713,1450,929,1491"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="746,1515,897,1557"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="735,1647,908,1703"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="735,1727,908,1783"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ef357bd4f0db9d2faa93a0bcd70c905"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::insert_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a new record of the given key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>Value to insert. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>Length of payload.</td></tr>
  </table>
  </dd>
</dl>
<p>If the key already exists, it returns kErrorCodeStrKeyAlreadyExists and also adds the found record to read set because it is part of transactional information. </p>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00252">252</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8hpp_source.html#l00284">insert_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                                               {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a8ef357bd4f0db9d2faa93a0bcd70c905">insert_record</a>(context, key, key_length, payload, payload_count, payload_count);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a8ef357bd4f0db9d2faa93a0bcd70c905"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a8ef357bd4f0db9d2faa93a0bcd70c905">foedus::storage::masstree::MasstreeStorage::insert_record</a></div><div class="ttdeci">ErrorCode insert_record(thread::Thread *context, const void *key, KeyLength key_length, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00252">masstree_storage.hpp:252</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a8ef357bd4f0db9d2faa93a0bcd70c905_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a8ef357bd4f0db9d2faa93a0bcd70c905_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a8ef357bd4f0db9d2faa93a0bcd70c905_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a8ef357bd4f0db9d2faa93a0bcd70c905_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a674d7d08a3be524ff158d00e817b02b5" title="Inserts a new record without payload of the given key in this Masstree. " alt="" coords="265,5,477,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a86b4db183c677a364c7ddf71100699b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::insert_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>physical_payload_hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>With this method, you can also specify <em>physical_payload_hint</em>, the physical size of the record's payload part. </p>
<p>If you will later expand the payload of this record, giving a larger value will avoid record migration. Default value (and minimal value) is same as the initial payload_count. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00247">247</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage_8cpp_source.html#l00233">foedus::storage::masstree::adjust_payload_hint()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00661">foedus::storage::masstree::MasstreeStoragePimpl::insert_general()</a>, <a class="el" href="masstree__storage_8hpp_source.html#l00298">insert_record_normalized()</a>, <a class="el" href="masstree__record__location_8hpp_source.html#l00056">foedus::storage::masstree::RecordLocation::is_found()</a>, <a class="el" href="error__code_8hpp_source.html#l00174">foedus::kErrorCodeStrTooLongPayload</a>, <a class="el" href="masstree__id_8hpp_source.html#l00098">foedus::storage::masstree::kMaxPayloadLength</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00412">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                       {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">insert_record_normalized</a>(context, slice, payload, payload_count, physical_payload_hint);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(payload_count &gt; <a class="code" href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">kMaxPayloadLength</a>)) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">kErrorCodeStrTooLongPayload</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  physical_payload_hint = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">adjust_payload_hint</a>(payload_count, physical_payload_hint);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.reserve_record(</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    context,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    key,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    key_length,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    payload_count,</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    physical_payload_hint,</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(location.is_found());  <span class="comment">// contract of reserve_record</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">return</span> pimpl.insert_general(</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    context,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    location,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    key,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    key_length,</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    payload,</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    payload_count);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">foedus::kErrorCodeStrTooLongPayload</a></div><div class="ttdoc">0x0808 : "STORAGE: Payload of the record is too long" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00174">error_code.hpp:174</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a032fcdc65647bdea76b8a49014211100"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">foedus::storage::masstree::adjust_payload_hint</a></div><div class="ttdeci">PayloadLength adjust_payload_hint(PayloadLength payload_count, PayloadLength physical_payload_hint)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00233">masstree_storage.cpp:233</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga453ffcac369fa68b5eb5d489e6cdca4f"><div class="ttname"><a href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">foedus::storage::masstree::kMaxPayloadLength</a></div><div class="ttdeci">const PayloadLength kMaxPayloadLength</div><div class="ttdoc">Max length of a payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00098">masstree_id.hpp:98</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a61d3b4c9a894070e8937bede0eacf749"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">foedus::storage::masstree::MasstreeStorage::insert_record_normalized</a></div><div class="ttdeci">ErrorCode insert_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00298">masstree_storage.hpp:298</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a86b4db183c677a364c7ddf71100699b9_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a86b4db183c677a364c7ddf71100699b9_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a86b4db183c677a364c7ddf71100699b9_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a86b4db183c677a364c7ddf71100699b9_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100" title="foedus::storage::masstree\l::adjust_payload_hint" alt="" coords="267,159,440,200"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="267,429,440,485"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749" title="Inserts a new record of the given primitive key in this Masstree. " alt="" coords="267,877,440,933"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a826c22a43d97758b61e6b0c230841224" title="foedus::storage::masstree\l::RecordLocation::is_found" alt="" coords="265,957,441,999"/>
<area shape="rect" id="node33" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="780,1807,953,1848"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="267,1386,440,1442"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="787,19,947,46"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="537,472,660,513"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="512,814,685,870"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="509,734,688,790"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="507,49,691,105"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="522,537,675,579"/>
<area shape="rect" id="node14" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="505,275,692,316"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeInsertLogType.html#a4ea983f4436e0519b7d2aaa7f1ef67a0" title="foedus::storage::masstree\l::MasstreeInsertLogType\l::populate" alt="" coords="512,129,685,185"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="780,522,953,578"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="780,1539,953,1580"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="523,209,674,251"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="511,391,686,447"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="805,1200,928,1241"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076" title="This might be affected by concurrent threads. " alt="" coords="775,734,958,790"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1025,1127,1232,1168"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1280,1301,1487,1343"/>
<area shape="rect" id="node15" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="773,275,960,316"/>
<area shape="rect" id="node16" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="1035,279,1222,320"/>
<area shape="rect" id="node17" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="773,340,960,381"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="1042,1724,1215,1765"/>
<area shape="rect" id="node23" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="777,157,956,199"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="791,92,942,133"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="777,1119,956,1175"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="756,603,977,644"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="791,668,942,709"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="796,405,937,447"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="1058,435,1199,476"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="512,1665,685,1707"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="512,1534,685,1590"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="759,1893,975,1935"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="791,1607,942,1648"/>
<area shape="rect" id="node39" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="512,1783,685,1824"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="512,1950,685,2006"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="767,2037,967,2079"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602" title="foedus::storage::masstree\l::MasstreePage::within\l_foster_minor" alt="" coords="512,2030,685,2086"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="523,996,674,1037"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5" title="foedus::storage::masstree\l::MasstreePage::get_foster_minor" alt="" coords="489,1061,708,1103"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607" title="foedus::storage::masstree\l::MasstreePage::get_foster_major" alt="" coords="489,1127,708,1168"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="509,603,689,659"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="512,1353,685,1409"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="805,1360,928,1401"/>
<area shape="rect" id="node49" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="510,1193,687,1249"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a950d071732ec8bd3251c03181d42692f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_meta" alt="" coords="512,1273,685,1329"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a674d7d08a3be524ff158d00e817b02b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::insert_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a new record without payload of the given key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key.</td></tr>
  </table>
  </dd>
</dl>
<p>If the key already exists, it returns kErrorCodeStrKeyAlreadyExists and also adds the found record to read set because it is part of transactional information. </p>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00284">284</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>References <a class="el" href="cxx11_8hpp_source.html#l00132">CXX11_NULLPTR</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00252">insert_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                        {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a8ef357bd4f0db9d2faa93a0bcd70c905">insert_record</a>(context, key, key_length, <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>, 0U);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a8ef357bd4f0db9d2faa93a0bcd70c905"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a8ef357bd4f0db9d2faa93a0bcd70c905">foedus::storage::masstree::MasstreeStorage::insert_record</a></div><div class="ttdeci">ErrorCode insert_record(thread::Thread *context, const void *key, KeyLength key_length, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00252">masstree_storage.hpp:252</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a674d7d08a3be524ff158d00e817b02b5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a674d7d08a3be524ff158d00e817b02b5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a674d7d08a3be524ff158d00e817b02b5_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a674d7d08a3be524ff158d00e817b02b5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a8ef357bd4f0db9d2faa93a0bcd70c905" title="Inserts a new record of the given key in this Masstree. " alt="" coords="265,5,477,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a61d3b4c9a894070e8937bede0eacf749"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::insert_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a new record of the given primitive key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>Value to insert. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>Length of payload. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00298">298</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8cpp_source.html#l00247">insert_record()</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00321">insert_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                               {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">insert_record_normalized</a>(context, key, payload, payload_count, payload_count);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a61d3b4c9a894070e8937bede0eacf749"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">foedus::storage::masstree::MasstreeStorage::insert_record_normalized</a></div><div class="ttdeci">ErrorCode insert_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00298">masstree_storage.hpp:298</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a61d3b4c9a894070e8937bede0eacf749_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a61d3b4c9a894070e8937bede0eacf749_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a61d3b4c9a894070e8937bede0eacf749_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a61d3b4c9a894070e8937bede0eacf749_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="227,5,439,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aa428e27cf2673484b040048631b9f8fd" title="Inserts a new record without payload of the given primitive key in this Masstree. ..." alt="" coords="246,71,419,127"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6d7f9dea9af7356face9815ac10c37b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::insert_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>physical_payload_hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>With this method, you can also specify <em>physical_payload_hint</em>. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00283">283</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage_8cpp_source.html#l00233">foedus::storage::masstree::adjust_payload_hint()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="endianness_8hpp_source.html#l00087">foedus::assorted::htobe&lt; uint64_t &gt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00661">foedus::storage::masstree::MasstreeStoragePimpl::insert_general()</a>, <a class="el" href="masstree__record__location_8hpp_source.html#l00056">foedus::storage::masstree::RecordLocation::is_found()</a>, <a class="el" href="error__code_8hpp_source.html#l00174">foedus::kErrorCodeStrTooLongPayload</a>, <a class="el" href="masstree__id_8hpp_source.html#l00098">foedus::storage::masstree::kMaxPayloadLength</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00515">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record_normalized()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                       {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(payload_count &gt; <a class="code" href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">kMaxPayloadLength</a>)) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">kErrorCodeStrTooLongPayload</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  physical_payload_hint = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">adjust_payload_hint</a>(payload_count, physical_payload_hint);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.reserve_record_normalized(</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    context,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    key,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    payload_count,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    physical_payload_hint,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(location.is_found());  <span class="comment">// contract of reserve_record</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  uint64_t be_key = <a class="code" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">assorted::htobe&lt;uint64_t&gt;</a>(key);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordflow">return</span> pimpl.insert_general(</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    context,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    location,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    &amp;be_key,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">sizeof</span>(be_key),</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    payload,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    payload_count);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">foedus::kErrorCodeStrTooLongPayload</a></div><div class="ttdoc">0x0808 : "STORAGE: Payload of the record is too long" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00174">error_code.hpp:174</a></div></div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_a99eded50e5dc85b918f799fdca46a06b"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">foedus::assorted::htobe&lt; uint64_t &gt;</a></div><div class="ttdeci">uint64_t htobe&lt; uint64_t &gt;(uint64_t host_value)</div><div class="ttdef"><b>Definition:</b> <a href="endianness_8hpp_source.html#l00087">endianness.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a032fcdc65647bdea76b8a49014211100"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">foedus::storage::masstree::adjust_payload_hint</a></div><div class="ttdeci">PayloadLength adjust_payload_hint(PayloadLength payload_count, PayloadLength physical_payload_hint)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00233">masstree_storage.cpp:233</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga453ffcac369fa68b5eb5d489e6cdca4f"><div class="ttname"><a href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">foedus::storage::masstree::kMaxPayloadLength</a></div><div class="ttdeci">const PayloadLength kMaxPayloadLength</div><div class="ttdoc">Max length of a payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00098">masstree_id.hpp:98</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6d7f9dea9af7356face9815ac10c37b4_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6d7f9dea9af7356face9815ac10c37b4_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6d7f9dea9af7356face9815ac10c37b4_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a6d7f9dea9af7356face9815ac10c37b4_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100" title="foedus::storage::masstree\l::adjust_payload_hint" alt="" coords="232,231,405,272"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="239,409,398,451"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="232,475,405,531"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a826c22a43d97758b61e6b0c230841224" title="foedus::storage::masstree\l::RecordLocation::is_found" alt="" coords="231,556,407,597"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="227,1378,411,1434"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="756,137,916,163"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="507,483,629,524"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="481,878,655,934"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="479,794,657,850"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="476,322,660,378"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="491,176,645,217"/>
<area shape="rect" id="node15" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="475,651,661,692"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeInsertLogType.html#a4ea983f4436e0519b7d2aaa7f1ef67a0" title="foedus::storage::masstree\l::MasstreeInsertLogType\l::populate" alt="" coords="481,242,655,298"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="749,462,923,518"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="749,1380,923,1421"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="493,59,643,100"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="481,402,655,458"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="775,937,897,979"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076" title="This might be affected by concurrent threads. " alt="" coords="745,857,927,913"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="995,799,1201,840"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1249,931,1456,972"/>
<area shape="rect" id="node16" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="743,593,929,635"/>
<area shape="rect" id="node17" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="1005,633,1191,675"/>
<area shape="rect" id="node18" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="743,740,929,781"/>
<area shape="rect" id="node19" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="1011,1120,1185,1161"/>
<area shape="rect" id="node24" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="747,5,925,47"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="761,71,911,112"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="747,659,925,715"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="725,331,947,372"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="761,396,911,437"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="765,213,907,255"/>
<area shape="rect" id="node31" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="1027,243,1169,284"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="481,1496,655,1537"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="481,1874,655,1930"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="728,1684,944,1725"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="761,1961,911,2003"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="481,1794,655,1850"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="736,1619,936,1660"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602" title="foedus::storage::masstree\l::MasstreePage::within\l_foster_minor" alt="" coords="481,1663,655,1719"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="493,1219,643,1260"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5" title="foedus::storage::masstree\l::MasstreePage::get_foster_minor" alt="" coords="459,1284,677,1325"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607" title="foedus::storage::masstree\l::MasstreePage::get_foster_major" alt="" coords="459,1349,677,1391"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="478,1415,658,1471"/>
<area shape="rect" id="node49" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="479,967,657,1023"/>
<area shape="rect" id="node50" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="775,1003,897,1044"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="749,1867,923,1937"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="761,2027,911,2068"/>
<area shape="rect" id="node38" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="759,1801,913,1843"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="749,2092,923,2133"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa428e27cf2673484b040048631b9f8fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::insert_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a new record without payload of the given primitive key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00321">321</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>References <a class="el" href="cxx11_8hpp_source.html#l00132">CXX11_NULLPTR</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00298">insert_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">insert_record_normalized</a>(context, key, <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>, 0U);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_a61d3b4c9a894070e8937bede0eacf749"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749">foedus::storage::masstree::MasstreeStorage::insert_record_normalized</a></div><div class="ttdeci">ErrorCode insert_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00298">masstree_storage.hpp:298</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aa428e27cf2673484b040048631b9f8fd_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aa428e27cf2673484b040048631b9f8fd_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aa428e27cf2673484b040048631b9f8fd_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aa428e27cf2673484b040048631b9f8fd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a61d3b4c9a894070e8937bede0eacf749" title="Inserts a new record of the given primitive key in this Masstree. " alt="" coords="227,5,400,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2731aaf3a733c773a63df6d691ede3ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>snapshot_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00066">66</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00176">foedus::storage::masstree::MasstreeStoragePimpl::load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                                                          {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).load(snapshot_block);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2731aaf3a733c773a63df6d691ede3ac_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2731aaf3a733c773a63df6d691ede3ac_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2731aaf3a733c773a63df6d691ede3ac_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2731aaf3a733c773a63df6d691ede3ac_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="227,459,421,500"/>
<area shape="rect" id="node3" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="489,136,661,177"/>
<area shape="rect" id="node8" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="1025,1296,1159,1337"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="469,429,680,471"/>
<area shape="rect" id="node38" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="489,201,661,243"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a950d071732ec8bd3251c03181d42692f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_meta" alt="" coords="488,546,661,602"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="747,898,920,954"/>
<area shape="rect" id="node4" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="747,5,919,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="768,71,899,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="747,136,919,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="747,201,919,243"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1247,239,1435,295"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="728,743,939,784"/>
<area shape="rect" id="node26" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="740,429,927,471"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="987,743,1197,784"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="1003,939,1181,980"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="997,873,1187,915"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="1003,808,1181,849"/>
<area shape="rect" id="node24" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1000,597,1184,653"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1011,677,1173,719"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="1251,939,1430,980"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="1251,808,1430,849"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="1484,905,1699,947"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1502,709,1681,751"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="1495,775,1688,816"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1502,840,1681,881"/>
<area shape="rect" id="node21" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1758,745,1950,787"/>
<area shape="rect" id="node22" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1747,811,1961,838"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="992,385,1192,441"/>
<area shape="rect" id="node28" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="999,319,1185,360"/>
<area shape="rect" id="node30" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1017,531,1167,572"/>
<area shape="rect" id="node37" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1017,465,1167,507"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="1245,319,1436,375"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="1269,465,1412,507"/>
<area shape="rect" id="node32" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="1265,661,1416,703"/>
<area shape="rect" id="node33" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1271,531,1411,572"/>
<area shape="rect" id="node34" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="1265,596,1416,637"/>
<area shape="rect" id="node35" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="1273,400,1408,441"/>
<area shape="rect" id="node36" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="1524,400,1659,441"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ab25cb34a8304c744bf309cc02b515e72" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::initialize_volatile_page" alt="" coords="999,1055,1185,1111"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1248,1030,1433,1086"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="1005,1135,1179,1191"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f" title="foedus::storage::masstree\l::MasstreeBorderPage::initialize\l_volatile_page" alt="" coords="989,1215,1195,1271"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e" title="foedus::storage::masstree\l::MasstreePage::initialize\l_volatile_common" alt="" coords="1254,1175,1427,1231"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1488,1149,1695,1191"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="1496,1215,1687,1256"/>
<area shape="rect" id="node46" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="1755,1181,1953,1223"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="1758,1247,1950,1288"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="2009,1247,2201,1288"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a901422371b485bbdca770270f1a43f48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp; foedus::storage::masstree::MasstreeStorage::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00053">53</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; CONTROL_BLOCK &gt;::control_block_</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;::engine_</a>, and <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; CONTROL_BLOCK &gt;::engine_</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                                                        {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a> = other.engine_;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a> = other.control_block_;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; MasstreeStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">MasstreeStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae7221368afad2669e36cdf1bfe8dcb5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::overwrite_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overwrites a part of one record of the given key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>We copy from this buffer. Must be at least payload_count. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_offset</td><td>We overwrite to this byte position of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>How many bytes we overwrite.</td></tr>
  </table>
  </dd>
</dl>
<p>When payload_offset+payload_count is larger than the actual payload, this method returns kErrorCodeStrTooShortPayload. Just like <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. ">get_record()</a>, this adds to range-lock read set even when key is not found. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00412">412</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00772">foedus::storage::masstree::MasstreeStoragePimpl::overwrite_general()</a>, and <a class="el" href="masstree__storage_8cpp_source.html#l00474">overwrite_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                               {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f">overwrite_record_normalized</a>(context, slice, payload, payload_offset, payload_count);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    context,</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    key,</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    key_length,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">return</span> pimpl.overwrite_general(</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    context,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    location,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    key,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    key_length,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    payload,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    payload_count);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_ad27ac2a920f1f63adc768f7c95ea5c6f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f">foedus::storage::masstree::MasstreeStorage::overwrite_record_normalized</a></div><div class="ttdeci">ErrorCode overwrite_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_offset, PayloadLength payload_count)</div><div class="ttdoc">Overwrites a part of one record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00474">masstree_storage.cpp:474</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae7221368afad2669e36cdf1bfe8dcb5f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae7221368afad2669e36cdf1bfe8dcb5f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae7221368afad2669e36cdf1bfe8dcb5f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae7221368afad2669e36cdf1bfe8dcb5f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="521,1028,695,1084"/>
<area shape="rect" id="node18" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1265,43,1439,85"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="521,1887,695,1943"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="284,1213,471,1269"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="763,1290,936,1331"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="1034,1595,1185,1637"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="763,963,936,1019"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="1023,1509,1196,1550"/>
<area shape="rect" id="node16" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="763,119,936,161"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="763,784,936,840"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="756,1225,943,1266"/>
<area shape="rect" id="node31" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="763,54,936,95"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="745,207,953,249"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="1015,160,1203,216"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="776,1355,923,1397"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="756,1421,943,1477"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="763,692,936,748"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="761,1144,938,1200"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="1023,1283,1196,1354"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1277,919,1427,961"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1032,1101,1187,1142"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="1022,1378,1197,1419"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="1007,1166,1211,1207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="1005,1443,1214,1485"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="1001,1035,1217,1077"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="1023,2172,1196,2228"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="1034,970,1185,1011"/>
<area shape="rect" id="node17" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="1008,43,1211,85"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1265,685,1439,741"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="1023,597,1196,653"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="1034,678,1185,719"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="1017,744,1202,800"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1017,824,1202,880"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="1017,320,1202,376"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="1017,400,1202,456"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1023,240,1196,296"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="1009,905,1209,946"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="1021,481,1198,522"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="788,2253,911,2294"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="763,1653,936,1709"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="760,1733,939,1789"/>
<area shape="rect" id="node42" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="757,1813,941,1869"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="773,1894,926,1935"/>
<area shape="rect" id="node44" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="756,1959,943,2001"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="757,2025,942,2081"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="774,2106,925,2147"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="762,2172,937,2228"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="519,1249,697,1305"/>
<area shape="rect" id="node50" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="529,1183,687,1225"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad27ac2a920f1f63adc768f7c95ea5c6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::overwrite_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overwrites a part of one record of the given primitive key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>We copy from this buffer. Must be at least payload_count. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_offset</td><td>We overwrite to this byte position of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>How many bytes we overwrite. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. ">get_record_normalized()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00474">474</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="endianness_8hpp_source.html#l00087">foedus::assorted::htobe&lt; uint64_t &gt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00772">foedus::storage::masstree::MasstreeStoragePimpl::overwrite_general()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8cpp_source.html#l00412">overwrite_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                               {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    context,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    key,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  uint64_t be_key = <a class="code" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">assorted::htobe&lt;uint64_t&gt;</a>(key);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">return</span> pimpl.overwrite_general(</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    context,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    location,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    &amp;be_key,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keyword">sizeof</span>(be_key),</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    payload,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    payload_count);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_a99eded50e5dc85b918f799fdca46a06b"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">foedus::assorted::htobe&lt; uint64_t &gt;</a></div><div class="ttdeci">uint64_t htobe&lt; uint64_t &gt;(uint64_t host_value)</div><div class="ttdef"><b>Definition:</b> <a href="endianness_8hpp_source.html#l00087">endianness.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="250,1219,409,1260"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="240,1285,419,1341"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="243,1969,416,2025"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="474,560,647,601"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="735,1967,886,2008"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="474,1078,647,1134"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="724,1539,897,1580"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="474,626,647,682"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1221,1597,1428,1639"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="471,1219,651,1275"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="467,1431,654,1472"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="487,413,634,455"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="467,479,654,535"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="467,1350,655,1406"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="472,1497,649,1553"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="724,1151,897,1221"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="995,921,1145,963"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="733,903,888,944"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="723,1245,898,1287"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="709,968,913,1009"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="706,1085,915,1127"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="703,772,919,813"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="724,1838,897,1894"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="735,837,886,879"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="983,506,1157,562"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="724,71,897,127"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="735,152,886,193"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="977,735,1163,791"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="718,218,903,274"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="718,298,903,354"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="718,378,903,434"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="724,691,897,747"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="711,575,911,616"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="722,509,899,551"/>
<area shape="rect" id="node29" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="724,5,897,47"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="721,1458,900,1514"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="705,1392,917,1433"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="707,1311,914,1367"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="967,1597,1173,1639"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="749,1656,872,1697"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="499,2087,622,2128"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="474,1627,647,1683"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="471,1707,650,1763"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="469,2153,653,2209"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="484,2233,637,2275"/>
<area shape="rect" id="node47" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="467,2299,654,2340"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="468,2365,653,2421"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="485,1940,636,1981"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="473,2006,648,2062"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad27ac2a920f1f63adc768f7c95ea5c6f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="240,13,471,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a384c8fadf63901aa055285c7f680570f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PAYLOAD &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::overwrite_record_primitive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PAYLOAD&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overwrites a part of one record of the given key in this Masstree as a primitive value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>We copy this value. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_offset</td><td>We overwrite to this byte position of the record. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>payload_offset + sizeof(PAYLOAD) must be within the record's actual payload size (returns kErrorCodeStrTooShortPayload if not) </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">PAYLOAD</td><td>primitive type of the payload. all integers and floats are allowed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00444">444</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00772">foedus::storage::masstree::MasstreeStoragePimpl::overwrite_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">return</span> overwrite_record_primitive_normalized&lt;PAYLOAD&gt;(context, slice, payload, payload_offset);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record(</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    context,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    key,</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    key_length,</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">return</span> pimpl.overwrite_general(</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    context,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    location,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    key,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    key_length,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    &amp;payload,</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">sizeof</span>(payload));</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a384c8fadf63901aa055285c7f680570f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a384c8fadf63901aa055285c7f680570f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a384c8fadf63901aa055285c7f680570f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a384c8fadf63901aa055285c7f680570f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="240,1185,413,1241"/>
<area shape="rect" id="node18" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1003,2339,1177,2380"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="240,378,413,434"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="479,1693,652,1735"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="753,367,903,408"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="479,1217,652,1273"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="741,757,915,799"/>
<area shape="rect" id="node16" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="479,2280,652,2321"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="479,1613,652,1669"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="472,1377,659,1419"/>
<area shape="rect" id="node33" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="479,1759,652,1800"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="461,940,669,981"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="734,874,922,930"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="492,823,639,864"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="472,1006,659,1062"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="479,1297,652,1353"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="477,1086,654,1142"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="741,1005,915,1076"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1015,1403,1165,1444"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="751,1361,905,1403"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="741,1100,915,1141"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="726,1231,930,1272"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="723,1165,933,1207"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="720,1296,936,1337"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="741,202,915,258"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="753,1427,903,1468"/>
<area shape="rect" id="node17" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="727,2339,929,2380"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1003,1959,1177,2015"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="741,1930,915,1986"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="753,2011,903,2052"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="735,1493,921,1549"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="735,2127,921,2183"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="735,2207,921,2263"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="735,1653,921,1709"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="741,1573,915,1629"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="728,1864,928,1905"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="739,1733,917,1775"/>
<area shape="rect" id="node31" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="741,1799,915,1840"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="987,1159,1193,1200"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="717,600,939,641"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="504,348,627,389"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="479,414,652,470"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="476,494,655,550"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="473,574,657,630"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="489,655,642,696"/>
<area shape="rect" id="node47" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="472,5,659,47"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="473,71,658,127"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="490,283,641,324"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="478,202,653,258"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aadbf62a4594062706294a2402777e223"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PAYLOAD &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::overwrite_record_primitive_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PAYLOAD&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overwrites a part of one record of the given primitive key in this Masstree as a primitive value. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. ">overwrite_record_primitive()</a> </dd>
<dd>
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. ">overwrite_record_normalized()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00499">499</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="endianness_8hpp_source.html#l00087">foedus::assorted::htobe&lt; uint64_t &gt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00772">foedus::storage::masstree::MasstreeStoragePimpl::overwrite_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.locate_record_normalized(</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    context,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    key,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  uint64_t be_key = <a class="code" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">assorted::htobe&lt;uint64_t&gt;</a>(key);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">return</span> pimpl.overwrite_general(</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    context,</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    location,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    &amp;be_key,</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keyword">sizeof</span>(be_key),</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    &amp;payload,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    payload_offset,</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keyword">sizeof</span>(payload));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_a99eded50e5dc85b918f799fdca46a06b"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">foedus::assorted::htobe&lt; uint64_t &gt;</a></div><div class="ttdeci">uint64_t htobe&lt; uint64_t &gt;(uint64_t host_value)</div><div class="ttdef"><b>Definition:</b> <a href="endianness_8hpp_source.html#l00087">endianness.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aadbf62a4594062706294a2402777e223_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aadbf62a4594062706294a2402777e223_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aadbf62a4594062706294a2402777e223_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aadbf62a4594062706294a2402777e223_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="253,1219,411,1260"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="243,1285,421,1341"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="245,1969,419,2025"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="477,560,650,601"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="738,1967,889,2008"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="477,1078,650,1134"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="727,1539,900,1580"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="477,626,650,682"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1224,1597,1431,1639"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="473,1219,653,1275"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf" title="foedus::storage::masstree\l::MasstreePage::get_version" alt="" coords="470,1431,657,1472"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7" title="Add the given page version to the page version set of this transaction. " alt="" coords="490,413,637,455"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9" title="foedus::storage::masstree\l::MasstreePage::get_version\l_address" alt="" coords="470,479,657,535"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="469,1350,657,1406"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="475,1497,652,1553"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="727,1151,900,1221"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="997,921,1148,963"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="736,903,891,944"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="726,1245,901,1287"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="711,968,915,1009"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="709,1085,918,1127"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="705,772,921,813"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="727,1838,900,1894"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="738,837,889,879"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="986,506,1159,562"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="727,71,900,127"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="738,152,889,193"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="980,735,1165,791"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="721,218,906,274"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="721,298,906,354"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="721,378,906,434"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="727,691,900,747"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="713,575,913,616"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="725,509,902,551"/>
<area shape="rect" id="node29" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="727,5,900,47"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="724,1458,903,1514"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="707,1392,919,1433"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="710,1311,917,1367"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="969,1597,1176,1639"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="752,1656,875,1697"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="502,2087,625,2128"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="477,1627,650,1683"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="474,1707,653,1763"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="471,2153,655,2209"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="487,2233,640,2275"/>
<area shape="rect" id="node47" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="470,2299,657,2340"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="471,2365,656,2421"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="488,1940,639,1981"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="476,2006,651,2062"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abf137494ad55ab4d60cec25c7c654e99"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::peek_volatile_page_boundaries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_1_1PeekBoundariesArguments">PeekBoundariesArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the volatile pages of this storage to give hints to decide page boundary keys. </p>
<p>This method is used from the composer to make page boundaries in snapshot pages better aligned with those of volatile pages so that we can drop more volatile pages at the end. This method is opportunistic, meaning the result is not guaranteed to be transactionally correct, but that's fine because these are just hints. If the page boundary is not aligned well with volatile pages, we just have to keep more volatile pages for a while. In fact, the composer might ignore these hints in some cases (eg. a page has too few tuples). Defined in <a class="el" href="masstree__storage__peek_8cpp.html">masstree_storage_peek.cpp</a> </p>

<p>Definition at line <a class="el" href="masstree__storage__peek_8cpp_source.html#l00031">31</a> of file <a class="el" href="masstree__storage__peek_8cpp_source.html">masstree_storage_peek.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__peek_8cpp_source.html#l00037">foedus::storage::masstree::MasstreeStoragePimpl::peek_volatile_page_boundaries()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                                                      {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">return</span> pimpl.peek_volatile_page_boundaries(engine, args);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_abf137494ad55ab4d60cec25c7c654e99_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_abf137494ad55ab4d60cec25c7c654e99_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_abf137494ad55ab4d60cec25c7c654e99_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_abf137494ad55ab4d60cec25c7c654e99_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="227,203,436,259"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa23487ce62cb84213dedb7917cbf2602" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer" alt="" coords="503,5,676,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1314,318,1475,359"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="522,137,657,178"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="484,203,695,259"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1293,217,1496,258"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a96688f523312e356ea1a03adfbfba7b2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_this_layer" alt="" coords="744,654,953,725"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="485,1478,694,1549"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1884,425,2045,466"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1618,217,1773,258"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1890,202,2039,243"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1609,282,1782,323"/>
<area shape="rect" id="node14" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1594,85,1797,141"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1887,107,2042,149"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1869,341,2060,382"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="1308,1331,1481,1373"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="1307,501,1482,542"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="1593,686,1797,727"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1609,1412,1782,1468"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="1307,383,1482,425"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a139bb707048331de71c3abe8c0282d7d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_this_layer_recurse" alt="" coords="1003,963,1212,1034"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="1290,821,1499,862"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="1295,1449,1495,1490"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="1302,1712,1487,1768"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="1872,1119,2057,1175"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="1302,2040,1487,2096"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="1302,1515,1487,1571"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab55e48873dcf5700871a035c65bfa588" title="used only in masstree. " alt="" coords="1291,886,1499,927"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator\l::is_valid" alt="" coords="1577,1184,1813,1240"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a50f249d95bb8fceda793e40a76b4e386" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator::next" alt="" coords="1260,1083,1529,1125"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a8988fe635186bff06191f3eb87447bc8" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator\l::get_pointer" alt="" coords="1277,1200,1513,1256"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aefcac4f0e94dee19b7b26ff392ba4c54" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator\l::get_low_key" alt="" coords="1277,1003,1513,1059"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1298,1595,1491,1637"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="2116,1754,2323,1795"/>
<area shape="rect" id="node28" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1609,2113,1781,2154"/>
<area shape="rect" id="node29" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1879,2113,2051,2154"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_separator" alt="" coords="1603,1003,1788,1059"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="1021,2176,1194,2232"/>
<area shape="rect" id="node40" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="762,2135,935,2177"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="1004,2089,1211,2145"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="743,486,955,527"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="755,1728,943,1784"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="759,1827,938,1883"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1861,1785,2068,1826"/>
<area shape="rect" id="node45" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1046,1729,1169,1770"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="1018,1845,1197,1901"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="1284,1923,1505,1965"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="1305,1843,1484,1899"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1606,1876,1785,1932"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10db264b9d354e1813bd20ef8fdb72bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::prefetch_pages_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>install_volatile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cache_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>from</em> = <code><a class="el" href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">kInfimumSlice</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>to</em> = <code><a class="el" href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">kSupremumSlice</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prefetch data pages in this storage. </p>
<p>Key Slice version (from/to are 8 bytes or less). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">install_volatile</td><td>Whether to install/prefetch volatile pages based on the recent snapshot page if there is none. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cache_snapshot</td><td>Whether to cache/prefetch snapshot pages if exists. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">from</td><td>inclusive begin slice of records that are specifically prefetched even in data pages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>inclusive end slice of records that are specifically prefetched even in data pages.</td></tr>
  </table>
  </dd>
</dl>
<p>This is to <em>warmup</em> the storage for the current core. Data pages are prefetched within from/to. So far prefetches only volatile pages, but it will also cache and prefetch snapshot pages. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00590">590</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__prefetch_8cpp_source.html#l00030">foedus::storage::masstree::MasstreeStoragePimpl::prefetch_pages_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;               {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).prefetch_pages_normalized(</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    context,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    install_volatile,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    cache_snapshot,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    from,</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    to);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a10db264b9d354e1813bd20ef8fdb72bb_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a10db264b9d354e1813bd20ef8fdb72bb_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a10db264b9d354e1813bd20ef8fdb72bb_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a10db264b9d354e1813bd20ef8fdb72bb_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="236,585,424,641"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="491,5,641,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a94e2b69404cabddbead1d1fb0ef1dc42" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_name" alt="" coords="479,71,653,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="479,1317,653,1373"/>
<area shape="rect" id="node23" href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3" title="Prefetch a page to L2/L3 cache. " alt="" coords="997,217,1162,259"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="472,577,660,648"/>
<area shape="rect" id="node47" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="499,1564,633,1605"/>
<area shape="rect" id="node50" href="classfoedus_1_1debugging_1_1StopWatch.html#a7f1f05f4dd494dd57c3ecafb5d9131fb" title="foedus::debugging::\lStopWatch::elapsed_us" alt="" coords="485,1629,647,1671"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="731,1099,904,1169"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="742,1193,893,1235"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="740,1259,895,1300"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="730,1324,905,1365"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="715,1389,919,1431"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="713,1455,922,1496"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="731,1520,904,1561"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="709,1033,925,1075"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="731,1586,904,1642"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="742,1667,893,1708"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="987,1145,1171,1187"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1257,644,1418,685"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1263,1219,1412,1260"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1232,1072,1443,1113"/>
<area shape="rect" id="node12" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1245,1138,1429,1194"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="983,1033,1175,1075"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="987,1667,1171,1708"/>
<area shape="rect" id="node24" href="group__ASSORTED.html#ga776c53f69f97c1edfc5d34a0f6cb3100" title="Prefetch multiple contiguous cachelines to L2/L3 cache. " alt="" coords="1243,225,1432,251"/>
<area shape="rect" id="node25" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1491,217,1663,259"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663" title="An empty&#45;range page, either intermediate or border, never has any entries. " alt="" coords="710,493,925,535"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="1004,355,1155,396"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5" title="foedus::storage::masstree\l::MasstreePage::get_foster_minor" alt="" coords="708,559,927,600"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607" title="foedus::storage::masstree\l::MasstreePage::get_foster_major" alt="" coords="708,624,927,665"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1234,725,1441,767"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="730,821,905,863"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="723,741,911,797"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="711,887,923,928"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="728,953,907,1009"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="731,413,904,469"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_separator" alt="" coords="725,202,910,258"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="725,282,910,338"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="1262,355,1413,396"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="984,872,1175,913"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="976,741,1183,783"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1018,807,1141,848"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="990,953,1169,1009"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="975,420,1184,461"/>
<area shape="rect" id="node43" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="997,486,1162,513"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1000,537,1159,579"/>
<area shape="rect" id="node48" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="737,1732,898,1773"/>
<area shape="rect" id="node49" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="750,1797,885,1839"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2370f71beab1eb4b8b02e3ac9e4f29bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a> foedus::storage::masstree::MasstreeStorage::track_moved_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>old_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">xct::WriteXctAccess</a> *&#160;</td>
          <td class="paramname"><em>write_set</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves a "moved" record. </p>
<p>This is the core of the moved-bit protocol. Receiving a xct_id address that points to a moved record, track the physical record in another page. This method does not take lock, so it is possible that concurrent threads again move the record after this. The only case it fails to track is the record moved to deeper layers. If the write-set is supplied, we use the key information in it to track even in that case. </p><dl class="section note"><dt>Note</dt><dd>Implementation note and limitation Master-tree (masstree) does use moved bit, so this storage implements this method to handle moved record. There are a few design choices worth noting.</dd></dl>
<p>In the <em>new_mpage</em> git branch, we significantly changed the page layout in this package. One purpose was to allow tracking the moved record in <b>all</b> circumstances.</p>
<p>When the record is moved within the same B-trie layer, it is anyway easy to track down the new location. When the record is moved to next layer, however, we have to know the entire key to track the record. Previous page layout didn't allow it unless we have the write_set. When there is a standalone read-access, we could not track to next layer.</p>
<p>The new page layout always leaves the original key of the record in page, thus the issue completely went away. This also simplified concurrency control in this package. See <a class="el" href="namespacefoedus_1_1storage_1_1masstree.html#MASS_TERM_REMAINDER">Remainder vs Remaining Key</a>.</p>
<p>However, this came with the price of wasted space in page. To ameliorate it, we made a few improvements to reduce wasted space.</p>
<ul>
<li>First, now we have a flag that says the record is <em>initially</em> a next-layer. When this is set, we do not put suffix, thus the price is gone. </li>
<li>Second, we also added a configuration to aggressively create next-layer to make most high-layer records as initially next-layer. See <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeMetadata.html#a46a0e0096f8152c1304319af9ea88702" title="Hints how many layers this storage will create for most of records. ">MasstreeMetadata::min_layer_hint_</a>. </li>
<li>Third, we also overhauled the way we expand records in page.</li>
</ul>
<p>Thanks to these improvements, we now allow <em>more</em> records, not less, in a page. Previously it was 64, but now kBorderPageMaxSlots is 100 for 4kb pages. </p>

<p>Definition at line <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00842">842</a> of file <a class="el" href="masstree__storage__pimpl_8cpp_source.html">masstree_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00848">foedus::storage::masstree::MasstreeStoragePimpl::track_moved_record()</a>.</p>

<p>Referenced by <a class="el" href="storage__manager__pimpl_8cpp_source.html#l00452">foedus::storage::StorageManagerPimpl::track_moved_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                                {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).track_moved_record(old_address, write_set);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="227,214,400,270"/>
<area shape="rect" id="node3" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="460,127,625,154"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="967,1884,1142,1925"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="705,83,881,124"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736" title="foedus::xct::RwLockableXct\lId::is_next_layer" alt="" coords="702,17,885,59"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="448,443,637,499"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1483,1300,1674,1341"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="959,116,1151,157"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="1218,116,1410,157"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1517,532,1640,573"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="1220,467,1408,523"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1964,631,2171,672"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="2219,816,2425,857"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="951,564,1159,605"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="1468,940,1689,981"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="1208,367,1420,408"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="949,1621,1160,1677"/>
<area shape="rect" id="node24" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="987,1701,1122,1743"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="685,148,901,189"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="968,1767,1141,1808"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97" title="foedus::storage::masstree\l::MasstreePage::is_foster\l_major_null" alt="" coords="707,665,880,721"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23" title="foedus::storage::masstree\l::MasstreePage::is_foster\l_minor_null" alt="" coords="707,585,880,641"/>
<area shape="rect" id="node31" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a03782134d5ef0ebb8e187ddbd89f3c36" title="foedus::xct::RwLockableXct\lId::is_moved" alt="" coords="702,367,885,408"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0" title="foedus::storage::masstree\l::MasstreeBorderPage::to\l_slot_index" alt="" coords="968,483,1141,539"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="699,1118,888,1174"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1737,583,1916,639"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="1211,649,1417,705"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1737,743,1916,799"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="1737,933,1916,989"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1493,656,1665,697"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="974,629,1135,671"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1498,875,1659,916"/>
<area shape="rect" id="node32" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="993,367,1116,408"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="1975,1503,2160,1559"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="962,1045,1147,1101"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="967,1125,1142,1167"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="953,1191,1157,1232"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="962,1322,1147,1378"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="965,914,1144,970"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="1737,663,1916,719"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1227,1471,1401,1527"/>
<area shape="rect" id="node44" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="953,1256,1156,1297"/>
<area shape="rect" id="node49" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="968,848,1141,889"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="955,1504,1155,1545"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="1225,931,1403,987"/>
<area shape="rect" id="node45" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1237,1124,1391,1165"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1504,1197,1653,1239"/>
<area shape="rect" id="node47" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1227,1271,1401,1312"/>
<area shape="rect" id="node48" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1213,1190,1415,1246"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a2370f71beab1eb4b8b02e3ac9e4f29bd_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="227,31,413,87"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="461,39,657,80"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="705,39,925,80"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="975,5,1183,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="973,71,1184,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="1232,5,1427,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1475,39,1669,80"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1717,39,1880,80"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1232,71,1427,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad680c95d2cfb7aa2c8974ba3004a8703"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::upsert_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a new record of the given key or replaces the existing one, or so-called <em>upsert</em>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>Value to upsert. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>Length of payload.</td></tr>
  </table>
  </dd>
</dl>
<p>This method puts the record whether the key already exists or not, which is handy in many usecases. Internally, the Implementation comes with a bit of complexity. If there is an existing record of the key (whether logically deleted or not) that is spacious enough, then we simply replace the record. If the key doesn't exist or the existing record is no big enough, we create/migrate the record in a system transaction then install the record. </p>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00363">363</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8hpp_source.html#l00392">upsert_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                               {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad680c95d2cfb7aa2c8974ba3004a8703">upsert_record</a>(context, key, key_length, payload, payload_count, payload_count);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_ad680c95d2cfb7aa2c8974ba3004a8703"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad680c95d2cfb7aa2c8974ba3004a8703">foedus::storage::masstree::MasstreeStorage::upsert_record</a></div><div class="ttdeci">ErrorCode upsert_record(thread::Thread *context, const void *key, KeyLength key_length, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given key or replaces the existing one, or so-called upsert. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00363">masstree_storage.hpp:363</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad680c95d2cfb7aa2c8974ba3004a8703_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad680c95d2cfb7aa2c8974ba3004a8703_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad680c95d2cfb7aa2c8974ba3004a8703_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad680c95d2cfb7aa2c8974ba3004a8703_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae53eef933a44f04de0cb594e56799b6e" title="Upserts a new record without payload of the given key in this Masstree. " alt="" coords="269,5,485,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0f917244d33e9cdb2fa6ffd686a2a701"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::upsert_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>physical_payload_hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>With this method, you can also specify <em>physical_payload_hint</em>, the physical size of the record's payload part. </p>
<p>If you will later expand the payload of this record, giving a larger value will avoid record migration. Default value (and minimal value) is same as the initial payload_count. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00347">347</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage_8cpp_source.html#l00233">foedus::storage::masstree::adjust_payload_hint()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="masstree__record__location_8hpp_source.html#l00056">foedus::storage::masstree::RecordLocation::is_found()</a>, <a class="el" href="error__code_8hpp_source.html#l00174">foedus::kErrorCodeStrTooLongPayload</a>, <a class="el" href="masstree__id_8hpp_source.html#l00098">foedus::storage::masstree::kMaxPayloadLength</a>, <a class="el" href="masstree__id_8hpp_source.html#l00233">foedus::storage::masstree::normalize_be_bytes_full()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00412">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record()</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00711">foedus::storage::masstree::MasstreeStoragePimpl::upsert_general()</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00406">upsert_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                       {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// Automatically switch to faster implementation for 8-byte keys</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (key_length == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">normalize_be_bytes_full</a>(key);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">upsert_record_normalized</a>(context, slice, payload, payload_count, physical_payload_hint);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(payload_count &gt; <a class="code" href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">kMaxPayloadLength</a>)) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">kErrorCodeStrTooLongPayload</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  physical_payload_hint = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">adjust_payload_hint</a>(payload_count, physical_payload_hint);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.reserve_record(</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    context,</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    key,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    key_length,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    payload_count,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    physical_payload_hint,</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(location.is_found());  <span class="comment">// contract of reserve_record</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">return</span> pimpl.upsert_general(</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    context,</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    location,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    key,</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    key_length,</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    payload,</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    payload_count);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">foedus::kErrorCodeStrTooLongPayload</a></div><div class="ttdoc">0x0808 : "STORAGE: Payload of the record is too long" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00174">error_code.hpp:174</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_ad7be54387721545e6a8191014a370893"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">foedus::storage::masstree::MasstreeStorage::upsert_record_normalized</a></div><div class="ttdeci">ErrorCode upsert_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Upserts a new record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00406">masstree_storage.hpp:406</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6818c708d9ac34b794cb1f91fa6f5296"><div class="ttname"><a href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296">foedus::storage::masstree::normalize_be_bytes_full</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full(const void *be_bytes)</div><div class="ttdoc">Convert a big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00233">masstree_id.hpp:233</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a032fcdc65647bdea76b8a49014211100"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">foedus::storage::masstree::adjust_payload_hint</a></div><div class="ttdeci">PayloadLength adjust_payload_hint(PayloadLength payload_count, PayloadLength physical_payload_hint)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00233">masstree_storage.cpp:233</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga453ffcac369fa68b5eb5d489e6cdca4f"><div class="ttname"><a href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">foedus::storage::masstree::kMaxPayloadLength</a></div><div class="ttdeci">const PayloadLength kMaxPayloadLength</div><div class="ttdoc">Max length of a payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00098">masstree_id.hpp:98</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0f917244d33e9cdb2fa6ffd686a2a701_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0f917244d33e9cdb2fa6ffd686a2a701_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0f917244d33e9cdb2fa6ffd686a2a701_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a0f917244d33e9cdb2fa6ffd686a2a701_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100" title="foedus::storage::masstree\l::adjust_payload_hint" alt="" coords="271,1392,444,1433"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a826c22a43d97758b61e6b0c230841224" title="foedus::storage::masstree\l::RecordLocation::is_found" alt="" coords="269,718,445,760"/>
<area shape="rect" id="node5" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1024,77,1197,118"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="271,784,444,840"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="271,1820,444,1876"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893" title="Upserts a new record of the given primitive key in this Masstree. " alt="" coords="271,1900,444,1956"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="788,1643,948,1670"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="516,1010,689,1052"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="793,1982,943,2024"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="516,1338,689,1394"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="760,325,976,366"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="793,825,943,866"/>
<area shape="rect" id="node20" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="516,78,689,120"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="516,376,689,432"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="768,260,968,301"/>
<area shape="rect" id="node25" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="781,194,955,236"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602" title="foedus::storage::masstree\l::MasstreePage::within\l_foster_minor" alt="" coords="516,246,689,302"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="527,457,678,498"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5" title="foedus::storage::masstree\l::MasstreePage::get_foster_minor" alt="" coords="493,522,712,564"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607" title="foedus::storage::masstree\l::MasstreePage::get_foster_major" alt="" coords="493,588,712,629"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="499,653,706,694"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="513,719,693,775"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="516,850,689,906"/>
<area shape="rect" id="node33" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="807,1134,929,1176"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="807,1069,929,1110"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="513,1468,692,1524"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="514,1127,691,1183"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a950d071732ec8bd3251c03181d42692f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_meta" alt="" coords="516,930,689,986"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="781,1330,955,1401"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="793,1425,943,1466"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="791,964,945,1005"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="781,1490,955,1532"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="766,1200,970,1241"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="763,1265,973,1306"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="781,1556,955,1597"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="781,2314,955,2370"/>
<area shape="rect" id="node21" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="767,77,969,118"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1024,314,1197,370"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="516,1258,689,1314"/>
<area shape="rect" id="node40" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="541,1730,664,1772"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="511,1650,695,1706"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="526,1796,679,1837"/>
<area shape="rect" id="node43" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="509,1861,696,1902"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeInsertLogType.html#a4ea983f4436e0519b7d2aaa7f1ef67a0" title="foedus::storage::masstree\l::MasstreeInsertLogType\l::populate" alt="" coords="516,1927,689,1983"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="513,2007,692,2063"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="510,2087,695,2143"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeUpdateLogType.html#a1a980469e419ba477da51dd4c3c01b47" title="foedus::storage::masstree\l::MasstreeUpdateLogType\l::populate" alt="" coords="516,2167,689,2223"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="527,2248,678,2289"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="515,2314,690,2370"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae53eef933a44f04de0cb594e56799b6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::upsert_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upserts a new record without payload of the given key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Arbitrary length of key that is lexicographically (big-endian) evaluated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>Byte size of key. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00392">392</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>References <a class="el" href="cxx11_8hpp_source.html#l00132">CXX11_NULLPTR</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00363">upsert_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                        {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad680c95d2cfb7aa2c8974ba3004a8703">upsert_record</a>(context, key, key_length, <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>, 0U);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_ad680c95d2cfb7aa2c8974ba3004a8703"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad680c95d2cfb7aa2c8974ba3004a8703">foedus::storage::masstree::MasstreeStorage::upsert_record</a></div><div class="ttdeci">ErrorCode upsert_record(thread::Thread *context, const void *key, KeyLength key_length, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Inserts a new record of the given key or replaces the existing one, or so-called upsert. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00363">masstree_storage.hpp:363</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae53eef933a44f04de0cb594e56799b6e_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae53eef933a44f04de0cb594e56799b6e_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae53eef933a44f04de0cb594e56799b6e_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ae53eef933a44f04de0cb594e56799b6e_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad680c95d2cfb7aa2c8974ba3004a8703" title="Inserts a new record of the given key or replaces the existing one, or so&#45;called upsert. " alt="" coords="269,5,485,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad7be54387721545e6a8191014a370893"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::upsert_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upserts a new record of the given primitive key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>Value to upsert. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_count</td><td>Length of payload. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00406">406</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage_8cpp_source.html#l00347">upsert_record()</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00429">upsert_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                               {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">upsert_record_normalized</a>(context, key, payload, payload_count, payload_count);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_ad7be54387721545e6a8191014a370893"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">foedus::storage::masstree::MasstreeStorage::upsert_record_normalized</a></div><div class="ttdeci">ErrorCode upsert_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Upserts a new record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00406">masstree_storage.hpp:406</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad7be54387721545e6a8191014a370893_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad7be54387721545e6a8191014a370893_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad7be54387721545e6a8191014a370893_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_ad7be54387721545e6a8191014a370893_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="227,5,443,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3bfa9692185bbf487a4775092556a88c" title="Upserts a new record without payload of the given primitive key in this Masstree. ..." alt="" coords="248,71,421,127"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a152a0ecbad9b56385ec7f13e8a1fce19"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::upsert_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>physical_payload_hint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>With this method, you can also specify <em>physical_payload_hint</em>. </p>

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00383">383</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage_8cpp_source.html#l00233">foedus::storage::masstree::adjust_payload_hint()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="endianness_8hpp_source.html#l00087">foedus::assorted::htobe&lt; uint64_t &gt;()</a>, <a class="el" href="masstree__record__location_8hpp_source.html#l00056">foedus::storage::masstree::RecordLocation::is_found()</a>, <a class="el" href="error__code_8hpp_source.html#l00174">foedus::kErrorCodeStrTooLongPayload</a>, <a class="el" href="masstree__id_8hpp_source.html#l00098">foedus::storage::masstree::kMaxPayloadLength</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00515">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record_normalized()</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00711">foedus::storage::masstree::MasstreeStoragePimpl::upsert_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                       {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(payload_count &gt; <a class="code" href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">kMaxPayloadLength</a>)) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">kErrorCodeStrTooLongPayload</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  physical_payload_hint = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">adjust_payload_hint</a>(payload_count, physical_payload_hint);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  MasstreeStoragePimpl pimpl(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  RecordLocation location;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(pimpl.reserve_record_normalized(</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    context,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    key,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    payload_count,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    physical_payload_hint,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    &amp;location));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(location.is_found());  <span class="comment">// contract of reserve_record</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  uint64_t be_key = <a class="code" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">assorted::htobe&lt;uint64_t&gt;</a>(key);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">return</span> pimpl.upsert_general(</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    context,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    location,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    &amp;be_key,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">sizeof</span>(be_key),</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    payload,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    payload_count);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">foedus::kErrorCodeStrTooLongPayload</a></div><div class="ttdoc">0x0808 : "STORAGE: Payload of the record is too long" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00174">error_code.hpp:174</a></div></div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_a99eded50e5dc85b918f799fdca46a06b"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b">foedus::assorted::htobe&lt; uint64_t &gt;</a></div><div class="ttdeci">uint64_t htobe&lt; uint64_t &gt;(uint64_t host_value)</div><div class="ttdef"><b>Definition:</b> <a href="endianness_8hpp_source.html#l00087">endianness.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a032fcdc65647bdea76b8a49014211100"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100">foedus::storage::masstree::adjust_payload_hint</a></div><div class="ttdeci">PayloadLength adjust_payload_hint(PayloadLength payload_count, PayloadLength physical_payload_hint)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8cpp_source.html#l00233">masstree_storage.cpp:233</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga453ffcac369fa68b5eb5d489e6cdca4f"><div class="ttname"><a href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">foedus::storage::masstree::kMaxPayloadLength</a></div><div class="ttdeci">const PayloadLength kMaxPayloadLength</div><div class="ttdoc">Max length of a payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00098">masstree_id.hpp:98</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a152a0ecbad9b56385ec7f13e8a1fce19_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a152a0ecbad9b56385ec7f13e8a1fce19_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a152a0ecbad9b56385ec7f13e8a1fce19_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a152a0ecbad9b56385ec7f13e8a1fce19_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a032fcdc65647bdea76b8a49014211100" title="foedus::storage::masstree\l::adjust_payload_hint" alt="" coords="232,1667,405,1708"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1assorted.html#a99eded50e5dc85b918f799fdca46a06b" title="foedus::assorted::htobe\l\&lt; uint64_t \&gt;" alt="" coords="239,1732,398,1774"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a826c22a43d97758b61e6b0c230841224" title="foedus::storage::masstree\l::RecordLocation::is_found" alt="" coords="231,1798,407,1839"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="227,636,411,692"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="232,1586,405,1642"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="753,2086,913,2113"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#a952de8a37ed522dc611039c2fa90fa93" title="foedus::storage::masstree\l::RecordLocation::clear" alt="" coords="481,96,655,138"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="758,1448,909,1490"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="481,982,655,1038"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="725,146,941,187"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="758,794,909,835"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="481,392,655,448"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="989,120,1196,162"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="733,80,933,122"/>
<area shape="rect" id="node30" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="747,663,920,704"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602" title="foedus::storage::masstree\l::MasstreePage::within\l_foster_minor" alt="" coords="481,213,655,269"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="493,735,643,776"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5" title="foedus::storage::masstree\l::MasstreePage::get_foster_minor" alt="" coords="459,472,677,514"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607" title="foedus::storage::masstree\l::MasstreePage::get_foster_major" alt="" coords="459,538,677,579"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="478,604,658,660"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="479,1113,657,1169"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="479,902,657,958"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="772,990,895,1031"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="747,1251,920,1322"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="758,1055,909,1096"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="756,924,911,966"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="746,1120,921,1162"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="731,859,935,900"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="729,1186,938,1227"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="747,1346,920,1387"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="747,1550,920,1606"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="1006,222,1179,278"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203" title="prefetch upto keys/separators, whether this page is border or interior. " alt="" coords="747,292,920,348"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="758,728,909,770"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="741,212,926,268"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="741,422,926,478"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5" title="prefetch upto separators. " alt="" coords="741,502,926,558"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="741,582,926,638"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6f2a3dd83d57c3e7ffb7f1dbfcbdfc1" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::check_next_layer_bit" alt="" coords="481,1470,655,1526"/>
<area shape="rect" id="node41" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="507,1631,629,1672"/>
<area shape="rect" id="node42" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aaa0d49b768842255f27147327cc72ef3" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::calculate_log_length" alt="" coords="476,2038,660,2094"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="491,1696,645,1738"/>
<area shape="rect" id="node44" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="475,1762,661,1803"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeInsertLogType.html#a4ea983f4436e0519b7d2aaa7f1ef67a0" title="foedus::storage::masstree\l::MasstreeInsertLogType\l::populate" alt="" coords="481,1828,655,1884"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="479,1908,657,1964"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeOverwriteLogType.html#ad59889a05bfad73c47891ee9be60d7f2" title="foedus::storage::masstree\l::MasstreeOverwriteLogType\l::populate" alt="" coords="475,1244,661,1300"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeUpdateLogType.html#a1a980469e419ba477da51dd4c3c01b47" title="foedus::storage::masstree\l::MasstreeUpdateLogType\l::populate" alt="" coords="481,1324,655,1380"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8" title="foedus::thread::Thread\l::get_numa_node" alt="" coords="493,1404,643,1446"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="481,1550,655,1606"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3bfa9692185bbf487a4775092556a88c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::masstree::MasstreeStorage::upsert_record_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upserts a new record without payload of the given primitive key in this Masstree. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key that is evaluated in the primitive type's comparison rule. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="masstree__storage_8hpp_source.html#l00429">429</a> of file <a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a>.</p>

<p>References <a class="el" href="cxx11_8hpp_source.html#l00132">CXX11_NULLPTR</a>, and <a class="el" href="masstree__storage_8hpp_source.html#l00406">upsert_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">upsert_record_normalized</a>(context, key, <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>, 0U);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  }</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html_ad7be54387721545e6a8191014a370893"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893">foedus::storage::masstree::MasstreeStorage::upsert_record_normalized</a></div><div class="ttdeci">ErrorCode upsert_record_normalized(thread::Thread *context, KeySlice key, const void *payload, PayloadLength payload_count) __attribute__((always_inline))</div><div class="ttdoc">Upserts a new record of the given primitive key in this Masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00406">masstree_storage.hpp:406</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3bfa9692185bbf487a4775092556a88c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3bfa9692185bbf487a4775092556a88c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3bfa9692185bbf487a4775092556a88c_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_a3bfa9692185bbf487a4775092556a88c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad7be54387721545e6a8191014a370893" title="Upserts a new record of the given primitive key in this Masstree. " alt="" coords="227,5,400,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aedee683fbced316953d1cbc622f22c87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::masstree::MasstreeStorage::verify_single_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00575">575</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>

<p>References <a class="el" href="masstree__storage__verify_8cpp_source.html#l00039">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                                                      {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="keywordflow">return</span> MasstreeStoragePimpl(<span class="keyword">this</span>).verify_single_thread(context);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aedee683fbced316953d1cbc622f22c87_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aedee683fbced316953d1cbc622f22c87_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aedee683fbced316953d1cbc622f22c87_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_aedee683fbced316953d1cbc622f22c87_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="227,1170,400,1226"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1229,301,1402,357"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="1494,2007,1669,2048"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="448,1170,627,1226"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a36d78c30d1b07389c3c0e7180e301008" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_first_root_pointer\l_address" alt="" coords="1495,217,1668,288"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1506,377,1657,419"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1504,312,1659,353"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="1494,5,1669,47"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="1479,508,1683,549"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20" title="foedus::storage::masstree\l::MasstreePage::get_high_fence" alt="" coords="1477,573,1686,615"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="1495,639,1668,680"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="1473,443,1689,484"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aca6d912133fd8b46eacb660b840bada0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::get_id" alt="" coords="1495,71,1668,127"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="1506,152,1657,193"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1743,409,1927,451"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="2003,705,2165,747"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2009,409,2159,451"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1979,475,2189,516"/>
<area shape="rect" id="node10" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1992,329,2176,385"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="1739,635,1931,676"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="1743,152,1927,193"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1739,780,1930,821"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="958,1170,1145,1226"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="675,611,896,667"/>
<area shape="rect" id="node25" href="namespacefoedus_1_1storage_1_1masstree.html#acea98e6f343df2d62a9a8f9ddd127234" title="foedus::storage::masstree\l::verify_page_basic" alt="" coords="1229,643,1402,684"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607" title="foedus::storage::masstree\l::MasstreePage::get_foster_major" alt="" coords="1472,952,1691,993"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5" title="foedus::storage::masstree\l::MasstreePage::get_foster_minor" alt="" coords="1472,1017,1691,1059"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="1493,821,1669,863"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1212,912,1419,953"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="1209,1829,1421,1871"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1226,1130,1405,1186"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6318577ff1e6f5106712e9ed60a429fe" title="Whether this page is receiving only sequential inserts. " alt="" coords="1229,1210,1402,1266"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="1240,512,1391,553"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a44cc8d18dc9077ae2310667e88ed5b7c" title="foedus::storage::masstree\l::MasstreePage::get_foster_fence" alt="" coords="1207,577,1424,619"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="1226,1290,1405,1346"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1McsRwLock.html#adc5e6612e3cecf3d2f15d02237b4ef8f" title="foedus::xct::McsRwLock\l::is_locked" alt="" coords="1233,1371,1398,1412"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="1254,1436,1377,1477"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="1254,1501,1377,1543"/>
<area shape="rect" id="node40" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1238,1567,1393,1594"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060" title="foedus::storage::masstree\l::MasstreeBorderPage::verify\l_slot_lengthes" alt="" coords="1221,1618,1410,1674"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="1221,1895,1409,1951"/>
<area shape="rect" id="node43" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1520,1916,1643,1957"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="1226,1698,1405,1754"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1DualPagePointer.html#aedde91e76a6e345f6d19539942f13a43" title="foedus::storage::DualPage\lPointer::is_both_null" alt="" coords="1494,887,1669,928"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1229,431,1402,487"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab55e48873dcf5700871a035c65bfa588" title="used only in masstree. " alt="" coords="1477,704,1685,745"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663" title="An empty&#45;range page, either intermediate or border, never has any entries. " alt="" coords="944,280,1159,321"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_separator" alt="" coords="959,346,1144,402"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="959,578,1144,634"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a94cd69f346f2ebe2df42653e785ff40d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__storage_8cpp_source.html#l00071">71</a> of file <a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                                                {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;MasstreeStorage&gt;&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;id&gt;&quot;</span> &lt;&lt; v.get_id() &lt;&lt; <span class="stringliteral">&quot;&lt;/id&gt;&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;name&gt;&quot;</span> &lt;&lt; v.get_name() &lt;&lt; <span class="stringliteral">&quot;&lt;/name&gt;&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/MasstreeStorage&gt;&quot;</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/masstree/<a class="el" href="masstree__storage_8hpp_source.html">masstree_storage.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/masstree/<a class="el" href="masstree__storage_8cpp_source.html">masstree_storage.cpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/masstree/<a class="el" href="masstree__storage__peek_8cpp_source.html">masstree_storage_peek.cpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/masstree/<a class="el" href="masstree__storage__pimpl_8cpp_source.html">masstree_storage_pimpl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1masstree.html">masstree</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
