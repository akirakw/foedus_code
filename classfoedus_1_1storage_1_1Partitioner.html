<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::Partitioner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1Partitioner.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1Partitioner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::Partitioner Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Partitioning and sorting logic for one storage.  
 <a href="classfoedus_1_1storage_1_1Partitioner.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Partitioning and sorting logic for one storage. </p>
<p>When the snapshot module takes snapshot, it instantiates this object for each storage that had some log. Mappers obtain the object and use it to determine which partition to send logs to. Reducers also use it to sort individual logs in the storage by key-then-ordinal order. All methods in this object are in a batched style to avoid overheads per small log entry.</p>
<dl class="section user"><dt>Partitioning Algorithm</dt><dd>So far, create_partitioner() receives only the engine object and ID to design partitioning. This means we can use only information available in the status-quo of the storage in the engine, such as which node owns which volatile/snapshot page. This is so far enough and VERY simple/efficient to design partitioning, but later we might want to explore smarter partitioning that utilizes, say, log entries. (but that will be complex/expensive!)</dd></dl>
<dl class="section user"><dt>Sorting Algorithm</dt><dd>Sorting algorithm <em>may</em> use metadata specific to the storage (not just storage type). For example, if we somehow know that every key in the storage is 8 byte, we can do something very efficient. Or, in some case the requirement of sorting itself might depend on the storage.</dd></dl>
<dl class="section user"><dt>Shared memory, No virtual methods</dt><dd>Unfortunately, virtual methods are hard to use in multi-process and multi-node environment. All dynamic data of <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> is stored in shared memory as explained in <a class="el" href="structfoedus_1_1storage_1_1PartitionerMetadata.html" title="Tiny metadata of partitioner for every storage used while log gleaning. ">PartitionerMetadata</a>. Thus, <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> has no virtual methods. It just does switch-case on the storage type and invokes methods in individual partitioners (which aren't derived classes of this).</dd></dl>
<p>For more details of how individual storage types implement them, see the individual partitioners. </p>

<p>Definition at line <a class="el" href="partitioner_8hpp_source.html#l00070">70</a> of file <a class="el" href="partitioner_8hpp_source.html">partitioner.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="partitioner_8hpp_source.html">partitioner.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::storage::Partitioner:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner__inherit__graph.png" border="0" usemap="#foedus_1_1storage_1_1Partitioner_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1storage_1_1Partitioner_inherit__map" id="foedus_1_1storage_1_1Partitioner_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; PartitionerMetadata \&gt;" alt="" coords="15,5,174,47"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::storage::Partitioner:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner__coll__graph.png" border="0" usemap="#foedus_1_1storage_1_1Partitioner_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1storage_1_1Partitioner_coll__map" id="foedus_1_1storage_1_1Partitioner_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; PartitionerMetadata \&gt;" alt="" coords="108,199,267,240"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PartitionerMetadata.html" title="Tiny metadata of partitioner for every storage used while log gleaning. " alt="" coords="6,95,185,136"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="5,5,180,32"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. " alt="" coords="213,102,321,129"/>
<area shape="rect" id="node6" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="204,5,336,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">DesignPartitionArguments</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arguments for <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a31a7e393bf1f87a9a039c60b291ac9d1" title="Determines partitioning scheme for this storage. ">design_partition()</a>  <a href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">PartitionBatchArguments</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arguments for <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. ">partition_batch()</a>  <a href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">SortBatchArguments</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments"><td class="mdescLeft">&#160;</td><td class="mdescRight">Arguments for <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a8c8909d8a44ae9d6a4afee0ded0add4c" title="Called from log reducer to sort log entries by keys. ">sort_batch()</a>  <a href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8e05126b479994e3f0090faefb82977b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a8e05126b479994e3f0090faefb82977b">Partitioner</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> id)</td></tr>
<tr class="memdesc:a8e05126b479994e3f0090faefb82977b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiate an instance for the given storage.  <a href="#a8e05126b479994e3f0090faefb82977b">More...</a><br /></td></tr>
<tr class="separator:a8e05126b479994e3f0090faefb82977b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1252d29199aed8b2d0172807bec3b6d5"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1PartitionerMetadata.html">PartitionerMetadata</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a1252d29199aed8b2d0172807bec3b6d5">get_metadata</a> () const </td></tr>
<tr class="memdesc:a1252d29199aed8b2d0172807bec3b6d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns tiny metadata of the partitioner in shared memory.  <a href="#a1252d29199aed8b2d0172807bec3b6d5">More...</a><br /></td></tr>
<tr class="separator:a1252d29199aed8b2d0172807bec3b6d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb61a23b3b2762e24b8d1d6d1cb491b9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#acb61a23b3b2762e24b8d1d6d1cb491b9">is_valid</a> () const </td></tr>
<tr class="memdesc:acb61a23b3b2762e24b8d1d6d1cb491b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">whether this object is ready for partitioning.  <a href="#acb61a23b3b2762e24b8d1d6d1cb491b9">More...</a><br /></td></tr>
<tr class="separator:acb61a23b3b2762e24b8d1d6d1cb491b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a051bf3e320d277b6ad0f450254a1f3e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a051bf3e320d277b6ad0f450254a1f3e0">get_storage_id</a> () const </td></tr>
<tr class="separator:a051bf3e320d277b6ad0f450254a1f3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a6efbb9470d42bbdd75a04d0fd61c71"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga016025043f5ef9c02be03f2f2a17a0de">StorageType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a0a6efbb9470d42bbdd75a04d0fd61c71">get_storage_type</a> () const </td></tr>
<tr class="separator:a0a6efbb9470d42bbdd75a04d0fd61c71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac031b933b72d2890fd24b90b1685110a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#ac031b933b72d2890fd24b90b1685110a">is_partitionable</a> ()</td></tr>
<tr class="memdesc:ac031b933b72d2890fd24b90b1685110a"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns if this storage is partitionable.  <a href="#ac031b933b72d2890fd24b90b1685110a">More...</a><br /></td></tr>
<tr class="separator:ac031b933b72d2890fd24b90b1685110a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a7e393bf1f87a9a039c60b291ac9d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a31a7e393bf1f87a9a039c60b291ac9d1">design_partition</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">DesignPartitionArguments</a> &amp;args)</td></tr>
<tr class="memdesc:a31a7e393bf1f87a9a039c60b291ac9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines partitioning scheme for this storage.  <a href="#a31a7e393bf1f87a9a039c60b291ac9d1">More...</a><br /></td></tr>
<tr class="separator:a31a7e393bf1f87a9a039c60b291ac9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7b2f626b460815615663be4d22427f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f">partition_batch</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">PartitionBatchArguments</a> &amp;args)</td></tr>
<tr class="memdesc:a8c7b2f626b460815615663be4d22427f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Identifies the partition of each log record in a batched fashion.  <a href="#a8c7b2f626b460815615663be4d22427f">More...</a><br /></td></tr>
<tr class="separator:a8c7b2f626b460815615663be4d22427f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c8909d8a44ae9d6a4afee0ded0add4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a8c8909d8a44ae9d6a4afee0ded0add4c">sort_batch</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">SortBatchArguments</a> &amp;args)</td></tr>
<tr class="memdesc:a8c8909d8a44ae9d6a4afee0ded0add4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called from log reducer to sort log entries by keys.  <a href="#a8c8909d8a44ae9d6a4afee0ded0add4c">More...</a><br /></td></tr>
<tr class="separator:a8c8909d8a44ae9d6a4afee0ded0add4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; PartitionerMetadata &gt;</a></td></tr>
<tr class="memitem:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ab3209bc9bd57c99f0ad601f33ec77d1e">Attachable</a> ()</td></tr>
<tr class="separator:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad91af21656ffcf7eeb56a5f7d0f5f661">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ac28be42953c806e4c4e0ad8f99201dae">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, PartitionerMetadata *control_block)</td></tr>
<tr class="separator:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad1182f6bd28f64e3c48bf5ee36d54cce">Attachable</a> (PartitionerMetadata *control_block)</td></tr>
<tr class="separator:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a7892c78e38fb5f025ea73939a25c9d2e">Attachable</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aed95388e1a77a81a5d7d04cf28ef3577">~Attachable</a> ()</td></tr>
<tr class="separator:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a0666676a4eaed1c0fdf94a2e1b00c099">operator=</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a484796b2fffa361b9a6ed2f1b7f61a35">attach</a> (PartitionerMetadata *control_block)</td></tr>
<tr class="memdesc:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches to the given shared memory.  <a href="#a484796b2fffa361b9a6ed2f1b7f61a35">More...</a><br /></td></tr>
<tr class="separator:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aebf4adece08c298864ce05ddd9461a0c">is_attached</a> () const</td></tr>
<tr class="memdesc:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already attached to some shared memory.  <a href="#aebf4adece08c298864ce05ddd9461a0c">More...</a><br /></td></tr>
<tr class="separator:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">PartitionerMetadata *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad">get_control_block</a> () const</td></tr>
<tr class="separator:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a44f07b6dbb803d41d16b40182e8ff583">get_engine</a> () const</td></tr>
<tr class="separator:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#acd701f80820c2ef1f665bda157346021">set_engine</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a91cf59326f9e56d16e89ea8a5da8c913"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html#a91cf59326f9e56d16e89ea8a5da8c913">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a> &amp;v)</td></tr>
<tr class="separator:a91cf59326f9e56d16e89ea8a5da8c913"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; PartitionerMetadata &gt;</a></td></tr>
<tr class="memitem:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a></td></tr>
<tr class="memdesc:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most attachable object stores an engine pointer (local engine), so we define it here.  <a href="#a5f84f871a1d36f9ee990f3175661cd99">More...</a><br /></td></tr>
<tr class="separator:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">PartitionerMetadata *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a></td></tr>
<tr class="memdesc:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The shared data on shared memory that has been initialized in some SOC or master engine.  <a href="#af9f87c691e2df0b04322e6df8d7c0d81">More...</a><br /></td></tr>
<tr class="separator:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8e05126b479994e3f0090faefb82977b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::Partitioner::Partitioner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instantiate an instance for the given storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">engine</td><td><a class="el" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. ">Engine</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>ID of the storage</td></tr>
  </table>
  </dd>
</dl>
<p>This method only attaches to a shared memory, so it has no cost. You can instantiate <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> anywhere you like. </p>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00084">84</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage__manager_8cpp_source.html#l00047">foedus::storage::StorageManager::get_storage()</a>, <a class="el" href="engine_8cpp_source.html#l00060">foedus::Engine::get_storage_manager()</a>, <a class="el" href="storage__id_8hpp_source.html#l00124">foedus::storage::kInvalidStorage</a>, <a class="el" href="storage_8hpp_source.html#l00084">foedus::storage::StorageControlBlock::meta_</a>, and <a class="el" href="metadata_8hpp_source.html#l00105">foedus::storage::Metadata::type_</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  : <a class="code" href="classfoedus_1_1Attachable.html">Attachable&lt; PartitionerMetadata &gt;</a>(engine, <a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#aa6e48ddb92bb1c1b572cc3b90e19daf9">PartitionerMetadata::get_metadata</a>(engine, <span class="keywordtype">id</span>)) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  id_ = id;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  type_ = engine-&gt;get_storage_manager()-&gt;get_storage(<span class="keywordtype">id</span>)-&gt;meta_.type_;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(type_ != <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea8ce620f53e9dd4d037ff2b30c175d8bb">kInvalidStorage</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea8ce620f53e9dd4d037ff2b30c175d8bb"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea8ce620f53e9dd4d037ff2b30c175d8bb">foedus::storage::kInvalidStorage</a></div><div class="ttdoc">0 indicates invalid type. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00124">storage_id.hpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html"><div class="ttname"><a href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; PartitionerMetadata &gt;</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_aa6e48ddb92bb1c1b572cc3b90e19daf9"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#aa6e48ddb92bb1c1b572cc3b90e19daf9">foedus::storage::PartitionerMetadata::get_metadata</a></div><div class="ttdeci">static PartitionerMetadata * get_metadata(Engine *engine, StorageId id)</div><div class="ttdoc">Returns the shared memory for the given storage ID. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00038">partitioner.cpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner_a8e05126b479994e3f0090faefb82977b_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1Partitioner_a8e05126b479994e3f0090faefb82977b_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1Partitioner_a8e05126b479994e3f0090faefb82977b_cgraph" id="classfoedus_1_1storage_1_1Partitioner_a8e05126b479994e3f0090faefb82977b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1StorageManager.html#a62a5d09952fe340dc03da8460f200523" title="Returns the storage of given ID. " alt="" coords="232,5,396,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#ac27d3734638fe8d18fbdc9b4ee4666b2" title="See Storage Manager. " alt="" coords="247,71,381,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#aea8861d6bf6c13c0df6d0c9777cdaa99" title="foedus::storage::Storage\lManagerPimpl::get_storage" alt="" coords="444,5,625,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a31a7e393bf1f87a9a039c60b291ac9d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::Partitioner::design_partition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">DesignPartitionArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines partitioning scheme for this storage. </p>
<p>This method puts the resulting data in shared memory. This method should be called only once per snapshot. </p>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00106">106</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="sequential__partitioner__impl_8cpp_source.html#l00033">foedus::storage::sequential::SequentialPartitioner::design_partition()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00068">foedus::storage::hash::HashPartitioner::design_partition()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00073">foedus::storage::array::ArrayPartitioner::design_partition()</a>, <a class="el" href="masstree__partitioner__impl_8cpp_source.html#l00064">foedus::storage::masstree::MasstreePartitioner::design_partition()</a>, <a class="el" href="storage__id_8hpp_source.html#l00126">foedus::storage::kArrayStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00128">foedus::storage::kHashStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00130">foedus::storage::kMasstreeStorage</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, and <a class="el" href="storage__id_8hpp_source.html#l00132">foedus::storage::kSequentialStorage</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                                             {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">switch</span> (type_) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">kArrayStorage</a>: <span class="keywordflow">return</span> array::ArrayPartitioner(<span class="keyword">this</span>).design_partition(args);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">kHashStorage</a>: <span class="keywordflow">return</span> hash::HashPartitioner(<span class="keyword">this</span>).design_partition(args);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">kSequentialStorage</a>: <span class="keywordflow">return</span> sequential::SequentialPartitioner(<span class="keyword">this</span>).design_partition(args);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">kMasstreeStorage</a>: <span class="keywordflow">return</span> masstree::MasstreePartitioner(<span class="keyword">this</span>).design_partition(args);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Unsupported storage type:&quot;</span> &lt;&lt; type_;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">foedus::storage::kMasstreeStorage</a></div><div class="ttdoc">Masstree Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00130">storage_id.hpp:130</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">foedus::storage::kHashStorage</a></div><div class="ttdoc">Hashtable Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00128">storage_id.hpp:128</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">foedus::storage::kSequentialStorage</a></div><div class="ttdoc">Sequential Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00132">storage_id.hpp:132</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">foedus::storage::kArrayStorage</a></div><div class="ttdoc">Array Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00126">storage_id.hpp:126</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner_a31a7e393bf1f87a9a039c60b291ac9d1_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1Partitioner_a31a7e393bf1f87a9a039c60b291ac9d1_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1Partitioner_a31a7e393bf1f87a9a039c60b291ac9d1_cgraph" id="classfoedus_1_1storage_1_1Partitioner_a31a7e393bf1f87a9a039c60b291ac9d1_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPartitioner.html#a28fcf4aa7b68cc48df5453635b016821" title="foedus::storage::sequential\l::SequentialPartitioner\l::design_partition" alt="" coords="232,323,411,379"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a9def1e9584cd2af4bae4d2b0c0ca10e4" title="foedus::storage::hash\l::HashPartitioner::design\l_partition" alt="" coords="239,1179,404,1235"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a7002637fe43ab0917bead1d4636805ad" title="foedus::storage::array\l::ArrayPartitioner::design\l_partition" alt="" coords="705,835,871,891"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePartitioner.html#a1aedc45cc5621bd3889f1bf2d47ab79c" title="foedus::storage::masstree\l::MasstreePartitioner::\ldesign_partition" alt="" coords="701,471,875,527"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9" title="foedus::soc::SharedMutex\l::is_initialized" alt="" coords="953,1165,1128,1207"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="959,1231,1123,1272"/>
<area shape="rect" id="node6" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="975,1296,1107,1337"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a092465b1ea5688d713e3f73aaf13a23c" title="foedus::storage::hash\l::HashStorage::get_bin_count" alt="" coords="459,1489,653,1531"/>
<area shape="rect" id="node8" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5" title="Shorthand for get_options().thread_.group_count_. " alt="" coords="973,5,1108,47"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a8a021a76343caea658b2302b6edad299" title="foedus::storage::hash\l::HashPartitionerData\l::object_size" alt="" coords="483,1555,629,1611"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a" title="Allocates a patitioner data in shared memory of the given size. " alt="" coords="951,413,1130,455"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e" title="Returns the partitioner data pointed from this metadata. " alt="" coords="951,479,1130,520"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a37d93cdda67dd88454e0237f8a511995" title="foedus::storage::hash\l::HashStorage::get_levels" alt="" coords="955,1653,1126,1695"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af921bcfaca8b99564cc6b6cefed87e65" title="foedus::storage::hash\l::HashStorage::get_bin_bits" alt="" coords="465,1023,647,1064"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a6dc142a2ed0509104e377e10a6d6a034" title="foedus::storage::hash\l::HashStorage::get_bin\l_shifts" alt="" coords="479,1089,633,1145"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a40234c7f9cecf06a33b99e1556406792" title="foedus::storage::hash\l::HashPartitioner::design\l_partition_task" alt="" coords="705,1354,871,1410"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1storage_1_1hash.html#a3ac47a0c2d690309d487f26b3a08a9b4" title="foedus::storage::hash\l::design_partition_thread" alt="" coords="474,1321,638,1363"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SharedMutexScope.html#a51a27729ac214786ce97d32ae80dd6f7" title="foedus::soc::SharedMutex\lScope::get_mutex" alt="" coords="1226,332,1401,373"/>
<area shape="rect" id="node12" href="classfoedus_1_1soc_1_1SharedMutexScope.html#a9576d709cf25478f4fe81a8362ba7636" title="foedus::soc::SharedMutex\lScope::is_locked_by_me" alt="" coords="1226,267,1401,308"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a889951c15caacc4d60b446f6c6c56cde" title="Returns the special index&#45;0 entry that manages data block allocation for partitioners. " alt="" coords="1209,449,1417,491"/>
<area shape="rect" id="node14" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="1493,467,1628,508"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="1471,395,1651,436"/>
<area shape="rect" id="node16" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb" title="foedus::soc::SharedMemory\lRepo::get_global_memory\l_anchors" alt="" coords="1468,547,1653,603"/>
<area shape="rect" id="node18" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1246,617,1381,659"/>
<area shape="rect" id="node23" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="973,1019,1108,1060"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="935,1085,1146,1141"/>
<area shape="rect" id="node25" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="939,953,1142,995"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a6ddc93fb5df01249140895435819da2f" title="foedus::storage::hash\l::HashIntermediatePage\l::get_level" alt="" coords="960,1573,1121,1629"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a9027ebbc2ee535519916906978347be9" title="foedus::storage::hash\l::HashIntermediatePage\l::get_pointer" alt="" coords="960,1493,1121,1549"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="960,1361,1121,1403"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="944,1427,1137,1468"/>
<area shape="rect" id="node26" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1236,953,1391,995"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1486,924,1635,965"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1227,1019,1400,1060"/>
<area shape="rect" id="node30" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1212,1085,1415,1141"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1480,1109,1641,1151"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3a535c4b81884868a2a5ead00428dd77" title="Returns the number of levels. " alt="" coords="955,676,1126,717"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="941,741,1140,783"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="967,807,1115,848"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="959,873,1122,929"/>
<area shape="rect" id="node41" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="947,545,1135,601"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad79701492d232cb5aec1ad4d8c99eb5d" title="If the current size is smaller than the given size, automatically expands. " alt="" coords="934,71,1147,112"/>
<area shape="rect" id="node46" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="934,136,1147,177"/>
<area shape="rect" id="node47" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="947,201,1134,243"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="953,267,1128,308"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5" title="foedus::storage::masstree\l::MasstreeIntermediatePointerIterator\l::is_valid" alt="" coords="923,333,1159,389"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="1207,96,1420,137"/>
<area shape="rect" id="node45" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b" title="Releases the memory block. " alt="" coords="1207,31,1420,72"/>
<area shape="rect" id="node48" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1213,186,1413,242"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1252d29199aed8b2d0172807bec3b6d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1PartitionerMetadata.html">PartitionerMetadata</a> &amp; foedus::storage::Partitioner::get_metadata </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns tiny metadata of the partitioner in shared memory. </p>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00091">91</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; PartitionerMetadata &gt;::control_block_</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{ <span class="keywordflow">return</span> *<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>; }</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; PartitionerMetadata &gt;::control_block_</a></div><div class="ttdeci">PartitionerMetadata * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a051bf3e320d277b6ad0f450254a1f3e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> foedus::storage::Partitioner::get_storage_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioner_8hpp_source.html#l00086">86</a> of file <a class="el" href="partitioner_8hpp_source.html">partitioner.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{ <span class="keywordflow">return</span> id_;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a6efbb9470d42bbdd75a04d0fd61c71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STORAGE.html#ga016025043f5ef9c02be03f2f2a17a0de">StorageType</a> foedus::storage::Partitioner::get_storage_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioner_8hpp_source.html#l00087">87</a> of file <a class="el" href="partitioner_8hpp_source.html">partitioner.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;{ <span class="keywordflow">return</span> type_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac031b933b72d2890fd24b90b1685110a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::Partitioner::is_partitionable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns if this storage is partitionable. </p>
<p>Some storage, such as a B-tree with only a single page (root=leaf), it is impossible to partition. In that case, this returns false to indicate that the caller can just assume all logs should be blindly sent to partition-0. Similarly, if there is only one NUMA node (partition), the caller also skips partitioning, but in that case the caller even skips instantiating partitioners. </p>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00094">94</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="sequential__partitioner__impl_8hpp_source.html#l00055">foedus::storage::sequential::SequentialPartitioner::is_partitionable()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00059">foedus::storage::hash::HashPartitioner::is_partitionable()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00068">foedus::storage::array::ArrayPartitioner::is_partitionable()</a>, <a class="el" href="masstree__partitioner__impl_8cpp_source.html#l00280">foedus::storage::masstree::MasstreePartitioner::is_partitionable()</a>, <a class="el" href="storage__id_8hpp_source.html#l00126">foedus::storage::kArrayStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00128">foedus::storage::kHashStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00130">foedus::storage::kMasstreeStorage</a>, and <a class="el" href="storage__id_8hpp_source.html#l00132">foedus::storage::kSequentialStorage</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                   {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">switch</span> (type_) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">kArrayStorage</a>: <span class="keywordflow">return</span> array::ArrayPartitioner(<span class="keyword">this</span>).is_partitionable();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">kHashStorage</a>: <span class="keywordflow">return</span> hash::HashPartitioner(<span class="keyword">this</span>).is_partitionable();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">kMasstreeStorage</a>: <span class="keywordflow">return</span> masstree::MasstreePartitioner(<span class="keyword">this</span>).is_partitionable();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">kSequentialStorage</a>: <span class="keywordflow">return</span> sequential::SequentialPartitioner(<span class="keyword">this</span>).is_partitionable();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Unsupported storage type:&quot;</span> &lt;&lt; type_;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">foedus::storage::kMasstreeStorage</a></div><div class="ttdoc">Masstree Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00130">storage_id.hpp:130</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">foedus::storage::kHashStorage</a></div><div class="ttdoc">Hashtable Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00128">storage_id.hpp:128</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">foedus::storage::kSequentialStorage</a></div><div class="ttdoc">Sequential Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00132">storage_id.hpp:132</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">foedus::storage::kArrayStorage</a></div><div class="ttdoc">Array Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00126">storage_id.hpp:126</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner_ac031b933b72d2890fd24b90b1685110a_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1Partitioner_ac031b933b72d2890fd24b90b1685110a_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1Partitioner_ac031b933b72d2890fd24b90b1685110a_cgraph" id="classfoedus_1_1storage_1_1Partitioner_ac031b933b72d2890fd24b90b1685110a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPartitioner.html#a9ae7479d04a07a4693b65c022b5ba4e6" title="foedus::storage::sequential\l::SequentialPartitioner\l::is_partitionable" alt="" coords="232,5,411,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#ac4d264f4a25f67bbab59b7a2f4cc4214" title="foedus::storage::hash\l::HashPartitioner::is\l_partitionable" alt="" coords="248,85,395,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a3c58729bbfe5d0d46d5812a6d876c2ea" title="foedus::storage::array\l::ArrayPartitioner::is\l_partitionable" alt="" coords="247,165,395,221"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePartitioner.html#af7ec6a90c21df726dca9abfa46ea465a" title="foedus::storage::masstree\l::MasstreePartitioner::\lis_partitionable" alt="" coords="235,245,408,301"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acb61a23b3b2762e24b8d1d6d1cb491b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::Partitioner::is_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>whether this object is ready for partitioning. </p>
<p>if only sorting is needed, it doesn't matter </p>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00092">92</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; PartitionerMetadata &gt;::control_block_</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;valid_; }</div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; PartitionerMetadata &gt;::control_block_</a></div><div class="ttdeci">PartitionerMetadata * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c7b2f626b460815615663be4d22427f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::Partitioner::partition_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">PartitionBatchArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Identifies the partition of each log record in a batched fashion. </p>
<dl class="section pre"><dt>Precondition</dt><dd>!is_partitionable(): in this case, it's waste of time. check it before calling this.</dd></dl>
<p>Each storage type implements this method based on the statistics passed to create_partitioner(). For better performance, logs_count is usually at least thousands. Assume the scale when you optimize the implementation in derived classes. </p>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00118">118</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="storage__id_8hpp_source.html#l00126">foedus::storage::kArrayStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00128">foedus::storage::kHashStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00130">foedus::storage::kMasstreeStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00132">foedus::storage::kSequentialStorage</a>, <a class="el" href="sequential__partitioner__impl_8cpp_source.html#l00042">foedus::storage::sequential::SequentialPartitioner::partition_batch()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00184">foedus::storage::hash::HashPartitioner::partition_batch()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00175">foedus::storage::array::ArrayPartitioner::partition_batch()</a>, and <a class="el" href="masstree__partitioner__impl_8cpp_source.html#l00284">foedus::storage::masstree::MasstreePartitioner::partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                                                                {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">switch</span> (type_) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">kArrayStorage</a>: <span class="keywordflow">return</span> array::ArrayPartitioner(<span class="keyword">this</span>).partition_batch(args);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">kHashStorage</a>: <span class="keywordflow">return</span> hash::HashPartitioner(<span class="keyword">this</span>).partition_batch(args);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">kMasstreeStorage</a>: <span class="keywordflow">return</span> masstree::MasstreePartitioner(<span class="keyword">this</span>).partition_batch(args);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">kSequentialStorage</a>: <span class="keywordflow">return</span> sequential::SequentialPartitioner(<span class="keyword">this</span>).partition_batch(args);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Unsupported storage type:&quot;</span> &lt;&lt; type_;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">foedus::storage::kMasstreeStorage</a></div><div class="ttdoc">Masstree Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00130">storage_id.hpp:130</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">foedus::storage::kHashStorage</a></div><div class="ttdoc">Hashtable Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00128">storage_id.hpp:128</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">foedus::storage::kSequentialStorage</a></div><div class="ttdoc">Sequential Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00132">storage_id.hpp:132</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">foedus::storage::kArrayStorage</a></div><div class="ttdoc">Array Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00126">storage_id.hpp:126</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner_a8c7b2f626b460815615663be4d22427f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1Partitioner_a8c7b2f626b460815615663be4d22427f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1Partitioner_a8c7b2f626b460815615663be4d22427f_cgraph" id="classfoedus_1_1storage_1_1Partitioner_a8c7b2f626b460815615663be4d22427f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPartitioner.html#a08e8b80440d8fcebfcc34e7e6d99ba04" title="foedus::storage::sequential\l::SequentialPartitioner\l::partition_batch" alt="" coords="249,159,428,215"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a7b2f3ff32863d2e4e44c96b93071067e" title="foedus::storage::hash\l::HashPartitioner::partition_batch" alt="" coords="233,239,445,281"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a69580ef7442b8b75d49f3e277614210f" title="foedus::storage::array\l::ArrayPartitioner::partition_batch" alt="" coords="232,455,445,497"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePartitioner.html#aa88be4c928d4254f51e1e1252680f87e" title="foedus::storage::masstree\l::MasstreePartitioner::\lpartition_batch" alt="" coords="252,859,425,915"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#ac4d264f4a25f67bbab59b7a2f4cc4214" title="foedus::storage::hash\l::HashPartitioner::is\l_partitionable" alt="" coords="517,152,664,208"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a6dc142a2ed0509104e377e10a6d6a034" title="foedus::storage::hash\l::HashStorage::get_bin\l_shifts" alt="" coords="513,232,668,288"/>
<area shape="rect" id="node6" href="structfoedus_1_1snapshot_1_1LogBuffer.html#a4c866d7cc1684237eca5fff49215b80e" title="foedus::snapshot::LogBuffer\l::resolve" alt="" coords="757,426,940,467"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#a409566a4b1453421a1eaa945d561c751" title="foedus::storage::hash\l::HashCommonLogType::\lassert_type" alt="" coords="507,5,675,61"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a092465b1ea5688d713e3f73aaf13a23c" title="foedus::storage::hash\l::HashStorage::get_bin_count" alt="" coords="493,86,688,127"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a" title="foedus::snapshot::from\l_buffer_position" alt="" coords="1009,426,1164,467"/>
<area shape="rect" id="node9" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="775,13,922,54"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a3c58729bbfe5d0d46d5812a6d876c2ea" title="foedus::storage::array\l::ArrayPartitioner::is\l_partitionable" alt="" coords="517,560,665,616"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#ab9ba95f6207ac07472ec52a804f599a4" title="foedus::storage::array\l::ArrayPartitioner::get\l_array_size" alt="" coords="517,640,665,696"/>
<area shape="rect" id="node14" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="502,363,679,405"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a51681c42f28279349497ec3eefcb0798" title="foedus::storage::array\l::ArrayPartitioner::get\l_bucket_owners" alt="" coords="517,480,665,536"/>
<area shape="rect" id="node15" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="760,361,937,402"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePartitioner.html#af7ec6a90c21df726dca9abfa46ea465a" title="foedus::storage::masstree\l::MasstreePartitioner::\lis_partitionable" alt="" coords="504,1064,677,1120"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage_1_1masstree.html#a7df011f1d7015440e30e6013add5a667" title="foedus::storage::masstree\l::resolve_log" alt="" coords="504,801,677,842"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeCommonLogType.html#aee0dcbac82c0486cd1d527f408b65c37" title="foedus::storage::masstree\l::MasstreeCommonLogType\l::get_key" alt="" coords="499,720,683,776"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1masstree_1_1MasstreePartitionerData.html#ab637b0800009ad0f2ff8c2716bf1fee8" title="Returns the partition (node ID) that should contain the key. " alt="" coords="504,984,677,1040"/>
<area shape="rect" id="node25" href="classfoedus_1_1debugging_1_1RdtscWatch.html#a0f5961269d79e636777d722ade37dd2e" title="Take another current time tick. " alt="" coords="523,866,658,907"/>
<area shape="rect" id="node26" href="classfoedus_1_1debugging_1_1RdtscWatch.html#afc5d436b00dfd6af4727e4975e84aa75" title="foedus::debugging::\lRdtscWatch::elapsed" alt="" coords="775,921,922,962"/>
<area shape="rect" id="node20" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="771,790,926,831"/>
<area shape="rect" id="node23" href="group__MASSTREE.html#gaca11c6ba81d4c4c7708ca3bcdff3bfa0" title="Returns if the given key is 8&#45;bytes aligned and also zero&#45;padded to 8&#45;bytes for easier slicing (which..." alt="" coords="736,1067,961,1109"/>
<area shape="rect" id="node24" href="group__MASSTREE.html#ga48710f51199feed3db2e2f374ae73814" title="Convert an aligned big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="762,987,935,1043"/>
<area shape="rect" id="node27" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="781,855,916,897"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c8909d8a44ae9d6a4afee0ded0add4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::Partitioner::sort_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">SortBatchArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called from log reducer to sort log entries by keys. </p>
<p>All log entries passed to this method are for this storage. Each storage type implements an efficient and batched way of sorting all log entries by key-and-then-ordinal. The implementation can do <b>compaction</b> when it is safe. For example, two <em>ovewrite</em> logs on the same key's same data region can be compacted to one log. In that case, written_count becomes smaller than log_positions_count_. </p><dl class="section see"><dt>See also</dt><dd>get_required_sort_buffer_size() </dd></dl>

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00129">129</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>

<p>References <a class="el" href="storage__id_8hpp_source.html#l00126">foedus::storage::kArrayStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00128">foedus::storage::kHashStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00130">foedus::storage::kMasstreeStorage</a>, <a class="el" href="storage__id_8hpp_source.html#l00132">foedus::storage::kSequentialStorage</a>, <a class="el" href="sequential__partitioner__impl_8cpp_source.html#l00050">foedus::storage::sequential::SequentialPartitioner::sort_batch()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00329">foedus::storage::hash::HashPartitioner::sort_batch()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00312">foedus::storage::array::ArrayPartitioner::sort_batch()</a>, and <a class="el" href="masstree__partitioner__impl_8cpp_source.html#l00489">foedus::storage::masstree::MasstreePartitioner::sort_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                                      {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">switch</span> (type_) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">kArrayStorage</a>: <span class="keywordflow">return</span> array::ArrayPartitioner(<span class="keyword">this</span>).sort_batch(args);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">kHashStorage</a>: <span class="keywordflow">return</span> hash::HashPartitioner(<span class="keyword">this</span>).sort_batch(args);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">kMasstreeStorage</a>: <span class="keywordflow">return</span> masstree::MasstreePartitioner(<span class="keyword">this</span>).sort_batch(args);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">kSequentialStorage</a>: <span class="keywordflow">return</span> sequential::SequentialPartitioner(<span class="keyword">this</span>).sort_batch(args);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;Unsupported storage type:&quot;</span> &lt;&lt; type_;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea132b35d3a56bd101207d58348d70bf9e">foedus::storage::kMasstreeStorage</a></div><div class="ttdoc">Masstree Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00130">storage_id.hpp:130</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea993bf93d3a4a03a67253fb2da12e3bdc">foedus::storage::kHashStorage</a></div><div class="ttdoc">Hashtable Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00128">storage_id.hpp:128</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0dea0d282d3546345301294188204cff05a6">foedus::storage::kSequentialStorage</a></div><div class="ttdoc">Sequential Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00132">storage_id.hpp:132</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff"><div class="ttname"><a href="group__STORAGE.html#gga016025043f5ef9c02be03f2f2a17a0deaeee5e98ab1c99fca614ecba38b2871ff">foedus::storage::kArrayStorage</a></div><div class="ttdoc">Array Storage </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00126">storage_id.hpp:126</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1Partitioner_a8c8909d8a44ae9d6a4afee0ded0add4c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1Partitioner_a8c8909d8a44ae9d6a4afee0ded0add4c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1Partitioner_a8c8909d8a44ae9d6a4afee0ded0add4c_cgraph" id="classfoedus_1_1storage_1_1Partitioner_a8c8909d8a44ae9d6a4afee0ded0add4c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPartitioner.html#a68ac2ac8b0bd2b3abb4ec0fa921e700f" title="foedus::storage::sequential\l::SequentialPartitioner\l::sort_batch" alt="" coords="237,319,416,375"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a8255043c6cb91246cbff43cceb88f596" title="foedus::storage::hash\l::HashPartitioner::sort_batch" alt="" coords="233,400,421,441"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#abcc2f61287dd0e9f643cc7c7b406ed32" title="foedus::storage::array\l::ArrayPartitioner::sort_batch" alt="" coords="232,465,421,507"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePartitioner.html#afac4c5dbd64695fb997e570dec3a5745" title="foedus::storage::masstree\l::MasstreePartitioner::\lsort_batch" alt="" coords="240,531,413,587"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad79701492d232cb5aec1ad4d8c99eb5d" title="If the current size is smaller than the given size, automatically expands. " alt="" coords="469,220,683,261"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="469,465,683,507"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1hash.html#a213ec023dfa3d7901e0c40ce20fc538d" title="subroutine of sort_batch " alt="" coords="502,335,650,376"/>
<area shape="rect" id="node19" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="509,629,643,671"/>
<area shape="rect" id="node22" href="classfoedus_1_1debugging_1_1StopWatch.html#ac8a42ba406ab38b098e27a19e6803638" title="foedus::debugging::\lStopWatch::elapsed_ms" alt="" coords="493,400,659,441"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1storage_1_1hash.html#a57d8decda1736a1f9bf339edf46a58f3" title="subroutine of sort_batch " alt="" coords="503,56,649,97"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="731,71,944,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b" title="Releases the memory block. " alt="" coords="731,136,944,177"/>
<area shape="rect" id="node9" href="structfoedus_1_1snapshot_1_1LogBuffer.html#a4c866d7cc1684237eca5fff49215b80e" title="foedus::snapshot::LogBuffer\l::resolve" alt="" coords="746,531,929,572"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#a409566a4b1453421a1eaa945d561c751" title="foedus::storage::hash\l::HashCommonLogType::\lassert_type" alt="" coords="753,202,921,258"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="776,465,899,507"/>
<area shape="rect" id="node15" href="classfoedus_1_1Epoch.html#a95ee2922375886d43b8e669a192fd4c4" title="Returns the number epochs from the given epoch to this epoch accounting for wrap&#45;around. " alt="" coords="757,349,917,375"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1hash_1_1SortEntry.html#ac580bd939cf86931929567c917bb8257" title="foedus::storage::hash\l::SortEntry::set" alt="" coords="764,283,911,324"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f" title="foedus::xct::XctId\l::get_ordinal" alt="" coords="776,400,899,441"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a" title="foedus::snapshot::from\l_buffer_position" alt="" coords="998,531,1153,572"/>
<area shape="rect" id="node12" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="1002,209,1149,251"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1014,465,1137,507"/>
<area shape="rect" id="node16" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="998,349,1153,375"/>
<area shape="rect" id="node20" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="757,661,918,703"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="770,727,905,768"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1hash_1_1SortEntry.html#a70aa51ac0ebfaa33f8205f47aa443bfa" title="foedus::storage::hash\l::SortEntry::get_position" alt="" coords="756,5,919,47"/>
<area shape="rect" id="node26" href="namespacefoedus_1_1storage_1_1array.html#a0d5e107fe3c1885c8984bacd1f5cf188" title="subroutine of sort_batch " alt="" coords="502,531,650,572"/>
<area shape="rect" id="node28" href="namespacefoedus_1_1storage_1_1array.html#a7466ab3ddec9b0f64a0d8a8f0bf170b8" title="subroutine of sort_batch " alt="" coords="502,829,650,871"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1array_1_1SortEntry.html#a0b242f0b7bf29e750af48fc9724f3bd1" title="foedus::storage::array\l::SortEntry::set" alt="" coords="763,596,911,637"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1array_1_1SortEntry.html#ad836d773206abcbb03e1e92f744cac4f" title="foedus::storage::array\l::SortEntry::get_position" alt="" coords="756,939,919,980"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1array_1_1SortEntry.html#ae57b773bb6192e3cc6a10281f3024879" title="foedus::storage::array\l::SortEntry::get_offset" alt="" coords="763,1004,912,1045"/>
<area shape="rect" id="node31" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="760,792,915,833"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a9454f790a5d8190207b7fc6d4acf340a" title="A special optimization for increment logs in log gleaner. " alt="" coords="754,858,921,914"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a46f93f94d46ebd8f6f3928a630cb6c20" title="foedus::storage::array\l::ArrayIncrementLogType\l::addendum_64" alt="" coords="992,858,1159,914"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a91cf59326f9e56d16e89ea8a5da8c913"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="partitioner_8cpp_source.html#l00140">140</a> of file <a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                                            {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;Partitioner&gt;&quot;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;id&gt;&quot;</span> &lt;&lt; v.id_ &lt;&lt; <span class="stringliteral">&quot;&lt;/id&gt;&quot;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;type&gt;&quot;</span> &lt;&lt; <a class="code" href="group__STORAGE.html#ga4449085638502d211183762cf81fa580">to_storage_type_name</a>(v.type_) &lt;&lt; <span class="stringliteral">&quot;&lt;/type&gt;&quot;</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    &lt;&lt; *v.control_block_;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/Partitioner&gt;&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_ga4449085638502d211183762cf81fa580"><div class="ttname"><a href="group__STORAGE.html#ga4449085638502d211183762cf81fa580">foedus::storage::to_storage_type_name</a></div><div class="ttdeci">const char * to_storage_type_name(StorageType type)</div><div class="ttdoc">Gives a string representation of StorageType. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00139">storage_id.hpp:139</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/<a class="el" href="partitioner_8hpp_source.html">partitioner.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/<a class="el" href="partitioner_8cpp_source.html">partitioner.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
