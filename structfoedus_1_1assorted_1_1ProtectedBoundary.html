<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::assorted::ProtectedBoundary Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structfoedus_1_1assorted_1_1ProtectedBoundary.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="structfoedus_1_1assorted_1_1ProtectedBoundary-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::assorted::ProtectedBoundary Struct Reference<div class="ingroups"><a class="el" href="group__IDIOMS.html">FOEDUS Programming Idioms</a> &raquo; <a class="el" href="group__ASSORTED.html">Assorted Methods/Classes</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A 4kb dummy data placed between separate memory regions so that we can check if/where a bogus memory access happens.  
 <a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A 4kb dummy data placed between separate memory regions so that we can check if/where a bogus memory access happens. </p>
<p>As a middleware, we often allocate a large chunk of memory and internally split it into smaller data regions. While it reduces overheads, that means a lack of memory boundary check. Instead, we place this dummy block to achieve it. When we shut down the system, we check if there happened any unexpected overrun between memory regions. In addition, we also use mprotect() to prohibit accesses to these dummy blocks, which would immediately fire up SIGSEGV for bogus access, making debugging easier.</p>
<dl class="section user"><dt>mprotect() limit: max_map_count</dt><dd>mprotect() has one limitation: it could use up <em>max_map_count</em>. What you might observe is after around 64k mprotect() calls, it starts failing with ENOMEM. Moreover, all following memory allocations (eg mmap) also fail with ENOMEM once this starts happening. The issue goes away by increasing <em>max_map_count</em> : sudo sysctl -w vm.max_map_count=2147483647 </dd></dl>

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00056">56</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a382b1cdc7f667b44bd4d5b98bcfe9315"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315">Constants</a> { <a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a9835a86e47ae6bb014b200e489334fe7">kByteSize</a> = 1 &lt;&lt; 12, 
<a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a> = 128, 
<a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">kWordCount</a> = (kByteSize - kMaxBoundaryNameLength) / 8
 }<tr class="separator:a382b1cdc7f667b44bd4d5b98bcfe9315"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aef6a0854f4740f503674fcb51378992b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#aef6a0854f4740f503674fcb51378992b">acquire_protect</a> ()</td></tr>
<tr class="memdesc:aef6a0854f4740f503674fcb51378992b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a strict access prohibition via mprotect().  <a href="#aef6a0854f4740f503674fcb51378992b">More...</a><br /></td></tr>
<tr class="separator:aef6a0854f4740f503674fcb51378992b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10383a5371b4bac033184c7441719fee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a10383a5371b4bac033184c7441719fee">release_protect</a> ()</td></tr>
<tr class="memdesc:a10383a5371b4bac033184c7441719fee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all access restrictions via mprotect().  <a href="#a10383a5371b4bac033184c7441719fee">More...</a><br /></td></tr>
<tr class="separator:a10383a5371b4bac033184c7441719fee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7cfb4bdec2ed57900b87c31d164bf4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#afb7cfb4bdec2ed57900b87c31d164bf4">reset</a> (const std::string &amp;boundary_name)</td></tr>
<tr class="memdesc:afb7cfb4bdec2ed57900b87c31d164bf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fills the block with magic words.  <a href="#afb7cfb4bdec2ed57900b87c31d164bf4">More...</a><br /></td></tr>
<tr class="separator:afb7cfb4bdec2ed57900b87c31d164bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2242e8ed93e24a8cba2097c3433e0216"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a2242e8ed93e24a8cba2097c3433e0216">assert_boundary</a> () const </td></tr>
<tr class="memdesc:a2242e8ed93e24a8cba2097c3433e0216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called at shutdown to check whether these boundaries were not accessed.  <a href="#a2242e8ed93e24a8cba2097c3433e0216">More...</a><br /></td></tr>
<tr class="separator:a2242e8ed93e24a8cba2097c3433e0216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa49284d94b43a9820c2e3ed2d8770db0"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#aa49284d94b43a9820c2e3ed2d8770db0">get_boundary_name</a> () const </td></tr>
<tr class="separator:aa49284d94b43a9820c2e3ed2d8770db0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3db2de6c44e5bcb4fab9d7ed2443f3de"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">boundary_name_</a> [<a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>]</td></tr>
<tr class="separator:a3db2de6c44e5bcb4fab9d7ed2443f3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3049e49ea8ccfb36102201e36a13b436"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3049e49ea8ccfb36102201e36a13b436">data_</a> [<a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">kWordCount</a>]</td></tr>
<tr class="separator:a3049e49ea8ccfb36102201e36a13b436"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a382b1cdc7f667b44bd4d5b98bcfe9315"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315">foedus::assorted::ProtectedBoundary::Constants</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a382b1cdc7f667b44bd4d5b98bcfe9315a9835a86e47ae6bb014b200e489334fe7"></a>kByteSize&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529"></a>kMaxBoundaryNameLength&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6"></a>kWordCount&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00057">57</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                 {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a9835a86e47ae6bb014b200e489334fe7">kByteSize</a> = 1 &lt;&lt; 12,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a> = 128,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">kWordCount</a> = (<a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a9835a86e47ae6bb014b200e489334fe7">kByteSize</a> - <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>) / 8,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  };</div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">foedus::assorted::ProtectedBoundary::kMaxBoundaryNameLength</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00059">protected_boundary.hpp:59</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a9835a86e47ae6bb014b200e489334fe7"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a9835a86e47ae6bb014b200e489334fe7">foedus::assorted::ProtectedBoundary::kByteSize</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00058">protected_boundary.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">foedus::assorted::ProtectedBoundary::kWordCount</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00060">protected_boundary.hpp:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aef6a0854f4740f503674fcb51378992b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::assorted::ProtectedBoundary::acquire_protect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts a strict access prohibition via mprotect(). </p>
<dl class="section attention"><dt>Attention</dt><dd>This method might cause severe performance degradation. Use in appropriate places. We use hugepages in most places, but mprotect() most likely splits the TLB entries to achieve the protection, throwing away the performance benefits of hugepages. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>this method is idempotent. safe to call multiple times </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The only possible error is kErrorCodeOsMProtectFailed </dd></dl>

<p>Definition at line <a class="el" href="protected__boundary_8cpp_source.html#l00025">25</a> of file <a class="el" href="protected__boundary_8cpp_source.html">protected_boundary.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, and <a class="el" href="error__code_8hpp_source.html#l00118">foedus::kErrorCodeOsMProtectFailed</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">foedus::memory::PagePoolPimpl::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                                             {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordtype">int</span> ret = ::mprotect(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(ProtectedBoundary), PROT_NONE);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a89df7beb069d2942adf4117d145ecfc1">kErrorCodeOsMProtectFailed</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  }</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a89df7beb069d2942adf4117d145ecfc1"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a89df7beb069d2942adf4117d145ecfc1">foedus::kErrorCodeOsMProtectFailed</a></div><div class="ttdoc">0x000D : "GENERAL: OS: mprotect() failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00118">error_code.hpp:118</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1assorted_1_1ProtectedBoundary_aef6a0854f4740f503674fcb51378992b_icgraph.png" border="0" usemap="#structfoedus_1_1assorted_1_1ProtectedBoundary_aef6a0854f4740f503674fcb51378992b_icgraph" alt=""/></div>
<map name="structfoedus_1_1assorted_1_1ProtectedBoundary_aef6a0854f4740f503674fcb51378992b_icgraph" id="structfoedus_1_1assorted_1_1ProtectedBoundary_aef6a0854f4740f503674fcb51378992b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397" title="foedus::memory::PagePool\lPimpl::initialize_once" alt="" coords="236,5,415,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2242e8ed93e24a8cba2097c3433e0216"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::assorted::ProtectedBoundary::assert_boundary </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called at shutdown to check whether these boundaries were not accessed. </p>
<dl class="section attention"><dt>Attention</dt><dd>This must be invoked AFTER <a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a10383a5371b4bac033184c7441719fee" title="Removes all access restrictions via mprotect(). ">release_protect()</a> </dd></dl>

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00103">103</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="protected__boundary_8hpp_source.html#l00060">kWordCount</a>.</p>

<p>Referenced by <a class="el" href="shared__memory__repo_8cpp_source.html#l00223">foedus::soc::SharedMemoryRepo::deallocate_shared_memories()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">foedus::memory::PagePoolPimpl::uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                    {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">kWordCount</a>; ++i) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3049e49ea8ccfb36102201e36a13b436">data_</a>[i] == <a class="code" href="namespacefoedus_1_1assorted.html#aa0009af865b765916dadfa8e5ea09325">kProtectedBoundaryMagicWord</a>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_aa0009af865b765916dadfa8e5ea09325"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#aa0009af865b765916dadfa8e5ea09325">foedus::assorted::kProtectedBoundaryMagicWord</a></div><div class="ttdeci">const uint64_t kProtectedBoundaryMagicWord</div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00033">protected_boundary.hpp:33</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">foedus::assorted::ProtectedBoundary::kWordCount</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00060">protected_boundary.hpp:60</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a3049e49ea8ccfb36102201e36a13b436"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3049e49ea8ccfb36102201e36a13b436">foedus::assorted::ProtectedBoundary::data_</a></div><div class="ttdeci">uint64_t data_[kWordCount]</div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00064">protected_boundary.hpp:64</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1assorted_1_1ProtectedBoundary_a2242e8ed93e24a8cba2097c3433e0216_icgraph.png" border="0" usemap="#structfoedus_1_1assorted_1_1ProtectedBoundary_a2242e8ed93e24a8cba2097c3433e0216_icgraph" alt=""/></div>
<map name="structfoedus_1_1assorted_1_1ProtectedBoundary_a2242e8ed93e24a8cba2097c3433e0216_icgraph" id="structfoedus_1_1assorted_1_1ProtectedBoundary_a2242e8ed93e24a8cba2097c3433e0216_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa961c615ceddd0dd0d3943629fd1a147" title="Detaches and releases the shared memories. " alt="" coords="236,202,421,258"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="239,283,418,324"/>
<area shape="rect" id="node3" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ae93958bcd01826cc39e3b84333d1c3d9" title="foedus::soc::SharedMemory\lRepo::~SharedMemoryRepo" alt="" coords="479,5,666,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa42d7f6cd529569e79e4cfc298adb39b" title="Master process creates shared memories by calling this method. " alt="" coords="724,129,939,171"/>
<area shape="rect" id="node5" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a3dd3a524e5fbb0b8f9cb52dd21689d0a" title="Called as part of initialize_once() if this is a master engine. " alt="" coords="987,233,1189,275"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a4b6032d62764c145607306973945bb8c" title="Child processes (emulated or not) set a reference to shared memory and receive the EngnieOption value..." alt="" coords="469,71,676,112"/>
<area shape="rect" id="node9" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d435277bd229b7988c3f249c0a0730f" title="foedus::soc::SocManagerPimpl\l::uninitialize_once" alt="" coords="471,239,674,280"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a998409bf9e2aff10ec8dfb02f17bb956" title="Wait for child SOCs to start up and at least finish attaching shared memory. " alt="" coords="471,356,674,397"/>
<area shape="rect" id="node12" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#ad9ef70c0b175a6535731e2cf0c2370f1" title="Launch children via fork. " alt="" coords="730,396,933,437"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a4a9091baae2ba21b2cb888da8d391818" title="Launch children via spawn. " alt="" coords="730,265,933,307"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#aa14e68e8b8e3902f2b139b6388e712d8" title="foedus::soc::SocManagerPimpl\l::initialize_once" alt="" coords="1237,169,1440,211"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d09b3bd25667fccd9bb831303788401" title="Called as part of initialize_once() if this is a child SOC engine. " alt="" coords="987,104,1189,145"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a77d275f92471e6ac9e0c4bb4c609665f" title="Launch emulated children as threads. " alt="" coords="730,331,933,372"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa49284d94b43a9820c2e3ed2d8770db0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::assorted::ProtectedBoundary::get_boundary_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00109">109</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="protected__boundary_8hpp_source.html#l00059">kMaxBoundaryNameLength</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">foedus::memory::PagePoolPimpl::uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                                      {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    uint16_t len;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">for</span> (len = 0; len &lt; <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>; ++len) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">boundary_name_</a>[len] == 0) {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(len &lt; kMaxBoundaryNameLength);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> std::string(<a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">boundary_name_</a>, len);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a3db2de6c44e5bcb4fab9d7ed2443f3de"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">foedus::assorted::ProtectedBoundary::boundary_name_</a></div><div class="ttdeci">char boundary_name_[kMaxBoundaryNameLength]</div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00063">protected_boundary.hpp:63</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">foedus::assorted::ProtectedBoundary::kMaxBoundaryNameLength</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00059">protected_boundary.hpp:59</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1assorted_1_1ProtectedBoundary_aa49284d94b43a9820c2e3ed2d8770db0_icgraph.png" border="0" usemap="#structfoedus_1_1assorted_1_1ProtectedBoundary_aa49284d94b43a9820c2e3ed2d8770db0_icgraph" alt=""/></div>
<map name="structfoedus_1_1assorted_1_1ProtectedBoundary_aa49284d94b43a9820c2e3ed2d8770db0_icgraph" id="structfoedus_1_1assorted_1_1ProtectedBoundary_aa49284d94b43a9820c2e3ed2d8770db0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="256,5,435,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10383a5371b4bac033184c7441719fee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::assorted::ProtectedBoundary::release_protect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all access restrictions via mprotect(). </p>
<dl class="section attention"><dt>Attention</dt><dd>This method might cause severe performance hit. Use in appropriate places. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>this method is idempotent. safe to call multiple times </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The only possible error is kErrorCodeOsMProtectFailed </dd></dl>

<p>Definition at line <a class="el" href="protected__boundary_8cpp_source.html#l00033">33</a> of file <a class="el" href="protected__boundary_8cpp_source.html">protected_boundary.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, and <a class="el" href="error__code_8hpp_source.html#l00118">foedus::kErrorCodeOsMProtectFailed</a>.</p>

<p>Referenced by <a class="el" href="shared__memory__repo_8cpp_source.html#l00223">foedus::soc::SharedMemoryRepo::deallocate_shared_memories()</a>, and <a class="el" href="page__pool__pimpl_8cpp_source.html#l00152">foedus::memory::PagePoolPimpl::uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                             {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordtype">int</span> ret = ::mprotect(<span class="keyword">this</span>, <span class="keyword">sizeof</span>(ProtectedBoundary), PROT_READ | PROT_WRITE);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a89df7beb069d2942adf4117d145ecfc1">kErrorCodeOsMProtectFailed</a>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a89df7beb069d2942adf4117d145ecfc1"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a89df7beb069d2942adf4117d145ecfc1">foedus::kErrorCodeOsMProtectFailed</a></div><div class="ttdoc">0x000D : "GENERAL: OS: mprotect() failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00118">error_code.hpp:118</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1assorted_1_1ProtectedBoundary_a10383a5371b4bac033184c7441719fee_icgraph.png" border="0" usemap="#structfoedus_1_1assorted_1_1ProtectedBoundary_a10383a5371b4bac033184c7441719fee_icgraph" alt=""/></div>
<map name="structfoedus_1_1assorted_1_1ProtectedBoundary_a10383a5371b4bac033184c7441719fee_icgraph" id="structfoedus_1_1assorted_1_1ProtectedBoundary_a10383a5371b4bac033184c7441719fee_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa961c615ceddd0dd0d3943629fd1a147" title="Detaches and releases the shared memories. " alt="" coords="236,202,421,258"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa079d110c76126386b0d3eefeaf1ae38" title="foedus::memory::PagePool\lPimpl::uninitialize_once" alt="" coords="239,283,418,324"/>
<area shape="rect" id="node3" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ae93958bcd01826cc39e3b84333d1c3d9" title="foedus::soc::SharedMemory\lRepo::~SharedMemoryRepo" alt="" coords="479,5,666,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa42d7f6cd529569e79e4cfc298adb39b" title="Master process creates shared memories by calling this method. " alt="" coords="724,129,939,171"/>
<area shape="rect" id="node5" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a3dd3a524e5fbb0b8f9cb52dd21689d0a" title="Called as part of initialize_once() if this is a master engine. " alt="" coords="987,233,1189,275"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a4b6032d62764c145607306973945bb8c" title="Child processes (emulated or not) set a reference to shared memory and receive the EngnieOption value..." alt="" coords="469,71,676,112"/>
<area shape="rect" id="node9" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d435277bd229b7988c3f249c0a0730f" title="foedus::soc::SocManagerPimpl\l::uninitialize_once" alt="" coords="471,239,674,280"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a998409bf9e2aff10ec8dfb02f17bb956" title="Wait for child SOCs to start up and at least finish attaching shared memory. " alt="" coords="471,356,674,397"/>
<area shape="rect" id="node12" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#ad9ef70c0b175a6535731e2cf0c2370f1" title="Launch children via fork. " alt="" coords="730,396,933,437"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a4a9091baae2ba21b2cb888da8d391818" title="Launch children via spawn. " alt="" coords="730,265,933,307"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#aa14e68e8b8e3902f2b139b6388e712d8" title="foedus::soc::SocManagerPimpl\l::initialize_once" alt="" coords="1237,169,1440,211"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d09b3bd25667fccd9bb831303788401" title="Called as part of initialize_once() if this is a child SOC engine. " alt="" coords="987,104,1189,145"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a77d275f92471e6ac9e0c4bb4c609665f" title="Launch emulated children as threads. " alt="" coords="730,331,933,372"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afb7cfb4bdec2ed57900b87c31d164bf4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::assorted::ProtectedBoundary::reset </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>boundary_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fills the block with magic words. </p>
<dl class="section attention"><dt>Attention</dt><dd>This must be invoked BEFORE <a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#aef6a0854f4740f503674fcb51378992b" title="Puts a strict access prohibition via mprotect(). ">acquire_protect()</a> </dd></dl>

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00088">88</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>

<p>References <a class="el" href="protected__boundary_8hpp_source.html#l00059">kMaxBoundaryNameLength</a>, <a class="el" href="protected__boundary_8hpp_source.html#l00033">foedus::assorted::kProtectedBoundaryMagicWord</a>, and <a class="el" href="protected__boundary_8hpp_source.html#l00060">kWordCount</a>.</p>

<p>Referenced by <a class="el" href="page__pool__pimpl_8cpp_source.html#l00075">foedus::memory::PagePoolPimpl::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                  {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    uint16_t copy_len = std::min&lt;uint64_t&gt;(boundary_name.length(), <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    boundary_name.copy(<a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">boundary_name_</a>, copy_len, 0);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">if</span> (copy_len &lt; <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      std::memset(<a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">boundary_name_</a> + copy_len, 0, <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>- copy_len);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">kWordCount</a>; ++i) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3049e49ea8ccfb36102201e36a13b436">data_</a>[i] = <a class="code" href="namespacefoedus_1_1assorted.html#aa0009af865b765916dadfa8e5ea09325">kProtectedBoundaryMagicWord</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a3db2de6c44e5bcb4fab9d7ed2443f3de"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3db2de6c44e5bcb4fab9d7ed2443f3de">foedus::assorted::ProtectedBoundary::boundary_name_</a></div><div class="ttdeci">char boundary_name_[kMaxBoundaryNameLength]</div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00063">protected_boundary.hpp:63</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">foedus::assorted::ProtectedBoundary::kMaxBoundaryNameLength</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00059">protected_boundary.hpp:59</a></div></div>
<div class="ttc" id="namespacefoedus_1_1assorted_html_aa0009af865b765916dadfa8e5ea09325"><div class="ttname"><a href="namespacefoedus_1_1assorted.html#aa0009af865b765916dadfa8e5ea09325">foedus::assorted::kProtectedBoundaryMagicWord</a></div><div class="ttdeci">const uint64_t kProtectedBoundaryMagicWord</div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00033">protected_boundary.hpp:33</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">foedus::assorted::ProtectedBoundary::kWordCount</a></div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00060">protected_boundary.hpp:60</a></div></div>
<div class="ttc" id="structfoedus_1_1assorted_1_1ProtectedBoundary_html_a3049e49ea8ccfb36102201e36a13b436"><div class="ttname"><a href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a3049e49ea8ccfb36102201e36a13b436">foedus::assorted::ProtectedBoundary::data_</a></div><div class="ttdeci">uint64_t data_[kWordCount]</div><div class="ttdef"><b>Definition:</b> <a href="protected__boundary_8hpp_source.html#l00064">protected_boundary.hpp:64</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1assorted_1_1ProtectedBoundary_afb7cfb4bdec2ed57900b87c31d164bf4_icgraph.png" border="0" usemap="#structfoedus_1_1assorted_1_1ProtectedBoundary_afb7cfb4bdec2ed57900b87c31d164bf4_icgraph" alt=""/></div>
<map name="structfoedus_1_1assorted_1_1ProtectedBoundary_afb7cfb4bdec2ed57900b87c31d164bf4_icgraph" id="structfoedus_1_1assorted_1_1ProtectedBoundary_afb7cfb4bdec2ed57900b87c31d164bf4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3a28e3c04c25c6d6cb2cd0628d4fe397" title="foedus::memory::PagePool\lPimpl::initialize_once" alt="" coords="236,5,415,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3db2de6c44e5bcb4fab9d7ed2443f3de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char foedus::assorted::ProtectedBoundary::boundary_name_[<a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a6c37f302d10cd2d3c7f793641d54a529">kMaxBoundaryNameLength</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00063">63</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3049e49ea8ccfb36102201e36a13b436"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::assorted::ProtectedBoundary::data_[<a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html#a382b1cdc7f667b44bd4d5b98bcfe9315a01b35f50dbd46d268821e930f3ac46e6">kWordCount</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="protected__boundary_8hpp_source.html#l00064">64</a> of file <a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/assorted/<a class="el" href="protected__boundary_8hpp_source.html">protected_boundary.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/assorted/<a class="el" href="protected__boundary_8cpp_source.html">protected_boundary.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1assorted.html">assorted</a></li><li class="navelem"><a class="el" href="structfoedus_1_1assorted_1_1ProtectedBoundary.html">ProtectedBoundary</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
