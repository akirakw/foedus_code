<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: Log Manager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__LOG.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Log Manager<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><b>Log</b> <b>Manager</b>, which writes out transactional logs.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Log</b> <b>Manager</b>, which writes out transactional logs. </p>
<p>This package contains classes that control transactional logging.</p>
<dl class="section user"><dt>Decentralized Logging</dt><dd>Unlike traditional log manager in DBMS, this log manager is <em>decentralized</em>, meaning each log writer writes to its own file concurrently. This eliminates the bottleneck in log manager when there are a large number of cores. The basic idea to guarantee serializability is the epoch-based commit protocol, which does the check on all loggers before returning the results to client in a way similar to group-commit.</dd></dl>
<dl class="section user"><dt>Thread-private log buffer</dt><dd>Each ThreadLoadBugger instance maintains a thread-local log buffer that is filled by the thread without any synchronization or blocking. The logger collects them and writes them out to log files. A single log writer handles one or more transactional threads (cores), and a single NUMA node hosts one or more log writers. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread-local log buffer. ">foedus::log::ThreadLogBuffer</a></dd></dl>
<dl class="section user"><dt>Log Writer</dt><dd>Each Logger instance writes out files suffixed with ordinal (eg ".0", ".1"...). The older logs files are deactivated and deleted after log gleaner consumes them. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">foedus::log::Logger</a></dd></dl>
<dl class="section user"><dt>Global Durable Epoch</dt><dd>An important job of Log Manager is to maintain the <em>global</em> durable epoch. Log manager is the module to determine when it's safe to advance the global durable epoch. It makes sure all loggers flushed their logs up to the epoch, invoked required <a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a>, and also takes a savepoint before it announces the new global durable epoch. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1log_1_1LogManager.html" title="Log Manager class that provides API to write/read transaction logs. ">foedus::log::LogManager</a> </dd></dl>
<div class="dynheader">
Collaboration diagram for Log Manager:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__LOG.png" border="0" alt="" usemap="#group____LOG"/>
<map name="group____LOG" id="group____LOG">
<area shape="rect" id="node1" href="group__COMPONENTS.html" title="Main modules of libfoedus. " alt="" coords="5,10,159,37"/>
<area shape="rect" id="node3" href="group__LOGTYPE.html" title="Defines the content and apply logic of transactional operatrions. " alt="" coords="503,10,584,37"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__LOGTYPE"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LOGTYPE.html">Log Types</a></td></tr>
<tr class="memdesc:group__LOGTYPE"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the content and <em>apply</em> logic of transactional operatrions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:common__log__types_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="common__log__types_8hpp.html">common_log_types.hpp</a></td></tr>
<tr class="memdesc:common__log__types_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares common log types used in all packages. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:log_2fwd_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_2fwd_8hpp.html">fwd.hpp</a></td></tr>
<tr class="memdesc:log_2fwd_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward declarations of classes in log manager package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:log__id_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log__id_8hpp.html">log_id.hpp</a></td></tr>
<tr class="memdesc:log__id_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedefs of ID types used in log package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1FillerLogType.html">foedus::log::FillerLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A dummy log type to fill up a sector in log files.  <a href="structfoedus_1_1log_1_1FillerLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1EpochMarkerLogType.html">foedus::log::EpochMarkerLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A log type to declare a switch of epoch in a logger or the engine.  <a href="structfoedus_1_1log_1_1EpochMarkerLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1EpochHistory.html">foedus::log::EpochHistory</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents an event where a logger switched its epoch.  <a href="structfoedus_1_1log_1_1EpochHistory.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1LogRange.html">foedus::log::LogRange</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">a contiguous range of log entries that might span multiple files.  <a href="structfoedus_1_1log_1_1LogRange.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1LogManager.html">foedus::log::LogManager</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log Manager class that provides API to write/read transaction logs.  <a href="classfoedus_1_1log_1_1LogManager.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1LogManagerPimpl.html">foedus::log::LogManagerPimpl</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pimpl object of <a class="el" href="classfoedus_1_1log_1_1LogManager.html" title="Log Manager class that provides API to write/read transaction logs. ">LogManager</a>.  <a href="classfoedus_1_1log_1_1LogManagerPimpl.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1LogOptions.html">foedus::log::LogOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of options for log manager.  <a href="structfoedus_1_1log_1_1LogOptions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1Logger.html">foedus::log::Logger</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A log writer that writes out buffered logs to stable storages.  <a href="classfoedus_1_1log_1_1Logger.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1LoggerRef.html">foedus::log::LoggerRef</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A view of <a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a> object for other SOCs and master engine.  <a href="classfoedus_1_1log_1_1LoggerRef.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1MetaLogBuffer.html">foedus::log::MetaLogBuffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single log buffer for metadata (eg create/drop storage).  <a href="classfoedus_1_1log_1_1MetaLogBuffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1MetaLogger.html">foedus::log::MetaLogger</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A log writer for metadata operation.  <a href="classfoedus_1_1log_1_1MetaLogger.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadEpockMark.html">foedus::log::ThreadEpockMark</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread-buffer's epoch marker, which indicates where a thread switched an epoch.  <a href="structfoedus_1_1log_1_1ThreadEpockMark.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html">foedus::log::ThreadLogBufferMeta</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Metadata part of <a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread-local log buffer. ">ThreadLogBuffer</a>, without the actual buffer which is way way larger.  <a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBuffer_1_1OffsetRange.html">foedus::log::ThreadLogBuffer::OffsetRange</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html">foedus::log::ThreadLogBuffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread-local log buffer.  <a href="classfoedus_1_1log_1_1ThreadLogBuffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac1e67c911232180318c56380d45bf4a1"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LOG.html#gac1e67c911232180318c56380d45bf4a1">foedus::log::LoggerId</a></td></tr>
<tr class="memdesc:gac1e67c911232180318c56380d45bf4a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typedef for an ID of <a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a>.  <a href="group__LOG.html#gac1e67c911232180318c56380d45bf4a1">More...</a><br /></td></tr>
<tr class="separator:gac1e67c911232180318c56380d45bf4a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9bdc25e509c2b27967b020708e61ea5"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__LOG.html#gaf9bdc25e509c2b27967b020708e61ea5">foedus::log::LogFileOrdinal</a></td></tr>
<tr class="memdesc:gaf9bdc25e509c2b27967b020708e61ea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ordinal of log files (eg "log.0", "log.1").  <a href="group__LOG.html#gaf9bdc25e509c2b27967b020708e61ea5">More...</a><br /></td></tr>
<tr class="separator:gaf9bdc25e509c2b27967b020708e61ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaf9bdc25e509c2b27967b020708e61ea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LOG.html#gaf9bdc25e509c2b27967b020708e61ea5">foedus::log::LogFileOrdinal</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ordinal of log files (eg "log.0", "log.1"). </p>
<p>Each logger outputs log files whose filename is suffixed with an ordinal. Each log file </p>

<p>Definition at line <a class="el" href="log__id_8hpp_source.html#l00046">46</a> of file <a class="el" href="log__id_8hpp_source.html">log_id.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="gac1e67c911232180318c56380d45bf4a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__LOG.html#gac1e67c911232180318c56380d45bf4a1">foedus::log::LoggerId</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Typedef for an ID of <a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a>. </p>
<p>ID of <a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a> is merely an ordinal without holes. In other words, "(loggers_per_node * NUMA_node_id) + ordinal_in_node". </p>

<p>Definition at line <a class="el" href="log__id_8hpp_source.html#l00036">36</a> of file <a class="el" href="log__id_8hpp_source.html">log_id.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
