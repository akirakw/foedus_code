<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/include/foedus/xct/retrospective_lock_list.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('retrospective__lock__list_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">retrospective_lock_list.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="retrospective__lock__list_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef FOEDUS_XCT_RETROSPECTIVE_LOCK_LIST_HPP_</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define FOEDUS_XCT_RETROSPECTIVE_LOCK_LIST_HPP_</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;iosfwd&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assert__nd_8hpp.html">foedus/assert_nd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compiler_8hpp.html">foedus/compiler.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="error__code_8hpp.html">foedus/error_code.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page__resolver_8hpp.html">foedus/memory/page_resolver.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread_2fwd_8hpp.html">foedus/thread/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct_2fwd_8hpp.html">foedus/xct/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__id_8hpp.html">foedus/xct/xct_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">namespace </span>xct {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html">  120</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a> {</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">  125</a></span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">  130</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">lock_</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">  136</a></span>&#160;  <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">  139</a></span>&#160;  <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">  144</a></span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">McsBlockIndex</a> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// want to have these.. but maitaining them is nasty after sort. let&#39;s revisit later</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// ReadXctAccess* read_set_;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// WriteXctAccess* write_set_;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">  150</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">set</a>(</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> <span class="keywordtype">id</span>,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* lock,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> preferred_mode,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> taken_mode) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    universal_lock_id_ = id;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    lock_ = lock;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    preferred_mode_ = preferred_mode;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    taken_mode_ = taken_mode;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    mcs_block_ = 0;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167">  162</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167">is_locked</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> taken_mode_ != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>; }</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">  163</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> taken_mode_ &gt;= <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a>; }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry.html#a5d17585a918a796486e07feee49a1e0a">  165</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a5d17585a918a796486e07feee49a1e0a">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>&amp; rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> universal_lock_id_ &lt; rhs.<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a51f7a5a2deafa1399839940568438ead">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>&amp; v);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html">  172</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html">LessThan</a> {</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html#a76b4a076a51a0873f3e7dc69b40964b2">  173</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html#a76b4a076a51a0873f3e7dc69b40964b2">operator()</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lhs, <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>&amp; rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">return</span> lhs &lt; rhs.<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html#a373e349de7970cd580f16b01ce780a0f">  176</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html#a373e349de7970cd580f16b01ce780a0f">operator()</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>&amp; lhs, <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> rhs)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">return</span> lhs.<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a> &lt; rhs;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  };</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;};</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">  189</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">RetrospectiveLockList</a> {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#ae5243dadf1989a036c762589ac12ac13">RetrospectiveLockList</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a483e36fdf16824e1c72b37cc140b4930">~RetrospectiveLockList</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535">init</a>(</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* array,</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    uint32_t capacity,</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; resolver);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c7bc64fe85e2d2173c67b6bd8efc9e5">uninit</a>();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846">clear_entries</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38">binary_search</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a67a3371918f47951ef47af35c2979697">lower_bound</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e">construct</a>(<a class="code" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* context, uint32_t read_lock_threshold);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">  234</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">get_array</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_; }</div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a74b2aa926de8d4dd514580344f8c0d85">  235</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a74b2aa926de8d4dd514580344f8c0d85">get_entry</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a0614dd1f8d7b7f42bc1777af270ebbce">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a5b7102ba677654ac12ad43d6bbca6ac2">  239</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a5b7102ba677654ac12ad43d6bbca6ac2">get_entry</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a0614dd1f8d7b7f42bc1777af270ebbce">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a3d1f0c4eb14a988576037fc8f58a3241">  243</a></span>&#160;  uint32_t <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a3d1f0c4eb14a988576037fc8f58a3241">get_capacity</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> capacity_; }</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#afeae5ce72d1c324ecc32dce36459340a">  244</a></span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#afeae5ce72d1c324ecc32dce36459340a">get_last_active_entry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> last_active_entry_; }</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a0614dd1f8d7b7f42bc1777af270ebbce">  245</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a0614dd1f8d7b7f42bc1777af270ebbce">is_valid_entry</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">return</span> pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> &amp;&amp; pos &lt;= last_active_entry_;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">  248</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">is_empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> last_active_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acbba6436107d44463bc78619ffe1e6a3">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">RetrospectiveLockList</a>&amp; v);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1397c6847c1ee46ba9c09457b4f5866e">assert_sorted</a>() const <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a14d555cbd9ddee31c68c9c81ff84c129">assert_sorted_impl</a>() const;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa8816862df9a53481685a257632eaeea">  254</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa8816862df9a53481685a257632eaeea">begin</a>() { <span class="keywordflow">return</span> array_ + 1U; }</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a87841ca555b8fb3fb984baf5c2c0e591">  255</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a87841ca555b8fb3fb984baf5c2c0e591">end</a>() { <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
<div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a9bcb008d4e620f5508f7c69485ade366">  256</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a9bcb008d4e620f5508f7c69485ade366">cbegin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_ + 1U; }</div>
<div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a81de3b551fb5d282fb34a18c9949875a">  257</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a81de3b551fb5d282fb34a18c9949875a">cend</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">  258</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> volatile_page_resolver_;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* array_;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> volatile_page_resolver_;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  uint32_t capacity_;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> last_active_entry_;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> issue_new_position() {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    ++last_active_entry_;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(last_active_entry_ &lt; capacity_);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">return</span> last_active_entry_;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;};</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html">  309</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html">CurrentLockList</a> {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a706b0c0a7f4c44b0f9dd395154873780">CurrentLockList</a>();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a040661fef567664e4f223f327d4e6a90">~CurrentLockList</a>();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">init</a>(</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* array,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    uint32_t capacity,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; resolver);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4">uninit</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries</a>();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482">binary_search</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">get_or_add_entry</a>(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock_id,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* lock,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> preferred_mode);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573">lower_bound</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a75e45c9dd7129e1f202252cf124e76ff">  350</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a75e45c9dd7129e1f202252cf124e76ff">get_array</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_; }</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a2ca03e6543963a43121db4c7fb44fe6e">  351</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a2ca03e6543963a43121db4c7fb44fe6e">get_array</a>() { <span class="keywordflow">return</span> array_; }</div>
<div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">  352</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  }</div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#af67e1af35b36686bda298171dd4c9991">  356</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#af67e1af35b36686bda298171dd4c9991">get_entry</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a5f33e3dc5973ab4010adb9e5de2fc749">  360</a></span>&#160;  uint32_t <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a5f33e3dc5973ab4010adb9e5de2fc749">get_capacity</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> capacity_; }</div>
<div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#af24dd2ea6848b84443095530b3c25d8f">  361</a></span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#af24dd2ea6848b84443095530b3c25d8f">get_last_active_entry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> last_active_entry_; }</div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">  362</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">is_valid_entry</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> &amp;&amp; pos &lt;= last_active_entry_;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">  365</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">is_empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> last_active_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6095aa74c375ba360c61ab5d861497f5">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html">CurrentLockList</a>&amp; v);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>() const <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7">assert_sorted_impl</a>() const;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">  371</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">begin</a>() { <span class="keywordflow">return</span> array_ + 1U; }</div>
<div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">  372</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">end</a>() { <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
<div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a0da52220a86285f625d057e4db4faab4">  373</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a0da52220a86285f625d057e4db4faab4">cbegin</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_ + 1U; }</div>
<div class="line"><a name="l00374"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a9640c2cb1590155356189c7b8f09040e">  374</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a9640c2cb1590155356189c7b8f09040e">cend</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6e57fd76a57791018ce74dca876d8886">  375</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6e57fd76a57791018ce74dca876d8886">get_volatile_page_resolver</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> volatile_page_resolver_;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad18887a3fb16dc1ca458892ce4b0b27c">  383</a></span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad18887a3fb16dc1ca458892ce4b0b27c">get_last_locked_entry</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> last_locked_entry_; }</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3">  385</a></span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3">get_max_locked_id</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (last_locked_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(last_locked_entry_)-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">  393</a></span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">calculate_last_locked_entry</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(last_active_entry_);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">  397</a></span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> from)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = from; pos &gt; <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; --pos) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (array_[pos].is_locked()) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  }</div>
<div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">  405</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> correct = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">calculate_last_locked_entry</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(correct == last_locked_entry_);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001">batch_insert_write_placeholders</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a>* write_set, uint32_t write_set_size);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5">prepopulate_for_retrospective_lock_list</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">RetrospectiveLockList</a>&amp; rll);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">try_or_acquire_single_lock</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088">try_or_acquire_multiple_locks</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> upto_pos, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">try_async_single_lock</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9">retry_async_single_lock</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181">cancel_async_single_lock</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364">try_async_multiple_locks</a>(<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> upto_pos, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331">  473</a></span>&#160;  <span class="keywordtype">void</span>        <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331">release_all_locks</a>(MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">release_all_after</a>(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>, mcs_rw_impl);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordtype">void</span>        <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">release_all_after</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordtype">void</span>        <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7e7c2cec33775df3d5e219b3b6e55974">release_all_at_and_after</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordtype">void</span>        <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68">giveup_all_after</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordtype">void</span>        <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a10ee69a6e7731cbebe3511fcf9809bc7">giveup_all_at_and_after</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL* mcs_rw_impl);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* array_;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> volatile_page_resolver_;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  uint32_t capacity_;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> last_active_entry_;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> last_locked_entry_;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> issue_new_position() {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    ++last_active_entry_;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(last_active_entry_ &lt; capacity_);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">return</span> last_active_entry_;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordtype">void</span> release_all_after_debuglog(</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    uint32_t released_read_locks,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    uint32_t released_write_locks,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    uint32_t already_released_locks,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    uint32_t canceled_async_read_locks,</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    uint32_t canceled_async_write_locks) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordtype">void</span> giveup_all_after_debuglog(</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    uint32_t givenup_read_locks,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    uint32_t givenup_write_locks,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    uint32_t givenup_upgrades,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    uint32_t already_enough_locks,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    uint32_t canceled_async_read_locks,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    uint32_t canceled_async_write_locks) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;};</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1397c6847c1ee46ba9c09457b4f5866e">  548</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1397c6847c1ee46ba9c09457b4f5866e">RetrospectiveLockList::assert_sorted</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="comment">// In release mode, this code must be completely erased by compiler</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">#ifndef  NDEBUG</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a14d555cbd9ddee31c68c9c81ff84c129">assert_sorted_impl</a>();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">  555</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">CurrentLockList::assert_sorted</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">#ifndef  NDEBUG</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7">assert_sorted_impl</a>();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;}</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">  569</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">CurrentLockList::try_or_acquire_single_lock</a>(</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>()) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1McsRwLock.html">McsRwLock</a>* lock_addr = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">lock_</a>-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13">get_key_lock</a>();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// This is reader-&gt;writer upgrade.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="comment">// We simply release read-lock first then take write-lock in this case.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="comment">// In traditional 2PL, such an unlock-then-lock violates serializability,</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// but we guarantee serializability by read-verification anyways.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="comment">// We can release any lock anytime.. great flexibility!</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    mcs_rw_impl-&gt;release_rw_reader(lock_addr, lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    last_locked_entry_ = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(pos - 1U);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// This method is for unconditional acquire and try, not aync/retry.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="comment">// If we have a queue node already, something was misused.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> == 0);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// Now we need to take the lock. Are we in canonical mode?</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (last_locked_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> || last_locked_entry_ &lt; pos) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// yay, we are in canonical mode. we can unconditionally get the lock</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);  <span class="comment">// not a lock upgrade, either</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> = mcs_rw_impl-&gt;acquire_unconditional_rw_writer(lock_addr);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> = mcs_rw_impl-&gt;acquire_unconditional_rw_reader(lock_addr);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    last_locked_entry_ = pos;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// hmm, we violated canonical mode. has a risk of deadlock.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// Let&#39;s just try acquire the lock and immediately give up if it fails.</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// The RLL will take care of the next run.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// TODO(Hideaki) release some of the lock we have taken to restore canonical mode.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// We haven&#39;t imlpemented this optimization yet.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> == 0);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> = mcs_rw_impl-&gt;acquire_try_rw_writer(lock_addr);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> = mcs_rw_impl-&gt;acquire_try_rw_reader(lock_addr);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> == 0) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">kErrorCodeXctLockAbort</a>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167">is_locked</a>());</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088">  636</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088">CurrentLockList::try_or_acquire_multiple_locks</a>(</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> upto_pos,</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos &lt;= last_active_entry_);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// Especially in this case, we probably should release locks after upto_pos first.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 1U; pos &lt;= upto_pos; ++pos) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">try_or_acquire_single_lock</a>(pos, mcs_rw_impl));</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">  649</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">CurrentLockList::try_async_single_lock</a>(</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>()) {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1McsRwLock.html">McsRwLock</a>* lock_addr = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">lock_</a>-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13">get_key_lock</a>();</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> != <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// This is reader-&gt;writer upgrade.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="comment">// We simply release read-lock first then take write-lock in this case.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// In traditional 2PL, such an unlock-then-lock violates serializability,</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// but we guarantee serializability by read-verification anyways.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// We can release any lock anytime.. great flexibility!</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    mcs_rw_impl-&gt;release_rw_reader(lock_addr, lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    last_locked_entry_ = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">calculate_last_locked_entry_from</a>(pos - 1U);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// This function is for pushing the queue node in the extended rwlock.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// Doomed if we already have a queue node.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> == 0);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="comment">// Don&#39;t really care canonical order here, just send out the request.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#structfoedus_1_1xct_1_1AcquireAsyncRet">AcquireAsyncRet</a> async_ret;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    async_ret = mcs_rw_impl-&gt;acquire_async_rw_writer(lock_addr);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    async_ret = mcs_rw_impl-&gt;acquire_async_rw_reader(lock_addr);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(async_ret.<a class="code" href="namespacefoedus_1_1xct.html#a122896903e97bc9ef077ba0dbad48f74">block_index_</a>);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> = async_ret.<a class="code" href="namespacefoedus_1_1xct.html#a122896903e97bc9ef077ba0dbad48f74">block_index_</a>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (async_ret.<a class="code" href="namespacefoedus_1_1xct.html#a391136d87e2bd0472aaecd7557a06c83">acquired_</a>) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>());</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9">  696</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9">CurrentLockList::retry_async_single_lock</a>(</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos,</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="comment">// Must be not taken yet, and must have pushed a qnode to the lock queue</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>());</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167">is_locked</a>());</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1McsRwLock.html">McsRwLock</a>* lock_addr = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">lock_</a>-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13">get_key_lock</a>();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordtype">bool</span> acquired = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    acquired = mcs_rw_impl-&gt;retry_async_rw_writer(lock_addr, lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    acquired = mcs_rw_impl-&gt;retry_async_rw_reader(lock_addr, lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (acquired) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167">is_locked</a>());</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    last_locked_entry_ = std::max(last_locked_entry_, pos);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">return</span> acquired;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;}</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181">  724</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181">CurrentLockList::cancel_async_single_lock</a>(</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* lock_entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(pos);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>());</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">taken_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1McsRwLock.html">McsRwLock</a>* lock_addr = lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">lock_</a>-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13">get_key_lock</a>();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">if</span> (lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    mcs_rw_impl-&gt;cancel_async_rw_reader(lock_addr, lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">preferred_mode_</a> == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    mcs_rw_impl-&gt;cancel_async_rw_writer(lock_addr, lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  lock_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">mcs_block_</a> = 0;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;}</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364">  742</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364">CurrentLockList::try_async_multiple_locks</a>(</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> upto_pos,</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(upto_pos &lt;= last_active_entry_);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 1U; pos &lt;= upto_pos; ++pos) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">try_async_single_lock</a>(pos, mcs_rw_impl);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;}</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">  753</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">CurrentLockList::release_all_after</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// Only this and below logics are implemented here because this needs to know about CLL.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="comment">// This is not quite about the lock algorithm itself. It&#39;s something on higher level.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  uint32_t released_read_locks = 0;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  uint32_t released_write_locks = 0;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  uint32_t already_released_locks = 0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  uint32_t canceled_async_read_locks = 0;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  uint32_t canceled_async_write_locks = 0;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> new_last_locked_entry = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">begin</a>(); entry != <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">end</a>(); ++entry) {</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;universal_lock_id_ &lt;= address) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        new_last_locked_entry = entry - array_;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        mcs_rw_impl-&gt;release_rw_reader(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        ++released_read_locks;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        mcs_rw_impl-&gt;release_rw_writer(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        ++released_write_locks;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      entry-&gt;taken_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;mcs_block_) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// Not locked yet, but we have mcs_block_ set, this means we tried it in</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// async mode, then still waiting or at least haven&#39;t confirmed that we acquired it.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="comment">// Cancel these &quot;retrieable&quot; locks to which we already pushed our qnode.</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_reader(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        ++canceled_async_read_locks;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_writer(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;        ++canceled_async_write_locks;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      ++already_released_locks;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  last_locked_entry_ = new_last_locked_entry;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  release_all_after_debuglog(</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    released_read_locks,</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    released_write_locks,</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    already_released_locks,</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    canceled_async_read_locks,</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    canceled_async_write_locks);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;}</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00815"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7e7c2cec33775df3d5e219b3b6e55974">  815</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7e7c2cec33775df3d5e219b3b6e55974">CurrentLockList::release_all_at_and_after</a>(</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address,</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (address == <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    release_all_after&lt;MCS_RW_IMPL&gt;(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>, mcs_rw_impl);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    release_all_after&lt;MCS_RW_IMPL&gt;(address - 1U, mcs_rw_impl);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;}</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68">  826</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68">CurrentLockList::giveup_all_after</a>(<a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address, MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">assert_sorted</a>();</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  uint32_t givenup_read_locks = 0;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  uint32_t givenup_write_locks = 0;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  uint32_t givenup_upgrades = 0;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  uint32_t already_enough_locks = 0;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  uint32_t canceled_async_read_locks = 0;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  uint32_t canceled_async_write_locks = 0;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* entry = <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">begin</a>(); entry != <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">end</a>(); ++entry) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;universal_lock_id_ &lt;= address) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;is_enough()) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      ++already_enough_locks;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      ++givenup_upgrades;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      entry-&gt;preferred_mode_ = entry-&gt;taken_mode_;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (entry-&gt;mcs_block_) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_reader(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        ++canceled_async_read_locks;</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        mcs_rw_impl-&gt;cancel_async_rw_writer(entry-&gt;lock_-&gt;get_key_lock(), entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        ++canceled_async_write_locks;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      entry-&gt;preferred_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;taken_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">if</span> (entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        ++givenup_read_locks;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry-&gt;preferred_mode_ == <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a>);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        ++givenup_write_locks;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      entry-&gt;preferred_mode_ = <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">kNoLock</a>;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  }</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  giveup_all_after_debuglog(</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    givenup_read_locks,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    givenup_write_locks,</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    givenup_upgrades,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    already_enough_locks,</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    canceled_async_read_locks,</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    canceled_async_write_locks);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;}</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> MCS_RW_IMPL&gt;</div>
<div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1CurrentLockList.html#a10ee69a6e7731cbebe3511fcf9809bc7">  886</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a10ee69a6e7731cbebe3511fcf9809bc7">CurrentLockList::giveup_all_at_and_after</a>(</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> address,</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  MCS_RW_IMPL* mcs_rw_impl) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (address == <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    giveup_all_after&lt;MCS_RW_IMPL&gt;(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>, mcs_rw_impl);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    giveup_all_after&lt;MCS_RW_IMPL&gt;(address - 1U, mcs_rw_impl);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;}</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> LOCK_LIST, <span class="keyword">typename</span> LOCK_ENTRY&gt;</div>
<div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1xct.html#a0d4c7174d5251783b0f6bbf02492c18a">  903</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="namespacefoedus_1_1xct.html#a0d4c7174d5251783b0f6bbf02492c18a">lock_lower_bound</a>(</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keyword">const</span> LOCK_LIST&amp; list,</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> last_active_entry = list.get_last_active_entry();</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">if</span> (last_active_entry == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> + 1U;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="comment">// Check the easy cases first. This will be an wasted cost if it&#39;s not, but still cheap.</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keyword">const</span> LOCK_ENTRY* array = list.get_array();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="comment">// For example, [dummy, 3, 5, 7] (last_active_entry=3).</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="comment">// id=7: 3, larger: 4, smaller: need to check more</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (array[last_active_entry].universal_lock_id_ == lock) {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">return</span> last_active_entry;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (array[last_active_entry].universal_lock_id_ &lt; lock) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span> last_active_entry + 1U;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  }</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    = std::lower_bound(</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        array + 1U,</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        array + last_active_entry + 1U,</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        lock,</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        <span class="keyword">typename</span> LOCK_ENTRY::LessThan())</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      - array;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">// in the above example, id=6: 3, id=4,5: 2, smaller: 1</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos &lt;= last_active_entry);  <span class="comment">// otherwise we went into the branch above</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[pos].universal_lock_id_ &gt;= lock);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos == 1U || array[pos - 1U].universal_lock_id_ &lt; lock);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="keyword">template</span>&lt;<span class="keyword">typename</span> LOCK_LIST, <span class="keyword">typename</span> LOCK_ENTRY&gt;</div>
<div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1xct.html#a85c8eb14eae94228273418a54ac50a7c">  936</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> <a class="code" href="namespacefoedus_1_1xct.html#a85c8eb14eae94228273418a54ac50a7c">lock_binary_search</a>(</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="keyword">const</span> LOCK_LIST&amp; list,</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> last_active_entry = list.get_last_active_entry();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = lock_lower_bound&lt;LOCK_LIST, LOCK_ENTRY&gt;(list, lock);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;  <span class="keywordflow">if</span> (pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> &amp;&amp; pos &lt;= last_active_entry) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keyword">const</span> LOCK_ENTRY* array = list.get_array();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">if</span> (array[pos].universal_lock_id_ == lock) {</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;}  <span class="comment">// namespace xct</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="preprocessor">#endif  // FOEDUS_XCT_RETROSPECTIVE_LOCK_LIST_HPP_</span></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a55773472fd16796b2b28cc6ca4840ec4"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a55773472fd16796b2b28cc6ca4840ec4">foedus::xct::CurrentLockList::uninit</a></div><div class="ttdeci">void uninit()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00109">retrospective_lock_list.cpp:109</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_af67e1af35b36686bda298171dd4c9991"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#af67e1af35b36686bda298171dd4c9991">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">const LockEntry * get_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00356">retrospective_lock_list.hpp:356</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_ac4dd063e8f157e49b468d9acb3efa276"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">foedus::xct::LockEntry::universal_lock_id_</a></div><div class="ttdeci">UniversalLockId universal_lock_id_</div><div class="ttdoc">Used to order locks in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00125">retrospective_lock_list.hpp:125</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a7e7c2cec33775df3d5e219b3b6e55974"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a7e7c2cec33775df3d5e219b3b6e55974">foedus::xct::CurrentLockList::release_all_at_and_after</a></div><div class="ttdeci">void release_all_at_and_after(UniversalLockId address, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">same as release_all_after(address - 1) </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00815">retrospective_lock_list.hpp:815</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_abb020fdb3951460f9c283d4700696ad2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">foedus::xct::CurrentLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00096">retrospective_lock_list.cpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_aa962bee534789c572b6c38984c5d5d38"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38">foedus::xct::RetrospectiveLockList::binary_search</a></div><div class="ttdeci">LockListPosition binary_search(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::binary_search() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00193">retrospective_lock_list.cpp:193</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a0da52220a86285f625d057e4db4faab4"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a0da52220a86285f625d057e4db4faab4">foedus::xct::CurrentLockList::cbegin</a></div><div class="ttdeci">const LockEntry * cbegin() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00373">retrospective_lock_list.hpp:373</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a706b0c0a7f4c44b0f9dd395154873780"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a706b0c0a7f4c44b0f9dd395154873780">foedus::xct::CurrentLockList::CurrentLockList</a></div><div class="ttdeci">CurrentLockList()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00076">retrospective_lock_list.cpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_af61431071af14d67f681679267cd0364"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#af61431071af14d67f681679267cd0364">foedus::xct::CurrentLockList::try_async_multiple_locks</a></div><div class="ttdeci">void try_async_multiple_locks(LockListPosition upto_pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00742">retrospective_lock_list.hpp:742</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a51f7a5a2deafa1399839940568438ead"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a51f7a5a2deafa1399839940568438ead">foedus::xct::LockEntry::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const LockEntry &amp;v)</div><div class="ttdoc">Debugging. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00118">retrospective_lock_list.cpp:118</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a54190c5faf4f6943043c1d83ed435f44"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44">foedus::xct::LockEntry::set</a></div><div class="ttdeci">void set(UniversalLockId id, RwLockableXctId *lock, LockMode preferred_mode, LockMode taken_mode)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00150">retrospective_lock_list.hpp:150</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a38d217000e4df1d2d8e829c37218f93e"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e">foedus::xct::RetrospectiveLockList::construct</a></div><div class="ttdeci">void construct(thread::Thread *context, uint32_t read_lock_threshold)</div><div class="ttdoc">Fill out this retrospetive lock list for the next run of the given transaction. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00252">retrospective_lock_list.cpp:252</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1WriteXctAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1WriteXctAccess.html">foedus::xct::WriteXctAccess</a></div><div class="ttdoc">Represents a record of write-access during a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00168">xct_access.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ace2e6a593d7b975f1756ce9eec0fd1f2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2">foedus::xct::CurrentLockList::release_all_after</a></div><div class="ttdeci">void release_all_after(UniversalLockId address, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">Release all locks in CLL whose addresses are canonically ordered before the parameter. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00753">retrospective_lock_list.hpp:753</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a9640c2cb1590155356189c7b8f09040e"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a9640c2cb1590155356189c7b8f09040e">foedus::xct::CurrentLockList::cend</a></div><div class="ttdeci">const LockEntry * cend() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00374">retrospective_lock_list.hpp:374</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html">foedus::thread::Thread</a></div><div class="ttdoc">Represents one thread running on one NUMA core. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8hpp_source.html#l00048">thread.hpp:48</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a87841ca555b8fb3fb984baf5c2c0e591"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a87841ca555b8fb3fb984baf5c2c0e591">foedus::xct::RetrospectiveLockList::end</a></div><div class="ttdeci">LockEntry * end()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00255">retrospective_lock_list.hpp:255</a></div></div>
<div class="ttc" id="xct_2fwd_8hpp_html"><div class="ttname"><a href="xct_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in transaction package. </div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a6c7bc64fe85e2d2173c67b6bd8efc9e5"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c7bc64fe85e2d2173c67b6bd8efc9e5">foedus::xct::RetrospectiveLockList::uninit</a></div><div class="ttdeci">void uninit()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00070">retrospective_lock_list.cpp:70</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_afeae5ce72d1c324ecc32dce36459340a"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#afeae5ce72d1c324ecc32dce36459340a">foedus::xct::RetrospectiveLockList::get_last_active_entry</a></div><div class="ttdeci">LockListPosition get_last_active_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00244">retrospective_lock_list.hpp:244</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a398ec264786992d102b8edd74d5767b3"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3">foedus::xct::CurrentLockList::get_max_locked_id</a></div><div class="ttdeci">UniversalLockId get_max_locked_id() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00385">retrospective_lock_list.hpp:385</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_aab2e2a625ee167fdbe6aba3d53d8cf77"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#aab2e2a625ee167fdbe6aba3d53d8cf77">foedus::xct::LockEntry::mcs_block_</a></div><div class="ttdeci">McsBlockIndex mcs_block_</div><div class="ttdoc">0 means the lock not taken. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00144">retrospective_lock_list.hpp:144</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a6e57fd76a57791018ce74dca876d8886"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a6e57fd76a57791018ce74dca876d8886">foedus::xct::CurrentLockList::get_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_volatile_page_resolver() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00375">retrospective_lock_list.hpp:375</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ad34e69a6289f0860fe000c3bbecda1cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb">foedus::xct::CurrentLockList::end</a></div><div class="ttdeci">LockEntry * end()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00372">retrospective_lock_list.hpp:372</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_af0b8f0d95e3ae99293ffc14cf4067573"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573">foedus::xct::CurrentLockList::lower_bound</a></div><div class="ttdeci">LockListPosition lower_bound(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::lower_bound() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00196">retrospective_lock_list.cpp:196</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a3ac4e854509ec8a1cf9a70fcba501a68"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68">foedus::xct::CurrentLockList::giveup_all_after</a></div><div class="ttdeci">void giveup_all_after(UniversalLockId address, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">This gives-up locks in CLL that are not yet taken. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00826">retrospective_lock_list.hpp:826</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html">foedus::xct::LockEntry</a></div><div class="ttdoc">An entry in CLL and RLL, representing a lock that is taken or will be taken. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00120">retrospective_lock_list.hpp:120</a></div></div>
<div class="ttc" id="error__code_8hpp_html"><div class="ttname"><a href="error__code_8hpp.html">error_code.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a2ca03e6543963a43121db4c7fb44fe6e"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a2ca03e6543963a43121db4c7fb44fe6e">foedus::xct::CurrentLockList::get_array</a></div><div class="ttdeci">LockEntry * get_array()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00351">retrospective_lock_list.hpp:351</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a5b7102ba677654ac12ad43d6bbca6ac2"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a5b7102ba677654ac12ad43d6bbca6ac2">foedus::xct::RetrospectiveLockList::get_entry</a></div><div class="ttdeci">const LockEntry * get_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00239">retrospective_lock_list.hpp:239</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_1_1LessThan_html_a373e349de7970cd580f16b01ce780a0f"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html#a373e349de7970cd580f16b01ce780a0f">foedus::xct::LockEntry::LessThan::operator()</a></div><div class="ttdeci">bool operator()(const LockEntry &amp;lhs, UniversalLockId rhs) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00176">retrospective_lock_list.hpp:176</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a122896903e97bc9ef077ba0dbad48f74"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a122896903e97bc9ef077ba0dbad48f74">foedus::xct::AcquireAsyncRet::block_index_</a></div><div class="ttdeci">McsBlockIndex block_index_</div><div class="ttdoc">the queue node we pushed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00170">xct_id.hpp:170</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a4a10e19f1d603ab47e74c605a9909fb5"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5">foedus::xct::CurrentLockList::prepopulate_for_retrospective_lock_list</a></div><div class="ttdeci">void prepopulate_for_retrospective_lock_list(const RetrospectiveLockList &amp;rll)</div><div class="ttdoc">Another batch-insert method used at the beginning of a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00445">retrospective_lock_list.cpp:445</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a85c8eb14eae94228273418a54ac50a7c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a85c8eb14eae94228273418a54ac50a7c">foedus::xct::lock_binary_search</a></div><div class="ttdeci">LockListPosition lock_binary_search(const LOCK_LIST &amp;list, UniversalLockId lock)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00936">retrospective_lock_list.hpp:936</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a74b2aa926de8d4dd514580344f8c0d85"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a74b2aa926de8d4dd514580344f8c0d85">foedus::xct::RetrospectiveLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00235">retrospective_lock_list.hpp:235</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a391136d87e2bd0472aaecd7557a06c83"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a391136d87e2bd0472aaecd7557a06c83">foedus::xct::AcquireAsyncRet::acquired_</a></div><div class="ttdeci">bool acquired_</div><div class="ttdoc">whether we immediately acquired the lock or not </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00163">xct_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a483e36fdf16824e1c72b37cc140b4930"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a483e36fdf16824e1c72b37cc140b4930">foedus::xct::RetrospectiveLockList::~RetrospectiveLockList</a></div><div class="ttdeci">~RetrospectiveLockList()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00045">retrospective_lock_list.cpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a81de3b551fb5d282fb34a18c9949875a"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a81de3b551fb5d282fb34a18c9949875a">foedus::xct::RetrospectiveLockList::cend</a></div><div class="ttdeci">const LockEntry * cend() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00257">retrospective_lock_list.hpp:257</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca46a4f32dedfe259835e730a34150e07c">foedus::xct::kNoLock</a></div><div class="ttdoc">taken_mode_: Not taken the lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00100">xct_id.hpp:100</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html">foedus::xct::RwLockableXctId</a></div><div class="ttdoc">The MCS reader-writer lock variant of LockableXctId. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01132">xct_id.hpp:1132</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">foedus::kErrorCodeXctLockAbort</a></div><div class="ttdoc">0x0AA1 : "XCTION : Lock acquire failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00206">error_code.hpp:206</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a03e818494c4d716f9fc996081f6c419f"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f">foedus::xct::CurrentLockList::calculate_last_locked_entry_from</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry_from(LockListPosition from) const </div><div class="ttdoc">Only searches among entries at or before "from". </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00397">retrospective_lock_list.hpp:397</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a7485f0d26810767b3bef18e12233daa7"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7">foedus::xct::CurrentLockList::assert_sorted_impl</a></div><div class="ttdeci">void assert_sorted_impl() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00178">retrospective_lock_list.cpp:178</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_1_1LessThan_html_a76b4a076a51a0873f3e7dc69b40964b2"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html#a76b4a076a51a0873f3e7dc69b40964b2">foedus::xct::LockEntry::LessThan::operator()</a></div><div class="ttdeci">bool operator()(UniversalLockId lhs, const LockEntry &amp;rhs) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00173">retrospective_lock_list.hpp:173</a></div></div>
<div class="ttc" id="compiler_8hpp_html"><div class="ttname"><a href="compiler_8hpp.html">compiler.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acdd6c3ee6c1e8b0da192818e70fec846"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846">foedus::xct::RetrospectiveLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00059">retrospective_lock_list.cpp:59</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a069941b140019c23d86092e68cd9b331"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331">foedus::xct::CurrentLockList::release_all_locks</a></div><div class="ttdeci">void release_all_locks(MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00473">retrospective_lock_list.hpp:473</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a0d4c7174d5251783b0f6bbf02492c18a"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a0d4c7174d5251783b0f6bbf02492c18a">foedus::xct::lock_lower_bound</a></div><div class="ttdeci">LockListPosition lock_lower_bound(const LOCK_LIST &amp;list, UniversalLockId lock)</div><div class="ttdoc">General lower_bound/binary_search logic for any kind of LockList/LockEntry. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00903">retrospective_lock_list.hpp:903</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a6095aa74c375ba360c61ab5d861497f5"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a6095aa74c375ba360c61ab5d861497f5">foedus::xct::CurrentLockList::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const CurrentLockList &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00132">retrospective_lock_list.cpp:132</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_structfoedus_1_1xct_1_1AcquireAsyncRet"><div class="ttname"><a href="namespacefoedus_1_1xct.html#structfoedus_1_1xct_1_1AcquireAsyncRet">foedus::xct::AcquireAsyncRet</a></div><div class="ttdoc">Return value of acquire_async_rw. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00161">xct_id.hpp:161</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aa8023ecc3dc58816a010a3415ebfc1dd"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd">foedus::xct::CurrentLockList::try_or_acquire_single_lock</a></div><div class="ttdeci">ErrorCode try_or_acquire_single_lock(LockListPosition pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00569">retrospective_lock_list.hpp:569</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a5d17585a918a796486e07feee49a1e0a"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a5d17585a918a796486e07feee49a1e0a">foedus::xct::LockEntry::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const LockEntry &amp;rhs) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00165">retrospective_lock_list.hpp:165</a></div></div>
<div class="ttc" id="xct__id_8hpp_html"><div class="ttname"><a href="xct__id_8hpp.html">xct_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_afe5afad486230afbf7d1b21875a90f13"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13">foedus::xct::RwLockableXctId::get_key_lock</a></div><div class="ttdeci">McsRwLock * get_key_lock() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01139">xct_id.hpp:1139</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a10ee69a6e7731cbebe3511fcf9809bc7"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a10ee69a6e7731cbebe3511fcf9809bc7">foedus::xct::CurrentLockList::giveup_all_at_and_after</a></div><div class="ttdeci">void giveup_all_at_and_after(UniversalLockId address, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00886">retrospective_lock_list.hpp:886</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a78b6d1612fda232b7e8c52dd3f6c2504"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504">foedus::xct::CurrentLockList::is_valid_entry</a></div><div class="ttdeci">bool is_valid_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00362">retrospective_lock_list.hpp:362</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a6c96bb5725be6694030bd8ce88d68698"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">foedus::xct::RetrospectiveLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00248">retrospective_lock_list.hpp:248</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a3cb71937e25bc68318ef0c9808a4a482"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a3cb71937e25bc68318ef0c9808a4a482">foedus::xct::CurrentLockList::binary_search</a></div><div class="ttdeci">LockListPosition binary_search(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::binary_search() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00189">retrospective_lock_list.cpp:189</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a0614dd1f8d7b7f42bc1777af270ebbce"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a0614dd1f8d7b7f42bc1777af270ebbce">foedus::xct::RetrospectiveLockList::is_valid_entry</a></div><div class="ttdeci">bool is_valid_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00245">retrospective_lock_list.hpp:245</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a040661fef567664e4f223f327d4e6a90"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a040661fef567664e4f223f327d4e6a90">foedus::xct::CurrentLockList::~CurrentLockList</a></div><div class="ttdeci">~CurrentLockList()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00082">retrospective_lock_list.cpp:82</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a1a668d5dd1b711abed1a9962a8cb4ec1"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1">foedus::xct::CurrentLockList::calculate_last_locked_entry</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry() const </div><div class="ttdoc">Calculate last_locked_entry_ by really checking the whole list. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00393">retrospective_lock_list.hpp:393</a></div></div>
<div class="ttc" id="assert__nd_8hpp_html"><div class="ttname"><a href="assert__nd_8hpp.html">assert_nd.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a6dd08e0e30b67bb07a86dfd66dba2fd1"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a6dd08e0e30b67bb07a86dfd66dba2fd1">foedus::xct::LockEntry::preferred_mode_</a></div><div class="ttdeci">LockMode preferred_mode_</div><div class="ttdoc">Whick lock mode we should take according to RLL. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00136">retrospective_lock_list.hpp:136</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a67a3371918f47951ef47af35c2979697"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a67a3371918f47951ef47af35c2979697">foedus::xct::RetrospectiveLockList::lower_bound</a></div><div class="ttdeci">LockListPosition lower_bound(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::lower_bound() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00200">retrospective_lock_list.cpp:200</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_aed99dee60f9529d5cfabb5e1742038da"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da">foedus::xct::CurrentLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00405">retrospective_lock_list.hpp:405</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ad7029aa2b4a2d3ec394aa0a0b378b088"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088">foedus::xct::CurrentLockList::try_or_acquire_multiple_locks</a></div><div class="ttdeci">ErrorCode try_or_acquire_multiple_locks(LockListPosition upto_pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdoc">Acquire multiple locks up to the given position in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00636">retrospective_lock_list.hpp:636</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a045022b5415f8fa093fe7ec0ff17b565"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a045022b5415f8fa093fe7ec0ff17b565">foedus::xct::LockEntry::taken_mode_</a></div><div class="ttdeci">LockMode taken_mode_</div><div class="ttdoc">Whick lock mode we have taken during the current run (of course initially kNoLock) ...</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00139">retrospective_lock_list.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ac79149bb167fa69b2afc7861c0c70483"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">foedus::xct::CurrentLockList::init</a></div><div class="ttdeci">void init(LockEntry *array, uint32_t capacity, const memory::GlobalVolatilePageResolver &amp;resolver)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00086">retrospective_lock_list.cpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a5f33e3dc5973ab4010adb9e5de2fc749"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a5f33e3dc5973ab4010adb9e5de2fc749">foedus::xct::CurrentLockList::get_capacity</a></div><div class="ttdeci">uint32_t get_capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00360">retrospective_lock_list.hpp:360</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a57dc541a4a80230e2fc0b45aeb6b879a"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">foedus::xct::LockEntry::is_enough</a></div><div class="ttdeci">bool is_enough() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00163">retrospective_lock_list.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a1a081cde83f98cb29241c65708ac84ed"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a1a081cde83f98cb29241c65708ac84ed">foedus::xct::LockEntry::lock_</a></div><div class="ttdeci">RwLockableXctId * lock_</div><div class="ttdoc">Virtual address of the lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00130">retrospective_lock_list.hpp:130</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a1f903145f3f1b0f2a030e51eb981d6ab"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a1f903145f3f1b0f2a030e51eb981d6ab">foedus::xct::CurrentLockList::try_async_single_lock</a></div><div class="ttdeci">void try_async_single_lock(LockListPosition pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00649">retrospective_lock_list.hpp:649</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acbba6436107d44463bc78619ffe1e6a3"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acbba6436107d44463bc78619ffe1e6a3">foedus::xct::RetrospectiveLockList::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const RetrospectiveLockList &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00145">retrospective_lock_list.cpp:145</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acd7b6530aeff7f5323880bf0b6b14ce0"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">foedus::xct::RetrospectiveLockList::get_array</a></div><div class="ttdeci">const LockEntry * get_array() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00234">retrospective_lock_list.hpp:234</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ac6d197caa170dca6b4cd91c12ccf779e"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">foedus::xct::McsBlockIndex</a></div><div class="ttdeci">uint32_t McsBlockIndex</div><div class="ttdoc">Index in thread-local MCS block. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00153">xct_id.hpp:153</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a3aa9be8584009d4fa0d1bea4ab563167"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167">foedus::xct::LockEntry::is_locked</a></div><div class="ttdeci">bool is_locked() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00162">retrospective_lock_list.hpp:162</a></div></div>
<div class="ttc" id="page__resolver_8hpp_html"><div class="ttname"><a href="page__resolver_8hpp.html">page_resolver.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_ae5243dadf1989a036c762589ac12ac13"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#ae5243dadf1989a036c762589ac12ac13">foedus::xct::RetrospectiveLockList::RetrospectiveLockList</a></div><div class="ttdeci">RetrospectiveLockList()</div><div class="ttdoc">Init/Uninit. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00039">retrospective_lock_list.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_abaacdb674d1296394cff252f995ce001"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#abaacdb674d1296394cff252f995ce001">foedus::xct::CurrentLockList::batch_insert_write_placeholders</a></div><div class="ttdeci">void batch_insert_write_placeholders(const WriteXctAccess *write_set, uint32_t write_set_size)</div><div class="ttdoc">Create entries for all write-sets in one-shot. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00329">retrospective_lock_list.cpp:329</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab23e6efe1f2fb69b13cc9559e56e2181"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab23e6efe1f2fb69b13cc9559e56e2181">foedus::xct::CurrentLockList::cancel_async_single_lock</a></div><div class="ttdeci">void cancel_async_single_lock(LockListPosition pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00724">retrospective_lock_list.hpp:724</a></div></div>
<div class="ttc" id="group__XCT_html_gae2b82bc723691c581c22944ef3cef43c"><div class="ttname"><a href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">foedus::xct::LockMode</a></div><div class="ttdeci">LockMode</div><div class="ttdoc">Represents a mode of lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00095">xct_id.hpp:95</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a7532b1cf91086e276b6318664bf68ca9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a7532b1cf91086e276b6318664bf68ca9">foedus::xct::CurrentLockList::retry_async_single_lock</a></div><div class="ttdeci">bool retry_async_single_lock(LockListPosition pos, MCS_RW_IMPL *mcs_rw_impl)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00696">retrospective_lock_list.hpp:696</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a94b7a86ff61fec046d3c0645023fb535"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535">foedus::xct::RetrospectiveLockList::init</a></div><div class="ttdeci">void init(LockEntry *array, uint32_t capacity, const memory::GlobalVolatilePageResolver &amp;resolver)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00049">retrospective_lock_list.cpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a75e45c9dd7129e1f202252cf124e76ff"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a75e45c9dd7129e1f202252cf124e76ff">foedus::xct::CurrentLockList::get_array</a></div><div class="ttdeci">const LockEntry * get_array() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00350">retrospective_lock_list.hpp:350</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_aa8816862df9a53481685a257632eaeea"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa8816862df9a53481685a257632eaeea">foedus::xct::RetrospectiveLockList::begin</a></div><div class="ttdeci">LockEntry * begin()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00254">retrospective_lock_list.hpp:254</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">foedus::memory::GlobalVolatilePageResolver</a></div><div class="ttdoc">Resolves an offset in a volatile page pool to an actual pointer and vice versa. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00092">page_resolver.hpp:92</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html">foedus::xct::CurrentLockList</a></div><div class="ttdoc">Sorted list of all locks, either read-lock or write-lock, taken in the current run. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00309">retrospective_lock_list.hpp:309</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a9bcb008d4e620f5508f7c69485ade366"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a9bcb008d4e620f5508f7c69485ade366">foedus::xct::RetrospectiveLockList::cbegin</a></div><div class="ttdeci">const LockEntry * cbegin() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00256">retrospective_lock_list.hpp:256</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a1397c6847c1ee46ba9c09457b4f5866e"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1397c6847c1ee46ba9c09457b4f5866e">foedus::xct::RetrospectiveLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00548">retrospective_lock_list.hpp:548</a></div></div>
<div class="ttc" id="thread_2fwd_8hpp_html"><div class="ttname"><a href="thread_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in thread package. </div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a14d555cbd9ddee31c68c9c81ff84c129"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a14d555cbd9ddee31c68c9c81ff84c129">foedus::xct::RetrospectiveLockList::assert_sorted_impl</a></div><div class="ttdeci">void assert_sorted_impl() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00182">retrospective_lock_list.cpp:182</a></div></div>
<div class="ttc" id="group__COMPILER_html_gaa1dec568e79152c892dcf63f445cbd7a"><div class="ttname"><a href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div><div class="ttdeci">#define ALWAYS_INLINE</div><div class="ttdoc">A function suffix to hint that the function should always be inlined. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00106">compiler.hpp:106</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_acbed8e324b88389217b42a132e0547b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8">foedus::xct::CurrentLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00555">retrospective_lock_list.hpp:555</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ae0cbd2f6b369d0340c3222f124fe122b"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b">foedus::xct::CurrentLockList::begin</a></div><div class="ttdeci">LockEntry * begin()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00371">retrospective_lock_list.hpp:371</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_1_1LessThan_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry_1_1LessThan.html">foedus::xct::LockEntry::LessThan</a></div><div class="ttdoc">for std::binary_search() etc without creating the object </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00172">retrospective_lock_list.hpp:172</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsRwLock_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsRwLock.html">foedus::xct::McsRwLock</a></div><div class="ttdoc">An MCS reader-writer lock data structure. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00795">xct_id.hpp:795</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">foedus::xct::RetrospectiveLockList</a></div><div class="ttdoc">Retrospective lock list. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00189">retrospective_lock_list.hpp:189</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a3d1f0c4eb14a988576037fc8f58a3241"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a3d1f0c4eb14a988576037fc8f58a3241">foedus::xct::RetrospectiveLockList::get_capacity</a></div><div class="ttdeci">uint32_t get_capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00243">retrospective_lock_list.hpp:243</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a1ff8ccbccdede750fb5a18b4da505ad9"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_volatile_page_resolver() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00258">retrospective_lock_list.hpp:258</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ad18887a3fb16dc1ca458892ce4b0b27c"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ad18887a3fb16dc1ca458892ce4b0b27c">foedus::xct::CurrentLockList::get_last_locked_entry</a></div><div class="ttdeci">LockListPosition get_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00383">retrospective_lock_list.hpp:383</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a761b506c86d1d8e5681cab34fac1ad29"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">foedus::xct::CurrentLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00365">retrospective_lock_list.hpp:365</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a6db689767722f1d30821d63144bf8bde"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">foedus::xct::CurrentLockList::get_or_add_entry</a></div><div class="ttdeci">LockListPosition get_or_add_entry(UniversalLockId lock_id, RwLockableXctId *lock, LockMode preferred_mode)</div><div class="ttdoc">Adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00204">retrospective_lock_list.cpp:204</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_af24dd2ea6848b84443095530b3c25d8f"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#af24dd2ea6848b84443095530b3c25d8f">foedus::xct::CurrentLockList::get_last_active_entry</a></div><div class="ttdeci">LockListPosition get_last_active_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00361">retrospective_lock_list.hpp:361</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_6f67f5e5099bcaca1b86c6412add5f6c.html">include</a></li><li class="navelem"><a class="el" href="dir_e2c6bc5bd212a768ceff7b155baa199e.html">foedus</a></li><li class="navelem"><a class="el" href="dir_aca8f5dc1b613547099181dc243147ab.html">xct</a></li><li class="navelem"><a class="el" href="retrospective__lock__list_8hpp.html">retrospective_lock_list.hpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
