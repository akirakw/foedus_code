<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/src/foedus/xct/xct.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xct_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">xct.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="xct_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct_8hpp.html">foedus/xct/xct.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;glog/logging.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;ostream&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine_8hpp.html">foedus/engine.hpp</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine__options_8hpp.html">foedus/engine_options.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="atomic__fences_8hpp.html">foedus/assorted/atomic_fences.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine__memory_8hpp.html">foedus/memory/engine_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="numa__core__memory_8hpp.html">foedus/memory/numa_core_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="savepoint_8hpp.html">foedus/savepoint/savepoint.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="savepoint__manager_8hpp.html">foedus/savepoint/savepoint_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="record_8hpp.html">foedus/storage/record.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread_8hpp.html">foedus/thread/thread.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sysxct__impl_8hpp.html">foedus/xct/sysxct_impl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__access_8hpp.html">foedus/xct/xct_access.hpp</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__manager_8hpp.html">foedus/xct/xct_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__options_8hpp.html">foedus/xct/xct_options.hpp</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span>xct {</div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a97f1e851be41dccdc730d7093c111dd2">   41</a></span>&#160;<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a97f1e851be41dccdc730d7093c111dd2">Xct::Xct</a>(<a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine, <a class="code" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* context, <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  : engine_(engine), context_(context), thread_id_(thread_id) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  id_ = <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  active_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  default_rll_for_this_xct_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  enable_rll_for_this_xct_ = default_rll_for_this_xct_;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  default_hot_threshold_for_this_xct_ = <a class="code" href="structfoedus_1_1storage_1_1StorageOptions.html#aad60db937c5dc237347f2ec63b9a0146a719aa48a4b8bccc2056c05d499e9f0be">storage::StorageOptions::kDefaultHotThreshold</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  hot_threshold_for_this_xct_ = default_hot_threshold_for_this_xct_;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  default_rll_threshold_for_this_xct_ = <a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea71e7c29b328ca66143553cd4e2a93f35">XctOptions::kDefaultHotThreshold</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  rll_threshold_for_this_xct_ = default_rll_threshold_for_this_xct_;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  sysxct_workspace_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  read_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  read_set_size_ = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  max_read_set_size_ = 0;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  write_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  write_set_size_ = 0;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  max_write_set_size_ = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  lock_free_read_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  max_lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  lock_free_write_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  max_lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  pointer_set_size_ = 0;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  page_version_set_size_ = 0;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  isolation_level_ = <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  mcs_block_current_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  mcs_rw_async_mapping_current_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  local_work_memory_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  local_work_memory_size_ = 0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  local_work_memory_cur_ = 0;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529">   77</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529">Xct::initialize</a>(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">memory::NumaCoreMemory</a>* core_memory,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  uint32_t* mcs_block_current,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  uint32_t* mcs_rw_async_mapping_current) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc">set_epoch</a>(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">get_savepoint_manager</a>()-&gt;<a class="code" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee">get_initial_current_epoch</a>());</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce">set_ordinal</a>(0);  <span class="comment">// ordinal 0 is possible only as a dummy &quot;latest&quot; XctId</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">is_valid</a>());</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="group__MEMHIERARCHY.html#structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces">memory::NumaCoreMemory:: SmallThreadLocalMemoryPieces</a> pieces</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    = core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a3f376657b7efceecf12e0cc504ab8c17">get_small_thread_local_memory_pieces</a>();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1XctOptions.html">XctOptions</a>&amp; xct_opt = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">xct_</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  default_rll_for_this_xct_ = xct_opt.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#aca8818f386f22400be2a64de3d9eee6b">enable_retrospective_lock_list_</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  enable_rll_for_this_xct_ = default_rll_for_this_xct_;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  default_hot_threshold_for_this_xct_ = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a3e40cfe4530b10e87344b42be16927e1">storage_</a>.<a class="code" href="structfoedus_1_1storage_1_1StorageOptions.html#ac27b7919baf2e41da1057dd666442e6f">hot_threshold_</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  hot_threshold_for_this_xct_ = default_hot_threshold_for_this_xct_;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  default_rll_threshold_for_this_xct_ = xct_opt.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a0c631d601027cf678dfd192f74cd348b">hot_threshold_for_retrospective_lock_list_</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  rll_threshold_for_this_xct_ = default_rll_threshold_for_this_xct_;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  sysxct_workspace_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">SysxctWorkspace</a>*<span class="keyword">&gt;</span>(pieces.sysxct_workspace_memory_);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  read_set_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>*<span class="keyword">&gt;</span>(pieces.xct_read_access_memory_);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  read_set_size_ = 0;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  max_read_set_size_ = xct_opt.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a6e17aace1a8819469f65a133be74975c">max_read_set_size_</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  write_set_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a>*<span class="keyword">&gt;</span>(pieces.xct_write_access_memory_);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  write_set_size_ = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  max_write_set_size_ = xct_opt.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#aaa710f937a96f526a4139fda9ca1b12b">max_write_set_size_</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  lock_free_read_set_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html">LockFreeReadXctAccess</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    pieces.xct_lock_free_read_access_memory_);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  max_lock_free_read_set_size_ = xct_opt.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a8c3d834f1ddfe00a46d6eeb8061576b2">max_lock_free_read_set_size_</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  lock_free_write_set_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html">LockFreeWriteXctAccess</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    pieces.xct_lock_free_write_access_memory_);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  max_lock_free_write_set_size_ = xct_opt.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a7bbcef07872a63599901b71117675c8f">max_lock_free_write_set_size_</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  pointer_set_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html">PointerAccess</a>*<span class="keyword">&gt;</span>(pieces.xct_pointer_access_memory_);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  pointer_set_size_ = 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  page_version_set_ = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1xct_1_1PageVersionAccess.html">PageVersionAccess</a>*<span class="keyword">&gt;</span>(pieces.xct_page_version_memory_);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  page_version_set_size_ = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  mcs_block_current_ = mcs_block_current;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  *mcs_block_current_ = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  mcs_rw_async_mapping_current_ = mcs_rw_async_mapping_current;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  *mcs_rw_async_mapping_current_ = 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  local_work_memory_ = core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a8f55dee0a9b4f7f55d22a60cd677f39e">get_local_work_memory</a>();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  local_work_memory_size_ = core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a318c160df3a63c1063665a1f19e741e8">get_local_work_memory_size</a>();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  local_work_memory_cur_ = 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  sysxct_workspace_-&gt;<a class="code" href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4">init</a>(context_);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">init</a>(</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac62f3ab84bf9ac7f5b7a07c656d5190a">get_current_lock_list_memory</a>(),</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a1542703e9d39b62b7269192a4db8e4b6">get_current_lock_list_capacity</a>(),</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535">init</a>(</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a11de415935b61a9f48e35719d500cbb9">get_retrospective_lock_list_memory</a>(),</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    core_memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#aa15ff5555f06dfff58b3fd11f60f2ca7">get_retrospective_lock_list_capacity</a>(),</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4">  134</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4">Xct::issue_next_id</a>(<a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> max_xct_id, <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> *epoch)  {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">is_valid</a>());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// invariant 1: Larger than latest XctId of this thread.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> new_id = id_;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// invariant 2: Larger than every XctId of any record read or written by this transaction.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a2878cd14b103f72c8bce5a330e03e2b2">store_max</a>(max_xct_id);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// invariant 3: in the epoch</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83">get_epoch</a>().<a class="code" href="classfoedus_1_1Epoch.html#aaef554452ea9ac7b072af98cde1558dc">before</a>(*epoch)) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc">set_epoch</a>(*epoch);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce">set_ordinal</a>(0);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83">get_epoch</a>() == *epoch);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Now, is it possible to get an ordinal one larger than this one?</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f">get_ordinal</a>() &gt;= <a class="code" href="group__XCT.html#ga862d4c5383d7344a8cfd44e6c060d6db">kMaxXctOrdinal</a>)) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="comment">// oh, that&#39;s rare.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Reached the maximum ordinal in this epoch. Advancing current epoch&quot;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; just for this reason. It&#39;s rare, but not an error.&quot;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">advance_current_global_epoch</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(epoch-&gt;<a class="code" href="classfoedus_1_1Epoch.html#aaef554452ea9ac7b072af98cde1558dc">before</a>(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">get_current_global_epoch</a>()));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment">// we have already issued fence by now, so we can use nonatomic version.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      *epoch = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0">get_current_global_epoch_weak</a>();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// try again with this epoch.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f">get_ordinal</a>() &lt; <a class="code" href="group__XCT.html#ga862d4c5383d7344a8cfd44e6c060d6db">kMaxXctOrdinal</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce">set_ordinal</a>(new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f">get_ordinal</a>() + 1U);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a054cf2fca2ce0e5047c817ed10ae1a80">remember_previous_xct_id</a>(new_id);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12">  168</a></span>&#160;std::ostream&amp; <a class="code" href="namespacefoedus_1_1xct.html#a616967518f17dd3edaa2c6ef7495851a">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html">Xct</a>&amp; v) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;Xct&gt;&quot;</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;active_&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a9a76be25f22fd49683d2a4138ab7b199">is_active</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/active_&gt;&quot;</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;enable_rll_for_this_xct_&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#aae4b0ccd575851276efddf752c90a273">is_enable_rll_for_this_xct</a>()</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/enable_rll_for_this_xct_&gt;&quot;</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;default_rll_for_this_xct_&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a69664ddec7511d43c04cee6d66b1c1a2">is_default_rll_for_this_xct</a>()</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/default_rll_for_this_xct_&gt;&quot;</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;hot_threshold&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#ae84fb0f1c8c5c81bac74e79e62da49a6">get_hot_threshold_for_this_xct</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/hot_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;default_hot_threshold&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a0b0e9bc8c0227311e3b1fe1412272992">get_default_hot_threshold_for_this_xct</a>()</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/default_hot_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;rll_threshold&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a8a5728b0376ffa45b801a560051d7d7a">get_rll_threshold_for_this_xct</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/rll_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;default_rll_threshold&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc8817e57a047f64148add6e63fbd661">get_default_rll_threshold_for_this_xct</a>()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/default_rll_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a9a76be25f22fd49683d2a4138ab7b199">is_active</a>()) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;id_&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a07b332c0f7f0896ad37dc93373af1cb2">get_id</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/id_&gt;&quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;read_set_size&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#af7b9c43800807db798d2e58bc07ad5cd">get_read_set_size</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/read_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;write_set_size&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a674e3ce0252c1c9d2f73edf3b3c4307e">get_write_set_size</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/write_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;pointer_set_size&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a6b0f4d5bf1485c376f62e97c6053ea43">get_pointer_set_size</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/pointer_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;page_version_set_size&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67f1a970106386aa9f367195c0a43208">get_page_version_set_size</a>() &lt;&lt; <span class="stringliteral">&quot;&lt;/page_version_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;lock_free_read_set_size&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#af39a25162bfa65a4cc2dea0d64460cbe">get_lock_free_read_set_size</a>()</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;&lt;/lock_free_read_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;lock_free_write_set_size&gt;&quot;</span> &lt;&lt; v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a4dfc3cd9b70a93615c3a0a8014aafbe1">get_lock_free_write_set_size</a>()</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;&lt;/lock_free_write_set_size&gt;&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">SysxctWorkspace</a>* sysxct_workspace = v.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54">get_sysxct_workspace</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    o &lt;&lt; *sysxct_workspace;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/Xct&gt;&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">  198</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">Xct::add_to_pointer_set</a>(</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>* pointer_address,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> observed) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer_address);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// TASK(Hideaki) even though pointer set should be small, we don&#39;t want sequential search</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// everytime. but insertion sort requires shifting. mmm.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pointer_set_size_; ++i) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (pointer_set_[i].address_ == pointer_address) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      pointer_set_[i].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">observed_</a> = observed;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(pointer_set_size_ &gt;= <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">kMaxPointerSets</a>)) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae3e777ca7250fb016691a1eaa40cb2b4">kErrorCodeXctPointerSetOverflow</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// no need for fence. the observed pointer itself is the only data to verify</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  pointer_set_[pointer_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#ab0a7cedbcc3bbb16450cafa8d6867afa">address_</a> = pointer_address;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  pointer_set_[pointer_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">observed_</a> = observed;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  ++pointer_set_size_;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#ab7bf19bc328c888d70d56e3650b9cde4">  226</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#ab7bf19bc328c888d70d56e3650b9cde4">Xct::overwrite_to_pointer_set</a>(</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>* pointer_address,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> observed) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer_address);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pointer_set_size_; ++i) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (pointer_set_[i].address_ == pointer_address) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      pointer_set_[i].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">observed_</a> = observed;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7">  242</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7">Xct::add_to_page_version_set</a>(</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1PageVersion.html">storage::PageVersion</a>* version_address,</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1PageVersionStatus.html">storage::PageVersionStatus</a> observed) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(version_address);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(page_version_set_size_ &gt;= <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">kMaxPointerSets</a>)) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a85287d224b244300a440aaf23971067e">kErrorCodeXctPageVersionSetOverflow</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  page_version_set_[page_version_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PageVersionAccess.html#a82120b2cc92778703d51a235b993278b">address_</a> = version_address;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  page_version_set_[page_version_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PageVersionAccess.html#ae2df4e0519ed710eb7ff135cb69616d2">observed_</a> = observed;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  ++page_version_set_size_;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975">  258</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975">Xct::on_record_read</a>(</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordtype">bool</span> intended_for_write,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* tid_address,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>* observed_xid,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>** read_set_address,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">bool</span> no_readset_if_moved,</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordtype">bool</span> no_readset_if_next_layer) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tid_address);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(observed_xid);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read_set_address);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  *read_set_address = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a>* page = <a class="code" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25">storage::to_page</a>(reinterpret_cast&lt;const void*&gt;(tid_address));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; page_header = page-&gt;<a class="code" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">get_header</a>();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (page_header.snapshot_) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Snapshot page is immutable.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// No read-set, lock, or check for being_written flag needed.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    *observed_xid = tid_address-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_xid-&gt;<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">is_being_written</a>());</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// No read-set or read-locks needed in non-serializable transactions.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// Also no point to conservatively take write-locks recommended by RLL</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// because we don&#39;t take any read locks in these modes, so the</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// original SILO&#39;s write-lock protocol is enough and abort-free.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(isolation_level_ == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">kDirtyRead</a> || isolation_level_ == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934">kSnapshot</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    *observed_xid = tid_address-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41">spin_while_being_written</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_xid-&gt;<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">is_being_written</a>());</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> vpp(<a class="code" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">storage::construct_volatile_page_pointer</a>(page_header.page_id_));</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, tid_address);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(vpp.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077">get_numa_node</a>() &lt; resolver.numa_node_count_);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(vpp.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6">get_offset</a>() &gt;= resolver.begin_);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(vpp.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6">get_offset</a>() &lt; resolver.end_);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// This is a serializable transaction, and we are reading a record from a volatile page.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// We might take a pessimisitic lock for the record, which is our MOCC protocol.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// However, we need to do this _before_ observing XctId. Otherwise there is a</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// chance of aborts even with the lock.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock_id = <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    vpp.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077">get_numa_node</a>(),</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    vpp.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6">get_offset</a>(),</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(tid_address));</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">on_record_read_take_locks_if_needed</a>(intended_for_write, page, lock_id, tid_address);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  *observed_xid = tid_address-&gt;<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41">spin_while_being_written</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_xid-&gt;<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">is_being_written</a>());</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Now that we observe XID in its own (non-inlined) function, probably not needed...</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">assorted::memory_fence_acquire</a>();  <span class="comment">// following reads must happen *after* observing xid</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// check non-reversible flags and skip read-set</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (observed_xid-&gt;<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964">is_moved</a>() &amp;&amp; no_readset_if_moved) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (observed_xid-&gt;<a class="code" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">is_next_layer</a>() &amp;&amp; no_readset_if_next_layer) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id = page-&gt;<a class="code" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">get_header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a4a8c3c363862348530e4ea0be879f694">storage_id_</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a>(</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    storage_id,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    *observed_xid,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    lock_id,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    tid_address,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    read_set_address));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">  334</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">Xct::on_record_read_take_locks_if_needed</a>(</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="keywordtype">bool</span> intended_for_write,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a>* page_address,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock_id,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* tid_address) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, tid_address);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_id == <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(resolver, tid_address));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> rll_pos = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordtype">bool</span> lets_take_lock = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (!retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">is_empty</a>()) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// RLL is set, which means the previous run aborted for race.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// binary-search for each read-set is not cheap, but in this case better than aborts.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// So, let&#39;s see if we should take the lock.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    rll_pos = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38">binary_search</a>(lock_id);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (rll_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">get_array</a>()[rll_pos].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a> == lock_id);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;RLL recommends to take lock on this record!&quot;</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      lets_take_lock = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (!lets_take_lock &amp;&amp; context_-&gt;<a class="code" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2">is_hot_page</a>(page_address)) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    lets_take_lock = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (lets_take_lock) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> mode = intended_for_write ? <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a> : <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> cll_pos = current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">get_or_add_entry</a>(lock_id, tid_address, mode);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1LockEntry.html">LockEntry</a>* cll_entry = current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(cll_pos);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (cll_entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">is_enough</a>()) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span>;  <span class="comment">// already had the lock</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> lock_ret;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (rll_pos == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// Then, this is a single read-lock to take.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      lock_ret = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e">cll_try_or_acquire_single_lock</a>(cll_pos);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">// TODO(Hideaki) The above locks unconditionally in canonnical mode. Even in non-canonical,</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="comment">// when it returns kErrorCodeXctLockAbort AND we haven&#39;t taken any write-lock yet,</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="comment">// we might still want a retry here.. but it has pros/cons. Revisit later.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// Then we should take all locks before this too.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      lock_ret = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d">cll_try_or_acquire_multiple_locks</a>(cll_pos);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (lock_ret != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_ret == <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">kErrorCodeXctLockAbort</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      DVLOG(0) &lt;&lt; <span class="stringliteral">&quot;Failed to take some of the lock that might be beneficial later&quot;</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;. We still go on because the locks here are not mandatory.&quot;</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="comment">// At this point, no point to be advised by RLL any longer.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="comment">// Let&#39;s clear it, and let&#39;s give-up all incomplete locks in CLL.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85">cll_giveup_all_locks_after</a>(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846">clear_entries</a>();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">  395</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">Xct::add_to_read_set</a>(</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* owner_id_address,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>** read_set_address) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> owner_lock_id = <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a>(</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    storage_id,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    observed_owner_id,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    owner_lock_id,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    owner_id_address,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    read_set_address);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a1fd2a90acadfa8e01d93187ee10a55b2">  410</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">Xct::add_to_read_set</a>(</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id,</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> owner_lock_id,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* owner_id_address,</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>** read_set_address) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_lock_id == <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(resolver, owner_id_address));</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_id_address);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">is_being_written</a>());</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read_set_address);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(read_set_size_ &gt;= max_read_set_size_)) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">kErrorCodeXctReadSetOverflow</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// if the next-layer bit is ON, the record is not logically a record, so why we are adding</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// it to read-set? we should have already either aborted or retried in this case.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">is_next_layer</a>());</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>* entry = read_set_ + read_set_size_;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  *read_set_address = entry;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  entry-&gt;<a class="code" href="structfoedus_1_1xct_1_1RecordXctAccess.html#aabd9a9dc321b9512df6740dac7738a0b">ordinal_</a> = read_set_size_;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  entry-&gt;storage_id_ = storage_id;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  entry-&gt;set_owner_id_and_lock_id(owner_id_address, owner_lock_id);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  entry-&gt;observed_owner_id_ = observed_owner_id;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  entry-&gt;related_write_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  ++read_set_size_;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">  444</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">Xct::add_to_write_set</a>(</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* owner_id_address,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordtype">char</span>* payload_address,</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a>* log_entry) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_id_address);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_address);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log_entry);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(write_set_size_ &gt;= max_write_set_size_)) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">kErrorCodeXctWriteSetOverflow</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a>* write = write_set_ + write_set_size_;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1RecordXctAccess.html#aabd9a9dc321b9512df6740dac7738a0b">ordinal_</a> = write_set_size_;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html#a7d5747c3377b71d9fb8d0a767122e0c6">payload_address_</a> = payload_address;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html#a531e6368a36e80f967de0ace50c0fb27">log_entry_</a> = log_entry;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1RecordXctAccess.html#aecf604e6febe0a58b79df2480cb6aafc">storage_id_</a> = storage_id;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba">set_owner_id_resolve_lock_id</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html#aa497859202b89e4d8ff9b9ab5f9d2734">related_read_</a> = <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  ++write_set_size_;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#ad14df45e5685d6725622e28ed45f9726">  474</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#ad14df45e5685d6725622e28ed45f9726">Xct::add_to_read_and_write_set</a>(</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* owner_id_address,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordtype">char</span>* payload_address,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a>* log_entry) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(observed_owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">is_valid</a>());</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">auto</span>* write = write_set_ + write_set_size_;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">add_to_write_set</a>(storage_id, owner_id_address, payload_address, log_entry));</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keyword">auto</span>* read = read_set_ + read_set_size_;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>* dummy;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a>(</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    storage_id,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    observed_owner_id,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    write-&gt;owner_lock_id_,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    owner_id_address,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    &amp;dummy));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read-&gt;owner_id_address_ == owner_id_address);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  read-&gt;related_write_ = write;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  write-&gt;related_read_ = read;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read-&gt;related_write_-&gt;related_read_ == read);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;related_read_-&gt;related_write_ == write);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;log_entry_ == log_entry);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;owner_id_address_ == owner_id_address);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set_size_ &gt; 0);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a">  506</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a">Xct::add_related_write_set</a>(</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>* related_read_set,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* tid_address,</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">char</span>* payload_address,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a>* log_entry) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(related_read_set);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tid_address);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keyword">auto</span>* write = write_set_ + write_set_size_;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keyword">auto</span> storage_id = related_read_set-&gt;<a class="code" href="structfoedus_1_1xct_1_1RecordXctAccess.html#aecf604e6febe0a58b79df2480cb6aafc">storage_id_</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keyword">auto</span>* owner_id_address = related_read_set-&gt;<a class="code" href="structfoedus_1_1xct_1_1RecordXctAccess.html#abd33c0a264f750c327845dd6e88eb1ff">owner_id_address_</a>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">add_to_write_set</a>(storage_id, owner_id_address, payload_address, log_entry));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  related_read_set-&gt;<a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html#aa2c1ca8c7b1fdb5788ceeb02372a6318">related_write_</a> = write;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  write-&gt;<a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html#aa497859202b89e4d8ff9b9ab5f9d2734">related_read_</a> = related_read_set;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(related_read_set-&gt;<a class="code" href="structfoedus_1_1xct_1_1ReadXctAccess.html#aa2c1ca8c7b1fdb5788ceeb02372a6318">related_write_</a>-&gt;<a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html#aa497859202b89e4d8ff9b9ab5f9d2734">related_read_</a> == related_read_set);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;related_read_-&gt;related_write_ == write);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;log_entry_ == log_entry);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;owner_id_address_ == owner_id_address);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set_size_ &gt; 0);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a52e75f1bf22a2b3553b6960799d7f6d6">  532</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a52e75f1bf22a2b3553b6960799d7f6d6">Xct::add_to_lock_free_read_set</a>(</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a>* owner_id_address) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(lock_free_read_set_size_ &gt;= max_lock_free_read_set_size_)) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">kErrorCodeXctReadSetOverflow</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  lock_free_read_set_[lock_free_read_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a4dbed12a2577adcb53657014bae68229">storage_id_</a> = storage_id;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  lock_free_read_set_[lock_free_read_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a1383a6cf8d494678e4a577dbe4c8408e">observed_owner_id_</a> = observed_owner_id;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  lock_free_read_set_[lock_free_read_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a5e4a0a2fe6d9c03a9e18ceacb5ee2547">owner_id_address_</a> = owner_id_address;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  ++lock_free_read_set_size_;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="classfoedus_1_1xct_1_1Xct.html#a3a3bb3ad1bee321b677b059cf29fbbbf">  551</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a3a3bb3ad1bee321b677b059cf29fbbbf">Xct::add_to_lock_free_write_set</a>(</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a>* log_entry) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log_entry);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(lock_free_write_set_size_ &gt;= max_lock_free_write_set_size_)) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">kErrorCodeXctWriteSetOverflow</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  lock_free_write_set_[lock_free_write_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#a3fc6550ec39eca7192cee417f02ced60">storage_id_</a> = storage_id;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  lock_free_write_set_[lock_free_write_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#ab090fd78276df1811cd70b77eb39f052">log_entry_</a> = log_entry;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  ++lock_free_write_set_size_;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}  <span class="comment">// namespace xct</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="ttc" id="structfoedus_1_1xct_1_1WriteXctAccess_html_aa497859202b89e4d8ff9b9ab5f9d2734"><div class="ttname"><a href="structfoedus_1_1xct_1_1WriteXctAccess.html#aa497859202b89e4d8ff9b9ab5f9d2734">foedus::xct::WriteXctAccess::related_read_</a></div><div class="ttdeci">ReadXctAccess * related_read_</div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00178">xct_access.hpp:178</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a208310505c3d16cf2dc10f94f968d4a4"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4">foedus::xct::Xct::issue_next_id</a></div><div class="ttdeci">void issue_next_id(XctId max_xct_id, Epoch *epoch)</div><div class="ttdoc">Called while a successful commit of xct to issue a new xct id. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00134">xct.cpp:134</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1WriteXctAccess_html_a531e6368a36e80f967de0ace50c0fb27"><div class="ttname"><a href="structfoedus_1_1xct_1_1WriteXctAccess.html#a531e6368a36e80f967de0ace50c0fb27">foedus::xct::WriteXctAccess::log_entry_</a></div><div class="ttdeci">log::RecordLogType * log_entry_</div><div class="ttdoc">Pointer to the log entry in private log buffer for this write opereation. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00175">xct_access.hpp:175</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_aa77cde98794b5a55e0d295284acb3e6d"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">foedus::thread::Thread::get_global_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00125">thread.cpp:125</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html_a5e4a0a2fe6d9c03a9e18ceacb5ee2547"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a5e4a0a2fe6d9c03a9e18ceacb5ee2547">foedus::xct::LockFreeReadXctAccess::owner_id_address_</a></div><div class="ttdeci">RwLockableXctId * owner_id_address_</div><div class="ttdoc">Pointer to the TID we protect against. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00210">xct_access.hpp:210</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">foedus::xct::Xct::kMaxPointerSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00061">xct.hpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_af25a0de9ca35e854b50d5f5621fb23dc"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc">foedus::xct::XctId::set_epoch</a></div><div class="ttdeci">void set_epoch(Epoch epoch) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00965">xct_id.hpp:965</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_ac4dd063e8f157e49b468d9acb3efa276"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">foedus::xct::LockEntry::universal_lock_id_</a></div><div class="ttdeci">UniversalLockId universal_lock_id_</div><div class="ttdoc">Used to order locks in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00125">retrospective_lock_list.hpp:125</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a616967518f17dd3edaa2c6ef7495851a"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a616967518f17dd3edaa2c6ef7495851a">foedus::xct::operator&lt;&lt;</a></div><div class="ttdeci">std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const LockEntry &amp;v)</div><div class="ttdoc">Debugging. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00118">retrospective_lock_list.cpp:118</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html">foedus::xct::LockFreeReadXctAccess</a></div><div class="ttdoc">Represents a record of special read-access during a transaction without any need for locking...</div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00200">xct_access.hpp:200</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc8817e57a047f64148add6e63fbd661"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc8817e57a047f64148add6e63fbd661">foedus::xct::Xct::get_default_rll_threshold_for_this_xct</a></div><div class="ttdeci">uint16_t get_default_rll_threshold_for_this_xct() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00137">xct.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_aa962bee534789c572b6c38984c5d5d38"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38">foedus::xct::RetrospectiveLockList::binary_search</a></div><div class="ttdeci">LockListPosition binary_search(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::binary_search() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00193">retrospective_lock_list.cpp:193</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a67553e6e570cdc0b371992db058cf7cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">foedus::xct::Xct::add_to_read_set</a></div><div class="ttdeci">ErrorCode add_to_read_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address, ReadXctAccess **read_set_address)</div><div class="ttdoc">Add the given record to the read set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00395">xct.cpp:395</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PageVersionAccess_html_a82120b2cc92778703d51a235b993278b"><div class="ttname"><a href="structfoedus_1_1xct_1_1PageVersionAccess.html#a82120b2cc92778703d51a235b993278b">foedus::xct::PageVersionAccess::address_</a></div><div class="ttdeci">const storage::PageVersion * address_</div><div class="ttdoc">Address to the page version. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00076">xct_access.hpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a4578dd6dab7925b95d7810335ae5cec0"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0">foedus::xct::XctManager::get_current_global_epoch_weak</a></div><div class="ttdeci">Epoch get_current_global_epoch_weak() const </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00060">xct_manager_pimpl.cpp:60</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a8c3d834f1ddfe00a46d6eeb8061576b2"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a8c3d834f1ddfe00a46d6eeb8061576b2">foedus::xct::XctOptions::max_lock_free_read_set_size_</a></div><div class="ttdeci">uint32_t max_lock_free_read_set_size_</div><div class="ttdoc">The maximum number of lock-free read-set one transaction can have. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00084">xct_options.hpp:84</a></div></div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="group__STORAGE_html_gaa114fc1859c2d4cb8b9e2021cb11cb25"><div class="ttname"><a href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25">foedus::storage::to_page</a></div><div class="ttdeci">Page * to_page(const void *address)</div><div class="ttdoc">super-dirty way to obtain Page the address belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00395">page.hpp:395</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_ab52244fbb6c13b0c0774431af72d482e"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e">foedus::thread::Thread::cll_try_or_acquire_single_lock</a></div><div class="ttdeci">ErrorCode cll_try_or_acquire_single_lock(xct::LockListPosition pos)</div><div class="ttdoc">Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00850">thread_pimpl.cpp:850</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a419a270d62522ede9bd871dd4adc0e2a"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">foedus::xct::XctManager::get_current_global_epoch</a></div><div class="ttdeci">Epoch get_current_global_epoch() const </div><div class="ttdoc">Returns the current global epoch, the epoch a newly started transaction will be in. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00057">xct_manager_pimpl.cpp:57</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">foedus::kErrorCodeXctReadSetOverflow</a></div><div class="ttdoc">0x0A01 : "XCTION : Too large read-set. Check the config of XctOptions" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00196">error_code.hpp:196</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga595ca7fc4a3011a9704a883a25141e5f"><div class="ttname"><a href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">foedus::storage::StorageId</a></div><div class="ttdeci">uint32_t StorageId</div><div class="ttdoc">Unique ID for storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00055">storage_id.hpp:55</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_aca8818f386f22400be2a64de3d9eee6b"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#aca8818f386f22400be2a64de3d9eee6b">foedus::xct::XctOptions::enable_retrospective_lock_list_</a></div><div class="ttdeci">bool enable_retrospective_lock_list_</div><div class="ttdoc">Whether to use Retrospective Lock List (RLL) after aborts. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00123">xct_options.hpp:123</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a674e3ce0252c1c9d2f73edf3b3c4307e"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a674e3ce0252c1c9d2f73edf3b3c4307e">foedus::xct::Xct::get_write_set_size</a></div><div class="ttdeci">uint32_t get_write_set_size() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00157">xct.hpp:157</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RecordXctAccess_html_aabd9a9dc321b9512df6740dac7738a0b"><div class="ttname"><a href="structfoedus_1_1xct_1_1RecordXctAccess.html#aabd9a9dc321b9512df6740dac7738a0b">foedus::xct::RecordXctAccess::ordinal_</a></div><div class="ttdeci">uint32_t ordinal_</div><div class="ttdoc">Indicates the ordinal among ReadXctAccess/WriteXctAccess of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00096">xct_access.hpp:96</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1WriteXctAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1WriteXctAccess.html">foedus::xct::WriteXctAccess</a></div><div class="ttdoc">Represents a record of write-access during a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00168">xct_access.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1savepoint_1_1SavepointManager_html_a82624b3d7edff1d02e29c1b8863dd4ee"><div class="ttname"><a href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee">foedus::savepoint::SavepointManager::get_initial_current_epoch</a></div><div class="ttdeci">Epoch get_initial_current_epoch() const </div><div class="ttdef"><b>Definition:</b> <a href="savepoint__manager_8cpp_source.html#l00036">savepoint_manager.cpp:36</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PointerAccess_html_ab0a7cedbcc3bbb16450cafa8d6867afa"><div class="ttname"><a href="structfoedus_1_1xct_1_1PointerAccess.html#ab0a7cedbcc3bbb16450cafa8d6867afa">foedus::xct::PointerAccess::address_</a></div><div class="ttdeci">const storage::VolatilePagePointer * address_</div><div class="ttdoc">Address of the volatile pointer. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00052">xct_access.hpp:52</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html">foedus::thread::Thread</a></div><div class="ttdoc">Represents one thread running on one NUMA core. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8hpp_source.html#l00048">thread.hpp:48</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_abc3a6688cdf5249c46613a1988b71975"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975">foedus::xct::Xct::on_record_read</a></div><div class="ttdeci">ErrorCode on_record_read(bool intended_for_write, RwLockableXctId *tid_address, XctId *observed_xid, ReadXctAccess **read_set_address, bool no_readset_if_moved=false, bool no_readset_if_next_layer=false)</div><div class="ttdoc">The general logic invoked for every record read. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00258">xct.cpp:258</a></div></div>
<div class="ttc" id="xct_8hpp_html"><div class="ttname"><a href="xct_8hpp.html">xct.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a4a8c3c363862348530e4ea0be879f694"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a4a8c3c363862348530e4ea0be879f694">foedus::storage::PageHeader::storage_id_</a></div><div class="ttdeci">StorageId storage_id_</div><div class="ttdoc">ID of the storage this page belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00196">page.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PointerAccess_html_a10634af817a6e33b8f745cd726b7dee1"><div class="ttname"><a href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">foedus::xct::PointerAccess::observed_</a></div><div class="ttdeci">storage::VolatilePagePointer observed_</div><div class="ttdoc">Value of the volatile pointer as of the access. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00055">xct_access.hpp:55</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a07b332c0f7f0896ad37dc93373af1cb2"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a07b332c0f7f0896ad37dc93373af1cb2">foedus::xct::Xct::get_id</a></div><div class="ttdeci">const XctId &amp; get_id() const </div><div class="ttdoc">Returns the ID of this transaction, but note that it is not issued until commit time! ...</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00151">xct.hpp:151</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html">foedus::storage::VolatilePagePointer</a></div><div class="ttdoc">Represents a pointer to a volatile page with modification count for preventing ABA. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00194">storage_id.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html">foedus::xct::Xct</a></div><div class="ttdoc">Represents a user transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00058">xct.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a1fb740dca84aaaed101bf9f4818c5b4f"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">foedus::EngineOptions::xct_</a></div><div class="ttdeci">xct::XctOptions xct_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00147">engine_options.hpp:147</a></div></div>
<div class="ttc" id="engine_8hpp_html"><div class="ttname"><a href="engine_8hpp.html">engine.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html">foedus::storage::PageVersion</a></div><div class="ttdoc">Just a synonym of XctId to be used as a page lock mechanism. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00129">page.hpp:129</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PageVersionAccess_html_ae2df4e0519ed710eb7ff135cb69616d2"><div class="ttname"><a href="structfoedus_1_1xct_1_1PageVersionAccess.html#ae2df4e0519ed710eb7ff135cb69616d2">foedus::xct::PageVersionAccess::observed_</a></div><div class="ttdeci">storage::PageVersionStatus observed_</div><div class="ttdoc">Value of the page version as of the access. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00079">xct_access.hpp:79</a></div></div>
<div class="ttc" id="savepoint_8hpp_html"><div class="ttname"><a href="savepoint_8hpp.html">savepoint.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html">foedus::xct::XctId</a></div><div class="ttdoc">Persistent status part of Transaction ID. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00955">xct_id.hpp:955</a></div></div>
<div class="ttc" id="group__LOGTYPE_html_gad2d33090f44d00949a05c245e5ff1046"><div class="ttname"><a href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">foedus::log::invoke_assert_valid</a></div><div class="ttdeci">void invoke_assert_valid(void *log_buffer)</div><div class="ttdoc">Invokes the assertion logic of each log type. </div><div class="ttdef"><b>Definition:</b> <a href="log__type__invoke_8hpp_source.html#l00111">log_type_invoke.hpp:111</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1ReadXctAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1ReadXctAccess.html">foedus::xct::ReadXctAccess</a></div><div class="ttdoc">Represents a record of read-access during a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00139">xct_access.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html"><div class="ttname"><a href="classfoedus_1_1Epoch.html">foedus::Epoch</a></div><div class="ttdoc">Represents a time epoch. </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00061">epoch.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a9a76be25f22fd49683d2a4138ab7b199"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a9a76be25f22fd49683d2a4138ab7b199">foedus::xct::Xct::is_active</a></div><div class="ttdeci">bool is_active() const </div><div class="ttdoc">Returns whether the object is an active transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00121">xct.hpp:121</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_a8735d5698123b41317b3c5970ffd1e50"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">foedus::xct::RwLockableXctId::xct_id_</a></div><div class="ttdeci">XctId xct_id_</div><div class="ttdoc">the second 64bit: Persistent status part of TID. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01137">xct_id.hpp:1137</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html">foedus::xct::LockEntry</a></div><div class="ttdoc">An entry in CLL and RLL, representing a lock that is taken or will be taken. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00120">retrospective_lock_list.hpp:120</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a936888dbc82de6e76194b72c28c9a10f"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f">foedus::xct::XctId::get_ordinal</a></div><div class="ttdeci">uint32_t get_ordinal() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00976">xct_id.hpp:976</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a1542703e9d39b62b7269192a4db8e4b6"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a1542703e9d39b62b7269192a4db8e4b6">foedus::memory::NumaCoreMemory::get_current_lock_list_capacity</a></div><div class="ttdeci">uint64_t get_current_lock_list_capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00095">numa_core_memory.hpp:95</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934">foedus::xct::kSnapshot</a></div><div class="ttdoc">Snapshot isolation (SI), meaning the transaction reads a consistent and complete image of the databas...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00078">xct_id.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a7dad4e0e5a6770ee941bd365410f9b6a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">foedus::xct::Xct::add_to_write_set</a></div><div class="ttdeci">ErrorCode add_to_write_set(storage::StorageId storage_id, RwLockableXctId *owner_id_address, char *payload_address, log::RecordLogType *log_entry)</div><div class="ttdoc">Add the given record to the write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00444">xct.cpp:444</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a318c160df3a63c1063665a1f19e741e8"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a318c160df3a63c1063665a1f19e741e8">foedus::memory::NumaCoreMemory::get_local_work_memory_size</a></div><div class="ttdeci">uint64_t get_local_work_memory_size() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00110">numa_core_memory.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a449da7fea452dd81c194f94b28e7a7e2"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">foedus::xct::XctId::is_valid</a></div><div class="ttdeci">bool is_valid() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00973">xct_id.hpp:973</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a85287d224b244300a440aaf23971067e"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a85287d224b244300a440aaf23971067e">foedus::kErrorCodeXctPageVersionSetOverflow</a></div><div class="ttdoc">0x0A06 : "XCTION : Too large page-version set. Consider using snapshot isolation." ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00201">error_code.hpp:201</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_ad14df45e5685d6725622e28ed45f9726"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#ad14df45e5685d6725622e28ed45f9726">foedus::xct::Xct::add_to_read_and_write_set</a></div><div class="ttdeci">ErrorCode add_to_read_and_write_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address, char *payload_address, log::RecordLogType *log_entry)</div><div class="ttdoc">Add a pair of read and write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00474">xct.cpp:474</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a52e75f1bf22a2b3553b6960799d7f6d6"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a52e75f1bf22a2b3553b6960799d7f6d6">foedus::xct::Xct::add_to_lock_free_read_set</a></div><div class="ttdeci">ErrorCode add_to_lock_free_read_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address)</div><div class="ttdoc">Add the given record to the special read-set that is not placed in usual data pages. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00532">xct.cpp:532</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a8f55dee0a9b4f7f55d22a60cd677f39e"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a8f55dee0a9b4f7f55d22a60cd677f39e">foedus::memory::NumaCoreMemory::get_local_work_memory</a></div><div class="ttdeci">void * get_local_work_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00109">numa_core_memory.hpp:109</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageOptions_html_aad60db937c5dc237347f2ec63b9a0146a719aa48a4b8bccc2056c05d499e9f0be"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageOptions.html#aad60db937c5dc237347f2ec63b9a0146a719aa48a4b8bccc2056c05d499e9f0be">foedus::storage::StorageOptions::kDefaultHotThreshold</a></div><div class="ttdef"><b>Definition:</b> <a href="storage__options_8hpp_source.html#l00033">storage_options.hpp:33</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeWriteXctAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html">foedus::xct::LockFreeWriteXctAccess</a></div><div class="ttdoc">Represents a record of special write-access during a transaction without any need for locking...</div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00228">xct_access.hpp:228</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a11de415935b61a9f48e35719d500cbb9"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a11de415935b61a9f48e35719d500cbb9">foedus::memory::NumaCoreMemory::get_retrospective_lock_list_memory</a></div><div class="ttdeci">xct::LockEntry * get_retrospective_lock_list_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00098">numa_core_memory.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html_a1383a6cf8d494678e4a577dbe4c8408e"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a1383a6cf8d494678e4a577dbe4c8408e">foedus::xct::LockFreeReadXctAccess::observed_owner_id_</a></div><div class="ttdeci">XctId observed_owner_id_</div><div class="ttdoc">XID value we observed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00204">xct_access.hpp:204</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html">foedus::memory::NumaCoreMemory</a></div><div class="ttdoc">Repository of memories dynamically acquired within one CPU core (thread). </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00046">numa_core_memory.hpp:46</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a4f168d41ea00249fefe905def87e80c8"><div class="ttname"><a href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">foedus::Engine::get_savepoint_manager</a></div><div class="ttdeci">savepoint::SavepointManager * get_savepoint_manager() const </div><div class="ttdoc">See Savepoint Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00053">engine.cpp:53</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html">foedus::xct::RwLockableXctId</a></div><div class="ttdoc">The MCS reader-writer lock variant of LockableXctId. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01132">xct_id.hpp:1132</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">foedus::kErrorCodeXctLockAbort</a></div><div class="ttdoc">0x0AA1 : "XCTION : Lock acquire failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00206">error_code.hpp:206</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageOptions_html_ac27b7919baf2e41da1057dd666442e6f"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageOptions.html#ac27b7919baf2e41da1057dd666442e6f">foedus::storage::StorageOptions::hot_threshold_</a></div><div class="ttdeci">uint64_t hot_threshold_</div><div class="ttdoc">Page hotness >= this value will be considered hot (hybrid CC only). </div><div class="ttdef"><b>Definition:</b> <a href="storage__options_8hpp_source.html#l00056">storage_options.hpp:56</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html">foedus::xct::XctOptions</a></div><div class="ttdoc">Set of options for xct manager. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00035">xct_options.hpp:35</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a94b21516b530d0be271c6005a72009ad"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">foedus::xct::to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId to_universal_lock_id(storage::VolatilePagePointer page_id, uintptr_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00063">sysxct_impl.hpp:63</a></div></div>
<div class="ttc" id="engine__options_8hpp_html"><div class="ttname"><a href="engine__options_8hpp.html">engine_options.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a69664ddec7511d43c04cee6d66b1c1a2"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a69664ddec7511d43c04cee6d66b1c1a2">foedus::xct::Xct::is_default_rll_for_this_xct</a></div><div class="ttdeci">bool is_default_rll_for_this_xct() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00125">xct.hpp:125</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a3f376657b7efceecf12e0cc504ab8c17"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a3f376657b7efceecf12e0cc504ab8c17">foedus::memory::NumaCoreMemory::get_small_thread_local_memory_pieces</a></div><div class="ttdeci">const SmallThreadLocalMemoryPieces &amp; get_small_thread_local_memory_pieces() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00105">numa_core_memory.hpp:105</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a054cf2fca2ce0e5047c817ed10ae1a80"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a054cf2fca2ce0e5047c817ed10ae1a80">foedus::xct::Xct::remember_previous_xct_id</a></div><div class="ttdeci">void remember_previous_xct_id(XctId new_id)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00386">xct.hpp:386</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acdd6c3ee6c1e8b0da192818e70fec846"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846">foedus::xct::RetrospectiveLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00059">retrospective_lock_list.cpp:59</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ae36b3307af22f430a8f11765e3e57748"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">foedus::xct::xct_id_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId xct_id_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, RwLockableXctId *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01226">xct_id.hpp:1226</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html_a4dbed12a2577adcb53657014bae68229"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a4dbed12a2577adcb53657014bae68229">foedus::xct::LockFreeReadXctAccess::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdoc">The storage we accessed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00207">xct_access.hpp:207</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a2878cd14b103f72c8bce5a330e03e2b2"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a2878cd14b103f72c8bce5a330e03e2b2">foedus::xct::XctId::store_max</a></div><div class="ttdeci">void store_max(const XctId &amp;other) __attribute__((always_inline))</div><div class="ttdoc">Kind of std::max(this, other). </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01059">xct_id.hpp:1059</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_ac3d7cb1649528efa8b9aa22b63bf52e6"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6">foedus::storage::VolatilePagePointer::get_offset</a></div><div class="ttdeci">memory::PagePoolOffset get_offset() const </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00202">storage_id.hpp:202</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RecordXctAccess_html_ace820ba89437e4d3a59fdb47a47525ba"><div class="ttname"><a href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba">foedus::xct::RecordXctAccess::set_owner_id_resolve_lock_id</a></div><div class="ttdeci">void set_owner_id_resolve_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, RwLockableXctId *owner_id_address)</div><div class="ttdoc">Calculate owner_lock_id using the resolver. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8cpp_source.html#l00093">xct_access.cpp:93</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_af7b9c43800807db798d2e58bc07ad5cd"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#af7b9c43800807db798d2e58bc07ad5cd">foedus::xct::Xct::get_read_set_size</a></div><div class="ttdeci">uint32_t get_read_set_size() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00156">xct.hpp:156</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aa23025809d9c2fdff744f98f78c3882a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a">foedus::xct::Xct::add_related_write_set</a></div><div class="ttdeci">ErrorCode add_related_write_set(ReadXctAccess *related_read_set, RwLockableXctId *tid_address, char *payload_address, log::RecordLogType *log_entry)</div><div class="ttdoc">Registers a write-set related to an existing read-set. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00506">xct.cpp:506</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a3a3bb3ad1bee321b677b059cf29fbbbf"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a3a3bb3ad1bee321b677b059cf29fbbbf">foedus::xct::Xct::add_to_lock_free_write_set</a></div><div class="ttdeci">ErrorCode add_to_lock_free_write_set(storage::StorageId storage_id, log::RecordLogType *log_entry)</div><div class="ttdoc">Add the given log to the lock-free write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00551">xct.cpp:551</a></div></div>
<div class="ttc" id="record_8hpp_html"><div class="ttname"><a href="record_8hpp.html">record.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a3e40cfe4530b10e87344b42be16927e1"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a3e40cfe4530b10e87344b42be16927e1">foedus::EngineOptions::storage_</a></div><div class="ttdeci">storage::StorageOptions storage_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00145">engine_options.hpp:145</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a0b0e9bc8c0227311e3b1fe1412272992"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a0b0e9bc8c0227311e3b1fe1412272992">foedus::xct::Xct::get_default_hot_threshold_for_this_xct</a></div><div class="ttdeci">uint16_t get_default_hot_threshold_for_this_xct() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00130">xct.hpp:130</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RecordXctAccess_html_abd33c0a264f750c327845dd6e88eb1ff"><div class="ttname"><a href="structfoedus_1_1xct_1_1RecordXctAccess.html#abd33c0a264f750c327845dd6e88eb1ff">foedus::xct::RecordXctAccess::owner_id_address_</a></div><div class="ttdeci">RwLockableXctId * owner_id_address_</div><div class="ttdoc">Pointer to the accessed record. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00102">xct_access.hpp:102</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a6c96bb5725be6694030bd8ce88d68698"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">foedus::xct::RetrospectiveLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00248">retrospective_lock_list.hpp:248</a></div></div>
<div class="ttc" id="numa__core__memory_8hpp_html"><div class="ttname"><a href="numa__core__memory_8hpp.html">numa_core_memory.hpp</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a7bbcef07872a63599901b71117675c8f"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a7bbcef07872a63599901b71117675c8f">foedus::xct::XctOptions::max_lock_free_write_set_size_</a></div><div class="ttdeci">uint32_t max_lock_free_write_set_size_</div><div class="ttdoc">The maximum number of lock-free write-set one transaction can have. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00092">xct_options.hpp:92</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_ae84fb0f1c8c5c81bac74e79e62da49a6"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#ae84fb0f1c8c5c81bac74e79e62da49a6">foedus::xct::Xct::get_hot_threshold_for_this_xct</a></div><div class="ttdeci">uint16_t get_hot_threshold_for_this_xct() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00128">xct.hpp:128</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a263602e0a73eedbe5f32128635106e17"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">foedus::storage::assert_within_valid_volatile_page</a></div><div class="ttdeci">void assert_within_valid_volatile_page(const memory::GlobalVolatilePageResolver &amp;resolver, const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00428">page.hpp:428</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html"><div class="ttname"><a href="classfoedus_1_1Engine.html">foedus::Engine</a></div><div class="ttdoc">Database engine object that holds all resources and provides APIs. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8hpp_source.html#l00109">engine.hpp:109</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1WriteXctAccess_html_a7d5747c3377b71d9fb8d0a767122e0c6"><div class="ttname"><a href="structfoedus_1_1xct_1_1WriteXctAccess.html#a7d5747c3377b71d9fb8d0a767122e0c6">foedus::xct::WriteXctAccess::payload_address_</a></div><div class="ttdeci">char * payload_address_</div><div class="ttdoc">Pointer to the payload of the record. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00172">xct_access.hpp:172</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">foedus::kErrorCodeXctWriteSetOverflow</a></div><div class="ttdoc">0x0A02 : "XCTION : Too large write-set. Check the config of XctOptions" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00197">error_code.hpp:197</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a67f1a970106386aa9f367195c0a43208"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a67f1a970106386aa9f367195c0a43208">foedus::xct::Xct::get_page_version_set_size</a></div><div class="ttdeci">uint32_t get_page_version_set_size() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00155">xct.hpp:155</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_af48118bbaf92a957116ae2873fe55b83"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83">foedus::xct::XctId::get_epoch</a></div><div class="ttdeci">Epoch get_epoch() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00964">xct_id.hpp:964</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_aa3d33ca4fe97b735ce59594993a1dd94"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">foedus::xct::XctId::is_next_layer</a></div><div class="ttdeci">bool is_next_layer() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01042">xct_id.hpp:1042</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Page_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1Page.html">foedus::storage::Page</a></div><div class="ttdoc">Just a marker to denote that the memory region represents a data page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00334">page.hpp:334</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ac62f3ab84bf9ac7f5b7a07c656d5190a"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac62f3ab84bf9ac7f5b7a07c656d5190a">foedus::memory::NumaCoreMemory::get_current_lock_list_memory</a></div><div class="ttdeci">xct::LockEntry * get_current_lock_list_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00092">numa_core_memory.hpp:92</a></div></div>
<div class="ttc" id="group__XCT_html_ga862d4c5383d7344a8cfd44e6c060d6db"><div class="ttname"><a href="group__XCT.html#ga862d4c5383d7344a8cfd44e6c060d6db">foedus::xct::kMaxXctOrdinal</a></div><div class="ttdeci">const uint64_t kMaxXctOrdinal</div><div class="ttdoc">Maximum value of in-epoch ordinal. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00898">xct_id.hpp:898</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ac79149bb167fa69b2afc7861c0c70483"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">foedus::xct::CurrentLockList::init</a></div><div class="ttdeci">void init(LockEntry *array, uint32_t capacity, const memory::GlobalVolatilePageResolver &amp;resolver)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00086">retrospective_lock_list.cpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a94b9b35db175ad18d7e889b3bd57ea85"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85">foedus::thread::Thread::cll_giveup_all_locks_after</a></div><div class="ttdeci">void cll_giveup_all_locks_after(xct::UniversalLockId address)</div><div class="ttdoc">This gives-up locks in CLL that are not yet taken. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00847">thread_pimpl.cpp:847</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a0c631d601027cf678dfd192f74cd348b"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a0c631d601027cf678dfd192f74cd348b">foedus::xct::XctOptions::hot_threshold_for_retrospective_lock_list_</a></div><div class="ttdeci">uint16_t hot_threshold_for_retrospective_lock_list_</div><div class="ttdoc">When we construct Retrospective Lock List (RLL) after aborts, we add read-locks on records whose hotn...</div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00135">xct_options.hpp:135</a></div></div>
<div class="ttc" id="thread_8hpp_html"><div class="ttname"><a href="thread_8hpp.html">thread.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RecordXctAccess_html_aecf604e6febe0a58b79df2480cb6aafc"><div class="ttname"><a href="structfoedus_1_1xct_1_1RecordXctAccess.html#aecf604e6febe0a58b79df2480cb6aafc">foedus::xct::RecordXctAccess::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdoc">The storage we accessed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00085">xct_access.hpp:85</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aca66ae9959651b7c6fa86a75db287f54"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54">foedus::xct::Xct::get_sysxct_workspace</a></div><div class="ttdeci">SysxctWorkspace * get_sysxct_workspace() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00142">xct.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_ab43ebf3a25aedb3e6ffeb3d9724bd080"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">foedus::xct::Xct::on_record_read_take_locks_if_needed</a></div><div class="ttdeci">void on_record_read_take_locks_if_needed(bool intended_for_write, const storage::Page *page_address, UniversalLockId lock_id, RwLockableXctId *tid_address)</div><div class="ttdoc">subroutine of on_record_read() to take lock(s). </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00334">xct.cpp:334</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1ReadXctAccess_html_aa2c1ca8c7b1fdb5788ceeb02372a6318"><div class="ttname"><a href="structfoedus_1_1xct_1_1ReadXctAccess.html#aa2c1ca8c7b1fdb5788ceeb02372a6318">foedus::xct::ReadXctAccess::related_write_</a></div><div class="ttdeci">WriteXctAccess * related_write_</div><div class="ttdoc">An optional member that points to a write access related to this read. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00153">xct_access.hpp:153</a></div></div>
<div class="ttc" id="group__RLL_html_gadca5ec640ccba5dbdc6860ebb15850d2"><div class="ttname"><a href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2">foedus::thread::Thread::is_hot_page</a></div><div class="ttdeci">bool is_hot_page(const storage::Page *page) const </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00142">thread.cpp:142</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces"><div class="ttname"><a href="group__MEMHIERARCHY.html#structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces</a></div><div class="ttdoc">Packs pointers to pieces of small_thread_local_memory_. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00049">numa_core_memory.hpp:49</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_a57dc541a4a80230e2fc0b45aeb6b879a"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a">foedus::xct::LockEntry::is_enough</a></div><div class="ttdeci">bool is_enough() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00163">retrospective_lock_list.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_aaa710f937a96f526a4139fda9ca1b12b"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#aaa710f937a96f526a4139fda9ca1b12b">foedus::xct::XctOptions::max_write_set_size_</a></div><div class="ttdeci">uint32_t max_write_set_size_</div><div class="ttdoc">The maximum number of write-set one transaction can have. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00076">xct_options.hpp:76</a></div></div>
<div class="ttc" id="savepoint__manager_8hpp_html"><div class="ttname"><a href="savepoint__manager_8hpp.html">savepoint_manager.hpp</a></div></div>
<div class="ttc" id="xct__access_8hpp_html"><div class="ttname"><a href="xct__access_8hpp.html">xct_access.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a27c23f58d7a94bed0dde10dd57a9dcce"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce">foedus::xct::XctId::set_ordinal</a></div><div class="ttdeci">void set_ordinal(uint32_t ordinal) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00980">xct_id.hpp:980</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a6b0f4d5bf1485c376f62e97c6053ea43"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a6b0f4d5bf1485c376f62e97c6053ea43">foedus::xct::Xct::get_pointer_set_size</a></div><div class="ttdeci">uint32_t get_pointer_set_size() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00154">xct.hpp:154</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a48d5e1f7ce2f70161c253f650c75ed95"><div class="ttname"><a href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">foedus::Engine::get_xct_manager</a></div><div class="ttdeci">xct::XctManager * get_xct_manager() const </div><div class="ttdoc">See Transaction Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00061">engine.cpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acd7b6530aeff7f5323880bf0b6b14ce0"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">foedus::xct::RetrospectiveLockList::get_array</a></div><div class="ttdeci">const LockEntry * get_array() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00234">retrospective_lock_list.hpp:234</a></div></div>
<div class="ttc" id="xct__manager_8hpp_html"><div class="ttname"><a href="xct__manager_8hpp.html">xct_manager.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_af39a25162bfa65a4cc2dea0d64460cbe"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#af39a25162bfa65a4cc2dea0d64460cbe">foedus::xct::Xct::get_lock_free_read_set_size</a></div><div class="ttdeci">uint32_t get_lock_free_read_set_size() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00158">xct.hpp:158</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__THREAD_html_ga709a79fc1ed05a3543d8309ba391da93"><div class="ttname"><a href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a></div><div class="ttdeci">uint16_t ThreadId</div><div class="ttdoc">Typedef for a global ID of Thread (core), which is unique across NUMA nodes. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00080">thread_id.hpp:80</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersionStatus_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersionStatus.html">foedus::storage::PageVersionStatus</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00059">page.hpp:59</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a67e1af2de6e13b000e66609cf60849b6"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">foedus::storage::construct_volatile_page_pointer</a></div><div class="ttdeci">VolatilePagePointer construct_volatile_page_pointer(uint64_t word)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00230">storage_id.hpp:230</a></div></div>
<div class="ttc" id="sysxct__impl_8hpp_html"><div class="ttname"><a href="sysxct__impl_8hpp.html">sysxct_impl.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_aa75089821b48c98a00cd7e4ddc0615da"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">foedus::xct::XctManager::advance_current_global_epoch</a></div><div class="ttdeci">void advance_current_global_epoch()</div><div class="ttdoc">Requests to advance the current global epoch as soon as possible and blocks until it actually does...</div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00070">xct_manager_pimpl.cpp:70</a></div></div>
<div class="ttc" id="group__XCT_html_gae2b82bc723691c581c22944ef3cef43c"><div class="ttname"><a href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">foedus::xct::LockMode</a></div><div class="ttdeci">LockMode</div><div class="ttdoc">Represents a mode of lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00095">xct_id.hpp:95</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a8a5728b0376ffa45b801a560051d7d7a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a8a5728b0376ffa45b801a560051d7d7a">foedus::xct::Xct::get_rll_threshold_for_this_xct</a></div><div class="ttdeci">uint16_t get_rll_threshold_for_this_xct() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00135">xct.hpp:135</a></div></div>
<div class="ttc" id="xct__options_8hpp_html"><div class="ttname"><a href="xct__options_8hpp.html">xct_options.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a68b92830ccd52b310445b41bfef06fd7"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7">foedus::xct::Xct::add_to_page_version_set</a></div><div class="ttdeci">ErrorCode add_to_page_version_set(const storage::PageVersion *version_address, storage::PageVersionStatus observed)</div><div class="ttdoc">Add the given page version to the page version set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00242">xct.cpp:242</a></div></div>
<div class="ttc" id="atomic__fences_8hpp_html"><div class="ttname"><a href="atomic__fences_8hpp.html">atomic_fences.hpp</a></div><div class="ttdoc">Atomic fence methods and load/store with fences that work for both C++11/non-C++11 code...</div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_ad5be23a25e650f1bad81ce8c87630af0"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">foedus::xct::XctId::is_being_written</a></div><div class="ttdeci">bool is_being_written() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01038">xct_id.hpp:1038</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a5c7082819f333ce0b621c2c34fe91a41"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41">foedus::xct::XctId::spin_while_being_written</a></div><div class="ttdeci">XctId spin_while_being_written() const __attribute__((always_inline))</div><div class="ttdoc">Returns a version of this Xid whose being_written flag is off. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01190">xct_id.hpp:1190</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctWorkspace_html_aa106365bb7c8ac68eb2bd67bd729bfb4"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4">foedus::xct::SysxctWorkspace::init</a></div><div class="ttdeci">void init(thread::Thread *enclosing_thread)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00462">sysxct_impl.hpp:462</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a94b7a86ff61fec046d3c0645023fb535"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535">foedus::xct::RetrospectiveLockList::init</a></div><div class="ttdeci">void init(LockEntry *array, uint32_t capacity, const memory::GlobalVolatilePageResolver &amp;resolver)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00049">retrospective_lock_list.cpp:49</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaf84f9944a16c5848f69beacdfeedf939"><div class="ttname"><a href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">foedus::assorted::memory_fence_acquire</a></div><div class="ttdeci">void memory_fence_acquire()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acquire). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00046">atomic_fences.hpp:46</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Page_html_abee44ea141b30e613f3de40831d6ff8e"><div class="ttname"><a href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">foedus::storage::Page::get_header</a></div><div class="ttdeci">PageHeader &amp; get_header()</div><div class="ttdoc">At least the basic header exists in all pages. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00336">page.hpp:336</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeWriteXctAccess_html_ab090fd78276df1811cd70b77eb39f052"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#ab090fd78276df1811cd70b77eb39f052">foedus::xct::LockFreeWriteXctAccess::log_entry_</a></div><div class="ttdeci">log::RecordLogType * log_entry_</div><div class="ttdoc">Pointer to the log entry in private log buffer for this write opereation. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00235">xct_access.hpp:235</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aae4b0ccd575851276efddf752c90a273"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aae4b0ccd575851276efddf752c90a273">foedus::xct::Xct::is_enable_rll_for_this_xct</a></div><div class="ttdeci">bool is_enable_rll_for_this_xct() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00123">xct.hpp:123</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1RecordLogType_html"><div class="ttname"><a href="structfoedus_1_1log_1_1RecordLogType.html">foedus::log::RecordLogType</a></div><div class="ttdoc">Base class for log type of record-wise operation. </div><div class="ttdef"><b>Definition:</b> <a href="common__log__types_8hpp_source.html#l00181">common_log_types.hpp:181</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_aa15ff5555f06dfff58b3fd11f60f2ca7"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#aa15ff5555f06dfff58b3fd11f60f2ca7">foedus::memory::NumaCoreMemory::get_retrospective_lock_list_capacity</a></div><div class="ttdeci">uint64_t get_retrospective_lock_list_capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00101">numa_core_memory.hpp:101</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a41264f4ced33dae443651f57bc09e964"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964">foedus::xct::XctId::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01041">xct_id.hpp:1041</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_adb76c33cd20ea764c7a8e554e8201077"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077">foedus::storage::VolatilePagePointer::get_numa_node</a></div><div class="ttdeci">uint8_t get_numa_node() const </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00201">storage_id.hpp:201</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PointerAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1PointerAccess.html">foedus::xct::PointerAccess</a></div><div class="ttdoc">Represents a record of following a page pointer during a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00048">xct_access.hpp:48</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae3e777ca7250fb016691a1eaa40cb2b4"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae3e777ca7250fb016691a1eaa40cb2b4">foedus::kErrorCodeXctPointerSetOverflow</a></div><div class="ttdoc">0x0A07 : "XCTION : Too large pointer-set. Consider using snapshot isolation." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00202">error_code.hpp:202</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a4dfc3cd9b70a93615c3a0a8014aafbe1"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a4dfc3cd9b70a93615c3a0a8014aafbe1">foedus::xct::Xct::get_lock_free_write_set_size</a></div><div class="ttdeci">uint32_t get_lock_free_write_set_size() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00159">xct.hpp:159</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_aaef554452ea9ac7b072af98cde1558dc"><div class="ttname"><a href="classfoedus_1_1Epoch.html#aaef554452ea9ac7b072af98cde1558dc">foedus::Epoch::before</a></div><div class="ttdeci">bool before(const Epoch &amp;other) const </div><div class="ttdoc">Returns if this epoch is before the given epoch in the sense of distance defined in RFC 1982...</div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00176">epoch.hpp:176</a></div></div>
<div class="ttc" id="engine__memory_8hpp_html"><div class="ttname"><a href="engine__memory_8hpp.html">engine_memory.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a6e17aace1a8819469f65a133be74975c"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a6e17aace1a8819469f65a133be74975c">foedus::xct::XctOptions::max_read_set_size_</a></div><div class="ttdeci">uint32_t max_read_set_size_</div><div class="ttdoc">The maximum number of read-set one transaction can have. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00060">xct_options.hpp:60</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PageVersionAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1PageVersionAccess.html">foedus::xct::PageVersionAccess</a></div><div class="ttdoc">Represents a record of reading a page during a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00072">xct_access.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_ab7bf19bc328c888d70d56e3650b9cde4"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#ab7bf19bc328c888d70d56e3650b9cde4">foedus::xct::Xct::overwrite_to_pointer_set</a></div><div class="ttdeci">void overwrite_to_pointer_set(const storage::VolatilePagePointer *pointer_address, storage::VolatilePagePointer observed)</div><div class="ttdoc">The transaction that has updated the volatile pointer should not abort itself. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00226">xct.cpp:226</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_adfd2125c9cc252494693f65719ed53b3"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">foedus::xct::Xct::add_to_pointer_set</a></div><div class="ttdeci">ErrorCode add_to_pointer_set(const storage::VolatilePagePointer *pointer_address, storage::VolatilePagePointer observed)</div><div class="ttdoc">Add the given page pointer to the pointer set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00198">xct.cpp:198</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctWorkspace_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctWorkspace.html">foedus::xct::SysxctWorkspace</a></div><div class="ttdoc">Per-thread reused work memory for system transactions. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00447">sysxct_impl.hpp:447</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a1e874be55edde5eec583d9745a90000ea71e7c29b328ca66143553cd4e2a93f35"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea71e7c29b328ca66143553cd4e2a93f35">foedus::xct::XctOptions::kDefaultHotThreshold</a></div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00052">xct_options.hpp:52</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a97f1e851be41dccdc730d7093c111dd2"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a97f1e851be41dccdc730d7093c111dd2">foedus::xct::Xct::Xct</a></div><div class="ttdeci">Xct(Engine *engine, thread::Thread *context, thread::ThreadId thread_id)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00041">xct.cpp:41</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a476c43885a66c28ac33e624d071a7a7d"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d">foedus::thread::Thread::cll_try_or_acquire_multiple_locks</a></div><div class="ttdeci">ErrorCode cll_try_or_acquire_multiple_locks(xct::LockListPosition upto_pos)</div><div class="ttdoc">Acquire multiple locks up to the given position in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00853">thread_pimpl.cpp:853</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a1ff8ccbccdede750fb5a18b4da505ad9"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_volatile_page_resolver() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00258">retrospective_lock_list.hpp:258</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a6db689767722f1d30821d63144bf8bde"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">foedus::xct::CurrentLockList::get_or_add_entry</a></div><div class="ttdeci">LockListPosition get_or_add_entry(UniversalLockId lock_id, RwLockableXctId *lock, LockMode preferred_mode)</div><div class="ttdoc">Adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00204">retrospective_lock_list.cpp:204</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a9dd027b4a8d21f45a60f82d110c5a529"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529">foedus::xct::Xct::initialize</a></div><div class="ttdeci">void initialize(memory::NumaCoreMemory *core_memory, uint32_t *mcs_block_current, uint32_t *mcs_rw_async_mapping_current)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00077">xct.cpp:77</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeWriteXctAccess_html_a3fc6550ec39eca7192cee417f02ced60"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#a3fc6550ec39eca7192cee417f02ced60">foedus::xct::LockFreeWriteXctAccess::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdoc">The storage we accessed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00232">xct_access.hpp:232</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_d7a805ee636aca3e828841913b8fee6f.html">src</a></li><li class="navelem"><a class="el" href="dir_69f399cb2d64e6ca2c29e4a5a8e5672b.html">foedus</a></li><li class="navelem"><a class="el" href="dir_bed9952cd06e1cbb15806325a50f478f.html">xct</a></li><li class="navelem"><a class="el" href="xct_8cpp.html">xct.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
