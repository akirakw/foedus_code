<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/include/foedus/storage/masstree/masstree_composer_impl.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('masstree__composer__impl_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">masstree_composer_impl.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="masstree__composer__impl_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef FOEDUS_STORAGE_MASSTREE_MASSTREE_COMPOSER_IMPL_HPP_</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define FOEDUS_STORAGE_MASSTREE_MASSTREE_COMPOSER_IMPL_HPP_</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;iosfwd&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fwd_8hpp.html">foedus/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memory_2fwd_8hpp.html">foedus/memory/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot_2fwd_8hpp.html">foedus/snapshot/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot__id_8hpp.html">foedus/snapshot/snapshot_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="composer_8hpp.html">foedus/storage/composer.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page_8hpp.html">foedus/storage/page.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage__id_8hpp.html">foedus/storage/storage_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage_2masstree_2fwd_8hpp.html">foedus/storage/masstree/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="masstree__page__impl_8hpp.html">foedus/storage/masstree/masstree_page_impl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="masstree__storage_8hpp.html">foedus/storage/masstree/masstree_storage.hpp</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span>storage {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="keyword">namespace </span>masstree {</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html">   69</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html">MasstreeComposer</a> final {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a3153a40bfca82fe0eba9e44d4a719e32">MasstreeComposer</a>(<a class="code" href="classfoedus_1_1storage_1_1Composer.html">Composer</a> *parent);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  std::string <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#ab1264661a1f24383dcda1568f59425fe">to_string</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a05590cc1eeeb3aedd917276d19639fd1">compose</a>(<span class="keyword">const</span> <a class="code" href="group__STORAGE.html#structfoedus_1_1storage_1_1Composer_1_1ComposeArguments">Composer::ComposeArguments</a>&amp; args);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a45eb1cba6ccf8f51c973030848a47a9d">construct_root</a>(<span class="keyword">const</span> <a class="code" href="group__STORAGE.html#structfoedus_1_1storage_1_1Composer_1_1ConstructRootArguments">Composer::ConstructRootArguments</a>&amp; args);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropResult.html">Composer::DropResult</a>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#ad25781d742feeced13ed8b047b485a3e">drop_volatiles</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordtype">void</span>                  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#aa0cb9d19afa32166a7c128697f291ea2">drop_root_volatile</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="classfoedus_1_1Engine.html">Engine</a>* <span class="keyword">const</span>             engine_;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id_;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">MasstreeStorage</a>     storage_;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> check_buddies(<span class="keyword">const</span> <a class="code" href="group__STORAGE.html#structfoedus_1_1storage_1_1Composer_1_1ConstructRootArguments">Composer::ConstructRootArguments</a>&amp; args) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>* resolve_volatile(<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> pointer);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropResult.html">Composer::DropResult</a> drop_volatiles_recurse(</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* pointer);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropResult.html">Composer::DropResult</a> drop_volatiles_intermediate(</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>* page);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropResult.html">Composer::DropResult</a> drop_volatiles_border(</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>* page);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordtype">bool</span> is_updated_pointer(</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordtype">bool</span> is_to_keep_volatile(uint8_t layer, uint16_t btree_level) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">void</span> drop_foster_twins(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>* page);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordtype">void</span> drop_all_recurse(</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* pointer);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordtype">void</span> drop_all_recurse_page_only(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">Composer::DropVolatilesArguments</a>&amp; args,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>* page);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;};</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html">  161</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html">MasstreeComposeContext</a> {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9">  163</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9">Constants</a> {</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a5b7595b9f53e5f4284a62047395df12a">  165</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a5b7595b9f53e5f4284a62047395df12a">kMaxLevels</a> = 32,</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a2783f17bc5b1a286d90cda47ff1600d5">  167</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a2783f17bc5b1a286d90cda47ff1600d5">kMaxLayers</a> = 16,</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9acd65425ae6a32f11ca6a6761c3964355">  169</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9acd65425ae6a32f11ca6a6761c3964355">kMaxLogGroupSize</a> = 1 &lt;&lt; 14,</div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a9a48440ea1fb2fb493beb753cf5e3b16">  174</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a9a48440ea1fb2fb493beb753cf5e3b16">kTmpBoundaryArraySize</a> = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9acd65425ae6a32f11ca6a6761c3964355">kMaxLogGroupSize</a>,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  };</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html">  194</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html">PathLevel</a> {</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a037ec68295b54b1d47a92e0f00b2e6f7">  196</a></span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a037ec68295b54b1d47a92e0f00b2e6f7">head_</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#afc3c9c7c7a9d172cd07c6bf933cde925">  198</a></span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#afc3c9c7c7a9d172cd07c6bf933cde925">tail_</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a5edbac664d852d0eacf52c8bf5576748">  200</a></span>&#160;    uint16_t  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a5edbac664d852d0eacf52c8bf5576748">layer_</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#afade84f115c7a301095657b195dff70c">  206</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#afade84f115c7a301095657b195dff70c">next_original_</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#abee5950871ac0b06eeb2e1273b6bb559">  208</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#abee5950871ac0b06eeb2e1273b6bb559">next_original_mini_</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aa23cfb6a44bb6006999fc65e2135dc69">  210</a></span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aa23cfb6a44bb6006999fc65e2135dc69">next_original_remainder_</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a92248fd3b686b64a40f0d63a4a73515b">  212</a></span>&#160;    uint32_t  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a92248fd3b686b64a40f0d63a4a73515b">page_count_</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aea41c9f7c357a114983909e2417faaf2">  213</a></span>&#160;    uint32_t  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aea41c9f7c357a114983909e2417faaf2">filler_</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a3aab214e969bc24bdf49456aacfd711d">  215</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a3aab214e969bc24bdf49456aacfd711d">low_fence_</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a4723f2e8bc485a9af571104969a8505f">  217</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a4723f2e8bc485a9af571104969a8505f">high_fence_</a>;</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a333f5f00909bda4bcd037e134ba1d7ee">  223</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a333f5f00909bda4bcd037e134ba1d7ee">next_original_slice_</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a026f58f00ef73c87f33f67b00908b839">  225</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a026f58f00ef73c87f33f67b00908b839">has_next_original</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> next_original_ != 0xFFFFU; }</div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#af3bed21c301fa3dafbe0ca3cc94a3d01">  226</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#af3bed21c301fa3dafbe0ca3cc94a3d01">set_no_more_next_original</a>() {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      next_original_ = 0xFFFFU;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      next_original_mini_ = 0xFFFFU;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      next_original_remainder_ = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      next_original_slice_ = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">kSupremumSlice</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a9a5aa95076dc4b12977a3c7f0eb123de">  232</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a9a5aa95076dc4b12977a3c7f0eb123de">contains_slice</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(low_fence_ &lt;= slice);  <span class="comment">// as logs are sorted, this must not happen</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">return</span> high_fence_ == <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">kSupremumSlice</a> || slice &lt; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a4723f2e8bc485a9af571104969a8505f">high_fence_</a>;  <span class="comment">// careful on supremum case</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a0e585f2b2cdecb38d14cac28de705106">  236</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a0e585f2b2cdecb38d14cac28de705106">contains_key</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__MASSTREE.html#gaca11c6ba81d4c4c7708ca3bcdff3bfa0">is_key_aligned_and_zero_padded</a>(key, key_length));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#ga48710f51199feed3db2e2f374ae73814">normalize_be_bytes_full_aligned</a>(key + layer_ * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a9a5aa95076dc4b12977a3c7f0eb123de">contains_slice</a>(slice);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a0f273da401115f635ff1a676adc1c2e9">  241</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a0f273da401115f635ff1a676adc1c2e9">needs_to_consume_original</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a026f58f00ef73c87f33f67b00908b839">has_next_original</a>()</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        &amp;&amp; (</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;          next_original_slice_ &lt; slice</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;          || (next_original_slice_ == slice</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;              &amp;&amp; next_original_remainder_ &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;              &amp;&amp; key_length &gt; (layer_ + 1U) * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aba63e070dcb5eda68dd9e1ecee473e22">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html">PathLevel</a>&amp; v);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  };</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="group__MASSTREE.html">  253</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1FenceAndPointer">FenceAndPointer</a> {</div>
<div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#ade1e3b88a8c9ad4011797e85fb9837f8">  254</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> <a class="code" href="group__MASSTREE.html#ade1e3b88a8c9ad4011797e85fb9837f8">low_fence_</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#a328e75f82ce36d845a824b6badd8e55d">  255</a></span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> <a class="code" href="group__MASSTREE.html#a328e75f82ce36d845a824b6badd8e55d">pointer_</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  };</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html">  259</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html">PageBoundaryInfo</a> {</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a666cbca8c28f36593b130db08e6c8cca">  270</a></span>&#160;    uint8_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a666cbca8c28f36593b130db08e6c8cca">btree_level_</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#af3d538d3efa066973b1b8ac720c9f6e0">  272</a></span>&#160;    uint8_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#af3d538d3efa066973b1b8ac720c9f6e0">removed_</a>;</div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a4453c34847e925948f377e7aadf9935c">  274</a></span>&#160;    uint8_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a4453c34847e925948f377e7aadf9935c">layer_</a>;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a9e193bc09d9c5c2b710c975ec05cbb5f">  276</a></span>&#160;    uint8_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a9e193bc09d9c5c2b710c975ec05cbb5f">local_snapshot_pointer_high_</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#aa6a9046665e573f8ad0e71b055cbe5b8">  278</a></span>&#160;    uint32_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#aa6a9046665e573f8ad0e71b055cbe5b8">local_snapshot_pointer_low_</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a2a14df166777736c65a52d9ddf230a7f">  285</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a2a14df166777736c65a52d9ddf230a7f">slices_</a>[2];</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a07a40afc4e87f23fc1183897ed72bfd0">PageBoundaryInfo</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ab4bd3006d76d5f090c0e9e7ea57bf8e8">~PageBoundaryInfo</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#af258c349cce1412c8d02ea861fec1392">  291</a></span>&#160;    uint32_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#af258c349cce1412c8d02ea861fec1392">dynamic_sizeof</a>() const <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> { <span class="keywordflow">return</span> (layer_ + 2U) * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>) + 8U; }</div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a1686b408571898855ebf0cd63f49fc03">  292</a></span>&#160;    <span class="keyword">static</span> uint32_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a1686b408571898855ebf0cd63f49fc03">calculate_hash</a>(</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      uint8_t btree_level,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      uint8_t layer,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence) <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// good old multiply-hash</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      uint64_t hash = btree_level + (layer * 256U);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keyword">const</span> uint64_t kMult = 0x7ada20dc734afb6fULL;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; layer; ++i) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        hash = hash * kMult + prefixes[i];</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      hash = hash * kMult + low_fence;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      hash = hash * kMult + high_fence;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      uint32_t compressed = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(hash &gt;&gt; 32) ^ static_cast&lt;uint32_t&gt;(hash);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> compressed;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ace794ee2456b6ccfccf7e0d2b63b4756">  309</a></span>&#160;    <a class="code" href="group__STORAGE.html#ga0175df2e74855e270faffcf960b132b1">SnapshotLocalPageId</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ace794ee2456b6ccfccf7e0d2b63b4756">get_local_page_id</a>() const <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="group__STORAGE.html#ga0175df2e74855e270faffcf960b132b1">SnapshotLocalPageId</a><span class="keyword">&gt;</span>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a9e193bc09d9c5c2b710c975ec05cbb5f">local_snapshot_pointer_high_</a>) &lt;&lt; 32</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        | static_cast&lt;SnapshotLocalPageId&gt;(local_snapshot_pointer_low_);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ae284e44edddb594d2b5a03e7b687fc22">  321</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ae284e44edddb594d2b5a03e7b687fc22">exact_match</a>(</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      uint8_t btree_level,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      uint8_t layer,</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">if</span> (layer != layer_ || btree_level != btree_level_ || removed_) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a4453c34847e925948f377e7aadf9935c">layer_</a>; ++i) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span> (prefixes[i] != slices_[i]) {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">return</span> low == slices_[<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a4453c34847e925948f377e7aadf9935c">layer_</a>] &amp;&amp; high == slices_[layer_ + 1];</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  };</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html">  340</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html">PageBoundarySort</a> {</div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a3afe29eeea63df280fc3a34a4ae15958">  345</a></span>&#160;    uint32_t                  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a3afe29eeea63df280fc3a34a4ae15958">hash_</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#ad17d4dd8876c9e5657156eefd9cdc1c7">  347</a></span>&#160;    <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">snapshot::BufferPosition</a>  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#ad17d4dd8876c9e5657156eefd9cdc1c7">info_pos_</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a4f51576acac1b01c8593f81d539beb9a">  349</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a4f51576acac1b01c8593f81d539beb9a">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html">PageBoundarySort</a>&amp; rhs) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">return</span> hash_ &lt; rhs.hash_;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a920c07c7714e9e0aaa8cf06fa697222f">  353</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a920c07c7714e9e0aaa8cf06fa697222f">static_less_than</a>(</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html">PageBoundarySort</a>&amp; lhs,</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html">PageBoundarySort</a>&amp; rhs) <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a> {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> lhs.hash_ &lt; rhs.hash_;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  };</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#a6f661b87d63bc26620c7317b289b7f34">MasstreeComposeContext</a>(</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <a class="code" href="classfoedus_1_1snapshot_1_1MergeSort.html">snapshot::MergeSort</a>* merge_sort,</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__STORAGE.html#structfoedus_1_1storage_1_1Composer_1_1ComposeArguments">Composer::ComposeArguments</a>&amp; args);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#a1d9ff2d2af85b6d09ecb6e310bae6888">execute</a>();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html">snapshot::SnapshotWriter</a>* get_writer()<span class="keyword">  const </span>{ <span class="keywordflow">return</span> args_.<a class="code" href="group__STORAGE.html#aad05b2c2a53ad3641caabd2fa6258782">snapshot_writer_</a>; }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1SnapshotFileSet.html">cache::SnapshotFileSet</a>*   get_files()<span class="keyword">   const </span>{ <span class="keywordflow">return</span> args_.<a class="code" href="group__STORAGE.html#a5a1088a90d1f70d8dccbec8724a8ce18">previous_snapshot_files_</a>; }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>    allocate_page() {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(allocated_pages_ &lt; max_pages_);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> new_offset = allocated_pages_;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    ++allocated_pages_;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> new_offset;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  MasstreePage*             get_page(<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  MasstreePage*             get_original(<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  MasstreeIntermediatePage* as_intermdiate(MasstreePage* page) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  MasstreeBorderPage*       as_border(MasstreePage* page) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  uint16_t get_cur_prefix_length()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> get_last_layer() * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>); }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  uint8_t                   get_last_level_index()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_path_levels_ &gt; 0);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> cur_path_levels_ - 1U;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  PathLevel*                get_last_level() { <span class="keywordflow">return</span> cur_path_ + get_last_level_index(); }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keyword">const</span> PathLevel*          get_last_level()<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> cur_path_ + get_last_level_index(); }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  uint8_t                   get_last_layer()<span class="keyword"> const  </span>{</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (cur_path_levels_ == 0) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">return</span> get_last_level()-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a5edbac664d852d0eacf52c8bf5576748">layer_</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordtype">void</span>                      store_cur_prefix(uint8_t layer, <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prefix_slice);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  PathLevel*                get_second_last_level() {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_path_levels_ &gt; 1U);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> cur_path_ + (cur_path_levels_ - 2U);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  ErrorStack  execute_a_log(uint32_t cur);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  ErrorStack  execute_same_key_group(uint32_t from, uint32_t to);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  ErrorStack  execute_insert_group(uint32_t from, uint32_t to);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  uint32_t    execute_insert_group_get_cur_run(</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    uint32_t cur,</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    uint32_t to,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* min_slice,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* max_slice);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>   execute_insert_group_append_loop(uint32_t from, uint32_t to, uint32_t hint_count);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  ErrorStack  execute_delete_group(uint32_t from, uint32_t to);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  ErrorStack  execute_update_group(uint32_t from, uint32_t to);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  ErrorStack  execute_overwrite_group(uint32_t from, uint32_t to);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordtype">void</span>        write_dummy_page_zero();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// init/uninit called only once or at most a few times</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  ErrorStack  init_root();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  ErrorStack  open_first_level(<span class="keyword">const</span> <span class="keywordtype">char</span>* key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  ErrorStack  open_next_level(</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* key,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length,</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    MasstreePage* parent,</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prefix_slice,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>* next_page_id);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="keywordtype">void</span>        open_next_level_create_layer(</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* key,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    MasstreeBorderPage* parent,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prefix_slice,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> parent_index);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  ErrorStack  flush_buffer();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keyword">inline</span> ErrorStack flush_if_nearly_full() {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    uint64_t threshold = max_pages_ * 8ULL / 10ULL;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(allocated_pages_ &gt;= threshold || allocated_pages_ + 256U &gt;= max_pages_)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(flush_buffer());</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  ErrorStack  adjust_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  ErrorStack  consume_original_upto_border(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length, PathLevel* level);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  ErrorStack  consume_original_upto_intermediate(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, PathLevel* level);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  ErrorStack  consume_original_all();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  ErrorStack  close_level_grow_subtree(</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>* root_pointer,</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> subtree_low,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> subtree_high);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  ErrorStack  pushup_non_root();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// next methods called for each log entry. must be efficient! So these methods return ErrorCode.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordtype">bool</span>        does_need_to_adjust_path(<span class="keyword">const</span> <span class="keywordtype">char</span>* key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  ErrorStack  close_path_layer(uint16_t max_layer);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  ErrorStack  close_last_level();</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  ErrorStack  close_first_level();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  ErrorStack  close_all_levels();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordtype">void</span>        append_border(</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    xct::XctId xct_id,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* payload,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    PathLevel* level);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordtype">void</span>        append_border_next_layer(</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    xct::XctId xct_id,</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    PathLevel* level);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordtype">void</span>        append_border_newpage(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, PathLevel* level);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordtype">void</span>        append_intermediate(</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence,</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer,</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    PathLevel* level);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordtype">void</span>        append_intermediate_newpage_and_pointer(</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    PathLevel* level);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="keywordtype">void</span> refresh_page_boundary_info_variables();</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> close_level_register_page_boundaries();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordtype">void</span> remove_old_page_boundary_info(<a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id, MasstreePage* page);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  PageBoundaryInfo* get_page_boundary_info(<a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">snapshot::BufferPosition</a> pos) ALWAYS_INLINE {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos &lt;= page_boundary_info_cur_pos_);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>PageBoundaryInfo*<span class="keyword">&gt;</span>(page_boundary_info_ + pos * 8ULL);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keyword">const</span> PageBoundaryInfo* get_page_boundary_info(<a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">snapshot::BufferPosition</a> pos) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos &lt;= page_boundary_info_cur_pos_);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>PageBoundaryInfo*<span class="keyword">&gt;</span>(page_boundary_info_ + pos * 8ULL);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordtype">void</span> assert_page_boundary_not_exists(</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    uint8_t btree_level,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    uint8_t layer,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low,</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordtype">void</span> sort_page_boundary_info();</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> lookup_page_boundary_info(</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    uint8_t btree_level,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    uint8_t layer,</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  ErrorStack install_snapshot_pointers(uint64_t* installed_count) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> install_snapshot_pointers_recurse(</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    uint8_t layer,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    MasstreePage* volatile_page,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    uint64_t* installed_count) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> install_snapshot_pointers_recurse_intermediate(</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    uint8_t layer,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    MasstreeIntermediatePage* volatile_page,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    uint64_t* installed_count) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> install_snapshot_pointers_recurse_border(</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver,</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    uint8_t layer,</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* prefixes,</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    MasstreeBorderPage* volatile_page,</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    uint64_t* installed_count) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  Engine* <span class="keyword">const</span>             engine_;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  snapshot::MergeSort* <span class="keyword">const</span>  merge_sort_;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           id_;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  MasstreeStorage           storage_;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keyword">const</span> Composer::ComposeArguments&amp; args_;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__SNAPSHOT.html#gaec32eb05303ebec1048d120f73295031">snapshot::SnapshotId</a> snapshot_id_;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keyword">const</span> uint16_t            numa_node_;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keyword">const</span> uint32_t            max_pages_;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  MasstreeIntermediatePage* <span class="keyword">const</span> root_;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  Page* <span class="keyword">const</span>       page_base_;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  Page* <span class="keyword">const</span>       original_base_;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">// const members up to here.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>       page_id_base_;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">char</span>*                     page_boundary_info_;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  PageBoundarySort*         page_boundary_sort_;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">snapshot::BufferPosition</a>  page_boundary_info_cur_pos_;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  uint32_t                  page_boundary_elements_;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">snapshot::BufferPosition</a>  page_boundary_info_capacity_;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  uint32_t                  max_page_boundary_elements_;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  uint32_t                  allocated_pages_;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  uint8_t                   root_index_;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  uint8_t                   root_index_mini_;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  uint8_t                   cur_path_levels_;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  PathLevel                 cur_path_[<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a5b7595b9f53e5f4284a62047395df12a">kMaxLevels</a>];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordtype">char</span>                      cur_prefix_be_[<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a2783f17bc5b1a286d90cda47ff1600d5">kMaxLayers</a> * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>];</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>                  cur_prefix_slices_[<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a2783f17bc5b1a286d90cda47ff1600d5">kMaxLayers</a>];</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>                  tmp_boundary_array_[<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a9a48440ea1fb2fb493beb753cf5e3b16">kTmpBoundaryArraySize</a>];</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;};</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;}  <span class="comment">// namespace masstree</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;}  <span class="comment">// namespace storage</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">#endif  // FOEDUS_STORAGE_MASSTREE_MASSTREE_COMPOSER_IMPL_HPP_</span></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_aba63e070dcb5eda68dd9e1ecee473e22"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aba63e070dcb5eda68dd9e1ecee473e22">foedus::storage::masstree::MasstreeComposeContext::PathLevel::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const PathLevel &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l02851">masstree_composer_impl.cpp:2851</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a037ec68295b54b1d47a92e0f00b2e6f7"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a037ec68295b54b1d47a92e0f00b2e6f7">foedus::storage::masstree::MasstreeComposeContext::PathLevel::head_</a></div><div class="ttdeci">memory::PagePoolOffset head_</div><div class="ttdoc">Offset in page_base_. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00196">masstree_composer_impl.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_ae284e44edddb594d2b5a03e7b687fc22"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ae284e44edddb594d2b5a03e7b687fc22">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::exact_match</a></div><div class="ttdeci">bool exact_match(uint8_t btree_level, uint8_t layer, const KeySlice *prefixes, KeySlice low, KeySlice high) const __attribute__((always_inline))</div><div class="ttdoc">returns whether the entry exactly matches with the page boundaries we look for. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00321">masstree_composer_impl.hpp:321</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_aa23cfb6a44bb6006999fc65e2135dc69"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aa23cfb6a44bb6006999fc65e2135dc69">foedus::storage::masstree::MasstreeComposeContext::PathLevel::next_original_remainder_</a></div><div class="ttdeci">KeyLength next_original_remainder_</div><div class="ttdoc">for border page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00210">masstree_composer_impl.hpp:210</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_ace794ee2456b6ccfccf7e0d2b63b4756"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ace794ee2456b6ccfccf7e0d2b63b4756">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::get_local_page_id</a></div><div class="ttdeci">SnapshotLocalPageId get_local_page_id() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00309">masstree_composer_impl.hpp:309</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga0175df2e74855e270faffcf960b132b1"><div class="ttname"><a href="group__STORAGE.html#ga0175df2e74855e270faffcf960b132b1">foedus::storage::SnapshotLocalPageId</a></div><div class="ttdeci">uint64_t SnapshotLocalPageId</div><div class="ttdoc">Represents a local page ID in each one snapshot file in some NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00089">storage_id.hpp:89</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html">foedus::storage::DualPagePointer</a></div><div class="ttdoc">Represents a pointer to another page (usually a child page). </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00271">storage_id.hpp:271</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga9d05e904033c0bba7113cdafb43d6610"><div class="ttname"><a href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">foedus::storage::masstree::PayloadLength</a></div><div class="ttdeci">uint16_t PayloadLength</div><div class="ttdoc">Represents a byte-length of a payload in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00092">masstree_id.hpp:92</a></div></div>
<div class="ttc" id="storage__id_8hpp_html"><div class="ttname"><a href="storage__id_8hpp.html">storage_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a3aab214e969bc24bdf49456aacfd711d"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a3aab214e969bc24bdf49456aacfd711d">foedus::storage::masstree::MasstreeComposeContext::PathLevel::low_fence_</a></div><div class="ttdeci">KeySlice low_fence_</div><div class="ttdoc">same as low_fence of head </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00215">masstree_composer_impl.hpp:215</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_aea41c9f7c357a114983909e2417faaf2"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#aea41c9f7c357a114983909e2417faaf2">foedus::storage::masstree::MasstreeComposeContext::PathLevel::filler_</a></div><div class="ttdeci">uint32_t filler_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00213">masstree_composer_impl.hpp:213</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_a6f661b87d63bc26620c7317b289b7f34"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#a6f661b87d63bc26620c7317b289b7f34">foedus::storage::masstree::MasstreeComposeContext::MasstreeComposeContext</a></div><div class="ttdeci">MasstreeComposeContext(Engine *engine, snapshot::MergeSort *merge_sort, const Composer::ComposeArguments &amp;args)</div><div class="ttdoc">MasstreeComposeContext methods. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l00291">masstree_composer_impl.cpp:291</a></div></div>
<div class="ttc" id="snapshot__id_8hpp_html"><div class="ttname"><a href="snapshot__id_8hpp.html">snapshot_id.hpp</a></div><div class="ttdoc">Typedefs of ID types used in snapshot package. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_a1686b408571898855ebf0cd63f49fc03"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a1686b408571898855ebf0cd63f49fc03">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::calculate_hash</a></div><div class="ttdeci">static uint32_t calculate_hash(uint8_t btree_level, uint8_t layer, const KeySlice *prefixes, KeySlice low_fence, KeySlice high_fence) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00292">masstree_composer_impl.hpp:292</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1Composer_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1Composer.html">foedus::storage::Composer</a></div><div class="ttdoc">Represents a logic to compose a new version of data pages for one storage. </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00086">composer.hpp:86</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga595ca7fc4a3011a9704a883a25141e5f"><div class="ttname"><a href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">foedus::storage::StorageId</a></div><div class="ttdeci">uint32_t StorageId</div><div class="ttdoc">Unique ID for storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00055">storage_id.hpp:55</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="composer_8hpp_html"><div class="ttname"><a href="composer_8hpp.html">composer.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_ad9e37c0eca7fb90f69f90588948234a9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9">foedus::storage::masstree::MasstreeComposeContext::Constants</a></div><div class="ttdeci">Constants</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00163">masstree_composer_impl.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_af258c349cce1412c8d02ea861fec1392"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#af258c349cce1412c8d02ea861fec1392">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::dynamic_sizeof</a></div><div class="ttdeci">uint32_t dynamic_sizeof() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00291">masstree_composer_impl.hpp:291</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html_ab1264661a1f24383dcda1568f59425fe"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#ab1264661a1f24383dcda1568f59425fe">foedus::storage::masstree::MasstreeComposer::to_string</a></div><div class="ttdeci">std::string to_string() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l00282">masstree_composer_impl.cpp:282</a></div></div>
<div class="ttc" id="page_8hpp_html"><div class="ttname"><a href="page_8hpp.html">page.hpp</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_gad2482840d665e70d93678f530b452b79"><div class="ttname"><a href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">foedus::snapshot::BufferPosition</a></div><div class="ttdeci">uint32_t BufferPosition</div><div class="ttdoc">Represents a position in some buffer. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__id_8hpp_source.html#l00072">snapshot_id.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html_aa0cb9d19afa32166a7c128697f291ea2"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#aa0cb9d19afa32166a7c128697f291ea2">foedus::storage::masstree::MasstreeComposer::drop_root_volatile</a></div><div class="ttdeci">void drop_root_volatile(const Composer::DropVolatilesArguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l02622">masstree_composer_impl.cpp:2622</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html">foedus::storage::VolatilePagePointer</a></div><div class="ttdoc">Represents a pointer to a volatile page with modification count for preventing ABA. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00194">storage_id.hpp:194</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_af3bed21c301fa3dafbe0ca3cc94a3d01"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#af3bed21c301fa3dafbe0ca3cc94a3d01">foedus::storage::masstree::MasstreeComposeContext::PathLevel::set_no_more_next_original</a></div><div class="ttdeci">void set_no_more_next_original()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00226">masstree_composer_impl.hpp:226</a></div></div>
<div class="ttc" id="fwd_8hpp_html"><div class="ttname"><a href="fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in root package. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a0e585f2b2cdecb38d14cac28de705106"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a0e585f2b2cdecb38d14cac28de705106">foedus::storage::masstree::MasstreeComposeContext::PathLevel::contains_key</a></div><div class="ttdeci">bool contains_key(const char *key, KeyLength key_length) const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00236">masstree_composer_impl.hpp:236</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">foedus::storage::masstree::MasstreeBorderPage</a></div><div class="ttdoc">Represents one border page in Masstree Storage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00444">masstree_page_impl.hpp:444</a></div></div>
<div class="ttc" id="classfoedus_1_1ErrorStack_html"><div class="ttname"><a href="classfoedus_1_1ErrorStack.html">foedus::ErrorStack</a></div><div class="ttdoc">Brings error stacktrace information as return value of functions. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00081">error_stack.hpp:81</a></div></div>
<div class="ttc" id="snapshot_2fwd_8hpp_html"><div class="ttname"><a href="snapshot_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in snapshot manager package. </div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_a1d9ff2d2af85b6d09ecb6e310bae6888"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#a1d9ff2d2af85b6d09ecb6e310bae6888">foedus::storage::masstree::MasstreeComposeContext::execute</a></div><div class="ttdeci">ErrorStack execute()</div><div class="ttdoc">MasstreeComposeContext::execute() and subroutines for log groups. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l00371">masstree_composer_impl.cpp:371</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort_html_a3afe29eeea63df280fc3a34a4ae15958"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a3afe29eeea63df280fc3a34a4ae15958">foedus::storage::masstree::MasstreeComposeContext::PageBoundarySort::hash_</a></div><div class="ttdeci">uint32_t hash_</div><div class="ttdoc">Hash value of the entry. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00345">masstree_composer_impl.hpp:345</a></div></div>
<div class="ttc" id="group__STORAGE_html_a5a1088a90d1f70d8dccbec8724a8ce18"><div class="ttname"><a href="group__STORAGE.html#a5a1088a90d1f70d8dccbec8724a8ce18">foedus::storage::Composer::ComposeArguments::previous_snapshot_files_</a></div><div class="ttdeci">cache::SnapshotFileSet * previous_snapshot_files_</div><div class="ttdoc">To read existing snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00099">composer.hpp:99</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1SnapshotFileSet_html"><div class="ttname"><a href="classfoedus_1_1cache_1_1SnapshotFileSet.html">foedus::cache::SnapshotFileSet</a></div><div class="ttdoc">Holds a set of read-only file objects for snapshot files. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__file__set_8hpp_source.html#l00052">snapshot_file_set.hpp:52</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_aa6a9046665e573f8ad0e71b055cbe5b8"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#aa6a9046665e573f8ad0e71b055cbe5b8">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::local_snapshot_pointer_low_</a></div><div class="ttdeci">uint32_t local_snapshot_pointer_low_</div><div class="ttdoc">low 32-bits of SnapshotLocalPageId of the new page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00278">masstree_composer_impl.hpp:278</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html_a45eb1cba6ccf8f51c973030848a47a9d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a45eb1cba6ccf8f51c973030848a47a9d">foedus::storage::masstree::MasstreeComposer::construct_root</a></div><div class="ttdeci">ErrorStack construct_root(const Composer::ConstructRootArguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l00111">masstree_composer_impl.cpp:111</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_ad9e37c0eca7fb90f69f90588948234a9acd65425ae6a32f11ca6a6761c3964355"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9acd65425ae6a32f11ca6a6761c3964355">foedus::storage::masstree::MasstreeComposeContext::kMaxLogGroupSize</a></div><div class="ttdoc">Maximum number of logs execute_xxx_group methods process in one shot. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00169">masstree_composer_impl.hpp:169</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">foedus::storage::masstree::MasstreePage</a></div><div class="ttdoc">Common base of MasstreeIntermediatePage and MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00066">masstree_page_impl.hpp:66</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a333f5f00909bda4bcd037e134ba1d7ee"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a333f5f00909bda4bcd037e134ba1d7ee">foedus::storage::masstree::MasstreeComposeContext::PathLevel::next_original_slice_</a></div><div class="ttdeci">KeySlice next_original_slice_</div><div class="ttdoc">Slice of next entry. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00223">masstree_composer_impl.hpp:223</a></div></div>
<div class="ttc" id="masstree__page__impl_8hpp_html"><div class="ttname"><a href="masstree__page__impl_8hpp.html">masstree_page_impl.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_ad9e37c0eca7fb90f69f90588948234a9a5b7595b9f53e5f4284a62047395df12a"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a5b7595b9f53e5f4284a62047395df12a">foedus::storage::masstree::MasstreeComposeContext::kMaxLevels</a></div><div class="ttdoc">We assume the path wouldn&#39;t be this deep. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00165">masstree_composer_impl.hpp:165</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_abee5950871ac0b06eeb2e1273b6bb559"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#abee5950871ac0b06eeb2e1273b6bb559">foedus::storage::masstree::MasstreeComposeContext::PathLevel::next_original_mini_</a></div><div class="ttdeci">SlotIndex next_original_mini_</div><div class="ttdoc">for intermediate page </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00208">masstree_composer_impl.hpp:208</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html">foedus::storage::masstree::MasstreeComposeContext</a></div><div class="ttdoc">MasstreeComposer&#39;s compose() implementation separated from the class itself. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00161">masstree_composer_impl.hpp:161</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html_ad25781d742feeced13ed8b047b485a3e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#ad25781d742feeced13ed8b047b485a3e">foedus::storage::masstree::MasstreeComposer::drop_volatiles</a></div><div class="ttdeci">Composer::DropResult drop_volatiles(const Composer::DropVolatilesArguments &amp;args)</div><div class="ttdoc">drop_volatiles and related methods </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l02558">masstree_composer_impl.cpp:2558</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a026f58f00ef73c87f33f67b00908b839"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a026f58f00ef73c87f33f67b00908b839">foedus::storage::masstree::MasstreeComposeContext::PathLevel::has_next_original</a></div><div class="ttdeci">bool has_next_original() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00225">masstree_composer_impl.hpp:225</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html_a3153a40bfca82fe0eba9e44d4a719e32"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a3153a40bfca82fe0eba9e44d4a719e32">foedus::storage::masstree::MasstreeComposer::MasstreeComposer</a></div><div class="ttdeci">MasstreeComposer(Composer *parent)</div><div class="ttdoc">MasstreeComposer methods. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l00071">masstree_composer_impl.cpp:71</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort_html_a4f51576acac1b01c8593f81d539beb9a"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a4f51576acac1b01c8593f81d539beb9a">foedus::storage::masstree::MasstreeComposeContext::PageBoundarySort::operator&lt;</a></div><div class="ttdeci">bool operator&lt;(const PageBoundarySort &amp;rhs) const __attribute__((always_inline))</div><div class="ttdoc">used by std::sort </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00349">masstree_composer_impl.hpp:349</a></div></div>
<div class="ttc" id="group__MASSTREE_html_a328e75f82ce36d845a824b6badd8e55d"><div class="ttname"><a href="group__MASSTREE.html#a328e75f82ce36d845a824b6badd8e55d">foedus::storage::masstree::MasstreeComposeContext::FenceAndPointer::pointer_</a></div><div class="ttdeci">SnapshotPagePointer pointer_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00255">masstree_composer_impl.hpp:255</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_a666cbca8c28f36593b130db08e6c8cca"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a666cbca8c28f36593b130db08e6c8cca">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::btree_level_</a></div><div class="ttdeci">uint8_t btree_level_</div><div class="ttdoc">B-tree level. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00270">masstree_composer_impl.hpp:270</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_a07a40afc4e87f23fc1183897ed72bfd0"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a07a40afc4e87f23fc1183897ed72bfd0">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::PageBoundaryInfo</a></div><div class="ttdeci">PageBoundaryInfo()=delete</div><div class="ttdoc">This object must be reinterpreted. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html">foedus::storage::masstree::MasstreeComposeContext::PathLevel</a></div><div class="ttdoc">One level in the path. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00194">masstree_composer_impl.hpp:194</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort_html_a920c07c7714e9e0aaa8cf06fa697222f"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#a920c07c7714e9e0aaa8cf06fa697222f">foedus::storage::masstree::MasstreeComposeContext::PageBoundarySort::static_less_than</a></div><div class="ttdeci">static bool static_less_than(const PageBoundarySort &amp;lhs, const PageBoundarySort &amp;rhs) __attribute__((always_inline))</div><div class="ttdoc">used by std::lower_bound </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00353">masstree_composer_impl.hpp:353</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_a4453c34847e925948f377e7aadf9935c"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a4453c34847e925948f377e7aadf9935c">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::layer_</a></div><div class="ttdeci">uint8_t layer_</div><div class="ttdoc">B-trie layer of the new page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00274">masstree_composer_impl.hpp:274</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ade1e3b88a8c9ad4011797e85fb9837f8"><div class="ttname"><a href="group__MASSTREE.html#ade1e3b88a8c9ad4011797e85fb9837f8">foedus::storage::masstree::MasstreeComposeContext::FenceAndPointer::low_fence_</a></div><div class="ttdeci">KeySlice low_fence_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00254">masstree_composer_impl.hpp:254</a></div></div>
<div class="ttc" id="group__STORAGE_html_structfoedus_1_1storage_1_1Composer_1_1ComposeArguments"><div class="ttname"><a href="group__STORAGE.html#structfoedus_1_1storage_1_1Composer_1_1ComposeArguments">foedus::storage::Composer::ComposeArguments</a></div><div class="ttdoc">Arguments for compose() </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00095">composer.hpp:95</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1MergeSort_html"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1MergeSort.html">foedus::snapshot::MergeSort</a></div><div class="ttdoc">Receives an arbitrary number of sorted buffers and emits one fully sorted stream of logs...</div><div class="ttdef"><b>Definition:</b> <a href="merge__sort_8hpp_source.html#l00077">merge_sort.hpp:77</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga629d4b8103bfb83ef9c11b842a4fd398"><div class="ttname"><a href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">foedus::storage::SnapshotPagePointer</a></div><div class="ttdeci">uint64_t SnapshotPagePointer</div><div class="ttdoc">Page ID of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00079">storage_id.hpp:79</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html"><div class="ttname"><a href="classfoedus_1_1Engine.html">foedus::Engine</a></div><div class="ttdoc">Database engine object that holds all resources and provides APIs. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8hpp_source.html#l00109">engine.hpp:109</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_af3d538d3efa066973b1b8ac720c9f6e0"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#af3d538d3efa066973b1b8ac720c9f6e0">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::removed_</a></div><div class="ttdeci">uint8_t removed_</div><div class="ttdoc">set to true when this page is closed/reopened so that only one entry matches exactly ...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00272">masstree_composer_impl.hpp:272</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Composer_1_1DropResult_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1Composer_1_1DropResult.html">foedus::storage::Composer::DropResult</a></div><div class="ttdoc">Retrun value of drop_volatiles() </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00171">composer.hpp:171</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo</a></div><div class="ttdoc">Represents a minimal information to install a new snapshot page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00259">masstree_composer_impl.hpp:259</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_gaec32eb05303ebec1048d120f73295031"><div class="ttname"><a href="group__SNAPSHOT.html#gaec32eb05303ebec1048d120f73295031">foedus::snapshot::SnapshotId</a></div><div class="ttdeci">uint16_t SnapshotId</div><div class="ttdoc">Unique ID of Snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__id_8hpp_source.html#l00043">snapshot_id.hpp:43</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html">foedus::storage::masstree::MasstreeStorage</a></div><div class="ttdoc">Represents a Masstree storage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__storage_8hpp_source.html#l00043">masstree_storage.hpp:43</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html">foedus::storage::masstree::MasstreeComposer</a></div><div class="ttdoc">Composer for an masstree storage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00069">masstree_composer_impl.hpp:69</a></div></div>
<div class="ttc" id="memory_2fwd_8hpp_html"><div class="ttname"><a href="memory_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in memory package. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_afade84f115c7a301095657b195dff70c"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#afade84f115c7a301095657b195dff70c">foedus::storage::masstree::MasstreeComposeContext::PathLevel::next_original_</a></div><div class="ttdeci">SlotIndex next_original_</div><div class="ttdoc">If level is based on an existing snapshot page, the next entry (pointer or record) in the original pa...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00206">masstree_composer_impl.hpp:206</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_ad9e37c0eca7fb90f69f90588948234a9a9a48440ea1fb2fb493beb753cf5e3b16"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a9a48440ea1fb2fb493beb753cf5e3b16">foedus::storage::masstree::MasstreeComposeContext::kTmpBoundaryArraySize</a></div><div class="ttdoc">Size of the tmp_boundary_array_. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00174">masstree_composer_impl.hpp:174</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a0f273da401115f635ff1a676adc1c2e9"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a0f273da401115f635ff1a676adc1c2e9">foedus::storage::masstree::MasstreeComposeContext::PathLevel::needs_to_consume_original</a></div><div class="ttdeci">bool needs_to_consume_original(KeySlice slice, KeyLength key_length) const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00241">masstree_composer_impl.hpp:241</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer_html_a05590cc1eeeb3aedd917276d19639fd1"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a05590cc1eeeb3aedd917276d19639fd1">foedus::storage::masstree::MasstreeComposer::compose</a></div><div class="ttdeci">ErrorStack compose(const Composer::ComposeArguments &amp;args)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8cpp_source.html#l00078">masstree_composer_impl.cpp:78</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_a2a14df166777736c65a52d9ddf230a7f"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a2a14df166777736c65a52d9ddf230a7f">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::slices_</a></div><div class="ttdeci">KeySlice slices_[2]</div><div class="ttdoc">actually of layer_+2. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00285">masstree_composer_impl.hpp:285</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__STORAGE_html_aad05b2c2a53ad3641caabd2fa6258782"><div class="ttname"><a href="group__STORAGE.html#aad05b2c2a53ad3641caabd2fa6258782">foedus::storage::Composer::ComposeArguments::snapshot_writer_</a></div><div class="ttdeci">snapshot::SnapshotWriter * snapshot_writer_</div><div class="ttdoc">Writes out composed pages. </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00097">composer.hpp:97</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort_html_ad17d4dd8876c9e5657156eefd9cdc1c7"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html#ad17d4dd8876c9e5657156eefd9cdc1c7">foedus::storage::masstree::MasstreeComposeContext::PageBoundarySort::info_pos_</a></div><div class="ttdeci">snapshot::BufferPosition info_pos_</div><div class="ttdoc">Points to PageBoundaryInfo in page_boundary_info_. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00347">masstree_composer_impl.hpp:347</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a5edbac664d852d0eacf52c8bf5576748"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a5edbac664d852d0eacf52c8bf5576748">foedus::storage::masstree::MasstreeComposeContext::PathLevel::layer_</a></div><div class="ttdeci">uint16_t layer_</div><div class="ttdoc">B-tri layer of this level. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00200">masstree_composer_impl.hpp:200</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_html_ad9e37c0eca7fb90f69f90588948234a9a2783f17bc5b1a286d90cda47ff1600d5"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext.html#ad9e37c0eca7fb90f69f90588948234a9a2783f17bc5b1a286d90cda47ff1600d5">foedus::storage::masstree::MasstreeComposeContext::kMaxLayers</a></div><div class="ttdoc">We assume B-trie depth is at most this (prefix is at most 8*this value) </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00167">masstree_composer_impl.hpp:167</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_afc3c9c7c7a9d172cd07c6bf933cde925"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#afc3c9c7c7a9d172cd07c6bf933cde925">foedus::storage::masstree::MasstreeComposeContext::PathLevel::tail_</a></div><div class="ttdeci">memory::PagePoolOffset tail_</div><div class="ttdoc">Offset in page_base_. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00198">masstree_composer_impl.hpp:198</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaca11c6ba81d4c4c7708ca3bcdff3bfa0"><div class="ttname"><a href="group__MASSTREE.html#gaca11c6ba81d4c4c7708ca3bcdff3bfa0">foedus::storage::masstree::is_key_aligned_and_zero_padded</a></div><div class="ttdeci">bool is_key_aligned_and_zero_padded(const char *key, KeyLength key_length)</div><div class="ttdoc">Returns if the given key is 8-bytes aligned and also zero-padded to 8-bytes for easier slicing (which...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00314">masstree_id.hpp:314</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a7bfcd277a96bcd1e9008459abe1ec40d"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">foedus::storage::masstree::kSupremumSlice</a></div><div class="ttdeci">const KeySlice kSupremumSlice</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00137">masstree_id.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">foedus::storage::masstree::MasstreeIntermediatePage</a></div><div class="ttdoc">Represents one intermediate page in Masstree Storage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00262">masstree_page_impl.hpp:262</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a9a5aa95076dc4b12977a3c7f0eb123de"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a9a5aa95076dc4b12977a3c7f0eb123de">foedus::storage::masstree::MasstreeComposeContext::PathLevel::contains_slice</a></div><div class="ttdeci">bool contains_slice(KeySlice slice) const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00232">masstree_composer_impl.hpp:232</a></div></div>
<div class="ttc" id="storage_2masstree_2fwd_8hpp_html"><div class="ttname"><a href="storage_2masstree_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in masstree storage package. </div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="masstree__storage_8hpp_html"><div class="ttname"><a href="masstree__storage_8hpp.html">masstree_storage.hpp</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_ab4bd3006d76d5f090c0e9e7ea57bf8e8"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#ab4bd3006d76d5f090c0e9e7ea57bf8e8">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::~PageBoundaryInfo</a></div><div class="ttdeci">~PageBoundaryInfo()=delete</div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a92248fd3b686b64a40f0d63a4a73515b"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a92248fd3b686b64a40f0d63a4a73515b">foedus::storage::masstree::MasstreeComposeContext::PathLevel::page_count_</a></div><div class="ttdeci">uint32_t page_count_</div><div class="ttdoc">number of pages in this level including head/tail, without original page (so, initial=1). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00212">masstree_composer_impl.hpp:212</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundarySort.html">foedus::storage::masstree::MasstreeComposeContext::PageBoundarySort</a></div><div class="ttdoc">Points to PageBoundaryInfo with a sorting information. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00340">masstree_composer_impl.hpp:340</a></div></div>
<div class="ttc" id="group__COMPILER_html_gaa1dec568e79152c892dcf63f445cbd7a"><div class="ttname"><a href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div><div class="ttdeci">#define ALWAYS_INLINE</div><div class="ttdoc">A function suffix to hint that the function should always be inlined. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00106">compiler.hpp:106</a></div></div>
<div class="ttc" id="group__MASSTREE_html_structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1FenceAndPointer"><div class="ttname"><a href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1FenceAndPointer">foedus::storage::masstree::MasstreeComposeContext::FenceAndPointer</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00253">masstree_composer_impl.hpp:253</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel_html_a4723f2e8bc485a9af571104969a8505f"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PathLevel.html#a4723f2e8bc485a9af571104969a8505f">foedus::storage::masstree::MasstreeComposeContext::PathLevel::high_fence_</a></div><div class="ttdeci">KeySlice high_fence_</div><div class="ttdoc">same as high_fence of tail </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00217">masstree_composer_impl.hpp:217</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga48710f51199feed3db2e2f374ae73814"><div class="ttname"><a href="group__MASSTREE.html#ga48710f51199feed3db2e2f374ae73814">foedus::storage::masstree::normalize_be_bytes_full_aligned</a></div><div class="ttdeci">KeySlice normalize_be_bytes_full_aligned(const void *be_bytes)</div><div class="ttdoc">Convert an aligned big-endian byte array of at least 8-bytes-length to KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00222">masstree_id.hpp:222</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo_html_a9e193bc09d9c5c2b710c975ec05cbb5f"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeComposeContext_1_1PageBoundaryInfo.html#a9e193bc09d9c5c2b710c975ec05cbb5f">foedus::storage::masstree::MasstreeComposeContext::PageBoundaryInfo::local_snapshot_pointer_high_</a></div><div class="ttdeci">uint8_t local_snapshot_pointer_high_</div><div class="ttdoc">high 8-bits of SnapshotLocalPageId of the new page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__composer__impl_8hpp_source.html#l00276">masstree_composer_impl.hpp:276</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html">foedus::storage::Composer::DropVolatilesArguments</a></div><div class="ttdoc">Arguments for drop_volatiles() </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00148">composer.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1SnapshotWriter_html"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1SnapshotWriter.html">foedus::snapshot::SnapshotWriter</a></div><div class="ttdoc">Writes out one snapshot file for all data pages in one reducer. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__writer__impl_8hpp_source.html#l00076">snapshot_writer_impl.hpp:76</a></div></div>
<div class="ttc" id="group__STORAGE_html_structfoedus_1_1storage_1_1Composer_1_1ConstructRootArguments"><div class="ttname"><a href="group__STORAGE.html#structfoedus_1_1storage_1_1Composer_1_1ConstructRootArguments">foedus::storage::Composer::ConstructRootArguments</a></div><div class="ttdoc">Arguments for construct_root() </div><div class="ttdef"><b>Definition:</b> <a href="composer_8hpp_source.html#l00124">composer.hpp:124</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_6f67f5e5099bcaca1b86c6412add5f6c.html">include</a></li><li class="navelem"><a class="el" href="dir_e2c6bc5bd212a768ceff7b155baa199e.html">foedus</a></li><li class="navelem"><a class="el" href="dir_2fbda52012fcfad96d33d284c8344f9b.html">storage</a></li><li class="navelem"><a class="el" href="dir_8090459ce47917ebff411612cf8b5fc9.html">masstree</a></li><li class="navelem"><a class="el" href="masstree__composer__impl_8hpp.html">masstree_composer_impl.hpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
