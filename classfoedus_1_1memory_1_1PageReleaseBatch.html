<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::memory::PageReleaseBatch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1memory_1_1PageReleaseBatch.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfoedus_1_1memory_1_1PageReleaseBatch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::memory::PageReleaseBatch Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__MEMORY.html">Memory Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A helper class to return a bunch of pages to individual nodes.  
 <a href="classfoedus_1_1memory_1_1PageReleaseBatch.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A helper class to return a bunch of pages to individual nodes. </p>
<p>This returns a large number of pages much more efficiently than returning one-by-one, especially if the in-memory pages might come from different NUMA nodes. So far this is used when we shutdown the engine or drop a storage. </p>

<p>Definition at line <a class="el" href="page__pool_8hpp_source.html#l00276">276</a> of file <a class="el" href="page__pool_8hpp_source.html">page_pool.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="page__pool_8hpp_source.html">page_pool.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2219dccd07e31339827958be6aea78bf"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#a2219dccd07e31339827958be6aea78bf">ChunkPtr</a></td></tr>
<tr class="separator:a2219dccd07e31339827958be6aea78bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab566322da845792ac52e7087f9ecef7a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ab566322da845792ac52e7087f9ecef7a">PageReleaseBatch</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:ab566322da845792ac52e7087f9ecef7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93d73bec0e959851e5a29482e83c5a9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ac93d73bec0e959851e5a29482e83c5a9">~PageReleaseBatch</a> ()</td></tr>
<tr class="separator:ac93d73bec0e959851e5a29482e83c5a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e052e3492de0d4325be4d554a5ba45"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ac3e052e3492de0d4325be4d554a5ba45">PageReleaseBatch</a> ()=delete</td></tr>
<tr class="separator:ac3e052e3492de0d4325be4d554a5ba45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e5389148a26b9fb5bdb2f1cc5eb385a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#a3e5389148a26b9fb5bdb2f1cc5eb385a">PageReleaseBatch</a> (const <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a> &amp;)=delete</td></tr>
<tr class="separator:a3e5389148a26b9fb5bdb2f1cc5eb385a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f96bb114fbb4a874fd5f420783c613"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ae9f96bb114fbb4a874fd5f420783c613">operator=</a> (const <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a> &amp;)=delete</td></tr>
<tr class="separator:ae9f96bb114fbb4a874fd5f420783c613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe13efbf3cc2111936b08e31bd18e179"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179">release</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id)</td></tr>
<tr class="memdesc:afe13efbf3cc2111936b08e31bd18e179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the given in-memory volatile page to appropriate NUMA node.  <a href="#afe13efbf3cc2111936b08e31bd18e179">More...</a><br /></td></tr>
<tr class="separator:afe13efbf3cc2111936b08e31bd18e179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedda2314df207e1d39509858cbee6bbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aedda2314df207e1d39509858cbee6bbd">release</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> numa_node, <a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> offset)</td></tr>
<tr class="memdesc:aedda2314df207e1d39509858cbee6bbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the given in-memory page to the specified NUMA node.  <a href="#aedda2314df207e1d39509858cbee6bbd">More...</a><br /></td></tr>
<tr class="separator:aedda2314df207e1d39509858cbee6bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16728969f6c3544544000355b6d4f30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30">release_chunk</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> numa_node)</td></tr>
<tr class="memdesc:af16728969f6c3544544000355b6d4f30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return all batched pages in the given chunk to its pool.  <a href="#af16728969f6c3544544000355b6d4f30">More...</a><br /></td></tr>
<tr class="separator:af16728969f6c3544544000355b6d4f30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacfb0dd808ba1a987cea4d957e8e511b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b">release_all</a> ()</td></tr>
<tr class="memdesc:aacfb0dd808ba1a987cea4d957e8e511b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called at the end to return all batched pages to their pools.  <a href="#aacfb0dd808ba1a987cea4d957e8e511b">More...</a><br /></td></tr>
<tr class="separator:aacfb0dd808ba1a987cea4d957e8e511b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a2219dccd07e31339827958be6aea78bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a>* <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#a2219dccd07e31339827958be6aea78bf">foedus::memory::PageReleaseBatch::ChunkPtr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool_8hpp_source.html#l00278">278</a> of file <a class="el" href="page__pool_8hpp_source.html">page_pool.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab566322da845792ac52e7087f9ecef7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::PageReleaseBatch::PageReleaseBatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool_8cpp_source.html#l00153">153</a> of file <a class="el" href="page__pool_8cpp_source.html">page_pool.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  : engine_(engine), numa_node_count_(engine-&gt;get_options().thread_.group_count_) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  std::memset(chunks_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#a2219dccd07e31339827958be6aea78bf">ChunkPtr</a>) * 256);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> i = 0; i &lt; numa_node_count_; ++i) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    chunks_[i] = <span class="keyword">new</span> PagePoolOffsetChunk;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PageReleaseBatch_html_a2219dccd07e31339827958be6aea78bf"><div class="ttname"><a href="classfoedus_1_1memory_1_1PageReleaseBatch.html#a2219dccd07e31339827958be6aea78bf">foedus::memory::PageReleaseBatch::ChunkPtr</a></div><div class="ttdeci">PagePoolOffsetChunk * ChunkPtr</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00278">page_pool.hpp:278</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac93d73bec0e959851e5a29482e83c5a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::PageReleaseBatch::~PageReleaseBatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="page__pool_8cpp_source.html#l00161">161</a> of file <a class="el" href="page__pool_8cpp_source.html">page_pool.cpp</a>.</p>

<p>References <a class="el" href="page__pool_8cpp_source.html#l00189">release_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                                    {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b">release_all</a>();</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> i = 0; i &lt; numa_node_count_; ++i) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">delete</span> chunks_[i];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    chunks_[i] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PageReleaseBatch_html_aacfb0dd808ba1a987cea4d957e8e511b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b">foedus::memory::PageReleaseBatch::release_all</a></div><div class="ttdeci">void release_all()</div><div class="ttdoc">Called at the end to return all batched pages to their pools. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00189">page_pool.cpp:189</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_ac93d73bec0e959851e5a29482e83c5a9_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_ac93d73bec0e959851e5a29482e83c5a9_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_ac93d73bec0e959851e5a29482e83c5a9_cgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_ac93d73bec0e959851e5a29482e83c5a9_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. " alt="" coords="253,104,453,145"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30" title="Return all batched pages in the given chunk to its pool. " alt="" coords="501,104,701,145"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="787,5,922,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="749,71,960,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="759,136,950,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="765,201,944,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="1008,201,1187,243"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac3e052e3492de0d4325be4d554a5ba45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::PageReleaseBatch::PageReleaseBatch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3e5389148a26b9fb5bdb2f1cc5eb385a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::PageReleaseBatch::PageReleaseBatch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae9f96bb114fbb4a874fd5f420783c613"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a>&amp; foedus::memory::PageReleaseBatch::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afe13efbf3cc2111936b08e31bd18e179"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PageReleaseBatch::release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the given in-memory volatile page to appropriate NUMA node. </p>
<p>This internally batches the pages to return. At the end, call <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. ">release_all()</a> to flush it. </p>

<p>Definition at line <a class="el" href="page__pool_8hpp_source.html#l00292">292</a> of file <a class="el" href="page__pool_8hpp_source.html">page_pool.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__page__impl_8cpp_source.html#l00302">foedus::storage::hash::HashIntermediatePage::release_pages_recursive()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00329">foedus::storage::hash::HashDataPage::release_pages_recursive()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00207">foedus::storage::array::ArrayStoragePimpl::release_pages_recursive()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00226">foedus::storage::masstree::MasstreeIntermediatePage::release_pages_recursive()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00266">foedus::storage::masstree::MasstreeBorderPage::release_pages_recursive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                                          {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179">release</a>(page_id.get_numa_node(), page_id.get_offset());</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PageReleaseBatch_html_afe13efbf3cc2111936b08e31bd18e179"><div class="ttname"><a href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179">foedus::memory::PageReleaseBatch::release</a></div><div class="ttdeci">void release(storage::VolatilePagePointer page_id)</div><div class="ttdoc">Returns the given in-memory volatile page to appropriate NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00292">page_pool.hpp:292</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_afe13efbf3cc2111936b08e31bd18e179_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_afe13efbf3cc2111936b08e31bd18e179_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_afe13efbf3cc2111936b08e31bd18e179_icgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_afe13efbf3cc2111936b08e31bd18e179_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a7a5b98d7f141ded1682a9e46ae3b8589" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive" alt="" coords="494,49,666,105"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a752f776127f131ccc60744c10d5cf490" title="foedus::storage::hash\l::HashDataPage::release\l_pages_recursive" alt="" coords="265,57,431,113"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab46e3b46f500379b6da59949010d5f7a" title="Used only from drop() " alt="" coords="253,137,443,193"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::release_pages_recursive" alt="" coords="255,241,441,297"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="717,266,920,322"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1hash.html#a05601cf00ffeb4df540a0d43379d3387" title="foedus::storage::hash\l::release_parallel" alt="" coords="745,42,892,83"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="975,47,1147,118"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="1213,62,1384,103"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1457,62,1604,103"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="506,144,654,186"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="491,241,669,297"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="732,176,905,218"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="968,162,1153,232"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="1201,176,1396,218"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1444,176,1617,218"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aedda2314df207e1d39509858cbee6bbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PageReleaseBatch::release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>numa_node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the given in-memory page to the specified NUMA node. </p>
<p>This internally batches the pages to return. At the end, call <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. ">release_all()</a> to flush it. </p>

<p>Definition at line <a class="el" href="page__pool_8cpp_source.html#l00169">169</a> of file <a class="el" href="page__pool_8cpp_source.html">page_pool.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8hpp_source.html#l00068">foedus::memory::PagePoolOffsetChunk::push_back()</a>, and <a class="el" href="page__pool_8cpp_source.html#l00178">release_chunk()</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                                                                   {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(numa_node &lt; numa_node_count_);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span> (chunks_[numa_node]-&gt;full()) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30">release_chunk</a>(numa_node);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!chunks_[numa_node]-&gt;full());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  chunks_[numa_node]-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">push_back</a>(offset);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PageReleaseBatch_html_af16728969f6c3544544000355b6d4f30"><div class="ttname"><a href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30">foedus::memory::PageReleaseBatch::release_chunk</a></div><div class="ttdeci">void release_chunk(thread::ThreadGroupId numa_node)</div><div class="ttdoc">Return all batched pages in the given chunk to its pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00178">page_pool.cpp:178</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_a6f558bb023b2c5c7dd9bf7ab9d054ef0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">foedus::memory::PagePoolOffsetChunk::push_back</a></div><div class="ttdeci">void push_back(PagePoolOffset pointer)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00068">page_pool.hpp:68</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_aedda2314df207e1d39509858cbee6bbd_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_aedda2314df207e1d39509858cbee6bbd_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_aedda2314df207e1d39509858cbee6bbd_cgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_aedda2314df207e1d39509858cbee6bbd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="264,39,443,80"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30" title="Return all batched pages in the given chunk to its pool. " alt="" coords="253,136,453,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="517,5,696,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="539,71,674,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="501,136,712,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="511,201,702,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="517,267,696,308"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="760,267,939,308"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aacfb0dd808ba1a987cea4d957e8e511b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PageReleaseBatch::release_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called at the end to return all batched pages to their pools. </p>

<p>Definition at line <a class="el" href="page__pool_8cpp_source.html#l00189">189</a> of file <a class="el" href="page__pool_8cpp_source.html">page_pool.cpp</a>.</p>

<p>References <a class="el" href="page__pool_8cpp_source.html#l00178">release_chunk()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00227">foedus::storage::array::ArrayStorage::drop()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00271">foedus::storage::hash::HashIntermediatePage::release_pages_recursive_parallel()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00178">foedus::storage::masstree::release_parallel()</a>, and <a class="el" href="page__pool_8cpp_source.html#l00161">~PageReleaseBatch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                   {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> i = 0; i &lt; numa_node_count_; ++i) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30">release_chunk</a>(i);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PageReleaseBatch_html_af16728969f6c3544544000355b6d4f30"><div class="ttname"><a href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30">foedus::memory::PageReleaseBatch::release_chunk</a></div><div class="ttdeci">void release_chunk(thread::ThreadGroupId numa_node)</div><div class="ttdoc">Return all batched pages in the given chunk to its pool. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00178">page_pool.cpp:178</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_cgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30" title="Return all batched pages in the given chunk to its pool. " alt="" coords="253,104,453,145"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="539,5,674,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="501,71,712,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="511,136,702,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="517,201,696,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="760,201,939,243"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_icgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_aacfb0dd808ba1a987cea4d957e8e511b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="279,5,427,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="267,71,439,141"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="267,165,440,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ac93d73bec0e959851e5a29482e83c5a9" title="foedus::memory::PageRelease\lBatch::~PageReleaseBatch" alt="" coords="253,231,453,272"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="509,85,679,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="759,85,905,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="501,151,687,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="735,165,929,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="977,165,1151,207"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af16728969f6c3544544000355b6d4f30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::PageReleaseBatch::release_chunk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>numa_node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return all batched pages in the given chunk to its pool. </p>

<p>Definition at line <a class="el" href="page__pool_8cpp_source.html#l00178">178</a> of file <a class="el" href="page__pool_8cpp_source.html">page_pool.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00076">foedus::memory::EngineMemory::get_node_memory()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, and <a class="el" href="page__pool_8cpp_source.html#l00134">foedus::memory::PagePool::release()</a>.</p>

<p>Referenced by <a class="el" href="page__pool_8cpp_source.html#l00169">release()</a>, and <a class="el" href="page__pool_8cpp_source.html#l00189">release_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                                  {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(numa_node &lt; numa_node_count_);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (chunks_[numa_node]-&gt;empty()) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(numa_node)-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    chunks_[numa_node]-&gt;size(), chunks_[numa_node]);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunks_[numa_node]-&gt;empty());</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a802171ff0578875748d20b4e9c8c9463"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">foedus::memory::PagePool::release</a></div><div class="ttdeci">void release(uint32_t desired_release_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Returns the specified number of free pages from the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00134">page_pool.cpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_cgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="291,5,426,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="253,71,464,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="263,136,454,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="269,201,448,243"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="512,201,691,243"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_icgraph" id="classfoedus_1_1memory_1_1PageReleaseBatch_af16728969f6c3544544000355b6d4f30_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aedda2314df207e1d39509858cbee6bbd" title="Returns the given in&#45;memory page to the specified NUMA node. " alt="" coords="253,60,453,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. " alt="" coords="253,125,453,167"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="527,5,675,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="515,71,687,141"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="515,165,688,207"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ac93d73bec0e959851e5a29482e83c5a9" title="foedus::memory::PageRelease\lBatch::~PageReleaseBatch" alt="" coords="501,231,701,272"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="757,85,927,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1007,85,1153,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="749,151,935,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="983,165,1177,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1225,165,1399,207"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/memory/<a class="el" href="page__pool_8hpp_source.html">page_pool.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/memory/<a class="el" href="page__pool_8cpp_source.html">page_pool.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1memory.html">memory</a></li><li class="navelem"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">PageReleaseBatch</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
