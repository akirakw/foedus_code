<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/src/foedus/cache/cache_manager_pimpl.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cache__manager__pimpl_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">cache_manager_pimpl.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cache__manager__pimpl_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cache__manager__pimpl_8hpp.html">foedus/cache/cache_manager_pimpl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;glog/logging.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine_8hpp.html">foedus/engine.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine__options_8hpp.html">foedus/engine_options.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cache__hashtable_8hpp.html">foedus/cache/cache_hashtable.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stop__watch_8hpp.html">foedus/debugging/stop_watch.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine__memory_8hpp.html">foedus/memory/engine_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="numa__node__memory_8hpp.html">foedus/memory/numa_node_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="savepoint__manager_8hpp.html">foedus/savepoint/savepoint_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__manager_8hpp.html">foedus/xct/xct_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">namespace </span>cache {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a4b40e7ae6820c838e2e86ec6f611ee71">   38</a></span>&#160;<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af988b50f580d524334c9b9b0b7dc84e1">CacheManagerPimpl::CacheManagerPimpl</a>(<a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  : engine_(engine),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  stop_requested_(false),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  pool_(nullptr),</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  hashtable_(nullptr),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  reclaimed_pages_(nullptr),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  reclaimed_pages_count_(0) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1">   47</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1">CacheManagerPimpl::initialize_once</a>() {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">is_master</a>()) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// nothing to do in master engine</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a>()) {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a154d6f9c4bf17ea4f3909286f00e2d7d">kErrorCodeDepedentModuleUnavailableInit</a>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  }</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Initializing Snapshot Cache in Node-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">get_soc_id</a>() &lt;&lt; <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">memory::NumaNodeMemory</a>* node = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a0c5065125240df0f59f2cd04ff5f8808">get_local_memory</a>();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a> = node-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">get_snapshot_pool</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad04d70867dbd39a5ae1c00e3e8d3b150">hashtable_</a> = node-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ad8fddde9484a0ceb8d31cd8eca323c77">get_snapshot_cache_table</a>();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// So far, the reclaimed_pages_memory_ is large enough to hold all pages in the pool at once.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// This is obviously too much for most cases, but wouldn&#39;t be an issue as the memory consumption</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// is anyway negligibly smaller than the page pool itself. Keep it simple stupid.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a> = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">get_stat</a>().<a class="code" href="group__MEMORY.html#a4efb79683e7ec8fa293219c8d5d9674a">total_pages_</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html">CacheOptions</a>&amp; options = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a> = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a> * options.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a6548da330be1147af4f6cd1931563e79">snapshot_cache_eviction_threshold_</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a> = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a> * options.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a74502248983101c332f09acfb035c658">snapshot_cache_urgent_threshold_</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// exclude page counts initially grabbed by each thread.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  uint64_t initial_allocations</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#aece3277ecf8d3908dfb25fab83bd057b">private_page_pool_initial_grab_</a></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    * <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#a74b2658ba7a1f73f87a66a2a21fe0c41">get_total_thread_count</a>();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a> += initial_allocations;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a> += initial_allocations;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a> &gt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a>) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a> = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a> &gt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a>) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a> = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a> &gt; 0);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a> &gt;= <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a> &gt;= <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#aa7e849ef002da81240c4cb13c0d0083e">reclaimed_pages_memory_</a>.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e">alloc</a>(</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a> * <span class="keyword">sizeof</span>(<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    1ULL &lt;&lt; 21,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225">memory::AlignedMemory::kNumaAllocOnnode</a>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">get_soc_id</a>());</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af806f450ee89c5881ad1670f8f5a14f2">reclaimed_pages_</a> = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#aa7e849ef002da81240c4cb13c0d0083e">reclaimed_pages_memory_</a>.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">get_block</a>());</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// launch the cleaner thread</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">stop_requested_</a>.store(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a6d0888a1d0fd682cb1e42830b091044d">cleaner_</a> = std::move(std::thread(&amp;<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3">CacheManagerPimpl::handle_cleaner</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1322d8be16a7fe558bd83de18eb41c85">  102</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1322d8be16a7fe558bd83de18eb41c85">CacheManagerPimpl::uninitialize_once</a>() {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">is_master</a>()) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// nothing to do in master engine</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Uninitializing Snapshot Cache... &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a913ee4a71391ff0261b6725ca658925a">stop_cleaner</a>());</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad04d70867dbd39a5ae1c00e3e8d3b150">hashtable_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af806f450ee89c5881ad1670f8f5a14f2">reclaimed_pages_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#aa7e849ef002da81240c4cb13c0d0083e">reclaimed_pages_memory_</a>.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> = 0;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;}</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3">  119</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3">CacheManagerPimpl::handle_cleaner</a>() {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Here we go. Cleaner thread: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">const</span> uint32_t kIntervalMs = 5;  <span class="comment">// should be a bit shorter than epoch-advance interval</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">stop_requested_</a>) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    DVLOG(2) &lt;&lt; <span class="stringliteral">&quot;Cleaner thread came in: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> == 0);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">assorted::memory_fence_acquire</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="group__MEMORY.html#structfoedus_1_1memory_1_1PagePool_1_1Stat">memory::PagePool::Stat</a> stat = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">get_stat</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(stat.<a class="code" href="group__MEMORY.html#a4efb79683e7ec8fa293219c8d5d9674a">total_pages_</a> == <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">total_pages_</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> &gt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a>) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Time to evict: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      uint64_t target_count = stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> - <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <a class="code" href="classfoedus_1_1debugging_1_1StopWatch.html">debugging::StopWatch</a> evict_watch;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a0b5e7574ed3474be65757a9f1d2595fc">handle_cleaner_evict_pages</a>(target_count);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      evict_watch.<a class="code" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2">stop</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Evicted &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> &lt;&lt; <span class="stringliteral">&quot; pages in &quot;</span> &lt;&lt; evict_watch.<a class="code" href="classfoedus_1_1debugging_1_1StopWatch.html#a7f1f05f4dd494dd57c3ecafb5d9131fb">elapsed_us</a>()</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;us: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> &gt; 0) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="comment">// We collected some number of pages in previous execution. now we have to wait for</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// grace period before returning them to the pool as free pages.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="classfoedus_1_1xct_1_1XctManager.html">xct::XctManager</a>* xct_manager = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(xct_manager-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a8c2222c8c5db52f4f1175b1250bf1a4a">is_initialized</a>());  <span class="comment">// see stop_cleaner()&#39;s comment why this is true.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> reclaimed_pages_epoch = xct_manager-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">get_current_global_epoch</a>();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Collected &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> &lt;&lt; <span class="stringliteral">&quot; pages. let&#39;s return them to &quot;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;the pool: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> wait_until = reclaimed_pages_epoch.<a class="code" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3">one_more</a>();</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// We have to wait for grace-period, in other words until the next epoch.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">if</span> (stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> &gt;= <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a>) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;          VLOG(0) &lt;&lt; <span class="stringliteral">&quot;We are in urgent lack of free pages, let&#39;s advance epoch right now&quot;</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;          xct_manager-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">advance_current_global_epoch</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="comment">// wait forever, but occasionally wake up to check if the system is being shutdown</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">stop_requested_</a> &amp;&amp; xct_manager-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">get_current_global_epoch</a>() &lt; wait_until) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;          <span class="keyword">const</span> uint64_t interval_microsec = 100000ULL;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;          xct_manager-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#aa3178a6ce1c815fb88b6c8d5607da5d4">wait_for_current_global_epoch</a>(wait_until, interval_microsec);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">stop_requested_</a>) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;          <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> current_epoch = xct_manager-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">get_current_global_epoch</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(reclaimed_pages_epoch &lt; current_epoch);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;          VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Okay! reclaimed_pages_epoch_=&quot;</span> &lt;&lt; reclaimed_pages_epoch</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, current_epoch=&quot;</span> &lt;&lt; current_epoch;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;          <a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetDynamicChunk.html">memory::PagePoolOffsetDynamicChunk</a> chunk(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a>, <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af806f450ee89c5881ad1670f8f5a14f2">reclaimed_pages_</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;          <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a>, &amp;chunk);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;          <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Wtf, we couldn&#39;t collect any pages? that&#39;s weird...: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">if</span> (stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> &gt;= <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a>) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Umm, still severely lacking free pages. This might mean&quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;          <span class="stringliteral">&quot; that the cleaner thread is getting behind or the pool is too small: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      DVLOG(2) &lt;&lt; <span class="stringliteral">&quot;Still enough free pages. do nothing&quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">stop_requested_</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      std::this_thread::sleep_for(std::chrono::milliseconds(kIntervalMs));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Quiting... Cleaner thread: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">describe</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a0b5e7574ed3474be65757a9f1d2595fc">  190</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a0b5e7574ed3474be65757a9f1d2595fc">CacheManagerPimpl::handle_cleaner_evict_pages</a>(uint64_t target_count) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> == 0);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(target_count &gt; 0);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="structfoedus_1_1cache_1_1CacheHashtable_1_1EvictArgs.html">CacheHashtable::EvictArgs</a> args = { target_count, 0, <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af806f450ee89c5881ad1670f8f5a14f2">reclaimed_pages_</a> };</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad04d70867dbd39a5ae1c00e3e8d3b150">hashtable_</a>-&gt;<a class="code" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e9c6560b489d4709183256c6e6d332a">evict</a>(&amp;args);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> = args.<a class="code" href="structfoedus_1_1cache_1_1CacheHashtable_1_1EvictArgs.html#a00ad193e470b01e67215cdd3ec4f68ee">evicted_count_</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a913ee4a71391ff0261b6725ca658925a">  198</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a913ee4a71391ff0261b6725ca658925a">CacheManagerPimpl::stop_cleaner</a>() {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordtype">bool</span> original = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">bool</span> changed = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">stop_requested_</a>.compare_exchange_strong(original, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (changed) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a6d0888a1d0fd682cb1e42830b091044d">cleaner_</a>.joinable()) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Requesting Cache Cleaner to stop...&quot;</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a6d0888a1d0fd682cb1e42830b091044d">cleaner_</a>.join();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Cache Cleaner seems already stop-requested&quot;</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">  213</a></span>&#160;std::string <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">CacheManagerPimpl::describe</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;SnapshotCacheManager /&gt;&quot;</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  std::stringstream str;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <a class="code" href="group__MEMORY.html#structfoedus_1_1memory_1_1PagePool_1_1Stat">memory::PagePool::Stat</a> pool_stat = <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">get_stat</a>();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  str &lt;&lt; <span class="stringliteral">&quot;&lt;SpCache &quot;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; node=\&quot;&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">get_soc_id</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; total=\&quot;&quot;</span> &lt;&lt; pool_stat.<a class="code" href="group__MEMORY.html#a4efb79683e7ec8fa293219c8d5d9674a">total_pages_</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; alloc=\&quot;&quot;</span> &lt;&lt; pool_stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; threshold=\&quot;&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">cleaner_threshold_</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; urgent_threshold=\&quot;&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">urgent_threshold_</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; reclaimed_count=\&quot;&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">reclaimed_pages_count_</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#aa7e849ef002da81240c4cb13c0d0083e">reclaimed_pages_memory_</a> &lt;&lt; <span class="stringliteral">&quot;&lt;/SpCache&gt;&quot;</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">return</span> str.str();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}  <span class="comment">// namespace cache</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_ad30307affc38a5fa2b46f1cc3316053a"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad30307affc38a5fa2b46f1cc3316053a">foedus::cache::CacheManagerPimpl::total_pages_</a></div><div class="ttdeci">uint64_t total_pages_</div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00071">cache_manager_pimpl.hpp:71</a></div></div>
<div class="ttc" id="group__MEMORY_html_a4ba86092787e1f959dfffca693a92fbd"><div class="ttname"><a href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">foedus::memory::PagePool::Stat::allocated_pages_</a></div><div class="ttdeci">uint64_t allocated_pages_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00177">page_pool.hpp:177</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225">foedus::memory::AlignedMemory::kNumaAllocOnnode</a></div><div class="ttdoc">numa_alloc_onnode() and numa_free(). </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00083">aligned_memory.hpp:83</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_af806f450ee89c5881ad1670f8f5a14f2"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af806f450ee89c5881ad1670f8f5a14f2">foedus::cache::CacheManagerPimpl::reclaimed_pages_</a></div><div class="ttdeci">memory::PagePoolOffset * reclaimed_pages_</div><div class="ttdoc">This buffers pages being reclaimed. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00106">cache_manager_pimpl.hpp:106</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1MemoryOptions_html_aece3277ecf8d3908dfb25fab83bd057b"><div class="ttname"><a href="structfoedus_1_1memory_1_1MemoryOptions.html#aece3277ecf8d3908dfb25fab83bd057b">foedus::memory::MemoryOptions::private_page_pool_initial_grab_</a></div><div class="ttdeci">uint32_t private_page_pool_initial_grab_</div><div class="ttdoc">How many pages each NumaCoreMemory initially grabs when it is initialized. </div><div class="ttdef"><b>Definition:</b> <a href="memory__options_8hpp_source.html#l00131">memory_options.hpp:131</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a419a270d62522ede9bd871dd4adc0e2a"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">foedus::xct::XctManager::get_current_global_epoch</a></div><div class="ttdeci">Epoch get_current_global_epoch() const </div><div class="ttdoc">Returns the current global epoch, the epoch a newly started transaction will be in. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00057">xct_manager_pimpl.cpp:57</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_afd955f5f991e28943c72ecff1167c16b"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">foedus::memory::AlignedMemory::release_block</a></div><div class="ttdeci">void release_block()</div><div class="ttdoc">Releases the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8cpp_source.html#l00235">aligned_memory.cpp:235</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_ad04d70867dbd39a5ae1c00e3e8d3b150"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad04d70867dbd39a5ae1c00e3e8d3b150">foedus::cache::CacheManagerPimpl::hashtable_</a></div><div class="ttdeci">CacheHashtable * hashtable_</div><div class="ttdoc">The cache hashtable (SnapshotPageId -> offset in pool) on top of the page pool. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00093">cache_manager_pimpl.hpp:93</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a0541f9ed9fc128fc2c246a4a3bd2b740"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">foedus::memory::NumaNodeMemory::get_snapshot_pool</a></div><div class="ttdeci">PagePool * get_snapshot_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00058">numa_node_memory.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_aae17b661b01fd08a3019128c82227e7c"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">foedus::memory::PagePool::get_stat</a></div><div class="ttdeci">Stat get_stat() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00118">page_pool.cpp:118</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a8c2222c8c5db52f4f1175b1250bf1a4a"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a8c2222c8c5db52f4f1175b1250bf1a4a">foedus::xct::XctManager::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager_8cpp_source.html#l00031">xct_manager.cpp:31</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a913ee4a71391ff0261b6725ca658925a"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a913ee4a71391ff0261b6725ca658925a">foedus::cache::CacheManagerPimpl::stop_cleaner</a></div><div class="ttdeci">ErrorStack stop_cleaner()</div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8cpp_source.html#l00198">cache_manager_pimpl.cpp:198</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a154d6f9c4bf17ea4f3909286f00e2d7d"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a154d6f9c4bf17ea4f3909286f00e2d7d">foedus::kErrorCodeDepedentModuleUnavailableInit</a></div><div class="ttdoc">0x0005 : "GENERAL: A dependent module is not initialized yet. This implies a wrong initialization ord...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00109">error_code.hpp:109</a></div></div>
<div class="ttc" id="engine_8hpp_html"><div class="ttname"><a href="engine_8hpp.html">engine.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1ErrorStack_html"><div class="ttname"><a href="classfoedus_1_1ErrorStack.html">foedus::ErrorStack</a></div><div class="ttdoc">Brings error stacktrace information as return value of functions. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00081">error_stack.hpp:81</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a2876d026b658af099cdf153ed1529369"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a2876d026b658af099cdf153ed1529369">foedus::cache::CacheManagerPimpl::describe</a></div><div class="ttdeci">std::string describe() const </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8cpp_source.html#l00213">cache_manager_pimpl.cpp:213</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html"><div class="ttname"><a href="classfoedus_1_1Epoch.html">foedus::Epoch</a></div><div class="ttdoc">Represents a time epoch. </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00061">epoch.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a5166bae2fdad9ffa0d5c279edfd3307e"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e">foedus::memory::AlignedMemory::alloc</a></div><div class="ttdeci">void alloc(uint64_t size, uint64_t alignment, AllocType alloc_type, int numa_node) noexcept</div><div class="ttdoc">Allocate a memory, releasing the current memory if exists. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8cpp_source.html#l00113">aligned_memory.cpp:113</a></div></div>
<div class="ttc" id="stop__watch_8hpp_html"><div class="ttname"><a href="stop__watch_8hpp.html">stop_watch.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a9b94264bea60c98e93556f7458d02385"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a9b94264bea60c98e93556f7458d02385">foedus::cache::CacheManagerPimpl::stop_requested_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; stop_requested_</div><div class="ttdoc">to stop cleaner_ </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00077">cache_manager_pimpl.hpp:77</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a1cfa4137e2243f7e8bb43a1b11441bf6"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1cfa4137e2243f7e8bb43a1b11441bf6">foedus::cache::CacheManagerPimpl::urgent_threshold_</a></div><div class="ttdeci">uint64_t urgent_threshold_</div><div class="ttdoc">the number of allocated pages above which cleaner advances epoch to release pages ...</div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00075">cache_manager_pimpl.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_af988b50f580d524334c9b9b0b7dc84e1"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af988b50f580d524334c9b9b0b7dc84e1">foedus::cache::CacheManagerPimpl::CacheManagerPimpl</a></div><div class="ttdeci">CacheManagerPimpl()=delete</div></div>
<div class="ttc" id="cache__hashtable_8hpp_html"><div class="ttname"><a href="cache__hashtable_8hpp.html">cache_hashtable.hpp</a></div></div>
<div class="ttc" id="numa__node__memory_8hpp_html"><div class="ttname"><a href="numa__node__memory_8hpp.html">numa_node_memory.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_ad60dcb46431ef158283b2923c03ed930"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#ad60dcb46431ef158283b2923c03ed930">foedus::cache::CacheManagerPimpl::pool_</a></div><div class="ttdeci">memory::PagePool * pool_</div><div class="ttdoc">The SOC-local snapshot page pool in this SOC engine. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00085">cache_manager_pimpl.hpp:85</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a1322d8be16a7fe558bd83de18eb41c85"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a1322d8be16a7fe558bd83de18eb41c85">foedus::cache::CacheManagerPimpl::uninitialize_once</a></div><div class="ttdeci">ErrorStack uninitialize_once() override</div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8cpp_source.html#l00102">cache_manager_pimpl.cpp:102</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a5a390a597023f4b5c8cbcdcdd95e17ee"><div class="ttname"><a href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">foedus::Engine::is_master</a></div><div class="ttdeci">bool is_master() const </div><div class="ttdoc">Returns if this engine object is a master instance. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00068">engine.cpp:68</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheHashtable_1_1EvictArgs_html_a00ad193e470b01e67215cdd3ec4f68ee"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheHashtable_1_1EvictArgs.html#a00ad193e470b01e67215cdd3ec4f68ee">foedus::cache::CacheHashtable::EvictArgs::evicted_count_</a></div><div class="ttdeci">uint64_t evicted_count_</div><div class="ttdoc">[Out] Number of entries that were actually evicted </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00290">cache_hashtable.hpp:290</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_aa7e849ef002da81240c4cb13c0d0083e"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#aa7e849ef002da81240c4cb13c0d0083e">foedus::cache::CacheManagerPimpl::reclaimed_pages_memory_</a></div><div class="ttdeci">memory::AlignedMemory reclaimed_pages_memory_</div><div class="ttdoc">The memory backing reclaimed_pages_. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00109">cache_manager_pimpl.hpp:109</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a0b5e7574ed3474be65757a9f1d2595fc"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a0b5e7574ed3474be65757a9f1d2595fc">foedus::cache::CacheManagerPimpl::handle_cleaner_evict_pages</a></div><div class="ttdeci">void handle_cleaner_evict_pages(uint64_t target_count)</div><div class="ttdoc">Evicts pages up to about target_count (maybe a bit more or less). </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8cpp_source.html#l00190">cache_manager_pimpl.cpp:190</a></div></div>
<div class="ttc" id="engine__options_8hpp_html"><div class="ttname"><a href="engine__options_8hpp.html">engine_options.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a0fba742942a9ff0de143e354fea34d4b"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">foedus::EngineOptions::memory_</a></div><div class="ttdeci">memory::MemoryOptions memory_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00139">engine_options.hpp:139</a></div></div>
<div class="ttc" id="cache__manager__pimpl_8hpp_html"><div class="ttname"><a href="cache__manager__pimpl_8hpp.html">cache_manager_pimpl.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheHashtable_html_a8e9c6560b489d4709183256c6e6d332a"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e9c6560b489d4709183256c6e6d332a">foedus::cache::CacheHashtable::evict</a></div><div class="ttdeci">void evict(EvictArgs *args)</div><div class="ttdoc">Evict some entries from the hashtable. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8cpp_source.html#l00171">cache_hashtable.cpp:171</a></div></div>
<div class="ttc" id="group__MEMORY_html_a4efb79683e7ec8fa293219c8d5d9674a"><div class="ttname"><a href="group__MEMORY.html#a4efb79683e7ec8fa293219c8d5d9674a">foedus::memory::PagePool::Stat::total_pages_</a></div><div class="ttdeci">uint64_t total_pages_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00176">page_pool.hpp:176</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a6d0888a1d0fd682cb1e42830b091044d"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a6d0888a1d0fd682cb1e42830b091044d">foedus::cache::CacheManagerPimpl::cleaner_</a></div><div class="ttdeci">std::thread cleaner_</div><div class="ttdoc">The only cleaner thread in this SOC engine. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00070">cache_manager_pimpl.hpp:70</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html"><div class="ttname"><a href="classfoedus_1_1Engine.html">foedus::Engine</a></div><div class="ttdoc">Database engine object that holds all resources and provides APIs. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8hpp_source.html#l00109">engine.hpp:109</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html_a74502248983101c332f09acfb035c658"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html#a74502248983101c332f09acfb035c658">foedus::cache::CacheOptions::snapshot_cache_urgent_threshold_</a></div><div class="ttdeci">float snapshot_cache_urgent_threshold_</div><div class="ttdoc">When the cache eviction performs in an urgent mode, which immediately advances the current epoch to r...</div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00096">cache_options.hpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html">foedus::memory::NumaNodeMemory</a></div><div class="ttdoc">Repository of memories dynamically acquired and shared within one NUMA node (socket). </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00048">numa_node_memory.hpp:48</a></div></div>
<div class="ttc" id="classfoedus_1_1debugging_1_1StopWatch_html_a2ee5315a0f6bf736a2a73b29b1709bd2"><div class="ttname"><a href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2">foedus::debugging::StopWatch::stop</a></div><div class="ttdeci">uint64_t stop()</div><div class="ttdoc">Take another current time tick. </div><div class="ttdef"><b>Definition:</b> <a href="stop__watch_8cpp_source.html#l00035">stop_watch.cpp:35</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html_a6548da330be1147af4f6cd1931563e79"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html#a6548da330be1147af4f6cd1931563e79">foedus::cache::CacheOptions::snapshot_cache_eviction_threshold_</a></div><div class="ttdeci">float snapshot_cache_eviction_threshold_</div><div class="ttdoc">When to start evicting pages in fraction of snapshot page pool capacity. </div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00083">cache_options.hpp:83</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_a786afd92afdc87b54dfa11ef093f06f3"><div class="ttname"><a href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3">foedus::Epoch::one_more</a></div><div class="ttdeci">Epoch one_more() const </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00127">epoch.hpp:127</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheHashtable_1_1EvictArgs_html"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheHashtable_1_1EvictArgs.html">foedus::cache::CacheHashtable::EvictArgs</a></div><div class="ttdoc">Parameters for evict() </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00286">cache_hashtable.hpp:286</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html">foedus::xct::XctManager</a></div><div class="ttdoc">Xct Manager class that provides API to begin/abort/commit transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager_8hpp_source.html#l00035">xct_manager.hpp:35</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html">foedus::cache::CacheOptions</a></div><div class="ttdoc">Set of options for snapshot cache manager. </div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00029">cache_options.hpp:29</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_af306ba60622e2a87f75ae93dc6c597b1"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">foedus::memory::AlignedMemory::get_block</a></div><div class="ttdeci">void * get_block() const </div><div class="ttdoc">Returns the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00168">aligned_memory.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a802171ff0578875748d20b4e9c8c9463"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">foedus::memory::PagePool::release</a></div><div class="ttdeci">void release(uint32_t desired_release_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Returns the specified number of free pages from the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00134">page_pool.cpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetDynamicChunk_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetDynamicChunk.html">foedus::memory::PagePoolOffsetDynamicChunk</a></div><div class="ttdoc">Used to point to an already existing array. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00081">page_pool.hpp:81</a></div></div>
<div class="ttc" id="savepoint__manager_8hpp_html"><div class="ttname"><a href="savepoint__manager_8hpp.html">savepoint_manager.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a48d5e1f7ce2f70161c253f650c75ed95"><div class="ttname"><a href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">foedus::Engine::get_xct_manager</a></div><div class="ttdeci">xct::XctManager * get_xct_manager() const </div><div class="ttdoc">See Transaction Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00061">engine.cpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1debugging_1_1StopWatch_html_a7f1f05f4dd494dd57c3ecafb5d9131fb"><div class="ttname"><a href="classfoedus_1_1debugging_1_1StopWatch.html#a7f1f05f4dd494dd57c3ecafb5d9131fb">foedus::debugging::StopWatch::elapsed_us</a></div><div class="ttdeci">double elapsed_us() const </div><div class="ttdef"><b>Definition:</b> <a href="stop__watch_8hpp_source.html#l00045">stop_watch.hpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_ad8fddde9484a0ceb8d31cd8eca323c77"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ad8fddde9484a0ceb8d31cd8eca323c77">foedus::memory::NumaNodeMemory::get_snapshot_cache_table</a></div><div class="ttdeci">cache::CacheHashtable * get_snapshot_cache_table()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00059">numa_node_memory.hpp:59</a></div></div>
<div class="ttc" id="xct__manager_8hpp_html"><div class="ttname"><a href="xct__manager_8hpp.html">xct_manager.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_aa3178a6ce1c815fb88b6c8d5607da5d4"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#aa3178a6ce1c815fb88b6c8d5607da5d4">foedus::xct::XctManager::wait_for_current_global_epoch</a></div><div class="ttdeci">void wait_for_current_global_epoch(Epoch target_epoch, int64_t wait_microseconds=-1)</div><div class="ttdoc">Passively wait until the current global epoch becomes the given value. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager_8cpp_source.html#l00035">xct_manager.cpp:35</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a0c5065125240df0f59f2cd04ff5f8808"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a0c5065125240df0f59f2cd04ff5f8808">foedus::memory::EngineMemory::get_local_memory</a></div><div class="ttdeci">NumaNodeMemory * get_local_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00073">engine_memory.hpp:73</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_aa75089821b48c98a00cd7e4ddc0615da"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">foedus::xct::XctManager::advance_current_global_epoch</a></div><div class="ttdeci">void advance_current_global_epoch()</div><div class="ttdoc">Requests to advance the current global epoch as soon as possible and blocks until it actually does...</div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00070">xct_manager_pimpl.cpp:70</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a93843fcb689b82e4eb63c5b3cb51f2f6"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a93843fcb689b82e4eb63c5b3cb51f2f6">foedus::cache::CacheManagerPimpl::reclaimed_pages_count_</a></div><div class="ttdeci">uint64_t reclaimed_pages_count_</div><div class="ttdoc">Number of pages buffered so far. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00112">cache_manager_pimpl.hpp:112</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a5a0fd87ff73e0f43e5a901f1c4fa34e3"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3">foedus::cache::CacheManagerPimpl::handle_cleaner</a></div><div class="ttdeci">void handle_cleaner()</div><div class="ttdoc">Main routine of cleaner_. </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8cpp_source.html#l00119">cache_manager_pimpl.cpp:119</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a11b8ef3c07c8871cb34620976a39370c"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a11b8ef3c07c8871cb34620976a39370c">foedus::cache::CacheManagerPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00063">cache_manager_pimpl.hpp:63</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_a3fc02bb6dc7405008fd2cf706ca6a47c"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a3fc02bb6dc7405008fd2cf706ca6a47c">foedus::cache::CacheManagerPimpl::cleaner_threshold_</a></div><div class="ttdeci">uint64_t cleaner_threshold_</div><div class="ttdoc">the number of allocated pages above which cleaner starts cleaning </div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8hpp_source.html#l00073">cache_manager_pimpl.hpp:73</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_a74b2658ba7a1f73f87a66a2a21fe0c41"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#a74b2658ba7a1f73f87a66a2a21fe0c41">foedus::thread::ThreadOptions::get_total_thread_count</a></div><div class="ttdeci">ThreadId get_total_thread_count() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00062">thread_options.hpp:62</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaf84f9944a16c5848f69beacdfeedf939"><div class="ttname"><a href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">foedus::assorted::memory_fence_acquire</a></div><div class="ttdeci">void memory_fence_acquire()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acquire). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00046">atomic_fences.hpp:46</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheManagerPimpl_html_af04416fadb8ec5160408982fa67a08c1"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1">foedus::cache::CacheManagerPimpl::initialize_once</a></div><div class="ttdeci">ErrorStack initialize_once() override</div><div class="ttdef"><b>Definition:</b> <a href="cache__manager__pimpl_8cpp_source.html#l00047">cache_manager_pimpl.cpp:47</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a8d9a31e48aec9b73e16b64170c0250f9"><div class="ttname"><a href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">foedus::Engine::get_soc_id</a></div><div class="ttdeci">soc::SocId get_soc_id() const </div><div class="ttdoc">If this is a child instance, returns its SOC ID (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00073">engine.cpp:73</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1debugging_1_1StopWatch_html"><div class="ttname"><a href="classfoedus_1_1debugging_1_1StopWatch.html">foedus::debugging::StopWatch</a></div><div class="ttdoc">A high-resolution stop watch. </div><div class="ttdef"><b>Definition:</b> <a href="stop__watch_8hpp_source.html#l00030">stop_watch.hpp:30</a></div></div>
<div class="ttc" id="engine__memory_8hpp_html"><div class="ttname"><a href="engine__memory_8hpp.html">engine_memory.hpp</a></div></div>
<div class="ttc" id="group__MEMORY_html_structfoedus_1_1memory_1_1PagePool_1_1Stat"><div class="ttname"><a href="group__MEMORY.html#structfoedus_1_1memory_1_1PagePool_1_1Stat">foedus::memory::PagePool::Stat</a></div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00175">page_pool.hpp:175</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a1abda1e84b8af8bd6916e52fd0a09f3e"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">foedus::DefaultInitializable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override final</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00196">initializable.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a6e51937e58975e50d0f3eea198b24d3e"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">foedus::EngineOptions::cache_</a></div><div class="ttdeci">cache::CacheOptions cache_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00136">engine_options.hpp:136</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_d7a805ee636aca3e828841913b8fee6f.html">src</a></li><li class="navelem"><a class="el" href="dir_69f399cb2d64e6ca2c29e4a5a8e5672b.html">foedus</a></li><li class="navelem"><a class="el" href="dir_a1e1bc2eee611ab7947e217137e2d452.html">cache</a></li><li class="navelem"><a class="el" href="cache__manager__pimpl_8cpp.html">cache_manager_pimpl.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
