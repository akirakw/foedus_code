<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::array::ArrayStoragePimpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::array::ArrayStoragePimpl Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__ARRAY.html">Array Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Pimpl object of <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html" title="Represents a key-value store based on a dense and regular array. ">ArrayStorage</a>.  
 <a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pimpl object of <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html" title="Represents a key-value store based on a dense and regular array. ">ArrayStorage</a>. </p>
<p>A private pimpl object for <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html" title="Represents a key-value store based on a dense and regular array. ">ArrayStorage</a>. Do not include this header from a client program unless you know what you are doing. </p>

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00088">88</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for foedus::storage::array::ArrayStoragePimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl__coll__graph.png" border="0" usemap="#foedus_1_1storage_1_1array_1_1ArrayStoragePimpl_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1storage_1_1array_1_1ArrayStoragePimpl_coll__map" id="foedus_1_1storage_1_1array_1_1ArrayStoragePimpl_coll__map">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html" title="Shared data of this storage type. " alt="" coords="1033,169,1213,211"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html" title="Metadata of an array storage. " alt="" coords="709,39,857,80"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1Metadata.html" title="Metadata of one storage. " alt="" coords="377,46,551,73"/>
<area shape="rect" id="node5" href="classfoedus_1_1assorted_1_1FixedString.html" title="foedus::assorted::FixedString\l\&lt; 60 \&gt;" alt="" coords="5,5,197,47"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1Metadata_1_1SnapshotThresholds.html" title="Tuning parameters related to snapshotting. " alt="" coords="15,71,188,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html" title="Packages logic and required properties to calculate LookupRoute in array storage from offset..." alt="" coords="709,104,857,145"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1DualPagePointer.html" title="Represents a pointer to another page (usually a child page). " alt="" coords="696,169,871,211"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html" title="Represents a pointer to a volatile page with modification count for preventing ABA. " alt="" coords="383,169,545,211"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="696,235,871,262"/>
<area shape="rect" id="node11" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. " alt="" coords="1069,261,1177,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="717,286,849,313"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a63053a4fd666359edd6351a43642238a"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238a">Constants</a> { <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a> = 16
 }<tr class="separator:a63053a4fd666359edd6351a43642238a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adc5bf43cba5a55fd1647ff60c5733df4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adc5bf43cba5a55fd1647ff60c5733df4">ArrayStoragePimpl</a> ()=delete</td></tr>
<tr class="separator:adc5bf43cba5a55fd1647ff60c5733df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a905e5848359ab90bb7584455a2201b36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a905e5848359ab90bb7584455a2201b36">ArrayStoragePimpl</a> (<a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html">ArrayStorage</a> *storage)</td></tr>
<tr class="separator:a905e5848359ab90bb7584455a2201b36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56d65ac2b8eb81927bc3479c2a779698"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a56d65ac2b8eb81927bc3479c2a779698">ArrayStoragePimpl</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html">ArrayStorageControlBlock</a> *control_block)</td></tr>
<tr class="separator:a56d65ac2b8eb81927bc3479c2a779698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e55e41fd5b5ffcdc55e172b07437a0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a26e55e41fd5b5ffcdc55e172b07437a0">~ArrayStoragePimpl</a> ()</td></tr>
<tr class="separator:a26e55e41fd5b5ffcdc55e172b07437a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6387df1cf86cecbbaba2c41635bbe7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a">create</a> (const <a class="el" href="structfoedus_1_1storage_1_1Metadata.html">Metadata</a> &amp;metadata)</td></tr>
<tr class="separator:af6387df1cf86cecbbaba2c41635bbe7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577ab7f32ca2b4d48a7fa174263de47d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d">load</a> (const <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> &amp;snapshot_block)</td></tr>
<tr class="separator:a577ab7f32ca2b4d48a7fa174263de47d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bf1f0e04d213efe49f4e250968a60b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9">load_empty</a> ()</td></tr>
<tr class="separator:a2bf1f0e04d213efe49f4e250968a60b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9204f003c16b2dfcaba0fe644930b9a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a9204f003c16b2dfcaba0fe644930b9a5">report_page_distribution</a> ()</td></tr>
<tr class="separator:a9204f003c16b2dfcaba0fe644930b9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7175d943ce05a4fdca76d15638dac4e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">exists</a> () const </td></tr>
<tr class="separator:af7175d943ce05a4fdca76d15638dac4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0611bafe6b93b9b860330375cb805fdc"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html">ArrayMetadata</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a> () const </td></tr>
<tr class="separator:a0611bafe6b93b9b860330375cb805fdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a21a13b165bfe75387d21446ad8758c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a> () const </td></tr>
<tr class="separator:a8a21a13b165bfe75387d21446ad8758c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4aecf5370150176a5a148c27f1b1bcc"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">get_levels</a> () const </td></tr>
<tr class="separator:ab4aecf5370150176a5a148c27f1b1bcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00ac2170dba50d6ac7052a10adf6383"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae00ac2170dba50d6ac7052a10adf6383">get_snapshot_drop_volatile_pages_threshold</a> () const </td></tr>
<tr class="separator:ae00ac2170dba50d6ac7052a10adf6383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08fc6349a89f7505d5c139851859dbf3"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a> () const </td></tr>
<tr class="separator:a08fc6349a89f7505d5c139851859dbf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3cd53ce6ea97f63981defcb2f18f0b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a> () const </td></tr>
<tr class="separator:ae3cd53ce6ea97f63981defcb2f18f0b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae9ebd099ebba507d98b8df782bd143"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, bool for_write, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out) __attribute__((always_inline))</td></tr>
<tr class="separator:abae9ebd099ebba507d98b8df782bd143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac612c67d7e9e1a68dcccce98648cad0c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c">verify_single_thread</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context)</td></tr>
<tr class="separator:ac612c67d7e9e1a68dcccce98648cad0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b04cc1cb6c96c53d454d03836b85b70"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2b04cc1cb6c96c53d454d03836b85b70">verify_single_thread</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> *page)</td></tr>
<tr class="separator:a2b04cc1cb6c96c53d454d03836b85b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae271b3b08151601047c988dab64bcc0d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae271b3b08151601047c988dab64bcc0d">hcc_reset_all_temperature_stat</a> ()</td></tr>
<tr class="separator:ae271b3b08151601047c988dab64bcc0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3773cad90c4300f1b858c963df8054b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5">hcc_reset_all_temperature_stat_intermediate</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> intermediate_page_id)</td></tr>
<tr class="separator:a3773cad90c4300f1b858c963df8054b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf75cfe4ac8c4c5e1e8a32342b66d00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00">prefetch_pages</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, bool install_volatile, bool cache_snapshot, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> from, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> to)</td></tr>
<tr class="memdesc:adbf75cfe4ac8c4c5e1e8a32342b66d00"><td class="mdescLeft">&#160;</td><td class="mdescRight">defined in <a class="el" href="array__storage__prefetch_8cpp.html">array_storage_prefetch.cpp</a>  <a href="#adbf75cfe4ac8c4c5e1e8a32342b66d00">More...</a><br /></td></tr>
<tr class="separator:adbf75cfe4ac8c4c5e1e8a32342b66d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22fe9e661763ca3225eeedf7fa62879"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879">prefetch_pages_recurse</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, bool install_volatile, bool cache_snapshot, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> from, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> to, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> *page)</td></tr>
<tr class="separator:af22fe9e661763ca3225eeedf7fa62879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa649c9d971f17fa39848d4c1a1bcb50f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">locate_record_for_read</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **out, bool *snapshot_record) __attribute__((always_inline))</td></tr>
<tr class="separator:aa649c9d971f17fa39848d4c1a1bcb50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeff9d74f6979c888a0155e67466cf2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">locate_record_for_write</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **out) __attribute__((always_inline))</td></tr>
<tr class="separator:adeff9d74f6979c888a0155e67466cf2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9de7dd9ec971f2011cc84d72aa32521"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521">get_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, void *payload, uint16_t payload_offset, uint16_t payload_count) __attribute__((always_inline))</td></tr>
<tr class="separator:aa9de7dd9ec971f2011cc84d72aa32521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf449a053e85072d1236f47364b484d"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:abdf449a053e85072d1236f47364b484d"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d">get_record_primitive</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, T *payload, uint16_t payload_offset)</td></tr>
<tr class="separator:abdf449a053e85072d1236f47364b484d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b2486d4531522d5949034232e90f32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32">get_record_payload</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, const void **payload) __attribute__((always_inline))</td></tr>
<tr class="separator:a22b2486d4531522d5949034232e90f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3d0167bd2765ad6cea232fd999e9d5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f">get_record_for_write</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **record) __attribute__((always_inline))</td></tr>
<tr class="separator:ac3d0167bd2765ad6cea232fd999e9d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23cc3a8049590a9c4be3177ab9b5661b"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a23cc3a8049590a9c4be3177ab9b5661b"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b">get_record_primitive_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t payload_offset, uint16_t batch_size, const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *offset_batch, T *payload_batch) __attribute__((always_inline))</td></tr>
<tr class="separator:a23cc3a8049590a9c4be3177ab9b5661b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4373a9f195884ab885458e9c1a18ee7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7">get_record_payload_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *offset_batch, const void **payload_batch) __attribute__((always_inline))</td></tr>
<tr class="separator:ae4373a9f195884ab885458e9c1a18ee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4da0329b11bd50970765c7d4b1f669a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a">get_record_for_write_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *offset_batch, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **record_batch) __attribute__((always_inline))</td></tr>
<tr class="separator:ad4da0329b11bd50970765c7d4b1f669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d21cd23923f93d072a1a182cae6f412"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412">overwrite_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, const void *payload, uint16_t payload_offset, uint16_t payload_count) __attribute__((always_inline))</td></tr>
<tr class="separator:a7d21cd23923f93d072a1a182cae6f412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee9fdf4da9f172082841c1774a761da"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a3ee9fdf4da9f172082841c1774a761da"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da">overwrite_record_primitive</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, T payload, uint16_t payload_offset)</td></tr>
<tr class="separator:a3ee9fdf4da9f172082841c1774a761da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dde5581eee977242b5373e30365183f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7dde5581eee977242b5373e30365183f">overwrite_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> *record, const void *payload, uint16_t payload_offset, uint16_t payload_count) __attribute__((always_inline))</td></tr>
<tr class="separator:a7dde5581eee977242b5373e30365183f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d324da4dcd35490820cb97e7124001b"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a7d324da4dcd35490820cb97e7124001b"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d324da4dcd35490820cb97e7124001b">overwrite_record_primitive</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> *record, T payload, uint16_t payload_offset) __attribute__((always_inline))</td></tr>
<tr class="separator:a7d324da4dcd35490820cb97e7124001b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a435ff8b148161ca7296b12eea744a344"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a435ff8b148161ca7296b12eea744a344"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344">increment_record</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, T *value, uint16_t payload_offset)</td></tr>
<tr class="separator:a435ff8b148161ca7296b12eea744a344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af77ff710cf2f8ef3800e97861ea94e8f"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:af77ff710cf2f8ef3800e97861ea94e8f"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f">increment_record_oneshot</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, T value, uint16_t payload_offset)</td></tr>
<tr class="separator:af77ff710cf2f8ef3800e97861ea94e8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9205c706c8be3ad4f0c030a285d884"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884">lookup_for_read</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out, uint16_t *index, bool *snapshot_page) __attribute__((always_inline))</td></tr>
<tr class="separator:a7f9205c706c8be3ad4f0c030a285d884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10c44402ff1533f5fee533cc13119759"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759">lookup_for_write</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> offset, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out, uint16_t *index) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a10c44402ff1533f5fee533cc13119759"><td class="mdescLeft">&#160;</td><td class="mdescRight">This version always returns a volatile page, installing a new one if needed.  <a href="#a10c44402ff1533f5fee533cc13119759">More...</a><br /></td></tr>
<tr class="separator:a10c44402ff1533f5fee533cc13119759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617e3f91fe74f5215ae4f0081e30ab6d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d">locate_record_for_read_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *offset_batch, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **out_batch, bool *snapshot_page_batch)</td></tr>
<tr class="separator:a617e3f91fe74f5215ae4f0081e30ab6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a1e1fb54d44f15bc17c3f622f9f279"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279">lookup_for_read_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *offset_batch, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out_batch, uint16_t *index_batch, bool *snapshot_page_batch)</td></tr>
<tr class="separator:a86a1e1fb54d44f15bc17c3f622f9f279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77af2675acbbf1c831925b3a2c972aa6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6">lookup_for_write_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *offset_batch, <a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **record_batch)</td></tr>
<tr class="separator:a77af2675acbbf1c831925b3a2c972aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f40ca19aa9b9ac924542746e1b53c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1">follow_pointer</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, bool in_snapshot, bool for_write, <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *pointer, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out, const <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> *parent, uint16_t index_in_parent) __attribute__((always_inline))</td></tr>
<tr class="separator:ae0f40ca19aa9b9ac924542746e1b53c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71ccdf1742ae0e9a7119cc92fcac092"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092">follow_pointers_for_read_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, bool *in_snapshot, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **parents, const uint16_t *index_in_parents, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out)</td></tr>
<tr class="separator:ac71ccdf1742ae0e9a7119cc92fcac092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0c8eb92d19915b679137e594bdfae31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31">follow_pointers_for_write_batch</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, uint16_t batch_size, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **parents, const uint16_t *index_in_parents, <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **out)</td></tr>
<tr class="separator:ad0c8eb92d19915b679137e594bdfae31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ab46e3b46f500379b6da59949010d5f7a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab46e3b46f500379b6da59949010d5f7a">release_pages_recursive</a> (const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;resolver, <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *batch, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> volatile_page_id)</td></tr>
<tr class="memdesc:ab46e3b46f500379b6da59949010d5f7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used only from drop()  <a href="#ab46e3b46f500379b6da59949010d5f7a">More...</a><br /></td></tr>
<tr class="separator:ab46e3b46f500379b6da59949010d5f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5de4c5da717f48844ffa91b651c6432"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab5de4c5da717f48844ffa91b651c6432">calculate_required_pages</a> (uint64_t array_size, uint16_t payload)</td></tr>
<tr class="memdesc:ab5de4c5da717f48844ffa91b651c6432"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate leaf/interior pages we need.  <a href="#ab5de4c5da717f48844ffa91b651c6432">More...</a><br /></td></tr>
<tr class="separator:ab5de4c5da717f48844ffa91b651c6432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc600d09c3457af2ef136d45874c3f15"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adc600d09c3457af2ef136d45874c3f15">calculate_offset_intervals</a> (uint8_t levels, uint16_t payload)</td></tr>
<tr class="memdesc:adc600d09c3457af2ef136d45874c3f15"><td class="mdescLeft">&#160;</td><td class="mdescRight">The offset interval a single page represents in each level.  <a href="#adc600d09c3457af2ef136d45874c3f15">More...</a><br /></td></tr>
<tr class="separator:adc600d09c3457af2ef136d45874c3f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:adef3cec6748f0c981c99fd0b9803697c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a></td></tr>
<tr class="separator:adef3cec6748f0c981c99fd0b9803697c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c812340b903c36e872a38cc374d0842"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html">ArrayStorageControlBlock</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a></td></tr>
<tr class="separator:a8c812340b903c36e872a38cc374d0842"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a63053a4fd666359edd6351a43642238a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238a">foedus::storage::array::ArrayStoragePimpl::Constants</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"></a>kBatchMax&#160;</td><td class="fielddoc">
<p>If you want more than this, you should loop. </p>
<p><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html" title="Represents a key-value store based on a dense and regular array. ">ArrayStorage</a> should take care of it. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00090">90</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                 {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a> = 16,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  };</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adc5bf43cba5a55fd1647ff60c5733df4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::array::ArrayStoragePimpl::ArrayStoragePimpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a905e5848359ab90bb7584455a2201b36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::array::ArrayStoragePimpl::ArrayStoragePimpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html">ArrayStorage</a> *&#160;</td>
          <td class="paramname"><em>storage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00096">96</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    : <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>(storage-&gt;get_engine()), <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>(storage-&gt;get_control_block()) {}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adef3cec6748f0c981c99fd0b9803697c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">foedus::storage::array::ArrayStoragePimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00300">array_storage_pimpl.hpp:300</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a56d65ac2b8eb81927bc3479c2a779698"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::array::ArrayStoragePimpl::ArrayStoragePimpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html">ArrayStorageControlBlock</a> *&#160;</td>
          <td class="paramname"><em>control_block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00098">98</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    : <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>(engine), <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>(control_block) {}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adef3cec6748f0c981c99fd0b9803697c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">foedus::storage::array::ArrayStoragePimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00300">array_storage_pimpl.hpp:300</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a26e55e41fd5b5ffcdc55e172b07437a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::array::ArrayStoragePimpl::~ArrayStoragePimpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00101">101</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="adc600d09c3457af2ef136d45874c3f15"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; uint64_t &gt; foedus::storage::array::ArrayStoragePimpl::calculate_offset_intervals </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>levels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The offset interval a single page represents in each level. </p>
<p>index=level. So, offset_intervals[0] is the number of records in a leaf page. </p>

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00241">241</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="array__id_8hpp_source.html#l00100">foedus::storage::array::kDataSize</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, and <a class="el" href="record_8hpp_source.html#l00056">foedus::storage::kRecordOverhead</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">const</span> uint16_t payload_size_aligned = (<a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload));</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  std::vector&lt;uint64_t&gt; offset_intervals;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  offset_intervals.push_back(<a class="code" href="group__ARRAY.html#gaebdb3ffd25e0a56b4e04fc0f9c112409">kDataSize</a> / (payload_size_aligned + <a class="code" href="group__ARRAY.html#ga1fa71cb1954565848dbbb95d7027ece0">kRecordOverhead</a>));</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">for</span> (uint8_t level = 1; level &lt; levels; ++level) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    offset_intervals.push_back(offset_intervals[level - 1] * <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">return</span> offset_intervals;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="group__ARRAY_html_ga1fa71cb1954565848dbbb95d7027ece0"><div class="ttname"><a href="group__ARRAY.html#ga1fa71cb1954565848dbbb95d7027ece0">foedus::storage::kRecordOverhead</a></div><div class="ttdeci">const uint16_t kRecordOverhead</div><div class="ttdoc">Byte size of system-managed region per each record. </div><div class="ttdef"><b>Definition:</b> <a href="record_8hpp_source.html#l00056">record.hpp:56</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaebdb3ffd25e0a56b4e04fc0f9c112409"><div class="ttname"><a href="group__ARRAY.html#gaebdb3ffd25e0a56b4e04fc0f9c112409">foedus::storage::array::kDataSize</a></div><div class="ttdeci">const uint16_t kDataSize</div><div class="ttdoc">Byte size of data region in each page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00100">array_id.hpp:100</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adc600d09c3457af2ef136d45874c3f15_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adc600d09c3457af2ef136d45874c3f15_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adc600d09c3457af2ef136d45874c3f15_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adc600d09c3457af2ef136d45874c3f15_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="252,20,412,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab5de4c5da717f48844ffa91b651c6432"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; uint64_t &gt; foedus::storage::array::ArrayStoragePimpl::calculate_required_pages </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>array_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate leaf/interior pages we need. </p>
<dl class="section return"><dt>Returns</dt><dd>index=level. </dd></dl>

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00170">170</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assorted__func_8cpp_source.html#l00040">foedus::assorted::int_div_ceil()</a>, <a class="el" href="array__id_8hpp_source.html#l00100">foedus::storage::array::kDataSize</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, and <a class="el" href="record_8hpp_source.html#l00056">foedus::storage::kRecordOverhead</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                         {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  payload = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  uint64_t records_per_page = <a class="code" href="group__ARRAY.html#gaebdb3ffd25e0a56b4e04fc0f9c112409">kDataSize</a> / (payload + <a class="code" href="group__ARRAY.html#ga1fa71cb1954565848dbbb95d7027ece0">kRecordOverhead</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// so, how many leaf pages do we need?</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  uint64_t leaf_pages = <a class="code" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824">assorted::int_div_ceil</a>(array_size, records_per_page);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;We need &quot;</span> &lt;&lt; leaf_pages &lt;&lt; <span class="stringliteral">&quot; leaf pages&quot;</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// interior nodes</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  uint64_t total_pages = leaf_pages;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  std::vector&lt;uint64_t&gt; pages;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  pages.push_back(leaf_pages);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">while</span> (pages.back() != 1) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    uint64_t next_level_pages = <a class="code" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824">assorted::int_div_ceil</a>(pages.back(), <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Level-&quot;</span> &lt;&lt; pages.size() &lt;&lt; <span class="stringliteral">&quot; would have &quot;</span> &lt;&lt; next_level_pages &lt;&lt; <span class="stringliteral">&quot; pages&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    pages.push_back(next_level_pages);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    total_pages += next_level_pages;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;In total, we need &quot;</span> &lt;&lt; total_pages &lt;&lt; <span class="stringliteral">&quot; pages&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">return</span> pages;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="group__ARRAY_html_ga1fa71cb1954565848dbbb95d7027ece0"><div class="ttname"><a href="group__ARRAY.html#ga1fa71cb1954565848dbbb95d7027ece0">foedus::storage::kRecordOverhead</a></div><div class="ttdeci">const uint16_t kRecordOverhead</div><div class="ttdoc">Byte size of system-managed region per each record. </div><div class="ttdef"><b>Definition:</b> <a href="record_8hpp_source.html#l00056">record.hpp:56</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaebdb3ffd25e0a56b4e04fc0f9c112409"><div class="ttname"><a href="group__ARRAY.html#gaebdb3ffd25e0a56b4e04fc0f9c112409">foedus::storage::array::kDataSize</a></div><div class="ttdeci">const uint16_t kDataSize</div><div class="ttdoc">Byte size of data region in each page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00100">array_id.hpp:100</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gae2beea4717aef7ca9d43b91e48cf5824"><div class="ttname"><a href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824">foedus::assorted::int_div_ceil</a></div><div class="ttdeci">int64_t int_div_ceil(int64_t dividee, int64_t dividor)</div><div class="ttdoc">Efficient ceil(dividee/dividor) for integer. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8cpp_source.html#l00040">assorted_func.cpp:40</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab5de4c5da717f48844ffa91b651c6432_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab5de4c5da717f48844ffa91b651c6432_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab5de4c5da717f48844ffa91b651c6432_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab5de4c5da717f48844ffa91b651c6432_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="252,5,412,32"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824" title="Efficient ceil(dividee/dividor) for integer. " alt="" coords="262,57,402,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af6387df1cf86cecbbaba2c41635bbe7a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1Metadata.html">Metadata</a> &amp;&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00288">288</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">exists()</a>, <a class="el" href="metadata_8hpp_source.html#l00103">foedus::storage::Metadata::id_</a>, <a class="el" href="error__code_8hpp_source.html#l00168">foedus::kErrorCodeStrAlreadyExists</a>, <a class="el" href="storage__id_8hpp_source.html#l00158">foedus::storage::kExists</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">load_empty()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00061">foedus::storage::array::ArrayStorageControlBlock::meta_</a>, and <a class="el" href="array__storage__pimpl_8hpp_source.html#l00057">foedus::storage::array::ArrayStorageControlBlock::status_</a>.</p>

<p>Referenced by <a class="el" href="array__storage_8cpp_source.html#l00052">foedus::storage::array::ArrayStorage::create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                                             {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">exists</a>()) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;This array-storage already exists-&quot;</span> &lt;&lt; metadata.id_;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8">kErrorCodeStrAlreadyExists</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>ArrayMetadata&amp;<span class="keyword">&gt;</span>(metadata);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9">load_empty</a>());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Newly created an array-storage &quot;</span> &lt;&lt; metadata.id_;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a4cf75bc9f07e8a6cdac3d92b99bc3ddc">status_</a> = <a class="code" href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">kExists</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a4cf75bc9f07e8a6cdac3d92b99bc3ddc"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a4cf75bc9f07e8a6cdac3d92b99bc3ddc">foedus::storage::array::ArrayStorageControlBlock::status_</a></div><div class="ttdeci">StorageStatus status_</div><div class="ttdoc">Status of the storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00057">array_storage_pimpl.hpp:57</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="group__STORAGE_html_ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1"><div class="ttname"><a href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">foedus::storage::kExists</a></div><div class="ttdoc">The storage has been created and ready for use. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00158">storage_id.hpp:158</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af7175d943ce05a4fdca76d15638dac4e"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">foedus::storage::array::ArrayStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00109">array_storage_pimpl.hpp:109</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2a268a5d3e5e072d53a15ed554c9b2dc"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">foedus::storage::array::ArrayStorageControlBlock::meta_</a></div><div class="ttdeci">ArrayMetadata meta_</div><div class="ttdoc">metadata of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00061">array_storage_pimpl.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8">foedus::kErrorCodeStrAlreadyExists</a></div><div class="ttdoc">0x0802 : "STORAGE: This storage already exists" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00168">error_code.hpp:168</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a2bf1f0e04d213efe49f4e250968a60b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9">foedus::storage::array::ArrayStoragePimpl::load_empty</a></div><div class="ttdeci">ErrorStack load_empty()</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00254">array_storage_pimpl.cpp:254</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="252,276,435,317"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="236,461,451,503"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="514,147,694,203"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae" title="foedus::storage::array\l::calculate_levels" alt="" coords="530,527,678,568"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19" title="foedus::storage::array\l::LookupRouteFinder::get\l_records_in_leaf" alt="" coords="520,381,688,437"/>
<area shape="rect" id="node9" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="537,461,671,503"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="499,293,709,335"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="530,675,678,731"/>
<area shape="rect" id="node36" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="534,756,674,797"/>
<area shape="rect" id="node37" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="527,873,681,929"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="513,228,695,269"/>
<area shape="rect" id="node6" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1035,610,1195,637"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824" title="Efficient ceil(dividee/dividor) for integer. " alt="" coords="793,479,933,520"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="757,283,968,324"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="773,71,952,112"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="767,413,958,455"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="773,348,952,389"/>
<area shape="rect" id="node23" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="771,137,955,193"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="782,217,943,259"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="1026,71,1205,112"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="1026,348,1205,389"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="1263,381,1477,423"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1281,447,1459,488"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="1273,251,1467,292"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1281,316,1459,357"/>
<area shape="rect" id="node20" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1537,280,1729,321"/>
<area shape="rect" id="node21" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1525,229,1740,255"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="789,675,937,731"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1041,715,1189,756"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="789,595,937,651"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="767,857,958,899"/>
<area shape="rect" id="node35" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="785,806,940,833"/>
<area shape="rect" id="node30" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="1016,824,1215,865"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="1019,889,1211,931"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="1274,856,1466,897"/>
<area shape="rect" id="node33" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="1285,921,1455,963"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="1532,921,1733,963"/>
<area shape="rect" id="node38" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="775,923,950,979"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="762,5,963,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af6387df1cf86cecbbaba2c41635bbe7a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="236,5,387,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af7175d943ce05a4fdca76d15638dac4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::array::ArrayStoragePimpl::exists </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">109</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, and <a class="el" href="array__storage__pimpl_8hpp_source.html#l00053">foedus::storage::array::ArrayStorageControlBlock::exists()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00288">create()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5">exists</a>(); }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_aeca5199006d225457f33c70c09d508a5"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5">foedus::storage::array::ArrayStorageControlBlock::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00053">array_storage_pimpl.hpp:53</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="236,5,416,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af7175d943ce05a4fdca76d15638dac4e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="237,89,420,130"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="469,151,652,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="469,340,652,396"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="236,209,421,265"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="236,340,421,396"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="485,85,636,126"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="719,5,885,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="719,85,885,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="719,165,885,221"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="952,13,1127,54"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="952,85,1127,141"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="952,165,1127,221"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="719,245,885,301"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="703,325,901,381"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="703,405,901,461"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="700,485,904,541"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="700,565,904,621"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="952,245,1127,301"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="957,325,1121,381"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="957,405,1121,461"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="954,485,1125,541"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="954,565,1125,621"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae0f40ca19aa9b9ac924542746e1b53c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::follow_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>in_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>for_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>index_in_parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00304">304</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__page__impl_8cpp_source.html#l00078">foedus::storage::array::array_volatile_page_init()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00353">foedus::thread::Thread::follow_page_pointer()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00071">foedus::storage::array::ArrayPage::get_level()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, and <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                            {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!in_snapshot || !for_write);  <span class="comment">// if we are modifying, we must be in volatile world</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parent-&gt;is_leaf());</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;follow_page_pointer(</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91">array_volatile_page_init</a>,  <span class="comment">// array might have null pointer. in that case create empty new page</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">false</span>,  <span class="comment">// if both volatile/snapshot null, create a new volatile (logically all-zero)</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    for_write,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    !in_snapshot,  <span class="comment">// if we are already in snapshot world, no need to take more pointer set</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    pointer,</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    reinterpret_cast&lt;Page**&gt;(out),</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    reinterpret_cast&lt;const Page*&gt;(parent),</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    index_in_parent));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  ArrayPage* page = *out;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_level() + 1U == parent-&gt;get_level());</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">if</span> (page-&gt;is_leaf()) {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    xct::XctId xct_id = page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(xct_id.is_valid());</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="ttc" id="group__ARRAY_html_ga3b7fb001a1608242302069b8aa85eb91"><div class="ttname"><a href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91">foedus::storage::array::array_volatile_page_init</a></div><div class="ttdeci">void array_volatile_page_init(const VolatilePageInitArguments &amp;args)</div><div class="ttdoc">volatile page initialize callback for ArrayPage. </div><div class="ttdef"><b>Definition:</b> <a href="array__page__impl_8cpp_source.html#l00078">array_page_impl.cpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_cgraph">
<area shape="rect" id="node2" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="233,473,397,514"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="478,796,627,837"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="977,432,1125,473"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="239,889,390,930"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="232,1010,397,1066"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="253,1201,376,1242"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="471,374,635,416"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="457,440,649,481"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="453,505,652,546"/>
<area shape="rect" id="node6" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="487,570,619,612"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="477,636,628,677"/>
<area shape="rect" id="node8" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="475,98,630,154"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="445,178,660,220"/>
<area shape="rect" id="node12" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="483,244,623,285"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="461,309,645,350"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="479,702,627,758"/>
<area shape="rect" id="node9" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="716,98,891,154"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="729,490,877,546"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="729,570,877,626"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="708,650,899,692"/>
<area shape="rect" id="node22" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="726,716,881,743"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="971,532,1131,559"/>
<area shape="rect" id="node20" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="952,676,1151,717"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="955,610,1147,652"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="461,1078,645,1120"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1237,821,1399,862"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1751,1236,1901,1277"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1213,1488,1423,1529"/>
<area shape="rect" id="node31" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1226,1122,1410,1178"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1237,1056,1399,1097"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1504,938,1659,980"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="958,1021,1145,1062"/>
<area shape="rect" id="node38" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1217,1202,1419,1244"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="711,1137,895,1178"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="947,1370,1156,1412"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="734,1254,873,1296"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="733,1320,874,1361"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1745,877,1907,918"/>
<area shape="rect" id="node29" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1737,1513,1915,1554"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1492,1542,1671,1584"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1749,1040,1903,1081"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1731,942,1921,984"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="1204,938,1432,980"/>
<area shape="rect" id="node39" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1495,1152,1668,1193"/>
<area shape="rect" id="node40" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1480,1063,1683,1119"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="959,1138,1143,1194"/>
<area shape="rect" id="node43" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1251,1370,1385,1412"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="452,1144,653,1185"/>
<area shape="rect" id="node50" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="491,1209,614,1250"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae0f40ca19aa9b9ac924542746e1b53c1_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="232,165,417,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="232,325,417,381"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="465,125,648,181"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="715,5,881,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="715,85,881,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="715,165,881,221"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="948,13,1123,54"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="948,85,1123,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="948,165,1123,221"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="465,365,648,421"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="715,245,881,301"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="699,325,897,381"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="699,405,897,461"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="696,485,900,541"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="696,565,900,621"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="948,245,1123,301"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="953,325,1117,381"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="953,405,1117,461"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="950,485,1121,541"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="950,565,1121,621"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac71ccdf1742ae0e9a7119cc92fcac092"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::follow_pointers_for_read_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>in_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t *&#160;</td>
          <td class="paramname"><em>index_in_parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l01010">1010</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="array__page__impl_8cpp_source.html#l00078">foedus::storage::array::array_volatile_page_init()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00373">foedus::thread::Thread::follow_page_pointers_for_read_batch()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00071">foedus::storage::array::ArrayPage::get_level()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                   {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  DualPagePointer* pointers[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parents[i]-&gt;is_leaf());</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(in_snapshot[i] == parents[i]-&gt;header().snapshot_);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    pointers[i] = &amp;parents[i]-&gt;get_interior_record(index_in_parents[i]);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  }</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// there is a case of out==parents. for the assertion below, let&#39;s copy</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  ArrayPage* parents_copy[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    parents_copy[i] = parents[i];</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;follow_page_pointers_for_read_batch(</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    batch_size,</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91">array_volatile_page_init</a>,</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keyword">false</span>,</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    pointers,</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    reinterpret_cast&lt;Page**&gt;(parents),</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    index_in_parents,</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    in_snapshot,</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    reinterpret_cast&lt;Page**&gt;(out)));</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    ArrayPage* page = out[i];</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">    if ((uintptr_t)(page) == 0xdadadadadadadadaULL) {</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">      for (uint8_t j = 0; j &lt; batch_size; ++j) {</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">        in_snapshot[j] = parents_copy[j]-&gt;header().snapshot_;</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">      }</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">      CHECK_ERROR_CODE(context-&gt;follow_page_pointers_for_read_batch(</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">        batch_size,</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">        array_volatile_page_init,</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">        false,</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">        true,</span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">        pointers,</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">        reinterpret_cast&lt;Page**&gt;(parents_copy),</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">        index_in_parents,</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">        in_snapshot,</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">        reinterpret_cast&lt;Page**&gt;(out)));</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">    }</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(in_snapshot[i] == page-&gt;header().snapshot_);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_level() + 1U == parents_copy[i]-&gt;get_level());</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span> (page-&gt;is_leaf()) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      xct::XctId xct_id = page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(xct_id.is_valid());</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div>
<div class="ttc" id="group__ARRAY_html_ga3b7fb001a1608242302069b8aa85eb91"><div class="ttname"><a href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91">foedus::storage::array::array_volatile_page_init</a></div><div class="ttdeci">void array_volatile_page_init(const VolatilePageInitArguments &amp;args)</div><div class="ttdoc">volatile page initialize callback for ArrayPage. </div><div class="ttdef"><b>Definition:</b> <a href="array__page__impl_8cpp_source.html#l00078">array_page_impl.cpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_cgraph">
<area shape="rect" id="node2" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="233,377,397,419"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="478,691,627,732"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="739,610,887,666"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="996,683,1144,724"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="239,858,390,914"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="233,938,396,994"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="232,1018,397,1074"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="241,1099,389,1140"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="253,1176,376,1217"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="471,560,635,601"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="457,625,649,667"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="453,5,652,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="487,71,619,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="477,136,628,177"/>
<area shape="rect" id="node8" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="475,333,630,389"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="445,201,660,243"/>
<area shape="rect" id="node12" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="483,267,623,308"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="461,413,645,455"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="479,479,627,535"/>
<area shape="rect" id="node9" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="726,333,901,389"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="739,479,887,535"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="718,413,909,455"/>
<area shape="rect" id="node22" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="736,559,891,586"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="990,571,1150,598"/>
<area shape="rect" id="node20" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="971,453,1169,495"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="974,388,1166,429"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="461,1055,645,1111"/>
<area shape="rect" id="node25" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="744,1573,883,1615"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="989,968,1151,1009"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="721,1427,905,1483"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1459,1099,1609,1140"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="743,1004,884,1045"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="708,1508,919,1549"/>
<area shape="rect" id="node40" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="978,1157,1162,1213"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="989,903,1151,944"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1236,989,1391,1031"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="720,1069,907,1111"/>
<area shape="rect" id="node44" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="969,1040,1171,1081"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1453,960,1615,1001"/>
<area shape="rect" id="node29" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1003,1653,1137,1695"/>
<area shape="rect" id="node30" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131" title="Batched version of find(). " alt="" coords="967,1288,1173,1329"/>
<area shape="rect" id="node31" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1224,1360,1403,1401"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="978,1405,1162,1447"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1221,1451,1405,1492"/>
<area shape="rect" id="node35" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="967,1523,1173,1564"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="989,1588,1151,1629"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="981,1771,1159,1812"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="452,1136,653,1177"/>
<area shape="rect" id="node50" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="491,1201,614,1243"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac71ccdf1742ae0e9a7119cc92fcac092_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="232,45,417,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="465,45,648,101"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="696,5,861,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="696,85,861,141"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="909,5,1084,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="909,85,1084,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad0c8eb92d19915b679137e594bdfae31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::follow_pointers_for_write_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t *&#160;</td>
          <td class="paramname"><em>index_in_parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l01075">1075</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="array__page__impl_8cpp_source.html#l00078">foedus::storage::array::array_volatile_page_init()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00395">foedus::thread::Thread::follow_page_pointers_for_write_batch()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00071">foedus::storage::array::ArrayPage::get_level()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                   {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  DualPagePointer* pointers[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parents[i]-&gt;is_leaf());</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parents[i]-&gt;header().snapshot_);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    pointers[i] = &amp;parents[i]-&gt;get_interior_record(index_in_parents[i]);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">// there is a case of out==parents. for the assertion below, let&#39;s copy</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  ArrayPage* parents_copy[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    parents_copy[i] = parents[i];</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  }</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;follow_page_pointers_for_write_batch(</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    batch_size,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <a class="code" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91">array_volatile_page_init</a>,</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    pointers,</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    reinterpret_cast&lt;Page**&gt;(parents),</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    index_in_parents,</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    reinterpret_cast&lt;Page**&gt;(out)));</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    ArrayPage* page = out[i];</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!page-&gt;header().snapshot_);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_level() + 1U == parents_copy[i]-&gt;get_level());</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (page-&gt;is_leaf()) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      xct::XctId xct_id = page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(xct_id.is_valid());</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;}</div>
<div class="ttc" id="group__ARRAY_html_ga3b7fb001a1608242302069b8aa85eb91"><div class="ttname"><a href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91">foedus::storage::array::array_volatile_page_init</a></div><div class="ttdeci">void array_volatile_page_init(const VolatilePageInitArguments &amp;args)</div><div class="ttdoc">volatile page initialize callback for ArrayPage. </div><div class="ttdef"><b>Definition:</b> <a href="array__page__impl_8cpp_source.html#l00078">array_page_impl.cpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_cgraph">
<area shape="rect" id="node2" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="233,393,397,435"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="478,691,627,732"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="729,479,877,535"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="972,552,1120,593"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="239,858,390,914"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="233,938,396,994"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="232,1018,397,1074"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="241,1099,389,1140"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="253,1179,376,1220"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="471,429,635,471"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="457,495,649,536"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="453,560,652,601"/>
<area shape="rect" id="node6" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="487,625,619,667"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="477,5,628,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="475,71,630,127"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="445,152,660,193"/>
<area shape="rect" id="node12" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="483,217,623,259"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="461,283,645,324"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="479,349,627,405"/>
<area shape="rect" id="node9" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="716,71,891,127"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="729,349,877,405"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="708,283,899,324"/>
<area shape="rect" id="node23" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="726,429,881,455"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="966,441,1126,467"/>
<area shape="rect" id="node20" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="947,257,1145,299"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="950,323,1142,364"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="1211,323,1403,364"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="461,1063,645,1119"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1227,1384,1388,1425"/>
<area shape="rect" id="node28" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1206,1019,1409,1060"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1497,1267,1651,1308"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1747,985,1897,1027"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="711,1175,895,1216"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1202,1541,1413,1583"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1227,1449,1388,1491"/>
<area shape="rect" id="node42" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1215,1135,1399,1191"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="953,1233,1139,1275"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1741,1331,1903,1372"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1487,1069,1661,1111"/>
<area shape="rect" id="node34" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1473,1186,1675,1242"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1745,1197,1899,1239"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1727,1265,1917,1307"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1469,901,1679,943"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="954,1502,1138,1558"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1733,1541,1911,1583"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1485,1571,1663,1612"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="1193,1267,1421,1308"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="452,1144,653,1185"/>
<area shape="rect" id="node50" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="491,1209,614,1251"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad0c8eb92d19915b679137e594bdfae31_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="232,5,417,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="465,5,631,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="679,5,853,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae3cd53ce6ea97f63981defcb2f18f0b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> foedus::storage::array::ArrayStoragePimpl::get_array_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">117</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__metadata_8hpp_source.html#l00085">foedus::storage::array::ArrayMetadata::array_size_</a>, and <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>().<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a014a894093b06040134c15514d3601b9">array_size_</a>; }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a0611bafe6b93b9b860330375cb805fdc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">foedus::storage::array::ArrayStoragePimpl::get_meta</a></div><div class="ttdeci">const ArrayMetadata &amp; get_meta() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00110">array_storage_pimpl.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayMetadata_html_a014a894093b06040134c15514d3601b9"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a014a894093b06040134c15514d3601b9">foedus::storage::array::ArrayMetadata::array_size_</a></div><div class="ttdeci">ArrayOffset array_size_</div><div class="ttdoc">Size of this array. </div><div class="ttdef"><b>Definition:</b> <a href="array__metadata_8hpp_source.html#l00085">array_metadata.hpp:85</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="219,13,420,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae3cd53ce6ea97f63981defcb2f18f0b2_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="452,165,635,221"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="452,405,635,461"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="219,269,404,325"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="219,581,404,637"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="219,439,404,495"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="219,713,404,769"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="702,5,867,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="702,85,867,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="702,165,867,221"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="935,13,1109,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="935,85,1109,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="935,165,1109,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="702,245,867,301"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="686,325,883,381"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="686,405,883,461"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="683,485,887,541"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="683,565,887,621"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="935,245,1109,301"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="940,325,1104,381"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="940,405,1104,461"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="937,485,1107,541"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="937,565,1107,621"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="452,645,635,701"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="702,645,867,701"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="702,725,867,781"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="935,645,1109,701"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="935,725,1109,781"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="461,765,626,821"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="697,805,872,861"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a21a13b165bfe75387d21446ad8758c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> foedus::storage::array::ArrayStoragePimpl::get_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">111</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>, and <a class="el" href="metadata_8hpp_source.html#l00103">foedus::storage::Metadata::id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00486">increment_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00512">increment_record_oneshot()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">load_empty()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00449">overwrite_record()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00468">overwrite_record_primitive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>().<a class="code" href="structfoedus_1_1storage_1_1Metadata.html#a2187b39e4d71b81227dc6f09b0c711e8">id_</a>; }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a0611bafe6b93b9b860330375cb805fdc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">foedus::storage::array::ArrayStoragePimpl::get_meta</a></div><div class="ttdeci">const ArrayMetadata &amp; get_meta() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00110">array_storage_pimpl.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Metadata_html_a2187b39e4d71b81227dc6f09b0c711e8"><div class="ttname"><a href="structfoedus_1_1storage_1_1Metadata.html#a2187b39e4d71b81227dc6f09b0c711e8">foedus::storage::Metadata::id_</a></div><div class="ttdeci">StorageId id_</div><div class="ttdoc">the unique ID of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="metadata_8hpp_source.html#l00103">metadata.hpp:103</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="236,5,437,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a8a21a13b165bfe75387d21446ad8758c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="241,37,445,93"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="241,133,445,189"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="236,222,451,263"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="251,288,436,344"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="251,368,436,424"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7dde5581eee977242b5373e30365183f" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="245,448,442,504"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d324da4dcd35490820cb97e7124001b" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="245,528,442,584"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="505,5,675,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="505,85,675,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="499,166,681,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="505,231,675,273"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="741,166,892,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="743,231,891,273"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="499,297,681,353"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="734,297,899,353"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="734,377,899,433"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="952,297,1127,353"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="952,377,1127,433"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="507,417,673,473"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="729,457,904,513"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab4aecf5370150176a5a148c27f1b1bcc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::storage::array::ArrayStoragePimpl::get_levels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00112">112</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, and <a class="el" href="array__storage__pimpl_8hpp_source.html#l00067">foedus::storage::array::ArrayStorageControlBlock::levels_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aa42e734640c62a5f4dff4d28cc09887b">levels_</a>; }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_aa42e734640c62a5f4dff4d28cc09887b"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aa42e734640c62a5f4dff4d28cc09887b">foedus::storage::array::ArrayStorageControlBlock::levels_</a></div><div class="ttdeci">uint8_t levels_</div><div class="ttdoc">Number of levels. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00067">array_storage_pimpl.hpp:67</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab4aecf5370150176a5a148c27f1b1bcc_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab4aecf5370150176a5a148c27f1b1bcc_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab4aecf5370150176a5a148c27f1b1bcc_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab4aecf5370150176a5a148c27f1b1bcc_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="219,161,404,217"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="219,361,404,417"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="219,501,404,557"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="219,621,404,677"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="452,125,635,181"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="702,5,867,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="702,85,867,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="702,165,867,221"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="935,13,1109,54"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="935,85,1109,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="935,165,1109,221"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="452,325,635,381"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="702,245,867,301"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="702,325,867,381"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="935,245,1109,301"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="935,325,1109,381"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="452,531,635,587"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="702,405,867,461"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="686,485,883,541"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="686,565,883,621"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="683,645,887,701"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="683,725,887,781"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="935,405,1109,461"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="940,485,1104,541"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="940,565,1104,621"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="937,645,1107,701"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="937,725,1107,781"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="461,691,626,747"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="697,805,872,861"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0611bafe6b93b9b860330375cb805fdc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html">ArrayMetadata</a>&amp; foedus::storage::array::ArrayStoragePimpl::get_meta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">110</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, and <a class="el" href="array__storage__pimpl_8hpp_source.html#l00061">foedus::storage::array::ArrayStorageControlBlock::meta_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00113">get_snapshot_drop_volatile_pages_threshold()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">load()</a>, and <a class="el" href="array__storage__prefetch_8cpp_source.html#l00031">prefetch_pages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a>; }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2a268a5d3e5e072d53a15ed554c9b2dc"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">foedus::storage::array::ArrayStorageControlBlock::meta_</a></div><div class="ttdeci">ArrayMetadata meta_</div><div class="ttdoc">metadata of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00061">array_storage_pimpl.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a0611bafe6b93b9b860330375cb805fdc_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a0611bafe6b93b9b860330375cb805fdc_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a0611bafe6b93b9b860330375cb805fdc_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a0611bafe6b93b9b860330375cb805fdc_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="556,183,721,239"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="547,1086,730,1127"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="1057,1330,1227,1371"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="289,611,455,667"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae00ac2170dba50d6ac7052a10adf6383" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_snapshot_drop_volatile\l_pages_threshold" alt="" coords="289,1439,455,1510"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="255,1534,489,1575"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="1051,277,1233,333"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="1051,628,1233,684"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="803,284,988,340"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="803,879,988,935"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="803,415,988,471"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="803,52,988,108"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1301,349,1466,405"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1301,440,1466,496"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1301,269,1466,325"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1533,357,1708,398"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1533,440,1708,496"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1533,269,1708,325"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1301,611,1466,667"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="1285,531,1482,587"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="1285,691,1482,747"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1281,771,1485,827"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="1281,851,1485,907"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1533,611,1708,667"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="1539,531,1703,587"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="1539,691,1703,747"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1535,771,1706,827"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="1535,851,1706,907"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="1051,980,1233,1036"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1301,1020,1466,1076"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1301,940,1466,996"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1533,1020,1708,1076"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1533,940,1708,996"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1059,52,1225,108"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1296,52,1471,108"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="788,1111,1003,1153"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7dde5581eee977242b5373e30365183f" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="797,1177,994,1233"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d324da4dcd35490820cb97e7124001b" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="797,1257,994,1313"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="1051,1111,1233,1153"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="1308,1111,1459,1153"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="1309,1330,1457,1371"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="549,313,728,369"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2b04cc1cb6c96c53d454d03836b85b70" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="551,545,727,601"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="549,929,728,985"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="549,52,728,108"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="537,1534,740,1575"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a08fc6349a89f7505d5c139851859dbf3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::storage::array::ArrayStoragePimpl::get_payload_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">116</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>, and <a class="el" href="array__metadata_8hpp_source.html#l00074">foedus::storage::array::ArrayMetadata::payload_size_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8hpp_source.html#l00304">follow_pointer()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l01010">follow_pointers_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l01075">follow_pointers_for_write_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00372">get_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00388">get_record_primitive()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00486">increment_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00512">increment_record_oneshot()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">load()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00767">locate_record_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00432">overwrite_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00441">overwrite_record_primitive()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00937">verify_single_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>().<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a49bf71a70d9a9621d2e339d3fad0634b">payload_size_</a>; }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a0611bafe6b93b9b860330375cb805fdc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">foedus::storage::array::ArrayStoragePimpl::get_meta</a></div><div class="ttdeci">const ArrayMetadata &amp; get_meta() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00110">array_storage_pimpl.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayMetadata_html_a49bf71a70d9a9621d2e339d3fad0634b"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a49bf71a70d9a9621d2e339d3fad0634b">foedus::storage::array::ArrayMetadata::payload_size_</a></div><div class="ttdeci">uint16_t payload_size_</div><div class="ttdoc">byte size of one record in this array storage without internal overheads </div><div class="ttdef"><b>Definition:</b> <a href="array__metadata_8hpp_source.html#l00074">array_metadata.hpp:74</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="219,13,420,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a08fc6349a89f7505d5c139851859dbf3_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="219,336,397,392"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="445,154,631,210"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="679,122,861,178"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="929,40,1094,96"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="929,204,1094,260"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="445,437,631,493"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="679,448,861,504"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="913,288,1110,344"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="913,368,1110,424"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="909,528,1113,584"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="909,608,1113,664"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="219,770,397,826"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="445,720,631,776"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="679,702,861,758"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="219,901,397,957"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="445,873,631,929"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="223,982,393,1023"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2b04cc1cb6c96c53d454d03836b85b70" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="220,1048,396,1104"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="929,122,1094,178"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1161,47,1336,88"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1161,204,1336,260"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1161,122,1336,178"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="929,448,1094,504"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1161,448,1336,504"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="1167,288,1331,344"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="1167,368,1331,424"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1163,528,1334,584"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="1163,608,1334,664"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="929,774,1094,830"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="929,694,1094,750"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1161,774,1336,830"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1161,694,1336,750"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="687,873,853,929"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="924,873,1099,929"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="464,982,612,1023"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa9de7dd9ec971f2011cc84d72aa32521"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00372">372</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00070">foedus::storage::array::ArrayStorage::get_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                          {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_offset + payload_count &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordtype">bool</span> snapshot_record;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">locate_record_for_read</a>(context, offset, &amp;record, &amp;snapshot_record));</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;get_current_xct().on_record_read(<span class="keyword">false</span>, &amp;record-&gt;owner_id_));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  std::memcpy(payload, record-&gt;payload_ + payload_offset, payload_count);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_aa649c9d971f17fa39848d4c1a1bcb50f"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">foedus::storage::array::ArrayStoragePimpl::locate_record_for_read</a></div><div class="ttdeci">ErrorCode locate_record_for_read(thread::Thread *context, ArrayOffset offset, Record **out, bool *snapshot_record) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00337">array_storage_pimpl.cpp:337</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="235,5,385,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="961,305,1126,361"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="219,498,401,554"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="243,2248,377,2289"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1181,280,1383,321"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="703,1172,885,1213"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="711,239,877,295"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="449,639,635,695"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="698,173,890,215"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="717,975,871,1016"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="969,825,1117,867"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="982,916,1105,957"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="720,1041,868,1097"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="953,1161,1133,1217"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="711,421,877,477"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="711,501,877,557"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="691,581,897,623"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="720,647,868,688"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="713,713,875,769"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="705,793,883,849"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1221,916,1343,957"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="963,1055,1123,1082"/>
<area shape="rect" id="node24" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1199,2490,1365,2517"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1207,2385,1357,2427"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="481,2565,603,2607"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="455,2631,629,2672"/>
<area shape="rect" id="node28" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1195,2615,1369,2656"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="719,1342,869,1398"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="707,2451,881,2492"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1431,1648,1624,1689"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1447,2128,1608,2169"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1201,2081,1363,2123"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="459,1762,625,1818"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="455,2216,629,2257"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="481,2281,603,2323"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="481,2347,603,2388"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="471,1388,613,1429"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="966,2443,1121,2499"/>
<area shape="rect" id="node36" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="971,1452,1116,1493"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="708,1867,880,1908"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="708,1932,880,1973"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="708,1997,880,2039"/>
<area shape="rect" id="node40" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="968,2048,1119,2089"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="712,1423,876,1464"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="712,1540,876,1581"/>
<area shape="rect" id="node43" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="717,1605,871,1647"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="692,1671,896,1712"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="683,1736,905,1777"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="706,1801,882,1843"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa9de7dd9ec971f2011cc84d72aa32521_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="219,13,393,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac3d0167bd2765ad6cea232fd999e9d5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record_for_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **&#160;</td>
          <td class="paramname"><em>record</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00419">419</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="xct__id_8hpp_source.html#l00065">foedus::xct::kDirtyRead</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>, and <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00089">foedus::storage::array::ArrayStorage::get_record_for_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                   {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">locate_record_for_write</a>(context, offset, record));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  xct::Xct&amp; current_xct = context-&gt;get_current_xct();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">if</span> (current_xct.get_isolation_level() != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">xct::kDirtyRead</a>) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(current_xct.on_record_read(<span class="keyword">true</span>, &amp;(*record)-&gt;owner_id_));</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adeff9d74f6979c888a0155e67466cf2a"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">foedus::storage::array::ArrayStoragePimpl::locate_record_for_write</a></div><div class="ttdeci">ErrorCode locate_record_for_write(thread::Thread *context, ArrayOffset offset, Record **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00355">array_storage_pimpl.cpp:355</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="235,663,385,704"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="241,728,379,770"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="219,794,401,850"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="243,1822,377,1863"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="703,1046,885,1087"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="711,885,877,941"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="449,536,635,592"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="698,112,890,154"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="717,47,871,88"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="961,706,1126,762"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="969,807,1117,848"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="982,171,1105,212"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="720,965,868,1021"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="953,1034,1133,1090"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1181,796,1383,838"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="711,389,877,445"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="720,470,868,511"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="711,536,877,592"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="691,616,897,658"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="705,229,883,285"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="713,309,875,365"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1221,171,1343,212"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="963,980,1123,1006"/>
<area shape="rect" id="node25" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1199,2025,1365,2052"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1207,2080,1357,2122"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="481,2255,603,2296"/>
<area shape="rect" id="node28" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="455,1048,629,1090"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1195,2171,1369,2212"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="719,1266,869,1322"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="707,2080,881,2122"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1431,1611,1624,1652"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1447,1192,1608,1234"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1201,1222,1363,1263"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="459,1652,625,1708"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="455,1906,629,1947"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="481,1971,603,2012"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="481,2036,603,2078"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="471,1296,613,1338"/>
<area shape="rect" id="node32" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="966,2073,1121,2129"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="971,1278,1116,1319"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="708,1659,880,1700"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="708,1724,880,1766"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="708,1790,880,1831"/>
<area shape="rect" id="node41" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="968,1906,1119,1947"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="712,1398,876,1439"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="712,1855,876,1896"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="717,1463,871,1504"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="692,1528,896,1570"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="683,1594,905,1635"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac3d0167bd2765ad6cea232fd999e9d5f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="219,5,393,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad4da0329b11bd50970765c7d4b1f669a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record_for_write_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *&#160;</td>
          <td class="paramname"><em>offset_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **&#160;</td>
          <td class="paramname"><em>record_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00746">746</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="xct__id_8hpp_source.html#l00065">foedus::xct::kDirtyRead</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00081">foedus::assorted::memory_fence_consume()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, and <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00655">foedus::storage::array::ArrayStorage::get_record_for_write_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                         {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6">lookup_for_write_batch</a>(</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    context,</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    batch_size,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    offset_batch,</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    record_batch));</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  xct::Xct&amp; current_xct = context-&gt;get_current_xct();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (current_xct.get_isolation_level() != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">xct::kDirtyRead</a>) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(current_xct.on_record_read(<span class="keyword">true</span>, &amp;record_batch[i]-&gt;owner_id_));</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f">assorted::memory_fence_consume</a>();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a77af2675acbbf1c831925b3a2c972aa6"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6">foedus::storage::array::ArrayStoragePimpl::lookup_for_write_batch</a></div><div class="ttdeci">ErrorCode lookup_for_write_batch(thread::Thread *context, uint16_t batch_size, const ArrayOffset *offset_batch, Record **record_batch)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00864">array_storage_pimpl.cpp:864</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga641117f56315b0f239d72948cf5aa56f"><div class="ttname"><a href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f">foedus::assorted::memory_fence_consume</a></div><div class="ttdeci">void memory_fence_consume()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_consume). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00081">atomic_fences.hpp:81</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="236,293,387,335"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="242,359,381,400"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="219,425,404,481"/>
<area shape="rect" id="node26" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="225,1556,398,1597"/>
<area shape="rect" id="node27" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="244,1491,379,1532"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="473,137,638,193"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="721,304,869,345"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="473,646,638,702"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="713,370,878,426"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="473,217,638,273"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="452,5,659,47"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="469,71,641,112"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="721,450,869,506"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="714,843,877,899"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="466,515,645,571"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="464,297,647,339"/>
<area shape="rect" id="node25" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1181,1753,1355,1795"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="720,136,871,177"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="932,245,1133,287"/>
<area shape="rect" id="node13" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="707,5,884,47"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="953,465,1113,491"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="959,520,1107,561"/>
<area shape="rect" id="node20" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="713,777,877,819"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="958,681,1107,723"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="720,631,871,687"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="734,712,857,753"/>
<area shape="rect" id="node28" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1185,1874,1351,1901"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1193,1316,1343,1357"/>
<area shape="rect" id="node30" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="494,1600,617,1641"/>
<area shape="rect" id="node31" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="469,1665,642,1707"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="720,1126,871,1182"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="708,1753,883,1795"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1403,987,1596,1028"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1419,1476,1580,1517"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1187,1056,1349,1097"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="472,1367,639,1423"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="469,1731,642,1772"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="494,1796,617,1837"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="494,1861,617,1903"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="485,1163,626,1204"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="955,1746,1110,1802"/>
<area shape="rect" id="node39" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="960,1137,1105,1179"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="709,1375,881,1416"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="709,1440,881,1481"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="709,1505,881,1547"/>
<area shape="rect" id="node43" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="957,1316,1108,1357"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="713,1257,877,1299"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="713,1571,877,1612"/>
<area shape="rect" id="node46" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="719,1636,872,1677"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ad4da0329b11bd50970765c7d4b1f669a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="219,5,393,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a22b2486d4531522d5949034232e90f32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00403">403</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="xct__id_8hpp_source.html#l00065">foedus::xct::kDirtyRead</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00082">foedus::storage::array::ArrayStorage::get_record_payload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                        {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordtype">bool</span> snapshot_record;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">locate_record_for_read</a>(context, offset, &amp;record, &amp;snapshot_record));</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  xct::Xct&amp; current_xct = context-&gt;get_current_xct();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span> (!snapshot_record &amp;&amp;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    current_xct.get_isolation_level() != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">xct::kDirtyRead</a>) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(current_xct.on_record_read(<span class="keyword">false</span>, &amp;record-&gt;owner_id_));</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  *payload = record-&gt;payload_;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_aa649c9d971f17fa39848d4c1a1bcb50f"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">foedus::storage::array::ArrayStoragePimpl::locate_record_for_read</a></div><div class="ttdeci">ErrorCode locate_record_for_read(thread::Thread *context, ArrayOffset offset, Record **out, bool *snapshot_record) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00337">array_storage_pimpl.cpp:337</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="235,566,385,607"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="241,631,379,673"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="219,697,401,753"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="243,1865,377,1906"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="703,1054,885,1095"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="711,5,877,61"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="449,537,635,593"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="698,137,890,178"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="717,202,871,243"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="961,208,1126,264"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="969,865,1117,906"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="982,749,1105,790"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="720,973,868,1029"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="953,1047,1133,1103"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1181,138,1383,179"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="711,319,877,375"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="711,399,877,455"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="691,479,897,521"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="720,545,868,586"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="713,611,875,667"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="705,741,883,797"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1221,749,1343,790"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="963,988,1123,1015"/>
<area shape="rect" id="node25" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1199,2035,1365,2061"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1207,2123,1357,2165"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="481,2298,603,2339"/>
<area shape="rect" id="node28" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="455,1075,629,1117"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1195,2214,1369,2255"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="719,1293,869,1349"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="707,2123,881,2165"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1431,1611,1624,1653"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1447,1217,1608,1258"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1201,1249,1363,1290"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="459,1679,625,1735"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="455,1949,629,1990"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="481,2014,603,2055"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="481,2079,603,2121"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="471,1323,613,1365"/>
<area shape="rect" id="node32" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="966,2116,1121,2172"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="971,1305,1116,1346"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="708,1686,880,1727"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="708,1751,880,1793"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="708,1817,880,1858"/>
<area shape="rect" id="node41" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="968,2050,1119,2091"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="712,1425,876,1466"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="712,1882,876,1923"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="717,1490,871,1531"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="692,1555,896,1597"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="683,1621,905,1662"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a22b2486d4531522d5949034232e90f32_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="219,5,393,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae4373a9f195884ab885458e9c1a18ee7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record_payload_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *&#160;</td>
          <td class="paramname"><em>offset_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void **&#160;</td>
          <td class="paramname"><em>payload_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00717">717</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="xct__id_8hpp_source.html#l00065">foedus::xct::kDirtyRead</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00767">locate_record_for_read_batch()</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00081">foedus::assorted::memory_fence_consume()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00634">foedus::storage::array::ArrayStorage::get_record_payload_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                              {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  Record* record_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordtype">bool</span> snapshot_record_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d">locate_record_for_read_batch</a>(</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    context,</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    batch_size,</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    offset_batch,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    record_batch,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    snapshot_record_batch));</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  xct::Xct&amp; current_xct = context-&gt;get_current_xct();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">if</span> (current_xct.get_isolation_level() != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">xct::kDirtyRead</a>) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (!snapshot_record_batch[i]) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(current_xct.on_record_read(<span class="keyword">false</span>, &amp;record_batch[i]-&gt;owner_id_));</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f">assorted::memory_fence_consume</a>();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    payload_batch[i] = record_batch[i]-&gt;payload_;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  }</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a617e3f91fe74f5215ae4f0081e30ab6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d">foedus::storage::array::ArrayStoragePimpl::locate_record_for_read_batch</a></div><div class="ttdeci">ErrorCode locate_record_for_read_batch(thread::Thread *context, uint16_t batch_size, const ArrayOffset *offset_batch, Record **out_batch, bool *snapshot_page_batch)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00767">array_storage_pimpl.cpp:767</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga641117f56315b0f239d72948cf5aa56f"><div class="ttname"><a href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f">foedus::assorted::memory_fence_consume</a></div><div class="ttdeci">void memory_fence_consume()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_consume). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00081">atomic_fences.hpp:81</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="235,652,385,694"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="241,718,379,759"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="219,784,401,840"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="223,1311,397,1352"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="243,1246,377,1287"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="449,468,635,524"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="962,682,1127,738"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="971,13,1119,69"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="711,356,877,412"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="711,436,877,492"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="971,367,1119,408"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="962,602,1127,658"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="691,224,897,266"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="708,290,880,331"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="963,93,1126,149"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="705,144,883,200"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="953,763,1136,804"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1198,1238,1371,1279"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="694,566,894,622"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1184,690,1385,731"/>
<area shape="rect" id="node15" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1205,28,1365,54"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1211,123,1359,164"/>
<area shape="rect" id="node24" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1202,1333,1367,1360"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1210,2286,1359,2327"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="481,926,603,967"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="455,991,629,1032"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="719,1514,869,1570"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="707,1347,881,1388"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1433,1723,1627,1764"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1449,1232,1611,1274"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1203,1478,1366,1519"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="459,1836,625,1892"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="455,1056,629,1098"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="481,1122,603,1163"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="481,1187,603,1228"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="471,1463,613,1504"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="967,1346,1122,1402"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="972,1536,1117,1578"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="708,1778,880,1819"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="708,1843,880,1884"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="708,1908,880,1950"/>
<area shape="rect" id="node39" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="969,2286,1120,2327"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="712,1595,876,1636"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="712,1974,876,2015"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="717,2039,871,2080"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="692,2104,896,2146"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="683,2170,905,2211"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="706,2235,882,2276"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846" title="foedus::xct::Retrospective\lLockList::clear_entries" alt="" coords="708,1712,880,1754"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae4373a9f195884ab885458e9c1a18ee7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="219,5,393,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abdf449a053e85072d1236f47364b484d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record_primitive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00388">388</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00077">foedus::storage::array::ArrayStorage::get_record_primitive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                           {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_offset + <span class="keyword">sizeof</span>(T) &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordtype">bool</span> snapshot_record;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">locate_record_for_read</a>(context, offset, &amp;record, &amp;snapshot_record));</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;get_current_xct().on_record_read(<span class="keyword">false</span>, &amp;record-&gt;owner_id_));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keywordtype">char</span>* ptr = record-&gt;payload_ + payload_offset;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  *payload = *<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(ptr);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_aa649c9d971f17fa39848d4c1a1bcb50f"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f">foedus::storage::array::ArrayStoragePimpl::locate_record_for_read</a></div><div class="ttdeci">ErrorCode locate_record_for_read(thread::Thread *context, ArrayOffset offset, Record **out, bool *snapshot_record) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00337">array_storage_pimpl.cpp:337</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="235,5,385,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="961,305,1126,361"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="219,498,401,554"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="243,2248,377,2289"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1181,280,1383,321"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="703,1172,885,1213"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="711,239,877,295"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="449,639,635,695"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="698,173,890,215"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="717,975,871,1016"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="969,825,1117,867"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="982,916,1105,957"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="720,1041,868,1097"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="953,1161,1133,1217"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="711,421,877,477"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="711,501,877,557"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="691,581,897,623"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="720,647,868,688"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="713,713,875,769"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="705,793,883,849"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1221,916,1343,957"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="963,1055,1123,1082"/>
<area shape="rect" id="node24" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1199,2490,1365,2517"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1207,2385,1357,2427"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="481,2565,603,2607"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="455,2631,629,2672"/>
<area shape="rect" id="node28" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1195,2615,1369,2656"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="719,1342,869,1398"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="707,2451,881,2492"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1431,1648,1624,1689"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1447,2128,1608,2169"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1201,2081,1363,2123"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="459,1762,625,1818"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="455,2216,629,2257"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="481,2281,603,2323"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="481,2347,603,2388"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="471,1388,613,1429"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="966,2443,1121,2499"/>
<area shape="rect" id="node36" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="971,1452,1116,1493"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="708,1867,880,1908"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="708,1932,880,1973"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="708,1997,880,2039"/>
<area shape="rect" id="node40" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="968,2048,1119,2089"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="712,1423,876,1464"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="712,1540,876,1581"/>
<area shape="rect" id="node43" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="717,1605,871,1647"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="692,1671,896,1712"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="683,1736,905,1777"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="706,1801,882,1843"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abdf449a053e85072d1236f47364b484d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="219,5,393,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a23cc3a8049590a9c4be3177ab9b5661b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_record_primitive_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *&#160;</td>
          <td class="paramname"><em>offset_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>payload_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00678">678</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="xct__id_8hpp_source.html#l00065">foedus::xct::kDirtyRead</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="record_8hpp_source.html#l00056">foedus::storage::kRecordOverhead</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00767">locate_record_for_read_batch()</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00081">foedus::assorted::memory_fence_consume()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>, and <a class="el" href="cacheline_8hpp_source.html#l00049">foedus::assorted::prefetch_cacheline()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00611">foedus::storage::array::ArrayStorage::get_record_primitive_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                    {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  Record* record_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">bool</span> snapshot_record_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d">locate_record_for_read_batch</a>(</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    context,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    batch_size,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    offset_batch,</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    record_batch,</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    snapshot_record_batch));</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  xct::Xct&amp; current_xct = context-&gt;get_current_xct();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (current_xct.get_isolation_level() != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">xct::kDirtyRead</a>) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="keywordflow">if</span> (!snapshot_record_batch[i]) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(current_xct.on_record_read(<span class="keyword">false</span>, &amp;record_batch[i]-&gt;owner_id_));</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f">assorted::memory_fence_consume</a>();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// we anyway prefetched the first 64 bytes. if the column is not within there,</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// let&#39;s do parallel prefetch</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">if</span> (payload_offset + <span class="keyword">sizeof</span>(T) + <a class="code" href="group__ARRAY.html#ga1fa71cb1954565848dbbb95d7027ece0">kRecordOverhead</a> &gt; 64) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(record_batch[i]-&gt;payload_ + payload_offset);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordtype">char</span>* ptr = record_batch[i]-&gt;payload_ + payload_offset;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    payload_batch[i] = *<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(ptr);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a617e3f91fe74f5215ae4f0081e30ab6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d">foedus::storage::array::ArrayStoragePimpl::locate_record_for_read_batch</a></div><div class="ttdeci">ErrorCode locate_record_for_read_batch(thread::Thread *context, uint16_t batch_size, const ArrayOffset *offset_batch, Record **out_batch, bool *snapshot_page_batch)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00767">array_storage_pimpl.cpp:767</a></div></div>
<div class="ttc" id="group__ARRAY_html_ga1fa71cb1954565848dbbb95d7027ece0"><div class="ttname"><a href="group__ARRAY.html#ga1fa71cb1954565848dbbb95d7027ece0">foedus::storage::kRecordOverhead</a></div><div class="ttdeci">const uint16_t kRecordOverhead</div><div class="ttdoc">Byte size of system-managed region per each record. </div><div class="ttdef"><b>Definition:</b> <a href="record_8hpp_source.html#l00056">record.hpp:56</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga354bfce84ebf918859d54ba97b8ddc36"><div class="ttname"><a href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">foedus::assorted::prefetch_cacheline</a></div><div class="ttdeci">void prefetch_cacheline(const void *address)</div><div class="ttdoc">Prefetch one cacheline to L1 cache. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00049">cacheline.hpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga641117f56315b0f239d72948cf5aa56f"><div class="ttname"><a href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f">foedus::assorted::memory_fence_consume</a></div><div class="ttdeci">void memory_fence_consume()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_consume). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00081">atomic_fences.hpp:81</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="235,639,385,681"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="241,705,379,746"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="219,771,401,827"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="708,785,880,826"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga641117f56315b0f239d72948cf5aa56f" title="Equivalent to std::atomic_thread_fence(std::memory_order_consume). " alt="" coords="223,902,397,943"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="243,1266,377,1307"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="449,432,635,488"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="962,5,1127,61"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="971,651,1119,707"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="711,552,877,608"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="711,195,877,251"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="971,303,1119,345"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="962,152,1127,208"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="691,326,897,367"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="963,505,1126,561"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="705,392,883,448"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="953,86,1136,127"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1198,1011,1371,1053"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="694,472,894,528"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1184,86,1385,127"/>
<area shape="rect" id="node15" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1205,665,1365,692"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1211,507,1359,549"/>
<area shape="rect" id="node24" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1202,1107,1367,1133"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1210,1193,1359,1234"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="481,1171,603,1213"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="455,1237,629,1278"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="719,1247,869,1303"/>
<area shape="rect" id="node29" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="707,1127,881,1169"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1433,2034,1627,2075"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1449,2125,1611,2166"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1203,2037,1366,2078"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="459,1552,625,1608"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="455,2235,629,2277"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="481,2301,603,2342"/>
<area shape="rect" id="node49" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="481,953,603,994"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="471,1850,613,1891"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="967,1120,1122,1176"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="972,2010,1117,2051"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="708,1821,880,1862"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="708,1886,880,1927"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="708,2017,880,2058"/>
<area shape="rect" id="node39" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="969,1286,1120,1327"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="712,1951,876,1993"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="712,1429,876,1470"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="717,1494,871,1535"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="692,1559,896,1601"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="683,1625,905,1666"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="706,1690,882,1731"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846" title="foedus::xct::Retrospective\lLockList::clear_entries" alt="" coords="708,1755,880,1797"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a23cc3a8049590a9c4be3177ab9b5661b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="219,5,393,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abae9ebd099ebba507d98b8df782bd143"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::get_root_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>for_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">337</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00353">foedus::thread::Thread::follow_page_pointer()</a>, and <a class="el" href="array__storage__pimpl_8hpp_source.html#l00059">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>, <a class="el" href="array__storage__prefetch_8cpp_source.html#l00031">prefetch_pages()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00932">verify_single_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                   {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordflow">return</span> context-&gt;follow_page_pointer(</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">false</span>,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    for_write,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    &amp;<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    reinterpret_cast&lt;Page**&gt;(out),</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    0);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_af464bf7872b0ffe1180593ca912164a6"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a></div><div class="ttdeci">DualPagePointer root_page_pointer_</div><div class="ttdoc">Points to the root page (or something equivalent). </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00059">array_storage_pimpl.hpp:59</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="219,478,369,519"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="417,478,601,519"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1163,270,1325,311"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1709,417,1858,458"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1139,685,1349,726"/>
<area shape="rect" id="node10" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1152,387,1336,443"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1163,619,1325,661"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1441,151,1596,193"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="893,478,1079,519"/>
<area shape="rect" id="node19" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1143,65,1345,106"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="649,507,833,549"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="881,919,1091,961"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="672,827,811,869"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="671,893,812,934"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1703,270,1864,311"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1937,823,2116,865"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1694,823,1873,865"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1706,50,1861,91"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1688,151,1879,193"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="1405,619,1633,661"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1937,630,2116,671"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="1694,630,1873,671"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1432,86,1605,127"/>
<area shape="rect" id="node21" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1417,5,1620,61"/>
<area shape="rect" id="node48" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="894,595,1078,651"/>
<area shape="rect" id="node24" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1177,1157,1311,1198"/>
<area shape="rect" id="node25" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="1141,1342,1347,1383"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1429,853,1608,894"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="1152,886,1336,927"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1427,983,1611,1025"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="1141,1091,1347,1133"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="1163,951,1325,993"/>
<area shape="rect" id="node26" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="1415,1245,1622,1286"/>
<area shape="rect" id="node28" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="1424,1310,1613,1351"/>
<area shape="rect" id="node29" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="1415,1375,1622,1417"/>
<area shape="rect" id="node30" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="1433,1179,1604,1221"/>
<area shape="rect" id="node31" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="1424,1441,1613,1482"/>
<area shape="rect" id="node32" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="1418,1506,1619,1547"/>
<area shape="rect" id="node33" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1433,1571,1605,1613"/>
<area shape="rect" id="node27" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="1698,1245,1869,1286"/>
<area shape="rect" id="node34" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1697,1571,1869,1613"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="1406,918,1631,959"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="1397,685,1640,726"/>
<area shape="rect" id="node39" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1690,983,1877,1025"/>
<area shape="rect" id="node40" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1927,976,2127,1032"/>
<area shape="rect" id="node41" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1933,1057,2120,1098"/>
<area shape="rect" id="node42" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1951,910,2102,951"/>
<area shape="rect" id="node45" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="1432,1114,1605,1155"/>
<area shape="rect" id="node46" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="1424,1049,1613,1090"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_abae9ebd099ebba507d98b8df782bd143_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="243,205,429,261"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="243,365,429,421"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="243,525,429,581"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="243,605,429,661"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="219,686,453,727"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="248,752,424,808"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="511,125,694,181"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="771,5,937,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="771,85,937,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="771,165,937,221"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1004,13,1179,54"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1004,85,1179,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1004,165,1179,221"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="511,325,694,381"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="771,245,937,301"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="771,325,937,381"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1004,245,1179,301"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1004,325,1179,381"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="511,525,694,581"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="771,405,937,461"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="755,485,953,541"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="755,565,953,621"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="752,645,956,701"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="752,725,956,781"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1004,405,1179,461"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="1009,485,1173,541"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="1009,565,1173,621"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1006,645,1177,701"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="1006,725,1177,781"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="520,605,685,661"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="767,805,941,861"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="501,686,704,727"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a493ad74f622cef06e6b18a46fa23d6b0" title="foedus::storage::array\l::ArrayStorage::verify\l_single_thread" alt="" coords="529,752,677,808"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2b04cc1cb6c96c53d454d03836b85b70" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="515,832,691,888"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae00ac2170dba50d6ac7052a10adf6383"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::storage::array::ArrayStoragePimpl::get_snapshot_drop_volatile_pages_threshold </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00113">113</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>, and <a class="el" href="array__metadata_8hpp_source.html#l00082">foedus::storage::array::ArrayMetadata::snapshot_drop_volatile_pages_threshold_</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                                 {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>().<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#ab120a9a52466e8ccac442fd714233bf6">snapshot_drop_volatile_pages_threshold_</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a0611bafe6b93b9b860330375cb805fdc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">foedus::storage::array::ArrayStoragePimpl::get_meta</a></div><div class="ttdeci">const ArrayMetadata &amp; get_meta() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00110">array_storage_pimpl.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayMetadata_html_ab120a9a52466e8ccac442fd714233bf6"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#ab120a9a52466e8ccac442fd714233bf6">foedus::storage::array::ArrayMetadata::snapshot_drop_volatile_pages_threshold_</a></div><div class="ttdeci">uint16_t snapshot_drop_volatile_pages_threshold_</div><div class="ttdoc">Number of levels of volatile pages to keep after each snapshotting. </div><div class="ttdef"><b>Definition:</b> <a href="array__metadata_8hpp_source.html#l00082">array_metadata.hpp:82</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae00ac2170dba50d6ac7052a10adf6383_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae00ac2170dba50d6ac7052a10adf6383_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae00ac2170dba50d6ac7052a10adf6383_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae00ac2170dba50d6ac7052a10adf6383_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="219,20,420,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae271b3b08151601047c988dab64bcc0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::hcc_reset_all_temperature_stat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00969">969</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00300">engine_</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00987">hcc_reset_all_temperature_stat_intermediate()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00059">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00964">foedus::storage::array::ArrayStorage::hcc_reset_all_temperature_stat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                                                             {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;**&quot;</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;***************************************************************&quot;</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;***   Reseting &quot;</span> &lt;&lt; ArrayStorage(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>) &lt;&lt; <span class="stringliteral">&quot;&#39;s &quot;</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;*** temperature stat for HCC&quot;</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;***************************************************************&quot;</span>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  DualPagePointer pointer = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">if</span> (pointer.volatile_pointer_.is_null()) {</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;No volatile pages.&quot;</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5">hcc_reset_all_temperature_stat_intermediate</a>(pointer.volatile_pointer_));</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Done resettting&quot;</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_af464bf7872b0ffe1180593ca912164a6"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a></div><div class="ttdeci">DualPagePointer root_page_pointer_</div><div class="ttdoc">Points to the root page (or something equivalent). </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00059">array_storage_pimpl.hpp:59</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a3773cad90c4300f1b858c963df8054b5"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5">foedus::storage::array::ArrayStoragePimpl::hcc_reset_all_temperature_stat_intermediate</a></div><div class="ttdeci">ErrorStack hcc_reset_all_temperature_stat_intermediate(VolatilePagePointer intermediate_page_id)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00987">array_storage_pimpl.cpp:987</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adef3cec6748f0c981c99fd0b9803697c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">foedus::storage::array::ArrayStoragePimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00300">array_storage_pimpl.hpp:300</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5" title="foedus::storage::array\l::ArrayStoragePimpl::hcc\l_reset_all_temperature_stat\l_intermediate" alt="" coords="236,276,419,347"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="491,495,653,536"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="505,5,639,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="467,71,677,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="498,152,646,193"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="497,217,647,259"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="491,283,653,339"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="498,364,646,405"/>
<area shape="rect" id="node11" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="473,429,671,471"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="725,495,887,536"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ae271b3b08151601047c988dab64bcc0d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a8d637b3f30a93402b31c7aa44be75a55" title="Resets all volatile pages&#39; temperature stat to be zero in this storage. " alt="" coords="236,5,407,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3773cad90c4300f1b858c963df8054b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::hcc_reset_all_temperature_stat_intermediate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>intermediate_page_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00987">987</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00300">engine_</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00071">foedus::storage::array::ArrayPage::get_level()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="page_8hpp_source.html#l00268">foedus::storage::PageHeader::hotness_</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="prob__counter_8hpp_source.html#l00049">foedus::assorted::ProbCounter::reset()</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00969">hcc_reset_all_temperature_stat()</a>.</p>
<div class="fragment"><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                            {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  ArrayPage* page = <span class="keyword">reinterpret_cast&lt;</span>ArrayPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(intermediate_page_id));</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!page-&gt;is_leaf());</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> bottom = page-&gt;get_level() == 1U;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>; ++i) {</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    VolatilePagePointer page_id = page-&gt;get_interior_record(i).volatile_pointer_;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">if</span> (page_id.is_null()) {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">if</span> (bottom) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      ArrayPage* leaf = <span class="keyword">reinterpret_cast&lt;</span>ArrayPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(page_id));</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      leaf-&gt;header().hotness_.reset();</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5">hcc_reset_all_temperature_stat_intermediate</a>(page_id));</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  }</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a3773cad90c4300f1b858c963df8054b5"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5">foedus::storage::array::ArrayStoragePimpl::hcc_reset_all_temperature_stat_intermediate</a></div><div class="ttdeci">ErrorStack hcc_reset_all_temperature_stat_intermediate(VolatilePagePointer intermediate_page_id)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00987">array_storage_pimpl.cpp:987</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adef3cec6748f0c981c99fd0b9803697c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">foedus::storage::array::ArrayStoragePimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00300">array_storage_pimpl.hpp:300</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="236,5,447,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="260,85,423,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="267,166,416,207"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="274,231,409,273"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="267,297,415,338"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="267,362,415,403"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="261,427,422,469"/>
<area shape="rect" id="node10" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="242,493,441,534"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="495,427,656,469"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3773cad90c4300f1b858c963df8054b5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae271b3b08151601047c988dab64bcc0d" title="foedus::storage::array\l::ArrayStoragePimpl::hcc\l_reset_all_temperature_stat" alt="" coords="236,13,419,69"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a8d637b3f30a93402b31c7aa44be75a55" title="Resets all volatile pages&#39; temperature stat to be zero in this storage. " alt="" coords="467,13,637,69"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a435ff8b148161ca7296b12eea744a344"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::increment_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00486">486</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00444">foedus::xct::Xct::add_to_write_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__log__types_8hpp_source.html#l00115">foedus::storage::array::ArrayOverwriteLogType::calculate_log_length()</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="thread_8cpp_source.html#l00078">foedus::thread::Thread::get_thread_log_buffer()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>, <a class="el" href="xct_8cpp_source.html#l00258">foedus::xct::Xct::on_record_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>, <a class="el" href="array__log__types_8hpp_source.html#l00246">foedus::storage::array::ArrayOverwriteLogType::populate_primitive()</a>, and <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00148">foedus::storage::array::ArrayStorage::increment_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                                                                    {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_offset + <span class="keyword">sizeof</span>(T) &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">locate_record_for_write</a>(context, offset, &amp;record));</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// this is get_record + overwrite_record</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="comment">// NOTE This version is like other storage&#39;s increment implementation.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// Taking read-set (and potentially locks), read the value, then remember the overwrite log.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// However the increment_record_oneshot() below is pretty different.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;get_current_xct().on_record_read(<span class="keyword">true</span>, &amp;record-&gt;owner_id_));</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordtype">char</span>* ptr = record-&gt;payload_ + payload_offset;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  T tmp = *<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>T*<span class="keyword">&gt;</span>(ptr);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  *value += tmp;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  uint16_t log_length = <a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f">ArrayOverwriteLogType::calculate_log_length</a>(<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  ArrayOverwriteLogType* log_entry = <span class="keyword">reinterpret_cast&lt;</span>ArrayOverwriteLogType*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    context-&gt;get_thread_log_buffer().reserve_new_log(log_length));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  log_entry-&gt;populate_primitive&lt;T&gt;(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(), offset, *value, payload_offset);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">return</span> context-&gt;get_current_xct().add_to_write_set(</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(),</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    &amp;record-&gt;owner_id_,</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    record-&gt;payload_,</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    log_entry);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adeff9d74f6979c888a0155e67466cf2a"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">foedus::storage::array::ArrayStoragePimpl::locate_record_for_write</a></div><div class="ttdeci">ErrorCode locate_record_for_write(thread::Thread *context, ArrayOffset offset, Record **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00355">array_storage_pimpl.cpp:355</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType_html_a91cb4afcdb444d2b876c8e7767626f8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f">foedus::storage::array::ArrayOverwriteLogType::calculate_log_length</a></div><div class="ttdeci">static uint16_t calculate_log_length(uint16_t payload_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__log__types_8hpp_source.html#l00115">array_log_types.hpp:115</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="280,152,421,193"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f" title="foedus::storage::array\l::ArrayOverwriteLogType\l::calculate_log_length" alt="" coords="269,1355,432,1411"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="275,1653,426,1695"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="259,1289,442,1331"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="757,1419,923,1475"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="274,1719,427,1760"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="259,1573,442,1629"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="283,709,418,751"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a823803709eb1866c0c2192c272102e8f" title="For primitive types. " alt="" coords="269,1785,432,1841"/>
<area shape="rect" id="node47" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="257,1208,444,1249"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="754,71,926,127"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="753,676,927,717"/>
<area shape="rect" id="node9" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="528,12,657,53"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="492,152,693,193"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="1010,669,1165,725"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1246,769,1419,811"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1258,961,1407,1003"/>
<area shape="rect" id="node8" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1250,655,1415,682"/>
<area shape="rect" id="node10" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="763,5,917,47"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="767,217,913,259"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="741,152,939,193"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1006,335,1169,376"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1236,305,1429,347"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1252,465,1413,507"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1007,1766,1167,1793"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="987,1427,1188,1468"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="749,1580,931,1621"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="757,1499,923,1555"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="500,1757,685,1813"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="744,2004,936,2045"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="763,2069,917,2111"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1013,1931,1161,1972"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="766,1923,914,1979"/>
<area shape="rect" id="node36" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="779,2135,901,2176"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="997,1573,1177,1629"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="757,1646,923,1702"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="766,1727,914,1768"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="757,1793,923,1849"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="531,436,654,477"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="506,501,679,543"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="765,822,915,878"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="509,669,676,725"/>
<area shape="rect" id="node42" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="753,1095,927,1136"/>
<area shape="rect" id="node43" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="531,865,654,907"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="531,800,654,841"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="522,217,663,259"/>
<area shape="rect" id="node48" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="499,1252,686,1293"/>
<area shape="rect" id="node49" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="747,1181,933,1223"/>
<area shape="rect" id="node50" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="499,1135,686,1176"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a435ff8b148161ca7296b12eea744a344_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="257,5,428,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af77ff710cf2f8ef3800e97861ea94e8f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::increment_record_oneshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00512">512</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00444">foedus::xct::Xct::add_to_write_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__log__types_8hpp_source.html#l00189">foedus::storage::array::ArrayIncrementLogType::calculate_log_length()</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="thread_8cpp_source.html#l00078">foedus::thread::Thread::get_thread_log_buffer()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>, <a class="el" href="array__log__types_8hpp_source.html#l00277">foedus::storage::array::ArrayIncrementLogType::populate()</a>, and <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00154">foedus::storage::array::ArrayStorage::increment_record_oneshot()</a>.</p>
<div class="fragment"><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                           {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_offset + <span class="keyword">sizeof</span>(T) &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">locate_record_for_write</a>(context, offset, &amp;record));</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// Only Array&#39;s increment can be the rare &quot;write-set only&quot; log.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// other increments have to check deletion bit at least.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// To make use of it, we do have array increment log with primitive type as parameter.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1array.html#a2bebcaeba75b3d45b1b2484c913dcc46">ValueType</a> type = to_value_type&lt;T&gt;();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  uint16_t log_length = <a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a20a53cefaa9fab0143ae4bba0f565c7e">ArrayIncrementLogType::calculate_log_length</a>(type);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  ArrayIncrementLogType* log_entry = <span class="keyword">reinterpret_cast&lt;</span>ArrayIncrementLogType*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    context-&gt;get_thread_log_buffer().reserve_new_log(log_length));</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  log_entry-&gt;populate&lt;T&gt;(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(), offset, value, payload_offset);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="keywordflow">return</span> context-&gt;get_current_xct().add_to_write_set(</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(),</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    &amp;record-&gt;owner_id_,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    record-&gt;payload_,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    log_entry);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adeff9d74f6979c888a0155e67466cf2a"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">foedus::storage::array::ArrayStoragePimpl::locate_record_for_write</a></div><div class="ttdeci">ErrorCode locate_record_for_write(thread::Thread *context, ArrayOffset offset, Record **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00355">array_storage_pimpl.cpp:355</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType_html_a20a53cefaa9fab0143ae4bba0f565c7e"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a20a53cefaa9fab0143ae4bba0f565c7e">foedus::storage::array::ArrayIncrementLogType::calculate_log_length</a></div><div class="ttdeci">static uint16_t calculate_log_length(ValueType value_type) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__log__types_8hpp_source.html#l00189">array_log_types.hpp:189</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1array_html_a2bebcaeba75b3d45b1b2484c913dcc46"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1array.html#a2bebcaeba75b3d45b1b2484c913dcc46">foedus::storage::array::ValueType</a></div><div class="ttdeci">ValueType</div><div class="ttdoc">Used in ArrayIncrementLogType. </div><div class="ttdef"><b>Definition:</b> <a href="array__log__types_8hpp_source.html#l00147">array_log_types.hpp:147</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="280,147,421,188"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a20a53cefaa9fab0143ae4bba0f565c7e" title="foedus::storage::array\l::ArrayIncrementLogType\l::calculate_log_length" alt="" coords="267,213,434,269"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="275,293,426,335"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="501,344,684,385"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="1015,446,1180,502"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="274,461,427,503"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="259,643,442,699"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a24d21e49d8b98c3a310385f3c109f641" title="foedus::storage::array\l::ArrayIncrementLogType\l::populate" alt="" coords="267,723,434,779"/>
<area shape="rect" id="node40" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="257,1577,444,1619"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="507,7,679,63"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="505,88,680,129"/>
<area shape="rect" id="node10" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="528,153,657,195"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="492,219,693,260"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="767,73,922,129"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1261,5,1434,47"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1273,96,1422,137"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="996,51,1199,92"/>
<area shape="rect" id="node9" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1015,167,1180,194"/>
<area shape="rect" id="node11" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="767,153,922,195"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="772,219,917,260"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="746,284,943,325"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1247,453,1448,495"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="753,512,936,553"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="762,643,927,699"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="500,919,685,975"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="749,577,941,619"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="767,1329,922,1371"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1023,1355,1171,1396"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="1036,1139,1159,1180"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="771,1497,919,1553"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="1007,526,1187,582"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="762,854,927,910"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="771,985,919,1027"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="762,1051,927,1107"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="741,1212,948,1253"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="755,1131,934,1187"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="763,774,926,830"/>
<area shape="rect" id="node35" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1286,1139,1409,1180"/>
<area shape="rect" id="node38" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1017,1511,1177,1538"/>
<area shape="rect" id="node41" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="499,1548,686,1589"/>
<area shape="rect" id="node42" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="751,1592,938,1633"/>
<area shape="rect" id="node44" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="499,1755,686,1796"/>
<area shape="rect" id="node43" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a824cf26a13eb7f42d5ae68f5725098c5" title="Subtract operator, considering wrapping around. " alt="" coords="1004,1592,1191,1633"/>
<area shape="rect" id="node45" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9aa20c59a7d75cf94742beb43b777de6" title="Only for Debug&#45;assertion. " alt="" coords="751,1657,938,1699"/>
<area shape="rect" id="node46" href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc" title="See Log Manager. " alt="" coords="777,1723,912,1764"/>
<area shape="rect" id="node47" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="777,1788,912,1829"/>
<area shape="rect" id="node48" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="758,1853,931,1895"/>
<area shape="rect" id="node49" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="758,1919,931,1960"/>
<area shape="rect" id="node50" href="classfoedus_1_1log_1_1LogManager.html#a5c844c3bc8d71ce709999fd286a5e7b8" title="Wake up loggers if they are sleeping. " alt="" coords="763,1984,927,2025"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af77ff710cf2f8ef3800e97861ea94e8f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="257,5,428,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a577ab7f32ca2b4d48a7fa174263de47d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a> &amp;&#160;</td>
          <td class="paramname"><em>snapshot_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">301</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00194">foedus::storage::array::calculate_levels()</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00300">engine_</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="initializable_8hpp_source.html#l00169">foedus::DefaultInitializable::initialize()</a>, <a class="el" href="storage__id_8hpp_source.html#l00158">foedus::storage::kExists</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="initializable_8hpp_source.html#l00243">foedus::UninitializeGuard::kWarnIfUninitializeError</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00067">foedus::storage::array::ArrayStorageControlBlock::levels_</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">load_empty()</a>, <a class="el" href="engine__memory_8cpp_source.html#l00148">foedus::memory::EngineMemory::load_one_volatile_page()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00061">foedus::storage::array::ArrayStorageControlBlock::meta_</a>, <a class="el" href="storage_8hpp_source.html#l00084">foedus::storage::StorageControlBlock::meta_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00059">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a>, <a class="el" href="metadata_8hpp_source.html#l00112">foedus::storage::Metadata::root_snapshot_page_id_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00057">foedus::storage::array::ArrayStorageControlBlock::status_</a>, <a class="el" href="initializable_8hpp_source.html#l00187">foedus::DefaultInitializable::uninitialize()</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="array__storage_8cpp_source.html#l00056">foedus::storage::array::ArrayStorage::load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                                                            {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a> = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>ArrayMetadata&amp;<span class="keyword">&gt;</span>(snapshot_block.meta_);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keyword">const</span> ArrayMetadata&amp; meta = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(meta.root_snapshot_page_id_ != 0);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keyword">const</span> uint16_t levels = <a class="code" href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae">calculate_levels</a>(meta);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aa42e734640c62a5f4dff4d28cc09887b">levels_</a> = levels;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a> = LookupRouteFinder(levels, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> = meta.root_snapshot_page_id_;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">word</a> = 0;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// So far we assume the root page always has a volatile version.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Create it now.</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (meta.root_snapshot_page_id_ != 0) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    cache::SnapshotFileSet fileset(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(fileset.initialize());</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    UninitializeGuard fileset_guard(&amp;fileset, <a class="code" href="classfoedus_1_1UninitializeGuard.html#ae6caa12ca9b75a22b53c2eed31402721af0067551d00455a2a16416216de53568">UninitializeGuard::kWarnIfUninitializeError</a>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    VolatilePagePointer volatile_pointer;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    Page* volatile_root;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c">load_one_volatile_page</a>(</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      &amp;fileset,</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      meta.root_snapshot_page_id_,</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      &amp;volatile_pointer,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      &amp;volatile_root));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a> = volatile_pointer;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(fileset.uninitialize());</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Loading an empty array-storage-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9">load_empty</a>());</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a4cf75bc9f07e8a6cdac3d92b99bc3ddc">status_</a> = <a class="code" href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">kExists</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Loaded an array-storage-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>();</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_aa42e734640c62a5f4dff4d28cc09887b"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aa42e734640c62a5f4dff4d28cc09887b">foedus::storage::array::ArrayStorageControlBlock::levels_</a></div><div class="ttdeci">uint8_t levels_</div><div class="ttdoc">Number of levels. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00067">array_storage_pimpl.hpp:67</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a0611bafe6b93b9b860330375cb805fdc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">foedus::storage::array::ArrayStoragePimpl::get_meta</a></div><div class="ttdeci">const ArrayMetadata &amp; get_meta() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00110">array_storage_pimpl.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a4cf75bc9f07e8a6cdac3d92b99bc3ddc"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a4cf75bc9f07e8a6cdac3d92b99bc3ddc">foedus::storage::array::ArrayStorageControlBlock::status_</a></div><div class="ttdeci">StorageStatus status_</div><div class="ttdoc">Status of the storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00057">array_storage_pimpl.hpp:57</a></div></div>
<div class="ttc" id="classfoedus_1_1UninitializeGuard_html_ae6caa12ca9b75a22b53c2eed31402721af0067551d00455a2a16416216de53568"><div class="ttname"><a href="classfoedus_1_1UninitializeGuard.html#ae6caa12ca9b75a22b53c2eed31402721af0067551d00455a2a16416216de53568">foedus::UninitializeGuard::kWarnIfUninitializeError</a></div><div class="ttdoc">Automatically calls if uninitialize() wasn&#39;t called when it gets out of scope, and just complains whe...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00243">initializable.hpp:243</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_a8bb6c37c44056c5f986f6dd164b5b23a"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">foedus::storage::VolatilePagePointer::word</a></div><div class="ttdeci">uint64_t word</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00195">storage_id.hpp:195</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a3c3c8902b7000d09878a5a2085f6058c"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c">foedus::memory::EngineMemory::load_one_volatile_page</a></div><div class="ttdeci">ErrorStack load_one_volatile_page(cache::SnapshotFileSet *fileset, storage::SnapshotPagePointer snapshot_pointer, storage::VolatilePagePointer *pointer, storage::Page **page)</div><div class="ttdoc">Another convenience method that also reads an existing snapshot page to the volatile page...</div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8cpp_source.html#l00148">engine_memory.cpp:148</a></div></div>
<div class="ttc" id="group__STORAGE_html_ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1"><div class="ttname"><a href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">foedus::storage::kExists</a></div><div class="ttdoc">The storage has been created and ready for use. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00158">storage_id.hpp:158</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_af464bf7872b0ffe1180593ca912164a6"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a></div><div class="ttdeci">DualPagePointer root_page_pointer_</div><div class="ttdoc">Points to the root page (or something equivalent). </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00059">array_storage_pimpl.hpp:59</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_a99e67179a5576a52a4710c700ac309f4"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">foedus::storage::DualPagePointer::volatile_pointer_</a></div><div class="ttdeci">VolatilePagePointer volatile_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00308">storage_id.hpp:308</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2a268a5d3e5e072d53a15ed554c9b2dc"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">foedus::storage::array::ArrayStorageControlBlock::meta_</a></div><div class="ttdeci">ArrayMetadata meta_</div><div class="ttdoc">metadata of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00061">array_storage_pimpl.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_af1b2fd480af916504df50c01faa3e597"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">foedus::storage::DualPagePointer::snapshot_pointer_</a></div><div class="ttdeci">SnapshotPagePointer snapshot_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00307">storage_id.hpp:307</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1array_html_ac0792c331c4b2fcb4918b8e89d5264ae"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae">foedus::storage::array::calculate_levels</a></div><div class="ttdeci">uint8_t calculate_levels(const ArrayMetadata &amp;metadata)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00194">array_storage_pimpl.cpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adef3cec6748f0c981c99fd0b9803697c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">foedus::storage::array::ArrayStoragePimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00300">array_storage_pimpl.hpp:300</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a2bf1f0e04d213efe49f4e250968a60b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9">foedus::storage::array::ArrayStoragePimpl::load_empty</a></div><div class="ttdeci">ErrorStack load_empty()</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00254">array_storage_pimpl.cpp:254</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae" title="foedus::storage::array\l::calculate_levels" alt="" coords="518,500,666,541"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="525,369,659,411"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="750,304,951,345"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="249,318,414,374"/>
<area shape="rect" id="node8" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="245,136,417,177"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="224,565,439,607"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="226,1192,437,1233"/>
<area shape="rect" id="node50" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="245,201,417,243"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1023,501,1183,527"/>
<area shape="rect" id="node4" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824" title="Efficient ceil(dividee/dividor) for integer. " alt="" coords="781,369,921,411"/>
<area shape="rect" id="node9" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="506,5,678,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="527,71,657,112"/>
<area shape="rect" id="node11" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="506,136,678,177"/>
<area shape="rect" id="node12" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="506,201,678,243"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19" title="foedus::storage::array\l::LookupRouteFinder::get\l_records_in_leaf" alt="" coords="508,711,676,767"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="487,1057,697,1099"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="518,631,666,687"/>
<area shape="rect" id="node33" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="522,565,662,607"/>
<area shape="rect" id="node34" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="515,803,669,859"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="501,435,683,476"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="745,895,956,936"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="761,960,940,1001"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="755,1025,946,1067"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="761,1091,940,1132"/>
<area shape="rect" id="node23" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="759,1157,943,1213"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="770,1237,931,1279"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="1014,960,1193,1001"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="1014,1091,1193,1132"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="1251,1091,1465,1132"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="777,566,925,622"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1029,607,1177,648"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="777,486,925,542"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="755,748,946,789"/>
<area shape="rect" id="node32" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="773,697,928,723"/>
<area shape="rect" id="node30" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="1004,781,1203,823"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="1007,716,1199,757"/>
<area shape="rect" id="node35" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="763,814,938,870"/>
<area shape="rect" id="node38" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1009,1289,1197,1345"/>
<area shape="rect" id="node39" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="499,1435,685,1476"/>
<area shape="rect" id="node40" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="751,1354,951,1410"/>
<area shape="rect" id="node41" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="757,1435,944,1476"/>
<area shape="rect" id="node43" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="775,1548,926,1589"/>
<area shape="rect" id="node49" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="775,1629,926,1671"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="1008,1369,1199,1425"/>
<area shape="rect" id="node44" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="1032,1645,1175,1687"/>
<area shape="rect" id="node45" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="1028,1515,1179,1556"/>
<area shape="rect" id="node46" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1033,1711,1173,1752"/>
<area shape="rect" id="node47" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="1028,1449,1179,1491"/>
<area shape="rect" id="node48" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="1036,1580,1171,1621"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a577ab7f32ca2b4d48a7fa174263de47d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="224,5,372,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2bf1f0e04d213efe49f4e250968a60b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::load_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">254</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="array__metadata_8hpp_source.html#l00085">foedus::storage::array::ArrayMetadata::array_size_</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00194">foedus::storage::array::calculate_levels()</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00300">engine_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="savepoint__manager_8cpp_source.html#l00036">foedus::savepoint::SavepointManager::get_initial_current_epoch()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="array__route_8hpp_source.html#l00122">foedus::storage::array::LookupRouteFinder::get_records_in_leaf()</a>, <a class="el" href="engine_8cpp_source.html#l00053">foedus::Engine::get_savepoint_manager()</a>, <a class="el" href="engine__memory_8cpp_source.html#l00136">foedus::memory::EngineMemory::grab_one_volatile_page()</a>, <a class="el" href="array__page__impl_8cpp_source.html#l00055">foedus::storage::array::ArrayPage::initialize_volatile_page()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00078">foedus::storage::array::ArrayStorageControlBlock::intervals_</a>, <a class="el" href="error__code_8hpp_source.html#l00189">foedus::kErrorCodeStrTooLargeArray</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="array__id_8hpp_source.html#l00054">foedus::storage::array::kMaxArrayOffset</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00067">foedus::storage::array::ArrayStorageControlBlock::levels_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00061">foedus::storage::array::ArrayStorageControlBlock::meta_</a>, <a class="el" href="array__metadata_8hpp_source.html#l00074">foedus::storage::array::ArrayMetadata::payload_size_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00059">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a>, <a class="el" href="metadata_8hpp_source.html#l00112">foedus::storage::Metadata::root_snapshot_page_id_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00288">create()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                         {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keyword">const</span> uint16_t levels = <a class="code" href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae">calculate_levels</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keyword">const</span> uint32_t payload_size = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a>.<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a49bf71a70d9a9621d2e339d3fad0634b">payload_size_</a>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> array_size = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a>.<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a014a894093b06040134c15514d3601b9">array_size_</a>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (array_size &gt; <a class="code" href="group__ARRAY.html#ga93fb6161090a026d619f6fc141e9b4fe">kMaxArrayOffset</a>) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ad2b9979d4c5cc6f2f5683ce8cd99f59f">kErrorCodeStrTooLargeArray</a>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aa42e734640c62a5f4dff4d28cc09887b">levels_</a> = levels;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a> = LookupRouteFinder(levels, payload_size);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> = 0;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">word</a> = 0;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">meta_</a>.<a class="code" href="structfoedus_1_1storage_1_1Metadata.html#ab9d6a766410a36959158818af739df34">root_snapshot_page_id_</a> = 0;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a589ca076175b55dc3ca97a7dd80b3f5d">intervals_</a>[0] = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a>.<a class="code" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19">get_records_in_leaf</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">for</span> (uint16_t level = 1; level &lt; levels; ++level) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a589ca076175b55dc3ca97a7dd80b3f5d">intervals_</a>[level] = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a589ca076175b55dc3ca97a7dd80b3f5d">intervals_</a>[level - 1U] * <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  VolatilePagePointer volatile_pointer;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  ArrayPage* volatile_root;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d">grab_one_volatile_page</a>(</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    0,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    &amp;volatile_pointer,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    reinterpret_cast&lt;Page**&gt;(&amp;volatile_root)));</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  volatile_root-&gt;initialize_volatile_page(</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">get_savepoint_manager</a>()-&gt;<a class="code" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee">get_initial_current_epoch</a>(),  <span class="comment">// lowest epoch in the system</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(),</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    volatile_pointer,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    payload_size,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    levels - 1U,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    ArrayRange(0, array_size));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">root_page_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a> = volatile_pointer;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_aa42e734640c62a5f4dff4d28cc09887b"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aa42e734640c62a5f4dff4d28cc09887b">foedus::storage::array::ArrayStorageControlBlock::levels_</a></div><div class="ttdeci">uint8_t levels_</div><div class="ttdoc">Number of levels. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00067">array_storage_pimpl.hpp:67</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ad2b9979d4c5cc6f2f5683ce8cd99f59f"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ad2b9979d4c5cc6f2f5683ce8cd99f59f">foedus::kErrorCodeStrTooLargeArray</a></div><div class="ttdoc">0x0826 : "STORAGE: Too large array size specified. The size of an array storage must be smaller than ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00189">error_code.hpp:189</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayMetadata_html_a014a894093b06040134c15514d3601b9"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a014a894093b06040134c15514d3601b9">foedus::storage::array::ArrayMetadata::array_size_</a></div><div class="ttdeci">ArrayOffset array_size_</div><div class="ttdoc">Size of this array. </div><div class="ttdef"><b>Definition:</b> <a href="array__metadata_8hpp_source.html#l00085">array_metadata.hpp:85</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_a8bb6c37c44056c5f986f6dd164b5b23a"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">foedus::storage::VolatilePagePointer::word</a></div><div class="ttdeci">uint64_t word</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00195">storage_id.hpp:195</a></div></div>
<div class="ttc" id="classfoedus_1_1savepoint_1_1SavepointManager_html_a82624b3d7edff1d02e29c1b8863dd4ee"><div class="ttname"><a href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee">foedus::savepoint::SavepointManager::get_initial_current_epoch</a></div><div class="ttdeci">Epoch get_initial_current_epoch() const </div><div class="ttdef"><b>Definition:</b> <a href="savepoint__manager_8cpp_source.html#l00036">savepoint_manager.cpp:36</a></div></div>
<div class="ttc" id="group__ARRAY_html_ga93fb6161090a026d619f6fc141e9b4fe"><div class="ttname"><a href="group__ARRAY.html#ga93fb6161090a026d619f6fc141e9b4fe">foedus::storage::array::kMaxArrayOffset</a></div><div class="ttdeci">const ArrayOffset kMaxArrayOffset</div><div class="ttdoc">The maximum value allowed for ArrayOffset. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00054">array_id.hpp:54</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a589ca076175b55dc3ca97a7dd80b3f5d"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a589ca076175b55dc3ca97a7dd80b3f5d">foedus::storage::array::ArrayStorageControlBlock::intervals_</a></div><div class="ttdeci">uint64_t intervals_[8]</div><div class="ttdoc">intervals_[x] is the range of array offset in one page of level-x. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00078">array_storage_pimpl.hpp:78</a></div></div>
<div class="ttc" id="group__ARRAY_html_ga032dbb5dc93f7b51ac0ab5200ae013ab"><div class="ttname"><a href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">foedus::storage::array::ArrayOffset</a></div><div class="ttdeci">uint64_t ArrayOffset</div><div class="ttdoc">The only key type in array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00048">array_id.hpp:48</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a4f168d41ea00249fefe905def87e80c8"><div class="ttname"><a href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">foedus::Engine::get_savepoint_manager</a></div><div class="ttdeci">savepoint::SavepointManager * get_savepoint_manager() const </div><div class="ttdoc">See Savepoint Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00053">engine.cpp:53</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_af464bf7872b0ffe1180593ca912164a6"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#af464bf7872b0ffe1180593ca912164a6">foedus::storage::array::ArrayStorageControlBlock::root_page_pointer_</a></div><div class="ttdeci">DualPagePointer root_page_pointer_</div><div class="ttdoc">Points to the root page (or something equivalent). </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00059">array_storage_pimpl.hpp:59</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_a99e67179a5576a52a4710c700ac309f4"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">foedus::storage::DualPagePointer::volatile_pointer_</a></div><div class="ttdeci">VolatilePagePointer volatile_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00308">storage_id.hpp:308</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2a268a5d3e5e072d53a15ed554c9b2dc"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2a268a5d3e5e072d53a15ed554c9b2dc">foedus::storage::array::ArrayStorageControlBlock::meta_</a></div><div class="ttdeci">ArrayMetadata meta_</div><div class="ttdoc">metadata of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00061">array_storage_pimpl.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_af1b2fd480af916504df50c01faa3e597"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">foedus::storage::DualPagePointer::snapshot_pointer_</a></div><div class="ttdeci">SnapshotPagePointer snapshot_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00307">storage_id.hpp:307</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_ae35d16d716451eaa878ec2888960127d"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d">foedus::memory::EngineMemory::grab_one_volatile_page</a></div><div class="ttdeci">ErrorStack grab_one_volatile_page(foedus::thread::ThreadGroupId node, storage::VolatilePagePointer *pointer, storage::Page **page)</div><div class="ttdoc">A convenience function to grab one free volatile page from the given node. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8cpp_source.html#l00136">engine_memory.cpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder_html_a2d19d9785d226e4c7f9b2f0f549fdd19"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19">foedus::storage::array::LookupRouteFinder::get_records_in_leaf</a></div><div class="ttdeci">uint16_t get_records_in_leaf() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__route_8hpp_source.html#l00122">array_route.hpp:122</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1array_html_ac0792c331c4b2fcb4918b8e89d5264ae"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae">foedus::storage::array::calculate_levels</a></div><div class="ttdeci">uint8_t calculate_levels(const ArrayMetadata &amp;metadata)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00194">array_storage_pimpl.cpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adef3cec6748f0c981c99fd0b9803697c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adef3cec6748f0c981c99fd0b9803697c">foedus::storage::array::ArrayStoragePimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00300">array_storage_pimpl.hpp:300</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayMetadata_html_a49bf71a70d9a9621d2e339d3fad0634b"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayMetadata.html#a49bf71a70d9a9621d2e339d3fad0634b">foedus::storage::array::ArrayMetadata::payload_size_</a></div><div class="ttdeci">uint16_t payload_size_</div><div class="ttdoc">byte size of one record in this array storage without internal overheads </div><div class="ttdef"><b>Definition:</b> <a href="array__metadata_8hpp_source.html#l00074">array_metadata.hpp:74</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Metadata_html_ab9d6a766410a36959158818af739df34"><div class="ttname"><a href="structfoedus_1_1storage_1_1Metadata.html#ab9d6a766410a36959158818af739df34">foedus::storage::Metadata::root_snapshot_page_id_</a></div><div class="ttdeci">SnapshotPagePointer root_snapshot_page_id_</div><div class="ttdoc">Pointer to a snapshotted page this storage is rooted at. </div><div class="ttdef"><b>Definition:</b> <a href="metadata_8hpp_source.html#l00112">metadata.hpp:112</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1array.html#ac0792c331c4b2fcb4918b8e89d5264ae" title="foedus::storage::array\l::calculate_levels" alt="" coords="299,35,447,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="282,390,465,431"/>
<area shape="rect" id="node7" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="296,456,451,512"/>
<area shape="rect" id="node9" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="306,536,441,578"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19" title="foedus::storage::array\l::LookupRouteFinder::get\l_records_in_leaf" alt="" coords="289,602,457,658"/>
<area shape="rect" id="node11" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="303,683,443,724"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="268,748,479,790"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="299,276,447,332"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="805,116,965,142"/>
<area shape="rect" id="node4" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824" title="Efficient ceil(dividee/dividor) for integer. " alt="" coords="562,35,702,76"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="531,430,733,471"/>
<area shape="rect" id="node8" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="545,496,719,552"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="527,584,737,626"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="543,650,721,691"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="537,715,727,756"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="543,780,721,822"/>
<area shape="rect" id="node25" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="540,846,724,902"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="551,927,713,968"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="795,650,974,691"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="795,780,974,822"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="1032,682,1247,723"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1050,747,1229,788"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="1043,812,1236,854"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1050,878,1229,919"/>
<area shape="rect" id="node22" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1306,783,1498,824"/>
<area shape="rect" id="node23" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1295,849,1509,876"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="558,181,706,237"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="811,218,959,259"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="558,101,706,157"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="537,312,727,354"/>
<area shape="rect" id="node37" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="555,378,709,405"/>
<area shape="rect" id="node32" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="785,298,984,339"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="789,363,981,404"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="1043,331,1235,372"/>
<area shape="rect" id="node35" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="1055,396,1224,438"/>
<area shape="rect" id="node36" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="1301,396,1503,438"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2bf1f0e04d213efe49f4e250968a60b9_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="268,5,451,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="274,71,445,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="499,5,649,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="500,71,648,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa649c9d971f17fa39848d4c1a1bcb50f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::locate_record_for_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>snapshot_record</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">337</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__id_8hpp_source.html#l00079">foedus::storage::array::ArrayRange::contains()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">exists()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00072">foedus::storage::array::ArrayPage::get_array_range()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00372">get_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00403">get_record_payload()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00388">get_record_primitive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                         {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">exists</a>());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a>());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  uint16_t index = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  ArrayPage* page = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884">lookup_for_read</a>(context, offset, &amp;page, &amp;index, snapshot_record));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;is_leaf());</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_.is_valid());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  *out = page-&gt;get_leaf_record(index, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af7175d943ce05a4fdca76d15638dac4e"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">foedus::storage::array::ArrayStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00109">array_storage_pimpl.hpp:109</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a7f9205c706c8be3ad4f0c030a285d884"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884">foedus::storage::array::ArrayStoragePimpl::lookup_for_read</a></div><div class="ttdeci">ErrorCode lookup_for_read(thread::Thread *context, ArrayOffset offset, ArrayPage **out, uint16_t *index, bool *snapshot_page) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00535">array_storage_pimpl.cpp:535</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae3cd53ce6ea97f63981defcb2f18f0b2"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">foedus::storage::array::ArrayStoragePimpl::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00117">array_storage_pimpl.hpp:117</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="495,109,650,150"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="481,43,664,85"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="963,1143,1155,1185"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="490,175,655,231"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1246,791,1394,847"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1504,298,1652,339"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="731,181,897,237"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="753,1293,875,1334"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="236,496,421,552"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="724,43,904,99"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="959,123,1160,165"/>
<area shape="rect" id="node9" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1498,725,1658,752"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="998,1293,1121,1334"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="490,1161,655,1217"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="490,423,655,479"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="469,357,676,398"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="499,503,647,545"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="491,569,654,625"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="483,700,662,756"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="739,1175,889,1217"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="967,1209,1151,1250"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1751,1218,1913,1259"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2184,1134,2333,1175"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1215,1486,1425,1527"/>
<area shape="rect" id="node21" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1740,1312,1924,1368"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1751,1035,1913,1077"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1981,1050,2136,1091"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1485,1137,1671,1178"/>
<area shape="rect" id="node25" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1731,1101,1933,1142"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1228,1421,1412,1462"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1473,1530,1683,1571"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1251,1238,1389,1279"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1249,1303,1391,1345"/>
<area shape="rect" id="node32" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="725,262,903,303"/>
<area shape="rect" id="node33" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="971,189,1148,230"/>
<area shape="rect" id="node37" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="732,703,896,745"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="985,975,1134,1017"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="977,437,1141,478"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="960,502,1159,543"/>
<area shape="rect" id="node40" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="993,567,1125,609"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="984,633,1135,674"/>
<area shape="rect" id="node42" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="982,895,1137,951"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="952,698,1167,739"/>
<area shape="rect" id="node46" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="989,763,1129,805"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="967,829,1151,870"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="985,356,1133,412"/>
<area shape="rect" id="node43" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="1233,711,1407,767"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1246,568,1394,624"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="1225,407,1415,449"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_aa649c9d971f17fa39848d4c1a1bcb50f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="236,5,401,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="236,85,401,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="236,165,401,221"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="449,13,624,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="449,85,624,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="449,165,624,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a617e3f91fe74f5215ae4f0081e30ab6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::locate_record_for_read_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *&#160;</td>
          <td class="paramname"><em>offset_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **&#160;</td>
          <td class="paramname"><em>out_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>snapshot_page_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00767">767</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00717">get_record_payload_batch()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00678">get_record_primitive_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                             {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  ArrayPage* page_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  uint16_t index_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279">lookup_for_read_batch</a>(</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    context,</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    batch_size,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    offset_batch,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    page_batch,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    index_batch,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    snapshot_page_batch));</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keyword">const</span> uint16_t payload_size = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>();</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_batch[i]);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_batch[i]-&gt;is_leaf());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_batch[i]-&gt;get_array_range().contains(offset_batch[i]));</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    out_batch[i] = page_batch[i]-&gt;get_leaf_record(index_batch[i], payload_size);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out_batch[i]-&gt;owner_id_.xct_id_.is_valid());</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a86a1e1fb54d44f15bc17c3f622f9f279"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279">foedus::storage::array::ArrayStoragePimpl::lookup_for_read_batch</a></div><div class="ttdeci">ErrorCode lookup_for_read_batch(thread::Thread *context, uint16_t batch_size, const ArrayOffset *offset_batch, ArrayPage **out_batch, uint16_t *index_batch, bool *snapshot_page_batch)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00794">array_storage_pimpl.cpp:794</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1230,2040,1378,2096"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="730,1025,895,1081"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="236,952,421,1008"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1469,2055,1629,2081"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1475,1377,1623,1418"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="956,821,1157,862"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="490,593,655,649"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1953,174,2127,215"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="490,1316,655,1372"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="739,879,887,921"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="490,740,655,796"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="469,674,676,715"/>
<area shape="rect" id="node30" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="487,989,659,1030"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="731,945,894,1001"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="483,1236,662,1292"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="481,821,664,862"/>
<area shape="rect" id="node50" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="473,1105,673,1161"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="737,601,888,642"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="965,601,1149,642"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1723,525,1885,566"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2175,583,2324,625"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1444,649,1655,690"/>
<area shape="rect" id="node14" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1712,399,1896,455"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1723,801,1885,842"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1963,895,2117,937"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1456,583,1643,625"/>
<area shape="rect" id="node18" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1703,866,1905,907"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1212,419,1396,461"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1445,213,1654,254"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1480,714,1619,755"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1479,983,1620,1025"/>
<area shape="rect" id="node28" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="724,674,901,715"/>
<area shape="rect" id="node29" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="968,674,1145,715"/>
<area shape="rect" id="node33" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="731,1626,895,1667"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="982,1303,1131,1345"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="737,1105,888,1161"/>
<area shape="rect" id="node47" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="751,1186,874,1227"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="975,1858,1139,1899"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="961,1923,1153,1965"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="957,1989,1156,2030"/>
<area shape="rect" id="node37" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="991,1450,1123,1491"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="981,1515,1132,1557"/>
<area shape="rect" id="node39" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="979,1581,1134,1637"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="949,1662,1164,1703"/>
<area shape="rect" id="node42" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="987,1727,1127,1769"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="965,1793,1149,1834"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="983,1369,1131,1425"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="1212,816,1396,872"/>
<area shape="rect" id="node48" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="995,1186,1118,1227"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a617e3f91fe74f5215ae4f0081e30ab6d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="236,5,401,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="236,85,401,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="449,5,624,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="449,85,624,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adeff9d74f6979c888a0155e67466cf2a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::locate_record_for_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">355</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__id_8hpp_source.html#l00079">foedus::storage::array::ArrayRange::contains()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">exists()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00072">foedus::storage::array::ArrayPage::get_array_range()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00419">get_record_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00486">increment_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00512">increment_record_oneshot()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00432">overwrite_record()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00441">overwrite_record_primitive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">exists</a>());</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a>());</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  uint16_t index = 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  ArrayPage* page = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759">lookup_for_write</a>(context, offset, &amp;page, &amp;index));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;is_leaf());</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_.is_valid());</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  *out = page-&gt;get_leaf_record(index, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af7175d943ce05a4fdca76d15638dac4e"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">foedus::storage::array::ArrayStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00109">array_storage_pimpl.hpp:109</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a10c44402ff1533f5fee533cc13119759"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759">foedus::storage::array::ArrayStoragePimpl::lookup_for_write</a></div><div class="ttdeci">ErrorCode lookup_for_write(thread::Thread *context, ArrayOffset offset, ArrayPage **out, uint16_t *index) __attribute__((always_inline))</div><div class="ttdoc">This version always returns a volatile page, installing a new one if needed. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00574">array_storage_pimpl.cpp:574</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae3cd53ce6ea97f63981defcb2f18f0b2"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">foedus::storage::array::ArrayStoragePimpl::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00117">array_storage_pimpl.hpp:117</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="495,693,650,735"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="481,496,664,537"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="963,1251,1155,1292"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="490,562,655,618"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1246,1069,1394,1125"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1504,1141,1652,1183"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="731,655,897,711"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="753,1312,875,1353"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="236,1001,421,1057"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="724,489,904,545"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="959,333,1160,375"/>
<area shape="rect" id="node9" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1498,954,1658,981"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="998,1316,1121,1357"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="490,810,655,866"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="499,971,647,1012"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="490,1037,655,1093"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="469,1400,676,1441"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="483,890,662,946"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="491,1218,654,1274"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="739,755,889,796"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="967,399,1151,440"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1751,289,1913,331"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2184,437,2333,479"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1215,508,1425,549"/>
<area shape="rect" id="node21" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1740,462,1924,518"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1751,140,1913,181"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1981,543,2136,584"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1485,407,1671,448"/>
<area shape="rect" id="node25" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1731,543,1933,584"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1228,340,1412,381"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1473,188,1683,229"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1251,5,1389,47"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1249,71,1391,112"/>
<area shape="rect" id="node33" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="725,1435,903,1476"/>
<area shape="rect" id="node34" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="971,1384,1148,1425"/>
<area shape="rect" id="node36" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="732,872,896,913"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="985,464,1134,505"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="977,937,1141,979"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="960,1003,1159,1044"/>
<area shape="rect" id="node39" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="993,529,1125,571"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="984,676,1135,717"/>
<area shape="rect" id="node41" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="982,1069,1137,1125"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="952,872,1167,913"/>
<area shape="rect" id="node45" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="989,741,1129,783"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="967,807,1151,848"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="985,595,1133,651"/>
<area shape="rect" id="node42" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="1233,989,1407,1045"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1246,809,1394,865"/>
<area shape="rect" id="node49" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="1225,727,1415,768"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adeff9d74f6979c888a0155e67466cf2a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="255,5,421,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="236,85,440,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="236,165,440,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="239,245,437,301"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="239,325,437,381"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="488,5,663,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="490,85,661,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="490,165,661,221"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="493,245,657,301"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="493,325,657,381"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7f9205c706c8be3ad4f0c030a285d884"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::lookup_for_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>snapshot_page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">535</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__id_8hpp_source.html#l00086">foedus::storage::array::ArrayRange::begin_</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__id_8hpp_source.html#l00079">foedus::storage::array::ArrayRange::contains()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">exists()</a>, <a class="el" href="array__route_8hpp_source.html#l00134">foedus::storage::array::LookupRouteFinder::find_route()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00304">follow_pointer()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00072">foedus::storage::array::ArrayPage::get_array_range()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00112">get_levels()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00337">locate_record_for_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                       {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">exists</a>());</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a>());</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  ArrayPage* current_page;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a>(context, <span class="keyword">false</span>, &amp;current_page));</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  uint16_t levels = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">get_levels</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  LookupRoute route = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a>.<a class="code" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">find_route</a>(offset);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordtype">bool</span> in_snapshot = current_page-&gt;header().snapshot_;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">for</span> (uint8_t level = levels - 1; level &gt; 0; --level) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    DualPagePointer&amp; pointer = current_page-&gt;get_interior_record(route.route[level]);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1">follow_pointer</a>(</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      context,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      in_snapshot,</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keyword">false</span>,</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      &amp;pointer,</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      &amp;current_page,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      current_page,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      route.route[level]));</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    in_snapshot = current_page-&gt;header().snapshot_;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;is_leaf());</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().begin_ + route.route[0] == offset);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_.is_valid());</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  *out = current_page;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  *index = route.route[0];</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  *snapshot_page = (*out)-&gt;header().snapshot_;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_abae9ebd099ebba507d98b8df782bd143"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">foedus::storage::array::ArrayStoragePimpl::get_root_page</a></div><div class="ttdeci">ErrorCode get_root_page(thread::Thread *context, bool for_write, ArrayPage **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00337">array_storage_pimpl.hpp:337</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af7175d943ce05a4fdca76d15638dac4e"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">foedus::storage::array::ArrayStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00109">array_storage_pimpl.hpp:109</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ab4aecf5370150176a5a148c27f1b1bcc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">foedus::storage::array::ArrayStoragePimpl::get_levels</a></div><div class="ttdeci">uint16_t get_levels() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00112">array_storage_pimpl.hpp:112</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder_html_a9acd8da755296ccc35526dacd8ba8d73"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">foedus::storage::array::LookupRouteFinder::find_route</a></div><div class="ttdeci">LookupRoute find_route(ArrayOffset offset) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__route_8hpp_source.html#l00134">array_route.hpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae3cd53ce6ea97f63981defcb2f18f0b2"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">foedus::storage::array::ArrayStoragePimpl::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00117">array_storage_pimpl.hpp:117</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae0f40ca19aa9b9ac924542746e1b53c1"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1">foedus::storage::array::ArrayStoragePimpl::follow_pointer</a></div><div class="ttdeci">ErrorCode follow_pointer(thread::Thread *context, bool in_snapshot, bool for_write, DualPagePointer *pointer, ArrayPage **out, const ArrayPage *parent, uint16_t index_in_parent) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00304">array_storage_pimpl.hpp:304</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="265,5,419,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="251,71,433,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="239,136,445,177"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="253,937,431,993"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="733,319,925,360"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1015,662,1163,718"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1273,1037,1421,1079"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="501,1027,666,1083"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="522,661,645,703"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="501,1107,666,1163"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="261,1169,423,1225"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="259,1249,425,1305"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="259,1329,425,1385"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="268,1409,416,1451"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="493,55,673,111"/>
<area shape="rect" id="node6" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="495,136,672,177"/>
<area shape="rect" id="node7" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="740,136,917,177"/>
<area shape="rect" id="node9" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="501,727,665,768"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="754,1004,903,1045"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="508,1336,659,1377"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="747,384,911,425"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="729,449,928,491"/>
<area shape="rect" id="node13" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="763,515,895,556"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="753,580,904,621"/>
<area shape="rect" id="node15" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="751,646,906,702"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="721,727,936,768"/>
<area shape="rect" id="node19" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="759,792,899,833"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="737,857,921,899"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="755,923,903,979"/>
<area shape="rect" id="node16" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="1002,742,1177,798"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1015,822,1163,878"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="994,903,1185,944"/>
<area shape="rect" id="node27" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1012,969,1167,995"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1267,757,1427,783"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="737,1492,921,1533"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1521,1485,1682,1527"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1953,1492,2103,1533"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="984,1740,1195,1781"/>
<area shape="rect" id="node33" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1509,1615,1693,1671"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1521,1292,1682,1333"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1751,1317,1905,1359"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1254,1391,1441,1432"/>
<area shape="rect" id="node37" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1500,1364,1703,1405"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="997,1623,1181,1664"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1243,1740,1452,1781"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1020,1492,1159,1533"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1019,1557,1160,1599"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="728,1121,929,1163"/>
<area shape="rect" id="node45" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="767,253,890,295"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7f9205c706c8be3ad4f0c030a285d884_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="239,85,421,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="469,5,635,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="469,85,635,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="469,165,635,221"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="683,13,857,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="683,85,857,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="683,165,857,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a86a1e1fb54d44f15bc17c3f622f9f279"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::lookup_for_read_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *&#160;</td>
          <td class="paramname"><em>offset_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>index_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>snapshot_page_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">794</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="storage__id_8hpp_source.html#l00230">foedus::storage::construct_volatile_page_pointer()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="storage__id_8hpp_source.html#l00091">foedus::storage::extract_local_page_id_from_snapshot_pointer()</a>, <a class="el" href="array__route_8hpp_source.html#l00134">foedus::storage::array::LookupRouteFinder::find_route()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l01010">follow_pointers_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00112">get_levels()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="cacheline_8hpp_source.html#l00049">foedus::assorted::prefetch_cacheline()</a>, <a class="el" href="array__route_8hpp_source.html#l00048">foedus::storage::array::LookupRoute::route</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00767">locate_record_for_read_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                             {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  LookupRoute routes[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  ArrayPage* root_page;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a>(context, <span class="keyword">false</span>, &amp;root_page));</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  uint16_t levels = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">get_levels</a>();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordtype">bool</span> root_snapshot = root_page-&gt;header().snapshot_;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keyword">const</span> uint16_t payload_size = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>();</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset_batch[i] &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a>());</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    routes[i] = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a>.<a class="code" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">find_route</a>(offset_batch[i]);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">if</span> (levels &lt;= 1U) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(root_page-&gt;get_leaf_record(</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        routes[i].route[0],</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        payload_size));</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(&amp;root_page-&gt;get_interior_record(routes[i].route[levels - 1]));</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    out_batch[i] = root_page;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    snapshot_page_batch[i] = root_snapshot;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out_batch[i]-&gt;get_array_range().contains(offset_batch[i]));</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    index_batch[i] = routes[i].route[levels - 1];</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">for</span> (uint8_t level = levels - 1; level &gt; 0; --level) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">// note that we use out_batch as both input (parents) and output (the pages) here.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="comment">// the method works in that case too.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092">follow_pointers_for_read_batch</a>(</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      context,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      batch_size,</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      snapshot_page_batch,</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      out_batch,</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      index_batch,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      out_batch));</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(snapshot_page_batch[i] == out_batch[i]-&gt;header().snapshot_);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out_batch[i]-&gt;get_storage_id() == <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>());</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(snapshot_page_batch[i]</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        || !<a class="code" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">construct_volatile_page_pointer</a>(out_batch[i]-&gt;header().page_id_).is_null());</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!snapshot_page_batch[i]</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        || <a class="code" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be">extract_local_page_id_from_snapshot_pointer</a>(out_batch[i]-&gt;header().page_id_));</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">if</span> (level == 1U) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(out_batch[i]-&gt;get_leaf_record(</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;          routes[i].route[0],</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;          payload_size));</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;          &amp;out_batch[i]-&gt;get_interior_record(routes[i].route[levels - 1]));</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      index_batch[i] = routes[i].route[level - 1];</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  }</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out_batch[i]-&gt;is_leaf());</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out_batch[i]-&gt;get_array_range().contains(offset_batch[i]));</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out_batch[i]-&gt;get_array_range().begin_ + routes[i].route[0] == offset_batch[i]);</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index_batch[i] == routes[i].route[0]);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      out_batch[i]-&gt;get_leaf_record(index_batch[i], payload_size)-&gt;owner_id_.xct_id_.is_valid());</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a3c3e7a984303d1ef88e001db1591b1be"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be">foedus::storage::extract_local_page_id_from_snapshot_pointer</a></div><div class="ttdeci">SnapshotLocalPageId extract_local_page_id_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00091">storage_id.hpp:91</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga354bfce84ebf918859d54ba97b8ddc36"><div class="ttname"><a href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">foedus::assorted::prefetch_cacheline</a></div><div class="ttdeci">void prefetch_cacheline(const void *address)</div><div class="ttdoc">Prefetch one cacheline to L1 cache. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00049">cacheline.hpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_abae9ebd099ebba507d98b8df782bd143"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">foedus::storage::array::ArrayStoragePimpl::get_root_page</a></div><div class="ttdeci">ErrorCode get_root_page(thread::Thread *context, bool for_write, ArrayPage **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00337">array_storage_pimpl.hpp:337</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ab4aecf5370150176a5a148c27f1b1bcc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">foedus::storage::array::ArrayStoragePimpl::get_levels</a></div><div class="ttdeci">uint16_t get_levels() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00112">array_storage_pimpl.hpp:112</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder_html_a9acd8da755296ccc35526dacd8ba8d73"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">foedus::storage::array::LookupRouteFinder::find_route</a></div><div class="ttdeci">LookupRoute find_route(ArrayOffset offset) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__route_8hpp_source.html#l00134">array_route.hpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ac71ccdf1742ae0e9a7119cc92fcac092"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092">foedus::storage::array::ArrayStoragePimpl::follow_pointers_for_read_batch</a></div><div class="ttdeci">ErrorCode follow_pointers_for_read_batch(thread::Thread *context, uint16_t batch_size, bool *in_snapshot, ArrayPage **parents, const uint16_t *index_in_parents, ArrayPage **out)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l01010">array_storage_pimpl.cpp:1010</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae3cd53ce6ea97f63981defcb2f18f0b2"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">foedus::storage::array::ArrayStoragePimpl::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00117">array_storage_pimpl.hpp:117</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a67e1af2de6e13b000e66609cf60849b6"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">foedus::storage::construct_volatile_page_pointer</a></div><div class="ttdeci">VolatilePagePointer construct_volatile_page_pointer(uint64_t word)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00230">storage_id.hpp:230</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="255,1139,429,1181"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="242,1205,442,1261"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="239,1286,445,1327"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="253,1432,431,1488"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1013,1273,1161,1329"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="501,1492,663,1548"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="499,1689,665,1745"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="508,1573,656,1614"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="499,1769,665,1825"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="251,1791,433,1833"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="259,1857,425,1913"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="259,1352,425,1408"/>
<area shape="rect" id="node50" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="256,1938,428,1979"/>
<area shape="rect" id="node5" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="493,306,671,347"/>
<area shape="rect" id="node6" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="737,206,915,247"/>
<area shape="rect" id="node8" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="500,965,664,1006"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="751,1259,901,1301"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1246,1281,1394,1322"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="507,641,657,697"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="521,1325,643,1366"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="744,1063,908,1105"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="730,1129,922,1170"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="727,1194,925,1235"/>
<area shape="rect" id="node12" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="760,737,892,778"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="751,802,901,843"/>
<area shape="rect" id="node14" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="749,576,903,632"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="719,867,933,909"/>
<area shape="rect" id="node18" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="756,933,896,974"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="734,998,918,1039"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="752,656,900,712"/>
<area shape="rect" id="node15" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="999,664,1174,720"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1013,744,1161,800"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="991,825,1182,866"/>
<area shape="rect" id="node26" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1009,891,1164,917"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1240,987,1400,1013"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="734,365,918,421"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1017,126,1156,167"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1006,191,1167,233"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="995,533,1179,589"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1245,431,1395,473"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1016,257,1157,298"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="981,387,1192,429"/>
<area shape="rect" id="node35" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="995,453,1179,509"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1006,61,1167,102"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1009,322,1164,363"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="725,1777,927,1818"/>
<area shape="rect" id="node43" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="765,1325,887,1366"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="507,439,657,481"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="734,271,918,313"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a86a1e1fb54d44f15bc17c3f622f9f279_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="239,45,421,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="469,5,635,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="469,85,635,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="683,5,857,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="683,85,857,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10c44402ff1533f5fee533cc13119759"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::lookup_for_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This version always returns a volatile page, installing a new one if needed. </p>

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">574</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__id_8hpp_source.html#l00086">foedus::storage::array::ArrayRange::begin_</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__id_8hpp_source.html#l00079">foedus::storage::array::ArrayRange::contains()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">exists()</a>, <a class="el" href="array__route_8hpp_source.html#l00134">foedus::storage::array::LookupRouteFinder::find_route()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00304">follow_pointer()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00072">foedus::storage::array::ArrayPage::get_array_range()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00112">get_levels()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                   {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">exists</a>());</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a>());</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  ArrayPage* current_page;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a>(context, <span class="keyword">true</span>, &amp;current_page));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!current_page-&gt;header().snapshot_);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  uint16_t levels = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">get_levels</a>();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  LookupRoute route = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a>.<a class="code" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">find_route</a>(offset);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">for</span> (uint8_t level = levels - 1; level &gt; 0; --level) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1">follow_pointer</a>(</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      context,</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keyword">false</span>,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keyword">true</span>,</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      &amp;current_page-&gt;get_interior_record(route.route[level]),</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      &amp;current_page,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      current_page,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      route.route[level]));</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  }</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;is_leaf());</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().contains(offset));</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_array_range().begin_ + route.route[0] == offset);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_page-&gt;get_leaf_record(0, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>())-&gt;owner_id_.xct_id_.is_valid());</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  *out = current_page;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  *index = route.route[0];</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_abae9ebd099ebba507d98b8df782bd143"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">foedus::storage::array::ArrayStoragePimpl::get_root_page</a></div><div class="ttdeci">ErrorCode get_root_page(thread::Thread *context, bool for_write, ArrayPage **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00337">array_storage_pimpl.hpp:337</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af7175d943ce05a4fdca76d15638dac4e"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e">foedus::storage::array::ArrayStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00109">array_storage_pimpl.hpp:109</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ab4aecf5370150176a5a148c27f1b1bcc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">foedus::storage::array::ArrayStoragePimpl::get_levels</a></div><div class="ttdeci">uint16_t get_levels() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00112">array_storage_pimpl.hpp:112</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder_html_a9acd8da755296ccc35526dacd8ba8d73"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">foedus::storage::array::LookupRouteFinder::find_route</a></div><div class="ttdeci">LookupRoute find_route(ArrayOffset offset) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__route_8hpp_source.html#l00134">array_route.hpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae3cd53ce6ea97f63981defcb2f18f0b2"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">foedus::storage::array::ArrayStoragePimpl::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00117">array_storage_pimpl.hpp:117</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae0f40ca19aa9b9ac924542746e1b53c1"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1">foedus::storage::array::ArrayStoragePimpl::follow_pointer</a></div><div class="ttdeci">ErrorCode follow_pointer(thread::Thread *context, bool in_snapshot, bool for_write, DualPagePointer *pointer, ArrayPage **out, const ArrayPage *parent, uint16_t index_in_parent) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00304">array_storage_pimpl.hpp:304</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="265,5,419,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="251,71,433,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="239,136,445,177"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="253,937,431,993"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="733,319,925,360"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1015,662,1163,718"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1273,1037,1421,1079"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="501,1027,666,1083"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="522,661,645,703"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="501,1107,666,1163"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="261,1169,423,1225"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="259,1249,425,1305"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="259,1329,425,1385"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="268,1409,416,1451"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="493,55,673,111"/>
<area shape="rect" id="node6" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="495,136,672,177"/>
<area shape="rect" id="node7" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="740,136,917,177"/>
<area shape="rect" id="node9" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="501,727,665,768"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="754,1004,903,1045"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="508,1336,659,1377"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="747,384,911,425"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="729,449,928,491"/>
<area shape="rect" id="node13" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="763,515,895,556"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="753,580,904,621"/>
<area shape="rect" id="node15" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="751,646,906,702"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="721,727,936,768"/>
<area shape="rect" id="node19" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="759,792,899,833"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="737,857,921,899"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="755,923,903,979"/>
<area shape="rect" id="node16" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="1002,742,1177,798"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1015,822,1163,878"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="994,903,1185,944"/>
<area shape="rect" id="node27" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1012,969,1167,995"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1267,757,1427,783"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="737,1492,921,1533"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1521,1485,1682,1527"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1953,1492,2103,1533"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="984,1740,1195,1781"/>
<area shape="rect" id="node33" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1509,1615,1693,1671"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1521,1292,1682,1333"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1751,1317,1905,1359"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1254,1391,1441,1432"/>
<area shape="rect" id="node37" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1500,1364,1703,1405"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="997,1623,1181,1664"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1243,1740,1452,1781"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1020,1492,1159,1533"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1019,1557,1160,1599"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="728,1121,929,1163"/>
<area shape="rect" id="node45" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="767,253,890,295"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a10c44402ff1533f5fee533cc13119759_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="239,165,421,221"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="489,5,654,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="469,85,673,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="469,165,673,221"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="473,245,670,301"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3ee9fdf4da9f172082841c1774a761da" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="473,325,670,381"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="721,5,896,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="723,85,894,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="723,165,894,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="727,245,891,301"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="727,325,891,381"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a77af2675acbbf1c831925b3a2c972aa6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::lookup_for_write_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> *&#160;</td>
          <td class="paramname"><em>offset_batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> **&#160;</td>
          <td class="paramname"><em>record_batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">864</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="storage__id_8hpp_source.html#l00230">foedus::storage::construct_volatile_page_pointer()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__route_8hpp_source.html#l00134">foedus::storage::array::LookupRouteFinder::find_route()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l01075">follow_pointers_for_write_batch()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00117">get_array_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00112">get_levels()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00092">kBatchMax</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="cacheline_8hpp_source.html#l00049">foedus::assorted::prefetch_cacheline()</a>, <a class="el" href="array__route_8hpp_source.html#l00048">foedus::storage::array::LookupRoute::route</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00746">get_record_for_write_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                         {</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  ArrayPage* pages[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  LookupRoute routes[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  uint16_t index_batch[<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">kBatchMax</a>];</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  ArrayPage* root_page;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a>(context, <span class="keyword">true</span>, &amp;root_page));</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!root_page-&gt;header().snapshot_);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  uint16_t levels = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">get_levels</a>();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keyword">const</span> uint16_t payload_size = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset_batch[i] &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">get_array_size</a>());</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    routes[i] = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a>.<a class="code" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">find_route</a>(offset_batch[i]);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (levels &lt;= 1U) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(root_page-&gt;get_leaf_record(</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        routes[i].route[0],</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        payload_size));</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(&amp;root_page-&gt;get_interior_record(routes[i].route[levels - 1]));</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    pages[i] = root_page;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pages[i]-&gt;get_array_range().contains(offset_batch[i]));</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    index_batch[i] = routes[i].route[levels - 1];</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  }</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keywordflow">for</span> (uint8_t level = levels - 1; level &gt; 0; --level) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="comment">// as noted above, in==out case.</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31">follow_pointers_for_write_batch</a>(</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      context,</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      batch_size,</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      pages,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      index_batch,</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      pages));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!pages[i]-&gt;header().snapshot_);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pages[i]-&gt;get_storage_id() == <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>());</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">construct_volatile_page_pointer</a>(pages[i]-&gt;header().page_id_).is_null());</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      <span class="keywordflow">if</span> (level == 1U) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(pages[i]-&gt;get_leaf_record(</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;          routes[i].route[0],</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;          payload_size));</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <a class="code" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">assorted::prefetch_cacheline</a>(</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;          &amp;pages[i]-&gt;get_interior_record(routes[i].route[levels - 1]));</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      index_batch[i] = routes[i].route[level - 1];</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; batch_size; ++i) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pages[i]-&gt;is_leaf());</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pages[i]-&gt;get_array_range().contains(offset_batch[i]));</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pages[i]-&gt;get_array_range().begin_ + routes[i].route[0] == offset_batch[i]);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index_batch[i] == routes[i].route[0]);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    record_batch[i] = pages[i]-&gt;get_leaf_record(routes[i].route[0], payload_size);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ad0c8eb92d19915b679137e594bdfae31"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31">foedus::storage::array::ArrayStoragePimpl::follow_pointers_for_write_batch</a></div><div class="ttdeci">ErrorCode follow_pointers_for_write_batch(thread::Thread *context, uint16_t batch_size, ArrayPage **parents, const uint16_t *index_in_parents, ArrayPage **out)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l01075">array_storage_pimpl.cpp:1075</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga354bfce84ebf918859d54ba97b8ddc36"><div class="ttname"><a href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36">foedus::assorted::prefetch_cacheline</a></div><div class="ttdeci">void prefetch_cacheline(const void *address)</div><div class="ttdoc">Prefetch one cacheline to L1 cache. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00049">cacheline.hpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_abae9ebd099ebba507d98b8df782bd143"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">foedus::storage::array::ArrayStoragePimpl::get_root_page</a></div><div class="ttdeci">ErrorCode get_root_page(thread::Thread *context, bool for_write, ArrayPage **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00337">array_storage_pimpl.hpp:337</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a63053a4fd666359edd6351a43642238aa15d0957ecd34cc4c92f0f6555b6cd24c">foedus::storage::array::ArrayStoragePimpl::kBatchMax</a></div><div class="ttdoc">If you want more than this, you should loop. </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00092">array_storage_pimpl.hpp:92</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ab4aecf5370150176a5a148c27f1b1bcc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc">foedus::storage::array::ArrayStoragePimpl::get_levels</a></div><div class="ttdeci">uint16_t get_levels() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00112">array_storage_pimpl.hpp:112</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder_html_a9acd8da755296ccc35526dacd8ba8d73"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73">foedus::storage::array::LookupRouteFinder::find_route</a></div><div class="ttdeci">LookupRoute find_route(ArrayOffset offset) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__route_8hpp_source.html#l00134">array_route.hpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ae3cd53ce6ea97f63981defcb2f18f0b2"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2">foedus::storage::array::ArrayStoragePimpl::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00117">array_storage_pimpl.hpp:117</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a67e1af2de6e13b000e66609cf60849b6"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">foedus::storage::construct_volatile_page_pointer</a></div><div class="ttdeci">VolatilePagePointer construct_volatile_page_pointer(uint64_t word)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00230">storage_id.hpp:230</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1748,158,1921,199"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="239,2197,445,2238"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="253,1781,431,1837"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1013,1592,1161,1648"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="501,1872,663,1928"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="499,1952,665,2008"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="508,2033,656,2074"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="259,2051,425,2107"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="251,2131,433,2173"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="259,2263,425,2319"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="259,779,425,835"/>
<area shape="rect" id="node50" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="256,2343,428,2385"/>
<area shape="rect" id="node4" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="493,2201,671,2242"/>
<area shape="rect" id="node5" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="737,2201,915,2242"/>
<area shape="rect" id="node7" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="500,1329,664,1370"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="751,1639,901,1681"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1271,1731,1419,1773"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="507,864,657,920"/>
<area shape="rect" id="node42" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="521,1705,643,1746"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="744,1362,908,1403"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="730,1427,922,1469"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="727,1493,925,1534"/>
<area shape="rect" id="node11" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="760,1035,892,1077"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="751,1101,901,1142"/>
<area shape="rect" id="node13" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="749,904,903,960"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="719,1166,933,1207"/>
<area shape="rect" id="node17" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="756,1231,896,1273"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="734,1297,918,1338"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="752,1559,900,1615"/>
<area shape="rect" id="node14" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="999,1117,1174,1173"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1013,1512,1161,1568"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="991,1673,1182,1714"/>
<area shape="rect" id="node25" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1009,1461,1164,1488"/>
<area shape="rect" id="node21" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1265,1567,1425,1593"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="734,824,918,880"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1518,439,1679,481"/>
<area shape="rect" id="node29" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1497,622,1700,663"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1757,563,1912,605"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1969,563,2119,605"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="995,427,1179,469"/>
<area shape="rect" id="node34" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1507,527,1691,583"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1251,731,1438,773"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1518,790,1679,831"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="981,697,1192,738"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1240,209,1449,250"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="725,2091,927,2133"/>
<area shape="rect" id="node43" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="765,1705,887,1746"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="507,586,657,627"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="734,486,918,527"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a77af2675acbbf1c831925b3a2c972aa6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="239,5,404,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="452,5,627,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7d21cd23923f93d072a1a182cae6f412"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::overwrite_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00432">432</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00096">foedus::storage::array::ArrayStorage::overwrite_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                                                                            {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_offset + payload_count &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">locate_record_for_write</a>(context, offset, &amp;record));</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412">overwrite_record</a>(context, offset, record, payload, payload_offset, payload_count);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adeff9d74f6979c888a0155e67466cf2a"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">foedus::storage::array::ArrayStoragePimpl::locate_record_for_write</a></div><div class="ttdeci">ErrorCode locate_record_for_write(thread::Thread *context, ArrayOffset offset, Record **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00355">array_storage_pimpl.cpp:355</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a7d21cd23923f93d072a1a182cae6f412"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d21cd23923f93d072a1a182cae6f412">foedus::storage::array::ArrayStoragePimpl::overwrite_record</a></div><div class="ttdeci">ErrorCode overwrite_record(thread::Thread *context, ArrayOffset offset, const void *payload, uint16_t payload_offset, uint16_t payload_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00432">array_storage_pimpl.cpp:432</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="977,1292,1142,1348"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="251,702,433,758"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1204,1363,1405,1404"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="741,1291,895,1332"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="727,168,909,210"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="1209,155,1401,196"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="735,1357,901,1413"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1491,89,1639,145"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1749,372,1897,414"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="998,952,1121,994"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="481,897,667,953"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="969,104,1149,160"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1743,184,1903,210"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1243,956,1366,998"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="715,1094,921,1135"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="729,832,907,888"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="737,1160,899,1216"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="735,573,901,629"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="735,1013,901,1069"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="744,766,892,807"/>
<area shape="rect" id="node17" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="971,1182,1148,1223"/>
<area shape="rect" id="node18" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1216,1296,1393,1338"/>
<area shape="rect" id="node20" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="977,643,1141,684"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="1230,839,1379,880"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="984,1070,1135,1111"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="1223,382,1387,423"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="1205,447,1404,488"/>
<area shape="rect" id="node23" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="1239,512,1371,554"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="1229,578,1380,619"/>
<area shape="rect" id="node25" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="1227,221,1382,277"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="1197,643,1412,684"/>
<area shape="rect" id="node29" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="1235,708,1375,750"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="1213,774,1397,815"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="1231,301,1379,357"/>
<area shape="rect" id="node26" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="1478,169,1653,225"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1491,249,1639,305"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="1470,431,1661,472"/>
<area shape="rect" id="node34" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1488,329,1643,356"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1213,1231,1397,1272"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1997,1387,2158,1428"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2429,1368,2579,1410"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1460,1394,1671,1435"/>
<area shape="rect" id="node40" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1985,1306,2169,1362"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1997,1124,2158,1166"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="2227,1139,2381,1180"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1730,1226,1917,1267"/>
<area shape="rect" id="node44" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1976,1190,2179,1231"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1473,1459,1657,1500"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1719,1546,1928,1587"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d21cd23923f93d072a1a182cae6f412_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5fe59a512f951b17e2524fd153a9d991" title="Overwrites a part of one record of the given offset in this array storage. " alt="" coords="251,5,415,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7dde5581eee977242b5373e30365183f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::overwrite_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> *&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00449">449</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00444">foedus::xct::Xct::add_to_write_set()</a>, <a class="el" href="array__log__types_8hpp_source.html#l00115">foedus::storage::array::ArrayOverwriteLogType::calculate_log_length()</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="thread_8cpp_source.html#l00078">foedus::thread::Thread::get_thread_log_buffer()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>, <a class="el" href="array__log__types_8hpp_source.html#l00230">foedus::storage::array::ArrayOverwriteLogType::populate()</a>, and <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                          {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  uint16_t log_length = <a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f">ArrayOverwriteLogType::calculate_log_length</a>(payload_count);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  ArrayOverwriteLogType* log_entry = <span class="keyword">reinterpret_cast&lt;</span>ArrayOverwriteLogType*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    context-&gt;get_thread_log_buffer().reserve_new_log(log_length));</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  log_entry-&gt;populate(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(), offset, payload, payload_offset, payload_count);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <span class="keywordflow">return</span> context-&gt;get_current_xct().add_to_write_set(</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(),</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    &amp;record-&gt;owner_id_,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    record-&gt;payload_,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    log_entry);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType_html_a91cb4afcdb444d2b876c8e7767626f8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f">foedus::storage::array::ArrayOverwriteLogType::calculate_log_length</a></div><div class="ttdeci">static uint16_t calculate_log_length(uint16_t payload_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__log__types_8hpp_source.html#l00115">array_log_types.hpp:115</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7dde5581eee977242b5373e30365183f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7dde5581eee977242b5373e30365183f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7dde5581eee977242b5373e30365183f_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7dde5581eee977242b5373e30365183f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="273,209,415,251"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f" title="foedus::storage::array\l::ArrayOverwriteLogType\l::calculate_log_length" alt="" coords="263,305,425,361"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="269,385,419,427"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="253,451,435,492"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="267,516,421,557"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a9a0edf7a63a271b5ca04f5bc48824848" title="foedus::storage::array\l::ArrayOverwriteLogType\l::populate" alt="" coords="263,582,425,638"/>
<area shape="rect" id="node29" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="251,663,437,704"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="500,202,672,258"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="499,283,673,324"/>
<area shape="rect" id="node15" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="521,136,651,177"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="485,71,687,112"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="756,275,911,331"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1245,153,1419,195"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1502,357,1651,399"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="980,267,1183,308"/>
<area shape="rect" id="node14" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="999,333,1164,359"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1255,219,1409,260"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1231,285,1433,341"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1499,288,1654,329"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1496,92,1657,133"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1481,219,1672,260"/>
<area shape="rect" id="node16" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="756,136,911,177"/>
<area shape="rect" id="node18" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="761,71,906,112"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="735,5,932,47"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1000,71,1163,112"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1235,88,1429,129"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="506,349,666,375"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="485,451,687,492"/>
<area shape="rect" id="node30" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="493,604,679,645"/>
<area shape="rect" id="node31" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="740,625,927,667"/>
<area shape="rect" id="node33" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="493,789,679,831"/>
<area shape="rect" id="node32" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a824cf26a13eb7f42d5ae68f5725098c5" title="Subtract operator, considering wrapping around. " alt="" coords="988,625,1175,667"/>
<area shape="rect" id="node34" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9aa20c59a7d75cf94742beb43b777de6" title="Only for Debug&#45;assertion. " alt="" coords="740,952,927,993"/>
<area shape="rect" id="node38" href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc" title="See Log Manager. " alt="" coords="766,1017,901,1059"/>
<area shape="rect" id="node39" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="766,691,901,732"/>
<area shape="rect" id="node40" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="747,756,920,797"/>
<area shape="rect" id="node41" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="747,821,920,863"/>
<area shape="rect" id="node42" href="classfoedus_1_1log_1_1LogManager.html#a5c844c3bc8d71ce709999fd286a5e7b8" title="Wake up loggers if they are sleeping. " alt="" coords="751,887,915,928"/>
<area shape="rect" id="node35" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a05db4e7c61f07d2320aa7b2c3c76d520" title="Only for Debug&#45;assertion. " alt="" coords="988,952,1175,993"/>
<area shape="rect" id="node36" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621" title="foedus::log::ThreadLogBuffer\lMeta::increment_mark_index" alt="" coords="1237,923,1427,964"/>
<area shape="rect" id="node37" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1255,989,1409,1015"/>
<area shape="rect" id="node43" href="classfoedus_1_1log_1_1LogManagerPimpl.html#ae0a0fc275f36ad22a57786bc7d17413e" title="foedus::log::LogManagerPimpl\l::wakeup_loggers" alt="" coords="983,887,1180,928"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3ee9fdf4da9f172082841c1774a761da"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::overwrite_record_primitive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00441">441</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00355">locate_record_for_write()</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00107">foedus::storage::array::ArrayStorage::overwrite_record_primitive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_offset + <span class="keyword">sizeof</span>(T) &lt;= <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  Record *record = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">locate_record_for_write</a>(context, offset, &amp;record));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">return</span> overwrite_record_primitive&lt;T&gt;(context, offset, record, payload, payload_offset);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_adeff9d74f6979c888a0155e67466cf2a"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a">foedus::storage::array::ArrayStoragePimpl::locate_record_for_write</a></div><div class="ttdeci">ErrorCode locate_record_for_write(thread::Thread *context, ArrayOffset offset, Record **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00355">array_storage_pimpl.cpp:355</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="977,1292,1142,1348"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="251,702,433,758"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="1204,1363,1405,1404"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="741,1291,895,1332"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af7175d943ce05a4fdca76d15638dac4e" title="foedus::storage::array\l::ArrayStoragePimpl::exists" alt="" coords="727,168,909,210"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="1209,155,1401,196"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae3cd53ce6ea97f63981defcb2f18f0b2" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_array_size" alt="" coords="735,1357,901,1413"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="1491,89,1639,145"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="1749,372,1897,414"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="998,952,1121,994"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="481,897,667,953"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#aeca5199006d225457f33c70c09d508a5" title="foedus::storage::array\l::ArrayStorageControlBlock\l::exists" alt="" coords="969,104,1149,160"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1743,184,1903,210"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1243,956,1366,998"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a9acd8da755296ccc35526dacd8ba8d73" title="foedus::storage::array\l::LookupRouteFinder::find_route" alt="" coords="715,1094,921,1135"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="729,832,907,888"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="737,1160,899,1216"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab4aecf5370150176a5a148c27f1b1bcc" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_levels" alt="" coords="735,573,901,629"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="735,1013,901,1069"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="744,766,892,807"/>
<area shape="rect" id="node17" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="971,1182,1148,1223"/>
<area shape="rect" id="node18" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1216,1296,1393,1338"/>
<area shape="rect" id="node20" href="group__ARRAY.html#ga3b7fb001a1608242302069b8aa85eb91" title="volatile page initialize callback for ArrayPage. " alt="" coords="977,643,1141,684"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="1230,839,1379,880"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="984,1070,1135,1111"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="1223,382,1387,423"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="1205,447,1404,488"/>
<area shape="rect" id="node23" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="1239,512,1371,554"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#a64fa1150b812810a2697bd6293aaac9a" title="foedus::thread::Thread\l::get_engine" alt="" coords="1229,578,1380,619"/>
<area shape="rect" id="node25" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="1227,221,1382,277"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acc05e0b608094e78fa9a7025c08524b5" title="Returns byte size of one record in this array storage without internal overheads. ..." alt="" coords="1197,643,1412,684"/>
<area shape="rect" id="node29" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="1235,708,1375,750"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a6ca84715dc16f27640c7fbaaa2e22541" title="foedus::storage::array\l::ArrayPage::get_storage_id" alt="" coords="1213,774,1397,815"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ac2c4739bd0b33158b22b519faa47c5b2" title="foedus::storage::array\l::ArrayPage::initialize\l_volatile_page" alt="" coords="1231,301,1379,357"/>
<area shape="rect" id="node26" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="1478,169,1653,225"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="1491,249,1639,305"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="1470,431,1661,472"/>
<area shape="rect" id="node34" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1488,329,1643,356"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1213,1231,1397,1272"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1997,1387,2158,1428"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2429,1368,2579,1410"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1460,1394,1671,1435"/>
<area shape="rect" id="node40" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1985,1306,2169,1362"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1997,1124,2158,1166"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="2227,1139,2381,1180"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1730,1226,1917,1267"/>
<area shape="rect" id="node44" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1976,1190,2179,1231"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1473,1459,1657,1500"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1719,1546,1928,1587"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a3ee9fdf4da9f172082841c1774a761da_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aaa646f67578c221ef982e28fffdd76e4" title="Overwrites a part of record of the given offset as a primitive type in this array storage..." alt="" coords="251,5,415,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7d324da4dcd35490820cb97e7124001b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::overwrite_record_primitive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">Record</a> *&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00468">468</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00444">foedus::xct::Xct::add_to_write_set()</a>, <a class="el" href="array__log__types_8hpp_source.html#l00115">foedus::storage::array::ArrayOverwriteLogType::calculate_log_length()</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00111">get_id()</a>, <a class="el" href="thread_8cpp_source.html#l00078">foedus::thread::Thread::get_thread_log_buffer()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>, <a class="el" href="array__log__types_8hpp_source.html#l00246">foedus::storage::array::ArrayOverwriteLogType::populate_primitive()</a>, and <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                           {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  uint16_t log_length = <a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f">ArrayOverwriteLogType::calculate_log_length</a>(<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  ArrayOverwriteLogType* log_entry = <span class="keyword">reinterpret_cast&lt;</span>ArrayOverwriteLogType*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    context-&gt;get_thread_log_buffer().reserve_new_log(log_length));</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  log_entry-&gt;populate_primitive&lt;T&gt;(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(), offset, payload, payload_offset);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> context-&gt;get_current_xct().add_to_write_set(</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">get_id</a>(),</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    &amp;record-&gt;owner_id_,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    record-&gt;payload_,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    log_entry);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType_html_a91cb4afcdb444d2b876c8e7767626f8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f">foedus::storage::array::ArrayOverwriteLogType::calculate_log_length</a></div><div class="ttdeci">static uint16_t calculate_log_length(uint16_t payload_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__log__types_8hpp_source.html#l00115">array_log_types.hpp:115</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8a21a13b165bfe75387d21446ad8758c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c">foedus::storage::array::ArrayStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00111">array_storage_pimpl.hpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d324da4dcd35490820cb97e7124001b_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d324da4dcd35490820cb97e7124001b_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d324da4dcd35490820cb97e7124001b_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a7d324da4dcd35490820cb97e7124001b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="273,209,415,251"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a91cb4afcdb444d2b876c8e7767626f8f" title="foedus::storage::array\l::ArrayOverwriteLogType\l::calculate_log_length" alt="" coords="263,305,425,361"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3" title="Returns the transaction that is currently running on this thread. " alt="" coords="269,385,419,427"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8a21a13b165bfe75387d21446ad8758c" title="foedus::storage::array\l::ArrayStoragePimpl::get_id" alt="" coords="253,451,435,492"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee" title="Returns the private log buffer for this thread. " alt="" coords="267,516,421,557"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1array_1_1ArrayOverwriteLogType.html#a823803709eb1866c0c2192c272102e8f" title="For primitive types. " alt="" coords="263,582,425,638"/>
<area shape="rect" id="node29" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="251,663,437,704"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="500,202,672,258"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="499,283,673,324"/>
<area shape="rect" id="node15" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="521,136,651,177"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="485,71,687,112"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="756,275,911,331"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1245,153,1419,195"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1502,357,1651,399"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="980,267,1183,308"/>
<area shape="rect" id="node14" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="999,333,1164,359"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1255,219,1409,260"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1231,285,1433,341"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1499,288,1654,329"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1496,92,1657,133"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1481,219,1672,260"/>
<area shape="rect" id="node16" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="756,136,911,177"/>
<area shape="rect" id="node18" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="761,71,906,112"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="735,5,932,47"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1000,71,1163,112"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1235,88,1429,129"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="506,349,666,375"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="485,451,687,492"/>
<area shape="rect" id="node30" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a6e105bf908004fd08f79432b326067bc" title="Addition operator, considering wrapping around. " alt="" coords="493,604,679,645"/>
<area shape="rect" id="node31" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af9fcb5a5ae968d079ee20e51e7418967" title="foedus::log::ThreadLogBuffer\l::head_to_tail_distance" alt="" coords="740,625,927,667"/>
<area shape="rect" id="node33" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="493,789,679,831"/>
<area shape="rect" id="node32" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a824cf26a13eb7f42d5ae68f5725098c5" title="Subtract operator, considering wrapping around. " alt="" coords="988,625,1175,667"/>
<area shape="rect" id="node34" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9aa20c59a7d75cf94742beb43b777de6" title="Only for Debug&#45;assertion. " alt="" coords="740,952,927,993"/>
<area shape="rect" id="node38" href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc" title="See Log Manager. " alt="" coords="766,1017,901,1059"/>
<area shape="rect" id="node39" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="766,691,901,732"/>
<area shape="rect" id="node40" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="747,756,920,797"/>
<area shape="rect" id="node41" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="747,821,920,863"/>
<area shape="rect" id="node42" href="classfoedus_1_1log_1_1LogManager.html#a5c844c3bc8d71ce709999fd286a5e7b8" title="Wake up loggers if they are sleeping. " alt="" coords="751,887,915,928"/>
<area shape="rect" id="node35" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a05db4e7c61f07d2320aa7b2c3c76d520" title="Only for Debug&#45;assertion. " alt="" coords="988,952,1175,993"/>
<area shape="rect" id="node36" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621" title="foedus::log::ThreadLogBuffer\lMeta::increment_mark_index" alt="" coords="1237,923,1427,964"/>
<area shape="rect" id="node37" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="1255,989,1409,1015"/>
<area shape="rect" id="node43" href="classfoedus_1_1log_1_1LogManagerPimpl.html#ae0a0fc275f36ad22a57786bc7d17413e" title="foedus::log::LogManagerPimpl\l::wakeup_loggers" alt="" coords="983,887,1180,928"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adbf75cfe4ac8c4c5e1e8a32342b66d00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::prefetch_pages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>install_volatile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cache_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>defined in <a class="el" href="array__storage__prefetch_8cpp.html">array_storage_prefetch.cpp</a> </p>

<p>Definition at line <a class="el" href="array__storage__prefetch_8cpp_source.html#l00031">31</a> of file <a class="el" href="array__storage__prefetch_8cpp_source.html">array_storage_prefetch.cpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="stop__watch_8hpp_source.html#l00045">foedus::debugging::StopWatch::elapsed_us()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, <a class="el" href="thread_8cpp_source.html#l00053">foedus::thread::Thread::get_thread_id()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="metadata_8hpp_source.html#l00107">foedus::storage::Metadata::name_</a>, <a class="el" href="page__prefetch_8hpp_source.html#l00034">foedus::storage::prefetch_page_l2()</a>, <a class="el" href="array__storage__prefetch_8cpp_source.html#l00053">prefetch_pages_recurse()</a>, and <a class="el" href="stop__watch_8cpp_source.html#l00035">foedus::debugging::StopWatch::stop()</a>.</p>

<p>Referenced by <a class="el" href="array__storage_8cpp_source.html#l00071">foedus::storage::array::ArrayStorage::prefetch_pages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                  {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  debugging::StopWatch watch;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; context-&gt;get_thread_id()</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; prefetching &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>().<a class="code" href="structfoedus_1_1storage_1_1Metadata.html#a0db8672e0efd0ed879c109dbef07c418">name_</a> &lt;&lt; <span class="stringliteral">&quot; from=&quot;</span> &lt;&lt; from &lt;&lt; <span class="stringliteral">&quot;, to=&quot;</span> &lt;&lt; to;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  ArrayPage* root_page;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a>(context, vol_on, &amp;root_page));</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3">prefetch_page_l2</a>(root_page);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">if</span> (!root_page-&gt;is_leaf()) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879">prefetch_pages_recurse</a>(context, vol_on, snp_on, from, to, root_page));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  watch.stop();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; context-&gt;get_thread_id()</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; prefetched &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">get_meta</a>().<a class="code" href="structfoedus_1_1storage_1_1Metadata.html#a0db8672e0efd0ed879c109dbef07c418">name_</a> &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; watch.elapsed_us() &lt;&lt; <span class="stringliteral">&quot;us&quot;</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a0611bafe6b93b9b860330375cb805fdc"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc">foedus::storage::array::ArrayStoragePimpl::get_meta</a></div><div class="ttdeci">const ArrayMetadata &amp; get_meta() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00110">array_storage_pimpl.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_abae9ebd099ebba507d98b8df782bd143"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">foedus::storage::array::ArrayStoragePimpl::get_root_page</a></div><div class="ttdeci">ErrorCode get_root_page(thread::Thread *context, bool for_write, ArrayPage **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00337">array_storage_pimpl.hpp:337</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga9a2f9d6e4c010712ecd8987d65e634c3"><div class="ttname"><a href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3">foedus::storage::prefetch_page_l2</a></div><div class="ttdeci">void prefetch_page_l2(const void *page)</div><div class="ttdoc">Prefetch a page to L2/L3 cache. </div><div class="ttdef"><b>Definition:</b> <a href="page__prefetch_8hpp_source.html#l00034">page_prefetch.hpp:34</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Metadata_html_a0db8672e0efd0ed879c109dbef07c418"><div class="ttname"><a href="structfoedus_1_1storage_1_1Metadata.html#a0db8672e0efd0ed879c109dbef07c418">foedus::storage::Metadata::name_</a></div><div class="ttdeci">StorageName name_</div><div class="ttdoc">the unique name of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="metadata_8hpp_source.html#l00107">metadata.hpp:107</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af22fe9e661763ca3225eeedf7fa62879"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879">foedus::storage::array::ArrayStoragePimpl::prefetch_pages_recurse</a></div><div class="ttdeci">ErrorCode prefetch_pages_recurse(thread::Thread *context, bool install_volatile, bool cache_snapshot, ArrayOffset from, ArrayOffset to, ArrayPage *page)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__prefetch_8cpp_source.html#l00053">array_storage_prefetch.cpp:53</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1debugging_1_1StopWatch.html#a7f1f05f4dd494dd57c3ecafb5d9131fb" title="foedus::debugging::\lStopWatch::elapsed_us" alt="" coords="308,575,469,616"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="288,640,489,681"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="306,706,471,762"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da" title="foedus::thread::Thread\l::get_thread_id" alt="" coords="313,888,464,929"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="315,953,463,995"/>
<area shape="rect" id="node32" href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3" title="Prefetch a page to L2/L3 cache. " alt="" coords="792,771,957,812"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="537,946,731,1002"/>
<area shape="rect" id="node48" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="321,1027,456,1068"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="559,585,709,627"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="783,457,967,499"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1558,668,1719,709"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2039,521,2188,563"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1533,35,1744,76"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1547,333,1731,389"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1558,224,1719,265"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1807,551,1961,592"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1287,399,1474,440"/>
<area shape="rect" id="node17" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1537,492,1740,533"/>
<area shape="rect" id="node18" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1031,617,1215,659"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1276,953,1485,995"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1054,333,1193,375"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1053,399,1194,440"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="2033,668,2194,709"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="2024,5,2203,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1795,35,1973,76"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="1289,151,1473,207"/>
<area shape="rect" id="node20" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1571,836,1706,877"/>
<area shape="rect" id="node21" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="1535,901,1742,943"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1795,843,1973,884"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="1547,967,1731,1008"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1792,996,1976,1037"/>
<area shape="rect" id="node25" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="1535,1084,1742,1125"/>
<area shape="rect" id="node26" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="1557,1149,1720,1191"/>
<area shape="rect" id="node33" href="group__ASSORTED.html#ga776c53f69f97c1edfc5d34a0f6cb3100" title="Prefetch multiple contiguous cachelines to L2/L3 cache. " alt="" coords="1029,785,1218,811"/>
<area shape="rect" id="node34" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1295,1267,1467,1308"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="801,1151,949,1192"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="800,1216,949,1257"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19" title="foedus::storage::array\l::LookupRouteFinder::get\l_records_in_leaf" alt="" coords="791,1282,959,1338"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="779,1363,971,1404"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a9fedf09e1884f7f9d39daac9629aa6e2" title="Returns if there is any overlap with the other range. " alt="" coords="798,953,951,995"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="793,1070,956,1126"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1019,1019,1228,1060"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="795,661,954,703"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="799,836,950,877"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="1046,953,1201,995"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="1048,836,1199,877"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="1305,1333,1456,1389"/>
<area shape="rect" id="node49" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="553,1092,715,1133"/>
<area shape="rect" id="node50" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="567,1027,701,1068"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_adbf75cfe4ac8c4c5e1e8a32342b66d00_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="288,5,491,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af22fe9e661763ca3225eeedf7fa62879"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::array::ArrayStoragePimpl::prefetch_pages_recurse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>install_volatile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cache_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__prefetch_8cpp_source.html#l00053">53</a> of file <a class="el" href="array__storage__prefetch_8cpp_source.html">array_storage_prefetch.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__id_8hpp_source.html#l00086">foedus::storage::array::ArrayRange::begin_</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">control_block_</a>, <a class="el" href="array__id_8hpp_source.html#l00088">foedus::storage::array::ArrayRange::end_</a>, <a class="el" href="thread_8cpp_source.html#l00095">foedus::thread::Thread::find_or_read_a_snapshot_page()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00072">foedus::storage::array::ArrayPage::get_array_range()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00071">foedus::storage::array::ArrayPage::get_level()</a>, <a class="el" href="array__route_8hpp_source.html#l00122">foedus::storage::array::LookupRouteFinder::get_records_in_leaf()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00063">foedus::storage::array::ArrayPage::header()</a>, <a class="el" href="thread_8cpp_source.html#l00107">foedus::thread::Thread::install_a_volatile_page()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="array__id_8hpp_source.html#l00074">foedus::storage::array::ArrayRange::overlaps()</a>, <a class="el" href="page__prefetch_8hpp_source.html#l00034">foedus::storage::prefetch_page_l2()</a>, <a class="el" href="thread_8hpp_source.html#l00110">foedus::thread::Thread::resolve_cast()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00068">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__prefetch_8cpp_source.html#l00031">prefetch_pages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                   {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!page-&gt;header().snapshot_ || !vol_on);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  uint8_t level = page-&gt;get_level();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(level &gt; 0);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> interval = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">route_finder_</a>.<a class="code" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19">get_records_in_leaf</a>();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 1; i &lt; level; ++i) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    interval *= <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">bool</span> in_snapshot = page-&gt;header().snapshot_;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  ArrayRange page_range = page-&gt;get_array_range();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  ArrayRange range(from, to);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_range.overlaps(range));  <span class="comment">// otherwise why we came here...</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_range.begin_ + (interval * <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>) &gt;= page_range.end_);  <span class="comment">// probably==</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>; ++i) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    ArrayRange child_range(</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      page_range.begin_ + i * interval,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      page_range.begin_ + (i + 1U) * interval);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (!range.overlaps(child_range)) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    DualPagePointer&amp; pointer = page-&gt;get_interior_record(i);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// first, do we have to cache snapshot page?</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (pointer.snapshot_pointer_ != 0) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keywordflow">if</span> (snp_on) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        ArrayPage* child;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;find_or_read_a_snapshot_page(</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;          pointer.snapshot_pointer_,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;          reinterpret_cast&lt;Page**&gt;(&amp;child)));</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(child-&gt;get_array_range().begin_ == page_range.begin_ + i * interval);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(range.overlaps(child-&gt;get_array_range()));</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3">prefetch_page_l2</a>(child);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">if</span> (level &gt; 1U) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879">prefetch_pages_recurse</a>(context, <span class="keyword">false</span>, snp_on, from, to, child));</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">// do we have to install volatile page based on it?</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">if</span> (pointer.volatile_pointer_.is_null() &amp;&amp; vol_on &amp;&amp; !in_snapshot) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        ArrayPage* child;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(context-&gt;install_a_volatile_page(</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;          &amp;pointer,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;          reinterpret_cast&lt;Page**&gt;(&amp;child)));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(child-&gt;get_array_range().begin_ == page_range.begin_ + i * interval);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(range.overlaps(child-&gt;get_array_range()));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// then go down</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (vol_on &amp;&amp; !pointer.volatile_pointer_.is_null()) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!in_snapshot);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      ArrayPage* child = context-&gt;resolve_cast&lt;ArrayPage&gt;(pointer.volatile_pointer_);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(child-&gt;get_array_range().begin_ == page_range.begin_ + i * interval);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(range.overlaps(child-&gt;get_array_range()));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3">prefetch_page_l2</a>(child);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">if</span> (level &gt; 1U) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879">prefetch_pages_recurse</a>(context, vol_on, snp_on, from, to, child));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="ttc" id="group__ARRAY_html_ga032dbb5dc93f7b51ac0ab5200ae013ab"><div class="ttname"><a href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">foedus::storage::array::ArrayOffset</a></div><div class="ttdeci">uint64_t ArrayOffset</div><div class="ttdoc">The only key type in array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00048">array_id.hpp:48</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a8c812340b903c36e872a38cc374d0842"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a8c812340b903c36e872a38cc374d0842">foedus::storage::array::ArrayStoragePimpl::control_block_</a></div><div class="ttdeci">ArrayStorageControlBlock *const control_block_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00301">array_storage_pimpl.hpp:301</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga9a2f9d6e4c010712ecd8987d65e634c3"><div class="ttname"><a href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3">foedus::storage::prefetch_page_l2</a></div><div class="ttdeci">void prefetch_page_l2(const void *page)</div><div class="ttdoc">Prefetch a page to L2/L3 cache. </div><div class="ttdef"><b>Definition:</b> <a href="page__prefetch_8hpp_source.html#l00034">page_prefetch.hpp:34</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder_html_a2d19d9785d226e4c7f9b2f0f549fdd19"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19">foedus::storage::array::LookupRouteFinder::get_records_in_leaf</a></div><div class="ttdeci">uint16_t get_records_in_leaf() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__route_8hpp_source.html#l00122">array_route.hpp:122</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock_html_a2ae2fdc285e49994c9a2ff96fee9b29a"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html#a2ae2fdc285e49994c9a2ff96fee9b29a">foedus::storage::array::ArrayStorageControlBlock::route_finder_</a></div><div class="ttdeci">LookupRouteFinder route_finder_</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00068">array_storage_pimpl.hpp:68</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_af22fe9e661763ca3225eeedf7fa62879"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879">foedus::storage::array::ArrayStoragePimpl::prefetch_pages_recurse</a></div><div class="ttdeci">ErrorCode prefetch_pages_recurse(thread::Thread *context, bool install_volatile, bool cache_snapshot, ArrayOffset from, ArrayOffset to, ArrayPage *page)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__prefetch_8cpp_source.html#l00053">array_storage_prefetch.cpp:53</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="487,764,696,805"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#af7bf48c6785865302f1d67bc59ab1392" title="foedus::storage::array\l::ArrayPage::get_array_range" alt="" coords="247,1073,439,1115"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="261,1139,424,1195"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a093e610525e466cef81920c9d21e7aa2" title="foedus::storage::array\l::ArrayPage::get_level" alt="" coords="268,1220,417,1261"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1LookupRouteFinder.html#a2d19d9785d226e4c7f9b2f0f549fdd19" title="foedus::storage::array\l::LookupRouteFinder::get\l_records_in_leaf" alt="" coords="259,1286,427,1342"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ad27a14c20dc341c655820def2e0dd1ee" title="foedus::storage::array\l::ArrayPage::header" alt="" coords="269,1367,417,1408"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="263,943,422,984"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1035,927,1196,968"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a9fedf09e1884f7f9d39daac9629aa6e2" title="Returns if there is any overlap with the other range. " alt="" coords="266,1433,419,1475"/>
<area shape="rect" id="node46" href="group__STORAGE.html#ga9a2f9d6e4c010712ecd8987d65e634c3" title="Prefetch a page to L2/L3 cache. " alt="" coords="509,668,674,709"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a17f375db3d50174cf49746e04ce00118" title="resolve() plus reinterpret_cast " alt="" coords="267,1008,418,1049"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="744,663,953,704"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1048,172,1183,213"/>
<area shape="rect" id="node5" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="1012,401,1219,443"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1309,629,1488,671"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1587,1269,1736,1311"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="1023,695,1207,736"/>
<area shape="rect" id="node18" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1307,825,1491,867"/>
<area shape="rect" id="node21" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="1012,237,1219,279"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="1034,107,1197,148"/>
<area shape="rect" id="node6" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="1295,237,1502,279"/>
<area shape="rect" id="node7" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="1304,433,1493,475"/>
<area shape="rect" id="node8" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="1295,499,1502,540"/>
<area shape="rect" id="node9" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="1313,172,1484,213"/>
<area shape="rect" id="node10" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="1304,564,1493,605"/>
<area shape="rect" id="node11" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="1298,303,1499,344"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1313,368,1485,409"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1575,176,1747,217"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="1286,695,1511,736"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="1277,760,1520,801"/>
<area shape="rect" id="node19" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1568,825,1755,867"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="1312,41,1485,83"/>
<area shape="rect" id="node23" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="1304,107,1493,148"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="499,1019,683,1060"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="757,1043,941,1099"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1581,985,1742,1027"/>
<area shape="rect" id="node37" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1023,1291,1207,1347"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="755,1175,942,1216"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1010,1044,1221,1085"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1035,1109,1196,1151"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="1001,1175,1229,1216"/>
<area shape="rect" id="node40" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1014,1372,1217,1413"/>
<area shape="rect" id="node41" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1321,1269,1476,1311"/>
<area shape="rect" id="node42" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1312,1467,1485,1508"/>
<area shape="rect" id="node43" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1297,1386,1500,1442"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html#a794ae294cb1193cdf10319bf23e9efea" title="foedus::storage::array\l::ArrayRange::contains" alt="" coords="514,1435,669,1476"/>
<area shape="rect" id="node47" href="group__ASSORTED.html#ga776c53f69f97c1edfc5d34a0f6cb3100" title="Prefetch multiple contiguous cachelines to L2/L3 cache. " alt="" coords="754,285,943,311"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#ade1f89cfaad84ff5dda0b6f7999a519e" title="Shorthand for get_global_volatile_page_resolver.resolve_offset() " alt="" coords="516,1369,667,1411"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="773,1583,924,1639"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_af22fe9e661763ca3225eeedf7fa62879_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="247,13,481,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="529,13,732,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab46e3b46f500379b6da59949010d5f7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::array::ArrayStoragePimpl::release_pages_recursive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>volatile_page_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used only from drop() </p>

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00207">207</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="page__pool_8hpp_source.html#l00292">foedus::memory::PageReleaseBatch::release()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00227">foedus::storage::array::ArrayStorage::drop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                        {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!volatile_page_id.is_null());</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  ArrayPage* page = <span class="keyword">reinterpret_cast&lt;</span>ArrayPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(volatile_page_id));</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (!page-&gt;is_leaf()) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>; ++i) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      DualPagePointer &amp;child_pointer = page-&gt;get_interior_record(i);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      VolatilePagePointer child_page_id = child_pointer.volatile_pointer_;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (!child_page_id.is_null()) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">// then recurse</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab46e3b46f500379b6da59949010d5f7a">release_pages_recursive</a>(resolver, batch, child_page_id);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        child_pointer.volatile_pointer_.word = 0;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  batch-&gt;release(volatile_page_id);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ab46e3b46f500379b6da59949010d5f7a"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ab46e3b46f500379b6da59949010d5f7a">foedus::storage::array::ArrayStoragePimpl::release_pages_recursive</a></div><div class="ttdeci">static void release_pages_recursive(const memory::GlobalVolatilePageResolver &amp;resolver, memory::PageReleaseBatch *batch, VolatilePagePointer volatile_page_id)</div><div class="ttdoc">Used only from drop() </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00207">array_storage_pimpl.cpp:207</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="263,40,425,81"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179" title="Returns the given in&#45;memory volatile page to appropriate NUMA node. " alt="" coords="244,207,444,248"/>
<area shape="rect" id="node5" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="243,141,445,183"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="759,5,920,47"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="517,141,672,183"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="765,236,914,277"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="508,207,681,248"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="493,61,696,117"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="762,72,917,113"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="744,141,935,183"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ab46e3b46f500379b6da59949010d5f7a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="243,13,391,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9204f003c16b2dfcaba0fe644930b9a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::array::ArrayStoragePimpl::report_page_distribution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac612c67d7e9e1a68dcccce98648cad0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::verify_single_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00932">932</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, and <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00937">verify_single_thread()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00061">foedus::storage::array::ArrayStorage::verify_single_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                                                                        {</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  ArrayPage* root;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">get_root_page</a>(context, <span class="keyword">false</span>, &amp;root));</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c">verify_single_thread</a>(context, root);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ac612c67d7e9e1a68dcccce98648cad0c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c">foedus::storage::array::ArrayStoragePimpl::verify_single_thread</a></div><div class="ttdeci">ErrorStack verify_single_thread(thread::Thread *context)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00932">array_storage_pimpl.cpp:932</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_abae9ebd099ebba507d98b8df782bd143"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143">foedus::storage::array::ArrayStoragePimpl::get_root_page</a></div><div class="ttdeci">ErrorCode get_root_page(thread::Thread *context, bool for_write, ArrayPage **out) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00337">array_storage_pimpl.hpp:337</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="229,485,395,541"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="443,493,593,534"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="641,493,825,534"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1387,285,1549,326"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1933,433,2082,474"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1363,699,1573,741"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1376,401,1560,457"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1387,634,1549,675"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1665,151,1820,193"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1117,493,1303,534"/>
<area shape="rect" id="node20" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1367,79,1569,121"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="873,522,1057,563"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1105,934,1315,975"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="896,842,1035,883"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="895,907,1036,949"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1927,285,2088,326"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="2161,834,2340,875"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1918,834,2097,875"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1930,50,2085,91"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1912,151,2103,193"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="1629,634,1857,675"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="2161,645,2340,686"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="1918,645,2097,686"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1656,86,1829,127"/>
<area shape="rect" id="node22" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1641,5,1844,61"/>
<area shape="rect" id="node48" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="1118,609,1302,665"/>
<area shape="rect" id="node25" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1401,1158,1535,1199"/>
<area shape="rect" id="node26" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="1365,1358,1571,1399"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1653,867,1832,909"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="1376,901,1560,942"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1651,998,1835,1039"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="1365,1093,1571,1134"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="1387,966,1549,1007"/>
<area shape="rect" id="node27" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="1639,1259,1846,1301"/>
<area shape="rect" id="node29" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="1648,1325,1837,1366"/>
<area shape="rect" id="node30" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="1639,1390,1846,1431"/>
<area shape="rect" id="node31" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="1657,1194,1828,1235"/>
<area shape="rect" id="node32" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="1648,1455,1837,1497"/>
<area shape="rect" id="node33" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="1642,1521,1843,1562"/>
<area shape="rect" id="node34" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1657,1586,1829,1627"/>
<area shape="rect" id="node28" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="1922,1259,2093,1301"/>
<area shape="rect" id="node35" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1921,1586,2093,1627"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="1630,933,1855,974"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="1621,699,1864,741"/>
<area shape="rect" id="node40" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1914,998,2101,1039"/>
<area shape="rect" id="node41" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="2151,953,2351,1009"/>
<area shape="rect" id="node42" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="2157,1034,2344,1075"/>
<area shape="rect" id="node45" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="1656,1129,1829,1170"/>
<area shape="rect" id="node46" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="1648,1063,1837,1105"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_ac612c67d7e9e1a68dcccce98648cad0c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2b04cc1cb6c96c53d454d03836b85b70" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="229,5,405,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a493ad74f622cef06e6b18a46fa23d6b0" title="foedus::storage::array\l::ArrayStorage::verify\l_single_thread" alt="" coords="243,85,391,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2b04cc1cb6c96c53d454d03836b85b70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayStoragePimpl::verify_single_thread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html">ArrayPage</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8cpp_source.html#l00937">937</a> of file <a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a>.</p>

<p>References <a class="el" href="array__storage__pimpl_8cpp_source.html#l00929">CHECK_AND_ASSERT</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="thread_8cpp_source.html#l00125">foedus::thread::Thread::get_global_volatile_page_resolver()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00091">foedus::storage::array::ArrayPage::get_leaf_record()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00066">foedus::storage::array::ArrayPage::get_leaf_record_count()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00116">get_payload_size()</a>, <a class="el" href="xct__id_8hpp_source.html#l00818">foedus::xct::McsRwLock::get_tail_waiter()</a>, <a class="el" href="xct__id_8hpp_source.html#l00817">foedus::xct::McsRwLock::get_tail_waiter_block()</a>, <a class="el" href="xct__id_8hpp_source.html#l01145">foedus::xct::RwLockableXctId::is_being_written()</a>, <a class="el" href="xct__id_8hpp_source.html#l01141">foedus::xct::RwLockableXctId::is_deleted()</a>, <a class="el" href="xct__id_8hpp_source.html#l01140">foedus::xct::RwLockableXctId::is_keylocked()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="xct__id_8hpp_source.html#l01142">foedus::xct::RwLockableXctId::is_moved()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="xct__id_8hpp_source.html#l01134">foedus::xct::RwLockableXctId::lock_</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00932">verify_single_thread()</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>
<div class="fragment"><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver = context-&gt;get_global_volatile_page_resolver();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">if</span> (page-&gt;is_leaf()) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; page-&gt;get_leaf_record_count(); ++i) {</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      Record* record = page-&gt;get_leaf_record(i, <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">get_payload_size</a>());</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      <a class="code" href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a>(!record-&gt;owner_id_.is_being_written());</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <a class="code" href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a>(!record-&gt;owner_id_.is_deleted());</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <a class="code" href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a>(!record-&gt;owner_id_.is_keylocked());</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <a class="code" href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a>(!record-&gt;owner_id_.is_moved());</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a>(record-&gt;owner_id_.lock_.get_tail_waiter() == 0);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <a class="code" href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a>(record-&gt;owner_id_.lock_.get_tail_waiter_block() == 0);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>; ++i) {</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      DualPagePointer &amp;child_pointer = page-&gt;get_interior_record(i);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      VolatilePagePointer page_id = child_pointer.volatile_pointer_;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">if</span> (!page_id.is_null()) {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        <span class="comment">// then recurse</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        ArrayPage* child_page = <span class="keyword">reinterpret_cast&lt;</span>ArrayPage*<span class="keyword">&gt;</span>(resolver.resolve_offset(page_id));</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c">verify_single_thread</a>(context, child_page));</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_ac612c67d7e9e1a68dcccce98648cad0c"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c">foedus::storage::array::ArrayStoragePimpl::verify_single_thread</a></div><div class="ttdeci">ErrorStack verify_single_thread(thread::Thread *context)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00932">array_storage_pimpl.cpp:932</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_html_a08fc6349a89f7505d5c139851859dbf3"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3">foedus::storage::array::ArrayStoragePimpl::get_payload_size</a></div><div class="ttdeci">uint16_t get_payload_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8hpp_source.html#l00116">array_storage_pimpl.hpp:116</a></div></div>
<div class="ttc" id="array__storage__pimpl_8cpp_html_aa0227b94f2abc9a7a5ac155db59cb2d3"><div class="ttname"><a href="array__storage__pimpl_8cpp.html#aa0227b94f2abc9a7a5ac155db59cb2d3">CHECK_AND_ASSERT</a></div><div class="ttdeci">#define CHECK_AND_ASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="array__storage__pimpl_8cpp_source.html#l00929">array_storage_pimpl.cpp:929</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2b04cc1cb6c96c53d454d03836b85b70_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2b04cc1cb6c96c53d454d03836b85b70_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2b04cc1cb6c96c53d454d03836b85b70_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl_a2b04cc1cb6c96c53d454d03836b85b70_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="245,5,396,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="239,85,402,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#ae6032f608834a39808e26c59aa0e42e2" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record" alt="" coords="247,245,395,301"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="487,283,635,325"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a038d272bb21378544e6d6cd1c8b468b3" title="foedus::storage::array\l::ArrayPage::get_leaf\l_record_count" alt="" coords="247,165,395,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a08fc6349a89f7505d5c139851859dbf3" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_payload_size" alt="" coords="238,376,403,432"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1McsRwLock.html#a3d8cf73848daf77b739df642dbc6205e" title="foedus::xct::McsRwLock\l::get_tail_waiter" alt="" coords="238,457,403,498"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1McsRwLock.html#acffec9f94307c8b3473e1d21c3999e14" title="foedus::xct::McsRwLock\l::get_tail_waiter_block" alt="" coords="238,522,403,563"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a1a8407dbd26bc19e8e8765e0f26dbedc" title="foedus::xct::RwLockableXct\lId::is_being_written" alt="" coords="229,587,412,629"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a64f2bf766313e987894e247d8716cf99" title="foedus::xct::RwLockableXct\lId::is_deleted" alt="" coords="229,653,412,694"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a610d8c1bfd1d86dcde181c3fb0020f0c" title="foedus::xct::RwLockableXct\lId::is_keylocked" alt="" coords="229,718,412,759"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a03782134d5ef0ebb8e187ddbd89f3c36" title="foedus::xct::RwLockableXct\lId::is_moved" alt="" coords="229,783,412,825"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="1663,893,1824,934"/>
<area shape="rect" id="node22" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1642,1075,1845,1117"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="233,1001,409,1057"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="481,229,641,256"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a0611bafe6b93b9b860330375cb805fdc" title="foedus::storage::array\l::ArrayStoragePimpl::get_meta" alt="" coords="460,383,661,425"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="499,587,622,629"/>
<area shape="rect" id="node15" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="499,653,622,694"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1McsRwLock.html#adc5e6612e3cecf3d2f15d02237b4ef8f" title="foedus::xct::McsRwLock\l::is_locked" alt="" coords="478,718,643,759"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="499,783,622,825"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="2171,949,2332,990"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1929,1010,2084,1051"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="2177,1305,2326,1346"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1920,1075,2093,1117"/>
<area shape="rect" id="node28" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1905,1141,2108,1197"/>
<area shape="rect" id="node24" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="2174,1114,2329,1155"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="2156,1014,2347,1055"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="478,1056,643,1112"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="709,1118,860,1159"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="908,1227,1092,1269"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="1638,1614,1849,1655"/>
<area shape="rect" id="node36" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1651,1469,1835,1525"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="1663,1403,1824,1445"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="1383,1286,1570,1327"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1140,1403,1324,1445"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1372,1782,1581,1823"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="1163,1002,1301,1043"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="1161,1067,1303,1109"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="2162,1687,2341,1729"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1917,1717,2096,1758"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="1629,1286,1857,1327"/>
<area shape="rect" id="node48" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="1385,1453,1569,1509"/>
<area shape="rect" id="node42" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="1676,1978,1811,2019"/>
<area shape="rect" id="node43" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="1640,2043,1847,2085"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1917,1782,2096,1823"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="1651,1782,1835,1823"/>
<area shape="rect" id="node46" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="1640,1847,1847,1889"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="1662,1913,1825,1954"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a8c812340b903c36e872a38cc374d0842"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayStorageControlBlock.html">ArrayStorageControlBlock</a>* const foedus::storage::array::ArrayStoragePimpl::control_block_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00301">301</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00288">create()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00109">exists()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00112">get_levels()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00110">get_meta()</a>, <a class="el" href="array__storage__pimpl_8hpp_source.html#l00337">get_root_page()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00969">hcc_reset_all_temperature_stat()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">load()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">load_empty()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00535">lookup_for_read()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00794">lookup_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00574">lookup_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00864">lookup_for_write_batch()</a>, and <a class="el" href="array__storage__prefetch_8cpp_source.html#l00053">prefetch_pages_recurse()</a>.</p>

</div>
</div>
<a class="anchor" id="adef3cec6748f0c981c99fd0b9803697c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1Engine.html">Engine</a>* const foedus::storage::array::ArrayStoragePimpl::engine_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__storage__pimpl_8hpp_source.html#l00300">300</a> of file <a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00969">hcc_reset_all_temperature_stat()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00987">hcc_reset_all_temperature_stat_intermediate()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">load()</a>, and <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">load_empty()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/array/<a class="el" href="array__storage__pimpl_8hpp_source.html">array_storage_pimpl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/array/<a class="el" href="array__storage__pimpl_8cpp_source.html">array_storage_pimpl.cpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/array/<a class="el" href="array__storage__prefetch_8cpp_source.html">array_storage_prefetch.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1array.html">array</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html">ArrayStoragePimpl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
