<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::memory::EngineMemory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1memory_1_1EngineMemory.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfoedus_1_1memory_1_1EngineMemory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::memory::EngineMemory Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__MEMORY.html">Memory Manager</a> &raquo; <a class="el" href="group__MEMHIERARCHY.html">Memory Hierarchy</a><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo;  &#124; <a class="el" href="group__ENGINE.html">Database Engine</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Repository of all memories dynamically acquired and shared within one database engine.  
 <a href="classfoedus_1_1memory_1_1EngineMemory.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Repository of all memories dynamically acquired and shared within one database engine. </p>
<dl class="section user"><dt>Overview</dt><dd>This is the top-level memory repository in our engine. All other memory types are contained in this object.</dd></dl>
<dl class="section user"><dt>List of engine-wide memories</dt><dd><ul>
<li>List of <a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html" title="Repository of memories dynamically acquired and shared within one NUMA node (socket). ">NumaNodeMemory</a>, one for each NUMA socket in the machine. </li>
<li>Page pool for volatile read/write store (VolatilePage) and the read-only bufferpool (SnapshotPage). </li>
</ul>
</dd></dl>

<p>Definition at line <a class="el" href="engine__memory_8hpp_source.html#l00052">52</a> of file <a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::memory::EngineMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory__inherit__graph.png" border="0" usemap="#foedus_1_1memory_1_1EngineMemory_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1memory_1_1EngineMemory_inherit__map" id="foedus_1_1memory_1_1EngineMemory_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="25,80,197,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="45,5,177,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::memory::EngineMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory__coll__graph.png" border="0" usemap="#foedus_1_1memory_1_1EngineMemory_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1memory_1_1EngineMemory_coll__map" id="foedus_1_1memory_1_1EngineMemory_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="25,80,197,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="45,5,177,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a781511a227e079a760aec608b54dd727"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a781511a227e079a760aec608b54dd727">EngineMemory</a> ()=delete</td></tr>
<tr class="separator:a781511a227e079a760aec608b54dd727"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ced7acd88b557b017cda525da5ada6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a24ced7acd88b557b017cda525da5ada6">EngineMemory</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:a24ced7acd88b557b017cda525da5ada6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56f86610c89fff23bf3f834a6fcbf7a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a56f86610c89fff23bf3f834a6fcbf7a5">initialize_once</a> () override</td></tr>
<tr class="separator:a56f86610c89fff23bf3f834a6fcbf7a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3754cd4bed613ea0f8ca453e5d914f5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a3754cd4bed613ea0f8ca453e5d914f5a">uninitialize_once</a> () override</td></tr>
<tr class="separator:a3754cd4bed613ea0f8ca453e5d914f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678ed893d9fb18f180043e28bb8405e4"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a678ed893d9fb18f180043e28bb8405e4">get_shared_user_memory</a> () const </td></tr>
<tr class="memdesc:a678ed893d9fb18f180043e28bb8405e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">As part of the global shared memory, we reserve this size of 'user memory' that can be used for arbitrary purporses by the user to communicate between SOCs.  <a href="#a678ed893d9fb18f180043e28bb8405e4">More...</a><br /></td></tr>
<tr class="separator:a678ed893d9fb18f180043e28bb8405e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6b03ce8d83c1172c8b4c5bbaac739a"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#acd6b03ce8d83c1172c8b4c5bbaac739a">get_shared_user_memory_size</a> () const </td></tr>
<tr class="separator:acd6b03ce8d83c1172c8b4c5bbaac739a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c5065125240df0f59f2cd04ff5f8808"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a0c5065125240df0f59f2cd04ff5f8808">get_local_memory</a> () const </td></tr>
<tr class="separator:a0c5065125240df0f59f2cd04ff5f8808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bf8832e627cd97fe92c60d38ed96ac8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html">NumaNodeMemoryRef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a> group) const </td></tr>
<tr class="separator:a8bf8832e627cd97fe92c60d38ed96ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d348c5c4edbe01bbe7d72676880d2a2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a7d348c5c4edbe01bbe7d72676880d2a2">dump_free_memory_stat</a> () const </td></tr>
<tr class="memdesc:a7d348c5c4edbe01bbe7d72676880d2a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report rough statistics of free memory.  <a href="#a7d348c5c4edbe01bbe7d72676880d2a2">More...</a><br /></td></tr>
<tr class="separator:a7d348c5c4edbe01bbe7d72676880d2a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62b2d4de6a72644e9e31d35a7f9beae0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">GlobalVolatilePageResolver</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a> () const </td></tr>
<tr class="memdesc:a62b2d4de6a72644e9e31d35a7f9beae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the page resolver to convert volatile page ID to page pointer.  <a href="#a62b2d4de6a72644e9e31d35a7f9beae0">More...</a><br /></td></tr>
<tr class="separator:a62b2d4de6a72644e9e31d35a7f9beae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae35d16d716451eaa878ec2888960127d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d">grab_one_volatile_page</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a> node, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *pointer, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **page)</td></tr>
<tr class="memdesc:ae35d16d716451eaa878ec2888960127d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A convenience function to grab one free volatile page from the given node.  <a href="#ae35d16d716451eaa878ec2888960127d">More...</a><br /></td></tr>
<tr class="separator:ae35d16d716451eaa878ec2888960127d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c3c8902b7000d09878a5a2085f6058c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c">load_one_volatile_page</a> (<a class="el" href="classfoedus_1_1cache_1_1SnapshotFileSet.html">cache::SnapshotFileSet</a> *fileset, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> snapshot_pointer, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *pointer, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **page)</td></tr>
<tr class="memdesc:a3c3c8902b7000d09878a5a2085f6058c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Another convenience method that also reads an existing snapshot page to the volatile page.  <a href="#a3c3c8902b7000d09878a5a2085f6058c">More...</a><br /></td></tr>
<tr class="separator:a3c3c8902b7000d09878a5a2085f6058c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1DefaultInitializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1DefaultInitializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1DefaultInitializable.html">foedus::DefaultInitializable</a></td></tr>
<tr class="memitem:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a5e0a2679baa030e297c1a51847352945">DefaultInitializable</a> ()</td></tr>
<tr class="separator:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afe7a18ec3e5edd143eb7d6a75d65ef9b">~DefaultInitializable</a> ()</td></tr>
<tr class="separator:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afd6a8f8296ab570b545430593287d454">DefaultInitializable</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a31eb5acadf0544b97414efd33aed08c7">operator=</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a> () override final</td></tr>
<tr class="memdesc:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#aa087b096d1edaeb0304c250eadb0d7e1" title="Acquires resources in this object, usually called right after constructor. ">Initializable::initialize()</a> that provides initialize-once semantics.  <a href="#a22a0dc3bbbca682c3bc41eace9b6d1ff">More...</a><br /></td></tr>
<tr class="separator:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a> () override final</td></tr>
<tr class="memdesc:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#afbe5738b0bc85362fba80bdf788fd3c3" title="An idempotent method to release all resources of this object, if any. ">Initializable::uninitialize()</a> that provides uninitialize-once semantics.  <a href="#ab14b136a7d26f9f499ab9dc15a45a8cb">More...</a><br /></td></tr>
<tr class="separator:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a> () const  override final</td></tr>
<tr class="memdesc:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already initialized or not.  <a href="#a1abda1e84b8af8bd6916e52fd0a09f3e">More...</a><br /></td></tr>
<tr class="separator:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Initializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Initializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Initializable.html">foedus::Initializable</a></td></tr>
<tr class="memitem:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Initializable.html#aff308260543d18b3fd1367fd9017b176">~Initializable</a> ()</td></tr>
<tr class="separator:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a781511a227e079a760aec608b54dd727"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::EngineMemory::EngineMemory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a24ced7acd88b557b017cda525da5ada6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::EngineMemory::EngineMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="engine__memory_8hpp_source.html#l00055">55</a> of file <a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;: engine_(engine), local_memory_(<a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>) {}</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7d348c5c4edbe01bbe7d72676880d2a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::memory::EngineMemory::dump_free_memory_stat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report rough statistics of free memory. </p>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00121">121</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="numa__node__memory_8cpp_source.html#l00246">foedus::memory::NumaNodeMemoryRef::dump_free_memory_stat()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, and <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                                    {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  std::stringstream ret;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  ret &lt;&lt; <span class="stringliteral">&quot;  == Free memory stat ==&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> numa_nodes = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> node = 0; node &lt; numa_nodes; ++node) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    NumaNodeMemoryRef* memory = node_memories_[node];</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    ret &lt;&lt; <span class="stringliteral">&quot; - Node_&quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(node) &lt;&lt; <span class="stringliteral">&quot; -&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    ret &lt;&lt; memory-&gt;dump_free_memory_stat();</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span> (node + 1U &lt; numa_nodes) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      ret &lt;&lt; std::endl;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">return</span> ret.str();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a7d348c5c4edbe01bbe7d72676880d2a2_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a7d348c5c4edbe01bbe7d72676880d2a2_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a7d348c5c4edbe01bbe7d72676880d2a2_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_a7d348c5c4edbe01bbe7d72676880d2a2_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a269381dd81631fda44b63559d0a9fbd0" title="Report rough statistics of free memory. " alt="" coords="264,5,503,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="316,71,451,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c" title="foedus::memory::PagePool\l::get_stat" alt="" coords="551,5,729,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a55ba648cb98718804a890ea3b4965e39" title="foedus::memory::PagePool\lPimpl::get_stat" alt="" coords="777,5,956,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1004,5,1183,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a62b2d4de6a72644e9e31d35a7f9beae0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">GlobalVolatilePageResolver</a>&amp; foedus::memory::EngineMemory::get_global_volatile_page_resolver </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the page resolver to convert volatile page ID to page pointer. </p>
<p>Any code can get the global page resolver from engine memory. Note that this is only for volatile pages. As snapshot cache is per-node, there is no global snapshot page resolver (just the node-local one should be enough). </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. ">thread::Thread::get_global_volatile_page_resolver()</a> </dd></dl>

<p>Definition at line <a class="el" href="engine__memory_8hpp_source.html#l00090">90</a> of file <a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__debug_8cpp_source.html#l00053">foedus::storage::hash::HashStoragePimpl::debugout_single_thread()</a>, <a class="el" href="hash__storage__debug_8cpp_source.html#l00181">foedus::storage::hash::HashStoragePimpl::debugout_single_thread_data()</a>, <a class="el" href="masstree__storage__debug_8cpp_source.html#l00122">foedus::storage::masstree::MasstreeStoragePimpl::debugout_single_thread_follow()</a>, <a class="el" href="hash__storage__debug_8cpp_source.html#l00116">foedus::storage::hash::HashStoragePimpl::debugout_single_thread_intermediate()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00073">foedus::storage::array::ArrayPartitioner::design_partition()</a>, <a class="el" href="masstree__partitioner__impl_8cpp_source.html#l00064">foedus::storage::masstree::MasstreePartitioner::design_partition()</a>, <a class="el" href="masstree__partitioner__impl_8cpp_source.html#l00155">foedus::storage::masstree::design_partition_first_parallel()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00128">foedus::storage::hash::HashPartitioner::design_partition_task()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00227">foedus::storage::array::ArrayStorage::drop()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00105">foedus::storage::masstree::MasstreeStoragePimpl::drop()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00059">foedus::storage::hash::HashStoragePimpl::drop()</a>, <a class="el" href="composer_8cpp_source.html#l00114">foedus::storage::Composer::DropVolatilesArguments::drop()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00378">foedus::storage::sequential::SequentialStoragePimpl::get_head_pointer()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00392">foedus::storage::sequential::SequentialStoragePimpl::get_tail_pointer()</a>, <a class="el" href="hash__storage__debug_8cpp_source.html#l00253">foedus::storage::hash::HashStoragePimpl::hcc_reset_all_temperature_stat_data()</a>, <a class="el" href="masstree__storage__debug_8cpp_source.html#l00192">foedus::storage::masstree::MasstreeStoragePimpl::hcc_reset_all_temperature_stat_follow()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00987">foedus::storage::array::ArrayStoragePimpl::hcc_reset_all_temperature_stat_intermediate()</a>, <a class="el" href="hash__storage__debug_8cpp_source.html#l00231">foedus::storage::hash::HashStoragePimpl::hcc_reset_all_temperature_stat_intermediate()</a>, <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>, <a class="el" href="masstree__storage__peek_8cpp_source.html#l00037">foedus::storage::masstree::MasstreeStoragePimpl::peek_volatile_page_boundaries()</a>, <a class="el" href="storage__manager__pimpl_8cpp_source.html#l00157">foedus::storage::StorageManagerPimpl::reinitialize_for_recovered_snapshot()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00271">foedus::storage::hash::HashIntermediatePage::release_pages_recursive_parallel()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00178">foedus::storage::masstree::release_parallel()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00260">foedus::storage::hash::release_parallel()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">foedus::storage::masstree::MasstreeBorderPage::track_moved_record()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">foedus::storage::masstree::MasstreeBorderPage::track_moved_record_next_layer()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>, <a class="el" href="hash__storage__verify_8cpp_source.html#l00042">foedus::storage::hash::HashStoragePimpl::verify_single_thread()</a>, <a class="el" href="hash__storage__verify_8cpp_source.html#l00087">foedus::storage::hash::HashStoragePimpl::verify_single_thread_data()</a>, and <a class="el" href="hash__storage__verify_8cpp_source.html#l00055">foedus::storage::hash::HashStoragePimpl::verify_single_thread_intermediate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                                                              {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> global_volatile_page_resolver_;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a62b2d4de6a72644e9e31d35a7f9beae0_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a62b2d4de6a72644e9e31d35a7f9beae0_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a62b2d4de6a72644e9e31d35a7f9beae0_icgraph" id="classfoedus_1_1memory_1_1EngineMemory_a62b2d4de6a72644e9e31d35a7f9beae0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ae68923a3afe20ce445002b85764a9f17" title="These are defined in hash_storage_debug.cpp. " alt="" coords="781,89,980,145"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa220f1f2d268290263483476d85be47b" title="foedus::storage::hash\l::HashStoragePimpl::debugout\l_single_thread_data" alt="" coords="269,56,468,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ad9f8e63fe91ea8623c537e3fffc1f3c1" title="foedus::storage::hash\l::HashStoragePimpl::debugout\l_single_thread_intermediate" alt="" coords="528,56,727,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adb503d118f53a417bf11f9e486bd3cf7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread_follow" alt="" coords="265,235,472,291"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a7002637fe43ab0917bead1d4636805ad" title="foedus::storage::array\l::ArrayPartitioner::design\l_partition" alt="" coords="797,468,964,524"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePartitioner.html#a1aedc45cc5621bd3889f1bf2d47ab79c" title="foedus::storage::masstree\l::MasstreePartitioner::\ldesign_partition" alt="" coords="794,551,967,607"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage_1_1masstree.html#a51b8fa58d4a0c9481b69bcfb5c5a3493" title="foedus::storage::masstree\l::design_partition_first\l_parallel" alt="" coords="282,487,455,543"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a40234c7f9cecf06a33b99e1556406792" title="foedus::storage::hash\l::HashPartitioner::design\l_partition_task" alt="" coords="286,356,451,412"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="295,618,443,659"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="271,683,466,725"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="795,1391,966,1433"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html#aa29872b9c654848dde2e5c0ca1409da0" title="Returns (might cache) the given pointer to volatile pool. " alt="" coords="267,895,470,937"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head_pointer" alt="" coords="279,961,458,1017"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_tail_pointer" alt="" coords="279,1041,458,1097"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ab283888fe4b6038d8885f385a136f40b" title="foedus::storage::hash\l::HashStoragePimpl::hcc\l_reset_all_temperature\l_stat_data" alt="" coords="285,801,452,871"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aece3aacb3a8a9fd362fbad83321cacaf" title="foedus::storage::hash\l::HashStoragePimpl::hcc\l_reset_all_temperature\l_stat_intermediate" alt="" coords="544,706,711,777"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a89828c1df02cadd8a38824f24e2adef9" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_follow" alt="" coords="277,1173,460,1243"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a3773cad90c4300f1b858c963df8054b5" title="foedus::storage::array\l::ArrayStoragePimpl::hcc\l_reset_all_temperature_stat\l_intermediate" alt="" coords="277,1267,460,1338"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="285,1413,452,1440"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="535,1429,719,1470"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="264,1464,473,1520"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#ad5f949c2d00aea4cb2186c93108b7dcc" title="Special method called only from recovery manager. " alt="" coords="283,1544,454,1600"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="541,1655,713,1726"/>
<area shape="rect" id="node43" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="282,1690,455,1731"/>
<area shape="rect" id="node44" href="namespacefoedus_1_1storage_1_1hash.html#a05601cf00ffeb4df540a0d43379d3387" title="foedus::storage::hash\l::release_parallel" alt="" coords="295,1625,442,1666"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="533,1863,722,1919"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="274,1831,463,1887"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="281,1961,456,2017"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ae1d255af4c59e5d9eb4696da85b77121" title="These are defined in hash_storage_verify.cpp. " alt="" coords="793,2124,968,2180"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ad137d51b31782b8e525481bb69816848" title="foedus::storage::hash\l::HashStoragePimpl::verify\l_single_thread_data" alt="" coords="281,2092,456,2148"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afc1a73e49f6386098d3fff98bc1baf78" title="foedus::storage::hash\l::HashStoragePimpl::verify\l_single_thread_intermediate" alt="" coords="535,2092,719,2148"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a144b7a6f95482f2ab8f8564776689fb9" title="A super&#45;expensive and single&#45;thread only debugging feature to write out gigantic human&#45;readable texts..." alt="" coords="1034,89,1201,145"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a41e664c7035f1b89121ef06678a71386" title="These are defined in masstree_storage_debug.cpp. " alt="" coords="541,283,714,339"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="541,187,714,258"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1Partitioner.html#a31a7e393bf1f87a9a039c60b291ac9d1" title="Determines partitioning scheme for this storage. " alt="" coords="1028,475,1207,517"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage_1_1hash.html#a3ac47a0c2d690309d487f26b3a08a9b4" title="foedus::storage::hash\l::design_partition_thread" alt="" coords="545,363,709,405"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a9def1e9584cd2af4bae4d2b0c0ca10e4" title="foedus::storage::hash\l::HashPartitioner::design\l_partition" alt="" coords="798,388,963,444"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="541,641,714,682"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1044,1391,1191,1433"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1sequential_1_1SequentialComposer.html#a93883e6731ee4a8f2efc4cf7cec2560f" title="foedus::storage::sequential\l::SequentialComposer::drop\l_volatiles" alt="" coords="536,801,719,857"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1" title="Appends an already&#45;commited record to this volatile list. " alt="" coords="538,961,717,1017"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_head" alt="" coords="538,881,717,937"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aeed5645880f0c4dfe3bca57ad9846ea4" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::get_tail" alt="" coords="538,1041,717,1097"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a9075ef5e205fc3e6284e56894b1c8c4b" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="789,713,972,769"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0fe6a82d90f30d4b9724009ba2fc40ae" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="521,1268,733,1324"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="536,1173,719,1243"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae271b3b08151601047c988dab64bcc0d" title="foedus::storage::array\l::ArrayStoragePimpl::hcc\l_reset_all_temperature_stat" alt="" coords="536,1348,719,1404"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99" title="Checks the volatile pages of this storage to give hints to decide page boundary keys. " alt="" coords="541,1495,714,1551"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1StorageManager.html#ad207f2d607f78db439621dd82a4b9470" title="Special method called only from recovery manager. " alt="" coords="545,1575,710,1631"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0c5065125240df0f59f2cd04ff5f8808"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a>* foedus::memory::EngineMemory::get_local_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="engine__memory_8hpp_source.html#l00073">73</a> of file <a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__group_8cpp_source.html#l00038">foedus::thread::ThreadGroup::initialize_once()</a>, <a class="el" href="cache__manager__pimpl_8cpp_source.html#l00047">foedus::cache::CacheManagerPimpl::initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>, <a class="el" href="logger__impl_8cpp_source.html#l00074">foedus::log::Logger::initialize_once()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                                           {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> local_memory_;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a0c5065125240df0f59f2cd04ff5f8808_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a0c5065125240df0f59f2cd04ff5f8808_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a0c5065125240df0f59f2cd04ff5f8808_icgraph" id="classfoedus_1_1memory_1_1EngineMemory_a0c5065125240df0f59f2cd04ff5f8808_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadGroup.html#a527a2a713742fa6383c50b5062c229a7" title="foedus::thread::ThreadGroup\l::initialize_once" alt="" coords="270,5,457,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="264,71,463,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="271,136,455,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="297,201,429,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8303f5db549570913eefd0e123dbfc2e" title="foedus::log::ThreadLogBuffer\l::initialize_once" alt="" coords="270,267,457,308"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="511,71,709,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8bf8832e627cd97fe92c60d38ed96ac8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html">NumaNodeMemoryRef</a>* foedus::memory::EngineMemory::get_node_memory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>group</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="engine__memory_8hpp_source.html#l00076">76</a> of file <a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00076">foedus::storage::hash::HashStoragePimpl::create()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00086">foedus::storage::sequential::SequentialStoragePimpl::drop()</a>, <a class="el" href="composer_8cpp_source.html#l00114">foedus::storage::Composer::DropVolatilesArguments::drop()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00595">foedus::snapshot::SnapshotManagerPimpl::drop_volatile_pages_parallel()</a>, <a class="el" href="sequential__composer__impl_8cpp_source.html#l00309">foedus::storage::sequential::SequentialComposer::drop_volatiles()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00789">foedus::thread::ThreadPimpl::flush_retired_volatile_page()</a>, <a class="el" href="sequential__storage__pimpl_8hpp_source.html#l00196">foedus::storage::sequential::SequentialStoragePimpl::for_every_page()</a>, <a class="el" href="page__pool_8cpp_source.html#l00202">foedus::memory::RoundRobinPageGrabBatch::grab()</a>, <a class="el" href="page__pool_8cpp_source.html#l00267">foedus::memory::DivvyupPageGrabBatch::grab()</a>, <a class="el" href="engine__memory_8cpp_source.html#l00136">grab_one_volatile_page()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00188">foedus::storage::sequential::SequentialStoragePimpl::initialize_head_tail_pages()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00122">foedus::storage::masstree::MasstreeStoragePimpl::load_empty()</a>, <a class="el" href="page__pool_8cpp_source.html#l00241">foedus::memory::RoundRobinPageGrabBatch::release_all()</a>, <a class="el" href="page__pool_8cpp_source.html#l00298">foedus::memory::DivvyupPageGrabBatch::release_all()</a>, <a class="el" href="page__pool_8cpp_source.html#l00178">foedus::memory::PageReleaseBatch::release_chunk()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00271">foedus::storage::hash::HashIntermediatePage::release_pages_recursive_parallel()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00188">foedus::storage::masstree::MasstreeIntermediatePage::release_pages_recursive_parallel()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">foedus::thread::ThreadPimpl::uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                                                            {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> node_memories_[group];</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a8bf8832e627cd97fe92c60d38ed96ac8_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a8bf8832e627cd97fe92c60d38ed96ac8_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a8bf8832e627cd97fe92c60d38ed96ac8_icgraph" id="classfoedus_1_1memory_1_1EngineMemory_a8bf8832e627cd97fe92c60d38ed96ac8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="278,5,461,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c" title="foedus::storage::sequential\l::SequentialStoragePimpl::drop" alt="" coords="268,71,471,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1Composer_1_1DropVolatilesArguments.html#aa29872b9c654848dde2e5c0ca1409da0" title="Returns (might cache) the given pointer to volatile pool. " alt="" coords="268,188,471,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1sequential_1_1SequentialComposer.html#a93883e6731ee4a8f2efc4cf7cec2560f" title="foedus::storage::sequential\l::SequentialComposer::drop\l_volatiles" alt="" coords="549,187,731,243"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a26c51902174b692c91aedd15218f01b7" title="subroutine invoked by one thread for one node. " alt="" coords="1054,154,1238,210"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb" title="Subroutine of collect_retired_volatile_page() in case the chunk becomes full. " alt="" coords="277,305,461,347"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab8595b7fa861e2f16b04f6758a7508a5" title="Traverse all pages and call back the handler for every page. " alt="" coords="280,371,459,427"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a114c524e1d8efc628c3e7d98f85cfa83" title="Grabs an in&#45;memory page in some NUMA node. " alt="" coords="273,452,466,493"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#a3fcf76c5c95efed24463c7c9eb5e8dc0" title="Grabs an in&#45;memory page in specified NUMA node. " alt="" coords="271,517,467,559"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="264,583,475,624"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::initialize_head_tail_pages" alt="" coords="280,729,459,785"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="283,649,456,705"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a256ca43b80dc2eb1dfdf5fd630fe3dd4" title="Called at the end to return all remaining pages to their pools. " alt="" coords="273,845,466,887"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ab199aa6af43bf8493868d70a5e1732fe" title="Called at the end to return all remaining pages to their pools. " alt="" coords="271,933,467,975"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#af16728969f6c3544544000355b6d4f30" title="Return all batched pages in the given chunk to its pool. " alt="" coords="269,1021,469,1063"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="819,1204,991,1275"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="1053,1097,1239,1168"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aba7104a56eaff1c1f8c87f5bb03f4045" title="foedus::thread::ThreadPimpl\l::uninitialize_once" alt="" coords="277,1255,461,1296"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="565,5,715,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a658c8c3bb3c87df9176797587728f1" title="foedus::storage::sequential\l::SequentialStorage::drop" alt="" coords="551,71,729,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1Composer.html#a0995635b97031b208127004382947acd" title="Drops volatile pages that have not been modified since the snapshotted epoch. " alt="" coords="816,192,995,233"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a5d474e7a6b4de127153103f2295cb0fa" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="1287,161,1513,203"/>
<area shape="rect" id="node11" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1561,154,1772,210"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="544,271,736,312"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="809,271,1001,312"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1storage_1_1sequential.html#aab3041ddf08dbde93ee896a1efff26d1" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="551,336,729,377"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad1cb17d3564061683f038da9e30ba305" title="Grabs an in&#45;memory page evenly and contiguously from each NUMA node. " alt="" coords="542,401,738,443"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="535,532,745,573"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="533,467,747,508"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="820,467,991,508"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="820,532,991,573"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="808,597,1003,639"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="1059,597,1233,639"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="814,401,997,443"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::create" alt="" coords="551,729,729,785"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f" title="foedus::storage::sequential\l::SequentialStoragePimpl::load" alt="" coords="539,809,741,851"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a1b3fd99bf6040a5ee42164d31135f433" title="foedus::storage::sequential\l::SequentialStorage::create" alt="" coords="815,736,995,777"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a2ba6c181226fb2b20ee12b012382f2fa" title="foedus::storage::sequential\l::SequentialStorage::load" alt="" coords="816,809,995,851"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="553,649,727,705"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="819,663,992,704"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1RoundRobinPageGrabBatch.html#a9e55ed7e111f63dc91c5fbb610baf30e" title="foedus::memory::RoundRobin\lPageGrabBatch::~RoundRobinPage\lGrabBatch" alt="" coords="525,875,755,931"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1DivvyupPageGrabBatch.html#ad3b2fa88186f79546ae747162510af76" title="foedus::memory::DivvyupPage\lGrabBatch::~DivvyupPageGrabBatch" alt="" coords="523,956,757,997"/>
<area shape="rect" id="node41" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aedda2314df207e1d39509858cbee6bbd" title="Returns the given in&#45;memory page to the specified NUMA node. " alt="" coords="540,1021,740,1063"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#aacfb0dd808ba1a987cea4d957e8e511b" title="Called at the end to return all batched pages to their pools. " alt="" coords="540,1087,740,1128"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#ac93d73bec0e959851e5a29482e83c5a9" title="foedus::memory::PageRelease\lBatch::~PageReleaseBatch" alt="" coords="805,956,1005,997"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ab725dd6fcc1f7345bb27123575555f6a" title="foedus::storage::array\l::ArrayStorage::drop" alt="" coords="831,1021,979,1063"/>
<area shape="rect" id="node47" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="819,1087,992,1128"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="1061,1219,1231,1260"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="1303,1112,1497,1153"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a678ed893d9fb18f180043e28bb8405e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * foedus::memory::EngineMemory::get_shared_user_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>As part of the global shared memory, we reserve this size of 'user memory' that can be used for arbitrary purporses by the user to communicate between SOCs. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#acd6b03ce8d83c1172c8b4c5bbaac739a">get_shared_user_memory_size()</a> </dd></dl>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00113">113</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="soc__manager_8cpp_source.html#l00040">foedus::soc::SocManager::get_shared_user_memory()</a>, and <a class="el" href="engine_8cpp_source.html#l00059">foedus::Engine::get_soc_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                 {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">return</span> engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">get_soc_manager</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SocManager.html#a4f4a98141cedc11e909878cfae62d5df">get_shared_user_memory</a>();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1soc_1_1SocManager_html_a4f4a98141cedc11e909878cfae62d5df"><div class="ttname"><a href="classfoedus_1_1soc_1_1SocManager.html#a4f4a98141cedc11e909878cfae62d5df">foedus::soc::SocManager::get_shared_user_memory</a></div><div class="ttdeci">void * get_shared_user_memory() const </div><div class="ttdoc">Shortcut for get_shared_memory_repo()->get_global_user_memory() </div><div class="ttdef"><b>Definition:</b> <a href="soc__manager_8cpp_source.html#l00040">soc_manager.cpp:40</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_ae9ad7ab6a3df52b0e9f0e50ede6faa2e"><div class="ttname"><a href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">foedus::Engine::get_soc_manager</a></div><div class="ttdeci">soc::SocManager * get_soc_manager() const </div><div class="ttdoc">See SOC and IPC. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00059">engine.cpp:59</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a678ed893d9fb18f180043e28bb8405e4_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a678ed893d9fb18f180043e28bb8405e4_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a678ed893d9fb18f180043e28bb8405e4_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_a678ed893d9fb18f180043e28bb8405e4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SocManager.html#a4f4a98141cedc11e909878cfae62d5df" title="Shortcut for get_shared_memory_repo()&#45;&gt;get_global_user_memory() " alt="" coords="264,5,444,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="287,71,421,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ab6dda26e594cbef6ceeb6287a1a3092b" title="foedus::soc::SharedMemory\lRepo::get_global_user_memory" alt="" coords="492,5,697,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acd6b03ce8d83c1172c8b4c5bbaac739a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::EngineMemory::get_shared_user_memory_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the byte size of shared user-controlled memory. Equivalent to SocOptions.shared_user_memory_size_kb_ &lt;&lt; 10. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html#a678ed893d9fb18f180043e28bb8405e4" title="As part of the global shared memory, we reserve this size of &#39;user memory&#39; that can be used for arbit...">get_shared_user_memory()</a> </dd></dl>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00117">117</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="soc__manager_8cpp_source.html#l00043">foedus::soc::SocManager::get_shared_user_memory_size()</a>, and <a class="el" href="engine_8cpp_source.html#l00059">foedus::Engine::get_soc_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                                         {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">return</span> engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">get_soc_manager</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SocManager.html#a69150b63965420241a8eb7d703876dc6">get_shared_user_memory_size</a>();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1soc_1_1SocManager_html_a69150b63965420241a8eb7d703876dc6"><div class="ttname"><a href="classfoedus_1_1soc_1_1SocManager.html#a69150b63965420241a8eb7d703876dc6">foedus::soc::SocManager::get_shared_user_memory_size</a></div><div class="ttdeci">uint64_t get_shared_user_memory_size() const </div><div class="ttdef"><b>Definition:</b> <a href="soc__manager_8cpp_source.html#l00043">soc_manager.cpp:43</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_ae9ad7ab6a3df52b0e9f0e50ede6faa2e"><div class="ttname"><a href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">foedus::Engine::get_soc_manager</a></div><div class="ttdeci">soc::SocManager * get_soc_manager() const </div><div class="ttdoc">See SOC and IPC. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00059">engine.cpp:59</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_acd6b03ce8d83c1172c8b4c5bbaac739a_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_acd6b03ce8d83c1172c8b4c5bbaac739a_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_acd6b03ce8d83c1172c8b4c5bbaac739a_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_acd6b03ce8d83c1172c8b4c5bbaac739a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SocManager.html#a69150b63965420241a8eb7d703876dc6" title="foedus::soc::SocManager\l::get_shared_user_memory_size" alt="" coords="264,5,475,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="302,71,437,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="523,5,657,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae35d16d716451eaa878ec2888960127d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::EngineMemory::grab_one_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A convenience function to grab one free volatile page from the given node. </p>
<p>DO NOT USE THIS METHOD in a frequently invoked place. You should use the batched interface to avoid mutex each time. This method is used only where performance doesn't matter. </p>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00136">136</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="engine__memory_8hpp_source.html#l00076">get_node_memory()</a>, <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="page__pool_8cpp_source.html#l00132">foedus::memory::PagePool::grab_one()</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>, and <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00254">foedus::storage::array::ArrayStoragePimpl::load_empty()</a>, and <a class="el" href="engine__memory_8cpp_source.html#l00148">load_one_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                      {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  PagePool* pool = <a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node)-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> offset;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(pool-&gt;grab_one(&amp;offset));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  *page = pool-&gt;get_resolver().resolve_offset_newpage(offset);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  pointer-&gt;set(node, offset);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="264,5,475,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="280,71,459,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="274,136,465,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="280,201,459,243"/>
<area shape="rect" id="node14" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="277,267,461,323"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="289,348,450,389"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="523,71,701,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="523,201,701,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="760,103,953,144"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="767,168,946,209"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="767,233,946,275"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="749,299,964,340"/>
<area shape="rect" id="node9" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1023,73,1215,115"/>
<area shape="rect" id="node10" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1012,139,1227,166"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_icgraph" id="classfoedus_1_1memory_1_1EngineMemory_ae35d16d716451eaa878ec2888960127d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a2bf1f0e04d213efe49f4e250968a60b9" title="foedus::storage::array\l::ArrayStoragePimpl::load_empty" alt="" coords="264,71,479,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1EngineMemory.html#a3c3c8902b7000d09878a5a2085f6058c" title="Another convenience method that also reads an existing snapshot page to the volatile page..." alt="" coords="266,136,477,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af6387df1cf86cecbbaba2c41635bbe7a" title="foedus::storage::array\l::ArrayStoragePimpl::create" alt="" coords="533,5,715,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="539,71,709,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a84737e8c5a5048f583cb07b8b746ed94" title="foedus::storage::array\l::ArrayStorage::create" alt="" coords="781,5,931,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="782,71,930,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="539,136,709,177"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="527,201,721,243"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="783,136,929,177"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="769,201,943,243"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a56f86610c89fff23bf3f834a6fcbf7a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::EngineMemory::initialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00043">43</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__resolver_8hpp_source.html#l00071">foedus::memory::LocalPageResolver::begin_</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="page__resolver_8hpp_source.html#l00073">foedus::memory::LocalPageResolver::end_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="page__pool_8cpp_source.html#l00119">foedus::memory::PagePool::get_base()</a>, <a class="el" href="engine_8cpp_source.html#l00048">foedus::Engine::get_debug()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>, <a class="el" href="engine_8cpp_source.html#l00073">foedus::Engine::get_soc_id()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="initializable_8hpp_source.html#l00169">foedus::DefaultInitializable::initialize()</a>, <a class="el" href="initializable_8hpp_source.html#l00196">foedus::DefaultInitializable::is_initialized()</a>, <a class="el" href="engine_8cpp_source.html#l00068">foedus::Engine::is_master()</a>, <a class="el" href="error__code_8hpp_source.html#l00109">foedus::kErrorCodeDepedentModuleUnavailableInit</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e">numa_available()</a>, and <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                                         {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Initializing EngineMemory..&quot;</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">if</span> (!engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a7a74b38a862f1671322e3c72169e48cc">get_debug</a>()-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a>()) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a154d6f9c4bf17ea4f3909286f00e2d7d">kErrorCodeDepedentModuleUnavailableInit</a>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (::<a class="code" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e">numa_available</a>() &lt; 0) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;WARNING, this machine is not a NUMA machine. FOEDUS still works fine,&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; but it is mainly designed for large servers with many sockets and cores&quot;</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// Even if the kernel is built without NUMA (eg ARMv8), we keep running.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// return ERROR_STACK(kErrorCodeMemoryNumaUnavailable);</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(node_memories_.empty());</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keyword">const</span> EngineOptions&amp; options = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> numa_nodes = options.thread_.group_count_;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#ae573dc07ccb642e01a0401afda819d1b">GlobalVolatilePageResolver::Base</a> bases[256];</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  uint64_t pool_begin = 0, pool_end = 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> node = 0; node &lt; numa_nodes; ++node) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    NumaNodeMemoryRef* ref = <span class="keyword">new</span> NumaNodeMemoryRef(engine_, node);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    node_memories_.push_back(ref);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    bases[node] = ref-&gt;get_volatile_pool()-&gt;get_base();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    pool_begin = ref-&gt;get_volatile_pool()-&gt;get_resolver().begin_;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    pool_end = ref-&gt;get_volatile_pool()-&gt;get_resolver().end_;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  global_volatile_page_resolver_ = GlobalVolatilePageResolver(</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    bases,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    numa_nodes,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    pool_begin,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    pool_end);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// Initialize local memory.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (!engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">is_master</a>()) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="group__SOC.html#ga8fc28ea9a2a4280f6b7c0e59084faab2">soc::SocId</a> node = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">get_soc_id</a>();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    local_memory_ = <span class="keyword">new</span> NumaNodeMemory(engine_, node);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(local_memory_-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a>());</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Node memory-&quot;</span> &lt;&lt; node &lt;&lt; <span class="stringliteral">&quot; was initialized!&quot;</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (options.memory_.rigorous_memory_boundary_check_) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;CAUTION: memory_.rigorous_memory_boundary_check_ is ON. We will&quot;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; put mprotect-ed pages between memory regions for debugging. It will be SLOW!&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">if</span> (options.memory_.rigorous_page_boundary_check_) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;CAUTION: memory_.rigorous_page_boundary_check_ is ON. We will&quot;</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; put mprotect-ed pages between every single page for debugging. It will be SLOOOW!&quot;</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a154d6f9c4bf17ea4f3909286f00e2d7d"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a154d6f9c4bf17ea4f3909286f00e2d7d">foedus::kErrorCodeDepedentModuleUnavailableInit</a></div><div class="ttdoc">0x0005 : "GENERAL: A dependent module is not initialized yet. This implies a wrong initialization ord...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00109">error_code.hpp:109</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_ae573dc07ccb642e01a0401afda819d1b"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#ae573dc07ccb642e01a0401afda819d1b">foedus::memory::GlobalVolatilePageResolver::Base</a></div><div class="ttdeci">storage::Page * Base</div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00093">page_resolver.hpp:93</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a5a390a597023f4b5c8cbcdcdd95e17ee"><div class="ttname"><a href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">foedus::Engine::is_master</a></div><div class="ttdeci">bool is_master() const </div><div class="ttdoc">Returns if this engine object is a master instance. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00068">engine.cpp:68</a></div></div>
<div class="ttc" id="numa_8h_html_a413cadd87796fff247c83d9ad817cc7e"><div class="ttname"><a href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e">numa_available</a></div><div class="ttdeci">int numa_available(void)</div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a22a0dc3bbbca682c3bc41eace9b6d1ff"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">foedus::DefaultInitializable::initialize</a></div><div class="ttdeci">ErrorStack initialize() override final</div><div class="ttdoc">Typical implementation of Initializable::initialize() that provides initialize-once semantics...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00169">initializable.hpp:169</a></div></div>
<div class="ttc" id="group__SOC_html_ga8fc28ea9a2a4280f6b7c0e59084faab2"><div class="ttname"><a href="group__SOC.html#ga8fc28ea9a2a4280f6b7c0e59084faab2">foedus::soc::SocId</a></div><div class="ttdeci">uint16_t SocId</div><div class="ttdoc">Represents an ID of an SOC, or NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="soc__id_8hpp_source.html#l00041">soc_id.hpp:41</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a8d9a31e48aec9b73e16b64170c0250f9"><div class="ttname"><a href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">foedus::Engine::get_soc_id</a></div><div class="ttdeci">soc::SocId get_soc_id() const </div><div class="ttdoc">If this is a child instance, returns its SOC ID (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00073">engine.cpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a7a74b38a862f1671322e3c72169e48cc"><div class="ttname"><a href="classfoedus_1_1Engine.html#a7a74b38a862f1671322e3c72169e48cc">foedus::Engine::get_debug</a></div><div class="ttdeci">debugging::DebuggingSupports * get_debug() const </div><div class="ttdoc">See Debug-Support functionalities. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00048">engine.cpp:48</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a1abda1e84b8af8bd6916e52fd0a09f3e"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">foedus::DefaultInitializable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override final</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00196">initializable.hpp:196</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a56f86610c89fff23bf3f834a6fcbf7a5_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a56f86610c89fff23bf3f834a6fcbf7a5_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a56f86610c89fff23bf3f834a6fcbf7a5_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_a56f86610c89fff23bf3f834a6fcbf7a5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="270,5,449,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a7a74b38a862f1671322e3c72169e48cc" title="See Debug&#45;Support functionalities. " alt="" coords="292,71,427,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="292,136,427,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="270,201,449,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9" title="If this is a child instance, returns its SOC ID (NUMA node). " alt="" coords="292,267,427,308"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="264,332,455,373"/>
<area shape="rect" id="node9" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="273,397,445,439"/>
<area shape="rect" id="node12" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="506,463,678,504"/>
<area shape="rect" id="node14" href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee" title="Returns if this engine object is a master instance. " alt="" coords="296,515,423,556"/>
<area shape="rect" id="node15" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="304,581,415,607"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="503,201,681,243"/>
<area shape="rect" id="node10" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="506,267,678,308"/>
<area shape="rect" id="node11" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="527,332,657,373"/>
<area shape="rect" id="node13" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="506,397,678,439"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3c3c8902b7000d09878a5a2085f6058c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::EngineMemory::load_one_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1cache_1_1SnapshotFileSet.html">cache::SnapshotFileSet</a> *&#160;</td>
          <td class="paramname"><em>fileset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>snapshot_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Another convenience method that also reads an existing snapshot page to the volatile page. </p>
<p>Again, its performance is not optimized at all. Do not abuse. In fact, this is used only for one-time initialization code. </p>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00148">148</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="storage__id_8hpp_source.html#l00095">foedus::storage::extract_numa_node_from_snapshot_pointer()</a>, <a class="el" href="engine__memory_8cpp_source.html#l00136">grab_one_volatile_page()</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="snapshot__file__set_8cpp_source.html#l00095">foedus::cache::SnapshotFileSet::read_page()</a>, <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>, and <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00301">foedus::storage::array::ArrayStoragePimpl::load()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00176">foedus::storage::masstree::MasstreeStoragePimpl::load()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00135">foedus::storage::hash::HashStoragePimpl::load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                      {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(snapshot_pointer != 0);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> node = <a class="code" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1">storage::extract_numa_node_from_snapshot_pointer</a>(snapshot_pointer);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d">grab_one_volatile_page</a>(node, pointer, page));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(fileset-&gt;read_page(snapshot_pointer, *page));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  (*page)-&gt;get_header().snapshot_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  (*page)-&gt;get_header().page_id_ = pointer-&gt;word;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_ae35d16d716451eaa878ec2888960127d"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d">foedus::memory::EngineMemory::grab_one_volatile_page</a></div><div class="ttdeci">ErrorStack grab_one_volatile_page(foedus::thread::ThreadGroupId node, storage::VolatilePagePointer *pointer, storage::Page **page)</div><div class="ttdoc">A convenience function to grab one free volatile page from the given node. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8cpp_source.html#l00136">engine_memory.cpp:136</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a8f6e96ac10eb804602349a54292d26a1"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1">foedus::storage::extract_numa_node_from_snapshot_pointer</a></div><div class="ttdeci">uint8_t extract_numa_node_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00095">storage_id.hpp:95</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="783,413,971,469"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1EngineMemory.html#ae35d16d716451eaa878ec2888960127d" title="A convenience function to grab one free volatile page from the given node. " alt="" coords="264,632,475,673"/>
<area shape="rect" id="node18" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="276,252,463,293"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="523,697,733,739"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="539,763,717,804"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="533,828,723,869"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4" title="Grab only one page. " alt="" coords="539,485,717,527"/>
<area shape="rect" id="node16" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="536,551,720,607"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="547,632,709,673"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="787,763,966,804"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a3293a43a76f3720cf5c92c5fbcf2d02f" title="foedus::memory::PagePool\lPimpl::grab_one" alt="" coords="787,493,966,535"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="1031,591,1224,632"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1038,395,1217,436"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1038,460,1217,501"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="1020,525,1235,567"/>
<area shape="rect" id="node11" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1294,561,1486,603"/>
<area shape="rect" id="node12" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1283,627,1497,654"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="528,245,728,301"/>
<area shape="rect" id="node20" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="535,340,721,381"/>
<area shape="rect" id="node22" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="553,151,703,192"/>
<area shape="rect" id="node29" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="553,77,703,119"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="781,333,972,389"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="805,5,948,47"/>
<area shape="rect" id="node24" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="801,267,952,308"/>
<area shape="rect" id="node25" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="807,71,947,112"/>
<area shape="rect" id="node26" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="801,201,952,243"/>
<area shape="rect" id="node27" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="809,136,944,177"/>
<area shape="rect" id="node28" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="1060,136,1195,177"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_icgraph" id="classfoedus_1_1memory_1_1EngineMemory_a3c3c8902b7000d09878a5a2085f6058c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a577ab7f32ca2b4d48a7fa174263de47d" title="foedus::storage::array\l::ArrayStoragePimpl::load" alt="" coords="276,5,447,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="264,71,459,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="276,136,447,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#aa0f536b8252655076528b290abb84a87" title="foedus::storage::array\l::ArrayStorage::load" alt="" coords="519,5,667,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="507,71,680,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="520,136,667,177"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3754cd4bed613ea0f8ca453e5d914f5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::EngineMemory::uninitialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="engine__memory_8cpp_source.html#l00091">91</a> of file <a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a>.</p>

<p>References <a class="el" href="error__stack__batch_8hpp_source.html#l00083">foedus::ErrorStackBatch::emprace_back()</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="engine_8cpp_source.html#l00048">foedus::Engine::get_debug()</a>, <a class="el" href="engine_8cpp_source.html#l00073">foedus::Engine::get_soc_id()</a>, <a class="el" href="initializable_8hpp_source.html#l00196">foedus::DefaultInitializable::is_initialized()</a>, <a class="el" href="engine_8cpp_source.html#l00068">foedus::Engine::is_master()</a>, <a class="el" href="error__code_8hpp_source.html#l00110">foedus::kErrorCodeDepedentModuleUnavailableUninit</a>, <a class="el" href="error__stack__batch_8hpp_source.html#l00136">SUMMARIZE_ERROR_BATCH</a>, and <a class="el" href="initializable_8hpp_source.html#l00187">foedus::DefaultInitializable::uninitialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                           {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Uninitializing EngineMemory..&quot;</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  ErrorStackBatch batch;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">if</span> (!engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a7a74b38a862f1671322e3c72169e48cc">get_debug</a>()-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a>()) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    batch.emprace_back(<a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a3f20fb5c9683a0a7ac634160b380d504">kErrorCodeDepedentModuleUnavailableUninit</a>));</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>* ref : node_memories_) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">delete</span> ref;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  node_memories_.clear();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// Uninitialize local memory.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">if</span> (!engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">is_master</a>() &amp;&amp; local_memory_) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="group__SOC.html#ga8fc28ea9a2a4280f6b7c0e59084faab2">soc::SocId</a> node = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">get_soc_id</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    batch.emprace_back(local_memory_-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a>());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">delete</span> local_memory_;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    local_memory_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Node memory-&quot;</span> &lt;&lt; node &lt;&lt; <span class="stringliteral">&quot; was uninitialized!&quot;</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a>(batch);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_ab14b136a7d26f9f499ab9dc15a45a8cb"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">foedus::DefaultInitializable::uninitialize</a></div><div class="ttdeci">ErrorStack uninitialize() override final</div><div class="ttdoc">Typical implementation of Initializable::uninitialize() that provides uninitialize-once semantics...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00187">initializable.hpp:187</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a5a390a597023f4b5c8cbcdcdd95e17ee"><div class="ttname"><a href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee">foedus::Engine::is_master</a></div><div class="ttdeci">bool is_master() const </div><div class="ttdoc">Returns if this engine object is a master instance. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00068">engine.cpp:68</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga67390b22b0afbe5a4938df9847eafda9"><div class="ttname"><a href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a></div><div class="ttdeci">#define SUMMARIZE_ERROR_BATCH(x)</div><div class="ttdoc">This macro calls ErrorStackBatch::summarize() with automatically provided parameters. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack__batch_8hpp_source.html#l00136">error_stack_batch.hpp:136</a></div></div>
<div class="ttc" id="group__SOC_html_ga8fc28ea9a2a4280f6b7c0e59084faab2"><div class="ttname"><a href="group__SOC.html#ga8fc28ea9a2a4280f6b7c0e59084faab2">foedus::soc::SocId</a></div><div class="ttdeci">uint16_t SocId</div><div class="ttdoc">Represents an ID of an SOC, or NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="soc__id_8hpp_source.html#l00041">soc_id.hpp:41</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a8d9a31e48aec9b73e16b64170c0250f9"><div class="ttname"><a href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9">foedus::Engine::get_soc_id</a></div><div class="ttdeci">soc::SocId get_soc_id() const </div><div class="ttdoc">If this is a child instance, returns its SOC ID (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00073">engine.cpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a7a74b38a862f1671322e3c72169e48cc"><div class="ttname"><a href="classfoedus_1_1Engine.html#a7a74b38a862f1671322e3c72169e48cc">foedus::Engine::get_debug</a></div><div class="ttdeci">debugging::DebuggingSupports * get_debug() const </div><div class="ttdoc">See Debug-Support functionalities. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00048">engine.cpp:48</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a3f20fb5c9683a0a7ac634160b380d504"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a3f20fb5c9683a0a7ac634160b380d504">foedus::kErrorCodeDepedentModuleUnavailableUninit</a></div><div class="ttdoc">0x0006 : "GENERAL: A dependent module is already uninitialized. This implies a wrong uninitialization...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00110">error_code.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a1abda1e84b8af8bd6916e52fd0a09f3e"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">foedus::DefaultInitializable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override final</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00196">initializable.hpp:196</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1EngineMemory_a3754cd4bed613ea0f8ca453e5d914f5a_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1EngineMemory_a3754cd4bed613ea0f8ca453e5d914f5a_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1EngineMemory_a3754cd4bed613ea0f8ca453e5d914f5a_cgraph" id="classfoedus_1_1memory_1_1EngineMemory_a3754cd4bed613ea0f8ca453e5d914f5a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1ErrorStackBatch.html#a1fe18afaafed459feb5c644ba9d7c56e" title="If the given ErrorStack is an error, this method adds it to the end of this batch. " alt="" coords="268,5,432,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a7a74b38a862f1671322e3c72169e48cc" title="See Debug&#45;Support functionalities. " alt="" coords="283,71,417,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9" title="If this is a child instance, returns its SOC ID (NUMA node). " alt="" coords="283,136,417,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="484,224,656,265"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a5a390a597023f4b5c8cbcdcdd95e17ee" title="Returns if this engine object is a master instance. " alt="" coords="287,253,413,295"/>
<area shape="rect" id="node7" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="264,319,436,360"/>
<area shape="rect" id="node8" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="484,319,656,360"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/memory/<a class="el" href="engine__memory_8hpp_source.html">engine_memory.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/memory/<a class="el" href="engine__memory_8cpp_source.html">engine_memory.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1memory.html">memory</a></li><li class="navelem"><a class="el" href="classfoedus_1_1memory_1_1EngineMemory.html">EngineMemory</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
