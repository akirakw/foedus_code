<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::thread::ThreadPimpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1thread_1_1ThreadPimpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1thread_1_1ThreadPimpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::thread::ThreadPimpl Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__THREAD.html">Thread and Thread-Group</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Pimpl object of <a class="el" href="classfoedus_1_1thread_1_1Thread.html" title="Represents one thread running on one NUMA core. ">Thread</a>.  
 <a href="classfoedus_1_1thread_1_1ThreadPimpl.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pimpl object of <a class="el" href="classfoedus_1_1thread_1_1Thread.html" title="Represents one thread running on one NUMA core. ">Thread</a>. </p>
<p>A private pimpl object for <a class="el" href="classfoedus_1_1thread_1_1Thread.html" title="Represents one thread running on one NUMA core. ">Thread</a>. Do not include this header from a client program unless you know what you are doing.</p>
<p>Especially, this class heavily uses C++11 classes, which is why we separate this class from <a class="el" href="classfoedus_1_1thread_1_1Thread.html" title="Represents one thread running on one NUMA core. ">Thread</a>. Be aware of notices in <a class="el" href="group__CXX11.html">C++11 Keywords in Public Headers</a> unless your client program allows C++11. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00159">159</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::thread::ThreadPimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl__inherit__graph.png" border="0" usemap="#foedus_1_1thread_1_1ThreadPimpl_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1thread_1_1ThreadPimpl_inherit__map" id="foedus_1_1thread_1_1ThreadPimpl_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="11,80,183,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="31,5,163,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::thread::ThreadPimpl:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl__coll__graph.png" border="0" usemap="#foedus_1_1thread_1_1ThreadPimpl_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1thread_1_1ThreadPimpl_coll__map" id="foedus_1_1thread_1_1ThreadPimpl_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="358,152,530,179"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1NumaNodeMemory.html" title="Repository of memories dynamically acquired and shared within one NUMA node (socket). " alt="" coords="795,91,982,133"/>
<area shape="rect" id="node12" href="classfoedus_1_1cache_1_1SnapshotFileSet.html" title="Holds a set of read&#45;only file objects for snapshot files. " alt="" coords="785,157,992,184"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1NumaCoreMemory.html" title="Repository of memories dynamically acquired within one CPU core (thread). " alt="" coords="797,209,981,250"/>
<area shape="rect" id="node25" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread&#45;local log buffer. " alt="" coords="795,275,982,301"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="40,229,172,256"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1Thread.html" title="Represents one thread running on one NUMA core. " alt="" coords="589,251,739,277"/>
<area shape="rect" id="node23" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. " alt="" coords="610,284,718,311"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1PagePool.html" title="Page pool for volatile read/write store (VolatilePage) and the read&#45;only bufferpool (SnapshotPage)..." alt="" coords="575,317,753,344"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html" title="foedus::xct::McsRwAsyncMapping" alt="" coords="777,513,1000,540"/>
<area shape="rect" id="node6" href="structfoedus_1_1thread_1_1ThreadControlBlock.html" title="Shared data of ThreadPimpl. " alt="" coords="793,565,985,606"/>
<area shape="rect" id="node7" href="classfoedus_1_1FixedErrorStack.html" title="Representation of ErrorStack that can be copied to other processes and even serialized to files..." alt="" coords="363,356,525,383"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SharedPolling.html" title="A polling&#45;wait mechanism that can be placed in shared memory and used from multiple processes..." alt="" coords="355,408,533,435"/>
<area shape="rect" id="node9" href="classfoedus_1_1Epoch.html" title="Represents a time epoch. " alt="" coords="391,459,497,485"/>
<area shape="rect" id="node10" href="classfoedus_1_1assorted_1_1FixedString.html" title="foedus::assorted::FixedString\l\&lt; 60 \&gt;" alt="" coords="348,510,540,551"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="357,576,531,603"/>
<area shape="rect" id="node33" href="classfoedus_1_1cache_1_1CacheHashtable.html" title="A NUMA&#45;local hashtable of cached snapshot pages. " alt="" coords="785,689,992,716"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1Xct.html" title="Represents a user transaction. " alt="" coords="833,740,945,767"/>
<area shape="rect" id="node15" href="structfoedus_1_1xct_1_1RwLockableXctId.html" title="The MCS reader&#45;writer lock variant of LockableXctId. " alt="" coords="793,856,985,883"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1McsRwLock.html" title="An MCS reader&#45;writer lock data structure. " alt="" coords="361,920,527,947"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1XctId.html" title="Persistent status part of Transaction ID. " alt="" coords="383,971,505,997"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html" title="Reader&#45;writer (RW) MCS lock classes. " alt="" coords="800,907,977,949"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html#unionfoedus_1_1xct_1_1McsRwSimpleBlock_1_1Self" title="foedus::xct::McsRwSimple\lBlock::Self" alt="" coords="355,1022,533,1063"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html#structfoedus_1_1xct_1_1McsRwSimpleBlock_1_1Self_1_1Components" title="foedus::xct::McsRwSimple\lBlock::Self::Components" alt="" coords="17,1022,195,1063"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1McsWwBlock.html" title="Pre&#45;allocated MCS block for WW&#45;locks. " alt="" coords="801,973,976,1000"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1McsWwBlockData.html" title="Exclusive&#45;only (WW) MCS lock classes. " alt="" coords="343,1088,545,1115"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html" title="Pre&#45;allocated MCS block for extended version of RW&#45;locks. " alt="" coords="793,1025,985,1066"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html#unionfoedus_1_1xct_1_1McsRwExtendedBlock_1_1Field" title="foedus::xct::McsRwExtended\lBlock::Field" alt="" coords="348,1139,540,1181"/>
<area shape="rect" id="node28" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html#structfoedus_1_1xct_1_1McsRwExtendedBlock_1_1Field_1_1Components" title="foedus::xct::McsRwExtended\lBlock::Field::Components" alt="" coords="10,1139,202,1181"/>
<area shape="rect" id="node29" href="structfoedus_1_1memory_1_1LocalPageResolver.html" title="Resolves an offset in local (same NUMA node) page pool to a pointer and vice versa. " alt="" coords="797,1090,981,1131"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1Page.html" title="Just a marker to denote that the memory region represents a data page. " alt="" coords="369,1208,519,1235"/>
<area shape="rect" id="node31" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html" title="Resolves an offset in a volatile page pool to an actual pointer and vice versa. " alt="" coords="787,1155,990,1197"/>
<area shape="rect" id="node34" href="structfoedus_1_1cache_1_1HashFunc.html" title="A simple hash function logic used in snasphot cache. " alt="" coords="359,627,529,653"/>
<area shape="rect" id="node35" href="structfoedus_1_1assorted_1_1ConstDiv.html" title="The pre&#45;calculated p&#45;m pair for optimized integer division by constant. " alt="" coords="17,627,195,653"/>
<area shape="rect" id="node36" href="namespacefoedus_1_1cache.html#structfoedus_1_1cache_1_1CacheOverflowEntry" title="An entry in the overflow linked list for snapshot cache. " alt="" coords="346,741,542,782"/>
<area shape="rect" id="node37" href="structfoedus_1_1cache_1_1CacheBucket.html" title="Hash bucket in cache table. " alt="" coords="11,696,201,723"/>
<area shape="rect" id="node38" href="structfoedus_1_1cache_1_1CacheRefCount.html" title="A loosely maintained reference count for CLOCK algorithm. " alt="" coords="5,764,207,791"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1AlignedMemory.html" title="Represents one memory block aligned to actual OS/hardware pages. " alt="" coords="337,869,551,896"/>
<area shape="rect" id="node40" title="STL class. " alt="" coords="847,1221,931,1248"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a92f7bb785b2f0acc72deaab9f186453c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a92f7bb785b2f0acc72deaab9f186453c">ThreadPimpl</a> ()=delete</td></tr>
<tr class="separator:a92f7bb785b2f0acc72deaab9f186453c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace37a6e62cdde3cef1009c59b4dd44c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ace37a6e62cdde3cef1009c59b4dd44c3">ThreadPimpl</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="classfoedus_1_1thread_1_1Thread.html">Thread</a> *holder, <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id, <a class="el" href="group__THREAD.html#gad998a8a9811ac9f9bd7c88bea3ce1d9b">ThreadGlobalOrdinal</a> global_ordinal)</td></tr>
<tr class="separator:ace37a6e62cdde3cef1009c59b4dd44c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741208e803d0a0bb5f979ebb099d2a8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d">initialize_once</a> () override final</td></tr>
<tr class="separator:a741208e803d0a0bb5f979ebb099d2a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7104a56eaff1c1f8c87f5bb03f4045"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aba7104a56eaff1c1f8c87f5bb03f4045">uninitialize_once</a> () override final</td></tr>
<tr class="separator:aba7104a56eaff1c1f8c87f5bb03f4045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73a9dfcab4771b1a5c6362406b27faeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb">handle_tasks</a> ()</td></tr>
<tr class="memdesc:a73a9dfcab4771b1a5c6362406b27faeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine of the worker thread.  <a href="#a73a9dfcab4771b1a5c6362406b27faeb">More...</a><br /></td></tr>
<tr class="separator:a73a9dfcab4771b1a5c6362406b27faeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6c2ae1c63499d211f31d3165eeea3cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad6c2ae1c63499d211f31d3165eeea3cf">set_thread_schedule</a> ()</td></tr>
<tr class="memdesc:ad6c2ae1c63499d211f31d3165eeea3cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes the thread's policy/priority  <a href="#ad6c2ae1c63499d211f31d3165eeea3cf">More...</a><br /></td></tr>
<tr class="separator:ad6c2ae1c63499d211f31d3165eeea3cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28f34cbb16ac60050a2e42332058b3eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb">is_stop_requested</a> () const </td></tr>
<tr class="separator:a28f34cbb16ac60050a2e42332058b3eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16c6375f66e9f177c908dc1fbc132681"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681">find_or_read_a_snapshot_page</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **out)</td></tr>
<tr class="memdesc:a16c6375f66e9f177c908dc1fbc132681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the given page in snapshot cache, reading it if not found.  <a href="#a16c6375f66e9f177c908dc1fbc132681">More...</a><br /></td></tr>
<tr class="separator:a16c6375f66e9f177c908dc1fbc132681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98de2aa47bebca5add3e0550f2c602bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf">find_or_read_snapshot_pages_batch</a> (uint16_t batch_size, const <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> *page_ids, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **out)</td></tr>
<tr class="memdesc:a98de2aa47bebca5add3e0550f2c602bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Batched version of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. ">find_or_read_a_snapshot_page()</a>.  <a href="#a98de2aa47bebca5add3e0550f2c602bf">More...</a><br /></td></tr>
<tr class="separator:a98de2aa47bebca5add3e0550f2c602bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d583a33e85e1a33568fa04b409ae2ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">read_a_snapshot_page</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *buffer) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a3d583a33e85e1a33568fa04b409ae2ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a snapshot page using the thread-local file descriptor set.  <a href="#a3d583a33e85e1a33568fa04b409ae2ca">More...</a><br /></td></tr>
<tr class="separator:a3d583a33e85e1a33568fa04b409ae2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c828d75840906244fd52c44a793232d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4c828d75840906244fd52c44a793232d">read_snapshot_pages</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id_begin, uint32_t page_count, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *buffer) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a4c828d75840906244fd52c44a793232d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read contiguous pages in one shot.  <a href="#a4c828d75840906244fd52c44a793232d">More...</a><br /></td></tr>
<tr class="separator:a4c828d75840906244fd52c44a793232d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a95ef1bd710a66e0c24df998f881d04"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04">install_a_volatile_page</a> (<a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> *pointer, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **installed_page)</td></tr>
<tr class="memdesc:a4a95ef1bd710a66e0c24df998f881d04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs a volatile page to the given dual pointer as a copy of the snapshot page.  <a href="#a4a95ef1bd710a66e0c24df998f881d04">More...</a><br /></td></tr>
<tr class="separator:a4a95ef1bd710a66e0c24df998f881d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b77133f66157bca81a49caeca9a9904"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904">follow_page_pointer</a> (<a class="el" href="group__STORAGE.html#gab1f01cb8d7e103171a991936c4805486">storage::VolatilePageInit</a> page_initializer, bool tolerate_null_pointer, bool will_modify, bool take_ptr_set_snapshot, <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> *pointer, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **page, const <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *parent, uint16_t index_in_parent)</td></tr>
<tr class="memdesc:a9b77133f66157bca81a49caeca9a9904"><td class="mdescLeft">&#160;</td><td class="mdescRight">A general method to follow (read) a page pointer.  <a href="#a9b77133f66157bca81a49caeca9a9904">More...</a><br /></td></tr>
<tr class="separator:a9b77133f66157bca81a49caeca9a9904"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89fe2af2a31e70a89e143cbc2d687ffb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb">follow_page_pointers_for_read_batch</a> (uint16_t batch_size, <a class="el" href="group__STORAGE.html#gab1f01cb8d7e103171a991936c4805486">storage::VolatilePageInit</a> page_initializer, bool tolerate_null_pointer, bool take_ptr_set_snapshot, <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> **pointers, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **parents, const uint16_t *index_in_parents, bool *followed_snapshots, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **out)</td></tr>
<tr class="memdesc:a89fe2af2a31e70a89e143cbc2d687ffb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Batched version of follow_page_pointer with will_modify==false.  <a href="#a89fe2af2a31e70a89e143cbc2d687ffb">More...</a><br /></td></tr>
<tr class="separator:a89fe2af2a31e70a89e143cbc2d687ffb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3821c478965e40c60c819a7e5a83e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5">follow_page_pointers_for_write_batch</a> (uint16_t batch_size, <a class="el" href="group__STORAGE.html#gab1f01cb8d7e103171a991936c4805486">storage::VolatilePageInit</a> page_initializer, <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> **pointers, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **parents, const uint16_t *index_in_parents, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **out)</td></tr>
<tr class="memdesc:aac3821c478965e40c60c819a7e5a83e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true.  <a href="#aac3821c478965e40c60c819a7e5a83e5">More...</a><br /></td></tr>
<tr class="separator:aac3821c478965e40c60c819a7e5a83e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c43ac83a4cdcc3e48d8b125dfcff963"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963">on_snapshot_cache_miss</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id, <a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> *pool_offset)</td></tr>
<tr class="separator:a3c43ac83a4cdcc3e48d8b125dfcff963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1611b1e29b58ee7aaf3b88cc57f9343"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">place_a_new_volatile_page</a> (<a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> new_offset, <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> *pointer)</td></tr>
<tr class="memdesc:ab1611b1e29b58ee7aaf3b88cc57f9343"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subroutine of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. ">install_a_volatile_page()</a> and <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. ">follow_page_pointer()</a> to atomically place the given new volatile page created by this thread.  <a href="#ab1611b1e29b58ee7aaf3b88cc57f9343">More...</a><br /></td></tr>
<tr class="separator:ab1611b1e29b58ee7aaf3b88cc57f9343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674a8a8e613dc4e19a626da490c883fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc">collect_retired_volatile_page</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> ptr)</td></tr>
<tr class="memdesc:a674a8a8e613dc4e19a626da490c883fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keeps the specified volatile page as retired as of the current epoch.  <a href="#a674a8a8e613dc4e19a626da490c883fc">More...</a><br /></td></tr>
<tr class="separator:a674a8a8e613dc4e19a626da490c883fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694a2aaa7515ab45a8c9fa12b709defb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb">flush_retired_volatile_page</a> (uint16_t node, <a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> current_epoch, <a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html">memory::PagePoolOffsetAndEpochChunk</a> *chunk)</td></tr>
<tr class="memdesc:a694a2aaa7515ab45a8c9fa12b709defb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subroutine of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. ">collect_retired_volatile_page()</a> in case the chunk becomes full.  <a href="#a694a2aaa7515ab45a8c9fa12b709defb">More...</a><br /></td></tr>
<tr class="separator:a694a2aaa7515ab45a8c9fa12b709defb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d4f2f16808e20d2d174f12ff1c7317"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28d4f2f16808e20d2d174f12ff1c7317">is_volatile_page_retired</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> ptr)</td></tr>
<tr class="memdesc:a28d4f2f16808e20d2d174f12ff1c7317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subroutine of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. ">collect_retired_volatile_page()</a> just for assertion.  <a href="#a28d4f2f16808e20d2d174f12ff1c7317">More...</a><br /></td></tr>
<tr class="separator:a28d4f2f16808e20d2d174f12ff1c7317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af52661009b044c7a6553234720d71923"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1ThreadRef.html">ThreadRef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">get_thread_ref</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id)</td></tr>
<tr class="separator:af52661009b044c7a6553234720d71923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b0a7e1a8f27975fc350cab3d32be04"><td class="memTemplParams" colspan="2">template&lt;typename FUNC &gt; </td></tr>
<tr class="memitem:a27b0a7e1a8f27975fc350cab3d32be04"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a27b0a7e1a8f27975fc350cab3d32be04">switch_mcs_impl</a> (FUNC func)</td></tr>
<tr class="memdesc:a27b0a7e1a8f27975fc350cab3d32be04"><td class="mdescLeft">&#160;</td><td class="mdescRight">MCS locks methods.  <a href="#a27b0a7e1a8f27975fc350cab3d32be04">More...</a><br /></td></tr>
<tr class="separator:a27b0a7e1a8f27975fc350cab3d32be04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33a1b8b428cd84029b8b377867197ea4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a> () const </td></tr>
<tr class="separator:a33a1b8b428cd84029b8b377867197ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1783a8b90bfcd0fa87c4947fc406b0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b">cll_release_all_locks_after</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a> address)</td></tr>
<tr class="memdesc:af1783a8b90bfcd0fa87c4947fc406b0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">RW-locks.  <a href="#af1783a8b90bfcd0fa87c4947fc406b0b">More...</a><br /></td></tr>
<tr class="separator:af1783a8b90bfcd0fa87c4947fc406b0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4197d522317d6177fd0d9a0ee811cdf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5">cll_giveup_all_locks_after</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a> address)</td></tr>
<tr class="separator:a4197d522317d6177fd0d9a0ee811cdf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd87e3c9d855306d2c8115571eb79fa6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6">cll_try_or_acquire_single_lock</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">xct::LockListPosition</a> pos)</td></tr>
<tr class="separator:afd87e3c9d855306d2c8115571eb79fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae594169d3ecc7b0d4d356d1ed6dfa8b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2">cll_try_or_acquire_multiple_locks</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">xct::LockListPosition</a> upto_pos)</td></tr>
<tr class="separator:ae594169d3ecc7b0d4d356d1ed6dfa8b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6367855f3aa3549b2d7b74adf383c87a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a">cll_release_all_locks</a> ()</td></tr>
<tr class="separator:a6367855f3aa3549b2d7b74adf383c87a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ff575610172c3b1ed337665a277f761"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761">cll_get_max_locked_id</a> () const </td></tr>
<tr class="separator:a6ff575610172c3b1ed337665a277f761"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a498a6a07313bf9fbb2c0e3d02f075221"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221">run_nested_sysxct</a> (<a class="el" href="structfoedus_1_1xct_1_1SysxctFunctor.html">xct::SysxctFunctor</a> *functor, uint32_t max_retries)</td></tr>
<tr class="memdesc:a498a6a07313bf9fbb2c0e3d02f075221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sysxct-related.  <a href="#a498a6a07313bf9fbb2c0e3d02f075221">More...</a><br /></td></tr>
<tr class="separator:a498a6a07313bf9fbb2c0e3d02f075221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a056563bc302fb45ad684a7fa28d00161"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a056563bc302fb45ad684a7fa28d00161">sysxct_record_lock</a> (<a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *sysxct_workspace, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *lock)</td></tr>
<tr class="separator:a056563bc302fb45ad684a7fa28d00161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7234ffc46e46d480cedc556f0800da6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7234ffc46e46d480cedc556f0800da6">sysxct_batch_record_locks</a> (<a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *sysxct_workspace, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id, uint32_t lock_count, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> **locks)</td></tr>
<tr class="separator:aa7234ffc46e46d480cedc556f0800da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd3cb727c6e211c8e6a72ccb00f3854"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a2cd3cb727c6e211c8e6a72ccb00f3854">sysxct_page_lock</a> (<a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *sysxct_workspace, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *page)</td></tr>
<tr class="separator:a2cd3cb727c6e211c8e6a72ccb00f3854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac779ce5587967f00b09325337578dd24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac779ce5587967f00b09325337578dd24">sysxct_batch_page_locks</a> (<a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *sysxct_workspace, uint32_t lock_count, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **pages)</td></tr>
<tr class="separator:ac779ce5587967f00b09325337578dd24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ea11736c6b062482876159d39caec8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa6ea11736c6b062482876159d39caec8">get_mcs_rw_my_blocks</a> (<a class="el" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html">xct::McsRwSimpleBlock</a> **out)</td></tr>
<tr class="separator:aa6ea11736c6b062482876159d39caec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87b4ca5e80c49490068d37ad56b01dfb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a87b4ca5e80c49490068d37ad56b01dfb">get_mcs_rw_my_blocks</a> (<a class="el" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html">xct::McsRwExtendedBlock</a> **out)</td></tr>
<tr class="separator:a87b4ca5e80c49490068d37ad56b01dfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1DefaultInitializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1DefaultInitializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1DefaultInitializable.html">foedus::DefaultInitializable</a></td></tr>
<tr class="memitem:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a5e0a2679baa030e297c1a51847352945">DefaultInitializable</a> ()</td></tr>
<tr class="separator:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afe7a18ec3e5edd143eb7d6a75d65ef9b">~DefaultInitializable</a> ()</td></tr>
<tr class="separator:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afd6a8f8296ab570b545430593287d454">DefaultInitializable</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a31eb5acadf0544b97414efd33aed08c7">operator=</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a> () override final</td></tr>
<tr class="memdesc:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#aa087b096d1edaeb0304c250eadb0d7e1" title="Acquires resources in this object, usually called right after constructor. ">Initializable::initialize()</a> that provides initialize-once semantics.  <a href="#a22a0dc3bbbca682c3bc41eace9b6d1ff">More...</a><br /></td></tr>
<tr class="separator:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a> () override final</td></tr>
<tr class="memdesc:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#afbe5738b0bc85362fba80bdf788fd3c3" title="An idempotent method to release all resources of this object, if any. ">Initializable::uninitialize()</a> that provides uninitialize-once semantics.  <a href="#ab14b136a7d26f9f499ab9dc15a45a8cb">More...</a><br /></td></tr>
<tr class="separator:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a> () const  override final</td></tr>
<tr class="memdesc:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already initialized or not.  <a href="#a1abda1e84b8af8bd6916e52fd0a09f3e">More...</a><br /></td></tr>
<tr class="separator:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Initializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Initializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Initializable.html">foedus::Initializable</a></td></tr>
<tr class="memitem:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Initializable.html#aff308260543d18b3fd1367fd9017b176">~Initializable</a> ()</td></tr>
<tr class="separator:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae1bfd239ac92cface8460b6e1ffa1813"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a></td></tr>
<tr class="memdesc:ae1bfd239ac92cface8460b6e1ffa1813"><td class="mdescLeft">&#160;</td><td class="mdescRight">MCS locks methods.  <a href="#ae1bfd239ac92cface8460b6e1ffa1813">More...</a><br /></td></tr>
<tr class="separator:ae1bfd239ac92cface8460b6e1ffa1813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7cc8b97ee07c0a860f0c5a3247d6ace"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">Thread</a> *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a></td></tr>
<tr class="memdesc:aa7cc8b97ee07c0a860f0c5a3247d6ace"><td class="mdescLeft">&#160;</td><td class="mdescRight">The public object that holds this pimpl object.  <a href="#aa7cc8b97ee07c0a860f0c5a3247d6ace">More...</a><br /></td></tr>
<tr class="separator:aa7cc8b97ee07c0a860f0c5a3247d6ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac881d08d38d5332ddababbef597e67a9"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a></td></tr>
<tr class="memdesc:ac881d08d38d5332ddababbef597e67a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unique ID of this thread.  <a href="#ac881d08d38d5332ddababbef597e67a9">More...</a><br /></td></tr>
<tr class="separator:ac881d08d38d5332ddababbef597e67a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dc235d99dfaac00446b613f409de2ab"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a></td></tr>
<tr class="memdesc:a0dc235d99dfaac00446b613f409de2ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Node this thread belongs to.  <a href="#a0dc235d99dfaac00446b613f409de2ab">More...</a><br /></td></tr>
<tr class="separator:a0dc235d99dfaac00446b613f409de2ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8414c95aafa7c1780772651ff1e35b1"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__THREAD.html#gad998a8a9811ac9f9bd7c88bea3ce1d9b">ThreadGlobalOrdinal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af8414c95aafa7c1780772651ff1e35b1">global_ordinal_</a></td></tr>
<tr class="memdesc:af8414c95aafa7c1780772651ff1e35b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">globally and contiguously numbered ID of thread  <a href="#af8414c95aafa7c1780772651ff1e35b1">More...</a><br /></td></tr>
<tr class="separator:af8414c95aafa7c1780772651ff1e35b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684b8acdccad684b32c4ea97be009f8e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a684b8acdccad684b32c4ea97be009f8e">simple_mcs_rw_</a></td></tr>
<tr class="memdesc:a684b8acdccad684b32c4ea97be009f8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">shortcut for engine_-&gt;get_options().xct_.mcs_implementation_type_ == simple  <a href="#a684b8acdccad684b32c4ea97be009f8e">More...</a><br /></td></tr>
<tr class="separator:a684b8acdccad684b32c4ea97be009f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef6a79e56890341d855cfca877bf934"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">memory::NumaCoreMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a></td></tr>
<tr class="memdesc:a4ef6a79e56890341d855cfca877bf934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private memory repository of this thread.  <a href="#a4ef6a79e56890341d855cfca877bf934">More...</a><br /></td></tr>
<tr class="separator:a4ef6a79e56890341d855cfca877bf934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e93a62b0a6414f6e30c17969af2340"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">memory::NumaNodeMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a></td></tr>
<tr class="memdesc:ab1e93a62b0a6414f6e30c17969af2340"><td class="mdescLeft">&#160;</td><td class="mdescRight">same above  <a href="#ab1e93a62b0a6414f6e30c17969af2340">More...</a><br /></td></tr>
<tr class="separator:ab1e93a62b0a6414f6e30c17969af2340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6236b974981b361bfbc25db38c7f9626"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1cache_1_1CacheHashtable.html">cache::CacheHashtable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a></td></tr>
<tr class="memdesc:a6236b974981b361bfbc25db38c7f9626"><td class="mdescLeft">&#160;</td><td class="mdescRight">same above  <a href="#a6236b974981b361bfbc25db38c7f9626">More...</a><br /></td></tr>
<tr class="separator:a6236b974981b361bfbc25db38c7f9626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c0d1b2cce940cc22285a906b1076bd3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a></td></tr>
<tr class="memdesc:a1c0d1b2cce940cc22285a906b1076bd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">shorthand for node_memory_-&gt;get_snapshot_pool()  <a href="#a1c0d1b2cce940cc22285a906b1076bd3">More...</a><br /></td></tr>
<tr class="separator:a1c0d1b2cce940cc22285a906b1076bd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44232f657701896a24ec4a238d0ab226"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a></td></tr>
<tr class="memdesc:a44232f657701896a24ec4a238d0ab226"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page resolver to convert all page ID to page pointer.  <a href="#a44232f657701896a24ec4a238d0ab226">More...</a><br /></td></tr>
<tr class="separator:a44232f657701896a24ec4a238d0ab226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b56e96991f936feba47c29f61c0fbcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a></td></tr>
<tr class="memdesc:a0b56e96991f936feba47c29f61c0fbcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Page resolver to convert only local page ID to page pointer.  <a href="#a0b56e96991f936feba47c29f61c0fbcb">More...</a><br /></td></tr>
<tr class="separator:a0b56e96991f936feba47c29f61c0fbcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad101b64b189a656c13f92b7fb7bb62d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html">log::ThreadLogBuffer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">log_buffer_</a></td></tr>
<tr class="memdesc:ad101b64b189a656c13f92b7fb7bb62d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-private log buffer.  <a href="#ad101b64b189a656c13f92b7fb7bb62d7">More...</a><br /></td></tr>
<tr class="separator:ad101b64b189a656c13f92b7fb7bb62d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c3db0e7d4015e8eaddbae71c90ab7e"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">raw_thread_</a></td></tr>
<tr class="memdesc:a12c3db0e7d4015e8eaddbae71c90ab7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encapsulates raw thread object.  <a href="#a12c3db0e7d4015e8eaddbae71c90ab7e">More...</a><br /></td></tr>
<tr class="separator:a12c3db0e7d4015e8eaddbae71c90ab7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8236666d8fca6674334d0d166218e5c"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad8236666d8fca6674334d0d166218e5c">raw_thread_set_</a></td></tr>
<tr class="memdesc:ad8236666d8fca6674334d0d166218e5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just to make sure raw_thread_ is set.  <a href="#ad8236666d8fca6674334d0d166218e5c">More...</a><br /></td></tr>
<tr class="separator:ad8236666d8fca6674334d0d166218e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26c718d661316827c8efd219b743e227"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1xct_1_1Xct.html">xct::Xct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a></td></tr>
<tr class="memdesc:a26c718d661316827c8efd219b743e227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current transaction this thread is conveying.  <a href="#a26c718d661316827c8efd219b743e227">More...</a><br /></td></tr>
<tr class="separator:a26c718d661316827c8efd219b743e227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30fc7377de865406c4174bcd7be6b616"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1cache_1_1SnapshotFileSet.html">cache::SnapshotFileSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">snapshot_file_set_</a></td></tr>
<tr class="memdesc:a30fc7377de865406c4174bcd7be6b616"><td class="mdescLeft">&#160;</td><td class="mdescRight">Each threads maintains a private set of snapshot file descriptors.  <a href="#a30fc7377de865406c4174bcd7be6b616">More...</a><br /></td></tr>
<tr class="separator:a30fc7377de865406c4174bcd7be6b616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dafa88a0e8db9faa2deffb4d893b69f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1thread_1_1ThreadControlBlock.html">ThreadControlBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a></td></tr>
<tr class="separator:a1dafa88a0e8db9faa2deffb4d893b69f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b5ec40798ea07cf3dbb4def4c6ad142"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">task_input_memory_</a></td></tr>
<tr class="separator:a8b5ec40798ea07cf3dbb4def4c6ad142"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2dced4e9409f69e3d5327c653807362"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">task_output_memory_</a></td></tr>
<tr class="separator:aa2dced4e9409f69e3d5327c653807362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7964fa7de54357a65cab8f05c1de4696"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsWwBlock.html">xct::McsWwBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">mcs_ww_blocks_</a></td></tr>
<tr class="memdesc:a7964fa7de54357a65cab8f05c1de4696"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pre-allocated MCS blocks.  <a href="#a7964fa7de54357a65cab8f05c1de4696">More...</a><br /></td></tr>
<tr class="separator:a7964fa7de54357a65cab8f05c1de4696"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dd7f177602e25a5cd1318723825c861"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html">xct::McsRwSimpleBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">mcs_rw_simple_blocks_</a></td></tr>
<tr class="separator:a1dd7f177602e25a5cd1318723825c861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8e120dfd26566418bbb9057f8c5b20"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html">xct::McsRwExtendedBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">mcs_rw_extended_blocks_</a></td></tr>
<tr class="separator:a0f8e120dfd26566418bbb9057f8c5b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a052ae65bb017f9f77741db58bcbcf936"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html">xct::McsRwAsyncMapping</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a></td></tr>
<tr class="separator:a052ae65bb017f9f77741db58bcbcf936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4943b0d8d6fc1321a8517acaf7fd3322"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4943b0d8d6fc1321a8517acaf7fd3322">canonical_address_</a></td></tr>
<tr class="separator:a4943b0d8d6fc1321a8517acaf7fd3322"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a3fdb522ecb7718fc250a2aa80e144361"><td class="memTemplParams" colspan="2">template&lt;typename RW_BLOCK &gt; </td></tr>
<tr class="memitem:a3fdb522ecb7718fc250a2aa80e144361"><td class="memTemplItemLeft" align="right" valign="top">class&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3fdb522ecb7718fc250a2aa80e144361">ThreadPimplMcsAdaptor</a></td></tr>
<tr class="separator:a3fdb522ecb7718fc250a2aa80e144361"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a92f7bb785b2f0acc72deaab9f186453c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ThreadPimpl::ThreadPimpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ace37a6e62cdde3cef1009c59b4dd44c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ThreadPimpl::ThreadPimpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">Thread</a> *&#160;</td>
          <td class="paramname"><em>holder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#gad998a8a9811ac9f9bd7c88bea3ce1d9b">ThreadGlobalOrdinal</a>&#160;</td>
          <td class="paramname"><em>global_ordinal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00055">55</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  : <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>(engine),</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a>(holder),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a>(<span class="keywordtype">id</span>),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a>(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">decompose_numa_node</a>(<span class="keywordtype">id</span>)),</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af8414c95aafa7c1780772651ff1e35b1">global_ordinal_</a>(global_ordinal),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">log_buffer_</a>(engine, <span class="keywordtype">id</span>),</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>(engine, holder, <span class="keywordtype">id</span>),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">snapshot_file_set_</a>(engine),</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">task_input_memory_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">task_output_memory_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">mcs_ww_blocks_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">mcs_rw_simple_blocks_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">mcs_rw_extended_blocks_</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4943b0d8d6fc1321a8517acaf7fd3322">canonical_address_</a>(<span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a8b5ec40798ea07cf3dbb4def4c6ad142"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">foedus::thread::ThreadPimpl::task_input_memory_</a></div><div class="ttdeci">void * task_input_memory_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00383">thread_pimpl.hpp:383</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a30fc7377de865406c4174bcd7be6b616"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">foedus::thread::ThreadPimpl::snapshot_file_set_</a></div><div class="ttdeci">cache::SnapshotFileSet snapshot_file_set_</div><div class="ttdoc">Each threads maintains a private set of snapshot file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00380">thread_pimpl.hpp:380</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1e93a62b0a6414f6e30c17969af2340"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">foedus::thread::ThreadPimpl::node_memory_</a></div><div class="ttdeci">memory::NumaNodeMemory * node_memory_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00347">thread_pimpl.hpp:347</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_af8414c95aafa7c1780772651ff1e35b1"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#af8414c95aafa7c1780772651ff1e35b1">foedus::thread::ThreadPimpl::global_ordinal_</a></div><div class="ttdeci">const ThreadGlobalOrdinal global_ordinal_</div><div class="ttdoc">globally and contiguously numbered ID of thread </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00336">thread_pimpl.hpp:336</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1c0d1b2cce940cc22285a906b1076bd3"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">foedus::thread::ThreadPimpl::snapshot_page_pool_</a></div><div class="ttdeci">memory::PagePool * snapshot_page_pool_</div><div class="ttdoc">shorthand for node_memory_->get_snapshot_pool() </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00351">thread_pimpl.hpp:351</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a7964fa7de54357a65cab8f05c1de4696"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">foedus::thread::ThreadPimpl::mcs_ww_blocks_</a></div><div class="ttdeci">xct::McsWwBlock * mcs_ww_blocks_</div><div class="ttdoc">Pre-allocated MCS blocks. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00387">thread_pimpl.hpp:387</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0dc235d99dfaac00446b613f409de2ab"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">foedus::thread::ThreadPimpl::numa_node_</a></div><div class="ttdeci">const ThreadGroupId numa_node_</div><div class="ttdoc">Node this thread belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00333">thread_pimpl.hpp:333</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa7cc8b97ee07c0a860f0c5a3247d6ace"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">foedus::thread::ThreadPimpl::holder_</a></div><div class="ttdeci">Thread *const holder_</div><div class="ttdoc">The public object that holds this pimpl object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00325">thread_pimpl.hpp:325</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ad101b64b189a656c13f92b7fb7bb62d7"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">foedus::thread::ThreadPimpl::log_buffer_</a></div><div class="ttdeci">log::ThreadLogBuffer log_buffer_</div><div class="ttdoc">Thread-private log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00361">thread_pimpl.hpp:361</a></div></div>
<div class="ttc" id="group__THREAD_html_ga1622c6d8c64ca80f51c1bef5190ec4fa"><div class="ttname"><a href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">foedus::thread::decompose_numa_node</a></div><div class="ttdeci">ThreadGroupId decompose_numa_node(ThreadId global_id)</div><div class="ttdoc">Extracts NUMA node ID from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00131">thread_id.hpp:131</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4943b0d8d6fc1321a8517acaf7fd3322"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4943b0d8d6fc1321a8517acaf7fd3322">foedus::thread::ThreadPimpl::canonical_address_</a></div><div class="ttdeci">xct::RwLockableXctId * canonical_address_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00392">thread_pimpl.hpp:392</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dd7f177602e25a5cd1318723825c861"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">foedus::thread::ThreadPimpl::mcs_rw_simple_blocks_</a></div><div class="ttdeci">xct::McsRwSimpleBlock * mcs_rw_simple_blocks_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00388">thread_pimpl.hpp:388</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0f8e120dfd26566418bbb9057f8c5b20"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">foedus::thread::ThreadPimpl::mcs_rw_extended_blocks_</a></div><div class="ttdeci">xct::McsRwExtendedBlock * mcs_rw_extended_blocks_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00389">thread_pimpl.hpp:389</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa2dced4e9409f69e3d5327c653807362"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">foedus::thread::ThreadPimpl::task_output_memory_</a></div><div class="ttdeci">void * task_output_memory_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00384">thread_pimpl.hpp:384</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a6236b974981b361bfbc25db38c7f9626"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">foedus::thread::ThreadPimpl::snapshot_cache_hashtable_</a></div><div class="ttdeci">cache::CacheHashtable * snapshot_cache_hashtable_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00349">thread_pimpl.hpp:349</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a6ff575610172c3b1ed337665a277f761"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a> foedus::thread::ThreadPimpl::cll_get_max_locked_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00930">930</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00413">foedus::xct::Xct::get_current_lock_list()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00385">foedus::xct::CurrentLockList::get_max_locked_id()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00980">run_nested_sysxct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                                                            {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="keyword">const</span> xct::CurrentLockList* cll = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a>();</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="keywordflow">return</span> cll-&gt;<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3">get_max_locked_id</a>();</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc0b909c82e905105f4f9701082a16b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">foedus::xct::Xct::get_current_lock_list</a></div><div class="ttdeci">xct::CurrentLockList * get_current_lock_list()</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00413">xct.hpp:413</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a398ec264786992d102b8edd74d5767b3"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3">foedus::xct::CurrentLockList::get_max_locked_id</a></div><div class="ttdeci">UniversalLockId get_max_locked_id() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00385">retrospective_lock_list.hpp:385</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="250,5,389,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3" title="foedus::xct::CurrentLock\lList::get_max_locked_id" alt="" coords="237,71,401,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="449,71,613,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="661,71,825,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a6ff575610172c3b1ed337665a277f761_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="237,899,421,940"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="469,899,620,940"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1155,1242,1328,1298"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="672,551,845,607"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="905,319,1078,375"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="899,818,1083,874"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="672,385,845,441"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="672,891,845,947"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1427,1283,1605,1339"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="668,1373,849,1429"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1425,1683,1607,1739"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1429,1194,1603,1250"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a70b1c5e023fa0aac150e7b607e37727c" title="Deliberately causes splits under the volatile root of first layer, or &quot;fatify&quot; it. " alt="" coords="1683,1194,1856,1250"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1155,151,1328,207"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="902,551,1081,607"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1409,451,1623,492"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1417,613,1615,655"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1429,231,1603,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1429,151,1603,207"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1397,5,1635,47"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1401,336,1631,377"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1423,71,1609,127"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1155,551,1328,607"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1155,631,1328,687"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1155,231,1328,287"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1147,311,1336,367"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1144,391,1339,447"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1148,471,1335,527"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1147,711,1336,767"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1135,85,1347,127"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1133,20,1349,61"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1155,871,1328,927"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1155,791,1328,847"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="905,1125,1078,1196"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="905,899,1078,940"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="897,965,1085,1021"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="905,1045,1078,1101"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a3ca58d4acdbc13f9cfd341d95f45caa2" title="foedus::storage::masstree\l::MasstreeCursor::open\l_normalized" alt="" coords="1155,951,1328,1007"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="1150,1031,1333,1087"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1155,1111,1328,1167"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1696,1283,1843,1339"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="901,1373,1082,1429"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1151,1453,1332,1509"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1151,1373,1332,1429"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1425,1523,1607,1579"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1434,1603,1598,1659"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1434,1363,1598,1419"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1415,1443,1617,1499"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1695,1683,1844,1739"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4197d522317d6177fd0d9a0ee811cdf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::cll_giveup_all_locks_after </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00887">887</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00413">foedus::xct::Xct::get_current_lock_list()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00826">foedus::xct::CurrentLockList::giveup_all_after()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00847">foedus::thread::Thread::cll_giveup_all_locks_after()</a>.</p>
<div class="fragment"><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                                                       {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  xct::CurrentLockList* cll = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a>();</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwSimpleBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    cll-&gt;giveup_all_after(address, &amp;impl);</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwExtendedBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    cll-&gt;giveup_all_after(address, &amp;impl);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc0b909c82e905105f4f9701082a16b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">foedus::xct::Xct::get_current_lock_list</a></div><div class="ttdeci">xct::CurrentLockList * get_current_lock_list()</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00413">xct.hpp:413</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="260,71,399,113"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="247,137,411,178"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,202,421,243"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="469,71,633,113"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="469,137,633,178"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="469,202,633,243"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="681,71,845,113"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="893,26,1089,67"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="911,117,1072,158"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1137,13,1349,54"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1406,5,1582,61"/>
<area shape="rect" id="node10" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1161,79,1326,105"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="1169,130,1318,171"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1162,195,1325,237"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1397,162,1591,203"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1413,227,1575,269"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a4197d522317d6177fd0d9a0ee811cdf5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="237,359,413,400"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="469,311,620,367"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="461,391,628,447"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="676,399,811,440"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="893,5,1028,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="878,71,1043,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="878,151,1043,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="878,231,1043,287"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="878,311,1043,367"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="859,391,1063,447"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="878,471,1043,527"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="878,551,1043,607"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="878,631,1043,687"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="872,711,1049,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="872,1111,1049,1167"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1115,79,1290,120"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1115,151,1290,207"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1115,231,1290,287"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1115,311,1290,367"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1117,391,1288,447"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1115,471,1290,527"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1115,551,1290,607"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1115,631,1290,687"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1112,711,1293,767"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1360,631,1541,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1360,711,1541,767"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1635,631,1816,687"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1364,951,1537,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1113,1111,1292,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1116,1425,1289,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1111,1563,1295,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1618,799,1833,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1626,864,1825,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1639,1157,1812,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1639,930,1812,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1607,1011,1844,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1610,1257,1841,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1632,1077,1819,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1364,791,1537,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1364,871,1537,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1364,1031,1537,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1356,1111,1545,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1353,1191,1548,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1357,1271,1544,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1356,1351,1545,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1345,1432,1557,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1343,1497,1559,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1364,1563,1537,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1364,1643,1537,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6367855f3aa3549b2d7b74adf383c87a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::cll_release_all_locks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00919">919</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00413">foedus::xct::Xct::get_current_lock_list()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00473">foedus::xct::CurrentLockList::release_all_locks()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00841">foedus::thread::Thread::cll_release_all_locks()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00938">foedus::thread::ThreadPimplCllReleaseAllFunctor::operator()()</a>.</p>
<div class="fragment"><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                        {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  xct::CurrentLockList* cll = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a>();</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwSimpleBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="keywordflow">return</span> cll-&gt;release_all_locks(&amp;impl);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwExtendedBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> cll-&gt;release_all_locks(&amp;impl);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc0b909c82e905105f4f9701082a16b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">foedus::xct::Xct::get_current_lock_list</a></div><div class="ttdeci">xct::CurrentLockList * get_current_lock_list()</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00413">xct.hpp:413</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="260,104,399,145"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,169,421,211"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a069941b140019c23d86092e68cd9b331" title="foedus::xct::CurrentLock\lList::release_all_locks" alt="" coords="247,235,411,276"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="469,235,633,276"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="681,147,845,188"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="1105,205,1301,247"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="681,264,845,305"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="681,329,845,371"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="893,147,1057,188"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="1123,111,1284,152"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1349,220,1561,261"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1618,213,1794,269"/>
<area shape="rect" id="node12" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1373,103,1538,130"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="1381,155,1530,196"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1374,37,1537,79"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1609,71,1803,112"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1625,5,1787,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a6367855f3aa3549b2d7b74adf383c87a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="265,35,416,76"/>
<area shape="rect" id="node8" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="237,100,444,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="492,35,732,76"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1023,5,1217,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="780,64,975,105"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1265,5,1428,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="1039,71,1201,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1783a8b90bfcd0fa87c4947fc406b0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::cll_release_all_locks_after </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>RW-locks. </p>
<p>These switch implementations. we could shorten it if we assume C++14 (lambda with auto), but not much. Doesn't matter. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00876">876</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00413">foedus::xct::Xct::get_current_lock_list()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00753">foedus::xct::CurrentLockList::release_all_after()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00844">foedus::thread::Thread::cll_release_all_locks_after()</a>.</p>
<div class="fragment"><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                                                                        {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  xct::CurrentLockList* cll = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a>();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwSimpleBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    cll-&gt;release_all_after(address, &amp;impl);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwExtendedBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    cll-&gt;release_all_after(address, &amp;impl);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc0b909c82e905105f4f9701082a16b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">foedus::xct::Xct::get_current_lock_list</a></div><div class="ttdeci">xct::CurrentLockList * get_current_lock_list()</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00413">xct.hpp:413</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="260,104,399,145"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,169,421,211"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#ace2e6a593d7b975f1756ce9eec0fd1f2" title="Release all locks in CLL whose addresses are canonically ordered before the parameter. " alt="" coords="247,235,411,276"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="469,147,633,188"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="893,205,1089,247"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="469,264,633,305"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="469,329,633,371"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="681,147,845,188"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="911,111,1072,152"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1137,220,1349,261"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1406,213,1582,269"/>
<area shape="rect" id="node11" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1161,103,1326,130"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="1169,155,1318,196"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1162,37,1325,79"/>
<area shape="rect" id="node14" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1397,71,1591,112"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1413,5,1575,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_af1783a8b90bfcd0fa87c4947fc406b0b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="237,50,420,91"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="490,5,641,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="468,86,663,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="711,86,905,127"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="953,86,1148,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1196,86,1359,127"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae594169d3ecc7b0d4d356d1ed6dfa8b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::cll_try_or_acquire_multiple_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">xct::LockListPosition</a>&#160;</td>
          <td class="paramname"><em>upto_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00909">909</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00413">foedus::xct::Xct::get_current_lock_list()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00636">foedus::xct::CurrentLockList::try_or_acquire_multiple_locks()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00853">foedus::thread::Thread::cll_try_or_acquire_multiple_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  xct::CurrentLockList* cll = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a>();</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwSimpleBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordflow">return</span> cll-&gt;try_or_acquire_multiple_locks(upto_pos, &amp;impl);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwExtendedBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">return</span> cll-&gt;try_or_acquire_multiple_locks(upto_pos, &amp;impl);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc0b909c82e905105f4f9701082a16b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">foedus::xct::Xct::get_current_lock_list</a></div><div class="ttdeci">xct::CurrentLockList * get_current_lock_list()</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00413">xct.hpp:413</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="318,35,457,76"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="295,100,479,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="276,165,499,207"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="547,165,752,207"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="816,5,980,47"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="821,71,975,112"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="807,136,989,177"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1304,217,1480,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="800,253,996,295"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167" title="foedus::xct::LockEntry\l::is_locked" alt="" coords="821,319,975,360"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="1068,5,1232,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1044,253,1256,295"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ae594169d3ecc7b0d4d356d1ed6dfa8b2_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="276,399,499,440"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="547,391,713,447"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="761,399,896,440"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="979,5,1113,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="963,71,1129,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="963,151,1129,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="963,231,1129,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="963,311,1129,367"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="944,391,1148,447"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="963,471,1129,527"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="963,551,1129,607"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="963,631,1129,687"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="957,711,1135,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="957,1111,1135,1167"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1201,79,1375,120"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1201,151,1375,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1201,231,1375,287"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1201,311,1375,367"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1203,391,1373,447"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1201,471,1375,527"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1201,551,1375,607"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1201,631,1375,687"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1197,711,1379,767"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1445,631,1627,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1445,711,1627,767"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1720,591,1901,647"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1729,671,1893,727"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1449,951,1623,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1199,1111,1377,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1201,1425,1375,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1196,1563,1380,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1703,799,1918,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1711,864,1910,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1724,1157,1897,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1724,930,1897,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1692,1011,1929,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1695,1257,1926,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1717,1077,1904,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1449,791,1623,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1449,871,1623,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1449,1031,1623,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1441,1111,1631,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1439,1191,1633,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1443,1271,1629,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1441,1351,1631,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1430,1432,1642,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1428,1497,1644,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1449,1563,1623,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1449,1643,1623,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afd87e3c9d855306d2c8115571eb79fa6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::cll_try_or_acquire_single_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">xct::LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00898">898</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00413">foedus::xct::Xct::get_current_lock_list()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00569">foedus::xct::CurrentLockList::try_or_acquire_single_lock()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00850">foedus::thread::Thread::cll_try_or_acquire_single_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                                                                             {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  xct::CurrentLockList* cll = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a>();</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwSimpleBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">return</span> cll-&gt;try_or_acquire_single_lock(pos, &amp;impl);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keyword">auto</span> impl(get_mcs_impl&lt;xct::McsRwExtendedBlock&gt;(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="keywordflow">return</span> cll-&gt;try_or_acquire_single_lock(pos, &amp;impl);</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_afc0b909c82e905105f4f9701082a16b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">foedus::xct::Xct::get_current_lock_list</a></div><div class="ttdeci">xct::CurrentLockList * get_current_lock_list()</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00413">xct.hpp:413</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="291,35,429,76"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="268,100,452,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="257,165,463,207"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="527,5,691,47"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="532,71,685,112"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="517,136,700,177"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1015,217,1191,273"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="511,253,707,295"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167" title="foedus::xct::LockEntry\l::is_locked" alt="" coords="532,319,685,360"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="779,5,943,47"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="755,253,967,295"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_afd87e3c9d855306d2c8115571eb79fa6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="257,823,461,864"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="523,735,690,791"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="509,901,704,943"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="782,439,917,480"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1029,5,1164,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="1014,71,1179,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="1014,151,1179,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="1014,231,1179,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="1014,311,1179,367"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="995,391,1199,447"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1014,471,1179,527"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1014,551,1179,607"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="1014,631,1179,687"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="1008,711,1185,767"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="1008,999,1185,1055"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1251,79,1426,120"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1251,151,1426,207"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1251,231,1426,287"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1251,311,1426,367"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1253,391,1424,447"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1251,471,1426,527"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1251,551,1426,607"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1251,631,1426,687"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1248,711,1429,767"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1496,543,1677,599"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1496,623,1677,679"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1500,863,1673,919"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1249,999,1428,1055"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1252,1079,1425,1135"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1247,1159,1431,1215"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1754,711,1969,752"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1762,776,1961,817"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1775,1069,1948,1125"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1775,842,1948,898"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1743,923,1980,964"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1746,1169,1977,1211"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1768,989,1955,1045"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1500,703,1673,759"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1500,783,1673,839"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1500,943,1673,999"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1492,1023,1681,1079"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1489,1103,1684,1159"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1493,1183,1680,1239"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1492,1263,1681,1319"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1481,1344,1693,1385"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1479,1409,1695,1451"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="752,1073,947,1115"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="999,1160,1194,1201"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1257,1240,1420,1281"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a674a8a8e613dc4e19a626da490c883fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::collect_retired_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Keeps the specified volatile page as retired as of the current epoch. </p>
<p>Retired page handling methods.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ptr</td><td>the volatile page that has been retired </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>in the page ptr points to, is_retired()==true.</dd></dl>
<p>This thread buffers such pages and returns to volatile page pool when it is safe to do so.</p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00777">777</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00789">flush_retired_volatile_page()</a>, <a class="el" href="page__pool_8hpp_source.html#l00132">foedus::memory::PagePoolOffsetAndEpochChunk::full()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00060">foedus::xct::XctManager::get_current_global_epoch_weak()</a>, <a class="el" href="storage__id_8hpp_source.html#l00201">foedus::storage::VolatilePagePointer::get_numa_node()</a>, <a class="el" href="storage__id_8hpp_source.html#l00202">foedus::storage::VolatilePagePointer::get_offset()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00253">foedus::memory::NumaCoreMemory::get_retired_volatile_pool_chunk()</a>, <a class="el" href="engine_8cpp_source.html#l00061">foedus::Engine::get_xct_manager()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00818">is_volatile_page_retired()</a>, <a class="el" href="epoch_8hpp_source.html#l00127">foedus::Epoch::one_more()</a>, and <a class="el" href="page__pool_8hpp_source.html#l00140">foedus::memory::PagePoolOffsetAndEpochChunk::push_back()</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00113">foedus::thread::Thread::collect_retired_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                                                              {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28d4f2f16808e20d2d174f12ff1c7317">is_volatile_page_retired</a>(ptr));</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  uint16_t node = ptr.get_numa_node();</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  Epoch current_epoch = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0">get_current_global_epoch_weak</a>();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  Epoch safe_epoch = current_epoch.<a class="code" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3">one_more</a>().<a class="code" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3">one_more</a>();</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  memory::PagePoolOffsetAndEpochChunk* chunk = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5">get_retired_volatile_pool_chunk</a>(node);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordflow">if</span> (chunk-&gt;full()) {</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb">flush_retired_volatile_page</a>(node, current_epoch, chunk);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  chunk-&gt;push_back(ptr.get_offset(), safe_epoch);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a4578dd6dab7925b95d7810335ae5cec0"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0">foedus::xct::XctManager::get_current_global_epoch_weak</a></div><div class="ttdeci">Epoch get_current_global_epoch_weak() const </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00060">xct_manager_pimpl.cpp:60</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a28d4f2f16808e20d2d174f12ff1c7317"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28d4f2f16808e20d2d174f12ff1c7317">foedus::thread::ThreadPimpl::is_volatile_page_retired</a></div><div class="ttdeci">bool is_volatile_page_retired(storage::VolatilePagePointer ptr)</div><div class="ttdoc">Subroutine of collect_retired_volatile_page() just for assertion. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00818">thread_pimpl.cpp:818</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a694a2aaa7515ab45a8c9fa12b709defb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb">foedus::thread::ThreadPimpl::flush_retired_volatile_page</a></div><div class="ttdeci">void flush_retired_volatile_page(uint16_t node, Epoch current_epoch, memory::PagePoolOffsetAndEpochChunk *chunk)</div><div class="ttdoc">Subroutine of collect_retired_volatile_page() in case the chunk becomes full. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00789">thread_pimpl.cpp:789</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_a786afd92afdc87b54dfa11ef093f06f3"><div class="ttname"><a href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3">foedus::Epoch::one_more</a></div><div class="ttdeci">Epoch one_more() const </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00127">epoch.hpp:127</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad0624fe34e52c0904ee449c97f0325c5"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5">foedus::memory::NumaCoreMemory::get_retired_volatile_pool_chunk</a></div><div class="ttdeci">PagePoolOffsetAndEpochChunk * get_retired_volatile_pool_chunk(uint16_t node)</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00253">numa_core_memory.cpp:253</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a48d5e1f7ce2f70161c253f650c75ed95"><div class="ttname"><a href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">foedus::Engine::get_xct_manager</a></div><div class="ttdeci">xct::XctManager * get_xct_manager() const </div><div class="ttdoc">See Transaction Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00061">engine.cpp:61</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb" title="Subroutine of collect_retired_volatile_page() in case the chunk becomes full. " alt="" coords="265,589,449,630"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95" title="See Transaction Manager. " alt="" coords="557,778,692,819"/>
<area shape="rect" id="node11" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3" title="foedus::Epoch::one_more" alt="" coords="1050,87,1221,113"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#acac2755ecb22d4539c3d6bb44538240d" title="foedus::memory::PagePool\lOffsetAndEpochChunk::full" alt="" coords="535,843,714,885"/>
<area shape="rect" id="node27" href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0" title="foedus::xct::XctManager\l::get_current_global_epoch_weak" alt="" coords="250,865,465,906"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="261,930,454,971"/>
<area shape="rect" id="node30" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1055,989,1216,1030"/>
<area shape="rect" id="node31" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5" title="foedus::memory::NumaCore\lMemory::get_retired_volatile\l_pool_chunk" alt="" coords="265,1220,449,1276"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28d4f2f16808e20d2d174f12ff1c7317" title="Subroutine of collect_retired_volatile_page() just for assertion. " alt="" coords="265,1154,449,1195"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#aae530fb2917cf0f6329ac323f1da7c8c" title="foedus::memory::PagePool\lOffsetAndEpochChunk::push_back" alt="" coords="245,166,469,207"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#ad99e5b875980b442bf5de61fb022f0ac" title="foedus::memory::PagePool\lOffsetAndEpochChunk::size" alt="" coords="532,647,717,689"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#a7d9aa924c48bd26b4dd208d4a9333127" title="Returns the number of offsets (always from index&#45;0) whose safe_epoch_ is strictly&#45;before the given ep..." alt="" coords="535,253,714,309"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="521,334,728,375"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a" title="Returns the current global epoch, the epoch a newly started transaction will be in. " alt="" coords="794,571,973,613"/>
<area shape="rect" id="node21" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="557,713,692,754"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="519,399,730,441"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="529,530,720,571"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="535,465,714,506"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#a73cff039ec719c68895a8f9826bcd429" title="foedus::memory::PagePool\lOffsetAndEpochChunk::is\l_sorted" alt="" coords="794,304,973,360"/>
<area shape="rect" id="node6" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="1310,253,1453,280"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="780,385,987,426"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a787bb892079cb32d5a2065188825a522" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch" alt="" coords="1038,565,1233,606"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a03678427b184e7ce71f9bbb164dd0bad" title="foedus::xct::XctManagerPimpl\l::set_requested_global_epoch" alt="" coords="1038,305,1233,346"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#afce787897428bd372c67224acd3e8ea7" title="foedus::xct::XctManagerPimpl\l::wakeup_epoch_chime_thread" alt="" coords="1035,435,1236,477"/>
<area shape="rect" id="node18" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1293,498,1470,539"/>
<area shape="rect" id="node19" href="classfoedus_1_1soc_1_1SharedPolling.html#a9fc7bfaf57e1f2224be9869a8e9708d3" title="Unconditionally wait for signal. " alt="" coords="1047,370,1224,411"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a6071efec3ffc3876192101db2a1873b4" title="foedus::xct::XctManagerPimpl\l::get_requested_global_epoch" alt="" coords="1284,305,1479,346"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="1293,433,1470,474"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1535,495,1709,537"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1527,440,1717,467"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="794,465,973,506"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#acd49fd67f3459df687ed08d5d8b54082" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch_weak" alt="" coords="517,909,732,950"/>
<area shape="rect" id="node33" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="523,1154,726,1195"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1061,1186,1210,1227"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca" title="foedus::storage::PageVersion\l::is_retired" alt="" coords="529,1362,721,1403"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="806,1047,961,1089"/>
<area shape="rect" id="node38" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="797,1245,970,1286"/>
<area shape="rect" id="node39" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="782,1113,985,1169"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1058,1119,1213,1161"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1040,1054,1231,1095"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ab07c3c3d030fab04f79b59dee83ecd2e" title="foedus::storage::PageVersion\lStatus::is_retired" alt="" coords="787,1362,979,1403"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="535,137,714,178"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="535,71,714,113"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a674a8a8e613dc4e19a626da490c883fc_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="245,136,437,177"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a31564163126364e4810f2f00398afd15" title="foedus::storage::masstree\l::Adopt::adopt_case_a" alt="" coords="485,71,659,112"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="485,5,659,47"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a554f6fb34b45687df09df15076aac190" title="foedus::storage::masstree\l::grow_case_a_common" alt="" coords="485,201,659,243"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="485,136,659,177"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#a96de88f03cf5683529e00d2c209a07e9" title="The core implementation after locking relevant pages and acquiring free page resource. " alt="" coords="485,267,659,323"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="717,39,891,80"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="717,136,891,177"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="707,201,901,243"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="717,275,891,316"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a16c6375f66e9f177c908dc1fbc132681"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::find_or_read_a_snapshot_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the given page in snapshot cache, reading it if not found. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00647">647</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8hpp_source.html#l00397">foedus::xct::Xct::acquire_local_work_memory()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="engine__options_8hpp_source.html#l00136">foedus::EngineOptions::cache_</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="cache__hashtable_8hpp_source.html#l00415">foedus::cache::CacheHashtable::find()</a>, <a class="el" href="page__pool_8cpp_source.html#l00119">foedus::memory::PagePool::get_base()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="cache__hashtable_8cpp_source.html#l00114">foedus::cache::CacheHashtable::install()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00741">on_snapshot_cache_miss()</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00512">read_a_snapshot_page()</a>, <a class="el" href="cache__options_8hpp_source.html#l00050">foedus::cache::CacheOptions::snapshot_cache_enabled_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00349">snapshot_cache_hashtable_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00351">snapshot_page_pool_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00145">foedus::thread::ThreadControlBlock::stat_snapshot_cache_hits_</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00146">foedus::thread::ThreadControlBlock::stat_snapshot_cache_misses_</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00095">foedus::thread::Thread::find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00292">install_a_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                     {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>) {</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">snapshot_cache_enabled_</a>);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>-&gt;<a class="code" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74">find</a>(page_id);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="comment">// the &quot;find&quot; is very efficient and wait-free, but instead it might have false positive/nagative</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// in which case we should just install a new page. No worry about duplicate thanks to the</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="comment">// immutability of snapshot pages. it just wastes a bit of CPU and memory.</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">if</span> (offset == 0 || <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">get_base</a>()[offset].<a class="code" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">get_header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a> != page_id) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <span class="keywordflow">if</span> (offset != 0) {</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        DVLOG(0) &lt;&lt; <span class="stringliteral">&quot;Interesting, this race is rare, but possible. offset=&quot;</span> &lt;&lt; offset;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963">on_snapshot_cache_miss</a>(page_id, &amp;offset));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset != 0);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>-&gt;<a class="code" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a">install</a>(page_id, offset));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      ++<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ada5ae07c10b92acbab636eb0d221557b">stat_snapshot_cache_misses_</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      ++<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aea90422952de0f11fcb10568cc6ada62">stat_snapshot_cache_hits_</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset != 0);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    *out = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">get_base</a>() + offset;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">snapshot_cache_enabled_</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">// Snapshot is disabled. So far this happens only in performance experiments.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="comment">// We use local work memory in this case.</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8">acquire_local_work_memory</a>(</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>,</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      reinterpret_cast&lt;void**&gt;(out),</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>));</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">read_a_snapshot_page</a>(page_id, *out);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  }</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_aea90422952de0f11fcb10568cc6ada62"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aea90422952de0f11fcb10568cc6ada62">foedus::thread::ThreadControlBlock::stat_snapshot_cache_hits_</a></div><div class="ttdeci">uint64_t stat_snapshot_cache_hits_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00145">thread_pimpl.hpp:145</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheHashtable_html_af7762689517cd7a18dd64d8591a3272a"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a">foedus::cache::CacheHashtable::install</a></div><div class="ttdeci">ErrorCode install(storage::SnapshotPagePointer page_id, ContentId content)</div><div class="ttdoc">Called when a cached page is not found. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8cpp_source.html#l00114">cache_hashtable.cpp:114</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a3d583a33e85e1a33568fa04b409ae2ca"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">foedus::thread::ThreadPimpl::read_a_snapshot_page</a></div><div class="ttdeci">ErrorCode read_a_snapshot_page(storage::SnapshotPagePointer page_id, storage::Page *buffer) __attribute__((always_inline))</div><div class="ttdoc">Read a snapshot page using the thread-local file descriptor set. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00512">thread_pimpl.hpp:512</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1c0d1b2cce940cc22285a906b1076bd3"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">foedus::thread::ThreadPimpl::snapshot_page_pool_</a></div><div class="ttdeci">memory::PagePool * snapshot_page_pool_</div><div class="ttdoc">shorthand for node_memory_->get_snapshot_pool() </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00351">thread_pimpl.hpp:351</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html_a896cdc7cbe05ed0d5f77b863228a7c3a"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">foedus::cache::CacheOptions::snapshot_cache_enabled_</a></div><div class="ttdeci">bool snapshot_cache_enabled_</div><div class="ttdoc">Whether to cache the read accesses on snapshot files. </div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00050">cache_options.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_af9db36a92eb5116e01545d73cc7e1ab8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">foedus::memory::PagePool::get_base</a></div><div class="ttdeci">storage::Page * get_base() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00119">page_pool.cpp:119</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_ada5ae07c10b92acbab636eb0d221557b"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ada5ae07c10b92acbab636eb0d221557b">foedus::thread::ThreadControlBlock::stat_snapshot_cache_misses_</a></div><div class="ttdeci">uint64_t stat_snapshot_cache_misses_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00146">thread_pimpl.hpp:146</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Page_html_abee44ea141b30e613f3de40831d6ff8e"><div class="ttname"><a href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">foedus::storage::Page::get_header</a></div><div class="ttdeci">PageHeader &amp; get_header()</div><div class="ttdoc">At least the basic header exists in all pages. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00336">page.hpp:336</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a7f299489d8dd719eb055ce2ef29309b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8">foedus::xct::Xct::acquire_local_work_memory</a></div><div class="ttdeci">ErrorCode acquire_local_work_memory(uint32_t size, void **out, uint32_t alignment=8)</div><div class="ttdoc">Get a tentative work memory of the specified size from pre-allocated thread-private memory...</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00397">xct.hpp:397</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a3c43ac83a4cdcc3e48d8b125dfcff963"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963">foedus::thread::ThreadPimpl::on_snapshot_cache_miss</a></div><div class="ttdeci">ErrorCode on_snapshot_cache_miss(storage::SnapshotPagePointer page_id, memory::PagePoolOffset *pool_offset)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00741">thread_pimpl.cpp:741</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a6236b974981b361bfbc25db38c7f9626"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">foedus::thread::ThreadPimpl::snapshot_cache_hashtable_</a></div><div class="ttdeci">cache::CacheHashtable * snapshot_cache_hashtable_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00349">thread_pimpl.hpp:349</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a6e51937e58975e50d0f3eea198b24d3e"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">foedus::EngineOptions::cache_</a></div><div class="ttdeci">cache::CacheOptions cache_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00136">engine_options.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheHashtable_html_ac92d7a0c69e61cfdcacd72b9e8c7bd74"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74">foedus::cache::CacheHashtable::find</a></div><div class="ttdeci">ContentId find(storage::SnapshotPagePointer page_id) const __attribute__((always_inline))</div><div class="ttdoc">Returns an offset for the given page ID opportunistically. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8hpp_source.html#l00415">cache_hashtable.hpp:415</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="285,188,447,229"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="263,617,469,659"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="549,259,728,300"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="291,847,441,888"/>
<area shape="rect" id="node21" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="299,912,433,953"/>
<area shape="rect" id="node22" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="263,781,469,823"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="274,356,458,397"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="547,193,731,235"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="535,847,742,888"/>
<area shape="rect" id="node12" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="544,716,733,757"/>
<area shape="rect" id="node13" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="535,455,742,496"/>
<area shape="rect" id="node14" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="553,781,724,823"/>
<area shape="rect" id="node15" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="544,520,733,561"/>
<area shape="rect" id="node16" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="538,585,739,627"/>
<area shape="rect" id="node17" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="553,651,725,692"/>
<area shape="rect" id="node5" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="816,781,987,823"/>
<area shape="rect" id="node6" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1047,813,1225,855"/>
<area shape="rect" id="node7" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9" title="Returns a hash value for the given snapshot page ID. " alt="" coords="1051,499,1221,540"/>
<area shape="rect" id="node11" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230" title="Calculate remainder. " alt="" coords="1047,748,1225,789"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1277,333,1477,389"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1283,493,1471,549"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="1282,413,1473,469"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="815,651,987,692"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="552,977,725,1019"/>
<area shape="rect" id="node24" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="544,912,733,953"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="526,389,751,431"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="517,324,760,365"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1047,408,1225,449"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="812,448,991,489"/>
<area shape="rect" id="node30" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="808,193,995,235"/>
<area shape="rect" id="node31" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1043,265,1229,307"/>
<area shape="rect" id="node32" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1061,139,1211,180"/>
<area shape="rect" id="node39" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1061,72,1211,113"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="1306,136,1449,177"/>
<area shape="rect" id="node34" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="1302,267,1453,308"/>
<area shape="rect" id="node35" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1307,5,1447,47"/>
<area shape="rect" id="node36" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="1302,201,1453,243"/>
<area shape="rect" id="node37" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="1310,71,1445,112"/>
<area shape="rect" id="node38" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="1525,71,1660,112"/>
<area shape="rect" id="node41" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1047,331,1225,372"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="812,331,991,372"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a16c6375f66e9f177c908dc1fbc132681_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="727,427,936,469"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="495,730,679,771"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="263,846,447,887"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1236,259,1449,301"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="991,347,1170,403"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="990,191,1171,247"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="994,997,1167,1053"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="984,1077,1177,1133"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1516,289,1721,330"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1788,405,1969,461"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1797,485,1961,541"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1797,5,1961,61"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1777,85,1980,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1789,165,1968,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1781,245,1977,301"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1787,325,1970,381"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1252,179,1433,235"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1528,208,1709,264"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1528,128,1709,184"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1249,1198,1437,1269"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1525,1188,1713,1244"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1225,1293,1460,1334"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1517,1293,1720,1334"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="756,622,907,663"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="994,557,1167,613"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="991,797,1170,853"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1256,717,1429,773"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="998,917,1163,973"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="999,477,1163,533"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1792,885,1965,941"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1256,637,1429,693"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1256,557,1429,613"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1249,427,1436,483"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1508,395,1729,451"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1532,557,1705,613"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1529,797,1708,853"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1532,637,1705,693"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1527,717,1711,773"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1250,877,1435,933"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1250,797,1435,853"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1532,878,1705,949"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1532,1105,1705,1146"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1532,973,1705,1029"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1250,1037,1435,1093"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1250,1117,1435,1173"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1255,957,1431,1013"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="752,990,911,1031"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="495,937,679,993"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="756,1056,907,1112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98de2aa47bebca5add3e0550f2c602bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::find_or_read_snapshot_pages_batch </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> *&#160;</td>
          <td class="paramname"><em>page_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Batched version of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. ">find_or_read_a_snapshot_page()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">batch_size</td><td>Batch size. Must be kMaxFindPagesBatch or less. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_ids</td><td>Array of Page IDs to look for, size=batch_size </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>Output</td></tr>
  </table>
  </dd>
</dl>
<p>This might perform much faster because of parallel prefetching, SIMD-ized hash calculattion (planned, not implemented yet) etc. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00687">687</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8hpp_source.html#l00397">foedus::xct::Xct::acquire_local_work_memory()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="engine__options_8hpp_source.html#l00136">foedus::EngineOptions::cache_</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="cache__hashtable_8cpp_source.html#l00376">foedus::cache::CacheHashtable::find_batch()</a>, <a class="el" href="page__pool_8cpp_source.html#l00119">foedus::memory::PagePool::get_base()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="cache__hashtable_8cpp_source.html#l00114">foedus::cache::CacheHashtable::install()</a>, <a class="el" href="error__code_8hpp_source.html#l00106">foedus::kErrorCodeInvalidParameter</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="thread_8hpp_source.html#l00055">foedus::thread::Thread::kMaxFindPagesBatch</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00741">on_snapshot_cache_miss()</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00512">read_a_snapshot_page()</a>, <a class="el" href="cache__options_8hpp_source.html#l00050">foedus::cache::CacheOptions::snapshot_cache_enabled_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00349">snapshot_cache_hashtable_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00351">snapshot_page_pool_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00145">foedus::thread::ThreadControlBlock::stat_snapshot_cache_hits_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00146">foedus::thread::ThreadControlBlock::stat_snapshot_cache_misses_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00100">foedus::thread::Thread::find_or_read_snapshot_pages_batch()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                     {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(batch_size &lt;= <a class="code" href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">Thread::kMaxFindPagesBatch</a>);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (batch_size == 0) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(batch_size &gt; <a class="code" href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">Thread::kMaxFindPagesBatch</a>)) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">kErrorCodeInvalidParameter</a>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">snapshot_cache_enabled_</a>);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offsets[<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">Thread::kMaxFindPagesBatch</a>];</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>-&gt;<a class="code" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131">find_batch</a>(batch_size, page_ids, offsets));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">for</span> (uint16_t b = 0; b &lt; batch_size; ++b) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = offsets[b];</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> page_id = page_ids[b];</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">if</span> (page_id == 0) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        out[b] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b &gt; 0 &amp;&amp; page_ids[b - 1] == page_id) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offsets[b - 1] == offset);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        out[b] = out[b - 1];</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">if</span> (offset == 0 || <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">get_base</a>()[offset].<a class="code" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">get_header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a> != page_id) {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">if</span> (offset != 0) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;          DVLOG(0) &lt;&lt; <span class="stringliteral">&quot;Interesting, this race is rare, but possible. offset=&quot;</span> &lt;&lt; offset;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963">on_snapshot_cache_miss</a>(page_id, &amp;offset));</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset != 0);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a>-&gt;<a class="code" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a">install</a>(page_id, offset));</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        ++<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ada5ae07c10b92acbab636eb0d221557b">stat_snapshot_cache_misses_</a>;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        ++<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aea90422952de0f11fcb10568cc6ada62">stat_snapshot_cache_hits_</a>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset != 0);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      out[b] = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">get_base</a>() + offset;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">snapshot_cache_enabled_</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">for</span> (uint16_t b = 0; b &lt; batch_size; ++b) {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8">acquire_local_work_memory</a>(</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;        reinterpret_cast&lt;void**&gt;(out + b),</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>));</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">read_a_snapshot_page</a>(page_ids[b], out[b]));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  }</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">foedus::kErrorCodeInvalidParameter</a></div><div class="ttdoc">0x0002 : "GENERAL: Invalid parameter given" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00106">error_code.hpp:106</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_aea90422952de0f11fcb10568cc6ada62"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aea90422952de0f11fcb10568cc6ada62">foedus::thread::ThreadControlBlock::stat_snapshot_cache_hits_</a></div><div class="ttdeci">uint64_t stat_snapshot_cache_hits_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00145">thread_pimpl.hpp:145</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheHashtable_html_af7762689517cd7a18dd64d8591a3272a"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a">foedus::cache::CacheHashtable::install</a></div><div class="ttdeci">ErrorCode install(storage::SnapshotPagePointer page_id, ContentId content)</div><div class="ttdoc">Called when a cached page is not found. </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8cpp_source.html#l00114">cache_hashtable.cpp:114</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a3d583a33e85e1a33568fa04b409ae2ca"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">foedus::thread::ThreadPimpl::read_a_snapshot_page</a></div><div class="ttdeci">ErrorCode read_a_snapshot_page(storage::SnapshotPagePointer page_id, storage::Page *buffer) __attribute__((always_inline))</div><div class="ttdoc">Read a snapshot page using the thread-local file descriptor set. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00512">thread_pimpl.hpp:512</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1c0d1b2cce940cc22285a906b1076bd3"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">foedus::thread::ThreadPimpl::snapshot_page_pool_</a></div><div class="ttdeci">memory::PagePool * snapshot_page_pool_</div><div class="ttdoc">shorthand for node_memory_->get_snapshot_pool() </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00351">thread_pimpl.hpp:351</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">foedus::thread::Thread::kMaxFindPagesBatch</a></div><div class="ttdoc">Max size for find_or_read_snapshot_pages_batch() etc. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8hpp_source.html#l00055">thread.hpp:55</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html_a896cdc7cbe05ed0d5f77b863228a7c3a"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">foedus::cache::CacheOptions::snapshot_cache_enabled_</a></div><div class="ttdeci">bool snapshot_cache_enabled_</div><div class="ttdoc">Whether to cache the read accesses on snapshot files. </div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00050">cache_options.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_af9db36a92eb5116e01545d73cc7e1ab8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">foedus::memory::PagePool::get_base</a></div><div class="ttdeci">storage::Page * get_base() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00119">page_pool.cpp:119</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1CacheHashtable_html_a8e48716623ca44e83cc5ef871c10b131"><div class="ttname"><a href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131">foedus::cache::CacheHashtable::find_batch</a></div><div class="ttdeci">ErrorCode find_batch(uint16_t batch_size, const storage::SnapshotPagePointer *page_ids, ContentId *out) const </div><div class="ttdoc">Batched version of find(). </div><div class="ttdef"><b>Definition:</b> <a href="cache__hashtable_8cpp_source.html#l00376">cache_hashtable.cpp:376</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga629d4b8103bfb83ef9c11b842a4fd398"><div class="ttname"><a href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">foedus::storage::SnapshotPagePointer</a></div><div class="ttdeci">uint64_t SnapshotPagePointer</div><div class="ttdoc">Page ID of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00079">storage_id.hpp:79</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_ada5ae07c10b92acbab636eb0d221557b"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ada5ae07c10b92acbab636eb0d221557b">foedus::thread::ThreadControlBlock::stat_snapshot_cache_misses_</a></div><div class="ttdeci">uint64_t stat_snapshot_cache_misses_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00146">thread_pimpl.hpp:146</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Page_html_abee44ea141b30e613f3de40831d6ff8e"><div class="ttname"><a href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">foedus::storage::Page::get_header</a></div><div class="ttdeci">PageHeader &amp; get_header()</div><div class="ttdoc">At least the basic header exists in all pages. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00336">page.hpp:336</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a7f299489d8dd719eb055ce2ef29309b8"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8">foedus::xct::Xct::acquire_local_work_memory</a></div><div class="ttdeci">ErrorCode acquire_local_work_memory(uint32_t size, void **out, uint32_t alignment=8)</div><div class="ttdoc">Get a tentative work memory of the specified size from pre-allocated thread-private memory...</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00397">xct.hpp:397</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a3c43ac83a4cdcc3e48d8b125dfcff963"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963">foedus::thread::ThreadPimpl::on_snapshot_cache_miss</a></div><div class="ttdeci">ErrorCode on_snapshot_cache_miss(storage::SnapshotPagePointer page_id, memory::PagePoolOffset *pool_offset)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00741">thread_pimpl.cpp:741</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a6236b974981b361bfbc25db38c7f9626"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">foedus::thread::ThreadPimpl::snapshot_cache_hashtable_</a></div><div class="ttdeci">cache::CacheHashtable * snapshot_cache_hashtable_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00349">thread_pimpl.hpp:349</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a6e51937e58975e50d0f3eea198b24d3e"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">foedus::EngineOptions::cache_</a></div><div class="ttdeci">cache::CacheOptions cache_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00136">engine_options.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="259,188,422,229"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131" title="Batched version of find(). " alt="" coords="237,617,444,659"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="524,259,703,300"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="266,847,415,888"/>
<area shape="rect" id="node21" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="273,912,408,953"/>
<area shape="rect" id="node22" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="237,781,444,823"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="249,356,433,397"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="521,193,705,235"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="510,847,717,888"/>
<area shape="rect" id="node12" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="519,716,708,757"/>
<area shape="rect" id="node13" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="510,455,717,496"/>
<area shape="rect" id="node14" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="528,781,699,823"/>
<area shape="rect" id="node15" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="519,520,708,561"/>
<area shape="rect" id="node16" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="513,585,714,627"/>
<area shape="rect" id="node17" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="527,651,699,692"/>
<area shape="rect" id="node5" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="791,781,961,823"/>
<area shape="rect" id="node6" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1022,813,1199,855"/>
<area shape="rect" id="node7" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9" title="Returns a hash value for the given snapshot page ID. " alt="" coords="1025,499,1196,540"/>
<area shape="rect" id="node11" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230" title="Calculate remainder. " alt="" coords="1022,748,1199,789"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1252,333,1452,389"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1258,493,1446,549"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="1257,413,1447,469"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="790,651,962,692"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="527,977,700,1019"/>
<area shape="rect" id="node24" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="519,912,708,953"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="501,389,726,431"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="492,324,735,365"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1021,408,1200,449"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="787,448,965,489"/>
<area shape="rect" id="node30" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="783,193,969,235"/>
<area shape="rect" id="node31" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1017,265,1204,307"/>
<area shape="rect" id="node32" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1035,139,1186,180"/>
<area shape="rect" id="node39" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1035,72,1186,113"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="1281,136,1423,177"/>
<area shape="rect" id="node34" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="1277,267,1427,308"/>
<area shape="rect" id="node35" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1282,5,1422,47"/>
<area shape="rect" id="node36" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="1277,201,1427,243"/>
<area shape="rect" id="node37" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="1285,71,1419,112"/>
<area shape="rect" id="node38" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="1500,71,1635,112"/>
<area shape="rect" id="node41" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1021,331,1200,372"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="787,331,965,372"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a98de2aa47bebca5add3e0550f2c602bf_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="249,5,409,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="237,85,421,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="469,85,620,141"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="668,85,847,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="895,85,1080,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="1128,85,1311,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1359,45,1524,101"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1359,125,1524,181"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1572,45,1747,101"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1572,125,1747,181"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a694a2aaa7515ab45a8c9fa12b709defb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::flush_retired_volatile_page </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td>
          <td class="paramname"><em>current_epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html">memory::PagePoolOffsetAndEpochChunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subroutine of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. ">collect_retired_volatile_page()</a> in case the chunk becomes full. </p>
<p>Returns the chunk to volatile pool upto safe epoch. If there aren't enough pages to safely return, advance the epoch (which should be very rare, tho). </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00789">789</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00070">foedus::xct::XctManager::advance_current_global_epoch()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="page__pool_8hpp_source.html#l00132">foedus::memory::PagePoolOffsetAndEpochChunk::full()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00057">foedus::xct::XctManager::get_current_global_epoch()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00076">foedus::memory::EngineMemory::get_node_memory()</a>, <a class="el" href="page__pool_8cpp_source.html#l00057">foedus::memory::PagePoolOffsetAndEpochChunk::get_safe_offset_count()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="engine_8cpp_source.html#l00061">foedus::Engine::get_xct_manager()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00330">id_</a>, <a class="el" href="page__pool_8cpp_source.html#l00134">foedus::memory::PagePool::release()</a>, and <a class="el" href="page__pool_8hpp_source.html#l00130">foedus::memory::PagePoolOffsetAndEpochChunk::size()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00777">collect_retired_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                            {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="keywordflow">if</span> (chunk-&gt;size() == 0) {</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  uint32_t safe_count = chunk-&gt;get_safe_offset_count(current_epoch);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="keywordflow">while</span> (safe_count &lt; chunk-&gt;size() / 10U) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; can return only &quot;</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      &lt;&lt; safe_count &lt;&lt; <span class="stringliteral">&quot; out of &quot;</span> &lt;&lt; chunk-&gt;size()</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; retired pages to node-&quot;</span> &lt;&lt; node  &lt;&lt; <span class="stringliteral">&quot; in epoch=&quot;</span> &lt;&lt; current_epoch</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;. This means the thread received so many retired pages in a short time period.&quot;</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; Will adavance an epoch to safely return the retired pages.&quot;</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; This should be a rare event.&quot;</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">advance_current_global_epoch</a>();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    current_epoch = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">get_current_global_epoch</a>();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;okay, advanced epoch. now we should be able to return more pages&quot;</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    safe_count = chunk-&gt;get_safe_offset_count(current_epoch);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; batch-returning retired volatile pages to node-&quot;</span> &lt;&lt; node</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; safe_count/count=&quot;</span> &lt;&lt; safe_count &lt;&lt; <span class="stringliteral">&quot;/&quot;</span> &lt;&lt; chunk-&gt;size() &lt;&lt; <span class="stringliteral">&quot;. epoch=&quot;</span> &lt;&lt; current_epoch;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  memory::PagePool* volatile_pool</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node)-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  volatile_pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(safe_count, chunk);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!chunk-&gt;full());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a419a270d62522ede9bd871dd4adc0e2a"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">foedus::xct::XctManager::get_current_global_epoch</a></div><div class="ttdeci">Epoch get_current_global_epoch() const </div><div class="ttdoc">Returns the current global epoch, the epoch a newly started transaction will be in. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00057">xct_manager_pimpl.cpp:57</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a802171ff0578875748d20b4e9c8c9463"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">foedus::memory::PagePool::release</a></div><div class="ttdeci">void release(uint32_t desired_release_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Returns the specified number of free pages from the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00134">page_pool.cpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a48d5e1f7ce2f70161c253f650c75ed95"><div class="ttname"><a href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">foedus::Engine::get_xct_manager</a></div><div class="ttdeci">xct::XctManager * get_xct_manager() const </div><div class="ttdoc">See Transaction Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00061">engine.cpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_aa75089821b48c98a00cd7e4ddc0615da"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">foedus::xct::XctManager::advance_current_global_epoch</a></div><div class="ttdeci">void advance_current_global_epoch()</div><div class="ttdoc">Requests to advance the current global epoch as soon as possible and blocks until it actually does...</div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00070">xct_manager_pimpl.cpp:70</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="239,128,446,170"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#acac2755ecb22d4539c3d6bb44538240d" title="foedus::memory::PagePool\lOffsetAndEpochChunk::full" alt="" coords="253,194,432,235"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a" title="Returns the current global epoch, the epoch a newly started transaction will be in. " alt="" coords="510,270,689,311"/>
<area shape="rect" id="node17" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="275,311,410,352"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="237,376,448,418"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#a7d9aa924c48bd26b4dd208d4a9333127" title="Returns the number of offsets (always from index&#45;0) whose safe_epoch_ is strictly&#45;before the given ep..." alt="" coords="253,442,432,498"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="247,523,438,564"/>
<area shape="rect" id="node22" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95" title="See Transaction Manager. " alt="" coords="275,588,410,630"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="253,654,432,695"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#ad99e5b875980b442bf5de61fb022f0ac" title="foedus::memory::PagePool\lOffsetAndEpochChunk::size" alt="" coords="250,719,435,760"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="496,128,703,170"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a787bb892079cb32d5a2065188825a522" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch" alt="" coords="754,288,949,330"/>
<area shape="rect" id="node5" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3" title="foedus::Epoch::one_more" alt="" coords="766,106,937,133"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a03678427b184e7ce71f9bbb164dd0bad" title="foedus::xct::XctManagerPimpl\l::set_requested_global_epoch" alt="" coords="754,223,949,264"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#afce787897428bd372c67224acd3e8ea7" title="foedus::xct::XctManagerPimpl\l::wakeup_epoch_chime_thread" alt="" coords="751,158,952,199"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1009,10,1186,51"/>
<area shape="rect" id="node14" href="classfoedus_1_1soc_1_1SharedPolling.html#a9fc7bfaf57e1f2224be9869a8e9708d3" title="Unconditionally wait for signal. " alt="" coords="763,40,940,82"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a6071efec3ffc3876192101db2a1873b4" title="foedus::xct::XctManagerPimpl\l::get_requested_global_epoch" alt="" coords="1000,223,1195,264"/>
<area shape="rect" id="node8" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="1026,373,1169,400"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="1009,103,1186,144"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1251,27,1425,68"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1243,110,1433,137"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#a73cff039ec719c68895a8f9826bcd429" title="foedus::memory::PagePool\lOffsetAndEpochChunk::is\l_sorted" alt="" coords="510,377,689,433"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="510,654,689,695"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a694a2aaa7515ab45a8c9fa12b709defb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="237,136,429,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="477,136,669,177"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a31564163126364e4810f2f00398afd15" title="foedus::storage::masstree\l::Adopt::adopt_case_a" alt="" coords="717,71,891,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="717,5,891,47"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1masstree.html#a554f6fb34b45687df09df15076aac190" title="foedus::storage::masstree\l::grow_case_a_common" alt="" coords="717,201,891,243"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="717,136,891,177"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#a96de88f03cf5683529e00d2c209a07e9" title="The core implementation after locking relevant pages and acquiring free page resource. " alt="" coords="717,267,891,323"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="949,39,1123,80"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="949,136,1123,177"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="939,201,1133,243"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="949,275,1123,316"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9b77133f66157bca81a49caeca9a9904"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::follow_page_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#gab1f01cb8d7e103171a991936c4805486">storage::VolatilePageInit</a>&#160;</td>
          <td class="paramname"><em>page_initializer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tolerate_null_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>will_modify</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>take_ptr_set_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>page</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>index_in_parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A general method to follow (read) a page pointer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">page_initializer</td><td>callback function in case we need to initialize a new volatile page. null if it never happens (eg tolerate_null_pointer is false). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tolerate_null_pointer</td><td>when true and when both the volatile and snapshot pointers seem null, we return null page rather than creating a new volatile page. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">will_modify</td><td>if true, we always return a non-null volatile page. This is true when we are to modify the page, such as insert/delete. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">take_ptr_set_snapshot</td><td>if true, we add the address of volatile page pointer to ptr set when we do not follow a volatile pointer (null or volatile). This is usually true to make sure we get aware of new page installment by concurrent threads. If the isolation level is not serializable, we don't take ptr set anyways. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pointer</td><td>the page pointer. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">page</td><td>the read page. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parent</td><td>the parent page that contains a pointer to the page. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index_in_parent</td><td>Some index (meaning depends on page type) of pointer in parent page to the page. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>!tolerate_null_pointer || !will_modify (if we are modifying the page, tolerating null pointer doesn't make sense. we should always initialize a new volatile page)</dd></dl>
<p>This is the primary way to retrieve a page pointed by a pointer in various places. Depending on the current transaction's isolation level and storage type (represented by the various arguments), this does a whole lots of things to comply with our commit protocol.</p>
<p>Remember that DualPagePointer maintains volatile and snapshot pointers. We sometimes have to install a new volatile page or add the pointer to ptr set for serializability. That logic is a bit too lengthy method to duplicate in each page type, so generalize it here. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00411">411</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00198">foedus::xct::Xct::add_to_pointer_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00407">foedus::storage::assert_valid_volatile_page()</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00073">foedus::memory::LocalPageResolver::end_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">global_volatile_page_resolver_</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00199">foedus::memory::NumaCoreMemory::grab_free_volatile_page()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00325">holder_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00292">install_a_volatile_page()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="error__code_8hpp_source.html#l00142">foedus::kErrorCodeMemoryNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00356">local_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00333">numa_node_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00353">foedus::thread::Thread::follow_page_pointer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                            {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!tolerate_null_pointer || !will_modify);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  storage::VolatilePagePointer volatile_pointer = pointer-&gt;volatile_pointer_;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordtype">bool</span> followed_snapshot = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (pointer-&gt;snapshot_pointer_ == 0) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (volatile_pointer.is_null()) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="comment">// both null, so the page is not created yet.</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> (tolerate_null_pointer) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        *page = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="comment">// place an empty new page</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_initializer);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="comment">// we must not install a new volatile page in snapshot page. We must not hit this case.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parent-&gt;get_header().snapshot_);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">grab_free_volatile_page</a>();</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(offset == 0)) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">kErrorCodeMemoryNoFreePages</a>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset &lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#afd53ee3eaa00a58b7b0446456d82f4a9">end_</a>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        storage::Page* new_page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(offset);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        storage::VolatilePagePointer new_page_id;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        new_page_id.set(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a>, offset);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        storage::VolatilePageInitArguments args = {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a>,</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          new_page_id,</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          new_page,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          parent,</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          index_in_parent</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        };</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        page_initializer(args);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <a class="code" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d">storage::assert_valid_volatile_page</a>(new_page, offset);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_page-&gt;get_header().snapshot_ == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        *page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">place_a_new_volatile_page</a>(offset, pointer);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="comment">// then we have to follow volatile page anyway</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      *page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(volatile_pointer);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// if there is a snapshot page, we have a few more choices.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (!volatile_pointer.is_null()) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">// we have a volatile page, which is guaranteed to be latest</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      *page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(volatile_pointer);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (will_modify) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">// we need a volatile page. so construct it from snapshot</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04">install_a_volatile_page</a>(pointer, page));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="comment">// otherwise just use snapshot</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681">find_or_read_a_snapshot_page</a>(pointer-&gt;snapshot_pointer_, page));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      followed_snapshot = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>((*page) == <span class="keyword">nullptr</span> || (followed_snapshot == (*page)-&gt;get_header().snapshot_));</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="comment">// if we follow a snapshot pointer, remember pointer set</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">get_isolation_level</a>() == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">xct::kSerializable</a>) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> ((*page == <span class="keyword">nullptr</span> || followed_snapshot) &amp;&amp; take_ptr_set_snapshot) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">add_to_pointer_set</a>(&amp;pointer-&gt;volatile_pointer_, volatile_pointer);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_a56250946b7719a7bd15532d211eac88f"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">foedus::memory::GlobalVolatilePageResolver::resolve_offset</a></div><div class="ttdeci">storage::Page * resolve_offset(uint8_t numa_node, PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">Resolves offset plus NUMA node ID to storage::Page*. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00120">page_resolver.hpp:120</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4a95ef1bd710a66e0c24df998f881d04"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04">foedus::thread::ThreadPimpl::install_a_volatile_page</a></div><div class="ttdeci">ErrorCode install_a_volatile_page(storage::DualPagePointer *pointer, storage::Page **installed_page)</div><div class="ttdoc">Installs a volatile page to the given dual pointer as a copy of the snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00292">thread_pimpl.cpp:292</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad09e335bbca636246cf2c3d60ec22570"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">foedus::memory::NumaCoreMemory::grab_free_volatile_page</a></div><div class="ttdeci">PagePoolOffset grab_free_volatile_page()</div><div class="ttdoc">Acquires one free volatile page from local page pool. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00199">numa_core_memory.cpp:199</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_aa9d2266686c3a66678b37241a3ac434f"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">foedus::memory::LocalPageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00064">page_resolver.hpp:64</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_afd53ee3eaa00a58b7b0446456d82f4a9"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#afd53ee3eaa00a58b7b0446456d82f4a9">foedus::memory::LocalPageResolver::end_</a></div><div class="ttdeci">PagePoolOffset end_</div><div class="ttdoc">where a valid page entry ends. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00073">page_resolver.hpp:73</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a9220f4aff16817a668990bd85f2f527d"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d">foedus::storage::assert_valid_volatile_page</a></div><div class="ttdeci">void assert_valid_volatile_page(const Page *page, uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00407">page.hpp:407</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0dc235d99dfaac00446b613f409de2ab"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">foedus::thread::ThreadPimpl::numa_node_</a></div><div class="ttdeci">const ThreadGroupId numa_node_</div><div class="ttdoc">Node this thread belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00333">thread_pimpl.hpp:333</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa7cc8b97ee07c0a860f0c5a3247d6ace"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">foedus::thread::ThreadPimpl::holder_</a></div><div class="ttdeci">Thread *const holder_</div><div class="ttdoc">The public object that holds this pimpl object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00325">thread_pimpl.hpp:325</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0b56e96991f936feba47c29f61c0fbcb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">foedus::thread::ThreadPimpl::local_volatile_page_resolver_</a></div><div class="ttdeci">memory::LocalPageResolver local_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00356">thread_pimpl.hpp:356</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">foedus::kErrorCodeMemoryNoFreePages</a></div><div class="ttdoc">0x0301 : "MEMORY : Not enough free volatile pages. Check the config of MemoryOptions" ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00142">error_code.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a16c6375f66e9f177c908dc1fbc132681"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681">foedus::thread::ThreadPimpl::find_or_read_a_snapshot_page</a></div><div class="ttdeci">ErrorCode find_or_read_a_snapshot_page(storage::SnapshotPagePointer page_id, storage::Page **out)</div><div class="ttdoc">Find the given page in snapshot cache, reading it if not found. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00647">thread_pimpl.cpp:647</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_abae2ae5210db8eda39a1507940bf7352"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">foedus::xct::Xct::get_isolation_level</a></div><div class="ttdeci">IsolationLevel get_isolation_level() const </div><div class="ttdoc">Returns the level of isolation for this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00149">xct.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1611b1e29b58ee7aaf3b88cc57f9343"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">foedus::thread::ThreadPimpl::place_a_new_volatile_page</a></div><div class="ttdeci">storage::Page * place_a_new_volatile_page(memory::PagePoolOffset new_offset, storage::DualPagePointer *pointer)</div><div class="ttdoc">Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00317">thread_pimpl.cpp:317</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_adfd2125c9cc252494693f65719ed53b3"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">foedus::xct::Xct::add_to_pointer_set</a></div><div class="ttdeci">ErrorCode add_to_pointer_set(const storage::VolatilePagePointer *pointer_address, storage::VolatilePagePointer observed)</div><div class="ttdoc">Add the given page pointer to the pointer set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00198">xct.cpp:198</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="259,748,400,789"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1029,1535,1184,1576"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1297,1317,1446,1359"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="469,692,679,733"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="260,1067,399,1108"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="727,841,937,883"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="237,1132,421,1173"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="751,1177,913,1219"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="751,1009,913,1051"/>
<area shape="rect" id="node45" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="740,1345,924,1401"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="481,1249,667,1291"/>
<area shape="rect" id="node48" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="731,1425,933,1467"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1294,1604,1449,1645"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1291,1008,1452,1049"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1276,1535,1467,1576"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="751,593,913,635"/>
<area shape="rect" id="node10" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="729,365,935,407"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1017,724,1196,765"/>
<area shape="rect" id="node22" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="765,659,899,700"/>
<area shape="rect" id="node23" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="729,136,935,177"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="740,724,924,765"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1015,593,1199,635"/>
<area shape="rect" id="node11" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="1003,201,1210,243"/>
<area shape="rect" id="node14" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="1012,463,1201,504"/>
<area shape="rect" id="node15" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="1003,528,1210,569"/>
<area shape="rect" id="node16" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="1021,136,1192,177"/>
<area shape="rect" id="node17" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="1012,332,1201,373"/>
<area shape="rect" id="node18" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="1006,397,1207,439"/>
<area shape="rect" id="node19" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1021,267,1193,308"/>
<area shape="rect" id="node12" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="1286,201,1457,243"/>
<area shape="rect" id="node13" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1526,201,1703,243"/>
<area shape="rect" id="node20" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1285,267,1457,308"/>
<area shape="rect" id="node24" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="1020,71,1193,112"/>
<area shape="rect" id="node25" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="1012,5,1201,47"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="994,659,1219,700"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="985,892,1228,933"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1525,761,1704,803"/>
<area shape="rect" id="node29" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1282,761,1461,803"/>
<area shape="rect" id="node31" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1278,593,1465,635"/>
<area shape="rect" id="node32" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1515,473,1715,529"/>
<area shape="rect" id="node33" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1521,553,1708,595"/>
<area shape="rect" id="node34" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1539,619,1690,660"/>
<area shape="rect" id="node35" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1539,684,1690,725"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1525,943,1704,984"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="1282,943,1461,984"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="482,1067,666,1123"/>
<area shape="rect" id="node47" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="993,1060,1221,1101"/>
<area shape="rect" id="node49" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1020,1417,1193,1459"/>
<area shape="rect" id="node50" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1005,1601,1208,1657"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a9b77133f66157bca81a49caeca9a9904_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="237,1038,388,1079"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="439,741,612,797"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="673,1038,887,1079"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="436,1031,615,1087"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="436,1191,615,1247"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="693,429,867,485"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="443,1344,608,1400"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="443,1111,607,1167"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1247,5,1420,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="693,608,867,664"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="693,688,867,744"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="687,793,873,849"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="945,871,1167,927"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1521,39,1694,95"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="969,608,1143,664"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="967,397,1145,453"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="969,688,1143,744"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="964,528,1148,584"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1500,181,1715,222"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1508,293,1707,334"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1521,455,1694,511"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1247,528,1420,584"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1215,609,1452,650"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1218,674,1449,715"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1240,740,1427,796"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1247,136,1420,192"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1247,216,1420,272"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1247,397,1420,453"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="1244,871,1423,927"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1521,727,1694,783"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="953,1118,1159,1159"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1243,951,1424,1007"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1251,1031,1415,1087"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1251,1111,1415,1167"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1232,1191,1435,1247"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1244,1271,1423,1327"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1235,1351,1431,1407"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1242,1431,1425,1487"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="687,1184,873,1240"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="687,1264,873,1320"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="965,1184,1147,1240"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="965,1264,1147,1320"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="969,302,1143,373"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="969,105,1143,146"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="962,171,1150,227"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="687,1344,873,1400"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="687,1424,873,1480"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="663,1505,897,1546"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="692,1571,868,1627"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a89fe2af2a31e70a89e143cbc2d687ffb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::follow_page_pointers_for_read_batch </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#gab1f01cb8d7e103171a991936c4805486">storage::VolatilePageInit</a>&#160;</td>
          <td class="paramname"><em>page_initializer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tolerate_null_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>take_ptr_set_snapshot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> **&#160;</td>
          <td class="paramname"><em>pointers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t *&#160;</td>
          <td class="paramname"><em>index_in_parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>followed_snapshots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Batched version of follow_page_pointer with will_modify==false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">batch_size</td><td>Batch size. Must be kMaxFindPagesBatch or less. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_initializer</td><td>callback function in case we need to initialize a new volatile page. null if it never happens (eg tolerate_null_pointer is false). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tolerate_null_pointer</td><td>when true and when both the volatile and snapshot pointers seem null, we return null page rather than creating a new volatile page. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">take_ptr_set_snapshot</td><td>if true, we add the address of volatile page pointer to ptr set when we do not follow a volatile pointer (null or volatile). This is usually true to make sure we get aware of new page installment by concurrent threads. If the isolation level is not serializable, we don't take ptr set anyways. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pointers</td><td>the page pointers. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parents</td><td>the parent page that contains a pointer to the page. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index_in_parents</td><td>Some index (meaning depends on page type) of pointer in parent page to the page. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">followed_snapshots</td><td>As input, must be same as parents[i]==followed_snapshots[i]. As output, same as out[i]-&gt;header().snapshot_. We receive/emit this to avoid accessing page header. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>the read page. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>this method is guaranteed to work even if parents==out </dd></dl>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00484">484</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00198">foedus::xct::Xct::add_to_pointer_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00407">foedus::storage::assert_valid_volatile_page()</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">global_volatile_page_resolver_</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00199">foedus::memory::NumaCoreMemory::grab_free_volatile_page()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00325">holder_</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="error__code_8hpp_source.html#l00106">foedus::kErrorCodeInvalidParameter</a>, <a class="el" href="error__code_8hpp_source.html#l00142">foedus::kErrorCodeMemoryNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="thread_8hpp_source.html#l00055">foedus::thread::Thread::kMaxFindPagesBatch</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00356">local_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00333">numa_node_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00373">foedus::thread::Thread::follow_page_pointers_for_read_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                     {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tolerate_null_pointer || page_initializer);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (batch_size == 0) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(batch_size &gt; <a class="code" href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">Thread::kMaxFindPagesBatch</a>)) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">kErrorCodeInvalidParameter</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// this one uses a batched find method for following snapshot pages.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="comment">// some of them might follow volatile pages, so we do it only when at least one snapshot ptr.</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordtype">bool</span> has_some_snapshot = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> needs_ptr_set</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    = take_ptr_set_snapshot &amp;&amp; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">get_isolation_level</a>() == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">xct::kSerializable</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="comment">// REMINDER: Remember that it might be parents == out. We thus use tmp_out.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  storage::Page* tmp_out[<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">Thread::kMaxFindPagesBatch</a>];</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// fill with garbage for easier debugging</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  std::memset(tmp_out, 0xDA, <span class="keyword">sizeof</span>(tmp_out));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// collect snapshot page IDs.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> snapshot_page_ids[<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">Thread::kMaxFindPagesBatch</a>];</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keywordflow">for</span> (uint16_t b = 0; b &lt; batch_size; ++b) {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    snapshot_page_ids[b] = 0;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    storage::DualPagePointer* pointer = pointers[b];</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (pointer == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="comment">// followed_snapshots is both input and output.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// as input, it should indicate whether the parent is snapshot or not</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parents[b]-&gt;get_header().snapshot_ == followed_snapshots[b]);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">if</span> (pointer-&gt;snapshot_pointer_ != 0 &amp;&amp; pointer-&gt;volatile_pointer_.is_null()) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      has_some_snapshot = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      snapshot_page_ids[b] = pointer-&gt;snapshot_pointer_;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  }</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="comment">// follow them in a batch. output to tmp_out.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="keywordflow">if</span> (has_some_snapshot) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf">find_or_read_snapshot_pages_batch</a>(batch_size, snapshot_page_ids, tmp_out));</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="comment">// handle cases we have to volatile pages. also we might have to create a new page.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">for</span> (uint16_t b = 0; b &lt; batch_size; ++b) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    storage::DualPagePointer* pointer = pointers[b];</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">if</span> (has_some_snapshot) {</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">if</span> (pointer == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        out[b] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp_out[b]) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <span class="comment">// if we follow a snapshot pointer _from volatile page_, remember pointer set</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">if</span> (needs_ptr_set &amp;&amp; !followed_snapshots[b]) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">add_to_pointer_set</a>(&amp;pointer-&gt;volatile_pointer_, pointer-&gt;volatile_pointer_);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        followed_snapshots[b] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        out[b] = tmp_out[b];</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tmp_out[b] == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="comment">// we didn&#39;t follow snapshot page. we must follow volatile page, or null.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    followed_snapshots[b] = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parents[b]-&gt;get_header().snapshot_);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (pointer-&gt;snapshot_pointer_ == 0) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (pointer-&gt;volatile_pointer_.is_null()) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="comment">// both null, so the page is not created yet.</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="keywordflow">if</span> (tolerate_null_pointer) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          out[b] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;          <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">grab_free_volatile_page</a>();</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(offset == 0)) {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">kErrorCodeMemoryNoFreePages</a>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;          }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          storage::Page* new_page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(offset);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;          storage::VolatilePagePointer new_page_id;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          new_page_id.set(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a>, offset);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          storage::VolatilePageInitArguments args = {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a>,</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            new_page_id,</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            new_page,</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            parents[b],</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            index_in_parents[b]</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;          };</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;          page_initializer(args);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <a class="code" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d">storage::assert_valid_volatile_page</a>(new_page, offset);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_page-&gt;get_header().snapshot_ == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          out[b] = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">place_a_new_volatile_page</a>(offset, pointer);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        }</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        out[b] = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(pointer-&gt;volatile_pointer_);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!pointer-&gt;volatile_pointer_.is_null());</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      out[b] = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(pointer-&gt;volatile_pointer_);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_a56250946b7719a7bd15532d211eac88f"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">foedus::memory::GlobalVolatilePageResolver::resolve_offset</a></div><div class="ttdeci">storage::Page * resolve_offset(uint8_t numa_node, PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">Resolves offset plus NUMA node ID to storage::Page*. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00120">page_resolver.hpp:120</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">foedus::kErrorCodeInvalidParameter</a></div><div class="ttdoc">0x0002 : "GENERAL: Invalid parameter given" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00106">error_code.hpp:106</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad09e335bbca636246cf2c3d60ec22570"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">foedus::memory::NumaCoreMemory::grab_free_volatile_page</a></div><div class="ttdeci">PagePoolOffset grab_free_volatile_page()</div><div class="ttdoc">Acquires one free volatile page from local page pool. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00199">numa_core_memory.cpp:199</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_aa9d2266686c3a66678b37241a3ac434f"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">foedus::memory::LocalPageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00064">page_resolver.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a7e94630e018900343888e94e36c6b14cabf2c9dc4a44ca83095e56776ae6817da">foedus::thread::Thread::kMaxFindPagesBatch</a></div><div class="ttdoc">Max size for find_or_read_snapshot_pages_batch() etc. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8hpp_source.html#l00055">thread.hpp:55</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a9220f4aff16817a668990bd85f2f527d"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d">foedus::storage::assert_valid_volatile_page</a></div><div class="ttdeci">void assert_valid_volatile_page(const Page *page, uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00407">page.hpp:407</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a98de2aa47bebca5add3e0550f2c602bf"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf">foedus::thread::ThreadPimpl::find_or_read_snapshot_pages_batch</a></div><div class="ttdeci">ErrorCode find_or_read_snapshot_pages_batch(uint16_t batch_size, const storage::SnapshotPagePointer *page_ids, storage::Page **out)</div><div class="ttdoc">Batched version of find_or_read_a_snapshot_page(). </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00687">thread_pimpl.cpp:687</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0dc235d99dfaac00446b613f409de2ab"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">foedus::thread::ThreadPimpl::numa_node_</a></div><div class="ttdeci">const ThreadGroupId numa_node_</div><div class="ttdoc">Node this thread belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00333">thread_pimpl.hpp:333</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga629d4b8103bfb83ef9c11b842a4fd398"><div class="ttname"><a href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">foedus::storage::SnapshotPagePointer</a></div><div class="ttdeci">uint64_t SnapshotPagePointer</div><div class="ttdoc">Page ID of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00079">storage_id.hpp:79</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa7cc8b97ee07c0a860f0c5a3247d6ace"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">foedus::thread::ThreadPimpl::holder_</a></div><div class="ttdeci">Thread *const holder_</div><div class="ttdoc">The public object that holds this pimpl object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00325">thread_pimpl.hpp:325</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0b56e96991f936feba47c29f61c0fbcb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">foedus::thread::ThreadPimpl::local_volatile_page_resolver_</a></div><div class="ttdeci">memory::LocalPageResolver local_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00356">thread_pimpl.hpp:356</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">foedus::kErrorCodeMemoryNoFreePages</a></div><div class="ttdoc">0x0301 : "MEMORY : Not enough free volatile pages. Check the config of MemoryOptions" ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00142">error_code.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_abae2ae5210db8eda39a1507940bf7352"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">foedus::xct::Xct::get_isolation_level</a></div><div class="ttdeci">IsolationLevel get_isolation_level() const </div><div class="ttdoc">Returns the level of isolation for this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00149">xct.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1611b1e29b58ee7aaf3b88cc57f9343"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">foedus::thread::ThreadPimpl::place_a_new_volatile_page</a></div><div class="ttdeci">storage::Page * place_a_new_volatile_page(memory::PagePoolOffset new_offset, storage::DualPagePointer *pointer)</div><div class="ttdoc">Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00317">thread_pimpl.cpp:317</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_adfd2125c9cc252494693f65719ed53b3"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">foedus::xct::Xct::add_to_pointer_set</a></div><div class="ttdeci">ErrorCode add_to_pointer_set(const storage::VolatilePagePointer *pointer_address, storage::VolatilePagePointer observed)</div><div class="ttdoc">Add the given page pointer to the pointer set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00198">xct.cpp:198</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3" title="Add the given page pointer to the pointer set of this transaction. " alt="" coords="260,215,401,256"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="771,1423,925,1464"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1038,1197,1187,1239"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="239,791,423,847"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="261,1088,400,1129"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="743,5,953,47"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="495,1256,656,1297"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="237,1205,424,1247"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="495,1088,656,1129"/>
<area shape="rect" id="node46" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="483,1387,667,1443"/>
<area shape="rect" id="node48" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="474,1321,677,1363"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1035,1492,1190,1533"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1032,1309,1193,1351"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1017,1423,1208,1464"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="494,799,657,840"/>
<area shape="rect" id="node10" href="classfoedus_1_1cache_1_1CacheHashtable.html#a8e48716623ca44e83cc5ef871c10b131" title="Batched version of find(). " alt="" coords="472,332,679,373"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="759,855,937,896"/>
<area shape="rect" id="node25" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="508,916,643,957"/>
<area shape="rect" id="node26" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="472,528,679,569"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="483,733,667,775"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="756,724,940,765"/>
<area shape="rect" id="node11" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="745,397,951,439"/>
<area shape="rect" id="node17" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="753,136,943,177"/>
<area shape="rect" id="node18" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="745,201,951,243"/>
<area shape="rect" id="node19" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="763,463,933,504"/>
<area shape="rect" id="node20" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="753,267,943,308"/>
<area shape="rect" id="node21" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="747,332,949,373"/>
<area shape="rect" id="node22" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="762,71,934,112"/>
<area shape="rect" id="node12" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="1027,428,1198,469"/>
<area shape="rect" id="node13" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1261,461,1438,503"/>
<area shape="rect" id="node14" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9" title="Returns a hash value for the given snapshot page ID. " alt="" coords="1264,533,1435,575"/>
<area shape="rect" id="node16" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230" title="Calculate remainder. " alt="" coords="1261,396,1438,437"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1491,557,1691,613"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1027,71,1199,112"/>
<area shape="rect" id="node27" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="761,528,935,569"/>
<area shape="rect" id="node28" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="753,593,943,635"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="735,659,961,700"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="727,789,969,831"/>
<area shape="rect" id="node31" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1260,193,1439,235"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1023,193,1202,235"/>
<area shape="rect" id="node34" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1019,720,1206,761"/>
<area shape="rect" id="node35" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1256,720,1443,761"/>
<area shape="rect" id="node36" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1274,785,1425,827"/>
<area shape="rect" id="node37" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1274,655,1425,696"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1260,853,1439,895"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="1023,853,1202,895"/>
<area shape="rect" id="node47" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="734,920,962,961"/>
<area shape="rect" id="node49" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="761,1357,935,1399"/>
<area shape="rect" id="node50" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="747,1489,949,1545"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a89fe2af2a31e70a89e143cbc2d687ffb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="237,45,388,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="436,45,615,101"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="663,45,848,101"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a617e3f91fe74f5215ae4f0081e30ab6d" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read_batch" alt="" coords="896,45,1079,101"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="1127,5,1292,61"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="1127,85,1292,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1340,5,1515,61"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1340,85,1515,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aac3821c478965e40c60c819a7e5a83e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::follow_page_pointers_for_write_batch </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#gab1f01cb8d7e103171a991936c4805486">storage::VolatilePageInit</a>&#160;</td>
          <td class="paramname"><em>page_initializer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> **&#160;</td>
          <td class="paramname"><em>pointers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint16_t *&#160;</td>
          <td class="paramname"><em>index_in_parents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">batch_size</td><td>Batch size. Must be kMaxFindPagesBatch or less. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">page_initializer</td><td>callback function in case we need to initialize a new volatile page. null if it never happens (eg tolerate_null_pointer is false). </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pointers</td><td>the page pointers. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">parents</td><td>the parent page that contains a pointer to the page. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index_in_parents</td><td>Some index (meaning depends on page type) of pointer in parent page to the page. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>the read page. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>this method is guaranteed to work even if parents==out </dd></dl>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00595">595</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00407">foedus::storage::assert_valid_volatile_page()</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">global_volatile_page_resolver_</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00199">foedus::memory::NumaCoreMemory::grab_free_volatile_page()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00325">holder_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00292">install_a_volatile_page()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="error__code_8hpp_source.html#l00142">foedus::kErrorCodeMemoryNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00356">local_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00333">numa_node_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00395">foedus::thread::Thread::follow_page_pointers_for_write_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                     {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="comment">// REMINDER: Remember that it might be parents == out. It&#39;s not an issue in this function, tho.</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// this method is not quite batched as it doesn&#39;t need to be.</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// still, less branches because we can assume all of them need a writable volatile page.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">for</span> (uint16_t b = 0; b &lt; batch_size; ++b) {</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    storage::DualPagePointer* pointer = pointers[b];</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">if</span> (pointer == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      out[b] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parents[b]-&gt;get_header().snapshot_);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    storage::Page** page = out + b;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    storage::VolatilePagePointer volatile_pointer = pointer-&gt;volatile_pointer_;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (!volatile_pointer.is_null()) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      *page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(volatile_pointer);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pointer-&gt;snapshot_pointer_ == 0) {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">// we need a volatile page. so construct it from snapshot</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04">install_a_volatile_page</a>(pointer, page));</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page_initializer);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">// we must not install a new volatile page in snapshot page. We must not hit this case.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">grab_free_volatile_page</a>();</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(offset == 0)) {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">kErrorCodeMemoryNoFreePages</a>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      storage::Page* new_page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(offset);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      storage::VolatilePagePointer new_page_id;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      new_page_id.set(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a>, offset);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      storage::VolatilePageInitArguments args = {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a>,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        new_page_id,</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        new_page,</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        parents[b],</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        index_in_parents[b]</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      };</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      page_initializer(args);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d">storage::assert_valid_volatile_page</a>(new_page, offset);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_page-&gt;get_header().snapshot_ == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      *page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">place_a_new_volatile_page</a>(offset, pointer);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out[b] != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_a56250946b7719a7bd15532d211eac88f"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">foedus::memory::GlobalVolatilePageResolver::resolve_offset</a></div><div class="ttdeci">storage::Page * resolve_offset(uint8_t numa_node, PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">Resolves offset plus NUMA node ID to storage::Page*. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00120">page_resolver.hpp:120</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4a95ef1bd710a66e0c24df998f881d04"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04">foedus::thread::ThreadPimpl::install_a_volatile_page</a></div><div class="ttdeci">ErrorCode install_a_volatile_page(storage::DualPagePointer *pointer, storage::Page **installed_page)</div><div class="ttdoc">Installs a volatile page to the given dual pointer as a copy of the snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00292">thread_pimpl.cpp:292</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad09e335bbca636246cf2c3d60ec22570"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">foedus::memory::NumaCoreMemory::grab_free_volatile_page</a></div><div class="ttdeci">PagePoolOffset grab_free_volatile_page()</div><div class="ttdoc">Acquires one free volatile page from local page pool. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00199">numa_core_memory.cpp:199</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_aa9d2266686c3a66678b37241a3ac434f"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">foedus::memory::LocalPageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00064">page_resolver.hpp:64</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a9220f4aff16817a668990bd85f2f527d"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d">foedus::storage::assert_valid_volatile_page</a></div><div class="ttdeci">void assert_valid_volatile_page(const Page *page, uint32_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00407">page.hpp:407</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0dc235d99dfaac00446b613f409de2ab"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">foedus::thread::ThreadPimpl::numa_node_</a></div><div class="ttdeci">const ThreadGroupId numa_node_</div><div class="ttdoc">Node this thread belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00333">thread_pimpl.hpp:333</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa7cc8b97ee07c0a860f0c5a3247d6ace"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">foedus::thread::ThreadPimpl::holder_</a></div><div class="ttdeci">Thread *const holder_</div><div class="ttdoc">The public object that holds this pimpl object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00325">thread_pimpl.hpp:325</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0b56e96991f936feba47c29f61c0fbcb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">foedus::thread::ThreadPimpl::local_volatile_page_resolver_</a></div><div class="ttdeci">memory::LocalPageResolver local_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00356">thread_pimpl.hpp:356</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">foedus::kErrorCodeMemoryNoFreePages</a></div><div class="ttdoc">0x0301 : "MEMORY : Not enough free volatile pages. Check the config of MemoryOptions" ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00142">error_code.hpp:142</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1611b1e29b58ee7aaf3b88cc57f9343"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">foedus::thread::ThreadPimpl::place_a_new_volatile_page</a></div><div class="ttdeci">storage::Page * place_a_new_volatile_page(memory::PagePoolOffset new_offset, storage::DualPagePointer *pointer)</div><div class="ttdoc">Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00317">thread_pimpl.cpp:317</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1029,1403,1184,1445"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1297,1122,1446,1163"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="727,73,937,114"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="237,987,421,1029"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="751,213,913,254"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="751,1326,913,1367"/>
<area shape="rect" id="node45" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="740,279,924,335"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="481,933,667,974"/>
<area shape="rect" id="node48" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="731,1225,933,1266"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1294,1334,1449,1375"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1291,1467,1452,1509"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1276,1402,1467,1443"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1519,22,1697,63"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1282,29,1461,70"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="469,643,679,685"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="482,271,666,327"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="751,643,913,685"/>
<area shape="rect" id="node13" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="729,709,935,750"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="1017,349,1196,390"/>
<area shape="rect" id="node28" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="765,774,899,815"/>
<area shape="rect" id="node29" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="729,578,935,619"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="740,410,924,451"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="1015,153,1199,194"/>
<area shape="rect" id="node14" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="1003,545,1210,586"/>
<area shape="rect" id="node20" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="1012,937,1201,978"/>
<area shape="rect" id="node21" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="1003,741,1210,782"/>
<area shape="rect" id="node22" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="1021,610,1192,651"/>
<area shape="rect" id="node23" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="1012,806,1201,847"/>
<area shape="rect" id="node24" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="1006,871,1207,913"/>
<area shape="rect" id="node25" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1021,675,1193,717"/>
<area shape="rect" id="node15" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="1286,535,1457,577"/>
<area shape="rect" id="node16" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1519,581,1697,622"/>
<area shape="rect" id="node17" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9" title="Returns a hash value for the given snapshot page ID. " alt="" coords="1523,411,1693,453"/>
<area shape="rect" id="node19" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230" title="Calculate remainder. " alt="" coords="1519,515,1697,557"/>
<area shape="rect" id="node18" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1749,332,1949,388"/>
<area shape="rect" id="node26" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1285,675,1457,717"/>
<area shape="rect" id="node30" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="1020,414,1193,455"/>
<area shape="rect" id="node31" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="1012,479,1201,521"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="994,87,1219,129"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="985,283,1228,325"/>
<area shape="rect" id="node35" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1278,153,1465,194"/>
<area shape="rect" id="node36" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1515,153,1701,194"/>
<area shape="rect" id="node37" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1533,218,1683,259"/>
<area shape="rect" id="node38" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1533,87,1683,129"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1519,335,1697,377"/>
<area shape="rect" id="node41" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="1282,277,1461,318"/>
<area shape="rect" id="node47" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="993,218,1221,259"/>
<area shape="rect" id="node49" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1020,1257,1193,1298"/>
<area shape="rect" id="node50" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1005,1323,1208,1379"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_aac3821c478965e40c60c819a7e5a83e5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="237,5,388,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="436,5,615,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="663,5,848,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="896,5,1061,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1109,5,1284,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa6ea11736c6b062482876159d39caec8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::get_mcs_rw_my_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html">xct::McsRwSimpleBlock</a> **&#160;</td>
          <td class="paramname"><em>out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00314">314</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00388">mcs_rw_simple_blocks_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00431">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_my_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;{ *out = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">mcs_rw_simple_blocks_</a>; }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dd7f177602e25a5cd1318723825c861"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">foedus::thread::ThreadPimpl::mcs_rw_simple_blocks_</a></div><div class="ttdeci">xct::McsRwSimpleBlock * mcs_rw_simple_blocks_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00388">thread_pimpl.hpp:388</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_aa6ea11736c6b062482876159d39caec8_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_aa6ea11736c6b062482876159d39caec8_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_aa6ea11736c6b062482876159d39caec8_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_aa6ea11736c6b062482876159d39caec8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ac9ab464a4636b91fb8957f03f73b3f8d" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_my_block" alt="" coords="237,5,439,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a87b4ca5e80c49490068d37ad56b01dfb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::get_mcs_rw_my_blocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html">xct::McsRwExtendedBlock</a> **&#160;</td>
          <td class="paramname"><em>out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00315">315</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00389">mcs_rw_extended_blocks_</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{ *out = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">mcs_rw_extended_blocks_</a>; }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0f8e120dfd26566418bbb9057f8c5b20"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">foedus::thread::ThreadPimpl::mcs_rw_extended_blocks_</a></div><div class="ttdeci">xct::McsRwExtendedBlock * mcs_rw_extended_blocks_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00389">thread_pimpl.hpp:389</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af52661009b044c7a6553234720d71923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadRef.html">ThreadRef</a> foedus::thread::ThreadPimpl::get_thread_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00767">767</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="thread__pool_8hpp_source.html#l00237">foedus::thread::ThreadPool::get_pimpl()</a>, <a class="el" href="engine_8cpp_source.html#l00052">foedus::Engine::get_thread_pool()</a>, and <a class="el" href="thread__pool__pimpl_8hpp_source.html#l00092">foedus::thread::ThreadPoolPimpl::get_thread_ref()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00445">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_other_cur_block()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00471">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_async_block()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00454">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_block()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00449">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_ww_other_block()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00441">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::other_waiting()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                                 {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="keyword">auto</span>* pool_pimpl = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd">get_thread_pool</a>()-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c">get_pimpl</a>();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordflow">return</span> pool_pimpl-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31">get_thread_ref</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPool_html_a4af4c3d3fd7a9353d892e5270a900f1c"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c">foedus::thread::ThreadPool::get_pimpl</a></div><div class="ttdeci">ThreadPoolPimpl * get_pimpl() const </div><div class="ttdoc">Returns the pimpl of this object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00237">thread_pool.hpp:237</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPoolPimpl_html_a61040189c343e97c3f0ee961df7a9f31"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31">foedus::thread::ThreadPoolPimpl::get_thread_ref</a></div><div class="ttdeci">ThreadRef get_thread_ref(ThreadId id) __attribute__((always_inline))</div><div class="ttdoc">For better performance, but for some reason this method causes an issue in MCS lock. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pool__pimpl_8hpp_source.html#l00092">thread_pool_pimpl.hpp:92</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a4243a3e399186727d6bbdda5bc98f8cd"><div class="ttname"><a href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd">foedus::Engine::get_thread_pool</a></div><div class="ttdeci">thread::ThreadPool * get_thread_pool() const </div><div class="ttdoc">See Thread and Thread-Group. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00052">engine.cpp:52</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="237,5,415,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="259,71,393,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="237,136,415,177"/>
<area shape="rect" id="node5" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="463,103,641,144"/>
<area shape="rect" id="node6" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="463,168,641,209"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_af52661009b044c7a6553234720d71923_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3e123fc4b38a06c77a0f8f12234eb5e0" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_other_cur_block" alt="" coords="237,5,455,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a99408b01841c4cd34977a90b71e04dfa" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other\l_async_block" alt="" coords="503,57,687,113"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other_block" alt="" coords="240,123,452,164"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a6b6b5272a4f797f30df41bd32ad13ad6" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_ww_other_block" alt="" coords="237,188,455,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3e8a52b170df473aaaf3efad96b5f6b3" title="foedus::thread::ThreadPimpl\lMcsAdaptor::other_waiting" alt="" coords="254,253,438,295"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ab70a7b7dfedbfd2444de64f9a946b262" title="foedus::thread::ThreadPimpl\lMcsAdaptor::dereference\l_rw_tail_block" alt="" coords="503,137,687,193"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a73a9dfcab4771b1a5c6362406b27faeb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::handle_tasks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main routine of the worker thread. </p>
<p>This method keeps checking current_task_. Whenever it retrieves a task, it runs it and re-sets current_task_ when it's done. It exists when exit_requested_ is set. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00163">163</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="thread__id_8hpp_source.html#l00131">foedus::thread::decompose_numa_node()</a>, <a class="el" href="xct__options_8hpp_source.html#l00123">foedus::xct::XctOptions::enable_retrospective_lock_list_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="proc__manager_8cpp_source.html#l00040">foedus::proc::ProcManager::get_proc()</a>, <a class="el" href="engine_8cpp_source.html#l00051">foedus::Engine::get_proc_manager()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00325">holder_</a>, <a class="el" href="storage__options_8hpp_source.html#l00056">foedus::storage::StorageOptions::hot_threshold_</a>, <a class="el" href="xct__options_8hpp_source.html#l00135">foedus::xct::XctOptions::hot_threshold_for_retrospective_lock_list_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00330">id_</a>, <a class="el" href="error__stack_8hpp_source.html#l00385">foedus::ErrorStack::is_error()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00158">is_stop_requested()</a>, <a class="el" href="thread__id_8hpp_source.html#l00205">foedus::thread::kNotInitialized</a>, <a class="el" href="thread__id_8hpp_source.html#l00211">foedus::thread::kRunningTask</a>, <a class="el" href="shared__memory__repo_8hpp_source.html#l00413">foedus::soc::ThreadMemoryAnchors::kTaskOutputMemorySize</a>, <a class="el" href="thread__id_8hpp_source.html#l00217">foedus::thread::kTerminated</a>, <a class="el" href="thread__id_8hpp_source.html#l00213">foedus::thread::kWaitingForClientRelease</a>, <a class="el" href="thread__id_8hpp_source.html#l00209">foedus::thread::kWaitingForExecution</a>, <a class="el" href="thread__id_8hpp_source.html#l00207">foedus::thread::kWaitingForTask</a>, <a class="el" href="xct_8hpp_source.html#l00132">foedus::xct::Xct::set_default_hot_threshold_for_this_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00126">foedus::xct::Xct::set_default_rll_for_this_xct()</a>, <a class="el" href="xct_8hpp_source.html#l00139">foedus::xct::Xct::set_default_rll_threshold_for_this_xct()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00239">set_thread_schedule()</a>, <a class="el" href="assorted__func_8cpp_source.html#l00193">foedus::assorted::spinlock_yield()</a>, <a class="el" href="engine__options_8hpp_source.html#l00145">foedus::EngineOptions::storage_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00383">task_input_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00384">task_output_memory_</a>, and <a class="el" href="engine__options_8hpp_source.html#l00147">foedus::EngineOptions::xct_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                               {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">int</span> numa_node = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">decompose_numa_node</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a>));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; started running on NUMA node: &quot;</span> &lt;&lt; numa_node</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; control_block address=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  NumaThreadScope scope(numa_node);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad6c2ae1c63499d211f31d3165eeea3cf">set_thread_schedule</a>();</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(control_block_-&gt;status_ == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a3b9c59461ee89a25359ea69563068a9b">kNotInitialized</a>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  control_block_-&gt;status_ = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd">kWaitingForTask</a>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb">is_stop_requested</a>()) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb">assorted::spinlock_yield</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      uint64_t demand = control_block_-&gt;wakeup_cond_.acquire_ticket();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb">is_stop_requested</a>()) {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="comment">// these two status are &quot;not urgent&quot;.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">if</span> (control_block_-&gt;status_ == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd">kWaitingForTask</a></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        || control_block_-&gt;status_ == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">kWaitingForClientRelease</a>) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; sleeping...&quot;</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        control_block_-&gt;wakeup_cond_.timedwait(demand, 100000ULL, 1U &lt;&lt; 16, 1U &lt;&lt; 13);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; woke up. status=&quot;</span> &lt;&lt; control_block_-&gt;status_;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (control_block_-&gt;status_ == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12afa60273eee5d8d1548d0da34187b2a08">kWaitingForExecution</a>) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      control_block_-&gt;output_len_ = 0;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      control_block_-&gt;status_ = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12ae4da726d3c3a0db2b9e657ddcee9444d">kRunningTask</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="comment">// Reset the default value of enable_rll_for_this_xct etc to system-wide setting</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="comment">// for every impersonation.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a873d7bb9094918e5d61742c456dbeb61">set_default_rll_for_this_xct</a>(</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">xct_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#aca8818f386f22400be2a64de3d9eee6b">enable_retrospective_lock_list_</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#ace9354af4e27109da6affc4d3bd84419">set_default_hot_threshold_for_this_xct</a>(</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a3e40cfe4530b10e87344b42be16927e1">storage_</a>.<a class="code" href="structfoedus_1_1storage_1_1StorageOptions.html#ac27b7919baf2e41da1057dd666442e6f">hot_threshold_</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a339fdd767efdfed418e32792b560b373">set_default_rll_threshold_for_this_xct</a>(</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">xct_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a0c631d601027cf678dfd192f74cd348b">hot_threshold_for_retrospective_lock_list_</a>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a>&amp; proc_name = control_block_-&gt;proc_name_;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; retrieved a task: &quot;</span> &lt;&lt; proc_name;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="group__PROC.html#ga7aa50117a254b660df879d65d1d9964b">proc::Proc</a> proc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      ErrorStack result = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a213680d8d683ac663b847d09f1c0e9e3">get_proc_manager</a>()-&gt;<a class="code" href="classfoedus_1_1proc_1_1ProcManager.html#a22da584f85fbfd412c0637f737e32740">get_proc</a>(proc_name, &amp;proc);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (result.is_error()) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="comment">// control_block_-&gt;proc_result_</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; couldn&#39;t find procedure: &quot;</span> &lt;&lt; proc_name;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        uint32_t output_used = 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        proc::ProcArguments args = {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;          <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a>,</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">task_input_memory_</a>,</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          control_block_-&gt;input_len_,</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">task_output_memory_</a>,</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <a class="code" href="structfoedus_1_1soc_1_1ThreadMemoryAnchors.html#a5c5d096932618c5ffb765a9ae839758ea9639075ff64fbe04fd9838a70e156ab3">soc::ThreadMemoryAnchors::kTaskOutputMemorySize</a>,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          &amp;output_used,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        };</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        result = proc(args);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; run(task) returned. result =&quot;</span> &lt;&lt; result</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, output_used=&quot;</span> &lt;&lt; output_used;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        control_block_-&gt;output_len_ = output_used;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">if</span> (result.is_error()) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        control_block_-&gt;proc_result_.from_error_stack(result);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        control_block_-&gt;proc_result_.clear();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      control_block_-&gt;status_ = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">kWaitingForClientRelease</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">// Wakeup the client if it&#39;s waiting.</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        control_block_-&gt;task_complete_cond_.signal();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; finished a task. result =&quot;</span> &lt;&lt; result;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb">is_stop_requested</a>());</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  control_block_-&gt;status_ = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12af713804e6a22002bd137b04e90560ca3">kTerminated</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; exits&quot;</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a873d7bb9094918e5d61742c456dbeb61"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a873d7bb9094918e5d61742c456dbeb61">foedus::xct::Xct::set_default_rll_for_this_xct</a></div><div class="ttdeci">void set_default_rll_for_this_xct(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00126">xct.hpp:126</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a8b5ec40798ea07cf3dbb4def4c6ad142"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">foedus::thread::ThreadPimpl::task_input_memory_</a></div><div class="ttdeci">void * task_input_memory_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00383">thread_pimpl.hpp:383</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd">foedus::thread::kWaitingForTask</a></div><div class="ttdoc">Idle state, receiving a new task. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00207">thread_id.hpp:207</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_ace9354af4e27109da6affc4d3bd84419"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#ace9354af4e27109da6affc4d3bd84419">foedus::xct::Xct::set_default_hot_threshold_for_this_xct</a></div><div class="ttdeci">void set_default_hot_threshold_for_this_xct(uint16_t value)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00132">xct.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ad6c2ae1c63499d211f31d3165eeea3cf"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad6c2ae1c63499d211f31d3165eeea3cf">foedus::thread::ThreadPimpl::set_thread_schedule</a></div><div class="ttdeci">void set_thread_schedule()</div><div class="ttdoc">initializes the thread&#39;s policy/priority </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00239">thread_pimpl.cpp:239</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_aca8818f386f22400be2a64de3d9eee6b"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#aca8818f386f22400be2a64de3d9eee6b">foedus::xct::XctOptions::enable_retrospective_lock_list_</a></div><div class="ttdeci">bool enable_retrospective_lock_list_</div><div class="ttdoc">Whether to use Retrospective Lock List (RLL) after aborts. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00123">xct_options.hpp:123</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12afa60273eee5d8d1548d0da34187b2a08"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12afa60273eee5d8d1548d0da34187b2a08">foedus::thread::kWaitingForExecution</a></div><div class="ttdoc">A client has set a next task. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00209">thread_id.hpp:209</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a1fb740dca84aaaed101bf9f4818c5b4f"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">foedus::EngineOptions::xct_</a></div><div class="ttdeci">xct::XctOptions xct_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00147">engine_options.hpp:147</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageOptions_html_ac27b7919baf2e41da1057dd666442e6f"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageOptions.html#ac27b7919baf2e41da1057dd666442e6f">foedus::storage::StorageOptions::hot_threshold_</a></div><div class="ttdeci">uint64_t hot_threshold_</div><div class="ttdoc">Page hotness >= this value will be considered hot (hybrid CC only). </div><div class="ttdef"><b>Definition:</b> <a href="storage__options_8hpp_source.html#l00056">storage_options.hpp:56</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a3b9c59461ee89a25359ea69563068a9b"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a3b9c59461ee89a25359ea69563068a9b">foedus::thread::kNotInitialized</a></div><div class="ttdoc">Initial state. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00205">thread_id.hpp:205</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a3e40cfe4530b10e87344b42be16927e1"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a3e40cfe4530b10e87344b42be16927e1">foedus::EngineOptions::storage_</a></div><div class="ttdeci">storage::StorageOptions storage_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00145">engine_options.hpp:145</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa7cc8b97ee07c0a860f0c5a3247d6ace"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">foedus::thread::ThreadPimpl::holder_</a></div><div class="ttdeci">Thread *const holder_</div><div class="ttdoc">The public object that holds this pimpl object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00325">thread_pimpl.hpp:325</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12ae4da726d3c3a0db2b9e657ddcee9444d"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12ae4da726d3c3a0db2b9e657ddcee9444d">foedus::thread::kRunningTask</a></div><div class="ttdoc">The thread has picked the task up and is now running. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00211">thread_id.hpp:211</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a0c631d601027cf678dfd192f74cd348b"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a0c631d601027cf678dfd192f74cd348b">foedus::xct::XctOptions::hot_threshold_for_retrospective_lock_list_</a></div><div class="ttdeci">uint16_t hot_threshold_for_retrospective_lock_list_</div><div class="ttdoc">When we construct Retrospective Lock List (RLL) after aborts, we add read-locks on records whose hotn...</div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00135">xct_options.hpp:135</a></div></div>
<div class="ttc" id="group__THREAD_html_ga1622c6d8c64ca80f51c1bef5190ec4fa"><div class="ttname"><a href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">foedus::thread::decompose_numa_node</a></div><div class="ttdeci">ThreadGroupId decompose_numa_node(ThreadId global_id)</div><div class="ttdoc">Extracts NUMA node ID from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00131">thread_id.hpp:131</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a213680d8d683ac663b847d09f1c0e9e3"><div class="ttname"><a href="classfoedus_1_1Engine.html#a213680d8d683ac663b847d09f1c0e9e3">foedus::Engine::get_proc_manager</a></div><div class="ttdeci">proc::ProcManager * get_proc_manager() const </div><div class="ttdoc">See System and User Procedures. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00051">engine.cpp:51</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaa05e01910d3ea9909f1a64afd62729fb"><div class="ttname"><a href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb">foedus::assorted::spinlock_yield</a></div><div class="ttdeci">void spinlock_yield()</div><div class="ttdoc">Invoke _mm_pause(), x86 PAUSE instruction, or something equivalent in the env. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8cpp_source.html#l00193">assorted_func.cpp:193</a></div></div>
<div class="ttc" id="structfoedus_1_1soc_1_1ThreadMemoryAnchors_html_a5c5d096932618c5ffb765a9ae839758ea9639075ff64fbe04fd9838a70e156ab3"><div class="ttname"><a href="structfoedus_1_1soc_1_1ThreadMemoryAnchors.html#a5c5d096932618c5ffb765a9ae839758ea9639075ff64fbe04fd9838a70e156ab3">foedus::soc::ThreadMemoryAnchors::kTaskOutputMemorySize</a></div><div class="ttdef"><b>Definition:</b> <a href="shared__memory__repo_8hpp_source.html#l00413">shared_memory_repo.hpp:413</a></div></div>
<div class="ttc" id="group__PROC_html_gaf2b456ef002bdeb0e8e51321a7a05c8f"><div class="ttname"><a href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">foedus::proc::ProcName</a></div><div class="ttdeci">assorted::FixedString&lt; 60 &gt; ProcName</div><div class="ttdoc">Represents a unique name of a procedure. </div><div class="ttdef"><b>Definition:</b> <a href="proc__id_8hpp_source.html#l00044">proc_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="classfoedus_1_1proc_1_1ProcManager_html_a22da584f85fbfd412c0637f737e32740"><div class="ttname"><a href="classfoedus_1_1proc_1_1ProcManager.html#a22da584f85fbfd412c0637f737e32740">foedus::proc::ProcManager::get_proc</a></div><div class="ttdeci">ErrorStack get_proc(const ProcName &amp;name, Proc *out)</div><div class="ttdoc">Returns the function pointer of the specified procedure. </div><div class="ttdef"><b>Definition:</b> <a href="proc__manager_8cpp_source.html#l00040">proc_manager.cpp:40</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a339fdd767efdfed418e32792b560b373"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a339fdd767efdfed418e32792b560b373">foedus::xct::Xct::set_default_rll_threshold_for_this_xct</a></div><div class="ttdeci">void set_default_rll_threshold_for_this_xct(uint16_t value)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00139">xct.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa2dced4e9409f69e3d5327c653807362"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">foedus::thread::ThreadPimpl::task_output_memory_</a></div><div class="ttdeci">void * task_output_memory_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00384">thread_pimpl.hpp:384</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">foedus::thread::kWaitingForClientRelease</a></div><div class="ttdoc">The thread has completed the task and set the result. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00213">thread_id.hpp:213</a></div></div>
<div class="ttc" id="group__PROC_html_ga7aa50117a254b660df879d65d1d9964b"><div class="ttname"><a href="group__PROC.html#ga7aa50117a254b660df879d65d1d9964b">foedus::proc::Proc</a></div><div class="ttdeci">ErrorStack(* Proc)(const ProcArguments &amp;args)</div><div class="ttdoc">A function pointer of a user/system stored procedure. </div><div class="ttdef"><b>Definition:</b> <a href="proc__id_8hpp_source.html#l00113">proc_id.hpp:113</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a28f34cbb16ac60050a2e42332058b3eb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb">foedus::thread::ThreadPimpl::is_stop_requested</a></div><div class="ttdeci">bool is_stop_requested() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00158">thread_pimpl.cpp:158</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12af713804e6a22002bd137b04e90560ca3"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12af713804e6a22002bd137b04e90560ca3">foedus::thread::kTerminated</a></div><div class="ttdoc">The thread has terminated (either error or normal, check the result to differentiate them)...</div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00217">thread_id.hpp:217</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="240,32,419,73"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="494,449,629,491"/>
<area shape="rect" id="node4" href="classfoedus_1_1proc_1_1ProcManager.html#a22da584f85fbfd412c0637f737e32740" title="Returns the function pointer of the specified procedure. " alt="" coords="240,97,419,139"/>
<area shape="rect" id="node10" href="classfoedus_1_1Engine.html#a213680d8d683ac663b847d09f1c0e9e3" title="See System and User Procedures. " alt="" coords="262,215,397,256"/>
<area shape="rect" id="node11" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="264,280,395,321"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb" title="foedus::thread::ThreadPimpl\l::is_stop_requested" alt="" coords="469,165,653,207"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1Xct.html#ace9354af4e27109da6affc4d3bd84419" title="foedus::xct::Xct::set\l_default_hot_threshold\l_for_this_xct" alt="" coords="253,397,405,453"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1Xct.html#a873d7bb9094918e5d61742c456dbeb61" title="foedus::xct::Xct::set\l_default_rll_for_this_xct" alt="" coords="250,477,409,519"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1Xct.html#a339fdd767efdfed418e32792b560b373" title="foedus::xct::Xct::set\l_default_rll_threshold\l_for_this_xct" alt="" coords="257,543,401,599"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad6c2ae1c63499d211f31d3165eeea3cf" title="initializes the thread&#39;s policy/priority " alt="" coords="237,624,421,665"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb" title="Invoke _mm_pause(), x86 PAUSE instruction, or something equivalent in the env. " alt="" coords="242,689,417,731"/>
<area shape="rect" id="node5" href="classfoedus_1_1proc_1_1ProcManagerPimpl.html#a9c1c82068b9cd0753b679bfd575861b0" title="foedus::proc::ProcManager\lPimpl::get_proc" alt="" coords="472,80,651,121"/>
<area shape="rect" id="node6" href="classfoedus_1_1assorted_1_1FixedString.html#a37d5d22a12629a4fba786c2f62c0a214" title="Convert to a C string. " alt="" coords="701,71,893,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1proc_1_1ProcManagerPimpl.html#aa92f0d777803a8ee817ac6141875ad1a" title="foedus::proc::ProcManager\lPimpl::find_by_name" alt="" coords="708,136,887,177"/>
<area shape="rect" id="node9" href="classfoedus_1_1Engine.html#a8d9a31e48aec9b73e16b64170c0250f9" title="If this is a child instance, returns its SOC ID (NUMA node). " alt="" coords="730,5,865,47"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="941,165,1115,207"/>
<area shape="rect" id="node17" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="491,624,631,665"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a73a9dfcab4771b1a5c6362406b27faeb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a741208e803d0a0bb5f979ebb099d2a8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPimpl::initialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00081">81</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="engine__options_8hpp_source.html#l00136">foedus::EngineOptions::cache_</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00067">foedus::memory::NumaNodeMemory::get_core_memory()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00073">foedus::memory::EngineMemory::get_local_memory()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="page__pool_8cpp_source.html#l00146">foedus::memory::PagePool::get_resolver()</a>, <a class="el" href="soc__manager_8cpp_source.html#l00038">foedus::soc::SocManager::get_shared_memory_repo()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00059">foedus::memory::NumaNodeMemory::get_snapshot_cache_table()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00058">foedus::memory::NumaNodeMemory::get_snapshot_pool()</a>, <a class="el" href="engine_8cpp_source.html#l00059">foedus::Engine::get_soc_manager()</a>, <a class="el" href="shared__memory__repo_8hpp_source.html#l00526">foedus::soc::SharedMemoryRepo::get_thread_memory_anchors()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00057">foedus::memory::NumaNodeMemory::get_volatile_pool()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">global_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00330">id_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00053">foedus::thread::ThreadControlBlock::initialize()</a>, <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>, <a class="el" href="initializable_8hpp_source.html#l00169">foedus::DefaultInitializable::initialize()</a>, <a class="el" href="initializable_8hpp_source.html#l00196">foedus::DefaultInitializable::is_initialized()</a>, <a class="el" href="xct__options_8hpp_source.html#l00051">foedus::xct::XctOptions::kMcsImplementationTypeExtended</a>, <a class="el" href="xct__options_8hpp_source.html#l00050">foedus::xct::XctOptions::kMcsImplementationTypeSimple</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00356">local_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00361">log_buffer_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>, <a class="el" href="xct__options_8hpp_source.html#l00164">foedus::xct::XctOptions::mcs_implementation_type_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00087">foedus::thread::ThreadControlBlock::mcs_rw_async_mapping_current_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00390">mcs_rw_async_mappings_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00389">mcs_rw_extended_blocks_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00388">mcs_rw_simple_blocks_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00387">mcs_ww_blocks_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00347">node_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00366">raw_thread_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00368">raw_thread_set_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00338">simple_mcs_rw_</a>, <a class="el" href="cache__options_8hpp_source.html#l00050">foedus::cache::CacheOptions::snapshot_cache_enabled_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00349">snapshot_cache_hashtable_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00380">snapshot_file_set_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00351">snapshot_page_pool_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00383">task_input_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00384">task_output_memory_</a>, and <a class="el" href="engine__options_8hpp_source.html#l00147">foedus::EngineOptions::xct_</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                        {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a>());</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  soc::ThreadMemoryAnchors* anchors</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">get_soc_manager</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c">get_shared_memory_repo</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ae22e59b0c58a7f6fa519e2c4149afd9c">get_thread_memory_anchors</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a>);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a> = anchors-&gt;thread_memory_;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a261b434597087690ad1f65e407a3a221">initialize</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">task_input_memory_</a> = anchors-&gt;task_input_memory_;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">task_output_memory_</a> = anchors-&gt;task_output_memory_;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">mcs_ww_blocks_</a> = anchors-&gt;mcs_ww_lock_memories_;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">mcs_rw_simple_blocks_</a> = anchors-&gt;mcs_rw_simple_lock_memories_;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">mcs_rw_extended_blocks_</a> = anchors-&gt;mcs_rw_extended_lock_memories_;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a> = anchors-&gt;mcs_rw_async_mappings_memories_;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keyword">auto</span> mcs_type = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">xct_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#ad96ba092ce5e33bca1625f40850ead73">mcs_implementation_type_</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mcs_type == <a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea7eec21376c24502222d35f7db5484068">xct::XctOptions::kMcsImplementationTypeSimple</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    || mcs_type == <a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea10c91c38fa2a5246c11348523f892d7e">xct::XctOptions::kMcsImplementationTypeExtended</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a684b8acdccad684b32c4ea97be009f8e">simple_mcs_rw_</a> = mcs_type == <a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea7eec21376c24502222d35f7db5484068">xct::XctOptions::kMcsImplementationTypeSimple</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a> = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a0c5065125240df0f59f2cd04ff5f8808">get_local_memory</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a> = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a58cd4f9c594cdcfd85fb3c3e9d47a983">get_core_memory</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">snapshot_cache_enabled_</a>) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a> = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ad8fddde9484a0ceb8d31cd8eca323c77">get_snapshot_cache_table</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a> = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">get_snapshot_pool</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529">initialize</a>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    &amp;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    &amp;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">mcs_rw_async_mapping_current_</a>);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">snapshot_file_set_</a>.<a class="code" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a>());</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">log_buffer_</a>.<a class="code" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a>());</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a> = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48">get_volatile_pool</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">get_resolver</a>();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad8236666d8fca6674334d0d166218e5c">raw_thread_set_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">raw_thread_</a> = std::move(std::thread(&amp;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb">ThreadPimpl::handle_tasks</a>, <span class="keyword">this</span>));</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad8236666d8fca6674334d0d166218e5c">raw_thread_set_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a261b434597087690ad1f65e407a3a221"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a261b434597087690ad1f65e407a3a221">foedus::thread::ThreadControlBlock::initialize</a></div><div class="ttdeci">void initialize(ThreadId my_thread_id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00053">thread_pimpl.hpp:53</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a8b5ec40798ea07cf3dbb4def4c6ad142"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a8b5ec40798ea07cf3dbb4def4c6ad142">foedus::thread::ThreadPimpl::task_input_memory_</a></div><div class="ttdeci">void * task_input_memory_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00383">thread_pimpl.hpp:383</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a30fc7377de865406c4174bcd7be6b616"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">foedus::thread::ThreadPimpl::snapshot_file_set_</a></div><div class="ttdeci">cache::SnapshotFileSet snapshot_file_set_</div><div class="ttdoc">Each threads maintains a private set of snapshot file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00380">thread_pimpl.hpp:380</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a58cd4f9c594cdcfd85fb3c3e9d47a983"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a58cd4f9c594cdcfd85fb3c3e9d47a983">foedus::memory::NumaNodeMemory::get_core_memory</a></div><div class="ttdeci">NumaCoreMemory * get_core_memory(foedus::thread::ThreadId id) const </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00067">numa_node_memory.hpp:67</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a174d00be0d6482995665c5731da35d79"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">foedus::thread::ThreadControlBlock::mcs_block_current_</a></div><div class="ttdeci">uint32_t mcs_block_current_</div><div class="ttdoc">How many MCS blocks we allocated in this thread&#39;s current xct. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00084">thread_pimpl.hpp:84</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a0541f9ed9fc128fc2c246a4a3bd2b740"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">foedus::memory::NumaNodeMemory::get_snapshot_pool</a></div><div class="ttdeci">PagePool * get_snapshot_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00058">numa_node_memory.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1e93a62b0a6414f6e30c17969af2340"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">foedus::thread::ThreadPimpl::node_memory_</a></div><div class="ttdeci">memory::NumaNodeMemory * node_memory_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00347">thread_pimpl.hpp:347</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a12c3db0e7d4015e8eaddbae71c90ab7e"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">foedus::thread::ThreadPimpl::raw_thread_</a></div><div class="ttdeci">std::thread raw_thread_</div><div class="ttdoc">Encapsulates raw thread object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00366">thread_pimpl.hpp:366</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a1e874be55edde5eec583d9745a90000ea7eec21376c24502222d35f7db5484068"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea7eec21376c24502222d35f7db5484068">foedus::xct::XctOptions::kMcsImplementationTypeSimple</a></div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00050">xct_options.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a1fb740dca84aaaed101bf9f4818c5b4f"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">foedus::EngineOptions::xct_</a></div><div class="ttdeci">xct::XctOptions xct_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00147">engine_options.hpp:147</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1c0d1b2cce940cc22285a906b1076bd3"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">foedus::thread::ThreadPimpl::snapshot_page_pool_</a></div><div class="ttdeci">memory::PagePool * snapshot_page_pool_</div><div class="ttdoc">shorthand for node_memory_->get_snapshot_pool() </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00351">thread_pimpl.hpp:351</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html_a896cdc7cbe05ed0d5f77b863228a7c3a"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html#a896cdc7cbe05ed0d5f77b863228a7c3a">foedus::cache::CacheOptions::snapshot_cache_enabled_</a></div><div class="ttdeci">bool snapshot_cache_enabled_</div><div class="ttdoc">Whether to cache the read accesses on snapshot files. </div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00050">cache_options.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ad8236666d8fca6674334d0d166218e5c"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad8236666d8fca6674334d0d166218e5c">foedus::thread::ThreadPimpl::raw_thread_set_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; raw_thread_set_</div><div class="ttdoc">Just to make sure raw_thread_ is set. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00368">thread_pimpl.hpp:368</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a7964fa7de54357a65cab8f05c1de4696"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">foedus::thread::ThreadPimpl::mcs_ww_blocks_</a></div><div class="ttdeci">xct::McsWwBlock * mcs_ww_blocks_</div><div class="ttdoc">Pre-allocated MCS blocks. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00387">thread_pimpl.hpp:387</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a22a0dc3bbbca682c3bc41eace9b6d1ff"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">foedus::DefaultInitializable::initialize</a></div><div class="ttdeci">ErrorStack initialize() override final</div><div class="ttdoc">Typical implementation of Initializable::initialize() that provides initialize-once semantics...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00169">initializable.hpp:169</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a39fd5c3a2e0e0175a52ae24c3339e0c8"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">foedus::thread::ThreadControlBlock::mcs_rw_async_mapping_current_</a></div><div class="ttdeci">uint32_t mcs_rw_async_mapping_current_</div><div class="ttdoc">How many async mappings for extended RW lock we have so far. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00087">thread_pimpl.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ad101b64b189a656c13f92b7fb7bb62d7"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">foedus::thread::ThreadPimpl::log_buffer_</a></div><div class="ttdeci">log::ThreadLogBuffer log_buffer_</div><div class="ttdoc">Thread-private log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00361">thread_pimpl.hpp:361</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0b56e96991f936feba47c29f61c0fbcb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">foedus::thread::ThreadPimpl::local_volatile_page_resolver_</a></div><div class="ttdeci">memory::LocalPageResolver local_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00356">thread_pimpl.hpp:356</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a73a9dfcab4771b1a5c6362406b27faeb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb">foedus::thread::ThreadPimpl::handle_tasks</a></div><div class="ttdeci">void handle_tasks()</div><div class="ttdoc">Main routine of the worker thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00163">thread_pimpl.cpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dd7f177602e25a5cd1318723825c861"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dd7f177602e25a5cd1318723825c861">foedus::thread::ThreadPimpl::mcs_rw_simple_blocks_</a></div><div class="ttdeci">xct::McsRwSimpleBlock * mcs_rw_simple_blocks_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00388">thread_pimpl.hpp:388</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_ad8fddde9484a0ceb8d31cd8eca323c77"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ad8fddde9484a0ceb8d31cd8eca323c77">foedus::memory::NumaNodeMemory::get_snapshot_cache_table</a></div><div class="ttdeci">cache::CacheHashtable * get_snapshot_cache_table()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00059">numa_node_memory.hpp:59</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a0c5065125240df0f59f2cd04ff5f8808"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a0c5065125240df0f59f2cd04ff5f8808">foedus::memory::EngineMemory::get_local_memory</a></div><div class="ttdeci">NumaNodeMemory * get_local_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00073">engine_memory.hpp:73</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_ad96ba092ce5e33bca1625f40850ead73"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#ad96ba092ce5e33bca1625f40850ead73">foedus::xct::XctOptions::mcs_implementation_type_</a></div><div class="ttdeci">uint16_t mcs_implementation_type_</div><div class="ttdoc">Defines which implementation of MCS locks to use for RW locks. </div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00164">xct_options.hpp:164</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_ae9ad7ab6a3df52b0e9f0e50ede6faa2e"><div class="ttname"><a href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">foedus::Engine::get_soc_manager</a></div><div class="ttdeci">soc::SocManager * get_soc_manager() const </div><div class="ttdoc">See SOC and IPC. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00059">engine.cpp:59</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0f8e120dfd26566418bbb9057f8c5b20"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0f8e120dfd26566418bbb9057f8c5b20">foedus::thread::ThreadPimpl::mcs_rw_extended_blocks_</a></div><div class="ttdeci">xct::McsRwExtendedBlock * mcs_rw_extended_blocks_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00389">thread_pimpl.hpp:389</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a052ae65bb017f9f77741db58bcbcf936"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">foedus::thread::ThreadPimpl::mcs_rw_async_mappings_</a></div><div class="ttdeci">xct::McsRwAsyncMapping * mcs_rw_async_mappings_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00390">thread_pimpl.hpp:390</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa2dced4e9409f69e3d5327c653807362"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa2dced4e9409f69e3d5327c653807362">foedus::thread::ThreadPimpl::task_output_memory_</a></div><div class="ttdeci">void * task_output_memory_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00384">thread_pimpl.hpp:384</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a1e874be55edde5eec583d9745a90000ea10c91c38fa2a5246c11348523f892d7e"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea10c91c38fa2a5246c11348523f892d7e">foedus::xct::XctOptions::kMcsImplementationTypeExtended</a></div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00051">xct_options.hpp:51</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a18916c76eea7aa49572e69e48e75717e"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">foedus::memory::PagePool::get_resolver</a></div><div class="ttdeci">const LocalPageResolver &amp; get_resolver() const </div><div class="ttdoc">Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00146">page_pool.cpp:146</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedMemoryRepo_html_ae22e59b0c58a7f6fa519e2c4149afd9c"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ae22e59b0c58a7f6fa519e2c4149afd9c">foedus::soc::SharedMemoryRepo::get_thread_memory_anchors</a></div><div class="ttdeci">ThreadMemoryAnchors * get_thread_memory_anchors(thread::ThreadId thread_id)</div><div class="ttdef"><b>Definition:</b> <a href="shared__memory__repo_8hpp_source.html#l00526">shared_memory_repo.hpp:526</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a684b8acdccad684b32c4ea97be009f8e"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a684b8acdccad684b32c4ea97be009f8e">foedus::thread::ThreadPimpl::simple_mcs_rw_</a></div><div class="ttdeci">bool simple_mcs_rw_</div><div class="ttdoc">shortcut for engine_->get_options().xct_.mcs_implementation_type_ == simple </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00338">thread_pimpl.hpp:338</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a1abda1e84b8af8bd6916e52fd0a09f3e"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">foedus::DefaultInitializable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override final</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00196">initializable.hpp:196</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a6236b974981b361bfbc25db38c7f9626"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">foedus::thread::ThreadPimpl::snapshot_cache_hashtable_</a></div><div class="ttdeci">cache::CacheHashtable * snapshot_cache_hashtable_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00349">thread_pimpl.hpp:349</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a6e51937e58975e50d0f3eea198b24d3e"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">foedus::EngineOptions::cache_</a></div><div class="ttdeci">cache::CacheOptions cache_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00136">engine_options.hpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a630ab6d899053a9afc067e34877edd48"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48">foedus::memory::NumaNodeMemory::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00057">numa_node_memory.hpp:57</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a9dd027b4a8d21f45a60f82d110c5a529"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529">foedus::xct::Xct::initialize</a></div><div class="ttdeci">void initialize(memory::NumaCoreMemory *core_memory, uint32_t *mcs_block_current, uint32_t *mcs_rw_async_mapping_current)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00077">xct.cpp:77</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SocManager_html_a627cf434892c441c90c2de7c20637e9c"><div class="ttname"><a href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c">foedus::soc::SocManager::get_shared_memory_repo</a></div><div class="ttdeci">SharedMemoryRepo * get_shared_memory_repo()</div><div class="ttdoc">Returns the shared memories maintained across SOCs. </div><div class="ttdef"><b>Definition:</b> <a href="soc__manager_8cpp_source.html#l00038">soc_manager.cpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a741208e803d0a0bb5f979ebb099d2a8d_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a741208e803d0a0bb5f979ebb099d2a8d_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a741208e803d0a0bb5f979ebb099d2a8d_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a741208e803d0a0bb5f979ebb099d2a8d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a58cd4f9c594cdcfd85fb3c3e9d47a983" title="foedus::memory::NumaNode\lMemory::get_core_memory" alt="" coords="260,118,447,160"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="517,855,728,911"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1EngineMemory.html#a0c5065125240df0f59f2cd04ff5f8808" title="foedus::memory::EngineMemory\l::get_local_memory" alt="" coords="248,1636,459,1677"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="555,1001,690,1042"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="776,337,911,378"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e" title="Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver..." alt="" coords="264,1701,443,1742"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="263,1766,443,1808"/>
<area shape="rect" id="node11" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ad8fddde9484a0ceb8d31cd8eca323c77" title="foedus::memory::NumaNode\lMemory::get_snapshot_cache_table" alt="" coords="237,1832,469,1873"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740" title="foedus::memory::NumaNode\lMemory::get_snapshot_pool" alt="" coords="260,1897,447,1938"/>
<area shape="rect" id="node13" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="286,1962,421,2004"/>
<area shape="rect" id="node14" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ae22e59b0c58a7f6fa519e2c4149afd9c" title="foedus::soc::SharedMemory\lRepo::get_thread_memory\l_anchors" alt="" coords="261,184,446,240"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48" title="foedus::memory::NumaNode\lMemory::get_volatile_pool" alt="" coords="260,2028,447,2069"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb" title="Main routine of the worker thread. " alt="" coords="261,546,445,588"/>
<area shape="rect" id="node27" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a261b434597087690ad1f65e407a3a221" title="foedus::thread::ThreadControl\lBlock::initialize" alt="" coords="257,2481,449,2522"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="270,1467,437,1494"/>
<area shape="rect" id="node48" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="267,1518,439,1560"/>
<area shape="rect" id="node50" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="537,2285,709,2326"/>
<area shape="rect" id="node3" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="533,118,712,160"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ae901dc06f6b6f4594626ed0b233daec6" title="foedus::memory::PagePool\lPimpl::get_resolver" alt="" coords="533,2350,712,2392"/>
<area shape="rect" id="node15" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="533,184,712,225"/>
<area shape="rect" id="node18" href="classfoedus_1_1proc_1_1ProcManager.html#a22da584f85fbfd412c0637f737e32740" title="Returns the function pointer of the specified procedure. " alt="" coords="533,513,712,554"/>
<area shape="rect" id="node19" href="classfoedus_1_1Engine.html#a213680d8d683ac663b847d09f1c0e9e3" title="See System and User Procedures. " alt="" coords="555,644,690,685"/>
<area shape="rect" id="node20" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="557,936,688,977"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a28f34cbb16ac60050a2e42332058b3eb" title="foedus::thread::ThreadPimpl\l::is_stop_requested" alt="" coords="531,709,715,750"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1Xct.html#ace9354af4e27109da6affc4d3bd84419" title="foedus::xct::Xct::set\l_default_hot_threshold\l_for_this_xct" alt="" coords="547,775,699,831"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1Xct.html#a873d7bb9094918e5d61742c456dbeb61" title="foedus::xct::Xct::set\l_default_rll_for_this_xct" alt="" coords="543,249,702,290"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1Xct.html#a339fdd767efdfed418e32792b560b373" title="foedus::xct::Xct::set\l_default_rll_threshold\l_for_this_xct" alt="" coords="551,432,695,488"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad6c2ae1c63499d211f31d3165eeea3cf" title="initializes the thread&#39;s policy/priority " alt="" coords="531,366,715,408"/>
<area shape="rect" id="node26" href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb" title="Invoke _mm_pause(), x86 PAUSE instruction, or something equivalent in the env. " alt="" coords="535,578,710,620"/>
<area shape="rect" id="node28" href="classfoedus_1_1FixedErrorStack.html#ad87a8cd7f42ef3c421b116bce070a372" title="foedus::FixedErrorStack\l::clear" alt="" coords="541,2546,704,2588"/>
<area shape="rect" id="node29" href="classfoedus_1_1assorted_1_1FixedString.html#ad175b4520982eaf19692255255125b06" title="Clear string. " alt="" coords="527,2612,719,2653"/>
<area shape="rect" id="node30" href="classfoedus_1_1soc_1_1SharedMutex.html#a752dda273486899f5a58171c2ede01fb" title="foedus::soc::SharedMutex\l::initialize" alt="" coords="535,2416,710,2457"/>
<area shape="rect" id="node31" href="classfoedus_1_1soc_1_1SharedPolling.html#ace449e19d0a13388da16570aefd42994" title="foedus::soc::SharedPolling\l::initialize" alt="" coords="534,2481,711,2522"/>
<area shape="rect" id="node33" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc" title="foedus::xct::XctId\l::set_epoch" alt="" coords="561,2008,684,2049"/>
<area shape="rect" id="node34" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="553,2073,693,2114"/>
<area shape="rect" id="node35" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="545,2139,700,2195"/>
<area shape="rect" id="node36" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce" title="foedus::xct::XctId\l::set_ordinal" alt="" coords="561,1066,684,1108"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="561,1132,684,1173"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a3f376657b7efceecf12e0cc504ab8c17" title="foedus::memory::NumaCore\lMemory::get_small_thread\l_local_memory_pieces" alt="" coords="531,1198,715,1254"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a8f55dee0a9b4f7f55d22a60cd677f39e" title="foedus::memory::NumaCore\lMemory::get_local_work\l_memory" alt="" coords="531,1278,715,1334"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a318c160df3a63c1063665a1f19e741e8" title="foedus::memory::NumaCore\lMemory::get_local_work\l_memory_size" alt="" coords="531,1358,715,1414"/>
<area shape="rect" id="node41" href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4" title="foedus::xct::SysxctWorkspace\l::init" alt="" coords="522,1489,723,1530"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483" title="foedus::xct::CurrentLock\lList::init" alt="" coords="541,1554,705,1596"/>
<area shape="rect" id="node43" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac62f3ab84bf9ac7f5b7a07c656d5190a" title="foedus::memory::NumaCore\lMemory::get_current_lock\l_list_memory" alt="" coords="531,1620,715,1676"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a1542703e9d39b62b7269192a4db8e4b6" title="foedus::memory::NumaCore\lMemory::get_current_lock\l_list_capacity" alt="" coords="531,1927,715,1983"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535" title="foedus::xct::Retrospective\lLockList::init" alt="" coords="537,1701,709,1742"/>
<area shape="rect" id="node46" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a11de415935b61a9f48e35719d500cbb9" title="foedus::memory::NumaCore\lMemory::get_retrospective\l_lock_list_memory" alt="" coords="531,1767,715,1823"/>
<area shape="rect" id="node47" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#aa15ff5555f06dfff58b3fd11f60f2ca7" title="foedus::memory::NumaCore\lMemory::get_retrospective\l_lock_list_capacity" alt="" coords="531,1847,715,1903"/>
<area shape="rect" id="node49" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="537,2220,709,2261"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4a95ef1bd710a66e0c24df998f881d04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::install_a_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>installed_page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Installs a volatile page to the given dual pointer as a copy of the snapshot page. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pointer</td><td>dual pointer. volatile pointer will be modified. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">installed_page</td><td>physical pointer to the installed volatile page. This might point to a page installed by a concurrent thread. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>pointer-&gt;snapshot_pointer_ != 0 (this method is for a page that already has snapshot) </dd>
<dd>
pointer-&gt;volatile_pointer.components.offset == 0 (but not mandatory because concurrent threads might have installed it right now)</dd></dl>
<p>This is called when a dual pointer has only a snapshot pointer, in other words it is "clean", to create a volatile version for modification. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00292">292</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00073">foedus::memory::LocalPageResolver::end_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="storage__id_8hpp_source.html#l00202">foedus::storage::VolatilePagePointer::get_offset()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00208">foedus::memory::NumaCoreMemory::grab_free_volatile_page_pointer()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="error__code_8hpp_source.html#l00142">foedus::kErrorCodeMemoryNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00356">local_volatile_page_resolver_</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, and <a class="el" href="thread_8cpp_source.html#l00107">foedus::thread::Thread::install_a_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer-&gt;snapshot_pointer_ != 0);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// copy from snapshot version</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  storage::Page* snapshot_page;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681">find_or_read_a_snapshot_page</a>(pointer-&gt;snapshot_pointer_, &amp;snapshot_page));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  storage::VolatilePagePointer volatile_pointer = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98">grab_free_volatile_page_pointer</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> offset = volatile_pointer.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6">get_offset</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(volatile_pointer.is_null())) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">kErrorCodeMemoryNoFreePages</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(offset &lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#afd53ee3eaa00a58b7b0446456d82f4a9">end_</a>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  storage::Page* page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(offset);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  std::memcpy(page, snapshot_page, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// We copied from a snapshot page, so the snapshot flag is on.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;get_header().snapshot_);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  page-&gt;get_header().snapshot_ = <span class="keyword">false</span>;  <span class="comment">// now it&#39;s volatile</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  page-&gt;get_header().page_id_ = volatile_pointer.word;  <span class="comment">// and correct page ID</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  *installed_page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">place_a_new_volatile_page</a>(offset, pointer);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_aa9d2266686c3a66678b37241a3ac434f"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">foedus::memory::LocalPageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00064">page_resolver.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_afb436d68c982228d9e4bc66104b2aa98"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98">foedus::memory::NumaCoreMemory::grab_free_volatile_page_pointer</a></div><div class="ttdeci">storage::VolatilePagePointer grab_free_volatile_page_pointer()</div><div class="ttdoc">Wrapper for grab_free_volatile_page(). </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00208">numa_core_memory.cpp:208</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_afd53ee3eaa00a58b7b0446456d82f4a9"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#afd53ee3eaa00a58b7b0446456d82f4a9">foedus::memory::LocalPageResolver::end_</a></div><div class="ttdeci">PagePoolOffset end_</div><div class="ttdoc">where a valid page entry ends. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00073">page_resolver.hpp:73</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_ac3d7cb1649528efa8b9aa22b63bf52e6"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6">foedus::storage::VolatilePagePointer::get_offset</a></div><div class="ttdeci">memory::PagePoolOffset get_offset() const </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00202">storage_id.hpp:202</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0b56e96991f936feba47c29f61c0fbcb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">foedus::thread::ThreadPimpl::local_volatile_page_resolver_</a></div><div class="ttdeci">memory::LocalPageResolver local_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00356">thread_pimpl.hpp:356</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a2ddd0cd462e4ae138f0e572106ad098c">foedus::kErrorCodeMemoryNoFreePages</a></div><div class="ttdoc">0x0301 : "MEMORY : Not enough free volatile pages. Check the config of MemoryOptions" ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00142">error_code.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a16c6375f66e9f177c908dc1fbc132681"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681">foedus::thread::ThreadPimpl::find_or_read_a_snapshot_page</a></div><div class="ttdeci">ErrorCode find_or_read_a_snapshot_page(storage::SnapshotPagePointer page_id, storage::Page **out)</div><div class="ttdoc">Find the given page in snapshot cache, reading it if not found. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00647">thread_pimpl.cpp:647</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1611b1e29b58ee7aaf3b88cc57f9343"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343">foedus::thread::ThreadPimpl::place_a_new_volatile_page</a></div><div class="ttdeci">storage::Page * place_a_new_volatile_page(memory::PagePoolOffset new_offset, storage::DualPagePointer *pointer)</div><div class="ttdoc">Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00317">thread_pimpl.cpp:317</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="237,644,447,685"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1061,1381,1210,1423"/>
<area shape="rect" id="node37" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1055,1003,1216,1044"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="250,942,434,998"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="517,1073,679,1115"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="249,1132,435,1173"/>
<area shape="rect" id="node43" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="506,1410,690,1466"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8" title="Get a tentative work memory of the specified size from pre&#45;allocated thread&#45;private memory..." alt="" coords="517,579,679,620"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheHashtable.html#ac92d7a0c69e61cfdcacd72b9e8c7bd74" title="Returns an offset for the given page ID opportunistically. " alt="" coords="495,235,701,276"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="781,696,960,737"/>
<area shape="rect" id="node21" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="531,644,665,685"/>
<area shape="rect" id="node22" href="classfoedus_1_1cache_1_1CacheHashtable.html#af7762689517cd7a18dd64d8591a3272a" title="Called when a cached page is not found. " alt="" coords="495,461,701,503"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="506,761,690,803"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="779,612,963,653"/>
<area shape="rect" id="node5" href="classfoedus_1_1cache_1_1CacheHashtable.html#a30b6a0b28cce30d50da7e0419c8cad20" title="Returns a bucket number the given page ID should belong to. " alt="" coords="767,397,974,439"/>
<area shape="rect" id="node12" href="structfoedus_1_1cache_1_1CacheBucket.html#ab91d1b89c885979b7a6a4ef70b12b54d" title="foedus::cache::CacheBucket\l::get_content_id" alt="" coords="776,267,965,308"/>
<area shape="rect" id="node13" href="classfoedus_1_1cache_1_1CacheHashtable.html#acea3236385a3b8d05ed1a60186e32ee8" title="foedus::cache::CacheHashtable\l::get_logical_buckets" alt="" coords="767,71,974,112"/>
<area shape="rect" id="node14" href="structfoedus_1_1cache_1_1HashFunc.html#a9470855bb66d98df48f82fc5ba6655c6" title="Returns another hash value used to differentiate IDs with similar hash values. " alt="" coords="785,332,956,373"/>
<area shape="rect" id="node15" href="structfoedus_1_1cache_1_1CacheBucket.html#aad7099f48418a335a80260a664bf2f02" title="foedus::cache::CacheBucket\l::get_tag" alt="" coords="776,136,965,177"/>
<area shape="rect" id="node16" href="structfoedus_1_1cache_1_1CacheRefCount.html#af555d7665e995d8e65f315c708d28daa" title="foedus::cache::CacheRefCount\l::increment" alt="" coords="770,201,971,243"/>
<area shape="rect" id="node17" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="785,5,957,47"/>
<area shape="rect" id="node6" href="structfoedus_1_1cache_1_1HashFunc.html#a19737fa3c91676f9c85536f5928b7501" title="Returns a bucket number the given snapshot page ID should belong to. " alt="" coords="1050,395,1221,436"/>
<area shape="rect" id="node7" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="1283,393,1461,435"/>
<area shape="rect" id="node8" href="structfoedus_1_1cache_1_1HashFunc.html#aa9020cb1e5915b6777d089521ef618a9" title="Returns a hash value for the given snapshot page ID. " alt="" coords="1287,524,1457,565"/>
<area shape="rect" id="node11" href="structfoedus_1_1assorted_1_1ConstDiv.html#afbfa08664902f9b633edbd395706b230" title="Calculate remainder. " alt="" coords="1283,328,1461,369"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="1513,619,1713,675"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1519,485,1707,541"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1049,5,1221,47"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="784,463,957,504"/>
<area shape="rect" id="node24" href="structfoedus_1_1cache_1_1CacheBucket.html#aaa52396996e73a08cace2a2dcef82ffb" title="foedus::cache::CacheBucket\l::reset" alt="" coords="776,528,965,569"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="758,761,983,803"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="749,892,992,933"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="1283,772,1461,813"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="1046,769,1225,811"/>
<area shape="rect" id="node30" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="1042,612,1229,653"/>
<area shape="rect" id="node31" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="1279,459,1465,500"/>
<area shape="rect" id="node32" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="1297,655,1447,696"/>
<area shape="rect" id="node33" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="1297,589,1447,631"/>
<area shape="rect" id="node35" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1283,937,1461,979"/>
<area shape="rect" id="node36" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="1046,937,1225,979"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="765,827,976,868"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="517,956,679,997"/>
<area shape="rect" id="node44" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="757,1060,985,1101"/>
<area shape="rect" id="node45" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="497,1199,699,1240"/>
<area shape="rect" id="node46" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="793,1125,948,1167"/>
<area shape="rect" id="node49" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="784,1323,957,1364"/>
<area shape="rect" id="node50" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="769,1191,972,1247"/>
<area shape="rect" id="node47" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1058,1195,1213,1236"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1040,1125,1231,1167"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a4a95ef1bd710a66e0c24df998f881d04_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="237,507,421,549"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="237,392,421,448"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="469,741,628,782"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="473,507,624,549"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="686,1249,859,1305"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="928,223,1141,265"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="683,209,862,265"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="683,500,862,556"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="948,949,1121,1005"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="690,580,855,636"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="691,420,855,476"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1490,791,1663,847"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="948,1209,1121,1265"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="948,1289,1121,1345"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="941,1473,1128,1529"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1200,1425,1421,1481"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1732,757,1905,813"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1224,1345,1397,1401"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1221,1185,1400,1241"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1224,1265,1397,1321"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1219,1105,1403,1161"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1469,1353,1684,1394"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="1487,1464,1666,1520"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1732,1212,1905,1268"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1208,253,1413,294"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1486,405,1667,461"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1495,485,1659,541"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1495,5,1659,61"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1475,85,1678,141"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1487,165,1666,221"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1479,245,1675,301"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1485,325,1668,381"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="942,500,1127,556"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="942,420,1127,476"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa649c9d971f17fa39848d4c1a1bcb50f" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_read" alt="" coords="1219,500,1402,556"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adeff9d74f6979c888a0155e67466cf2a" title="foedus::storage::array\l::ArrayStoragePimpl::locate\l_record_for_write" alt="" coords="1219,420,1402,476"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1224,711,1397,782"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1224,858,1397,899"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1217,1025,1405,1081"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="942,660,1127,716"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="942,340,1127,396"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="917,741,1152,782"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="947,580,1123,636"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1209,646,1412,687"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="473,324,624,380"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="683,289,862,345"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="686,1037,859,1093"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="676,733,869,789"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="941,1030,1129,1101"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a33a1b8b428cd84029b8b377867197ea4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPimpl::is_simple_mcs_rw </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00282">282</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00338">simple_mcs_rw_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00887">cll_giveup_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00919">cll_release_all_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00876">cll_release_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00909">cll_try_or_acquire_multiple_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00898">cll_try_or_acquire_single_lock()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00980">run_nested_sysxct()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l01049">sysxct_batch_page_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l01021">sysxct_batch_record_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l01036">sysxct_page_lock()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l01007">sysxct_record_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a684b8acdccad684b32c4ea97be009f8e">simple_mcs_rw_</a>; }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a684b8acdccad684b32c4ea97be009f8e"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a684b8acdccad684b32c4ea97be009f8e">foedus::thread::ThreadPimpl::simple_mcs_rw_</a></div><div class="ttdeci">bool simple_mcs_rw_</div><div class="ttdoc">shortcut for engine_->get_options().xct_.mcs_implementation_type_ == simple </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00338">thread_pimpl.hpp:338</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a33a1b8b428cd84029b8b377867197ea4_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a33a1b8b428cd84029b8b377867197ea4_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a33a1b8b428cd84029b8b377867197ea4_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a33a1b8b428cd84029b8b377867197ea4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="257,46,441,87"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="257,594,441,635"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="257,375,441,417"/>
<area shape="rect" id="node18" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="237,130,460,171"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="247,234,451,275"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="257,666,441,707"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac779ce5587967f00b09325337578dd24" title="foedus::thread::ThreadPimpl\l::sysxct_batch_page_locks" alt="" coords="257,787,441,829"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7234ffc46e46d480cedc556f0800da6" title="foedus::thread::ThreadPimpl\l::sysxct_batch_record_locks" alt="" coords="254,1023,443,1065"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a2cd3cb727c6e211c8e6a72ccb00f3854" title="foedus::thread::ThreadPimpl\l::sysxct_page_lock" alt="" coords="257,1199,441,1241"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a056563bc302fb45ad684a7fa28d00161" title="foedus::thread::ThreadPimpl\l::sysxct_record_lock" alt="" coords="257,1362,441,1403"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="531,39,707,81"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="823,5,974,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="815,85,982,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1097,93,1231,134"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="544,594,695,635"/>
<area shape="rect" id="node12" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="516,529,723,570"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="779,313,1019,354"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1309,254,1504,295"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="1067,313,1261,354"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="528,239,711,281"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="823,232,974,288"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="801,166,996,207"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1067,181,1261,222"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="508,105,731,146"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="517,170,721,211"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="544,671,695,713"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1077,913,1251,969"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="812,429,985,485"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1077,663,1251,719"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1072,429,1256,485"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="812,509,985,565"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="812,880,985,936"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="809,589,988,645"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="808,669,989,725"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="807,749,990,805"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1Thread.html#a2573902a53ca92a0cf7e19113d5b5979" title="Takes a bunch of page locks for a sysxct running under this thread. " alt="" coords="529,1011,710,1053"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="812,1011,985,1053"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="812,1077,985,1118"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#a664a76eb577003d4d4c0d417ecb014cc" title="Takes a bunch of locks in the same page for a sysxct running under this thread. " alt="" coords="525,1114,714,1155"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ae4789d8489571fa435c97a03b4f93619" title="Subroutine to lock existing records in target_. " alt="" coords="809,1143,988,1199"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="1077,1178,1251,1219"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#a7ac249b3b032751e9bf0903ad7e45255" title="Takes a page lock in the same page for a sysxct running under this thread. " alt="" coords="544,1298,695,1339"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="817,1324,981,1380"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="1331,1291,1483,1347"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="812,1405,985,1446"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="801,1470,996,1511"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="812,1535,985,1577"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="1077,1324,1251,1380"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#a383dee9d2971403e9bc3bef4a2d33d44" title="Takes a lock for a sysxct running under this thread. " alt="" coords="544,1502,695,1543"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28f34cbb16ac60050a2e42332058b3eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPimpl::is_stop_requested </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00158">158</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00382">control_block_</a>, <a class="el" href="thread__id_8hpp_source.html#l00215">foedus::thread::kWaitingForTerminate</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00046">foedus::assorted::memory_fence_acquire()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00110">foedus::thread::ThreadControlBlock::status_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                          {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">assorted::memory_fence_acquire</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">status_</a> == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a949e36ce3a330b30392c68f53455ab4d">kWaitingForTerminate</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a949e36ce3a330b30392c68f53455ab4d"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a949e36ce3a330b30392c68f53455ab4d">foedus::thread::kWaitingForTerminate</a></div><div class="ttdoc">The thread is requested to terminate. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00215">thread_id.hpp:215</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a21f70ae9d374cc919ab50bb410172415"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">foedus::thread::ThreadControlBlock::status_</a></div><div class="ttdeci">ThreadStatus status_</div><div class="ttdoc">Impersonation status of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00110">thread_pimpl.hpp:110</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaf84f9944a16c5848f69beacdfeedf939"><div class="ttname"><a href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">foedus::assorted::memory_fence_acquire</a></div><div class="ttdeci">void memory_fence_acquire()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acquire). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00046">atomic_fences.hpp:46</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="237,5,411,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a28f34cbb16ac60050a2e42332058b3eb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb" title="Main routine of the worker thread. " alt="" coords="237,5,421,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="469,5,653,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28d4f2f16808e20d2d174f12ff1c7317"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPimpl::is_volatile_page_retired </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subroutine of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. ">collect_retired_volatile_page()</a> just for assertion. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00818">818</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">global_volatile_page_resolver_</a>, <a class="el" href="page_8hpp_source.html#l00140">foedus::storage::PageVersion::is_retired()</a>, <a class="el" href="page_8hpp_source.html#l00272">foedus::storage::PageHeader::page_version_</a>, and <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00777">collect_retired_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                                                                         {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  storage::Page* page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(ptr);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <span class="keywordflow">return</span> page-&gt;<a class="code" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">get_header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca">is_retired</a>();</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_a56250946b7719a7bd15532d211eac88f"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">foedus::memory::GlobalVolatilePageResolver::resolve_offset</a></div><div class="ttdeci">storage::Page * resolve_offset(uint8_t numa_node, PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">Resolves offset plus NUMA node ID to storage::Page*. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00120">page_resolver.hpp:120</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a61318d7aab5c4ca7334ec05f8de168ca"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca">foedus::storage::PageVersion::is_retired</a></div><div class="ttdeci">bool is_retired() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00140">page.hpp:140</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a44c12d47d4b478bac2076df4760fc990"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">foedus::storage::PageHeader::page_version_</a></div><div class="ttdeci">PageVersion page_version_</div><div class="ttdoc">Used in several storage types as concurrency control mechanism for the page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00272">page.hpp:272</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Page_html_abee44ea141b30e613f3de40831d6ff8e"><div class="ttname"><a href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e">foedus::storage::Page::get_header</a></div><div class="ttdeci">PageHeader &amp; get_header()</div><div class="ttdoc">At least the basic header exists in all pages. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00336">page.hpp:336</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="759,98,909,140"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca" title="foedus::storage::PageVersion\l::is_retired" alt="" coords="243,46,435,88"/>
<area shape="rect" id="node5" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="237,164,440,205"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ab07c3c3d030fab04f79b59dee83ecd2e" title="foedus::storage::PageVersion\lStatus::is_retired" alt="" coords="493,46,685,88"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="512,164,667,205"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="503,229,676,270"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="488,295,691,351"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="757,298,911,340"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="753,164,915,205"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="739,229,929,270"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a28d4f2f16808e20d2d174f12ff1c7317_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="237,136,429,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="477,136,669,177"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a31564163126364e4810f2f00398afd15" title="foedus::storage::masstree\l::Adopt::adopt_case_a" alt="" coords="717,71,891,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="717,5,891,47"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1masstree.html#a554f6fb34b45687df09df15076aac190" title="foedus::storage::masstree\l::grow_case_a_common" alt="" coords="717,201,891,243"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="717,136,891,177"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#a96de88f03cf5683529e00d2c209a07e9" title="The core implementation after locking relevant pages and acquiring free page resource. " alt="" coords="717,267,891,323"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="949,39,1123,80"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="949,136,1123,177"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="939,201,1133,243"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="949,275,1123,316"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3c43ac83a4cdcc3e48d8b125dfcff963"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::on_snapshot_cache_miss </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> *&#160;</td>
          <td class="paramname"><em>pool_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00741">741</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="page__pool_8cpp_source.html#l00119">foedus::memory::PagePool::get_base()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00221">foedus::memory::NumaCoreMemory::grab_free_snapshot_page()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00325">holder_</a>, <a class="el" href="error__code_8hpp_source.html#l00192">foedus::kErrorCodeCacheNoFreePages</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00512">read_a_snapshot_page()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00230">foedus::memory::NumaCoreMemory::release_free_snapshot_page()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00351">snapshot_page_pool_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                                     {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// grab a buffer page to read into.</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a">grab_free_snapshot_page</a>();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <span class="keywordflow">if</span> (offset == 0) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// TASK(Hideaki) First, we have to make sure this doesn&#39;t happen often (cleaner&#39;s work).</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// Second, when this happens, we have to do eviction now, but probably after aborting the xct.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Could not grab free snapshot page while cache miss. thread=&quot;</span> &lt;&lt; *<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, page_id=&quot;</span> &lt;&lt; assorted::Hex(page_id);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ab6e70410f19ae9632262f6394f3354ff">kErrorCodeCacheNoFreePages</a>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  storage::Page* new_page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">snapshot_page_pool_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">get_base</a>() + offset;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> read_result = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">read_a_snapshot_page</a>(page_id, new_page);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordflow">if</span> (read_result != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Failed to read a snapshot page. thread=&quot;</span> &lt;&lt; *<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">holder_</a></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, page_id=&quot;</span> &lt;&lt; assorted::Hex(page_id);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464">release_free_snapshot_page</a>(offset);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">return</span> read_result;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  *pool_offset = offset;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a3d583a33e85e1a33568fa04b409ae2ca"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca">foedus::thread::ThreadPimpl::read_a_snapshot_page</a></div><div class="ttdeci">ErrorCode read_a_snapshot_page(storage::SnapshotPagePointer page_id, storage::Page *buffer) __attribute__((always_inline))</div><div class="ttdoc">Read a snapshot page using the thread-local file descriptor set. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00512">thread_pimpl.hpp:512</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1c0d1b2cce940cc22285a906b1076bd3"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1c0d1b2cce940cc22285a906b1076bd3">foedus::thread::ThreadPimpl::snapshot_page_pool_</a></div><div class="ttdeci">memory::PagePool * snapshot_page_pool_</div><div class="ttdoc">shorthand for node_memory_->get_snapshot_pool() </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00351">thread_pimpl.hpp:351</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_af9db36a92eb5116e01545d73cc7e1ab8"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8">foedus::memory::PagePool::get_base</a></div><div class="ttdeci">storage::Page * get_base() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00119">page_pool.cpp:119</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ab6e70410f19ae9632262f6394f3354ff"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ab6e70410f19ae9632262f6394f3354ff">foedus::kErrorCodeCacheNoFreePages</a></div><div class="ttdoc">0x0901 : "SPCACHE: Not enough free snapshot pages. Cleaner is not catching up" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00192">error_code.hpp:192</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa7cc8b97ee07c0a860f0c5a3247d6ace"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa7cc8b97ee07c0a860f0c5a3247d6ace">foedus::thread::ThreadPimpl::holder_</a></div><div class="ttdeci">Thread *const holder_</div><div class="ttdoc">The public object that holds this pimpl object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00325">thread_pimpl.hpp:325</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a7ea5067e450fa872240cb010ddb65464"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464">foedus::memory::NumaCoreMemory::release_free_snapshot_page</a></div><div class="ttdeci">void release_free_snapshot_page(PagePoolOffset offset)</div><div class="ttdoc">Same, except it&#39;s for snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00230">numa_core_memory.cpp:230</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ac3e2f6d24f2b0f5c04d2cde48db11f6a"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a">foedus::memory::NumaCoreMemory::grab_free_snapshot_page</a></div><div class="ttdeci">PagePoolOffset grab_free_snapshot_page()</div><div class="ttdoc">Same, except it&#39;s for snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00221">numa_core_memory.cpp:221</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#af9db36a92eb5116e01545d73cc7e1ab8" title="foedus::memory::PagePool\l::get_base" alt="" coords="269,19,448,60"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a" title="Same, except it&#39;s for snapshot page. " alt="" coords="246,84,471,125"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="267,151,451,192"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464" title="Same, except it&#39;s for snapshot page. " alt="" coords="237,332,480,373"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="773,20,952,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="532,83,711,124"/>
<area shape="rect" id="node7" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="528,151,715,192"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="763,217,963,273"/>
<area shape="rect" id="node9" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="769,325,956,367"/>
<area shape="rect" id="node12" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="787,151,938,192"/>
<area shape="rect" id="node19" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="787,85,938,127"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="1012,413,1200,469"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="1011,333,1201,389"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="1035,71,1177,112"/>
<area shape="rect" id="node14" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="1031,267,1181,308"/>
<area shape="rect" id="node15" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1036,136,1176,177"/>
<area shape="rect" id="node16" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="1031,201,1181,243"/>
<area shape="rect" id="node17" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="1039,5,1173,47"/>
<area shape="rect" id="node18" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="1249,5,1384,47"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="773,391,952,432"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="532,391,711,432"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a3c43ac83a4cdcc3e48d8b125dfcff963_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="237,802,447,843"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="250,904,434,960"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="959,750,1168,791"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="727,699,911,740"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="495,819,679,860"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1468,696,1681,738"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1223,677,1402,733"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1222,968,1403,1024"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1226,888,1399,944"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1216,808,1409,864"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1748,739,1953,780"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2020,921,2201,977"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2029,1001,2193,1057"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2029,1081,2193,1137"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2009,601,2212,657"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2021,681,2200,737"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2013,761,2209,817"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2019,841,2202,897"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1484,966,1665,1022"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1760,950,1941,1006"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1760,870,1941,926"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1481,871,1669,942"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1757,642,1945,698"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1457,804,1692,846"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1749,804,1952,846"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="988,522,1139,563"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1226,144,1399,200"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1223,336,1402,392"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1488,496,1661,552"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1230,416,1395,472"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1231,546,1395,602"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="2024,408,2197,464"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1488,256,1661,312"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1488,176,1661,232"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1481,45,1668,101"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1740,13,1961,69"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1764,256,1937,312"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1761,338,1940,394"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1482,416,1667,472"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1482,336,1667,392"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1764,474,1937,544"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1764,568,1937,610"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="727,816,911,872"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="984,896,1143,938"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="988,816,1139,872"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="507,984,667,1040"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="495,904,679,960"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="743,954,894,1010"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="974,962,1153,1018"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab1611b1e29b58ee7aaf3b88cc57f9343"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> * foedus::thread::ThreadPimpl::place_a_new_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>&#160;</td>
          <td class="paramname"><em>new_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">storage::DualPagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subroutine of <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. ">install_a_volatile_page()</a> and <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. ">follow_page_pointer()</a> to atomically place the given new volatile page created by this thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">new_offset</td><td>offset of the new volatile page created by this thread </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pointer</td><td>the address to place a new pointer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>placed_page point to the volatile page that is actually placed.</dd></dl>
<p>Due to concurrent threads, this method might discard the given volatile page and pick a page placed by another thread. In that case, new_offset will be released to the free pool. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00317">317</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">global_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00330">id_</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00356">local_volatile_page_resolver_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00333">numa_node_</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00213">foedus::memory::NumaCoreMemory::release_free_volatile_page()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00064">foedus::memory::LocalPageResolver::resolve_offset_newpage()</a>, <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00292">install_a_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                                   {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    storage::VolatilePagePointer cur_pointer = pointer-&gt;volatile_pointer_;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    storage::VolatilePagePointer new_pointer;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    new_pointer.set(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a>, new_offset);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// atomically install it.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (cur_pointer.is_null() &amp;&amp;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      assorted::raw_atomic_compare_exchange_strong&lt;uint64_t&gt;(</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        &amp;(pointer-&gt;volatile_pointer_.word),</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        &amp;(cur_pointer.word),</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        new_pointer.word)) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// successfully installed</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">local_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(new_offset);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">if</span> (!cur_pointer.is_null()) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="comment">// someone else has installed it!</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Interesting. Lost race to install a volatile page. ver-b. Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, local offset=&quot;</span> &lt;&lt; new_offset &lt;&lt; <span class="stringliteral">&quot; winning=&quot;</span> &lt;&lt; cur_pointer;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a">release_free_volatile_page</a>(new_offset);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        storage::Page* placed_page = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">resolve_offset</a>(cur_pointer);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(placed_page-&gt;get_header().snapshot_ == <span class="keyword">false</span>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> placed_page;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="comment">// This is probably a bug, but we might only change mod count for some reason.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Very interesting. Lost race but volatile page not installed. Thread-&quot;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;          &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot;, local offset=&quot;</span> &lt;&lt; new_offset;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_a56250946b7719a7bd15532d211eac88f"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f">foedus::memory::GlobalVolatilePageResolver::resolve_offset</a></div><div class="ttdeci">storage::Page * resolve_offset(uint8_t numa_node, PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">Resolves offset plus NUMA node ID to storage::Page*. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00120">page_resolver.hpp:120</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_a6c9bf7d6b21ac33a61d6f7176023ea3a"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a">foedus::memory::NumaCoreMemory::release_free_volatile_page</a></div><div class="ttdeci">void release_free_volatile_page(PagePoolOffset offset)</div><div class="ttdoc">Returns one free volatile page to local page pool. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00213">numa_core_memory.cpp:213</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_aa9d2266686c3a66678b37241a3ac434f"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">foedus::memory::LocalPageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00064">page_resolver.hpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0dc235d99dfaac00446b613f409de2ab"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">foedus::thread::ThreadPimpl::numa_node_</a></div><div class="ttdeci">const ThreadGroupId numa_node_</div><div class="ttdoc">Node this thread belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00333">thread_pimpl.hpp:333</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0b56e96991f936feba47c29f61c0fbcb"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0b56e96991f936feba47c29f61c0fbcb">foedus::thread::ThreadPimpl::local_volatile_page_resolver_</a></div><div class="ttdeci">memory::LocalPageResolver local_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00356">thread_pimpl.hpp:356</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="787,5,937,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="537,279,698,320"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a" title="Returns one free volatile page to local page pool. " alt="" coords="240,337,468,379"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="253,140,455,181"/>
<area shape="rect" id="node14" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="262,403,446,459"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="273,484,435,525"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="781,263,943,304"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="773,353,951,395"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="528,396,707,437"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="540,67,695,108"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="531,213,704,255"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="516,133,719,189"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="785,139,939,180"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="767,71,957,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ab1611b1e29b58ee7aaf3b88cc57f9343_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="472,1481,656,1522"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="240,1605,424,1661"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="472,1685,656,1741"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="240,1539,424,1581"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="718,801,869,842"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="941,757,1114,813"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1183,434,1396,475"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="938,651,1117,707"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="938,1299,1117,1355"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1203,900,1376,956"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="945,1452,1110,1508"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="945,364,1109,420"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1739,1143,1912,1199"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1203,768,1376,824"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1203,688,1376,744"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1196,551,1383,607"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1455,473,1676,529"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1975,1108,2148,1164"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1479,628,1652,684"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1476,788,1655,844"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1479,708,1652,764"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1473,868,1657,924"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="1736,565,1915,621"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1975,749,2148,805"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1463,333,1668,374"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1735,325,1916,381"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1743,405,1907,461"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1743,485,1907,541"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1724,5,1927,61"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1736,85,1915,141"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1727,165,1923,221"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1734,245,1917,301"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1197,1379,1382,1435"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1197,1299,1382,1355"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1479,1065,1652,1135"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1479,999,1652,1041"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1471,1211,1659,1267"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1197,1605,1382,1661"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1197,1685,1382,1741"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1172,1539,1407,1581"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1201,1459,1377,1515"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="489,1605,639,1661"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="704,1605,883,1661"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="718,1685,869,1741"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="938,1685,1117,1741"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="714,1539,873,1581"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="941,1211,1114,1267"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="931,1532,1124,1588"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1195,1203,1383,1274"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3d583a33e85e1a33568fa04b409ae2ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::read_a_snapshot_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a snapshot page using the thread-local file descriptor set. </p>
<dl class="section attention"><dt>Attention</dt><dd>this method always READs, so no caching done. Actually, this method is used from caching module when cache miss happens. To utilize cache, use <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. ">find_or_read_a_snapshot_page()</a>. </dd></dl>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00512">512</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="snapshot__file__set_8cpp_source.html#l00095">foedus::cache::SnapshotFileSet::read_page()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00380">snapshot_file_set_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00741">on_snapshot_cache_miss()</a>, and <a class="el" href="thread_8cpp_source.html#l00084">foedus::thread::Thread::read_a_snapshot_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                       {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">snapshot_file_set_</a>.<a class="code" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a">read_page</a>(page_id, buffer);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a30fc7377de865406c4174bcd7be6b616"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">foedus::thread::ThreadPimpl::snapshot_file_set_</a></div><div class="ttdeci">cache::SnapshotFileSet snapshot_file_set_</div><div class="ttdoc">Each threads maintains a private set of snapshot file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00380">thread_pimpl.hpp:380</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1SnapshotFileSet_html_ad7ea1e9815cd47c3175371d37974526a"><div class="ttname"><a href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a">foedus::cache::SnapshotFileSet::read_page</a></div><div class="ttdeci">ErrorCode read_page(storage::SnapshotPagePointer page_id, void *out)</div><div class="ttdef"><b>Definition:</b> <a href="snapshot__file__set_8cpp_source.html#l00095">snapshot_file_set.cpp:95</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ad7ea1e9815cd47c3175371d37974526a" title="foedus::cache::SnapshotFile\lSet::read_page" alt="" coords="237,146,424,187"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="472,23,672,79"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="479,103,665,145"/>
<area shape="rect" id="node7" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="497,286,647,327"/>
<area shape="rect" id="node14" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="497,189,647,230"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="721,85,909,141"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="720,5,911,61"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="744,166,887,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="740,427,891,469"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="745,231,885,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="740,362,891,403"/>
<area shape="rect" id="node12" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="748,297,883,338"/>
<area shape="rect" id="node13" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="959,297,1093,338"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a3d583a33e85e1a33568fa04b409ae2ca_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="469,819,679,860"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="482,929,666,985"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="237,877,421,919"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#a29e87db0559d67ac9a942e345e3a2ea2" title="Read a snapshot page using the thread&#45;local file descriptor set. " alt="" coords="247,995,411,1036"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1191,771,1400,812"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="959,720,1143,761"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="727,841,911,883"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1700,704,1913,745"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1455,698,1634,754"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1454,993,1635,1049"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1458,909,1631,965"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1448,829,1641,885"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1980,701,2185,743"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2252,843,2433,899"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2261,923,2425,979"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2261,1003,2425,1059"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2241,1083,2444,1139"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2253,603,2432,659"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2245,683,2441,739"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2251,763,2434,819"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1716,994,1897,1050"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1992,994,2173,1050"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1992,914,2173,970"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1713,899,1901,969"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1989,767,2177,823"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1689,833,1924,875"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1981,848,2184,889"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1220,535,1371,576"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1458,167,1631,223"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1455,407,1634,463"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1720,342,1893,398"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1462,487,1627,543"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1463,567,1627,623"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="2256,346,2429,402"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1720,127,1893,183"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1720,207,1893,263"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1713,47,1900,103"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1972,15,2193,71"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1996,207,2169,263"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1714,422,1899,478"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1714,502,1899,558"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1996,339,2169,409"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="959,837,1143,893"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1216,917,1375,959"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1220,837,1371,893"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="739,1009,899,1065"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="727,929,911,985"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="975,978,1126,1034"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1206,983,1385,1039"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4c828d75840906244fd52c44a793232d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::read_snapshot_pages </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id_begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>page_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read contiguous pages in one shot. </p>
<p>Other than that same as <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3d583a33e85e1a33568fa04b409ae2ca" title="Read a snapshot page using the thread-local file descriptor set. ">read_a_snapshot_page()</a>. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00517">517</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="snapshot__file__set_8cpp_source.html#l00107">foedus::cache::SnapshotFileSet::read_pages()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00380">snapshot_file_set_</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00089">foedus::thread::Thread::read_snapshot_pages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                       {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">snapshot_file_set_</a>.<a class="code" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#aae67209f9aa9d03e45a9934067c8245b">read_pages</a>(page_id_begin, page_count, buffer);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a30fc7377de865406c4174bcd7be6b616"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">foedus::thread::ThreadPimpl::snapshot_file_set_</a></div><div class="ttdeci">cache::SnapshotFileSet snapshot_file_set_</div><div class="ttdoc">Each threads maintains a private set of snapshot file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00380">thread_pimpl.hpp:380</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1SnapshotFileSet_html_aae67209f9aa9d03e45a9934067c8245b"><div class="ttname"><a href="classfoedus_1_1cache_1_1SnapshotFileSet.html#aae67209f9aa9d03e45a9934067c8245b">foedus::cache::SnapshotFileSet::read_pages</a></div><div class="ttdeci">ErrorCode read_pages(storage::SnapshotPagePointer page_id_begin, uint32_t page_count, void *out)</div><div class="ttdoc">Read contiguous pages in one shot. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__file__set_8cpp_source.html#l00107">snapshot_file_set.cpp:107</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#aae67209f9aa9d03e45a9934067c8245b" title="Read contiguous pages in one shot. " alt="" coords="237,146,424,187"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a3c3e7a984303d1ef88e001db1591b1be" title="foedus::storage::extract\l_local_page_id_from_snapshot\l_pointer" alt="" coords="472,23,672,79"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1SnapshotFileSet.html#ae5b153acb9f3115c44a48e10ff2262fb" title="foedus::cache::SnapshotFile\lSet::get_or_open_file" alt="" coords="479,103,665,145"/>
<area shape="rect" id="node7" href="classfoedus_1_1fs_1_1DirectIoFile.html#a5353bbb3b2a815d6c858c8190edeccf4" title="A version that receives a raw pointer that has to be aligned (be careful to use this ver)..." alt="" coords="497,286,647,327"/>
<area shape="rect" id="node14" href="classfoedus_1_1fs_1_1DirectIoFile.html#a35814dfec4dab81d5bb46e453f1993e6" title="Sets the position of the next byte to be written/extracted from/to the stream. " alt="" coords="497,189,647,230"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="721,85,909,141"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c" title="foedus::storage::extract\l_snapshot_id_from_snapshot\l_pointer" alt="" coords="720,5,911,61"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1fs.html#a1a3ea81bf627928d9a5f154986af9c48" title="foedus::fs::is_odirect\l_aligned" alt="" coords="744,166,887,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1d89a9c761a388f13f9b59490b6caa00" title="Whether the file is already and successfully opened. " alt="" coords="740,427,891,469"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="745,231,885,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1fs_1_1DirectIoFile.html#a1c6bff6aafc955fd4c2a8e11e7f41f40" title="Sequentially read the given amount of contents from the current position. " alt="" coords="740,362,891,403"/>
<area shape="rect" id="node12" href="group__DEBUGGING.html#gac7eac15b41b0fab4e689f62d147ce620" title="Wait until the given CPU cycles elapse. " alt="" coords="748,297,883,338"/>
<area shape="rect" id="node13" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="959,297,1093,338"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a4c828d75840906244fd52c44a793232d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a1455488538dd235b4de2730693bfd718" title="Read contiguous pages in one shot. " alt="" coords="237,5,395,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a498a6a07313bf9fbb2c0e3d02f075221"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::run_nested_sysxct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctFunctor.html">xct::SysxctFunctor</a> *&#160;</td>
          <td class="paramname"><em>functor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_retries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sysxct-related. </p>
<p>Impl. mostly just forwarding to SysxctLockList. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00980">980</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8cpp_source.html#l00930">cll_get_max_locked_id()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00375">current_xct_</a>, <a class="el" href="xct_8hpp_source.html#l00142">foedus::xct::Xct::get_sysxct_workspace()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00496">foedus::xct::run_nested_sysxct_impl()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00952">foedus::thread::Thread::run_nested_sysxct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                        {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  xct::SysxctWorkspace* workspace = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">current_xct_</a>.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54">get_sysxct_workspace</a>();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a> enclosing_max_lock_id = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761">cll_get_max_locked_id</a>();</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  ThreadPimplCllReleaseAllFunctor release_functor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwSimpleBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618">xct::run_nested_sysxct_impl</a>(</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        functor,</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;        adaptor,</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        max_retries,</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        workspace,</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        enclosing_max_lock_id,</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        release_functor);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwExtendedBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618">xct::run_nested_sysxct_impl</a>(</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        functor,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;        adaptor,</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        max_retries,</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;        workspace,</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        enclosing_max_lock_id,</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        release_functor);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  }</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;}</div>
<div class="ttc" id="group__SYSXCT_html_gaf49955c6d4efe3d92e6e09b4ff890618"><div class="ttname"><a href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618">foedus::xct::run_nested_sysxct_impl</a></div><div class="ttdeci">ErrorCode run_nested_sysxct_impl(SysxctFunctor *functor, MCS_ADAPTOR mcs_adaptor, uint32_t max_retries, SysxctWorkspace *workspace, UniversalLockId enclosing_max_lock_id, ENCLOSURE_RELEASE_ALL_LOCKS_FUNCTOR enclosure_release_all_locks_functor)</div><div class="ttdoc">Runs a system transaction nested in a user transaction. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00496">sysxct_impl.hpp:496</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aca66ae9959651b7c6fa86a75db287f54"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54">foedus::xct::Xct::get_sysxct_workspace</a></div><div class="ttdeci">SysxctWorkspace * get_sysxct_workspace() const </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00142">xct.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a26c718d661316827c8efd219b743e227"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a26c718d661316827c8efd219b743e227">foedus::thread::ThreadPimpl::current_xct_</a></div><div class="ttdeci">xct::Xct current_xct_</div><div class="ttdoc">Current transaction this thread is conveying. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00375">thread_pimpl.hpp:375</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a6ff575610172c3b1ed337665a277f761"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761">foedus::thread::ThreadPimpl::cll_get_max_locked_id</a></div><div class="ttdeci">xct::UniversalLockId cll_get_max_locked_id() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00930">thread_pimpl.cpp:930</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761" title="foedus::thread::ThreadPimpl\l::cll_get_max_locked_id" alt="" coords="237,37,421,79"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54" title="foedus::xct::Xct::get\l_sysxct_workspace" alt="" coords="260,103,399,144"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,168,421,209"/>
<area shape="rect" id="node9" href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618" title="Runs a system transaction nested in a user transaction. " alt="" coords="250,233,409,275"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="503,5,641,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a398ec264786992d102b8edd74d5767b3" title="foedus::xct::CurrentLock\lList::get_max_locked_id" alt="" coords="490,71,654,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="723,71,887,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="935,71,1099,112"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1SysxctFunctor.html#a383a9cfd5d8fa5caf45c7ffb6dc05535" title="Execute the system transaction. " alt="" coords="469,241,675,267"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a498a6a07313bf9fbb2c0e3d02f075221_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="237,899,388,941"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="923,1243,1096,1299"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="440,552,613,608"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="673,320,846,376"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="667,819,851,875"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="440,385,613,441"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="440,892,613,948"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1195,1257,1373,1313"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="436,1395,617,1451"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1193,1737,1375,1793"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1197,1177,1371,1233"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a70b1c5e023fa0aac150e7b607e37727c" title="Deliberately causes splits under the volatile root of first layer, or &quot;fatify&quot; it. " alt="" coords="1451,1177,1624,1233"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="923,152,1096,208"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="670,552,849,608"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1177,451,1391,493"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1185,614,1383,655"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1197,232,1371,288"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1197,5,1371,61"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1165,86,1403,127"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1169,337,1399,378"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1191,152,1377,208"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="923,552,1096,608"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="923,632,1096,688"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="923,232,1096,288"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="915,312,1104,368"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="912,392,1107,448"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="916,472,1103,528"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="915,712,1104,768"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="903,86,1115,127"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="901,21,1117,62"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="923,872,1096,928"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="923,792,1096,848"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="673,1126,846,1197"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="673,899,846,941"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="665,965,853,1021"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="673,1045,846,1101"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a3ca58d4acdbc13f9cfd341d95f45caa2" title="foedus::storage::masstree\l::MasstreeCursor::open\l_normalized" alt="" coords="923,952,1096,1008"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="918,1032,1101,1088"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="923,1112,1096,1168"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1464,1257,1611,1313"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="669,1401,850,1457"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="919,1492,1100,1548"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="919,1401,1100,1457"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1193,1337,1375,1393"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1202,1417,1366,1473"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1202,1497,1366,1553"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1183,1577,1385,1633"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1186,1657,1382,1713"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1463,1737,1612,1793"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad6c2ae1c63499d211f31d3165eeea3cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::set_thread_schedule </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initializes the thread's policy/priority </p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00239">239</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00330">id_</a>, <a class="el" href="assorted__func_8cpp_source.html#l00067">foedus::assorted::os_error()</a>, <a class="el" href="thread__options_8hpp_source.html#l00053">foedus::thread::ThreadOptions::overwrite_thread_schedule_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00366">raw_thread_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00368">raw_thread_set_</a>, <a class="el" href="assorted__func_8hpp_source.html#l00256">SPINLOCK_WHILE</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, <a class="el" href="thread__options_8hpp_source.html#l00056">foedus::thread::ThreadOptions::thread_policy_</a>, and <a class="el" href="thread__options_8hpp_source.html#l00058">foedus::thread::ThreadOptions::thread_priority_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                      {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// this code totally assumes pthread. maybe ifdef to handle Windows.. later!</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="group__ASSORTED.html#gae932f87b60cbd230347151ccf33eed86">SPINLOCK_WHILE</a>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad8236666d8fca6674334d0d166218e5c">raw_thread_set_</a> == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// as the copy to raw_thread_ might happen after the launched thread getting here,</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">// we check it and spin. This is mainly to make valgrind happy.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  pthread_t handle = <span class="keyword">static_cast&lt;</span>pthread_t<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">raw_thread_</a>.native_handle());</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">int</span> policy;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  sched_param param;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordtype">int</span> ret = ::pthread_getschedparam(handle, &amp;policy, &amp;param);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (ret) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;WTF. pthread_getschedparam() failed: error=&quot;</span> &lt;&lt; <a class="code" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">assorted::os_error</a>();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keyword">const</span> ThreadOptions&amp; opt = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// output the following logs just once.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> == 0) {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;The default thread policy=&quot;</span> &lt;&lt; policy &lt;&lt; <span class="stringliteral">&quot;, priority=&quot;</span> &lt;&lt; param.__sched_priority;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (opt.overwrite_thread_schedule_) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Overwriting thread policy=&quot;</span> &lt;&lt; opt.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aad75e714583f8ece41a49e47930d0dcb">thread_policy_</a></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;, priority=&quot;</span> &lt;&lt; opt.thread_priority_;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keywordflow">if</span> (opt.overwrite_thread_schedule_) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    policy = opt.thread_policy_;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    param.__sched_priority = opt.thread_priority_;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">int</span> priority_max = ::sched_get_priority_max(policy);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">int</span> priority_min = ::sched_get_priority_min(policy);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (opt.thread_priority_ &gt; priority_max) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Thread priority too large. using max value: &quot;</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        &lt;&lt; opt.thread_priority_ &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span> &lt;&lt; priority_max;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      param.__sched_priority = priority_max;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (opt.thread_priority_ &lt; priority_min) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Thread priority too small. using min value: &quot;</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        &lt;&lt; opt.thread_priority_ &lt;&lt; <span class="stringliteral">&quot;-&gt;&quot;</span> &lt;&lt; priority_min;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      param.__sched_priority = priority_min;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">int</span> ret2 = ::pthread_setschedparam(handle, policy, &amp;param);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (ret2 == EPERM) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="comment">// this is a quite common mis-configuratrion, so let&#39;s output a friendly error message.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="comment">// also, not fatal. keep running, as this only affects performance.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;=========   ATTENTION: Thread-scheduling Permission Error!!!!   ==========\n&quot;</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="stringliteral">&quot; pthread_setschedparam() failed due to permission error. This means you have\n&quot;</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="stringliteral">&quot; not set appropriate rtprio to limits.conf. You cannot set priority higher than what\n&quot;</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="stringliteral">&quot; OS allows. Configure limits.conf (eg. &#39;kimurhid - rtprio 99&#39;) or modify ThreadOptions.\n&quot;</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="stringliteral">&quot;=============================               ATTENTION              ======================&quot;</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret2) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;WTF pthread_setschedparam() failed: error=&quot;</span> &lt;&lt; <a class="code" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">assorted::os_error</a>();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a12c3db0e7d4015e8eaddbae71c90ab7e"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">foedus::thread::ThreadPimpl::raw_thread_</a></div><div class="ttdeci">std::thread raw_thread_</div><div class="ttdoc">Encapsulates raw thread object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00366">thread_pimpl.hpp:366</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ad8236666d8fca6674334d0d166218e5c"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad8236666d8fca6674334d0d166218e5c">foedus::thread::ThreadPimpl::raw_thread_set_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; raw_thread_set_</div><div class="ttdoc">Just to make sure raw_thread_ is set. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00368">thread_pimpl.hpp:368</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gae932f87b60cbd230347151ccf33eed86"><div class="ttname"><a href="group__ASSORTED.html#gae932f87b60cbd230347151ccf33eed86">SPINLOCK_WHILE</a></div><div class="ttdeci">#define SPINLOCK_WHILE(x)</div><div class="ttdoc">A macro to busy-wait (spinlock) with occasional pause. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00256">assorted_func.hpp:256</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaaa260096daf8620266c2799d1f5a0270"><div class="ttname"><a href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270">foedus::assorted::os_error</a></div><div class="ttdeci">std::string os_error()</div><div class="ttdoc">Thread-safe strerror(errno). </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8cpp_source.html#l00067">assorted_func.cpp:67</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aad75e714583f8ece41a49e47930d0dcb"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aad75e714583f8ece41a49e47930d0dcb">foedus::thread::ThreadOptions::thread_policy_</a></div><div class="ttdeci">ThreadPolicy thread_policy_</div><div class="ttdoc">Thread policy for worker threads. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00056">thread_options.hpp:56</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="240,5,375,47"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="237,71,377,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ad6c2ae1c63499d211f31d3165eeea3cf_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb" title="Main routine of the worker thread. " alt="" coords="237,5,421,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="469,5,653,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a27b0a7e1a8f27975fc350cab3d32be04"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename FUNC &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ThreadPimpl::switch_mcs_impl </td>
          <td>(</td>
          <td class="paramtype">FUNC&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MCS locks methods. </p>
<p>These just delegate to xct_mcs_impl. Comments ommit as they are the same as xct_mcs_impl's. </p>

</div>
</div>
<a class="anchor" id="ac779ce5587967f00b09325337578dd24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::sysxct_batch_page_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *&#160;</td>
          <td class="paramname"><em>sysxct_workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lock_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l01049">1049</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00460">foedus::xct::SysxctWorkspace::lock_list_</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00452">foedus::xct::SysxctWorkspace::running_sysxct_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00971">foedus::thread::Thread::sysxct_batch_page_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                       {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(sysxct_workspace-&gt;running_sysxct_);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keyword">auto</span>&amp; sysxct_lock_list = sysxct_workspace-&gt;lock_list_;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwSimpleBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.batch_request_page_locks(adaptor, lock_count, pages);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwExtendedBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.batch_request_page_locks(adaptor, lock_count, pages);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  }</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_ac779ce5587967f00b09325337578dd24_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a2573902a53ca92a0cf7e19113d5b5979" title="Takes a bunch of page locks for a sysxct running under this thread. " alt="" coords="237,39,419,80"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="467,5,640,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="467,71,640,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa7234ffc46e46d480cedc556f0800da6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::sysxct_batch_record_locks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *&#160;</td>
          <td class="paramname"><em>sysxct_workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lock_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> **&#160;</td>
          <td class="paramname"><em>locks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l01021">1021</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00460">foedus::xct::SysxctWorkspace::lock_list_</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00452">foedus::xct::SysxctWorkspace::running_sysxct_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00961">foedus::thread::Thread::sysxct_batch_record_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                              {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(sysxct_workspace-&gt;running_sysxct_);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="keyword">auto</span>&amp; sysxct_lock_list = sysxct_workspace-&gt;lock_list_;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwSimpleBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.batch_request_record_locks(adaptor, page_id, lock_count, locks);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwExtendedBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.batch_request_record_locks(adaptor, page_id, lock_count, locks);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  }</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="243,5,427,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_aa7234ffc46e46d480cedc556f0800da6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a664a76eb577003d4d4c0d417ecb014cc" title="Takes a bunch of locks in the same page for a sysxct running under this thread. " alt="" coords="243,13,432,54"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ae4789d8489571fa435c97a03b4f93619" title="Subroutine to lock existing records in target_. " alt="" coords="480,5,659,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="707,13,880,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2cd3cb727c6e211c8e6a72ccb00f3854"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::sysxct_page_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *&#160;</td>
          <td class="paramname"><em>sysxct_workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l01036">1036</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00460">foedus::xct::SysxctWorkspace::lock_list_</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00452">foedus::xct::SysxctWorkspace::running_sysxct_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00968">foedus::thread::Thread::sysxct_page_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                     {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(sysxct_workspace-&gt;running_sysxct_);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <span class="keyword">auto</span>&amp; sysxct_lock_list = sysxct_workspace-&gt;lock_list_;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwSimpleBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.request_page_lock(adaptor, page);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwExtendedBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.request_page_lock(adaptor, page);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a2cd3cb727c6e211c8e6a72ccb00f3854_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a7ac249b3b032751e9bf0903ad7e45255" title="Takes a page lock in the same page for a sysxct running under this thread. " alt="" coords="237,202,388,243"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="451,5,615,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="901,39,1053,95"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="447,137,620,178"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="436,202,631,243"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="447,267,620,309"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="447,333,620,374"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="447,398,620,439"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="679,5,853,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1101,46,1252,87"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a056563bc302fb45ad684a7fa28d00161"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::thread::ThreadPimpl::sysxct_record_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">xct::SysxctWorkspace</a> *&#160;</td>
          <td class="paramname"><em>sysxct_workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l01007">1007</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00460">foedus::xct::SysxctWorkspace::lock_list_</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00452">foedus::xct::SysxctWorkspace::running_sysxct_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00955">foedus::thread::Thread::sysxct_record_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                            {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(sysxct_workspace-&gt;running_sysxct_);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <span class="keyword">auto</span>&amp; sysxct_lock_list = sysxct_workspace-&gt;lock_list_;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">is_simple_mcs_rw</a>()) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwSimpleBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.request_record_lock(adaptor, page_id, lock);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    ThreadPimplMcsAdaptor&lt; xct::McsRwExtendedBlock &gt; adaptor(<span class="keyword">this</span>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="keywordflow">return</span> sysxct_lock_list.request_record_lock(adaptor, page_id, lock);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  }</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a33a1b8b428cd84029b8b377867197ea4"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4">foedus::thread::ThreadPimpl::is_simple_mcs_rw</a></div><div class="ttdeci">bool is_simple_mcs_rw() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00282">thread_pimpl.hpp:282</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_icgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_a056563bc302fb45ad684a7fa28d00161_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a383dee9d2971403e9bc3bef4a2d33d44" title="Takes a lock for a sysxct running under this thread. " alt="" coords="237,86,388,127"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="446,5,621,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="436,86,631,127"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="447,151,620,193"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="679,5,831,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="879,13,1029,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba7104a56eaff1c1f8c87f5bb03f4045"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPimpl::uninitialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="thread__pimpl_8cpp_source.html#l00122">122</a> of file <a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00345">core_memory_</a>, <a class="el" href="error__stack__batch_8hpp_source.html#l00083">foedus::ErrorStackBatch::emprace_back()</a>, <a class="el" href="page__pool_8hpp_source.html#l00131">foedus::memory::PagePoolOffsetAndEpochChunk::empty()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00320">engine_</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00076">foedus::memory::EngineMemory::get_node_memory()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00253">foedus::memory::NumaCoreMemory::get_retired_volatile_pool_chunk()</a>, <a class="el" href="engine_8cpp_source.html#l00074">foedus::Engine::get_soc_count()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00175">foedus::memory::NumaNodeMemoryRef::get_volatile_pool()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00330">id_</a>, <a class="el" href="thread__id_8hpp_source.html#l00217">foedus::thread::kTerminated</a>, <a class="el" href="thread__id_8hpp_source.html#l00215">foedus::thread::kWaitingForTerminate</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00361">log_buffer_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00347">node_memory_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00366">raw_thread_</a>, <a class="el" href="page__pool_8cpp_source.html#l00134">foedus::memory::PagePool::release()</a>, <a class="el" href="shared__polling_8cpp_source.html#l00100">foedus::soc::SharedPolling::signal()</a>, <a class="el" href="page__pool_8hpp_source.html#l00130">foedus::memory::PagePoolOffsetAndEpochChunk::size()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00349">snapshot_cache_hashtable_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00380">snapshot_file_set_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00110">foedus::thread::ThreadControlBlock::status_</a>, <a class="el" href="error__stack__batch_8hpp_source.html#l00136">SUMMARIZE_ERROR_BATCH</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00071">foedus::thread::ThreadControlBlock::uninitialize()</a>, <a class="el" href="initializable_8hpp_source.html#l00187">foedus::DefaultInitializable::uninitialize()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00104">foedus::thread::ThreadControlBlock::wakeup_cond_</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                          {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  ErrorStackBatch batch;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">status_</a> = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a949e36ce3a330b30392c68f53455ab4d">kWaitingForTerminate</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a0949244710729002906aae535581fa30">wakeup_cond_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626">signal</a>();</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Thread-&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a> &lt;&lt; <span class="stringliteral">&quot; requested to terminate&quot;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">raw_thread_</a>.joinable()) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">raw_thread_</a>.join();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">status_</a> = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12af713804e6a22002bd137b04e90560ca3">kTerminated</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// release retired volatile pages. we do this in thread module rather than in memory module</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// because this has to happen before NumaNodeMemory of any node is uninitialized.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">for</span> (uint16_t node = 0; node &lt; <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">get_soc_count</a>(); ++node) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      memory::PagePoolOffsetAndEpochChunk* chunk</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a>-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5">get_retired_volatile_pool_chunk</a>(node);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      memory::PagePool* volatile_pool</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        = <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node)-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">if</span> (!chunk-&gt;empty()) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        volatile_pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(chunk-&gt;size(), chunk);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunk-&gt;empty());</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  batch.emprace_back(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">snapshot_file_set_</a>.<a class="code" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a>());</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  batch.emprace_back(<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">log_buffer_</a>.<a class="code" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a>());</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">core_memory_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">node_memory_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">snapshot_cache_hashtable_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ac5fa11df3b3c0d7815a36e60edb9b93e">uninitialize</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a>(batch);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a30fc7377de865406c4174bcd7be6b616"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a30fc7377de865406c4174bcd7be6b616">foedus::thread::ThreadPimpl::snapshot_file_set_</a></div><div class="ttdeci">cache::SnapshotFileSet snapshot_file_set_</div><div class="ttdoc">Each threads maintains a private set of snapshot file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00380">thread_pimpl.hpp:380</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ab1e93a62b0a6414f6e30c17969af2340"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1e93a62b0a6414f6e30c17969af2340">foedus::thread::ThreadPimpl::node_memory_</a></div><div class="ttdeci">memory::NumaNodeMemory * node_memory_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00347">thread_pimpl.hpp:347</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a12c3db0e7d4015e8eaddbae71c90ab7e"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a12c3db0e7d4015e8eaddbae71c90ab7e">foedus::thread::ThreadPimpl::raw_thread_</a></div><div class="ttdeci">std::thread raw_thread_</div><div class="ttdoc">Encapsulates raw thread object. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00366">thread_pimpl.hpp:366</a></div></div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_ab14b136a7d26f9f499ab9dc15a45a8cb"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">foedus::DefaultInitializable::uninitialize</a></div><div class="ttdeci">ErrorStack uninitialize() override final</div><div class="ttdoc">Typical implementation of Initializable::uninitialize() that provides uninitialize-once semantics...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00187">initializable.hpp:187</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a0949244710729002906aae535581fa30"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a0949244710729002906aae535581fa30">foedus::thread::ThreadControlBlock::wakeup_cond_</a></div><div class="ttdeci">soc::SharedPolling wakeup_cond_</div><div class="ttdoc">The thread sleeps on this conditional when it has no task. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00104">thread_pimpl.hpp:104</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_af0ac9dbae9481b295a8492c6d9f6c1d5"><div class="ttname"><a href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">foedus::Engine::get_soc_count</a></div><div class="ttdeci">soc::SocId get_soc_count() const </div><div class="ttdoc">Shorthand for get_options().thread_.group_count_. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00074">engine.cpp:74</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_ac5fa11df3b3c0d7815a36e60edb9b93e"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ac5fa11df3b3c0d7815a36e60edb9b93e">foedus::thread::ThreadControlBlock::uninitialize</a></div><div class="ttdeci">void uninitialize()</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00071">thread_pimpl.hpp:71</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a949e36ce3a330b30392c68f53455ab4d"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a949e36ce3a330b30392c68f53455ab4d">foedus::thread::kWaitingForTerminate</a></div><div class="ttdoc">The thread is requested to terminate. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00215">thread_id.hpp:215</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ae1bfd239ac92cface8460b6e1ffa1813"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae1bfd239ac92cface8460b6e1ffa1813">foedus::thread::ThreadPimpl::engine_</a></div><div class="ttdeci">Engine *const engine_</div><div class="ttdoc">MCS locks methods. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00320">thread_pimpl.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ad101b64b189a656c13f92b7fb7bb62d7"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ad101b64b189a656c13f92b7fb7bb62d7">foedus::thread::ThreadPimpl::log_buffer_</a></div><div class="ttdeci">log::ThreadLogBuffer log_buffer_</div><div class="ttdoc">Thread-private log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00361">thread_pimpl.hpp:361</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a802171ff0578875748d20b4e9c8c9463"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">foedus::memory::PagePool::release</a></div><div class="ttdeci">void release(uint32_t desired_release_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Returns the specified number of free pages from the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00134">page_pool.cpp:134</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga67390b22b0afbe5a4938df9847eafda9"><div class="ttname"><a href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a></div><div class="ttdeci">#define SUMMARIZE_ERROR_BATCH(x)</div><div class="ttdoc">This macro calls ErrorStackBatch::summarize() with automatically provided parameters. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack__batch_8hpp_source.html#l00136">error_stack_batch.hpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad0624fe34e52c0904ee449c97f0325c5"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5">foedus::memory::NumaCoreMemory::get_retired_volatile_pool_chunk</a></div><div class="ttdeci">PagePoolOffsetAndEpochChunk * get_retired_volatile_pool_chunk(uint16_t node)</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00253">numa_core_memory.cpp:253</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a21f70ae9d374cc919ab50bb410172415"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">foedus::thread::ThreadControlBlock::status_</a></div><div class="ttdeci">ThreadStatus status_</div><div class="ttdoc">Impersonation status of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00110">thread_pimpl.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a4ef6a79e56890341d855cfca877bf934"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4ef6a79e56890341d855cfca877bf934">foedus::thread::ThreadPimpl::core_memory_</a></div><div class="ttdeci">memory::NumaCoreMemory * core_memory_</div><div class="ttdoc">Private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00345">thread_pimpl.hpp:345</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12af713804e6a22002bd137b04e90560ca3"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12af713804e6a22002bd137b04e90560ca3">foedus::thread::kTerminated</a></div><div class="ttdoc">The thread has terminated (either error or normal, check the result to differentiate them)...</div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00217">thread_id.hpp:217</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a6236b974981b361bfbc25db38c7f9626"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6236b974981b361bfbc25db38c7f9626">foedus::thread::ThreadPimpl::snapshot_cache_hashtable_</a></div><div class="ttdeci">cache::CacheHashtable * snapshot_cache_hashtable_</div><div class="ttdoc">same above </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00349">thread_pimpl.hpp:349</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedPolling_html_ae523f3b3bda39c0c81bfb5cb0d5ad626"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626">foedus::soc::SharedPolling::signal</a></div><div class="ttdeci">void signal()</div><div class="ttdoc">Signal it to let waiters exit. </div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8cpp_source.html#l00100">shared_polling.cpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimpl_aba7104a56eaff1c1f8c87f5bb03f4045_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimpl_aba7104a56eaff1c1f8c87f5bb03f4045_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimpl_aba7104a56eaff1c1f8c87f5bb03f4045_cgraph" id="classfoedus_1_1thread_1_1ThreadPimpl_aba7104a56eaff1c1f8c87f5bb03f4045_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1ErrorStackBatch.html#a1fe18afaafed459feb5c644ba9d7c56e" title="If the given ErrorStack is an error, this method adds it to the end of this batch. " alt="" coords="261,5,425,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#af96624c49b6035bc5b9254c111c0d07d" title="foedus::memory::PagePool\lOffsetAndEpochChunk::empty" alt="" coords="244,71,441,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="275,136,410,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8" title="foedus::memory::EngineMemory\l::get_node_memory" alt="" coords="237,201,448,243"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5" title="foedus::memory::NumaCore\lMemory::get_retired_volatile\l_pool_chunk" alt="" coords="251,267,435,323"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5" title="Shorthand for get_options().thread_.group_count_. " alt="" coords="275,348,410,389"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774" title="foedus::memory::NumaNode\lMemoryRef::get_volatile_pool" alt="" coords="247,413,438,455"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="253,479,432,520"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="254,544,431,585"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#ad99e5b875980b442bf5de61fb022f0ac" title="foedus::memory::PagePool\lOffsetAndEpochChunk::size" alt="" coords="250,609,435,651"/>
<area shape="rect" id="node15" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ac5fa11df3b3c0d7815a36e60edb9b93e" title="foedus::thread::ThreadControl\lBlock::uninitialize" alt="" coords="247,675,439,716"/>
<area shape="rect" id="node17" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="257,740,429,781"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="502,479,681,520"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="505,544,678,585"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="496,610,687,637"/>
<area shape="rect" id="node16" href="classfoedus_1_1soc_1_1SharedMutex.html#a8631c8500a5ab03940e1358f23b654c4" title="foedus::soc::SharedMutex\l::uninitialize" alt="" coords="504,675,679,716"/>
<area shape="rect" id="node18" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="505,740,677,781"/>
<area shape="rect" id="node19" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="505,805,677,847"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a3fdb522ecb7718fc250a2aa80e144361"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">ThreadPimplMcsAdaptor</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00161">161</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a4943b0d8d6fc1321a8517acaf7fd3322"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* foedus::thread::ThreadPimpl::canonical_address_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00392">392</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1dafa88a0e8db9faa2deffb4d893b69f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1thread_1_1ThreadControlBlock.html">ThreadControlBlock</a>* foedus::thread::ThreadPimpl::control_block_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00382">382</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00481">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::add_rw_async_mapping()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00416">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::cancel_new_block()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00420">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_cur_block()</a>, <a class="el" href="thread_8cpp_source.html#l00055">foedus::thread::Thread::get_in_commit_epoch_address()</a>, <a class="el" href="thread_8cpp_source.html#l00062">foedus::thread::Thread::get_snapshot_cache_hits()</a>, <a class="el" href="thread_8cpp_source.html#l00066">foedus::thread::Thread::get_snapshot_cache_misses()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00158">is_stop_requested()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00411">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::issue_new_block()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00423">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::me_waiting()</a>, <a class="el" href="thread_8cpp_source.html#l00118">foedus::thread::operator&lt;&lt;()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00492">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::remove_rw_async_mapping()</a>, <a class="el" href="thread_8cpp_source.html#l00070">foedus::thread::Thread::reset_snapshot_cache_counts()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ef6a79e56890341d855cfca877bf934"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">memory::NumaCoreMemory</a>* foedus::thread::ThreadPimpl::core_memory_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Private memory repository of this thread. </p>
<p><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html" title="Pimpl object of Thread. ">ThreadPimpl</a> does NOT own it, meaning it doesn't call its <a class="el" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize-once semantics...">initialize()</a>/uninitialize(). EngineMemory owns it in terms of that. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00345">345</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00777">collect_retired_volatile_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, <a class="el" href="thread_8cpp_source.html#l00058">foedus::thread::Thread::get_node_memory()</a>, <a class="el" href="thread_8cpp_source.html#l00057">foedus::thread::Thread::get_thread_memory()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00292">install_a_volatile_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00741">on_snapshot_cache_miss()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a26c718d661316827c8efd219b743e227"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1xct_1_1Xct.html">xct::Xct</a> foedus::thread::ThreadPimpl::current_xct_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current transaction this thread is conveying. </p>
<p>Each thread can run at most one transaction at once. If this thread is not conveying any transaction, current_xct_.is_active() == false. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00375">375</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00930">cll_get_max_locked_id()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00887">cll_giveup_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00919">cll_release_all_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00876">cll_release_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00909">cll_try_or_acquire_multiple_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00898">cll_try_or_acquire_single_lock()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread_8cpp_source.html#l00075">foedus::thread::Thread::get_current_xct()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread_8cpp_source.html#l00142">foedus::thread::Thread::is_hot_page()</a>, <a class="el" href="thread_8cpp_source.html#l00076">foedus::thread::Thread::is_running_xct()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00980">run_nested_sysxct()</a>.</p>

</div>
</div>
<a class="anchor" id="ae1bfd239ac92cface8460b6e1ffa1813"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1Engine.html">Engine</a>* const foedus::thread::ThreadPimpl::engine_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MCS locks methods. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00320">320</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00777">collect_retired_volatile_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00789">flush_retired_volatile_page()</a>, <a class="el" href="thread_8cpp_source.html#l00052">foedus::thread::Thread::get_engine()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00767">get_thread_ref()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00239">set_thread_schedule()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="af8414c95aafa7c1780772651ff1e35b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__THREAD.html#gad998a8a9811ac9f9bd7c88bea3ce1d9b">ThreadGlobalOrdinal</a> foedus::thread::ThreadPimpl::global_ordinal_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>globally and contiguously numbered ID of thread </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00336">336</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00054">foedus::thread::Thread::get_thread_global_ordinal()</a>.</p>

</div>
</div>
<a class="anchor" id="a44232f657701896a24ec4a238d0ab226"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> foedus::thread::ThreadPimpl::global_volatile_page_resolver_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Page resolver to convert all page ID to page pointer. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00354">354</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00481">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::add_rw_async_mapping()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, <a class="el" href="thread_8cpp_source.html#l00125">foedus::thread::Thread::get_global_volatile_page_resolver()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00471">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_async_block()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00818">is_volatile_page_retired()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00492">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::remove_rw_async_mapping()</a>.</p>

</div>
</div>
<a class="anchor" id="aa7cc8b97ee07c0a860f0c5a3247d6ace"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">Thread</a>* const foedus::thread::ThreadPimpl::holder_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The public object that holds this pimpl object. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00325">325</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00741">on_snapshot_cache_miss()</a>.</p>

</div>
</div>
<a class="anchor" id="ac881d08d38d5332ddababbef597e67a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> foedus::thread::ThreadPimpl::id_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unique ID of this thread. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00330">330</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00789">flush_retired_volatile_page()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00421">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_my_id()</a>, <a class="el" href="thread_8cpp_source.html#l00053">foedus::thread::Thread::get_thread_id()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00239">set_thread_schedule()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b56e96991f936feba47c29f61c0fbcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a> foedus::thread::ThreadPimpl::local_volatile_page_resolver_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Page resolver to convert only local page ID to page pointer. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00356">356</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, <a class="el" href="thread_8cpp_source.html#l00080">foedus::thread::Thread::get_local_volatile_page_resolver()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00292">install_a_volatile_page()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>.</p>

</div>
</div>
<a class="anchor" id="ad101b64b189a656c13f92b7fb7bb62d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html">log::ThreadLogBuffer</a> foedus::thread::ThreadPimpl::log_buffer_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread-private log buffer. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00361">361</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00078">foedus::thread::Thread::get_thread_log_buffer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a052ae65bb017f9f77741db58bcbcf936"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html">xct::McsRwAsyncMapping</a>* foedus::thread::ThreadPimpl::mcs_rw_async_mappings_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00390">390</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00481">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::add_rw_async_mapping()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00492">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::remove_rw_async_mapping()</a>.</p>

</div>
</div>
<a class="anchor" id="a0f8e120dfd26566418bbb9057f8c5b20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html">xct::McsRwExtendedBlock</a>* foedus::thread::ThreadPimpl::mcs_rw_extended_blocks_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00389">389</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00836">foedus::thread::Thread::get_mcs_rw_extended_blocks()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00315">get_mcs_rw_my_blocks()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a1dd7f177602e25a5cd1318723825c861"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsRwSimpleBlock.html">xct::McsRwSimpleBlock</a>* foedus::thread::ThreadPimpl::mcs_rw_simple_blocks_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00388">388</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00314">get_mcs_rw_my_blocks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00833">foedus::thread::Thread::get_mcs_rw_simple_blocks()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a7964fa7de54357a65cab8f05c1de4696"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsWwBlock.html">xct::McsWwBlock</a>* foedus::thread::ThreadPimpl::mcs_ww_blocks_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pre-allocated MCS blocks. </p>
<p>index 0 is not used so that successor_block=0 means null. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00387">387</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00425">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_ww_my_block()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="ab1e93a62b0a6414f6e30c17969af2340"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">memory::NumaNodeMemory</a>* foedus::thread::ThreadPimpl::node_memory_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>same above </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00347">347</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a0dc235d99dfaac00446b613f409de2ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a> foedus::thread::ThreadPimpl::numa_node_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Node this thread belongs to. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00333">333</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00411">follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">follow_page_pointers_for_write_batch()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00422">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_my_numa_node()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00317">place_a_new_volatile_page()</a>.</p>

</div>
</div>
<a class="anchor" id="a12c3db0e7d4015e8eaddbae71c90ab7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::thread foedus::thread::ThreadPimpl::raw_thread_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encapsulates raw thread object. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00366">366</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00239">set_thread_schedule()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8236666d8fca6674334d0d166218e5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; foedus::thread::ThreadPimpl::raw_thread_set_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Just to make sure raw_thread_ is set. </p>
<p>Otherwise pthread_getschedparam will complain. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00368">368</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00239">set_thread_schedule()</a>.</p>

</div>
</div>
<a class="anchor" id="a684b8acdccad684b32c4ea97be009f8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPimpl::simple_mcs_rw_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shortcut for engine_-&gt;get_options().xct_.mcs_implementation_type_ == simple </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00338">338</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00282">is_simple_mcs_rw()</a>.</p>

</div>
</div>
<a class="anchor" id="a6236b974981b361bfbc25db38c7f9626"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1cache_1_1CacheHashtable.html">cache::CacheHashtable</a>* foedus::thread::ThreadPimpl::snapshot_cache_hashtable_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>same above </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00349">349</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a30fc7377de865406c4174bcd7be6b616"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1cache_1_1SnapshotFileSet.html">cache::SnapshotFileSet</a> foedus::thread::ThreadPimpl::snapshot_file_set_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Each threads maintains a private set of snapshot file descriptors. </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00380">380</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00512">read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00517">read_snapshot_pages()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">uninitialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c0d1b2cce940cc22285a906b1076bd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a>* foedus::thread::ThreadPimpl::snapshot_page_pool_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shorthand for node_memory_-&gt;get_snapshot_pool() </p>

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00351">351</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00647">find_or_read_a_snapshot_page()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00687">find_or_read_snapshot_pages_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00741">on_snapshot_cache_miss()</a>.</p>

</div>
</div>
<a class="anchor" id="a8b5ec40798ea07cf3dbb4def4c6ad142"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* foedus::thread::ThreadPimpl::task_input_memory_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00383">383</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2dced4e9409f69e3d5327c653807362"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* foedus::thread::ThreadPimpl::task_output_memory_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00384">384</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">handle_tasks()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">initialize_once()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/thread/<a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/thread/<a class="el" href="thread__pimpl_8cpp_source.html">thread_pimpl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1thread.html">thread</a></li><li class="navelem"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html">ThreadPimpl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
