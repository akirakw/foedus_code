<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::xct::SysxctLockList Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1xct_1_1SysxctLockList.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1xct_1_1SysxctLockList-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::xct::SysxctLockList Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>RLL/CLL of a system transaction.  
 <a href="classfoedus_1_1xct_1_1SysxctLockList.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>RLL/CLL of a system transaction. </p>
<p>Unlike the normal transaction, lock-list is simpler in sysxct. Sysxct doesn't need read-set or asynchronous locking. It immediately takes the locks required by the logic, and abort if it couldn't. Unlike normal xct, sysxct also locks records for just a few times (counting "lock all records
in this page" as one). We thus integrate RLL and CLL into this list in system transactions. We might follow this approach in normal xct later.</p>
<p>This object is a POD. We use a fixed-size array. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00166">166</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:adebd2100ec885de281ac475e92fc3a9c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9c">Constants</a> { <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">kMaxSysxctLocks</a> = 1 &lt;&lt; 10
 }<tr class="separator:adebd2100ec885de281ac475e92fc3a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4d9d7bb2c74a390d48f48465e7c3ce35"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a4d9d7bb2c74a390d48f48465e7c3ce35">SysxctLockList</a> ()</td></tr>
<tr class="separator:a4d9d7bb2c74a390d48f48465e7c3ce35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b48386e076b01b0aa144d5e3e0042d9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a2b48386e076b01b0aa144d5e3e0042d9">~SysxctLockList</a> ()</td></tr>
<tr class="separator:a2b48386e076b01b0aa144d5e3e0042d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affdaf07db9b3f1f43f29a493c35fc8a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#affdaf07db9b3f1f43f29a493c35fc8a7">SysxctLockList</a> (const <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;other)=delete</td></tr>
<tr class="separator:affdaf07db9b3f1f43f29a493c35fc8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a164d10c99856a341cb86d52ee0eaff79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a164d10c99856a341cb86d52ee0eaff79">operator=</a> (const <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;other)=delete</td></tr>
<tr class="separator:a164d10c99856a341cb86d52ee0eaff79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b39d3dca4a4abc65c8d02140cedeff3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6b39d3dca4a4abc65c8d02140cedeff3">init</a> ()</td></tr>
<tr class="separator:a6b39d3dca4a4abc65c8d02140cedeff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56013b57350b29742790c8333995b36f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f">clear_entries</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> enclosing_max_lock_id)</td></tr>
<tr class="memdesc:a56013b57350b29742790c8333995b36f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all entries.  <a href="#a56013b57350b29742790c8333995b36f">More...</a><br /></td></tr>
<tr class="separator:a56013b57350b29742790c8333995b36f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3846f340ffc539d6a6f66c6d9bf7d257"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257">compress_entries</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> enclosing_max_lock_id)</td></tr>
<tr class="memdesc:a3846f340ffc539d6a6f66c6d9bf7d257"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlike <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. ">clear_entries()</a>, this is used when a sysxct is aborted and will be retried.  <a href="#a3846f340ffc539d6a6f66c6d9bf7d257">More...</a><br /></td></tr>
<tr class="separator:a3846f340ffc539d6a6f66c6d9bf7d257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48e18b6575b506fc4388c0cd9779b8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f">lower_bound</a> (<a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock) const </td></tr>
<tr class="memdesc:ac48e18b6575b506fc4388c0cd9779b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogous to std::lower_bound() for the given lock.  <a href="#ac48e18b6575b506fc4388c0cd9779b8f">More...</a><br /></td></tr>
<tr class="separator:ac48e18b6575b506fc4388c0cd9779b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d43070d7ace35522892eed103ca3838"><td class="memTemplParams" colspan="2">template&lt;typename MCS_ADAPTOR &gt; </td></tr>
<tr class="memitem:a4d43070d7ace35522892eed103ca3838"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a4d43070d7ace35522892eed103ca3838">request_record_lock</a> (MCS_ADAPTOR mcs_adaptor, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *lock)</td></tr>
<tr class="memdesc:a4d43070d7ace35522892eed103ca3838"><td class="mdescLeft">&#160;</td><td class="mdescRight">If not yet acquired, acquires a record lock and adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness.  <a href="#a4d43070d7ace35522892eed103ca3838">More...</a><br /></td></tr>
<tr class="separator:a4d43070d7ace35522892eed103ca3838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab662f88d863600ff29f2e4bcac1c40d3"><td class="memTemplParams" colspan="2">template&lt;typename MCS_ADAPTOR &gt; </td></tr>
<tr class="memitem:ab662f88d863600ff29f2e4bcac1c40d3"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#ab662f88d863600ff29f2e4bcac1c40d3">batch_request_record_locks</a> (MCS_ADAPTOR mcs_adaptor, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id, uint32_t lock_count, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> **locks)</td></tr>
<tr class="memdesc:ab662f88d863600ff29f2e4bcac1c40d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to acquire many locks in a page at once.  <a href="#ab662f88d863600ff29f2e4bcac1c40d3">More...</a><br /></td></tr>
<tr class="separator:ab662f88d863600ff29f2e4bcac1c40d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae67e477c34f96851f33d8e09edc6032a"><td class="memTemplParams" colspan="2">template&lt;typename MCS_ADAPTOR &gt; </td></tr>
<tr class="memitem:ae67e477c34f96851f33d8e09edc6032a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#ae67e477c34f96851f33d8e09edc6032a">request_page_lock</a> (MCS_ADAPTOR mcs_adaptor, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *page)</td></tr>
<tr class="memdesc:ae67e477c34f96851f33d8e09edc6032a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires a page lock.  <a href="#ae67e477c34f96851f33d8e09edc6032a">More...</a><br /></td></tr>
<tr class="separator:ae67e477c34f96851f33d8e09edc6032a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae24498fc6d57f691a45369b1b9c0d50f"><td class="memTemplParams" colspan="2">template&lt;typename MCS_ADAPTOR &gt; </td></tr>
<tr class="memitem:ae24498fc6d57f691a45369b1b9c0d50f"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#ae24498fc6d57f691a45369b1b9c0d50f">batch_request_page_locks</a> (MCS_ADAPTOR mcs_adaptor, uint32_t lock_count, <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **pages)</td></tr>
<tr class="memdesc:ae24498fc6d57f691a45369b1b9c0d50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The interface is same as the record version, but this one doesn't do much optimization.  <a href="#ae24498fc6d57f691a45369b1b9c0d50f">More...</a><br /></td></tr>
<tr class="separator:ae24498fc6d57f691a45369b1b9c0d50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f37f1ac6ee205126ce76fe7ae2f5d52"><td class="memTemplParams" colspan="2">template&lt;typename MCS_ADAPTOR &gt; </td></tr>
<tr class="memitem:a8f37f1ac6ee205126ce76fe7ae2f5d52"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8f37f1ac6ee205126ce76fe7ae2f5d52">release_all_locks</a> (MCS_ADAPTOR mcs_adaptor)</td></tr>
<tr class="memdesc:a8f37f1ac6ee205126ce76fe7ae2f5d52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases all locks that were acquired.  <a href="#a8f37f1ac6ee205126ce76fe7ae2f5d52">More...</a><br /></td></tr>
<tr class="separator:a8f37f1ac6ee205126ce76fe7ae2f5d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a241bea116d8bbceba98949d1ba13d7a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8">get_or_add_entry</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id, uintptr_t lock_addr, bool page_lock)</td></tr>
<tr class="separator:a241bea116d8bbceba98949d1ba13d7a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a12a820ec2e222073992d584fdf683c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c">batch_get_or_add_entries</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> page_id, uint32_t lock_count, uintptr_t *lock_addr, bool page_lock)</td></tr>
<tr class="memdesc:a9a12a820ec2e222073992d584fdf683c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Batched version of <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8">get_or_add_entry()</a>.  <a href="#a9a12a820ec2e222073992d584fdf683c">More...</a><br /></td></tr>
<tr class="separator:a9a12a820ec2e222073992d584fdf683c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa41d66382b6393bff4444ac3735302b6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6">get_array</a> () const </td></tr>
<tr class="separator:aa41d66382b6393bff4444ac3735302b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805e9c634b8fb0b927a9a95b65f72a06"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a805e9c634b8fb0b927a9a95b65f72a06">get_array</a> ()</td></tr>
<tr class="separator:a805e9c634b8fb0b927a9a95b65f72a06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7b36c1328730cd901180ac1c1f296f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6f7b36c1328730cd901180ac1c1f296f">get_entry</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos)</td></tr>
<tr class="separator:a6f7b36c1328730cd901180ac1c1f296f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d18b071b484efd1cc53e6aca8d13b48"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8d18b071b484efd1cc53e6aca8d13b48">get_entry</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) const </td></tr>
<tr class="separator:a8d18b071b484efd1cc53e6aca8d13b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae4db126602043866383227b76998f5"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6ae4db126602043866383227b76998f5">get_capacity</a> () const </td></tr>
<tr class="separator:a6ae4db126602043866383227b76998f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e9c6ce804edba9a71509e6523eb8b08"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0e9c6ce804edba9a71509e6523eb8b08">is_full</a> () const </td></tr>
<tr class="memdesc:a0e9c6ce804edba9a71509e6523eb8b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">When this returns full, it's catastrophic.  <a href="#a0e9c6ce804edba9a71509e6523eb8b08">More...</a><br /></td></tr>
<tr class="separator:a0e9c6ce804edba9a71509e6523eb8b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26261addcc02e6724d6bba3f31a1214"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">get_last_active_entry</a> () const </td></tr>
<tr class="separator:af26261addcc02e6724d6bba3f31a1214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f6d729e6652df06475ff41a0be11ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae">is_valid_entry</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) const </td></tr>
<tr class="separator:ac9f6d729e6652df06475ff41a0be11ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f63c2c1fe6c32352d589119f42c53e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#ab9f63c2c1fe6c32352d589119f42c53e">is_empty</a> () const </td></tr>
<tr class="separator:ab9f63c2c1fe6c32352d589119f42c53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10843e662ca3b9986465a44a0b12dc48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">assert_sorted</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a10843e662ca3b9986465a44a0b12dc48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inline definitions of <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html" title="RLL/CLL of a system transaction. ">SysxctLockList</a> methods.  <a href="#a10843e662ca3b9986465a44a0b12dc48">More...</a><br /></td></tr>
<tr class="separator:a10843e662ca3b9986465a44a0b12dc48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cc41f0ba309899664d4068bdbb8f2fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb">assert_sorted_impl</a> () const </td></tr>
<tr class="separator:a9cc41f0ba309899664d4068bdbb8f2fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357b461dc64f2f7dc38b4c3484d4a1bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a357b461dc64f2f7dc38b4c3484d4a1bc">begin</a> ()</td></tr>
<tr class="separator:a357b461dc64f2f7dc38b4c3484d4a1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8df217277becb9d126eb24dce90391ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8df217277becb9d126eb24dce90391ad">end</a> ()</td></tr>
<tr class="separator:a8df217277becb9d126eb24dce90391ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5e1ff887e68ceb6b50cd53435716abb"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa5e1ff887e68ceb6b50cd53435716abb">cbegin</a> () const </td></tr>
<tr class="separator:aa5e1ff887e68ceb6b50cd53435716abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25972de762da021af54beb2fd6534038"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a25972de762da021af54beb2fd6534038">cend</a> () const </td></tr>
<tr class="separator:a25972de762da021af54beb2fd6534038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8967a3f413bb1b685bf9135302ee31f3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8967a3f413bb1b685bf9135302ee31f3">to_pos</a> (const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *entry) const </td></tr>
<tr class="separator:a8967a3f413bb1b685bf9135302ee31f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b2c2a2eb3c6612e257a9c24a663d57"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a27b2c2a2eb3c6612e257a9c24a663d57">get_last_locked_entry</a> () const </td></tr>
<tr class="separator:a27b2c2a2eb3c6612e257a9c24a663d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc26bf8b559e20ce48b16e2a3fce38ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee">calculate_last_locked_entry</a> () const </td></tr>
<tr class="memdesc:adc26bf8b559e20ce48b16e2a3fce38ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate last_locked_entry_ by really checking the whole list.  <a href="#adc26bf8b559e20ce48b16e2a3fce38ee">More...</a><br /></td></tr>
<tr class="separator:adc26bf8b559e20ce48b16e2a3fce38ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfb818885a95b3ff1ef8dc3b052baca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca">calculate_last_locked_entry_from</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> from) const </td></tr>
<tr class="memdesc:a7dfb818885a95b3ff1ef8dc3b052baca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only searches among entries at or before "from".  <a href="#a7dfb818885a95b3ff1ef8dc3b052baca">More...</a><br /></td></tr>
<tr class="separator:a7dfb818885a95b3ff1ef8dc3b052baca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fac78a9788fb85d3b8c649309bf8818"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818">assert_last_locked_entry</a> () const </td></tr>
<tr class="separator:a0fac78a9788fb85d3b8c649309bf8818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea05ae0cd19309a69ac604de31089e01"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#aea05ae0cd19309a69ac604de31089e01">get_enclosing_max_lock_id</a> () const </td></tr>
<tr class="separator:aea05ae0cd19309a69ac604de31089e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08282344ef562d653a9a2199291a628"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa08282344ef562d653a9a2199291a628">is_try_mode_required</a> (<a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos) const </td></tr>
<tr class="separator:aa08282344ef562d653a9a2199291a628"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:af18c3b802bb35d15574ca5e090a18ccb"><td class="memItemLeft" align="right" valign="top">struct&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#af18c3b802bb35d15574ca5e090a18ccb">TestIsTryRequired</a></td></tr>
<tr class="separator:af18c3b802bb35d15574ca5e090a18ccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076076fbf1570b23bd986e8663b143a3"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a076076fbf1570b23bd986e8663b143a3">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;v)</td></tr>
<tr class="separator:a076076fbf1570b23bd986e8663b143a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="adebd2100ec885de281ac475e92fc3a9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9c">foedus::xct::SysxctLockList::Constants</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf"></a>kMaxSysxctLocks&#160;</td><td class="fielddoc">
<p>Maximum number of locks one system transaction might take. </p>
<p>In most cases just a few. The worst case is page-split where a sysxct takes a page-full of records. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00170">170</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                 {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">kMaxSysxctLocks</a> = 1 &lt;&lt; 10,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  };</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">foedus::xct::SysxctLockList::kMaxSysxctLocks</a></div><div class="ttdoc">Maximum number of locks one system transaction might take. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00176">sysxct_impl.hpp:176</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4d9d7bb2c74a390d48f48465e7c3ce35"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::SysxctLockList::SysxctLockList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00179">179</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00186">init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{ <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6b39d3dca4a4abc65c8d02140cedeff3">init</a>(); }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a6b39d3dca4a4abc65c8d02140cedeff3"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a6b39d3dca4a4abc65c8d02140cedeff3">foedus::xct::SysxctLockList::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00186">sysxct_impl.hpp:186</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a4d9d7bb2c74a390d48f48465e7c3ce35_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a4d9d7bb2c74a390d48f48465e7c3ce35_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a4d9d7bb2c74a390d48f48465e7c3ce35_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a4d9d7bb2c74a390d48f48465e7c3ce35_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6b39d3dca4a4abc65c8d02140cedeff3" title="foedus::xct::SysxctLockList\l::init" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2b48386e076b01b0aa144d5e3e0042d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::SysxctLockList::~SysxctLockList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00180">180</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="affdaf07db9b3f1f43f29a493c35fc8a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::SysxctLockList::SysxctLockList </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0fac78a9788fb85d3b8c649309bf8818"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::assert_last_locked_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00345">345</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00333">calculate_last_locked_entry()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00078">assert_sorted_impl()</a>, and <a class="el" href="sysxct__impl_8cpp_source.html#l00098">lower_bound()</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                        {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> correct = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee">calculate_last_locked_entry</a>();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(correct == last_locked_entry_);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_adc26bf8b559e20ce48b16e2a3fce38ee"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee">foedus::xct::SysxctLockList::calculate_last_locked_entry</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry() const </div><div class="ttdoc">Calculate last_locked_entry_ by really checking the whole list. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00333">sysxct_impl.hpp:333</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="237,13,428,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="476,5,660,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a0fac78a9788fb85d3b8c649309bf8818_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="237,125,421,167"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="469,188,653,229"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="469,123,653,164"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="701,5,885,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="701,188,885,229"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="933,188,1117,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="701,123,885,164"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a10843e662ca3b9986465a44a0b12dc48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::assert_sorted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inline definitions of <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html" title="RLL/CLL of a system transaction. ">SysxctLockList</a> methods. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00549">549</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8cpp_source.html#l00078">assert_sorted_impl()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00152">batch_get_or_add_entries()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00193">clear_entries()</a>, <a class="el" href="sysxct__impl_8cpp_source.html#l00237">compress_entries()</a>, and <a class="el" href="sysxct__impl_8cpp_source.html#l00103">get_or_add_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                                {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// In release mode, this code must be completely erased by compiler</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor">#ifndef  NDEBUG</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb">assert_sorted_impl</a>();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a9cc41f0ba309899664d4068bdbb8f2fb"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb">foedus::xct::SysxctLockList::assert_sorted_impl</a></div><div class="ttdeci">void assert_sorted_impl() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8cpp_source.html#l00078">sysxct_impl.cpp:78</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="237,173,421,214"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="469,13,653,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6" title="foedus::xct::SysxctLockList\l::get_array" alt="" coords="469,78,653,119"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="469,143,653,185"/>
<area shape="rect" id="node8" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="479,209,644,236"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="487,261,636,302"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="480,326,643,367"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="703,13,893,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="943,5,1127,61"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="701,293,895,334"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="717,358,879,399"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a10843e662ca3b9986465a44a0b12dc48_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="469,68,653,109"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="237,32,421,73"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="237,97,421,139"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="237,163,421,204"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9cc41f0ba309899664d4068bdbb8f2fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::assert_sorted_impl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8cpp_source.html#l00078">78</a> of file <a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00345">assert_last_locked_entry()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00293">get_array()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00306">get_last_active_entry()</a>, <a class="el" href="page_8hpp_source.html#l00339">foedus::storage::Page::get_volatile_page_id()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, <a class="el" href="page_8hpp_source.html#l00395">foedus::storage::to_page()</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00063">foedus::xct::to_universal_lock_id()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00549">assert_sorted()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                              {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keyword">const</span> SysxctLockEntry* array = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6">get_array</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].universal_lock_id_ == 0);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].lock_ == <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[<a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>].mcs_block_ == 0);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> last_active_entry = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">get_last_active_entry</a>();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 2U; pos &lt;= last_active_entry; ++pos) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[pos - 1U].universal_lock_id_ &lt; array[pos].universal_lock_id_);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[pos].universal_lock_id_ != 0);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[pos].lock_ != <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">const</span> storage::Page* page = <a class="code" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25">storage::to_page</a>(reinterpret_cast&lt;void*&gt;(array[pos].lock_));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keyword">auto</span> page_id = page-&gt;get_volatile_page_id();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array[pos].universal_lock_id_ == <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(page_id, array[pos].lock_));</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gaa114fc1859c2d4cb8b9e2021cb11cb25"><div class="ttname"><a href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25">foedus::storage::to_page</a></div><div class="ttdeci">Page * to_page(const void *address)</div><div class="ttdoc">super-dirty way to obtain Page the address belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00395">page.hpp:395</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a94b21516b530d0be271c6005a72009ad"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">foedus::xct::to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId to_universal_lock_id(storage::VolatilePagePointer page_id, uintptr_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00063">sysxct_impl.hpp:63</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a0fac78a9788fb85d3b8c649309bf8818"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818">foedus::xct::SysxctLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00345">sysxct_impl.hpp:345</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_af26261addcc02e6724d6bba3f31a1214"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">foedus::xct::SysxctLockList::get_last_active_entry</a></div><div class="ttdeci">LockListPosition get_last_active_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00306">sysxct_impl.hpp:306</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_aa41d66382b6393bff4444ac3735302b6"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6">foedus::xct::SysxctLockList::get_array</a></div><div class="ttdeci">const SysxctLockEntry * get_array() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00293">sysxct_impl.hpp:293</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="237,13,421,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6" title="foedus::xct::SysxctLockList\l::get_array" alt="" coords="237,78,421,119"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="237,143,421,185"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="255,209,404,250"/>
<area shape="rect" id="node8" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="247,275,412,301"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="248,326,411,367"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="471,13,661,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="711,5,895,61"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="469,293,663,334"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="485,358,647,399"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a9cc41f0ba309899664d4068bdbb8f2fb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="237,65,421,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="701,68,885,109"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="469,32,653,73"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="469,97,653,139"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="469,163,653,204"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9a12a820ec2e222073992d584fdf683c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::batch_get_or_add_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lock_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t *&#160;</td>
          <td class="paramname"><em>lock_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>page_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Batched version of <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8">get_or_add_entry()</a>. </p>
<dl class="section return"><dt>Returns</dt><dd>position of the first entry that corresponds to any of the locks, either added or found. Returns kLockListPositionInvalid iff lock_count == 0. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>lock_addr does NOT have to be sorted. This function sorts it first (that's why it's not const param). However, you SHOULD give this method a sorted array if it's easy to do. This method first checks std::is_sorted() to skip sorting. </dd></dl>

<p>Definition at line <a class="el" href="sysxct__impl_8cpp_source.html#l00152">152</a> of file <a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00549">assert_sorted()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00306">get_last_active_entry()</a>, <a class="el" href="sysxct__impl_8cpp_source.html#l00103">get_or_add_entry()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00176">kMaxSysxctLocks</a>, <a class="el" href="sysxct__impl_8cpp_source.html#l00098">lower_bound()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00117">foedus::xct::SysxctLockEntry::set()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00063">foedus::xct::to_universal_lock_id()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00085">foedus::xct::SysxctLockEntry::universal_lock_id_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                  {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_count);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">get_last_active_entry</a>() + lock_count &lt;= <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">kMaxSysxctLocks</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">get_last_active_entry</a>() + lock_count &gt; <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">kMaxSysxctLocks</a>)) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;SysxctLockList full. This must not happen&quot;</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span> (lock_count == 0) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// Address order within the same page guarantees the Universal lock ID order.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">if</span> (std::is_sorted(lock_addr, lock_addr + lock_count)) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    DVLOG(3) &lt;&lt; <span class="stringliteral">&quot;Okay, sorted.&quot;</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// Most likely we hit this case for page locks (just 2 or 3 locks)</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// Otherwise something wrong...</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(lock_count &gt; 5U)) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Given array is not sorted. We have to sort it here. Is it intended??&quot;</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    std::sort(lock_addr, lock_addr + lock_count);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// If this is the majority case, the is_sorted() is a wasted cost (std::sort often</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// do something like this internally), but this should almost never happen. In that</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// case, std::is_sorted() is faster.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> min_id = <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(page_id, lock_addr[0]);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> max_id = <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(page_id, lock_addr[lock_count - 1]);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(min_id &lt;= max_id);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// We optimize for the case where this list has nothing in [min_lock_addr,max_lock_addr].</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// When this is not the case, we just call get_or_add_entry with for loop.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// A large lock_count should mean page split sysxct, so this should never happen.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> insert_pos = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f">lower_bound</a>(min_id);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span> (insert_pos &gt; last_active_entry_) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos == last_active_entry_ + 1U);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// Larger than all existing entries. This is easy. We just append all to the end.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> next_id = array_[insert_pos].<a class="code" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#ac957cf59425fa8f40a4802fc06174282">universal_lock_id_</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_id &gt;= min_id);  <span class="comment">// lower_bound()&#39;s contract</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (next_id &gt; max_id) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      DVLOG(3) &lt;&lt; <span class="stringliteral">&quot;Okay, no overlap. Much easier.&quot;</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="comment">// This is unfortunate, but it happens.. especially with pessimisitic locks</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(lock_count &gt; 5U)) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        DVLOG(0) &lt;&lt; <span class="stringliteral">&quot;Overlapped entry for a large batch. Well, unfortunate. but it happens.&quot;</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="comment">// Fall back to the slow path</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; lock_count; ++i) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8">get_or_add_entry</a>(page_id, lock_addr[i], page_lock);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos &gt;= insert_pos);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">return</span> insert_pos;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos &gt; last_active_entry_ || array_[insert_pos].universal_lock_id_ &gt;= max_id);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="comment">// Move existing entries at once, then set() in a tight for loop</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(last_active_entry_ + 1U &gt;= insert_pos);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">const</span> uint32_t move_count = last_active_entry_ + 1U - insert_pos;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> (move_count &gt; 0) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keyword">const</span> uint64_t moved_bytes = <span class="keyword">sizeof</span>(SysxctLockEntry) * move_count;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    std::memmove(array_ + insert_pos + lock_count, array_ + insert_pos, moved_bytes);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">if</span> (last_locked_entry_ &gt;= insert_pos) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    last_locked_entry_ += lock_count;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; lock_count; ++i) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> <span class="keywordtype">id</span> = <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(page_id, lock_addr[i]);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    array_[insert_pos + i].<a class="code" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca">set</a>(<span class="keywordtype">id</span>, lock_addr[i], page_lock);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  last_active_entry_ += lock_count;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">assert_sorted</a>();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">return</span> insert_pos;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a241bea116d8bbceba98949d1ba13d7a8"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8">foedus::xct::SysxctLockList::get_or_add_entry</a></div><div class="ttdeci">LockListPosition get_or_add_entry(storage::VolatilePagePointer page_id, uintptr_t lock_addr, bool page_lock)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8cpp_source.html#l00103">sysxct_impl.cpp:103</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">foedus::xct::SysxctLockList::kMaxSysxctLocks</a></div><div class="ttdoc">Maximum number of locks one system transaction might take. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00176">sysxct_impl.hpp:176</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a94b21516b530d0be271c6005a72009ad"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">foedus::xct::to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId to_universal_lock_id(storage::VolatilePagePointer page_id, uintptr_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00063">sysxct_impl.hpp:63</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_ac48e18b6575b506fc4388c0cd9779b8f"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f">foedus::xct::SysxctLockList::lower_bound</a></div><div class="ttdeci">LockListPosition lower_bound(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::lower_bound() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8cpp_source.html#l00098">sysxct_impl.cpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctLockEntry_html_a2bae26bdce0794daafd3c537103d32ca"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca">foedus::xct::SysxctLockEntry::set</a></div><div class="ttdeci">void set(UniversalLockId lock_id, uintptr_t lock, bool page_lock)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00117">sysxct_impl.hpp:117</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a10843e662ca3b9986465a44a0b12dc48"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">foedus::xct::SysxctLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdoc">Inline definitions of SysxctLockList methods. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00549">sysxct_impl.hpp:549</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctLockEntry_html_ac957cf59425fa8f40a4802fc06174282"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctLockEntry.html#ac957cf59425fa8f40a4802fc06174282">foedus::xct::SysxctLockEntry::universal_lock_id_</a></div><div class="ttdeci">UniversalLockId universal_lock_id_</div><div class="ttdoc">Used to order locks in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00085">sysxct_impl.hpp:85</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_af26261addcc02e6724d6bba3f31a1214"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">foedus::xct::SysxctLockList::get_last_active_entry</a></div><div class="ttdeci">LockListPosition get_last_active_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00306">sysxct_impl.hpp:306</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a9a12a820ec2e222073992d584fdf683c_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a9a12a820ec2e222073992d584fdf683c_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a9a12a820ec2e222073992d584fdf683c_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a9a12a820ec2e222073992d584fdf683c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="487,124,671,165"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="969,5,1153,47"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="980,253,1143,295"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="237,271,421,312"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="487,359,671,400"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca" title="foedus::xct::SysxctLockEntry::set" alt="" coords="469,425,689,451"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="737,124,921,165"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="969,335,1153,376"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6" title="foedus::xct::SysxctLockList\l::get_array" alt="" coords="969,188,1153,229"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="987,71,1136,112"/>
<area shape="rect" id="node10" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="979,137,1144,163"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1203,335,1393,376"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1443,327,1627,383"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1201,264,1395,305"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1217,199,1379,240"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0e9c6ce804edba9a71509e6523eb8b08" title="When this returns full, it&#39;s catastrophic. " alt="" coords="487,241,671,283"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae24498fc6d57f691a45369b1b9c0d50f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_ADAPTOR &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::SysxctLockList::batch_request_page_locks </td>
          <td>(</td>
          <td class="paramtype">MCS_ADAPTOR&#160;</td>
          <td class="paramname"><em>mcs_adaptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lock_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> **&#160;</td>
          <td class="paramname"><em>pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The interface is same as the record version, but this one doesn't do much optimization. </p>
<p>We shouldn't frequently lock many pages in sysxct. However, at least this one locks the pages in UniversalLockId order to avoid deadlocks. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00252">252</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00241">request_page_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                         {</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    std::sort(pages, pages + lock_count, PageComparator());</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; lock_count; ++i) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#ae67e477c34f96851f33d8e09edc6032a">request_page_lock</a>(mcs_adaptor, pages[i]));</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_ae67e477c34f96851f33d8e09edc6032a"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#ae67e477c34f96851f33d8e09edc6032a">foedus::xct::SysxctLockList::request_page_lock</a></div><div class="ttdeci">ErrorCode request_page_lock(MCS_ADAPTOR mcs_adaptor, storage::Page *page)</div><div class="ttdoc">Acquires a page lock. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00241">sysxct_impl.hpp:241</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_ae24498fc6d57f691a45369b1b9c0d50f_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_ae24498fc6d57f691a45369b1b9c0d50f_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_ae24498fc6d57f691a45369b1b9c0d50f_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_ae24498fc6d57f691a45369b1b9c0d50f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#ae67e477c34f96851f33d8e09edc6032a" title="Acquires a page lock. " alt="" coords="239,5,423,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="471,5,620,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab662f88d863600ff29f2e4bcac1c40d3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_ADAPTOR &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::SysxctLockList::batch_request_record_locks </td>
          <td>(</td>
          <td class="paramtype">MCS_ADAPTOR&#160;</td>
          <td class="paramname"><em>mcs_adaptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>lock_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> **&#160;</td>
          <td class="paramname"><em>locks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used to acquire many locks in a page at once. </p>
<p>This reduces sorting cost. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00230">230</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                             {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    uintptr_t* lock_addr = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t*<span class="keyword">&gt;</span>(locks);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> batch_request_locks_general(mcs_adaptor, page_id, lock_count, lock_addr, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a357b461dc64f2f7dc38b4c3484d4a1bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00316">316</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00647">release_all_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a357b461dc64f2f7dc38b4c3484d4a1bc_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a357b461dc64f2f7dc38b4c3484d4a1bc_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a357b461dc64f2f7dc38b4c3484d4a1bc_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a357b461dc64f2f7dc38b4c3484d4a1bc_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8f37f1ac6ee205126ce76fe7ae2f5d52" title="Releases all locks that were acquired. " alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adc26bf8b559e20ce48b16e2a3fce38ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::calculate_last_locked_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate last_locked_entry_ by really checking the whole list. </p>
<p>Usually for sanity checks </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00333">333</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00337">calculate_last_locked_entry_from()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00345">assert_last_locked_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                                       {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca">calculate_last_locked_entry_from</a>(last_active_entry_);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a7dfb818885a95b3ff1ef8dc3b052baca"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca">foedus::xct::SysxctLockList::calculate_last_locked_entry_from</a></div><div class="ttdeci">LockListPosition calculate_last_locked_entry_from(LockListPosition from) const </div><div class="ttdoc">Only searches among entries at or before "from". </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00337">sysxct_impl.hpp:337</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="244,5,428,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_adc26bf8b559e20ce48b16e2a3fce38ee_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="244,140,428,181"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="476,109,660,150"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="708,172,892,213"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="708,106,892,148"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="1172,172,1356,213"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="940,41,1124,82"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="940,106,1124,148"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="940,172,1124,213"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7dfb818885a95b3ff1ef8dc3b052baca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::calculate_last_locked_entry_from </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>from</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Only searches among entries at or before "from". </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00337">337</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00333">calculate_last_locked_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = from; pos &gt; <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; --pos) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">if</span> (array_[pos].is_locked()) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    }</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a7dfb818885a95b3ff1ef8dc3b052baca_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a7dfb818885a95b3ff1ef8dc3b052baca_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a7dfb818885a95b3ff1ef8dc3b052baca_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a7dfb818885a95b3ff1ef8dc3b052baca_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="237,140,428,181"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="476,140,660,181"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="708,109,892,150"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="940,172,1124,213"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="940,106,1124,148"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="1404,172,1588,213"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="1172,41,1356,82"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="1172,106,1356,148"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="1172,172,1356,213"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa5e1ff887e68ceb6b50cd53435716abb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::cbegin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00318">318</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a25972de762da021af54beb2fd6534038"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::cend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00319">319</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a56013b57350b29742790c8333995b36f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::clear_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>enclosing_max_lock_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove all entries. </p>
<p>This is used when a sysxct starts a fresh new transaction, not retry. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00193">193</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00549">assert_sorted()</a>, and <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>
<div class="fragment"><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                                            {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(last_locked_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">assert_sorted</a>();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    clear_no_assert(enclosing_max_lock_id);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a10843e662ca3b9986465a44a0b12dc48"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">foedus::xct::SysxctLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdoc">Inline definitions of SysxctLockList methods. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00549">sysxct_impl.hpp:549</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a56013b57350b29742790c8333995b36f_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a56013b57350b29742790c8333995b36f_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a56013b57350b29742790c8333995b36f_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a56013b57350b29742790c8333995b36f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="237,177,421,218"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="469,177,653,218"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="701,13,885,54"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6" title="foedus::xct::SysxctLockList\l::get_array" alt="" coords="701,78,885,119"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="701,143,885,185"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="719,209,868,250"/>
<area shape="rect" id="node10" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="711,275,876,301"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="712,326,875,367"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="935,13,1125,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1175,5,1359,61"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="933,293,1127,334"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="949,358,1111,399"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3846f340ffc539d6a6f66c6d9bf7d257"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::compress_entries </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>enclosing_max_lock_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlike <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. ">clear_entries()</a>, this is used when a sysxct is aborted and will be retried. </p>
<p>We 'inherit' some entries (although all of them must be released) to help guide next runs. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8cpp_source.html#l00237">237</a> of file <a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00549">assert_sorted()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00107">foedus::xct::SysxctLockEntry::used_in_this_run_</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                                                           {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">assert_sorted</a>();</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(last_locked_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> next_compressed_pos = 1U;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = 1U; pos &lt;= last_active_entry_; ++pos) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!array_[pos].is_locked());</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos &gt;= next_compressed_pos);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">if</span> (array_[pos].used_in_this_run_) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="comment">// Okay, let&#39;s inherit this entry</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keywordflow">if</span> (pos != next_compressed_pos) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        array_[next_compressed_pos] = array_[pos];</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      array_[next_compressed_pos].<a class="code" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#aba36248cdbecc86360fe13699065d6c5">used_in_this_run_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      ++next_compressed_pos;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  last_active_entry_ = next_compressed_pos - 1U;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  enclosing_max_lock_id_ = enclosing_max_lock_id;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">assert_sorted</a>();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctLockEntry_html_aba36248cdbecc86360fe13699065d6c5"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctLockEntry.html#aba36248cdbecc86360fe13699065d6c5">foedus::xct::SysxctLockEntry::used_in_this_run_</a></div><div class="ttdeci">bool used_in_this_run_</div><div class="ttdoc">whether the lock was requested at least once in this run. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00107">sysxct_impl.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a10843e662ca3b9986465a44a0b12dc48"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">foedus::xct::SysxctLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdoc">Inline definitions of SysxctLockList methods. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00549">sysxct_impl.hpp:549</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a3846f340ffc539d6a6f66c6d9bf7d257_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a3846f340ffc539d6a6f66c6d9bf7d257_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a3846f340ffc539d6a6f66c6d9bf7d257_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a3846f340ffc539d6a6f66c6d9bf7d257_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="237,177,421,218"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="469,177,653,218"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="701,13,885,54"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6" title="foedus::xct::SysxctLockList\l::get_array" alt="" coords="701,78,885,119"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="701,143,885,185"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="719,209,868,250"/>
<area shape="rect" id="node10" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="711,275,876,301"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="712,326,875,367"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="935,13,1125,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1175,5,1359,61"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="933,293,1127,334"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="949,358,1111,399"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8df217277becb9d126eb24dce90391ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00317">317</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00647">release_all_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{ <span class="keywordflow">return</span> array_ + 1U + last_active_entry_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a8df217277becb9d126eb24dce90391ad_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a8df217277becb9d126eb24dce90391ad_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a8df217277becb9d126eb24dce90391ad_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a8df217277becb9d126eb24dce90391ad_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8f37f1ac6ee205126ce76fe7ae2f5d52" title="Releases all locks that were acquired. " alt="" coords="267,5,451,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa41d66382b6393bff4444ac3735302b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::get_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00293">293</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00078">assert_sorted_impl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{ <span class="keywordflow">return</span> array_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_aa41d66382b6393bff4444ac3735302b6_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_aa41d66382b6393bff4444ac3735302b6_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_aa41d66382b6393bff4444ac3735302b6_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_aa41d66382b6393bff4444ac3735302b6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="237,65,421,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="469,65,653,107"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="933,68,1117,109"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="701,32,885,73"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="701,97,885,139"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="701,163,885,204"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a805e9c634b8fb0b927a9a95b65f72a06"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::get_array </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00294">294</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{ <span class="keywordflow">return</span> array_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ae4db126602043866383227b76998f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::SysxctLockList::get_capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00303">303</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00176">kMaxSysxctLocks</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00053">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">kMaxSysxctLocks</a>; }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">foedus::xct::SysxctLockList::kMaxSysxctLocks</a></div><div class="ttdoc">Maximum number of locks one system transaction might take. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00176">sysxct_impl.hpp:176</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a6ae4db126602043866383227b76998f5_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a6ae4db126602043866383227b76998f5_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a6ae4db126602043866383227b76998f5_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a6ae4db126602043866383227b76998f5_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#a2bede62c85933f979730b66e77aa71dd" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="237,13,395,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aea05ae0cd19309a69ac604de31089e01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> foedus::xct::SysxctLockList::get_enclosing_max_lock_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00352">352</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00053">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{ <span class="keywordflow">return</span> enclosing_max_lock_id_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_aea05ae0cd19309a69ac604de31089e01_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_aea05ae0cd19309a69ac604de31089e01_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_aea05ae0cd19309a69ac604de31089e01_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_aea05ae0cd19309a69ac604de31089e01_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#a2bede62c85933f979730b66e77aa71dd" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="244,13,401,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6f7b36c1328730cd901180ac1c1f296f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::get_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00295">295</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00307">is_valid_entry()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00354">is_try_mode_required()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                                   {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_ac9f6d729e6652df06475ff41a0be11ae"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae">foedus::xct::SysxctLockList::is_valid_entry</a></div><div class="ttdeci">bool is_valid_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00307">sysxct_impl.hpp:307</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae" title="foedus::xct::SysxctLockList\l::is_valid_entry" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a6f7b36c1328730cd901180ac1c1f296f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa08282344ef562d653a9a2199291a628" title="foedus::xct::SysxctLockList\l::is_try_mode_required" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8d18b071b484efd1cc53e6aca8d13b48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a>* foedus::xct::SysxctLockList::get_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00299">299</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00307">is_valid_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                                               {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae">is_valid_entry</a>(pos));</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">return</span> array_ + pos;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_ac9f6d729e6652df06475ff41a0be11ae"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae">foedus::xct::SysxctLockList::is_valid_entry</a></div><div class="ttdeci">bool is_valid_entry(LockListPosition pos) const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00307">sysxct_impl.hpp:307</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a8d18b071b484efd1cc53e6aca8d13b48_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a8d18b071b484efd1cc53e6aca8d13b48_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a8d18b071b484efd1cc53e6aca8d13b48_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a8d18b071b484efd1cc53e6aca8d13b48_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae" title="foedus::xct::SysxctLockList\l::is_valid_entry" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af26261addcc02e6724d6bba3f31a1214"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::get_last_active_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00306">306</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00078">assert_sorted_impl()</a>, <a class="el" href="sysxct__impl_8cpp_source.html#l00152">batch_get_or_add_entries()</a>, <a class="el" href="sysxct__impl_8cpp_source.html#l00053">foedus::xct::operator&lt;&lt;()</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00320">to_pos()</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;{ <span class="keywordflow">return</span> last_active_entry_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_af26261addcc02e6724d6bba3f31a1214_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_af26261addcc02e6724d6bba3f31a1214_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_af26261addcc02e6724d6bba3f31a1214_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_af26261addcc02e6724d6bba3f31a1214_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="237,140,421,181"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="933,172,1117,213"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1xct.html#a2bede62c85933f979730b66e77aa71dd" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="251,288,408,315"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8967a3f413bb1b685bf9135302ee31f3" title="foedus::xct::SysxctLockList\l::to_pos" alt="" coords="237,340,421,381"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="469,106,653,148"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. " alt="" coords="701,41,885,82"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. " alt="" coords="701,106,885,148"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="701,172,885,213"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a27b2c2a2eb3c6612e257a9c24a663d57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::get_last_locked_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>largest index of entries that are already locked. kLockListPositionInvalid if no entry is locked. </dd></dl>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00331">331</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00053">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{ <span class="keywordflow">return</span> last_locked_entry_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a27b2c2a2eb3c6612e257a9c24a663d57_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a27b2c2a2eb3c6612e257a9c24a663d57_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a27b2c2a2eb3c6612e257a9c24a663d57_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a27b2c2a2eb3c6612e257a9c24a663d57_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#a2bede62c85933f979730b66e77aa71dd" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="237,13,395,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a241bea116d8bbceba98949d1ba13d7a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::get_or_add_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>lock_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>page_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>position of the entry that corresponds to the lock. either added or found. Never returns kLockListPositionInvalid. </dd></dl>

<p>Definition at line <a class="el" href="sysxct__impl_8cpp_source.html#l00103">103</a> of file <a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00549">assert_sorted()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00305">is_full()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="sysxct__impl_8cpp_source.html#l00098">lower_bound()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00117">foedus::xct::SysxctLockEntry::set()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00063">foedus::xct::to_universal_lock_id()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00152">batch_get_or_add_entries()</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                  {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0e9c6ce804edba9a71509e6523eb8b08">is_full</a>());</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(<a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0e9c6ce804edba9a71509e6523eb8b08">is_full</a>())) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot;SysxctLockList full. This must not happen&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> <span class="keywordtype">id</span> = <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(page_id, lock_addr);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// Easy case? (lock &gt;= the last entry)</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> insert_pos = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f">lower_bound</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Larger than all existing entries? Append to the last!</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span> (insert_pos &gt; last_active_entry_) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos == last_active_entry_ + 1U);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> new_pos = issue_new_position();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    array_[new_pos].<a class="code" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca">set</a>(<span class="keywordtype">id</span>, lock_addr, page_lock);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_pos == insert_pos);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> new_pos;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// lower_bound returns the first entry that is NOT less than. is it equal?</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array_[insert_pos].universal_lock_id_ &gt;= <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (array_[insert_pos].universal_lock_id_ == <span class="keywordtype">id</span>) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Found existing!</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> insert_pos;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;not an easy case. We need to adjust the order. This is costly!&quot;</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos &lt;= last_active_entry_);  <span class="comment">// otherwise we went into the 1st branch</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(array_[insert_pos].universal_lock_id_ &gt; <span class="keywordtype">id</span>);  <span class="comment">// if ==, we went into the 2nd branch</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(insert_pos == 1U || array_[insert_pos - 1U].universal_lock_id_ &lt; <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> new_last_pos = issue_new_position();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_last_pos &gt; insert_pos);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  uint64_t moved_bytes = <span class="keyword">sizeof</span>(SysxctLockEntry) * (new_last_pos - insert_pos);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  std::memmove(array_ + insert_pos + 1U, array_ + insert_pos, moved_bytes);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Re-sorted. hope this won&#39;t happen often&quot;</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  array_[insert_pos].<a class="code" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca">set</a>(<span class="keywordtype">id</span>, lock_addr, page_lock);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (last_locked_entry_ &gt;= insert_pos) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    ++last_locked_entry_;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">assert_sorted</a>();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">return</span> insert_pos;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a94b21516b530d0be271c6005a72009ad"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">foedus::xct::to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId to_universal_lock_id(storage::VolatilePagePointer page_id, uintptr_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00063">sysxct_impl.hpp:63</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_ac48e18b6575b506fc4388c0cd9779b8f"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f">foedus::xct::SysxctLockList::lower_bound</a></div><div class="ttdeci">LockListPosition lower_bound(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::lower_bound() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8cpp_source.html#l00098">sysxct_impl.cpp:98</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a0e9c6ce804edba9a71509e6523eb8b08"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a0e9c6ce804edba9a71509e6523eb8b08">foedus::xct::SysxctLockList::is_full</a></div><div class="ttdeci">bool is_full() const </div><div class="ttdoc">When this returns full, it&#39;s catastrophic. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00305">sysxct_impl.hpp:305</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctLockEntry_html_a2bae26bdce0794daafd3c537103d32ca"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca">foedus::xct::SysxctLockEntry::set</a></div><div class="ttdeci">void set(UniversalLockId lock_id, uintptr_t lock, bool page_lock)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00117">sysxct_impl.hpp:117</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a10843e662ca3b9986465a44a0b12dc48"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48">foedus::xct::SysxctLockList::assert_sorted</a></div><div class="ttdeci">void assert_sorted() const __attribute__((always_inline))</div><div class="ttdoc">Inline definitions of SysxctLockList methods. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00549">sysxct_impl.hpp:549</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a10843e662ca3b9986465a44a0b12dc48" title="Inline definitions of SysxctLockList methods. " alt="" coords="255,177,439,218"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="748,326,911,367"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0e9c6ce804edba9a71509e6523eb8b08" title="When this returns full, it&#39;s catastrophic. " alt="" coords="255,294,439,335"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac48e18b6575b506fc4388c0cd9779b8f" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="505,46,689,87"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1SysxctLockEntry.html#a2bae26bdce0794daafd3c537103d32ca" title="foedus::xct::SysxctLockEntry::set" alt="" coords="237,360,457,387"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9cc41f0ba309899664d4068bdbb8f2fb" title="foedus::xct::SysxctLockList\l::assert_sorted_impl" alt="" coords="505,177,689,218"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="737,13,921,54"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa41d66382b6393bff4444ac3735302b6" title="foedus::xct::SysxctLockList\l::get_array" alt="" coords="737,78,921,119"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="737,143,921,185"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="755,209,904,250"/>
<area shape="rect" id="node10" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="747,275,912,301"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="971,13,1161,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1211,5,1395,61"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="969,293,1163,334"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="985,358,1147,399"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a241bea116d8bbceba98949d1ba13d7a8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6b39d3dca4a4abc65c8d02140cedeff3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00186">186</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00462">foedus::xct::SysxctWorkspace::init()</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00179">SysxctLockList()</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;              {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    clear_no_assert(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a6b39d3dca4a4abc65c8d02140cedeff3_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a6b39d3dca4a4abc65c8d02140cedeff3_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a6b39d3dca4a4abc65c8d02140cedeff3_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a6b39d3dca4a4abc65c8d02140cedeff3_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4" title="foedus::xct::SysxctWorkspace\l::init" alt="" coords="237,5,439,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1SysxctLockList.html#a4d9d7bb2c74a390d48f48465e7c3ce35" title="foedus::xct::SysxctLockList\l::SysxctLockList" alt="" coords="246,71,430,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="487,13,653,39"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="701,5,885,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab9f63c2c1fe6c32352d589119f42c53e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::SysxctLockList::is_empty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00310">310</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>
<div class="fragment"><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{ <span class="keywordflow">return</span> last_active_entry_ == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>; }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e9c6ce804edba9a71509e6523eb8b08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::SysxctLockList::is_full </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When this returns full, it's catastrophic. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00305">305</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00176">kMaxSysxctLocks</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00103">get_or_add_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{ <span class="keywordflow">return</span> last_active_entry_ == <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">kMaxSysxctLocks</a>; }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#adebd2100ec885de281ac475e92fc3a9cad761f7aed6f4afc0d0883a72d6c53bcf">foedus::xct::SysxctLockList::kMaxSysxctLocks</a></div><div class="ttdoc">Maximum number of locks one system transaction might take. </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00176">sysxct_impl.hpp:176</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a0e9c6ce804edba9a71509e6523eb8b08_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a0e9c6ce804edba9a71509e6523eb8b08_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a0e9c6ce804edba9a71509e6523eb8b08_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a0e9c6ce804edba9a71509e6523eb8b08_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="237,5,421,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="469,5,653,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa08282344ef562d653a9a2199291a628"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::SysxctLockList::is_try_mode_required </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>whether the lock must be taken in try mode </dd></dl>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00354">354</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00295">get_entry()</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00085">foedus::xct::SysxctLockEntry::universal_lock_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                                                        {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">const</span> SysxctLockEntry* entry = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6f7b36c1328730cd901180ac1c1f296f">get_entry</a>(pos);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// If the enclosing thread took a lock after this, we must be careful.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;universal_lock_id_ &lt;= enclosing_max_lock_id_) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// If this list contains an already-taken lock after this, we must be careful.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span> (pos &lt;= last_locked_entry_) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a6f7b36c1328730cd901180ac1c1f296f"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a6f7b36c1328730cd901180ac1c1f296f">foedus::xct::SysxctLockList::get_entry</a></div><div class="ttdeci">SysxctLockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00295">sysxct_impl.hpp:295</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_aa08282344ef562d653a9a2199291a628_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_aa08282344ef562d653a9a2199291a628_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_aa08282344ef562d653a9a2199291a628_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_aa08282344ef562d653a9a2199291a628_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6f7b36c1328730cd901180ac1c1f296f" title="foedus::xct::SysxctLockList\l::get_entry" alt="" coords="237,5,421,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#ac9f6d729e6652df06475ff41a0be11ae" title="foedus::xct::SysxctLockList\l::is_valid_entry" alt="" coords="469,5,653,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9f6d729e6652df06475ff41a0be11ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::SysxctLockList::is_valid_entry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a>&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00307">307</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00295">get_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                                  {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">return</span> pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a> &amp;&amp; pos &lt;= last_active_entry_;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_ac9f6d729e6652df06475ff41a0be11ae_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_ac9f6d729e6652df06475ff41a0be11ae_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_ac9f6d729e6652df06475ff41a0be11ae_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_ac9f6d729e6652df06475ff41a0be11ae_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6f7b36c1328730cd901180ac1c1f296f" title="foedus::xct::SysxctLockList\l::get_entry" alt="" coords="237,5,421,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#aa08282344ef562d653a9a2199291a628" title="foedus::xct::SysxctLockList\l::is_try_mode_required" alt="" coords="469,5,653,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac48e18b6575b506fc4388c0cd9779b8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::lower_bound </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analogous to std::lower_bound() for the given lock. </p>
<p>Data manipulation (search/add/etc)</p>
<dl class="section return"><dt>Returns</dt><dd>Index of the fist entry whose lock_ is not less than lock. If no such entry, last_active_entry_ + 1U, whether last_active_entry_ is 0 or not. Thus the return value is always &gt;0. This is to immitate std::lower_bound's behavior. </dd></dl>

<p>Definition at line <a class="el" href="sysxct__impl_8cpp_source.html#l00098">98</a> of file <a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00345">assert_last_locked_entry()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8cpp_source.html#l00152">batch_get_or_add_entries()</a>, and <a class="el" href="sysxct__impl_8cpp_source.html#l00103">get_or_add_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                                                       {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818">assert_last_locked_entry</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">return</span> lock_lower_bound&lt;SysxctLockList, SysxctLockEntry&gt;(*<span class="keyword">this</span>, lock);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a0fac78a9788fb85d3b8c649309bf8818"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818">foedus::xct::SysxctLockList::assert_last_locked_entry</a></div><div class="ttdeci">void assert_last_locked_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00345">sysxct_impl.hpp:345</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a0fac78a9788fb85d3b8c649309bf8818" title="foedus::xct::SysxctLockList\l::assert_last_locked_entry" alt="" coords="237,13,421,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#adc26bf8b559e20ce48b16e2a3fce38ee" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="469,13,660,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1SysxctLockList.html#a7dfb818885a95b3ff1ef8dc3b052baca" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="708,5,892,61"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_ac48e18b6575b506fc4388c0cd9779b8f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a9a12a820ec2e222073992d584fdf683c" title="Batched version of get_or_add_entry(). " alt="" coords="469,5,653,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a241bea116d8bbceba98949d1ba13d7a8" title="foedus::xct::SysxctLockList\l::get_or_add_entry" alt="" coords="237,35,421,76"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a164d10c99856a341cb86d52ee0eaff79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a>&amp; foedus::xct::SysxctLockList::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8f37f1ac6ee205126ce76fe7ae2f5d52"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_ADAPTOR &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::SysxctLockList::release_all_locks </td>
          <td>(</td>
          <td class="paramtype">MCS_ADAPTOR&#160;</td>
          <td class="paramname"><em>mcs_adaptor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases all locks that were acquired. </p>
<p>Entries are left as they were. You should then call <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a56013b57350b29742790c8333995b36f" title="Remove all entries. ">clear_entries()</a> or <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html#a3846f340ffc539d6a6f66c6d9bf7d257" title="Unlike clear_entries(), this is used when a sysxct is aborted and will be retried. ">compress_entries()</a>. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00647">647</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="sysxct__impl_8hpp_source.html#l00316">begin()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00317">end()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="page_8hpp_source.html#l00171">foedus::storage::PageVersion::lock_</a>, <a class="el" href="page_8hpp_source.html#l00272">foedus::storage::PageHeader::page_version_</a>, <a class="el" href="xct__mcs__impl_8cpp_source.html#l00212">foedus::xct::McsWwImpl&lt; ADAPTOR &gt;::release()</a>, and <a class="el" href="classfoedus_1_1xct_1_1McsImpl.html#a86b4d6065874e4e6001ff57881bfdc34">foedus::xct::McsImpl&lt; ADAPTOR, RW_BLOCK &gt;::release_rw_writer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                                                     {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>* entry = <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a357b461dc64f2f7dc38b4c3484d4a1bc">begin</a>(); entry != <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8df217277becb9d126eb24dce90391ad">end</a>(); ++entry) {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (!entry-&gt;is_locked()) {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (entry-&gt;page_lock_) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      McsWwImpl&lt; MCS_ADAPTOR &gt; impl(mcs_adaptor);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      storage::Page* page = entry-&gt;get_as_page_lock();</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      McsWwLock* lock_addr = &amp;page-&gt;get_header().page_version_.lock_;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      impl.release(lock_addr, entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      McsImpl&lt; MCS_ADAPTOR, typename MCS_ADAPTOR::ThisRwBlock &gt; impl(mcs_adaptor);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      McsRwLock* lock_addr = &amp;entry-&gt;get_as_record_lock()-&gt;lock_;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      impl.release_rw_writer(lock_addr, entry-&gt;mcs_block_);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      entry-&gt;mcs_block_ = 0;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  last_locked_entry_ = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a357b461dc64f2f7dc38b4c3484d4a1bc"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a357b461dc64f2f7dc38b4c3484d4a1bc">foedus::xct::SysxctLockList::begin</a></div><div class="ttdeci">SysxctLockEntry * begin()</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00316">sysxct_impl.hpp:316</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_a8df217277becb9d126eb24dce90391ad"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#a8df217277becb9d126eb24dce90391ad">foedus::xct::SysxctLockList::end</a></div><div class="ttdeci">SysxctLockEntry * end()</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00317">sysxct_impl.hpp:317</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a8f37f1ac6ee205126ce76fe7ae2f5d52_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a8f37f1ac6ee205126ce76fe7ae2f5d52_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a8f37f1ac6ee205126ce76fe7ae2f5d52_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a8f37f1ac6ee205126ce76fe7ae2f5d52_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#a357b461dc64f2f7dc38b4c3484d4a1bc" title="foedus::xct::SysxctLockList\l::begin" alt="" coords="252,67,436,108"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1SysxctLockList.html#a8df217277becb9d126eb24dce90391ad" title="foedus::xct::SysxctLockList::end" alt="" coords="237,133,451,159"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="269,184,419,225"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1McsWwImpl.html#a23095f2685916d313450e79bdb27b872" title="[WW] Unlcok an MCS lock acquired by this thread. " alt="" coords="261,249,427,291"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1McsImpl.html#a86b4d6065874e4e6001ff57881bfdc34" title="[RW] Releases a writer lock. " alt="" coords="273,315,415,356"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8" title="foedus::xct::assert\l_mcs_aligned" alt="" coords="534,5,665,47"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1McsWwBlock.html#a23c86b1f40afff35086201b0e1c7e091" title="Carefully use this! In some places you must call copy_once() then call this on the copy..." alt="" coords="512,71,687,127"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1McsWwLock.html#a7d38b992d2324394011b44322f3961e1" title="This is a &quot;relaxed&quot; check. " alt="" coords="515,152,684,193"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1McsWwBlock.html#ab13f4e6a83ccfa940a29cfc2679917bc" title="foedus::xct::McsWwBlock\l::has_successor_acquire" alt="" coords="512,217,687,259"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1McsWwBlockData.html#ae1dc97f03080589ed7ad1cabbdf07ae3" title="foedus::xct::McsWwBlockData\l::is_guest_relaxed" alt="" coords="499,283,700,324"/>
<area shape="rect" id="node15" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="515,348,684,389"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="748,369,949,411"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490" title="foedus::xct::spin_until" alt="" coords="525,465,674,491"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3d5ca0f6b8e220f611eabfa5418640fa" title="Carefully use this! In some places you must call get_word_once() then call this on the copy..." alt="" coords="748,116,949,157"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1McsWwBlockData.html#ae6932458ac7fb8835390cd6c5fb70df9" title="foedus::xct::McsWwBlockData\l::decompose_thread_id" alt="" coords="997,116,1199,157"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aea0b4528e5f566b470134d7774232138" title="foedus::xct::McsWwBlockData\l::is_valid_acquire" alt="" coords="748,217,949,259"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1McsWwBlockData.html#ab9d405536ed7fa9ea2b3f71ea9e21d8f" title="foedus::xct::McsWwBlockData\l::get_word_acquire" alt="" coords="997,217,1199,259"/>
<area shape="rect" id="node18" href="namespacefoedus_1_1assorted.html#aba5893ad8aab7d6aafff7be7f92e1372" title="Spin locally until the given condition returns true. " alt="" coords="773,457,924,499"/>
<area shape="rect" id="node19" href="classfoedus_1_1debugging_1_1RdtscWatch.html#afc5d436b00dfd6af4727e4975e84aa75" title="foedus::debugging::\lRdtscWatch::elapsed" alt="" coords="1247,428,1393,469"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1assorted.html#aea055a054d205c76d8f221de4f6aa058" title="foedus::assorted::is\l_running_on_valgrind" alt="" coords="1027,424,1169,465"/>
<area shape="rect" id="node21" href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb" title="Invoke _mm_pause(), x86 PAUSE instruction, or something equivalent in the env. " alt="" coords="1011,489,1185,531"/>
<area shape="rect" id="node22" href="classfoedus_1_1debugging_1_1RdtscWatch.html#a0f5961269d79e636777d722ade37dd2e" title="Take another current time tick. " alt="" coords="1031,555,1165,596"/>
<area shape="rect" id="node23" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="1253,555,1387,596"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae67e477c34f96851f33d8e09edc6032a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_ADAPTOR &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::SysxctLockList::request_page_lock </td>
          <td>(</td>
          <td class="paramtype">MCS_ADAPTOR&#160;</td>
          <td class="paramname"><em>mcs_adaptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td>
          <td class="paramname"><em>page</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquires a page lock. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00241">241</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="page_8hpp_source.html#l00339">foedus::storage::Page::get_volatile_page_id()</a>.</p>

<p>Referenced by <a class="el" href="sysxct__impl_8hpp_source.html#l00252">batch_request_page_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                                                          {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    uintptr_t lock_addr = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(page);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> request_lock_general(mcs_adaptor, page-&gt;get_volatile_page_id(), lock_addr, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="237,5,387,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_icgraph" id="classfoedus_1_1xct_1_1SysxctLockList_ae67e477c34f96851f33d8e09edc6032a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#ae24498fc6d57f691a45369b1b9c0d50f" title="The interface is same as the record version, but this one doesn&#39;t do much optimization. " alt="" coords="237,5,423,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4d43070d7ace35522892eed103ca3838"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_ADAPTOR &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::SysxctLockList::request_record_lock </td>
          <td>(</td>
          <td class="paramtype">MCS_ADAPTOR&#160;</td>
          <td class="paramname"><em>mcs_adaptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If not yet acquired, acquires a record lock and adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness. </p>
<p>If there is an existing entry for the lock, it resuses the entry. </p><dl class="section post"><dt>Postcondition</dt><dd>Either the lock is taken or returns an error </dd></dl>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00220">220</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                           {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    uintptr_t lock_addr = <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(lock);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">return</span> request_lock_general(mcs_adaptor, page_id, lock_addr, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8967a3f413bb1b685bf9135302ee31f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> foedus::xct::SysxctLockList::to_pos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">SysxctLockEntry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00320">320</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="sysxct__impl_8hpp_source.html#l00306">get_last_active_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                                                              {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(entry &gt; array_);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> pos = entry - array_;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pos &lt;= <a class="code" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">get_last_active_entry</a>());</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1SysxctLockList_html_af26261addcc02e6724d6bba3f31a1214"><div class="ttname"><a href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214">foedus::xct::SysxctLockList::get_last_active_entry</a></div><div class="ttdeci">LockListPosition get_last_active_entry() const </div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00306">sysxct_impl.hpp:306</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1SysxctLockList_a8967a3f413bb1b685bf9135302ee31f3_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1SysxctLockList_a8967a3f413bb1b685bf9135302ee31f3_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1SysxctLockList_a8967a3f413bb1b685bf9135302ee31f3_cgraph" id="classfoedus_1_1xct_1_1SysxctLockList_a8967a3f413bb1b685bf9135302ee31f3_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1SysxctLockList.html#af26261addcc02e6724d6bba3f31a1214" title="foedus::xct::SysxctLockList\l::get_last_active_entry" alt="" coords="237,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a076076fbf1570b23bd986e8663b143a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8cpp_source.html#l00053">53</a> of file <a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                                                               {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;SysxctLockList&gt;&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;Capacity&gt;&quot;</span> &lt;&lt; v.get_capacity() &lt;&lt; <span class="stringliteral">&quot;&lt;/Capacity&gt;&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;LastActiveEntry&gt;&quot;</span> &lt;&lt; v.get_last_active_entry() &lt;&lt; <span class="stringliteral">&quot;&lt;/LastActiveEntry&gt;&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;LastLockedEntry&gt;&quot;</span> &lt;&lt; v.get_last_locked_entry() &lt;&lt; <span class="stringliteral">&quot;&lt;/LastLockedEntry&gt;&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;EnclosingMaxLockId&gt;&quot;</span> &lt;&lt; v.get_enclosing_max_lock_id() &lt;&lt; <span class="stringliteral">&quot;&lt;/EnclosingMaxLockId&gt;&quot;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keyword">const</span> uint32_t kMaxShown = 32U;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> i = 1U; i &lt;= std::min(v.last_active_entry_, kMaxShown); ++i) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    o &lt;&lt; std::endl &lt;&lt; v.array_[i];</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span> (v.last_active_entry_ &gt; kMaxShown) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;&lt;too_many /&gt;&quot;</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/SysxctLockList&gt;&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af18c3b802bb35d15574ca5e090a18ccb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend struct TestIsTryRequired</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00168">168</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/xct/<a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/xct/<a class="el" href="sysxct__impl_8cpp_source.html">sysxct_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1xct.html">xct</a></li><li class="navelem"><a class="el" href="classfoedus_1_1xct_1_1SysxctLockList.html">SysxctLockList</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
