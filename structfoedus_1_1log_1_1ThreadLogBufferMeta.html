<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::log::ThreadLogBufferMeta Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structfoedus_1_1log_1_1ThreadLogBufferMeta.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="structfoedus_1_1log_1_1ThreadLogBufferMeta-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::log::ThreadLogBufferMeta Struct Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__LOG.html">Log Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Metadata part of <a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread-local log buffer. ">ThreadLogBuffer</a>, without the actual buffer which is way way larger.  
 <a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Metadata part of <a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread-local log buffer. ">ThreadLogBuffer</a>, without the actual buffer which is way way larger. </p>
<dl class="section user"><dt>Circular Log Buffer</dt><dd>This class forms a circular buffer used by log appender (Thread, which we call "the thread" or "this thread" all over the place), log writer (<a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a>), and log gleaner (LogGleaner). We maintain four offsets on the buffer. <table class="doxtable">
<tr>
<th>Marker</th><th>Read by</th><th>Written by</th><th>Description </th></tr>
<tr>
<td>offset_head_ (<b>H</b>) </td><td>Thread</td><td>Thread, LogGleaner </td><td>This marks the position where log entries start.  This private log buffer is a circular buffer where the <em>head</em> is eaten by log gleaner. However, log gleaner is okay to get behind, reading from log file instead (but slower). Thus, offset_head_ is advanced either by log gleaner or this thread. If the latter happens, log gleaner has to give up using in-memory logs and instead read from log files.  </td></tr>
<tr>
<td>offset_durable_ (<b>D</b>) </td><td>Thread, LogGleaner</td><td><a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a> </td><td>This marks the position upto which the log writer durably wrote out to log files.  Everything after this position must not be discarded because they are not yet durable. When the log writer reads log entries after here, writes them to log file, and calls fsync, this variable is advanced by the log writer. This variable is read by this thread to check the end of the circular buffer.  </td></tr>
<tr>
<td>offset_committed_ (<b>C</b>) </td><td>Thread, <a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">Logger</a></td><td>Thread </td><td>This marks the position upto which transaction logs are committed by the thread.  Log writers can safely read log entries and write them to log files up to this place. When the transaction commits, this value is advanced by the thread. The only possible update pattern to this variable is <b>advance</b> by this thread. Thus, the log writer can safely read this variable without any fence or lock thanks to regular (either old value or new value, never garbage) read of 64-bit.  </td></tr>
<tr>
<td>offset_tail_ (<b>T</b>) </td><td>Thread</td><td>Thread </td><td>The current cursor to which next log will be written.  This is the location the current transaction of this thread is writing to <b>before</b> commit. When the transaction commits, offset_committed_ catches up with this. When the transaction aborts, this value rolls back to offset_committed_. Only this thread reads/writes to this variable. No other threads access this.  </td></tr>
</table>
</dd></dl>
<dl class="section user"><dt>Circular Epoch Mark array</dt><dd>This class also forms a circulary array of <a class="el" href="structfoedus_1_1log_1_1ThreadEpockMark.html" title="A thread-buffer&#39;s epoch marker, which indicates where a thread switched an epoch. ...">ThreadEpockMark</a> to mark where the thread switched epochs to help the logger. oldest_mark_index_ (inclusive) to current_mark_index_ (exclusive) are the loggable entries that can be written out by the logger. current_mark_index_ is now being written by the thread, so the logger avoids writing logs in that epoch (it's doable to write out logs in this epoch, but we avoid it to simplify and also maximize the batch-size of I/O in the logger). Further, the following section details one special case.</dd></dl>
<dl class="section user"><dt>Epoch Mark while the thread is idle</dt><dd>This is complicated, thus worth a detailed explanation. As described in the xct manager, we use the in-commit epoch guard to advance epochs even when some thread is idle and cannot advance the thread's latest_epoch. And, the logger write out logs up to current global epoch - 2, so this class is guaranteed to not have any real race (eg the thread now writing a new log entry or a new epoch mark for the written_epoch). Hence, get_logs_to_write() and on_log_written() handle the following situations: <ul>
<li>Case 1) The oldest mark has <b>new_epoch&gt;written_epoch</b> : This means the thread is going faster than the logger, and there is no log in the written_epoch. Empty log range by get_logs_to_write() and nothing to do in on_log_written(). </li>
<li>Case 2) The oldest mark has <b>new_epoch==written_epoch</b> : The mark is exactly the one the logger is looking for, but there are two cases. </li>
<li>Case 2-a) The oldest mark is not current mark (<b>oldest!=current</b>) : Quite usual. Valid log range by get_logs_to_write() and on_log_written() increments oldest_mark_index_. </li>
<li>Case 2-b) The oldest mark is the current mark (<b>oldest==current</b>) : This is the case where the thread is idle for a while after writing a log in written_epoch. Because oldest mark is the current mark, offset_end_ is not populated yet. However, because the thread never emits new logs in written_epoch, the logger can safely populate it with offset_committed_ (with a few fences). on_log_written() does <b>nothing</b> in this case. </li>
<li>Case 3) The oldest mark has <b>new_epoch&lt;written_epoch</b> : This happens in the next logger visit after 2-b. If still oldest==current, empty log range and nothing to do in on_log_written(). If oldest!=current, we advance oldest as much as possible to determine log range. Don't worry about synchronization here. Again, the thread emits log only in current or current-1 epoch, so there is no chance it adds a new epoch mark with new_epoch&lt;=writen_epoch.</li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structfoedus_1_1log_1_1ThreadEpockMark.html" title="A thread-buffer&#39;s epoch marker, which indicates where a thread switched an epoch. ...">foedus::log::ThreadEpockMark</a> </dd>
<dd>
<a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread-local log buffer. ">foedus::log::ThreadLogBuffer</a> </dd></dl>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00147">147</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for foedus::log::ThreadLogBufferMeta:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1log_1_1ThreadLogBufferMeta__coll__graph.png" border="0" usemap="#foedus_1_1log_1_1ThreadLogBufferMeta_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1log_1_1ThreadLogBufferMeta_coll__map" id="foedus_1_1log_1_1ThreadLogBufferMeta_coll__map">
<area shape="rect" id="node2" href="structfoedus_1_1log_1_1ThreadEpockMark.html" title="A thread&#45;buffer&#39;s epoch marker, which indicates where a thread switched an epoch. ..." alt="" coords="13,109,212,136"/>
<area shape="rect" id="node3" href="classfoedus_1_1Epoch.html" title="Represents a time epoch. " alt="" coords="60,5,165,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a7437875632a276e19368c9f64734210d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210d">Constants</a> { <a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a> = 64
 }<tr class="separator:a7437875632a276e19368c9f64734210d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5cdc7a93f71729fc9822d236c892885f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5cdc7a93f71729fc9822d236c892885f">ThreadLogBufferMeta</a> ()</td></tr>
<tr class="separator:a5cdc7a93f71729fc9822d236c892885f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05db4e7c61f07d2320aa7b2c3c76d520"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a05db4e7c61f07d2320aa7b2c3c76d520">assert_consistent</a> () const </td></tr>
<tr class="memdesc:a05db4e7c61f07d2320aa7b2c3c76d520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only for Debug-assertion.  <a href="#a05db4e7c61f07d2320aa7b2c3c76d520">More...</a><br /></td></tr>
<tr class="separator:a05db4e7c61f07d2320aa7b2c3c76d520"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5dd02cf36ffdb642d41badfc61381621"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621">increment_mark_index</a> (uint32_t index)</td></tr>
<tr class="separator:a5dd02cf36ffdb642d41badfc61381621"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aa015fde211c913255fbed3a3bee54884"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#aa015fde211c913255fbed3a3bee54884">thread_id_</a></td></tr>
<tr class="separator:aa015fde211c913255fbed3a3bee54884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c78da21a2ab623ed8fb2a184413bdd2"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a3c78da21a2ab623ed8fb2a184413bdd2">padding1_</a></td></tr>
<tr class="separator:a3c78da21a2ab623ed8fb2a184413bdd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a90cec956f205a1126cab4c4e4df3dc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a8a90cec956f205a1126cab4c4e4df3dc">padding2_</a></td></tr>
<tr class="separator:a8a90cec956f205a1126cab4c4e4df3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc65d5871a4da5bf8f4e2bf162e9ba9d"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">buffer_size_</a></td></tr>
<tr class="memdesc:acc65d5871a4da5bf8f4e2bf162e9ba9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the buffer assigned to this thread.  <a href="#acc65d5871a4da5bf8f4e2bf162e9ba9d">More...</a><br /></td></tr>
<tr class="separator:acc65d5871a4da5bf8f4e2bf162e9ba9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98ac9b46082c2120a347c175ebd0e340"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a98ac9b46082c2120a347c175ebd0e340">buffer_size_safe_</a></td></tr>
<tr class="memdesc:a98ac9b46082c2120a347c175ebd0e340"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer_size_ - 64.  <a href="#a98ac9b46082c2120a347c175ebd0e340">More...</a><br /></td></tr>
<tr class="separator:a98ac9b46082c2120a347c175ebd0e340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23d3ecc1c5c72bfc563b4397cb06925b"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a23d3ecc1c5c72bfc563b4397cb06925b">offset_head_</a></td></tr>
<tr class="memdesc:a23d3ecc1c5c72bfc563b4397cb06925b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This marks the position where log entries start.  <a href="#a23d3ecc1c5c72bfc563b4397cb06925b">More...</a><br /></td></tr>
<tr class="separator:a23d3ecc1c5c72bfc563b4397cb06925b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace5d36306d82f856042d30c5eb5e5635"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">offset_durable_</a></td></tr>
<tr class="memdesc:ace5d36306d82f856042d30c5eb5e5635"><td class="mdescLeft">&#160;</td><td class="mdescRight">This marks the position upto which the log writer durably wrote out to log files.  <a href="#ace5d36306d82f856042d30c5eb5e5635">More...</a><br /></td></tr>
<tr class="separator:ace5d36306d82f856042d30c5eb5e5635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657d9371aa5deec7dfbbad85f4352f37"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">offset_committed_</a></td></tr>
<tr class="memdesc:a657d9371aa5deec7dfbbad85f4352f37"><td class="mdescLeft">&#160;</td><td class="mdescRight">This marks the position upto which transaction logs are committed by the thread.  <a href="#a657d9371aa5deec7dfbbad85f4352f37">More...</a><br /></td></tr>
<tr class="separator:a657d9371aa5deec7dfbbad85f4352f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed758916ac4cc7780cd57c4f5912a7b"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#abed758916ac4cc7780cd57c4f5912a7b">offset_tail_</a></td></tr>
<tr class="memdesc:abed758916ac4cc7780cd57c4f5912a7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current cursor to which next log will be written.  <a href="#abed758916ac4cc7780cd57c4f5912a7b">More...</a><br /></td></tr>
<tr class="separator:abed758916ac4cc7780cd57c4f5912a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7071fa55176f66f7804f56bef61212a3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1log_1_1ThreadEpockMark.html">ThreadEpockMark</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">thread_epoch_marks_</a> [<a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a>]</td></tr>
<tr class="memdesc:a7071fa55176f66f7804f56bef61212a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Circular array of epoch marks of a thread log buffer.  <a href="#a7071fa55176f66f7804f56bef61212a3">More...</a><br /></td></tr>
<tr class="separator:a7071fa55176f66f7804f56bef61212a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a396d005a0e874d98f42db6243d2af266"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a396d005a0e874d98f42db6243d2af266">oldest_mark_index_</a></td></tr>
<tr class="memdesc:a396d005a0e874d98f42db6243d2af266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array index in thread_epoch_marks_ that indicates the oldest epoch mark to be consumed by the logger.  <a href="#a396d005a0e874d98f42db6243d2af266">More...</a><br /></td></tr>
<tr class="separator:a396d005a0e874d98f42db6243d2af266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9df21eea0d60c49c4f0a4fd7db148dbe"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">current_mark_index_</a></td></tr>
<tr class="memdesc:a9df21eea0d60c49c4f0a4fd7db148dbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array index in thread_epoch_marks_ that indicates the current epoch being appended by the thread, so the logger must avoid touching the epoch.  <a href="#a9df21eea0d60c49c4f0a4fd7db148dbe">More...</a><br /></td></tr>
<tr class="separator:a9df21eea0d60c49c4f0a4fd7db148dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a9a3de9422f00cd74b2f85360a232458e"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9a3de9422f00cd74b2f85360a232458e">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html">ThreadLogBufferMeta</a> &amp;v)</td></tr>
<tr class="separator:a9a3de9422f00cd74b2f85360a232458e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a7437875632a276e19368c9f64734210d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210d">foedus::log::ThreadLogBufferMeta::Constants</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f"></a>kMaxNonDurableEpochs&#160;</td><td class="fielddoc">
<p>Each thread can have at most this number of epochs in this log buffer. </p>
<p>For example, if the assigned logger made the logs of this thread durable up to ep-3, the thread must not write out further logs in ep-67. It has to wait until the logger catches up. As far as the user assigns a sufficient number of loggers, it shouldn't cause any issue. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00148">148</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                 {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a> = 64,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  };</div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">foedus::log::ThreadLogBufferMeta::kMaxNonDurableEpochs</a></div><div class="ttdoc">Each thread can have at most this number of epochs in this log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00157">thread_log_buffer.hpp:157</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5cdc7a93f71729fc9822d236c892885f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::log::ThreadLogBufferMeta::ThreadLogBufferMeta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">44</a> of file <a class="el" href="thread__log__buffer_8cpp_source.html">thread_log_buffer.cpp</a>.</p>

<p>References <a class="el" href="thread__log__buffer_8hpp_source.html#l00179">buffer_size_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00189">buffer_size_safe_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00251">current_mark_index_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00221">offset_committed_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00210">offset_durable_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00200">offset_head_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00231">offset_tail_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00241">oldest_mark_index_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00234">thread_epoch_marks_</a>, and <a class="el" href="thread__log__buffer_8hpp_source.html#l00174">thread_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                         {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#aa015fde211c913255fbed3a3bee54884">thread_id_</a> = 0;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">buffer_size_</a> = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a98ac9b46082c2120a347c175ebd0e340">buffer_size_safe_</a> = 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a23d3ecc1c5c72bfc563b4397cb06925b">offset_head_</a> = 0;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">offset_durable_</a> = 0;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">offset_committed_</a> = 0;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#abed758916ac4cc7780cd57c4f5912a7b">offset_tail_</a> = 0;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  std::memset(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">thread_epoch_marks_</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">thread_epoch_marks_</a>));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a396d005a0e874d98f42db6243d2af266">oldest_mark_index_</a> = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">current_mark_index_</a> = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a9df21eea0d60c49c4f0a4fd7db148dbe"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">foedus::log::ThreadLogBufferMeta::current_mark_index_</a></div><div class="ttdeci">uint32_t current_mark_index_</div><div class="ttdoc">Array index in thread_epoch_marks_ that indicates the current epoch being appended by the thread...</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00251">thread_log_buffer.hpp:251</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_acc65d5871a4da5bf8f4e2bf162e9ba9d"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">foedus::log::ThreadLogBufferMeta::buffer_size_</a></div><div class="ttdeci">uint64_t buffer_size_</div><div class="ttdoc">Size of the buffer assigned to this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00179">thread_log_buffer.hpp:179</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_aa015fde211c913255fbed3a3bee54884"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#aa015fde211c913255fbed3a3bee54884">foedus::log::ThreadLogBufferMeta::thread_id_</a></div><div class="ttdeci">thread::ThreadId thread_id_</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00174">thread_log_buffer.hpp:174</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a657d9371aa5deec7dfbbad85f4352f37"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">foedus::log::ThreadLogBufferMeta::offset_committed_</a></div><div class="ttdeci">uint64_t offset_committed_</div><div class="ttdoc">This marks the position upto which transaction logs are committed by the thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00221">thread_log_buffer.hpp:221</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a7071fa55176f66f7804f56bef61212a3"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">foedus::log::ThreadLogBufferMeta::thread_epoch_marks_</a></div><div class="ttdeci">ThreadEpockMark thread_epoch_marks_[kMaxNonDurableEpochs]</div><div class="ttdoc">Circular array of epoch marks of a thread log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00234">thread_log_buffer.hpp:234</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a23d3ecc1c5c72bfc563b4397cb06925b"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a23d3ecc1c5c72bfc563b4397cb06925b">foedus::log::ThreadLogBufferMeta::offset_head_</a></div><div class="ttdeci">uint64_t offset_head_</div><div class="ttdoc">This marks the position where log entries start. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00200">thread_log_buffer.hpp:200</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_ace5d36306d82f856042d30c5eb5e5635"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">foedus::log::ThreadLogBufferMeta::offset_durable_</a></div><div class="ttdeci">uint64_t offset_durable_</div><div class="ttdoc">This marks the position upto which the log writer durably wrote out to log files. ...</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00210">thread_log_buffer.hpp:210</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_abed758916ac4cc7780cd57c4f5912a7b"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#abed758916ac4cc7780cd57c4f5912a7b">foedus::log::ThreadLogBufferMeta::offset_tail_</a></div><div class="ttdeci">uint64_t offset_tail_</div><div class="ttdoc">The current cursor to which next log will be written. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00231">thread_log_buffer.hpp:231</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a396d005a0e874d98f42db6243d2af266"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a396d005a0e874d98f42db6243d2af266">foedus::log::ThreadLogBufferMeta::oldest_mark_index_</a></div><div class="ttdeci">uint32_t oldest_mark_index_</div><div class="ttdoc">Array index in thread_epoch_marks_ that indicates the oldest epoch mark to be consumed by the logger...</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00241">thread_log_buffer.hpp:241</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a98ac9b46082c2120a347c175ebd0e340"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a98ac9b46082c2120a347c175ebd0e340">foedus::log::ThreadLogBufferMeta::buffer_size_safe_</a></div><div class="ttdeci">uint64_t buffer_size_safe_</div><div class="ttdoc">buffer_size_ - 64. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00189">thread_log_buffer.hpp:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a05db4e7c61f07d2320aa7b2c3c76d520"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::log::ThreadLogBufferMeta::assert_consistent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Only for Debug-assertion. </p>
<p>This method must be called by the worker thread itself. When logger calls it, it must make sure the worker is not modifying anything concurrently. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">59</a> of file <a class="el" href="thread__log__buffer_8cpp_source.html">thread_log_buffer.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00179">buffer_size_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00251">current_mark_index_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00170">increment_mark_index()</a>, <a class="el" href="epoch_8hpp_source.html#l00096">foedus::Epoch::is_valid()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00157">kMaxNonDurableEpochs</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00061">foedus::log::ThreadEpockMark::new_epoch_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00066">foedus::log::ThreadEpockMark::offset_begin_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00221">offset_committed_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00210">offset_durable_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00074">foedus::log::ThreadEpockMark::offset_end_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00200">offset_head_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00231">offset_tail_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00052">foedus::log::ThreadEpockMark::old_epoch_</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00241">oldest_mark_index_</a>, and <a class="el" href="thread__log__buffer_8hpp_source.html#l00234">thread_epoch_marks_</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8hpp_source.html#l00306">foedus::log::ThreadLogBuffer::assert_consistent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                                  {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// These assertions might have a false positive unless run in a 1-threaded situation.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// But, it would be negligibly rare, and anyway it is wiped out in release mode.</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// So, if you believe you are hitting assertion here because of a sheer luck, ignore.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// In 99% cases these assersions fire for a valid reason, though.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// Q: Making it thread-safe? A: That means even non-debug codepath becomes superslow.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// Note, we thus use this method only from the worker thread itself. Then it&#39;s safe.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a23d3ecc1c5c72bfc563b4397cb06925b">offset_head_</a> &lt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">buffer_size_</a></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    &amp;&amp; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">offset_durable_</a> &lt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">buffer_size_</a></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    &amp;&amp; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">offset_committed_</a> &lt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">buffer_size_</a></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    &amp;&amp; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#abed758916ac4cc7780cd57c4f5912a7b">offset_tail_</a> &lt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">buffer_size_</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// because of wrap around, *at most* one of them does not hold</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordtype">int</span> violation_count = 0;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a23d3ecc1c5c72bfc563b4397cb06925b">offset_head_</a> &gt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">offset_durable_</a>) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    ++violation_count;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">offset_durable_</a> &gt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">offset_committed_</a>) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    ++violation_count;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">offset_committed_</a> &gt; <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#abed758916ac4cc7780cd57c4f5912a7b">offset_tail_</a>) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    ++violation_count;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(violation_count &lt;= 1);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a396d005a0e874d98f42db6243d2af266">oldest_mark_index_</a> &lt; static_cast&lt;uint32_t&gt;(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a>));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">current_mark_index_</a> &lt; static_cast&lt;uint32_t&gt;(<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a>));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a396d005a0e874d98f42db6243d2af266">oldest_mark_index_</a>; i != <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">current_mark_index_</a>; i = <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621">increment_mark_index</a>(i)) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    ThreadEpockMark mark = <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">thread_epoch_marks_</a>[i];</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    ThreadEpockMark next = <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">thread_epoch_marks_</a>[<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621">increment_mark_index</a>(i)];</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mark.old_epoch_.is_valid());</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mark.new_epoch_.is_valid());</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mark.old_epoch_ &lt; mark.new_epoch_);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mark.new_epoch_ == next.old_epoch_);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mark.offset_end_ == next.offset_begin_);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  ThreadEpockMark cur = <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">thread_epoch_marks_</a>[<a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">current_mark_index_</a>];</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur.old_epoch_.is_valid());</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur.new_epoch_.is_valid());</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur.old_epoch_ &lt; cur.new_epoch_);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur.offset_end_ == 0 || cur.offset_end_ == <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">offset_committed_</a>);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a5dd02cf36ffdb642d41badfc61381621"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621">foedus::log::ThreadLogBufferMeta::increment_mark_index</a></div><div class="ttdeci">static uint32_t increment_mark_index(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00170">thread_log_buffer.hpp:170</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a9df21eea0d60c49c4f0a4fd7db148dbe"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a9df21eea0d60c49c4f0a4fd7db148dbe">foedus::log::ThreadLogBufferMeta::current_mark_index_</a></div><div class="ttdeci">uint32_t current_mark_index_</div><div class="ttdoc">Array index in thread_epoch_marks_ that indicates the current epoch being appended by the thread...</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00251">thread_log_buffer.hpp:251</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_acc65d5871a4da5bf8f4e2bf162e9ba9d"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#acc65d5871a4da5bf8f4e2bf162e9ba9d">foedus::log::ThreadLogBufferMeta::buffer_size_</a></div><div class="ttdeci">uint64_t buffer_size_</div><div class="ttdoc">Size of the buffer assigned to this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00179">thread_log_buffer.hpp:179</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">foedus::log::ThreadLogBufferMeta::kMaxNonDurableEpochs</a></div><div class="ttdoc">Each thread can have at most this number of epochs in this log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00157">thread_log_buffer.hpp:157</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a657d9371aa5deec7dfbbad85f4352f37"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a657d9371aa5deec7dfbbad85f4352f37">foedus::log::ThreadLogBufferMeta::offset_committed_</a></div><div class="ttdeci">uint64_t offset_committed_</div><div class="ttdoc">This marks the position upto which transaction logs are committed by the thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00221">thread_log_buffer.hpp:221</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a7071fa55176f66f7804f56bef61212a3"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7071fa55176f66f7804f56bef61212a3">foedus::log::ThreadLogBufferMeta::thread_epoch_marks_</a></div><div class="ttdeci">ThreadEpockMark thread_epoch_marks_[kMaxNonDurableEpochs]</div><div class="ttdoc">Circular array of epoch marks of a thread log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00234">thread_log_buffer.hpp:234</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a23d3ecc1c5c72bfc563b4397cb06925b"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a23d3ecc1c5c72bfc563b4397cb06925b">foedus::log::ThreadLogBufferMeta::offset_head_</a></div><div class="ttdeci">uint64_t offset_head_</div><div class="ttdoc">This marks the position where log entries start. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00200">thread_log_buffer.hpp:200</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_ace5d36306d82f856042d30c5eb5e5635"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#ace5d36306d82f856042d30c5eb5e5635">foedus::log::ThreadLogBufferMeta::offset_durable_</a></div><div class="ttdeci">uint64_t offset_durable_</div><div class="ttdoc">This marks the position upto which the log writer durably wrote out to log files. ...</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00210">thread_log_buffer.hpp:210</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_abed758916ac4cc7780cd57c4f5912a7b"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#abed758916ac4cc7780cd57c4f5912a7b">foedus::log::ThreadLogBufferMeta::offset_tail_</a></div><div class="ttdeci">uint64_t offset_tail_</div><div class="ttdoc">The current cursor to which next log will be written. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00231">thread_log_buffer.hpp:231</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a396d005a0e874d98f42db6243d2af266"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a396d005a0e874d98f42db6243d2af266">foedus::log::ThreadLogBufferMeta::oldest_mark_index_</a></div><div class="ttdeci">uint32_t oldest_mark_index_</div><div class="ttdoc">Array index in thread_epoch_marks_ that indicates the oldest epoch mark to be consumed by the logger...</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00241">thread_log_buffer.hpp:241</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_cgraph.png" border="0" usemap="#structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_cgraph" alt=""/></div>
<map name="structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_cgraph" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621" title="foedus::log::ThreadLogBuffer\lMeta::increment_mark_index" alt="" coords="240,5,431,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="258,71,413,98"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_icgraph.png" border="0" usemap="#structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_icgraph" alt=""/></div>
<map name="structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_icgraph" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_a05db4e7c61f07d2320aa7b2c3c76d520_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9aa20c59a7d75cf94742beb43b777de6" title="Only for Debug&#45;assertion. " alt="" coords="240,772,427,813"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="475,772,661,813"/>
<area shape="rect" id="node4" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="709,772,896,813"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ab8696b7ccf07c7b8e1efb038d8cd83c2" title="Append one record to this sequential storage. " alt="" coords="944,56,1173,97"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="972,122,1145,178"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="968,267,1149,323"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="972,413,1145,469"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="957,497,1161,553"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="957,585,1160,641"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="957,681,1161,737"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="972,765,1145,821"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="969,878,1148,934"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="972,1059,1145,1115"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7dde5581eee977242b5373e30365183f" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="960,1139,1157,1195"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="961,1321,1157,1377"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d324da4dcd35490820cb97e7124001b" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="960,1401,1157,1457"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="972,1551,1145,1607"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="967,1667,1150,1723"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#af263fb1494c7ac6a5dbfd28b926ede3b" title="foedus::storage::masstree\l::MasstreeCursor::delete_record" alt="" coords="1236,5,1444,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1515,97,1729,139"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1253,122,1427,178"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1266,202,1414,258"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="1225,283,1455,324"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1221,348,1459,389"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1243,414,1437,470"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1255,494,1425,550"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1255,574,1425,630"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="1255,654,1425,710"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1234,735,1446,776"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1253,801,1427,857"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1267,881,1413,937"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#ab8b1919cb195dd063be409f772b36630" title="foedus::storage::masstree\l::MasstreeCursor::overwrite_record" alt="" coords="1229,961,1451,1003"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a496370a645284f8578875529c6eacb0f" title="foedus::storage::masstree\l::MasstreeCursor::overwrite\l_record_primitive" alt="" coords="1250,1027,1430,1083"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1507,1173,1737,1215"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1247,1158,1433,1214"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1247,1238,1433,1294"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1245,1318,1435,1374"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1242,1398,1438,1454"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1259,1478,1421,1534"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1541,1398,1703,1454"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1232,1559,1448,1600"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1253,1625,1427,1681"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1265,1705,1415,1761"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5dd02cf36ffdb642d41badfc61381621"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t foedus::log::ThreadLogBufferMeta::increment_mark_index </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00170">170</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>References <a class="el" href="thread__log__buffer_8hpp_source.html#l00157">kMaxNonDurableEpochs</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00234">foedus::log::ThreadLogBuffer::get_logs_to_write()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00303">foedus::log::ThreadLogBuffer::on_log_written()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                       {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> (index + 1) % <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">foedus::log::ThreadLogBufferMeta::kMaxNonDurableEpochs</a></div><div class="ttdoc">Each thread can have at most this number of epochs in this log buffer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00157">thread_log_buffer.hpp:157</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1log_1_1ThreadLogBufferMeta_a5dd02cf36ffdb642d41badfc61381621_icgraph.png" border="0" usemap="#structfoedus_1_1log_1_1ThreadLogBufferMeta_a5dd02cf36ffdb642d41badfc61381621_icgraph" alt=""/></div>
<map name="structfoedus_1_1log_1_1ThreadLogBufferMeta_a5dd02cf36ffdb642d41badfc61381621_icgraph" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_a5dd02cf36ffdb642d41badfc61381621_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a05db4e7c61f07d2320aa7b2c3c76d520" title="Only for Debug&#45;assertion. " alt="" coords="244,772,431,813"/>
<area shape="rect" id="node46" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a73cb4c21df0113f6c1dcad3029589225" title="Returns begin/end offsets of logs in the given epoch. " alt="" coords="244,837,431,879"/>
<area shape="rect" id="node47" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#af5955e8a6092c7486eda02ae3f18a051" title="Called when the logger wrote out all logs in the given epoch, advancing oldest_mark_index_. " alt="" coords="244,903,431,944"/>
<area shape="rect" id="node48" href="namespacefoedus_1_1log.html#aa94ed1e8a47d3f773cc7f976f09542c1" title="foedus::log::operator\&lt;\&lt;" alt="" coords="259,969,415,995"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9aa20c59a7d75cf94742beb43b777de6" title="Only for Debug&#45;assertion. " alt="" coords="479,772,665,813"/>
<area shape="rect" id="node4" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8de2c4c08a42a349476956be1b853469" title="Called when we have to wait till offset_head_ advances so that we can put new logs. " alt="" coords="713,772,900,813"/>
<area shape="rect" id="node5" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9" title="Reserves a space for a new (uncommitted) log entry at the tail. " alt="" coords="948,772,1135,813"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ab8696b7ccf07c7b8e1efb038d8cd83c2" title="Append one record to this sequential storage. " alt="" coords="1183,56,1412,97"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="1211,122,1384,178"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1207,267,1388,323"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="1211,413,1384,469"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="1195,497,1399,553"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1196,585,1399,641"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="1195,681,1399,737"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="1211,765,1384,821"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1208,878,1387,934"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="1211,1059,1384,1115"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7dde5581eee977242b5373e30365183f" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="1199,1139,1396,1195"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1199,1321,1395,1377"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d324da4dcd35490820cb97e7124001b" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="1199,1401,1396,1457"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="1211,1551,1384,1607"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1206,1667,1389,1723"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#af263fb1494c7ac6a5dbfd28b926ede3b" title="foedus::storage::masstree\l::MasstreeCursor::delete_record" alt="" coords="1475,5,1683,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1753,97,1968,139"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1492,122,1665,178"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1505,202,1653,258"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="1463,283,1694,324"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1460,348,1697,389"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1481,414,1676,470"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1493,494,1664,550"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1493,574,1664,630"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="1493,654,1664,710"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1473,735,1685,776"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1492,801,1665,857"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1505,881,1652,937"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#ab8b1919cb195dd063be409f772b36630" title="foedus::storage::masstree\l::MasstreeCursor::overwrite_record" alt="" coords="1467,961,1690,1003"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a496370a645284f8578875529c6eacb0f" title="foedus::storage::masstree\l::MasstreeCursor::overwrite\l_record_primitive" alt="" coords="1489,1027,1669,1083"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1745,1173,1976,1215"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1485,1158,1672,1214"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1485,1238,1672,1294"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1484,1318,1673,1374"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1481,1398,1677,1454"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1497,1478,1660,1534"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1779,1398,1942,1454"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1471,1559,1687,1600"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1492,1625,1665,1681"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1504,1705,1653,1761"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a9a3de9422f00cd74b2f85360a232458e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html">ThreadLogBufferMeta</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">335</a> of file <a class="el" href="thread__log__buffer_8cpp_source.html">thread_log_buffer.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                                                    {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;ThreadLogBuffer&gt;&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;thread_id_&gt;&quot;</span> &lt;&lt; v.thread_id_ &lt;&lt; <span class="stringliteral">&quot;&lt;/thread_id_&gt;&quot;</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;buffer_size_&gt;&quot;</span> &lt;&lt; v.buffer_size_ &lt;&lt; <span class="stringliteral">&quot;&lt;/buffer_size_&gt;&quot;</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;offset_head_&gt;&quot;</span> &lt;&lt; v.offset_head_ &lt;&lt; <span class="stringliteral">&quot;&lt;/offset_head_&gt;&quot;</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;offset_durable_&gt;&quot;</span> &lt;&lt; v.offset_durable_ &lt;&lt; <span class="stringliteral">&quot;&lt;/offset_durable_&gt;&quot;</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;offset_committed_&gt;&quot;</span> &lt;&lt; v.offset_committed_ &lt;&lt; <span class="stringliteral">&quot;&lt;/offset_committed_&gt;&quot;</span>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;offset_tail_&gt;&quot;</span> &lt;&lt; v.offset_tail_ &lt;&lt; <span class="stringliteral">&quot;&lt;/offset_tail_&gt;&quot;</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;thread_epoch_marks&quot;</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; oldest=\&quot;&quot;</span> &lt;&lt; v.oldest_mark_index_ &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; current=\&quot;&quot;</span> &lt;&lt; v.current_mark_index_ &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// from oldest (inclusive) to current (exclusive).</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = v.oldest_mark_index_;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        i != v.current_mark_index_;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        i = <a class="code" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621">ThreadLogBufferMeta::increment_mark_index</a>(i)) {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;Entry index=\&quot;&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; v.thread_epoch_marks_[i] &lt;&lt; <span class="stringliteral">&quot;&lt;/Entry&gt;&quot;</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// also write out current entry</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;Entry index=\&quot;&quot;</span> &lt;&lt; v.current_mark_index_ &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    &lt;&lt; v.thread_epoch_marks_[v.current_mark_index_]</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/Entry&gt;&quot;</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/thread_epoch_marks&gt;&quot;</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/ThreadLogBuffer&gt;&quot;</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1log_1_1ThreadLogBufferMeta_html_a5dd02cf36ffdb642d41badfc61381621"><div class="ttname"><a href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a5dd02cf36ffdb642d41badfc61381621">foedus::log::ThreadLogBufferMeta::increment_mark_index</a></div><div class="ttdeci">static uint32_t increment_mark_index(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00170">thread_log_buffer.hpp:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="acc65d5871a4da5bf8f4e2bf162e9ba9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::log::ThreadLogBufferMeta::buffer_size_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the buffer assigned to this thread. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00179">179</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00338">foedus::log::ThreadLogBuffer::head_to_tail_distance()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>.</p>

</div>
</div>
<a class="anchor" id="a98ac9b46082c2120a347c175ebd0e340"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::log::ThreadLogBufferMeta::buffer_size_safe_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>buffer_size_ - 64. </p>
<p>We always leave some <em>hole</em> between offset_tail_ and offset_head_ to avoid the case offset_tail_ == offset_head_ (log empty? or log full?). One classic way to handle this case is to store <em>count</em> rather than offsets, but it makes synchronization between log writer and this thread expensive. Rather, we sacrifice a negligible space. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00189">189</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00136">foedus::log::ThreadLogBuffer::wait_for_space()</a>.</p>

</div>
</div>
<a class="anchor" id="a9df21eea0d60c49c4f0a4fd7db148dbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::log::ThreadLogBufferMeta::current_mark_index_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array index in thread_epoch_marks_ that indicates the current epoch being appended by the thread, so the logger must avoid touching the epoch. </p>
<dl class="section invariant"><dt>Invariant</dt><dd>0 &lt;= oldest_mark_index_&lt; kMaxNonDurableEpochs </dd></dl>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="classfoedus_1_1log_1_1ThreadLogBuffer.html" title="A thread-local log buffer. ">ThreadLogBuffer</a> guarantees that the thread does not create a new log when current_mark_index_ might reach "oldest_mark_index_ + kMaxNonDurableEpochs". Thus, "current_mark_index_ == oldest_mark_index_" means empty, not full. </dd>
<dd>
Written by thread only. Read by logger and thread. </dd></dl>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00251">251</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00361">foedus::log::ThreadLogBuffer::get_last_epoch()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00234">foedus::log::ThreadLogBuffer::get_logs_to_write()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00303">foedus::log::ThreadLogBuffer::on_log_written()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>.</p>

</div>
</div>
<a class="anchor" id="a657d9371aa5deec7dfbbad85f4352f37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::log::ThreadLogBufferMeta::offset_committed_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This marks the position upto which transaction logs are committed by the thread. </p>
<p>Log writers can safely read log entries and write them to log files up to this place. When the transaction commits, this value is advanced by the thread. The only possible update pattern to this variable is <b>advance</b> by this thread. Thus, the log writer can safely read this variable without any fence or lock thanks to regular (either old value or new value, never garbage) read of 64-bit. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00221">221</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00358">foedus::log::ThreadLogBuffer::discard_current_xct_log()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00234">foedus::log::ThreadLogBuffer::get_logs_to_write()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00375">foedus::log::ThreadLogBuffer::get_offset_committed()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00345">foedus::log::ThreadLogBuffer::publish_committed_log()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00136">foedus::log::ThreadLogBuffer::wait_for_space()</a>.</p>

</div>
</div>
<a class="anchor" id="ace5d36306d82f856042d30c5eb5e5635"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::log::ThreadLogBufferMeta::offset_durable_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This marks the position upto which the log writer durably wrote out to log files. </p>
<p>Everything after this position must not be discarded because they are not yet durable. When the log writer reads log entries after here, writes them to log file, and calls fsync, this variable is advanced by the log writer. This variable is read by this thread to check the end of the circular buffer. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00210">210</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00234">foedus::log::ThreadLogBuffer::get_logs_to_write()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00372">foedus::log::ThreadLogBuffer::get_offset_durable()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00303">foedus::log::ThreadLogBuffer::on_log_written()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00136">foedus::log::ThreadLogBuffer::wait_for_space()</a>.</p>

</div>
</div>
<a class="anchor" id="a23d3ecc1c5c72bfc563b4397cb06925b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::log::ThreadLogBufferMeta::offset_head_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This marks the position where log entries start. </p>
<p>This private log buffer is a circular buffer where the <em>head</em> is eaten by log gleaner. However, log gleaner is okay to get behind, reading from log file instead (but slower). Thus, offset_head_ is advanced either by log gleaner or this thread. If the latter happens, log gleaner has to give up using in-memory logs and instead read from log files. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00200">200</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00369">foedus::log::ThreadLogBuffer::get_offset_head()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00338">foedus::log::ThreadLogBuffer::head_to_tail_distance()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00136">foedus::log::ThreadLogBuffer::wait_for_space()</a>.</p>

</div>
</div>
<a class="anchor" id="abed758916ac4cc7780cd57c4f5912a7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::log::ThreadLogBufferMeta::offset_tail_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The current cursor to which next log will be written. </p>
<p>This is the location the current transaction of this thread is writing to <b>before</b> commit. When the transaction commits, offset_committed_ catches up with this. When the transaction aborts, this value rolls back to offset_committed_. Only this thread reads/writes to this variable. No other threads access this. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00231">231</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00358">foedus::log::ThreadLogBuffer::discard_current_xct_log()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00378">foedus::log::ThreadLogBuffer::get_offset_tail()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00338">foedus::log::ThreadLogBuffer::head_to_tail_distance()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00345">foedus::log::ThreadLogBuffer::publish_committed_log()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00320">foedus::log::ThreadLogBuffer::reserve_new_log()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>.</p>

</div>
</div>
<a class="anchor" id="a396d005a0e874d98f42db6243d2af266"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::log::ThreadLogBufferMeta::oldest_mark_index_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Array index in thread_epoch_marks_ that indicates the oldest epoch mark to be consumed by the logger. </p>
<dl class="section invariant"><dt>Invariant</dt><dd>0 &lt;= oldest_mark_index_ &lt; kMaxNonDurableEpochs </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Written by logger only. Read by logger and thread. </dd></dl>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00241">241</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00234">foedus::log::ThreadLogBuffer::get_logs_to_write()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00303">foedus::log::ThreadLogBuffer::on_log_written()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c78da21a2ab623ed8fb2a184413bdd2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::log::ThreadLogBufferMeta::padding1_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00175">175</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8a90cec956f205a1126cab4c4e4df3dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::log::ThreadLogBufferMeta::padding2_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00176">176</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7071fa55176f66f7804f56bef61212a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1log_1_1ThreadEpockMark.html">ThreadEpockMark</a> foedus::log::ThreadLogBufferMeta::thread_epoch_marks_[<a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html#a7437875632a276e19368c9f64734210da70cf14e94a61f91db153188311db520f">kMaxNonDurableEpochs</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Circular array of epoch marks of a thread log buffer. </p>

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00234">234</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00059">assert_consistent()</a>, <a class="el" href="thread__log__buffer_8hpp_source.html#l00361">foedus::log::ThreadLogBuffer::get_last_epoch()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00234">foedus::log::ThreadLogBuffer::get_logs_to_write()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00303">foedus::log::ThreadLogBuffer::on_log_written()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>.</p>

</div>
</div>
<a class="anchor" id="aa015fde211c913255fbed3a3bee54884"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> foedus::log::ThreadLogBufferMeta::thread_id_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__log__buffer_8hpp_source.html#l00174">174</a> of file <a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8hpp_source.html#l00311">foedus::log::ThreadLogBuffer::get_thread_id()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00335">foedus::log::operator&lt;&lt;()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00104">foedus::log::ThreadLogBuffer::ThreadLogBuffer()</a>, <a class="el" href="thread__log__buffer_8cpp_source.html#l00044">ThreadLogBufferMeta()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00136">foedus::log::ThreadLogBuffer::wait_for_space()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/log/<a class="el" href="thread__log__buffer_8hpp_source.html">thread_log_buffer.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/log/<a class="el" href="thread__log__buffer_8cpp_source.html">thread_log_buffer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1log.html">log</a></li><li class="navelem"><a class="el" href="structfoedus_1_1log_1_1ThreadLogBufferMeta.html">ThreadLogBufferMeta</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
