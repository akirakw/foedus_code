<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::hash::HashPartitioner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::hash::HashPartitioner Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__HASH.html">Hashtable Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> for a hash storage.  
 <a href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> for a hash storage. </p>
<p>Partitioning for hash is much easier than for B-trees, but somewhat trickier than array. Compared to array, there will not be and should not be any locality in terms of ranges of hash bins. If there are, it means that the hash function is bad!</p>
<dl class="section user"><dt>Footprint vs Accuracy</dt><dd>The main challenge here is the tradeoff between the footprint and accuracy of the partitioning information. One extreme, which is our current implementation, is to determine a node to assign for every single hash bin. Assuming there are few records in each hash bin, this should give a good locality so that mappers can avoid sending out too many logs to remote reducers. However, we need sizeof(PartitionId) * hashbins bytes of partitioning information. Another extreme is to assign partition in a super coarse granularity, such as root page pointers. Then the footprint is fixed and tiny, but has basically zero accuracy. All random. So far, we picked the former extreme. We thus issue an error when a user specifies a large bin-bits such that 2^bits bytes &gt;= storage_options.partitioner_data_memory_mb_ MB.</dd></dl>
<dl class="section user"><dt>Current policy and its limitations</dt><dd>Based on the above simple design, we just pick the owner of current volatile data page as the partition. We don't even balance out so far. In sum, we have many limitations as follows: <ul>
<li>Large footprints, which might prohibit large hash-tables and cause lots of L1 misses while partitioning. </li>
<li>Users must make sure the initial inserts are well balanced between nodes.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is a private implementation-details of <a class="el" href="group__HASH.html">Hashtable Storage</a>, thus file name ends with _impl. Do not include this header from a client program. There is no case client program needs to access this internal class. </dd></dl>

<p>Definition at line <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00067">67</a> of file <a class="el" href="hash__partitioner__impl_8hpp_source.html">hash_partitioner_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="hash__partitioner__impl_8hpp_source.html">hash_partitioner_impl.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afe8984187e16a5366b95bef1bc824b6e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#afe8984187e16a5366b95bef1bc824b6e">HashPartitioner</a> (<a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a> *parent)</td></tr>
<tr class="separator:afe8984187e16a5366b95bef1bc824b6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9def1e9584cd2af4bae4d2b0c0ca10e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a9def1e9584cd2af4bae4d2b0c0ca10e4">design_partition</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">Partitioner::DesignPartitionArguments</a> &amp;args)</td></tr>
<tr class="separator:a9def1e9584cd2af4bae4d2b0c0ca10e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40234c7f9cecf06a33b99e1556406792"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a40234c7f9cecf06a33b99e1556406792">design_partition_task</a> (uint16_t task)</td></tr>
<tr class="separator:a40234c7f9cecf06a33b99e1556406792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4d264f4a25f67bbab59b7a2f4cc4214"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#ac4d264f4a25f67bbab59b7a2f4cc4214">is_partitionable</a> () const </td></tr>
<tr class="separator:ac4d264f4a25f67bbab59b7a2f4cc4214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b2f3ff32863d2e4e44c96b93071067e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a7b2f3ff32863d2e4e44c96b93071067e">partition_batch</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">Partitioner::PartitionBatchArguments</a> &amp;args) const </td></tr>
<tr class="separator:a7b2f3ff32863d2e4e44c96b93071067e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8255043c6cb91246cbff43cceb88f596"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a8255043c6cb91246cbff43cceb88f596">sort_batch</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">Partitioner::SortBatchArguments</a> &amp;args) const </td></tr>
<tr class="separator:a8255043c6cb91246cbff43cceb88f596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cdb19e07efc4678559ef2be1ec6fb7e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a9cdb19e07efc4678559ef2be1ec6fb7e">get_bucket_owners</a> () const </td></tr>
<tr class="separator:a9cdb19e07efc4678559ef2be1ec6fb7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a1575d3915c8fc1dcd80238cb2688171c"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a1575d3915c8fc1dcd80238cb2688171c">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html">HashPartitioner</a> &amp;v)</td></tr>
<tr class="separator:a1575d3915c8fc1dcd80238cb2688171c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="afe8984187e16a5366b95bef1bc824b6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::hash::HashPartitioner::HashPartitioner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a> *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00043">43</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="shared__mutex_8hpp_source.html#l00058">foedus::soc::SharedMutex::is_initialized()</a>, <a class="el" href="partitioner_8cpp_source.html#l00051">foedus::storage::PartitionerMetadata::locate_data()</a>, <a class="el" href="partitioner_8hpp_source.html#l00232">foedus::storage::PartitionerMetadata::mutex_</a>, and <a class="el" href="partitioner_8hpp_source.html#l00237">foedus::storage::PartitionerMetadata::valid_</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  : engine_(parent-&gt;get_engine()),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    id_(parent-&gt;get_storage_id()),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    metadata_(<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#aa6e48ddb92bb1c1b572cc3b90e19daf9">PartitionerMetadata::get_metadata</a>(engine_, id_)) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">mutex_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">is_initialized</a>());</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a>) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    data_ = <span class="keyword">reinterpret_cast&lt;</span>HashPartitionerData*<span class="keyword">&gt;</span>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">locate_data</a>(engine_));</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    data_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a63a799f43dfcc06d8c14d471fd0ebfcd"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">foedus::storage::PartitionerMetadata::valid_</a></div><div class="ttdeci">bool valid_</div><div class="ttdoc">Whether this partitioner information (metadata+data) has been constructed. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00237">partitioner.hpp:237</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a1b5e5a68b2cde0cd42300642f3b538a3"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">foedus::storage::PartitionerMetadata::mutex_</a></div><div class="ttdeci">soc::SharedMutex mutex_</div><div class="ttdoc">Serialize concurrent initialization of this partitioner. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00232">partitioner.hpp:232</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a0534520d3f4fb059afdf7b9db375907e"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">foedus::storage::PartitionerMetadata::locate_data</a></div><div class="ttdeci">void * locate_data(Engine *engine)</div><div class="ttdoc">Returns the partitioner data pointed from this metadata. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00051">partitioner.cpp:51</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedMutex_html_ae886a5d8af1495da00400cc3c958a3d9"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">foedus::soc::SharedMutex::is_initialized</a></div><div class="ttdeci">bool is_initialized() const </div><div class="ttdef"><b>Definition:</b> <a href="shared__mutex_8hpp_source.html#l00058">shared_mutex.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_aa6e48ddb92bb1c1b572cc3b90e19daf9"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#aa6e48ddb92bb1c1b572cc3b90e19daf9">foedus::storage::PartitionerMetadata::get_metadata</a></div><div class="ttdeci">static PartitionerMetadata * get_metadata(Engine *engine, StorageId id)</div><div class="ttdoc">Returns the shared memory for the given storage ID. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00038">partitioner.cpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_afe8984187e16a5366b95bef1bc824b6e_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_afe8984187e16a5366b95bef1bc824b6e_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_afe8984187e16a5366b95bef1bc824b6e_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_afe8984187e16a5366b95bef1bc824b6e_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9" title="foedus::soc::SharedMutex\l::is_initialized" alt="" coords="271,54,446,95"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e" title="Returns the partitioner data pointed from this metadata. " alt="" coords="269,119,448,161"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb" title="foedus::soc::SharedMemory\lRepo::get_global_memory\l_anchors" alt="" coords="496,5,681,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="521,86,656,127"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="499,151,679,193"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="521,217,656,258"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9def1e9584cd2af4bae4d2b0c0ca10e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::hash::HashPartitioner::design_partition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">Partitioner::DesignPartitionArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00068">68</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="partitioner_8cpp_source.html#l00061">foedus::storage::PartitionerMetadata::allocate_data()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00128">design_partition_task()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00064">foedus::storage::hash::design_partition_thread()</a>, <a class="el" href="storage_8hpp_source.html#l00169">foedus::storage::Storage&lt; CONTROL_BLOCK &gt;::exists()</a>, <a class="el" href="hash__storage_8cpp_source.html#l00061">foedus::storage::hash::HashStorage::get_bin_bits()</a>, <a class="el" href="hash__storage_8cpp_source.html#l00060">foedus::storage::hash::HashStorage::get_bin_count()</a>, <a class="el" href="hash__storage_8cpp_source.html#l00062">foedus::storage::hash::HashStorage::get_bin_shifts()</a>, <a class="el" href="attachable_8hpp_source.html#l00097">foedus::Attachable&lt; CONTROL_BLOCK &gt;::get_control_block()</a>, <a class="el" href="hash__storage_8cpp_source.html#l00059">foedus::storage::hash::HashStorage::get_levels()</a>, <a class="el" href="engine_8cpp_source.html#l00074">foedus::Engine::get_soc_count()</a>, <a class="el" href="shared__mutex_8hpp_source.html#l00058">foedus::soc::SharedMutex::is_initialized()</a>, <a class="el" href="hash__id_8hpp_source.html#l00049">foedus::storage::hash::kHashIntermediatePageFanout</a>, <a class="el" href="hash__id_8hpp_source.html#l00074">foedus::storage::hash::kHashMaxBins</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00115">foedus::storage::hash::HashPartitionerData::levels_</a>, <a class="el" href="partitioner_8cpp_source.html#l00051">foedus::storage::PartitionerMetadata::locate_data()</a>, <a class="el" href="partitioner_8hpp_source.html#l00232">foedus::storage::PartitionerMetadata::mutex_</a>, <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00105">foedus::storage::hash::HashPartitionerData::object_size()</a>, <a class="el" href="partitioner_8hpp_source.html#l00237">foedus::storage::PartitionerMetadata::valid_</a>, and <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00106">foedus::storage::Partitioner::design_partition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                                {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">mutex_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">is_initialized</a>());</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_ == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  HashStorage storage(engine_, id_);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage.exists());</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  HashStorageControlBlock* control_block = storage.get_control_block();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  soc::SharedMutexScope mutex_scope(&amp;metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">mutex_</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> total_bin_count = storage.get_bin_count();</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  uint16_t node_count = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">get_soc_count</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  uint64_t bytes = <a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a8a021a76343caea658b2302b6edad299">HashPartitionerData::object_size</a>(node_count, total_bin_count);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a">allocate_data</a>(engine_, &amp;mutex_scope, bytes));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  data_ = <span class="keyword">reinterpret_cast&lt;</span>HashPartitionerData*<span class="keyword">&gt;</span>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">locate_data</a>(engine_));</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aed7ee079d2a7807e934dcdb992f96280">levels_</a> = storage.get_levels();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage.get_levels() &gt;= 1U);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  data_-&gt;bin_bits_ = storage.get_bin_bits();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  data_-&gt;bin_shifts_ = storage.get_bin_shifts();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  data_-&gt;partitionable_ = node_count &gt; 1U;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  data_-&gt;total_bin_count_ = total_bin_count;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (!data_-&gt;partitionable_) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// No partitioning needed. We don&#39;t even allocate memory for bin_owners_ in this case</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!control_block-&gt;root_page_pointer_.volatile_pointer_.is_null());</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// simply checks the owner of volatile pointers in last-level intermediate pages.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// though this is an in-memory task, parallelize to make it even faster.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// each sub-task is a pointer from the root intermediate page.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (storage.get_levels() == 1U) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Not worth parallelization. just one level. Design on a single thread&quot;</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// Note, this is just about partition-design. Mapper/Reducer still runs on multi-nodes.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; total_bin_count; ++i) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a40234c7f9cecf06a33b99e1556406792">design_partition_task</a>(i);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> interval = <a class="code" href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">kHashMaxBins</a>[storage.get_levels() - 1U];</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(interval &lt; total_bin_count);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(interval * <a class="code" href="group__HASH.html#ga4398665205e13bd71e8b2c1691ba1ba3">kHashIntermediatePageFanout</a> &gt;= total_bin_count);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    std::vector&lt;std::thread&gt; threads;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">for</span> (uint16_t i = 0; interval * i &lt; total_bin_count; ++i) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      threads.emplace_back(<a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a3ac47a0c2d690309d487f26b3a08a9b4">design_partition_thread</a>, <span class="keyword">this</span>, i);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Lanched &quot;</span> &lt;&lt; threads.size() &lt;&lt; <span class="stringliteral">&quot; threads. joining..&quot;</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : threads) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      t.join();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Joined. Designing done&quot;</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a63a799f43dfcc06d8c14d471fd0ebfcd"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">foedus::storage::PartitionerMetadata::valid_</a></div><div class="ttdeci">bool valid_</div><div class="ttdoc">Whether this partitioner information (metadata+data) has been constructed. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00237">partitioner.hpp:237</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_aed7ee079d2a7807e934dcdb992f96280"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aed7ee079d2a7807e934dcdb992f96280">foedus::storage::hash::HashPartitionerData::levels_</a></div><div class="ttdeci">uint8_t levels_</div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00115">hash_partitioner_impl.hpp:115</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a3ac47a0c2d690309d487f26b3a08a9b4"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a3ac47a0c2d690309d487f26b3a08a9b4">foedus::storage::hash::design_partition_thread</a></div><div class="ttdeci">void design_partition_thread(HashPartitioner *partitioner, uint16_t task)</div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8cpp_source.html#l00064">hash_partitioner_impl.cpp:64</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_html_a40234c7f9cecf06a33b99e1556406792"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a40234c7f9cecf06a33b99e1556406792">foedus::storage::hash::HashPartitioner::design_partition_task</a></div><div class="ttdeci">void design_partition_task(uint16_t task)</div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8cpp_source.html#l00128">hash_partitioner_impl.cpp:128</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_af0ac9dbae9481b295a8492c6d9f6c1d5"><div class="ttname"><a href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">foedus::Engine::get_soc_count</a></div><div class="ttdeci">soc::SocId get_soc_count() const </div><div class="ttdoc">Shorthand for get_options().thread_.group_count_. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00074">engine.cpp:74</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a3b5c729829a30ca3848d8254d616459a"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a">foedus::storage::PartitionerMetadata::allocate_data</a></div><div class="ttdeci">ErrorCode allocate_data(Engine *engine, soc::SharedMutexScope *locked, uint32_t data_size)</div><div class="ttdoc">Allocates a patitioner data in shared memory of the given size. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00061">partitioner.cpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a1b5e5a68b2cde0cd42300642f3b538a3"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">foedus::storage::PartitionerMetadata::mutex_</a></div><div class="ttdeci">soc::SharedMutex mutex_</div><div class="ttdoc">Serialize concurrent initialization of this partitioner. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00232">partitioner.hpp:232</a></div></div>
<div class="ttc" id="group__HASH_html_gacb9a1ea596bf0db3f6ded1710ab3b3d6"><div class="ttname"><a href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">foedus::storage::hash::HashBin</a></div><div class="ttdeci">uint64_t HashBin</div><div class="ttdoc">Represents a bin of a hash value. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00142">hash_id.hpp:142</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a0534520d3f4fb059afdf7b9db375907e"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">foedus::storage::PartitionerMetadata::locate_data</a></div><div class="ttdeci">void * locate_data(Engine *engine)</div><div class="ttdoc">Returns the partitioner data pointed from this metadata. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00051">partitioner.cpp:51</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__HASH_html_ga4398665205e13bd71e8b2c1691ba1ba3"><div class="ttname"><a href="group__HASH.html#ga4398665205e13bd71e8b2c1691ba1ba3">foedus::storage::hash::kHashIntermediatePageFanout</a></div><div class="ttdeci">const uint8_t kHashIntermediatePageFanout</div><div class="ttdoc">Number of pointers in an intermediate page of hash storage. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00049">hash_id.hpp:49</a></div></div>
<div class="ttc" id="group__HASH_html_ga0083e0d73570a990b862bb330f8d5831"><div class="ttname"><a href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">foedus::storage::hash::kHashMaxBins</a></div><div class="ttdeci">const uint64_t kHashMaxBins[]</div><div class="ttdoc">kHashTotalBins[n] gives the maximum number of hash bins n-level hash can hold. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00074">hash_id.hpp:74</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedMutex_html_ae886a5d8af1495da00400cc3c958a3d9"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">foedus::soc::SharedMutex::is_initialized</a></div><div class="ttdeci">bool is_initialized() const </div><div class="ttdef"><b>Definition:</b> <a href="shared__mutex_8hpp_source.html#l00058">shared_mutex.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_a8a021a76343caea658b2302b6edad299"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a8a021a76343caea658b2302b6edad299">foedus::storage::hash::HashPartitionerData::object_size</a></div><div class="ttdeci">uint64_t object_size() const </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00105">hash_partitioner_impl.hpp:105</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a" title="Allocates a patitioner data in shared memory of the given size. " alt="" coords="227,233,405,275"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a40234c7f9cecf06a33b99e1556406792" title="foedus::storage::hash\l::HashPartitioner::design\l_partition_task" alt="" coords="483,479,648,535"/>
<area shape="rect" id="node10" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="757,283,889,324"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a37d93cdda67dd88454e0237f8a511995" title="foedus::storage::hash\l::HashStorage::get_levels" alt="" coords="737,837,908,879"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage_1_1hash.html#a3ac47a0c2d690309d487f26b3a08a9b4" title="foedus::storage::hash\l::design_partition_thread" alt="" coords="234,443,398,484"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="234,611,398,652"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af921bcfaca8b99564cc6b6cefed87e65" title="foedus::storage::hash\l::HashStorage::get_bin_bits" alt="" coords="225,676,407,717"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a092465b1ea5688d713e3f73aaf13a23c" title="foedus::storage::hash\l::HashStorage::get_bin_count" alt="" coords="219,741,413,783"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a6dc142a2ed0509104e377e10a6d6a034" title="foedus::storage::hash\l::HashStorage::get_bin\l_shifts" alt="" coords="239,807,393,863"/>
<area shape="rect" id="node32" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5" title="Shorthand for get_options().thread_.group_count_. " alt="" coords="249,888,383,929"/>
<area shape="rect" id="node33" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9" title="foedus::soc::SharedMutex\l::is_initialized" alt="" coords="229,953,403,995"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e" title="Returns the partitioner data pointed from this metadata. " alt="" coords="476,71,655,112"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a8a021a76343caea658b2302b6edad299" title="foedus::storage::hash\l::HashPartitionerData\l::object_size" alt="" coords="243,1019,389,1075"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a889951c15caacc4d60b446f6c6c56cde" title="Returns the special index&#45;0 entry that manages data block allocation for partitioners. " alt="" coords="461,267,669,308"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedMutexScope.html#a51a27729ac214786ce97d32ae80dd6f7" title="foedus::soc::SharedMutex\lScope::get_mutex" alt="" coords="478,201,653,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SharedMutexScope.html#a9576d709cf25478f4fe81a8362ba7636" title="foedus::soc::SharedMutex\lScope::is_locked_by_me" alt="" coords="478,136,653,177"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb" title="foedus::soc::SharedMemory\lRepo::get_global_memory\l_anchors" alt="" coords="730,202,915,258"/>
<area shape="rect" id="node5" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="733,71,913,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="755,136,890,177"/>
<area shape="rect" id="node11" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="755,625,890,667"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="717,691,928,747"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="721,772,924,813"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a6ddc93fb5df01249140895435819da2f" title="foedus::storage::hash\l::HashIntermediatePage\l::get_level" alt="" coords="742,399,903,455"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a9027ebbc2ee535519916906978347be9" title="foedus::storage::hash\l::HashIntermediatePage\l::get_pointer" alt="" coords="742,479,903,535"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="997,341,1158,383"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="726,560,919,601"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1000,713,1155,755"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1247,772,1397,813"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="991,831,1164,872"/>
<area shape="rect" id="node20" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="976,633,1179,689"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1245,641,1399,683"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1241,459,1403,500"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1227,707,1417,748"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1PageHeader.html#ac40b3dad0a38d9a142bd14ea5000b669" title="foedus::storage::PageHeader\l::get_in_layer_level" alt="" coords="982,407,1173,448"/>
<area shape="rect" id="node35" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="755,5,890,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a9def1e9584cd2af4bae4d2b0c0ca10e4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#a31a7e393bf1f87a9a039c60b291ac9d1" title="Determines partitioning scheme for this storage. " alt="" coords="219,13,397,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a40234c7f9cecf06a33b99e1556406792"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashPartitioner::design_partition_task </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00128">128</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00127">foedus::storage::hash::HashPartitionerData::bin_owners_</a>, <a class="el" href="attachable_8hpp_source.html#l00097">foedus::Attachable&lt; CONTROL_BLOCK &gt;::get_control_block()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00105">foedus::storage::hash::HashIntermediatePage::get_level()</a>, <a class="el" href="hash__storage_8cpp_source.html#l00059">foedus::storage::hash::HashStorage::get_levels()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="storage__id_8hpp_source.html#l00201">foedus::storage::VolatilePagePointer::get_numa_node()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00080">foedus::storage::hash::HashIntermediatePage::get_pointer()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="hash__id_8hpp_source.html#l00074">foedus::storage::hash::kHashMaxBins</a>, <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00114">foedus::storage::hash::HashPartitionerData::partitionable_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="hash__storage__pimpl_8hpp_source.html#l00064">foedus::storage::hash::HashStorageControlBlock::root_page_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00068">design_partition()</a>, and <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00064">foedus::storage::hash::design_partition_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                                         {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Task-&quot;</span> &lt;&lt; task &lt;&lt; <span class="stringliteral">&quot; started.&quot;</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a88f6e41eeefb797fe5d2557a17bd3eb1">partitionable_</a>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  HashStorage storage(engine_, id_);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  HashStorageControlBlock* control_block = storage.get_control_block();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="comment">// root page is guaranteed to have volatile version.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  HashIntermediatePage* root_page = <span class="keyword">reinterpret_cast&lt;</span>HashIntermediatePage*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    resolver.resolve_offset(control_block-&gt;root_page_pointer_.volatile_pointer_));</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> interval = <a class="code" href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">kHashMaxBins</a>[root_page-&gt;get_level()];</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  VolatilePagePointer pointer = root_page-&gt;get_pointer(task).volatile_pointer_;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">if</span> (pointer.is_null()) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Task-&quot;</span> &lt;&lt; task &lt;&lt; <span class="stringliteral">&quot; got an empty task. null volatile pointer&quot;</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    std::memset(data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">bin_owners_</a> + (interval * task), 0, interval);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (root_page-&gt;get_level() == 0) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(interval = 1ULL);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage.get_levels() == 1U);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;Task-&quot;</span> &lt;&lt; task &lt;&lt; <span class="stringliteral">&quot; is trivial.&quot;</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">bin_owners_</a>[task] = pointer.get_numa_node();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    HashIntermediatePage* child</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      = <span class="keyword">reinterpret_cast&lt;</span>HashIntermediatePage*<span class="keyword">&gt;</span>(resolver.resolve_offset(pointer));</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    design_partition_task_recurse(resolver, child);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Task-&quot;</span> &lt;&lt; task &lt;&lt; <span class="stringliteral">&quot; ended.&quot;</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="group__HASH_html_gacb9a1ea596bf0db3f6ded1710ab3b3d6"><div class="ttname"><a href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">foedus::storage::hash::HashBin</a></div><div class="ttdeci">uint64_t HashBin</div><div class="ttdoc">Represents a bin of a hash value. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00142">hash_id.hpp:142</a></div></div>
<div class="ttc" id="group__HASH_html_ga0083e0d73570a990b862bb330f8d5831"><div class="ttname"><a href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">foedus::storage::hash::kHashMaxBins</a></div><div class="ttdeci">const uint64_t kHashMaxBins[]</div><div class="ttdoc">kHashTotalBins[n] gives the maximum number of hash bins n-level hash can hold. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00074">hash_id.hpp:74</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_aa8f90d63fd9e95ce5db56d978a746276"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">foedus::storage::hash::HashPartitionerData::bin_owners_</a></div><div class="ttdeci">PartitionId bin_owners_[8]</div><div class="ttdoc">partition of each hash bin. </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00127">hash_partitioner_impl.hpp:127</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_a88f6e41eeefb797fe5d2557a17bd3eb1"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a88f6e41eeefb797fe5d2557a17bd3eb1">foedus::storage::hash::HashPartitionerData::partitionable_</a></div><div class="ttdeci">bool partitionable_</div><div class="ttdoc">if false, every record goes to node-0. </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00114">hash_partitioner_impl.hpp:114</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="258,5,390,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="219,71,429,127"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a6ddc93fb5df01249140895435819da2f" title="foedus::storage::hash\l::HashIntermediatePage\l::get_level" alt="" coords="243,151,405,207"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a37d93cdda67dd88454e0237f8a511995" title="foedus::storage::hash\l::HashStorage::get_levels" alt="" coords="239,232,409,273"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="257,297,391,339"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="227,363,421,404"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a9027ebbc2ee535519916906978347be9" title="foedus::storage::hash\l::HashIntermediatePage\l::get_pointer" alt="" coords="243,429,405,485"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="498,472,659,513"/>
<area shape="rect" id="node12" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="223,589,425,631"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1PageHeader.html#ac40b3dad0a38d9a142bd14ea5000b669" title="foedus::storage::PageHeader\l::get_in_layer_level" alt="" coords="483,159,674,200"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="743,485,904,527"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="501,655,656,696"/>
<area shape="rect" id="node15" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="749,576,898,617"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="492,589,665,631"/>
<area shape="rect" id="node18" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="477,721,680,777"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="746,724,901,765"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="728,655,919,696"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a40234c7f9cecf06a33b99e1556406792_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a9def1e9584cd2af4bae4d2b0c0ca10e4" title="foedus::storage::hash\l::HashPartitioner::design\l_partition" alt="" coords="431,5,596,61"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1hash.html#a3ac47a0c2d690309d487f26b3a08a9b4" title="foedus::storage::hash\l::design_partition_thread" alt="" coords="219,42,383,83"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Partitioner.html#a31a7e393bf1f87a9a039c60b291ac9d1" title="Determines partitioning scheme for this storage. " alt="" coords="644,13,823,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9cdb19e07efc4678559ef2be1ec6fb7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> * foedus::storage::hash::HashPartitioner::get_bucket_owners </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00055">55</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00127">foedus::storage::hash::HashPartitionerData::bin_owners_</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                                            {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">bin_owners_</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_aa8f90d63fd9e95ce5db56d978a746276"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">foedus::storage::hash::HashPartitionerData::bin_owners_</a></div><div class="ttdeci">PartitionId bin_owners_[8]</div><div class="ttdoc">partition of each hash bin. </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00127">hash_partitioner_impl.hpp:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac4d264f4a25f67bbab59b7a2f4cc4214"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::hash::HashPartitioner::is_partitionable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00059">59</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00114">foedus::storage::hash::HashPartitionerData::partitionable_</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00094">foedus::storage::Partitioner::is_partitionable()</a>, and <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00184">partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                                             {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a88f6e41eeefb797fe5d2557a17bd3eb1">partitionable_</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_a88f6e41eeefb797fe5d2557a17bd3eb1"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#a88f6e41eeefb797fe5d2557a17bd3eb1">foedus::storage::hash::HashPartitionerData::partitionable_</a></div><div class="ttdeci">bool partitionable_</div><div class="ttdoc">if false, every record goes to node-0. </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00114">hash_partitioner_impl.hpp:114</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_ac4d264f4a25f67bbab59b7a2f4cc4214_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_ac4d264f4a25f67bbab59b7a2f4cc4214_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_ac4d264f4a25f67bbab59b7a2f4cc4214_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_ac4d264f4a25f67bbab59b7a2f4cc4214_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#ac031b933b72d2890fd24b90b1685110a" title="returns if this storage is partitionable. " alt="" coords="217,5,395,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a7b2f3ff32863d2e4e44c96b93071067e" title="foedus::storage::hash\l::HashPartitioner::partition_batch" alt="" coords="200,71,412,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="460,71,639,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b2f3ff32863d2e4e44c96b93071067e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashPartitioner::partition_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">Partitioner::PartitionBatchArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00184">184</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__log__types_8hpp_source.html#l00162">foedus::storage::hash::HashCommonLogType::assert_type()</a>, <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00127">foedus::storage::hash::HashPartitionerData::bin_owners_</a>, <a class="el" href="hash__storage_8cpp_source.html#l00060">foedus::storage::hash::HashStorage::get_bin_count()</a>, <a class="el" href="hash__storage_8cpp_source.html#l00062">foedus::storage::hash::HashStorage::get_bin_shifts()</a>, <a class="el" href="hash__log__types_8hpp_source.html#l00087">foedus::storage::hash::HashCommonLogType::hash_</a>, <a class="el" href="common__log__types_8hpp_source.html#l00113">foedus::log::BaseLogType::header_</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00059">is_partitionable()</a>, <a class="el" href="partitioner_8hpp_source.html#l00120">foedus::storage::Partitioner::PartitionBatchArguments::log_buffer_</a>, <a class="el" href="partitioner_8hpp_source.html#l00122">foedus::storage::Partitioner::PartitionBatchArguments::log_positions_</a>, <a class="el" href="partitioner_8hpp_source.html#l00124">foedus::storage::Partitioner::PartitionBatchArguments::logs_count_</a>, <a class="el" href="log__buffer_8hpp_source.html#l00042">foedus::snapshot::LogBuffer::resolve()</a>, <a class="el" href="partitioner_8hpp_source.html#l00126">foedus::storage::Partitioner::PartitionBatchArguments::results_</a>, and <a class="el" href="common__log__types_8hpp_source.html#l00066">foedus::log::LogHeader::storage_id_</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00118">foedus::storage::Partitioner::partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#ac4d264f4a25f67bbab59b7a2f4cc4214">is_partitionable</a>()) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    std::memset(args.results_, 0, <span class="keyword">sizeof</span>(<a class="code" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a>) * args.logs_count_);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  HashStorage storage(engine_, id_);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  uint8_t bin_shifts = storage.get_bin_shifts();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; args.logs_count_; ++i) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">const</span> HashCommonLogType *log = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>HashCommonLogType*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      args.log_buffer_.resolve(args.log_positions_[i]));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    log-&gt;assert_type();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log-&gt;header_.storage_id_ == id_);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a> hash = log-&gt;hash_;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> bin = hash &gt;&gt; bin_shifts;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(bin &lt; storage.get_bin_count());</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    args.results_[i] = data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">bin_owners_</a>[bin];</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_ga0d50cbff79d98d6068fe0b8add81d06a"><div class="ttname"><a href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">foedus::storage::PartitionId</a></div><div class="ttdeci">thread::ThreadGroupId PartitionId</div><div class="ttdoc">As partition=NUMA node, this is just a synonym of foedus::thread::ThreadGroupId. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00065">storage_id.hpp:65</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_html_ac4d264f4a25f67bbab59b7a2f4cc4214"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#ac4d264f4a25f67bbab59b7a2f4cc4214">foedus::storage::hash::HashPartitioner::is_partitionable</a></div><div class="ttdeci">bool is_partitionable() const </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8cpp_source.html#l00059">hash_partitioner_impl.cpp:59</a></div></div>
<div class="ttc" id="group__HASH_html_gacb9a1ea596bf0db3f6ded1710ab3b3d6"><div class="ttname"><a href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">foedus::storage::hash::HashBin</a></div><div class="ttdeci">uint64_t HashBin</div><div class="ttdoc">Represents a bin of a hash value. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00142">hash_id.hpp:142</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_aa8f90d63fd9e95ce5db56d978a746276"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aa8f90d63fd9e95ce5db56d978a746276">foedus::storage::hash::HashPartitionerData::bin_owners_</a></div><div class="ttdeci">PartitionId bin_owners_[8]</div><div class="ttdoc">partition of each hash bin. </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00127">hash_partitioner_impl.hpp:127</a></div></div>
<div class="ttc" id="group__HASH_html_ga9fb894469b702dac3a6564416e19ed42"><div class="ttname"><a href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">foedus::storage::hash::HashValue</a></div><div class="ttdeci">uint64_t HashValue</div><div class="ttdoc">Represents a full 64-bit hash value calculated from a key. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00129">hash_id.hpp:129</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#a409566a4b1453421a1eaa945d561c751" title="foedus::storage::hash\l::HashCommonLogType::\lassert_type" alt="" coords="279,5,447,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a092465b1ea5688d713e3f73aaf13a23c" title="foedus::storage::hash\l::HashStorage::get_bin_count" alt="" coords="265,86,460,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a6dc142a2ed0509104e377e10a6d6a034" title="foedus::storage::hash\l::HashStorage::get_bin\l_shifts" alt="" coords="285,152,440,208"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#ac4d264f4a25f67bbab59b7a2f4cc4214" title="foedus::storage::hash\l::HashPartitioner::is\l_partitionable" alt="" coords="289,232,436,288"/>
<area shape="rect" id="node7" href="structfoedus_1_1snapshot_1_1LogBuffer.html#a4c866d7cc1684237eca5fff49215b80e" title="foedus::snapshot::LogBuffer\l::resolve" alt="" coords="271,313,454,354"/>
<area shape="rect" id="node3" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="512,13,659,54"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a" title="foedus::snapshot::from\l_buffer_position" alt="" coords="508,313,663,354"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a7b2f3ff32863d2e4e44c96b93071067e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="265,5,444,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8255043c6cb91246cbff43cceb88f596"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashPartitioner::sort_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">Partitioner::SortBatchArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00329">329</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="aligned__memory_8cpp_source.html#l00182">foedus::memory::AlignedMemory::assure_capacity()</a>, <a class="el" href="hash__partitioner__impl_8hpp_source.html#l00117">foedus::storage::hash::HashPartitionerData::bin_shifts_</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00261">foedus::storage::hash::compact_logs()</a>, <a class="el" href="stop__watch_8hpp_source.html#l00048">foedus::debugging::StopWatch::elapsed_ms()</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00168">foedus::memory::AlignedMemory::get_block()</a>, <a class="el" href="partitioner_8hpp_source.html#l00146">foedus::storage::Partitioner::SortBatchArguments::logs_count_</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00236">foedus::storage::hash::prepare_sort_entries()</a>, <a class="el" href="stop__watch_8cpp_source.html#l00035">foedus::debugging::StopWatch::stop()</a>, <a class="el" href="partitioner_8hpp_source.html#l00152">foedus::storage::Partitioner::SortBatchArguments::work_memory_</a>, and <a class="el" href="partitioner_8hpp_source.html#l00169">foedus::storage::Partitioner::SortBatchArguments::written_count_</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00129">foedus::storage::Partitioner::sort_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                                                                {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">if</span> (args.logs_count_ == 0) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    *args.written_count_ = 0;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <span class="comment">// we so far sort them in one path.</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="comment">// to save memory, we could do multi-path merge-sort.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// however, in reality each log has many bytes, so log_count is not that big.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  args.work_memory_-&gt;assure_capacity(<span class="keyword">sizeof</span>(SortEntry) * args.logs_count_);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  debugging::StopWatch stop_watch_entire;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">sizeof</span>(SortEntry) == 16U);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  SortEntry* entries = <span class="keyword">reinterpret_cast&lt;</span>SortEntry*<span class="keyword">&gt;</span>(args.work_memory_-&gt;get_block());</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a213ec023dfa3d7901e0c40ce20fc538d">prepare_sort_entries</a>(data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aabd5098634cafde358b190e4c352f143">bin_shifts_</a>, args, entries);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  debugging::StopWatch stop_watch;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Gave up non-gcc support because of aarch64 support. yes, we can also assume __uint128_t.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// CPU profile of partition_hash_perf: ??% (introsort_loop) + ??% (other inlined).</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  std::sort(</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    reinterpret_cast&lt;__uint128_t*&gt;(entries),</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    reinterpret_cast&lt;__uint128_t*&gt;(entries + args.logs_count_));</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  stop_watch.stop();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Sorted &quot;</span> &lt;&lt; args.logs_count_ &lt;&lt; <span class="stringliteral">&quot; log entries in &quot;</span> &lt;&lt; stop_watch.elapsed_ms() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  uint32_t result_count = <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a57d8decda1736a1f9bf339edf46a58f3">compact_logs</a>(data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aabd5098634cafde358b190e4c352f143">bin_shifts_</a>, args, entries);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  stop_watch_entire.stop();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Hash-&quot;</span> &lt;&lt; id_ &lt;&lt; <span class="stringliteral">&quot; sort_batch() done in  &quot;</span> &lt;&lt; stop_watch_entire.elapsed_ms()</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;ms  for &quot;</span> &lt;&lt; args.logs_count_ &lt;&lt; <span class="stringliteral">&quot; log entries, compacted them to&quot;</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        &lt;&lt; result_count &lt;&lt; <span class="stringliteral">&quot; log entries&quot;</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  *args.written_count_ = result_count;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a57d8decda1736a1f9bf339edf46a58f3"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a57d8decda1736a1f9bf339edf46a58f3">foedus::storage::hash::compact_logs</a></div><div class="ttdeci">uint32_t compact_logs(uint8_t, const Partitioner::SortBatchArguments &amp;args, SortEntry *entries)</div><div class="ttdoc">subroutine of sort_batch </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8cpp_source.html#l00261">hash_partitioner_impl.cpp:261</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a213ec023dfa3d7901e0c40ce20fc538d"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a213ec023dfa3d7901e0c40ce20fc538d">foedus::storage::hash::prepare_sort_entries</a></div><div class="ttdeci">void prepare_sort_entries(uint8_t bin_shifts, const Partitioner::SortBatchArguments &amp;args, SortEntry *entries)</div><div class="ttdoc">subroutine of sort_batch </div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8cpp_source.html#l00236">hash_partitioner_impl.cpp:236</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData_html_aabd5098634cafde358b190e4c352f143"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1HashPartitionerData.html#aabd5098634cafde358b190e4c352f143">foedus::storage::hash::HashPartitionerData::bin_shifts_</a></div><div class="ttdeci">uint8_t bin_shifts_</div><div class="ttdef"><b>Definition:</b> <a href="hash__partitioner__impl_8hpp_source.html#l00117">hash_partitioner_impl.hpp:117</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad79701492d232cb5aec1ad4d8c99eb5d" title="If the current size is smaller than the given size, automatically expands. " alt="" coords="241,71,455,112"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1hash.html#a57d8decda1736a1f9bf339edf46a58f3" title="subroutine of sort_batch " alt="" coords="275,140,421,181"/>
<area shape="rect" id="node7" href="classfoedus_1_1debugging_1_1StopWatch.html#ac8a42ba406ab38b098e27a19e6803638" title="foedus::debugging::\lStopWatch::elapsed_ms" alt="" coords="265,213,431,255"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="241,279,455,320"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1hash.html#a213ec023dfa3d7901e0c40ce20fc538d" title="subroutine of sort_batch " alt="" coords="274,348,422,389"/>
<area shape="rect" id="node20" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="281,596,415,637"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="503,5,716,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b" title="Releases the memory block. " alt="" coords="503,71,716,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1SortEntry.html#a70aa51ac0ebfaa33f8205f47aa443bfa" title="foedus::storage::hash\l::SortEntry::get_position" alt="" coords="528,136,691,177"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#a409566a4b1453421a1eaa945d561c751" title="foedus::storage::hash\l::HashCommonLogType::\lassert_type" alt="" coords="525,202,693,258"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="548,283,671,324"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f" title="foedus::xct::XctId\l::get_ordinal" alt="" coords="548,348,671,389"/>
<area shape="rect" id="node15" href="structfoedus_1_1snapshot_1_1LogBuffer.html#a4c866d7cc1684237eca5fff49215b80e" title="foedus::snapshot::LogBuffer\l::resolve" alt="" coords="518,413,701,455"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1hash_1_1SortEntry.html#ac580bd939cf86931929567c917bb8257" title="foedus::storage::hash\l::SortEntry::set" alt="" coords="536,479,683,520"/>
<area shape="rect" id="node18" href="classfoedus_1_1Epoch.html#a95ee2922375886d43b8e669a192fd4c4" title="Returns the number epochs from the given epoch to this epoch accounting for wrap&#45;around. " alt="" coords="529,545,689,571"/>
<area shape="rect" id="node11" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="768,209,915,251"/>
<area shape="rect" id="node13" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="780,283,903,324"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a" title="foedus::snapshot::from\l_buffer_position" alt="" coords="764,413,919,455"/>
<area shape="rect" id="node19" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="764,545,919,571"/>
<area shape="rect" id="node21" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="529,596,690,637"/>
<area shape="rect" id="node22" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="542,661,677,703"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashPartitioner_a8255043c6cb91246cbff43cceb88f596_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#a8c8909d8a44ae9d6a4afee0ded0add4c" title="Called from log reducer to sort log entries by keys. " alt="" coords="241,5,420,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a1575d3915c8fc1dcd80238cb2688171c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html">HashPartitioner</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00364">364</a> of file <a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                                                {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;HashPartitioner&gt;&quot;</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (v.data_) {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;levels_&gt;&quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(v.data_-&gt;levels_) &lt;&lt; <span class="stringliteral">&quot;&lt;/levels_&gt;&quot;</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;total_bin_count_&gt;&quot;</span> &lt;&lt; v.data_-&gt;total_bin_count_ &lt;&lt; <span class="stringliteral">&quot;&lt;/total_bin_count_&gt;&quot;</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;Not yet designed&quot;</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/HashPartitioner&gt;&quot;</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/hash/<a class="el" href="hash__partitioner__impl_8hpp_source.html">hash_partitioner_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/hash/<a class="el" href="hash__partitioner__impl_8cpp_source.html">hash_partitioner_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html">hash</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html">HashPartitioner</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
