<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::memory::NumaNodeMemory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1memory_1_1NumaNodeMemory.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfoedus_1_1memory_1_1NumaNodeMemory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::memory::NumaNodeMemory Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__MEMORY.html">Memory Manager</a> &raquo; <a class="el" href="group__MEMHIERARCHY.html">Memory Hierarchy</a><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo;  &#124; <a class="el" href="group__THREAD.html">Thread and Thread-Group</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Repository of memories dynamically acquired and shared within one NUMA node (socket).  
 <a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Repository of memories dynamically acquired and shared within one NUMA node (socket). </p>
<p>One <a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html" title="Repository of memories dynamically acquired and shared within one NUMA node (socket). ">NumaNodeMemory</a> corresponds to one <a class="el" href="classfoedus_1_1thread_1_1ThreadGroup.html" title="Represents a group of pre-allocated threads running in one NUMA node. ">foedus::thread::ThreadGroup</a>. All threads in the thread group belong to the NUMA node, thus sharing memories between them must be efficient. So, all memories here are allocated/freed via <a class="el" href="numa_8h.html#a751dfa7ea95405372b4f30cfde9aa550">numa_alloc_interleaved()</a>, <a class="el" href="numa_8h.html#a0c2d1ca7771933df34f77c175082294f">numa_alloc_onnode()</a>, and <a class="el" href="numa_8h.html#a75ff6cd426469e8afb447fbb61d7dfe8">numa_free()</a> (except the user specifies to not use them). </p>

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00048">48</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::memory::NumaNodeMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory__inherit__graph.png" border="0" usemap="#foedus_1_1memory_1_1NumaNodeMemory_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1memory_1_1NumaNodeMemory_inherit__map" id="foedus_1_1memory_1_1NumaNodeMemory_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="13,80,185,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="33,5,165,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::memory::NumaNodeMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory__coll__graph.png" border="0" usemap="#foedus_1_1memory_1_1NumaNodeMemory_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1memory_1_1NumaNodeMemory_coll__map" id="foedus_1_1memory_1_1NumaNodeMemory_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="13,80,185,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="33,5,165,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9f3ae0596df88984a5f410654302f72e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a9f3ae0596df88984a5f410654302f72e">NumaNodeMemory</a> ()=delete</td></tr>
<tr class="separator:a9f3ae0596df88984a5f410654302f72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22577104b7dc8df13a46c97f20dbce7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a22577104b7dc8df13a46c97f20dbce7b">NumaNodeMemory</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a> numa_node)</td></tr>
<tr class="separator:a22577104b7dc8df13a46c97f20dbce7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70fdc4e831999f941d4105de0c3ce3fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a70fdc4e831999f941d4105de0c3ce3fd">initialize_once</a> () override</td></tr>
<tr class="separator:a70fdc4e831999f941d4105de0c3ce3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0413b28301186a33621d72b12c92870"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ac0413b28301186a33621d72b12c92870">uninitialize_once</a> () override</td></tr>
<tr class="separator:ac0413b28301186a33621d72b12c92870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b0da28d3afe3b46d80335a5f422d03"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a07b0da28d3afe3b46d80335a5f422d03">get_numa_node</a> () const </td></tr>
<tr class="separator:a07b0da28d3afe3b46d80335a5f422d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a630ab6d899053a9afc067e34877edd48"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">PagePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48">get_volatile_pool</a> ()</td></tr>
<tr class="separator:a630ab6d899053a9afc067e34877edd48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0541f9ed9fc128fc2c246a4a3bd2b740"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">PagePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">get_snapshot_pool</a> ()</td></tr>
<tr class="separator:a0541f9ed9fc128fc2c246a4a3bd2b740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8fddde9484a0ceb8d31cd8eca323c77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1cache_1_1CacheHashtable.html">cache::CacheHashtable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ad8fddde9484a0ceb8d31cd8eca323c77">get_snapshot_cache_table</a> ()</td></tr>
<tr class="separator:ad8fddde9484a0ceb8d31cd8eca323c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab773a4f626058e54d05cb702255b207f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#ab773a4f626058e54d05cb702255b207f">get_core_memory_count</a> () const </td></tr>
<tr class="separator:ab773a4f626058e54d05cb702255b207f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a855bc09ed8c953a2ddc6f77bef62b571"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a> * &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a855bc09ed8c953a2ddc6f77bef62b571">get_core_memories</a> ()</td></tr>
<tr class="separator:a855bc09ed8c953a2ddc6f77bef62b571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58cd4f9c594cdcfd85fb3c3e9d47a983"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a58cd4f9c594cdcfd85fb3c3e9d47a983">get_core_memory</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a> id) const </td></tr>
<tr class="separator:a58cd4f9c594cdcfd85fb3c3e9d47a983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b806047330c36c75fda0c1b73bf1572"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a4b806047330c36c75fda0c1b73bf1572">get_core_memory</a> (<a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a> ordinal) const </td></tr>
<tr class="separator:a4b806047330c36c75fda0c1b73bf1572"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a197b63dfdbb7d28dab57fdfae379f28b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b">allocate_numa_memory_general</a> (uint64_t size, uint64_t alignment, <a class="el" href="classfoedus_1_1memory_1_1AlignedMemory.html">AlignedMemory</a> *out) const </td></tr>
<tr class="memdesc:a197b63dfdbb7d28dab57fdfae379f28b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a memory of the given size on this NUMA node.  <a href="#a197b63dfdbb7d28dab57fdfae379f28b">More...</a><br /></td></tr>
<tr class="separator:a197b63dfdbb7d28dab57fdfae379f28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a347b906362b2d1802069ead12c3ef9b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7">allocate_numa_memory</a> (uint64_t size, <a class="el" href="classfoedus_1_1memory_1_1AlignedMemory.html">AlignedMemory</a> *out) const </td></tr>
<tr class="separator:a347b906362b2d1802069ead12c3ef9b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf4edc54422d46a54523aed66e0daa40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aaf4edc54422d46a54523aed66e0daa40">allocate_huge_numa_memory</a> (uint64_t size, <a class="el" href="classfoedus_1_1memory_1_1AlignedMemory.html">AlignedMemory</a> *out) const </td></tr>
<tr class="separator:aaf4edc54422d46a54523aed66e0daa40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8652e0d9e6d43a110f31bc5b9f4e692"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#af8652e0d9e6d43a110f31bc5b9f4e692">get_volatile_offset_chunk_memory_piece</a> (<a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a> core_ordinal)</td></tr>
<tr class="separator:af8652e0d9e6d43a110f31bc5b9f4e692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accd3c0534d9385b49168c51da6a56552"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#accd3c0534d9385b49168c51da6a56552">get_snapshot_offset_chunk_memory_piece</a> (<a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a> core_ordinal)</td></tr>
<tr class="separator:accd3c0534d9385b49168c51da6a56552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec426088a6e841b62d8305c4934bff8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">AlignedMemorySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aec426088a6e841b62d8305c4934bff8d">get_log_buffer_memory_piece</a> (<a class="el" href="group__LOG.html#gac1e67c911232180318c56380d45bf4a1">log::LoggerId</a> logger)</td></tr>
<tr class="separator:aec426088a6e841b62d8305c4934bff8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dbec4cb10130e169f203c7a8d52d3c9"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a3dbec4cb10130e169f203c7a8d52d3c9">dump_free_memory_stat</a> () const </td></tr>
<tr class="memdesc:a3dbec4cb10130e169f203c7a8d52d3c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Report rough statistics of free memory.  <a href="#a3dbec4cb10130e169f203c7a8d52d3c9">More...</a><br /></td></tr>
<tr class="separator:a3dbec4cb10130e169f203c7a8d52d3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1DefaultInitializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1DefaultInitializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1DefaultInitializable.html">foedus::DefaultInitializable</a></td></tr>
<tr class="memitem:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a5e0a2679baa030e297c1a51847352945">DefaultInitializable</a> ()</td></tr>
<tr class="separator:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afe7a18ec3e5edd143eb7d6a75d65ef9b">~DefaultInitializable</a> ()</td></tr>
<tr class="separator:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afd6a8f8296ab570b545430593287d454">DefaultInitializable</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a31eb5acadf0544b97414efd33aed08c7">operator=</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a> () override final</td></tr>
<tr class="memdesc:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#aa087b096d1edaeb0304c250eadb0d7e1" title="Acquires resources in this object, usually called right after constructor. ">Initializable::initialize()</a> that provides initialize-once semantics.  <a href="#a22a0dc3bbbca682c3bc41eace9b6d1ff">More...</a><br /></td></tr>
<tr class="separator:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a> () override final</td></tr>
<tr class="memdesc:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#afbe5738b0bc85362fba80bdf788fd3c3" title="An idempotent method to release all resources of this object, if any. ">Initializable::uninitialize()</a> that provides uninitialize-once semantics.  <a href="#ab14b136a7d26f9f499ab9dc15a45a8cb">More...</a><br /></td></tr>
<tr class="separator:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a> () const  override final</td></tr>
<tr class="memdesc:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already initialized or not.  <a href="#a1abda1e84b8af8bd6916e52fd0a09f3e">More...</a><br /></td></tr>
<tr class="separator:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Initializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Initializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Initializable.html">foedus::Initializable</a></td></tr>
<tr class="memitem:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Initializable.html#aff308260543d18b3fd1367fd9017b176">~Initializable</a> ()</td></tr>
<tr class="separator:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a9f3ae0596df88984a5f410654302f72e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::NumaNodeMemory::NumaNodeMemory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a22577104b7dc8df13a46c97f20dbce7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::NumaNodeMemory::NumaNodeMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>numa_node</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8cpp_source.html#l00041">41</a> of file <a class="el" href="numa__node__memory_8cpp_source.html">numa_node_memory.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  : engine_(engine),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    numa_node_(numa_node),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    cores_(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    loggers_(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#aee56a2e02a140b766a74d9e9c3088ddb">log_</a>.<a class="code" href="structfoedus_1_1log_1_1LogOptions.html#ab5a3f1900a8a5bf69c7d6e049fe30f90">loggers_per_node_</a>),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    snapshot_cache_table_(<span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_aee56a2e02a140b766a74d9e9c3088ddb"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#aee56a2e02a140b766a74d9e9c3088ddb">foedus::EngineOptions::log_</a></div><div class="ttdeci">log::LogOptions log_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00138">engine_options.hpp:138</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1LogOptions_html_ab5a3f1900a8a5bf69c7d6e049fe30f90"><div class="ttname"><a href="structfoedus_1_1log_1_1LogOptions.html#ab5a3f1900a8a5bf69c7d6e049fe30f90">foedus::log::LogOptions::loggers_per_node_</a></div><div class="ttdeci">uint16_t loggers_per_node_</div><div class="ttdoc">Number of loggers per NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="log__options_8hpp_source.html#l00080">log_options.hpp:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aaf4edc54422d46a54523aed66e0daa40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaNodeMemory::allocate_huge_numa_memory </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1AlignedMemory.html">AlignedMemory</a> *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00088">88</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>References <a class="el" href="numa__node__memory_8cpp_source.html#l00201">allocate_numa_memory_general()</a>, and <a class="el" href="memory__id_8hpp_source.html#l00050">foedus::memory::kHugepageSize</a>.</p>

<p>Referenced by <a class="el" href="numa__node__memory_8cpp_source.html#l00057">initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b">allocate_numa_memory_general</a>(size, <a class="code" href="group__MEMORY.html#gad3fad11cbb0632c8613fd4a3375100b2">kHugepageSize</a>, out);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="ttc" id="group__MEMORY_html_gad3fad11cbb0632c8613fd4a3375100b2"><div class="ttname"><a href="group__MEMORY.html#gad3fad11cbb0632c8613fd4a3375100b2">foedus::memory::kHugepageSize</a></div><div class="ttdeci">const uint64_t kHugepageSize</div><div class="ttdoc">So far 2MB is the only page size available via Transparent Huge Page (THP). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00050">memory_id.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a197b63dfdbb7d28dab57fdfae379f28b"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b">foedus::memory::NumaNodeMemory::allocate_numa_memory_general</a></div><div class="ttdeci">ErrorStack allocate_numa_memory_general(uint64_t size, uint64_t alignment, AlignedMemory *out) const </div><div class="ttdoc">Allocate a memory of the given size on this NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8cpp_source.html#l00201">numa_node_memory.cpp:201</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b" title="Allocate a memory of the given size on this NUMA node. " alt="" coords="240,206,427,262"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="514,148,649,190"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e" title="Allocate a memory, releasing the current memory if exists. " alt="" coords="475,214,688,255"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="475,279,688,320"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1memory.html#ac2422aa4fe378da8a9594901762e17df" title="foedus::memory::alloc_mmap" alt="" coords="935,50,1128,77"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1189,104,1329,146"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1memory.html#ae51e4a90f52316ba9dce8ff783f30d84" title="foedus::memory::alloc\l_mmap_1gb_pages" alt="" coords="736,46,887,87"/>
<area shape="rect" id="node9" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="951,323,1112,364"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#gab3d1892edaa7db4b02029567b7993f37" title="In order to run even on a non&#45;numa machine or a machine with fewer sockets, we allow specifying arbit..." alt="" coords="736,214,887,255"/>
<area shape="rect" id="node11" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="976,162,1087,189"/>
<area shape="rect" id="node13" href="numa_8h.html#aba49c14c68d23dc05d046db02766b928" title="numa_preferred" alt="" coords="756,330,867,357"/>
<area shape="rect" id="node14" href="numa_8h.html#a56f33968932f6550e5e5eb4d1acc67b3" title="numa_set_preferred" alt="" coords="743,381,879,408"/>
<area shape="rect" id="node15" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="744,432,879,474"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1memory.html#af6145d9296231995c84badafb6a2a0a9" title="Returns if 1GB hugepages were enabled. " alt="" coords="1176,39,1341,80"/>
<area shape="rect" id="node12" href="numa_8h.html#a22585176d6e08c221de8377637bd72a7" title="numa_num_configured\l_nodes" alt="" coords="955,214,1107,255"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="964,432,1099,474"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_aaf4edc54422d46a54523aed66e0daa40_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a70fdc4e831999f941d4105de0c3ce3fd" title="foedus::memory::NumaNode\lMemory::initialize_once" alt="" coords="240,13,427,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a347b906362b2d1802069ead12c3ef9b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaNodeMemory::allocate_numa_memory </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1AlignedMemory.html">AlignedMemory</a> *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00085">85</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>References <a class="el" href="numa__node__memory_8cpp_source.html#l00201">allocate_numa_memory_general()</a>.</p>

<p>Referenced by <a class="el" href="numa__node__memory_8cpp_source.html#l00057">initialize_once()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00088">foedus::memory::NumaCoreMemory::initialize_once()</a>, and <a class="el" href="logger__impl_8cpp_source.html#l00074">foedus::log::Logger::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                                                {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b">allocate_numa_memory_general</a>(size, 1 &lt;&lt; 12, out);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a197b63dfdbb7d28dab57fdfae379f28b"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b">foedus::memory::NumaNodeMemory::allocate_numa_memory_general</a></div><div class="ttdeci">ErrorStack allocate_numa_memory_general(uint64_t size, uint64_t alignment, AlignedMemory *out) const </div><div class="ttdoc">Allocate a memory of the given size on this NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8cpp_source.html#l00201">numa_node_memory.cpp:201</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b" title="Allocate a memory of the given size on this NUMA node. " alt="" coords="240,206,427,262"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="514,148,649,190"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e" title="Allocate a memory, releasing the current memory if exists. " alt="" coords="475,214,688,255"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="475,279,688,320"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1memory.html#ac2422aa4fe378da8a9594901762e17df" title="foedus::memory::alloc_mmap" alt="" coords="935,50,1128,77"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1189,104,1329,146"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1memory.html#ae51e4a90f52316ba9dce8ff783f30d84" title="foedus::memory::alloc\l_mmap_1gb_pages" alt="" coords="736,46,887,87"/>
<area shape="rect" id="node9" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="951,323,1112,364"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#gab3d1892edaa7db4b02029567b7993f37" title="In order to run even on a non&#45;numa machine or a machine with fewer sockets, we allow specifying arbit..." alt="" coords="736,214,887,255"/>
<area shape="rect" id="node11" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="976,162,1087,189"/>
<area shape="rect" id="node13" href="numa_8h.html#aba49c14c68d23dc05d046db02766b928" title="numa_preferred" alt="" coords="756,330,867,357"/>
<area shape="rect" id="node14" href="numa_8h.html#a56f33968932f6550e5e5eb4d1acc67b3" title="numa_set_preferred" alt="" coords="743,381,879,408"/>
<area shape="rect" id="node15" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="744,432,879,474"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1memory.html#af6145d9296231995c84badafb6a2a0a9" title="Returns if 1GB hugepages were enabled. " alt="" coords="1176,39,1341,80"/>
<area shape="rect" id="node12" href="numa_8h.html#a22585176d6e08c221de8377637bd72a7" title="numa_num_configured\l_nodes" alt="" coords="955,214,1107,255"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="964,432,1099,474"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a347b906362b2d1802069ead12c3ef9b7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a70fdc4e831999f941d4105de0c3ce3fd" title="foedus::memory::NumaNode\lMemory::initialize_once" alt="" coords="240,5,427,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="241,71,425,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="267,136,399,177"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a197b63dfdbb7d28dab57fdfae379f28b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaNodeMemory::allocate_numa_memory_general </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>alignment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1AlignedMemory.html">AlignedMemory</a> *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a memory of the given size on this NUMA node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>byte size of the memory to acquire </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">alignment</td><td>alignment size </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>allocated memory is moved to object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Expect OUTOFMEMORY error. </dd></dl>

<p>Definition at line <a class="el" href="numa__node__memory_8cpp_source.html#l00201">201</a> of file <a class="el" href="numa__node__memory_8cpp_source.html">numa_node_memory.cpp</a>.</p>

<p>References <a class="el" href="aligned__memory_8cpp_source.html#l00113">foedus::memory::AlignedMemory::alloc()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00170">foedus::memory::AlignedMemory::is_null()</a>, <a class="el" href="error__code_8hpp_source.html#l00105">foedus::kErrorCodeOutofmemory</a>, <a class="el" href="memory__id_8hpp_source.html#l00050">foedus::memory::kHugepageSize</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00083">foedus::memory::AlignedMemory::kNumaAllocOnnode</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00100">foedus::memory::AlignedMemory::kNumaMmapOneGbPages</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="engine__options_8hpp_source.html#l00139">foedus::EngineOptions::memory_</a>, and <a class="el" href="memory__options_8hpp_source.html#l00085">foedus::memory::MemoryOptions::use_mmap_hugepages_</a>.</p>

<p>Referenced by <a class="el" href="numa__node__memory_8hpp_source.html#l00088">allocate_huge_numa_memory()</a>, and <a class="el" href="numa__node__memory_8hpp_source.html#l00085">allocate_numa_memory()</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(out);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">if</span> (engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#aa4cdbd21634a9dfd3054f67d0879b8a0">use_mmap_hugepages_</a> &amp;&amp;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    alignment &gt;= <a class="code" href="group__MEMORY.html#gad3fad11cbb0632c8613fd4a3375100b2">kHugepageSize</a></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    &amp;&amp; size &gt;= (1ULL &lt;&lt; 30) * 8 / 10) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;This is a big memory allocation. Let&#39;s use the mmap hugepage (1GB pages)&quot;</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    out-&gt;alloc(size, 1ULL &lt;&lt; 30, <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a984b0dd449f9f42d83c652b8f9fec6da">AlignedMemory::kNumaMmapOneGbPages</a>, numa_node_);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    out-&gt;alloc(size, alignment, <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225">AlignedMemory::kNumaAllocOnnode</a>, numa_node_);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (out-&gt;is_null()) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ab9073efedd5b1ae328ccba6fcab06490">kErrorCodeOutofmemory</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ab9073efedd5b1ae328ccba6fcab06490"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ab9073efedd5b1ae328ccba6fcab06490">foedus::kErrorCodeOutofmemory</a></div><div class="ttdoc">0x0001 : "GENERAL: Out of memory" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00105">error_code.hpp:105</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225">foedus::memory::AlignedMemory::kNumaAllocOnnode</a></div><div class="ttdoc">numa_alloc_onnode() and numa_free(). </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00083">aligned_memory.hpp:83</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a57abf88bfdff732d23c00b6738567a43a984b0dd449f9f42d83c652b8f9fec6da"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a984b0dd449f9f42d83c652b8f9fec6da">foedus::memory::AlignedMemory::kNumaMmapOneGbPages</a></div><div class="ttdoc">Usual new()/delete(). </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00100">aligned_memory.hpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="group__MEMORY_html_gad3fad11cbb0632c8613fd4a3375100b2"><div class="ttname"><a href="group__MEMORY.html#gad3fad11cbb0632c8613fd4a3375100b2">foedus::memory::kHugepageSize</a></div><div class="ttdeci">const uint64_t kHugepageSize</div><div class="ttdoc">So far 2MB is the only page size available via Transparent Huge Page (THP). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00050">memory_id.hpp:50</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a0fba742942a9ff0de143e354fea34d4b"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">foedus::EngineOptions::memory_</a></div><div class="ttdeci">memory::MemoryOptions memory_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00139">engine_options.hpp:139</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1MemoryOptions_html_aa4cdbd21634a9dfd3054f67d0879b8a0"><div class="ttname"><a href="structfoedus_1_1memory_1_1MemoryOptions.html#aa4cdbd21634a9dfd3054f67d0879b8a0">foedus::memory::MemoryOptions::use_mmap_hugepages_</a></div><div class="ttdeci">bool use_mmap_hugepages_</div><div class="ttdoc">Whether to use non-transparent hugepages for big memories (1GB huge pages). </div><div class="ttdef"><b>Definition:</b> <a href="memory__options_8hpp_source.html#l00085">memory_options.hpp:85</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e" title="Allocate a memory, releasing the current memory if exists. " alt="" coords="240,206,453,247"/>
<area shape="rect" id="node15" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="279,271,414,313"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="240,337,453,378"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1memory.html#ac2422aa4fe378da8a9594901762e17df" title="foedus::memory::alloc_mmap" alt="" coords="700,43,893,69"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="954,97,1094,138"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1memory.html#ae51e4a90f52316ba9dce8ff783f30d84" title="foedus::memory::alloc\l_mmap_1gb_pages" alt="" coords="501,38,652,79"/>
<area shape="rect" id="node7" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="716,315,877,357"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#gab3d1892edaa7db4b02029567b7993f37" title="In order to run even on a non&#45;numa machine or a machine with fewer sockets, we allow specifying arbit..." alt="" coords="501,206,652,247"/>
<area shape="rect" id="node9" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="741,155,852,181"/>
<area shape="rect" id="node11" href="numa_8h.html#aba49c14c68d23dc05d046db02766b928" title="numa_preferred" alt="" coords="521,323,632,349"/>
<area shape="rect" id="node12" href="numa_8h.html#a56f33968932f6550e5e5eb4d1acc67b3" title="numa_set_preferred" alt="" coords="509,373,645,400"/>
<area shape="rect" id="node13" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="509,425,644,466"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1memory.html#af6145d9296231995c84badafb6a2a0a9" title="Returns if 1GB hugepages were enabled. " alt="" coords="941,31,1107,73"/>
<area shape="rect" id="node10" href="numa_8h.html#a22585176d6e08c221de8377637bd72a7" title="numa_num_configured\l_nodes" alt="" coords="721,206,873,247"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="729,425,864,466"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a197b63dfdbb7d28dab57fdfae379f28b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aaf4edc54422d46a54523aed66e0daa40" title="foedus::memory::NumaNode\lMemory::allocate_huge\l_numa_memory" alt="" coords="240,5,427,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7" title="foedus::memory::NumaNode\lMemory::allocate_numa\l_memory" alt="" coords="240,85,427,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a70fdc4e831999f941d4105de0c3ce3fd" title="foedus::memory::NumaNode\lMemory::initialize_once" alt="" coords="475,19,661,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="476,89,660,130"/>
<area shape="rect" id="node6" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="502,154,634,195"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3dbec4cb10130e169f203c7a8d52d3c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::memory::NumaNodeMemory::dump_free_memory_stat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Report rough statistics of free memory. </p>

<p>Definition at line <a class="el" href="numa__node__memory_8cpp_source.html#l00220">220</a> of file <a class="el" href="numa__node__memory_8cpp_source.html">numa_node_memory.cpp</a>.</p>

<p>References <a class="el" href="page__pool_8hpp_source.html#l00177">foedus::memory::PagePool::Stat::allocated_pages_</a>, <a class="el" href="page__pool_8cpp_source.html#l00118">foedus::memory::PagePool::get_stat()</a>, and <a class="el" href="page__pool_8hpp_source.html#l00176">foedus::memory::PagePool::Stat::total_pages_</a>.</p>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                                      {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  std::stringstream ret;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  PagePool::Stat volatile_stat = volatile_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">get_stat</a>();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  ret &lt;&lt; <span class="stringliteral">&quot;    Volatile-Pool: &quot;</span> &lt;&lt; volatile_stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> &lt;&lt; <span class="stringliteral">&quot; allocated pages, &quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    &lt;&lt; volatile_stat.total_pages_ &lt;&lt; <span class="stringliteral">&quot; total pages, &quot;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    &lt;&lt; (volatile_stat.total_pages_ - volatile_stat.allocated_pages_) &lt;&lt; <span class="stringliteral">&quot; free pages&quot;</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    &lt;&lt; std::endl;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  PagePool::Stat snapshot_stat = snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">get_stat</a>();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  ret &lt;&lt; <span class="stringliteral">&quot;    Snapshot-Pool: &quot;</span> &lt;&lt; snapshot_stat.<a class="code" href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">allocated_pages_</a> &lt;&lt; <span class="stringliteral">&quot; allocated pages, &quot;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    &lt;&lt; snapshot_stat.total_pages_ &lt;&lt; <span class="stringliteral">&quot; total pages, &quot;</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    &lt;&lt; (snapshot_stat.total_pages_ - snapshot_stat.allocated_pages_) &lt;&lt; <span class="stringliteral">&quot; free pages&quot;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    &lt;&lt; std::endl;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> ret.str();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="ttc" id="group__MEMORY_html_a4ba86092787e1f959dfffca693a92fbd"><div class="ttname"><a href="group__MEMORY.html#a4ba86092787e1f959dfffca693a92fbd">foedus::memory::PagePool::Stat::allocated_pages_</a></div><div class="ttdeci">uint64_t allocated_pages_</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00177">page_pool.hpp:177</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_aae17b661b01fd08a3019128c82227e7c"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c">foedus::memory::PagePool::get_stat</a></div><div class="ttdeci">Stat get_stat() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00118">page_pool.cpp:118</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a3dbec4cb10130e169f203c7a8d52d3c9_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a3dbec4cb10130e169f203c7a8d52d3c9_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a3dbec4cb10130e169f203c7a8d52d3c9_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a3dbec4cb10130e169f203c7a8d52d3c9_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePool.html#aae17b661b01fd08a3019128c82227e7c" title="foedus::memory::PagePool\l::get_stat" alt="" coords="273,5,452,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a55ba648cb98718804a890ea3b4965e39" title="foedus::memory::PagePool\lPimpl::get_stat" alt="" coords="500,5,679,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="727,5,905,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a855bc09ed8c953a2ddc6f77bef62b571"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a>*&gt;&amp; foedus::memory::NumaNodeMemory::get_core_memories </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00066">66</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{ <span class="keywordflow">return</span> core_memories_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a58cd4f9c594cdcfd85fb3c3e9d47a983"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a>* foedus::memory::NumaNodeMemory::get_core_memory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00067">67</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>References <a class="el" href="thread__id_8hpp_source.html#l00139">foedus::thread::decompose_numa_local_ordinal()</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>, and <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                                                 {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">return</span> core_memories_[<a class="code" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">foedus::thread::decompose_numa_local_ordinal</a>(<span class="keywordtype">id</span>)];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  }</div>
<div class="ttc" id="group__THREAD_html_ga93083d6b052db01851cb61c120522c1d"><div class="ttname"><a href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">foedus::thread::decompose_numa_local_ordinal</a></div><div class="ttdeci">ThreadLocalOrdinal decompose_numa_local_ordinal(ThreadId global_id)</div><div class="ttdoc">Extracts local ordinal from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00139">thread_id.hpp:139</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="240,5,419,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a58cd4f9c594cdcfd85fb3c3e9d47a983_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="241,5,425,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8303f5db549570913eefd0e123dbfc2e" title="foedus::log::ThreadLogBuffer\l::initialize_once" alt="" coords="240,71,427,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4b806047330c36c75fda0c1b73bf1572"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a>* foedus::memory::NumaNodeMemory::get_core_memory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a>&#160;</td>
          <td class="paramname"><em>ordinal</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00070">70</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                                                                {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> core_memories_[ordinal];</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab773a4f626058e54d05cb702255b207f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a> foedus::memory::NumaNodeMemory::get_core_memory_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00062">62</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="thread__id_8hpp_source.html#l00069">foedus::thread::kMaxThreadLocalOrdinal</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                                               {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(core_memories_.size() &lt;= <a class="code" href="group__THREAD.html#gac977ecfa954bdf702596888c4f779581">foedus::thread::kMaxThreadLocalOrdinal</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a><span class="keyword">&gt;</span>(core_memories_.size());</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="ttc" id="group__THREAD_html_gac977ecfa954bdf702596888c4f779581"><div class="ttname"><a href="group__THREAD.html#gac977ecfa954bdf702596888c4f779581">foedus::thread::kMaxThreadLocalOrdinal</a></div><div class="ttdeci">const ThreadLocalOrdinal kMaxThreadLocalOrdinal</div><div class="ttdoc">Maximum possible value of ThreadLocalOrdinal. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00069">thread_id.hpp:69</a></div></div>
<div class="ttc" id="group__THREAD_html_ga52762b7b4a53e17a0dddf7eab1effc28"><div class="ttname"><a href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a></div><div class="ttdeci">uint8_t ThreadLocalOrdinal</div><div class="ttdoc">Typedef for a local ID of Thread (core), which is NOT unique across NUMA nodes. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00058">thread_id.hpp:58</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aec426088a6e841b62d8305c4934bff8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">AlignedMemorySlice</a> foedus::memory::NumaNodeMemory::get_log_buffer_memory_piece </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__LOG.html#gac1e67c911232180318c56380d45bf4a1">log::LoggerId</a>&#160;</td>
          <td class="paramname"><em>logger</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00100">100</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="numa__core__memory_8cpp_source.html#l00088">foedus::memory::NumaCoreMemory::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                                                                     {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> log_buffer_memory_pieces_[logger];</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_aec426088a6e841b62d8305c4934bff8d_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_aec426088a6e841b62d8305c4934bff8d_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_aec426088a6e841b62d8305c4934bff8d_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_aec426088a6e841b62d8305c4934bff8d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="240,13,424,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a07b0da28d3afe3b46d80335a5f422d03"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a> foedus::memory::NumaNodeMemory::get_numa_node </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00055">55</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="numa__core__memory_8cpp_source.html#l00039">foedus::memory::NumaCoreMemory::NumaCoreMemory()</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{ <span class="keywordflow">return</span> numa_node_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a07b0da28d3afe3b46d80335a5f422d03_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a07b0da28d3afe3b46d80335a5f422d03_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a07b0da28d3afe3b46d80335a5f422d03_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a07b0da28d3afe3b46d80335a5f422d03_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ae52c70de54b28d69dc585e33ee5775b1" title="foedus::memory::NumaCore\lMemory::NumaCoreMemory" alt="" coords="240,5,425,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad8fddde9484a0ceb8d31cd8eca323c77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1cache_1_1CacheHashtable.html">cache::CacheHashtable</a>* foedus::memory::NumaNodeMemory::get_snapshot_cache_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00059">59</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="cache__manager__pimpl_8cpp_source.html#l00047">foedus::cache::CacheManagerPimpl::initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{ <span class="keywordflow">return</span> snapshot_cache_table_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_ad8fddde9484a0ceb8d31cd8eca323c77_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_ad8fddde9484a0ceb8d31cd8eca323c77_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_ad8fddde9484a0ceb8d31cd8eca323c77_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_ad8fddde9484a0ceb8d31cd8eca323c77_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="285,5,484,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="293,71,477,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="532,5,731,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="accd3c0534d9385b49168c51da6a56552"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a>* foedus::memory::NumaNodeMemory::get_snapshot_offset_chunk_memory_piece </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a>&#160;</td>
          <td class="paramname"><em>core_ordinal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00096">96</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="numa__core__memory_8cpp_source.html#l00088">foedus::memory::NumaCoreMemory::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                                 {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> snapshot_offset_chunk_memory_pieces_[core_ordinal];</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_accd3c0534d9385b49168c51da6a56552_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_accd3c0534d9385b49168c51da6a56552_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_accd3c0534d9385b49168c51da6a56552_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_accd3c0534d9385b49168c51da6a56552_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="247,13,431,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0541f9ed9fc128fc2c246a4a3bd2b740"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">PagePool</a>* foedus::memory::NumaNodeMemory::get_snapshot_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00058">58</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="cache__manager__pimpl_8cpp_source.html#l00047">foedus::cache::CacheManagerPimpl::initialize_once()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00088">foedus::memory::NumaCoreMemory::initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{ <span class="keywordflow">return</span> &amp;snapshot_pool_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a0541f9ed9fc128fc2c246a4a3bd2b740_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a0541f9ed9fc128fc2c246a4a3bd2b740_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a0541f9ed9fc128fc2c246a4a3bd2b740_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a0541f9ed9fc128fc2c246a4a3bd2b740_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="240,5,439,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="247,71,431,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="247,136,431,177"/>
<area shape="rect" id="node3" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="487,5,685,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af8652e0d9e6d43a110f31bc5b9f4e692"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">PagePoolOffsetChunk</a>* foedus::memory::NumaNodeMemory::get_volatile_offset_chunk_memory_piece </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga52762b7b4a53e17a0dddf7eab1effc28">foedus::thread::ThreadLocalOrdinal</a>&#160;</td>
          <td class="paramname"><em>core_ordinal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00092">92</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="numa__core__memory_8cpp_source.html#l00088">foedus::memory::NumaCoreMemory::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                                                 {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> volatile_offset_chunk_memory_pieces_[core_ordinal];</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_af8652e0d9e6d43a110f31bc5b9f4e692_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_af8652e0d9e6d43a110f31bc5b9f4e692_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_af8652e0d9e6d43a110f31bc5b9f4e692_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_af8652e0d9e6d43a110f31bc5b9f4e692_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="240,13,424,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a630ab6d899053a9afc067e34877edd48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">PagePool</a>* foedus::memory::NumaNodeMemory::get_volatile_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__node__memory_8hpp_source.html#l00057">57</a> of file <a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="numa__core__memory_8cpp_source.html#l00088">foedus::memory::NumaCoreMemory::initialize_once()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{ <span class="keywordflow">return</span> &amp;volatile_pool_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a630ab6d899053a9afc067e34877edd48_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a630ab6d899053a9afc067e34877edd48_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a630ab6d899053a9afc067e34877edd48_icgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a630ab6d899053a9afc067e34877edd48_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="240,5,424,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="240,71,424,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a70fdc4e831999f941d4105de0c3ce3fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaNodeMemory::initialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="numa__node__memory_8cpp_source.html#l00057">57</a> of file <a class="el" href="numa__node__memory_8cpp_source.html">numa_node_memory.cpp</a>.</p>

<p>References <a class="el" href="aligned__memory_8cpp_source.html#l00113">foedus::memory::AlignedMemory::alloc()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00088">allocate_huge_numa_memory()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00085">allocate_numa_memory()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8cpp_source.html#l00101">foedus::memory::PagePool::attach()</a>, <a class="el" href="engine__options_8hpp_source.html#l00136">foedus::EngineOptions::cache_</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00168">foedus::memory::AlignedMemory::get_block()</a>, <a class="el" href="page__pool_8cpp_source.html#l00117">foedus::memory::PagePool::get_memory_size()</a>, <a class="el" href="shared__memory__repo_8hpp_source.html#l00521">foedus::soc::SharedMemoryRepo::get_node_memory_anchors()</a>, <a class="el" href="numa__node__memory_8cpp_source.html#l00049">foedus::memory::get_numa_node_size()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="soc__manager_8cpp_source.html#l00038">foedus::soc::SocManager::get_shared_memory_repo()</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00172">foedus::memory::AlignedMemory::get_size()</a>, <a class="el" href="engine_8cpp_source.html#l00059">foedus::Engine::get_soc_manager()</a>, <a class="el" href="shared__memory__repo_8hpp_source.html#l00532">foedus::soc::SharedMemoryRepo::get_volatile_pool()</a>, <a class="el" href="page__pool_8cpp_source.html#l00114">foedus::memory::PagePool::initialize()</a>, <a class="el" href="page__pool_8cpp_source.html#l00115">foedus::memory::PagePool::is_initialized()</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00083">foedus::memory::AlignedMemory::kNumaAllocOnnode</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="engine__options_8hpp_source.html#l00139">foedus::EngineOptions::memory_</a>, <a class="el" href="memory__options_8hpp_source.html#l00122">foedus::memory::MemoryOptions::page_pool_size_mb_per_node_</a>, <a class="el" href="memory__options_8hpp_source.html#l00114">foedus::memory::MemoryOptions::rigorous_page_boundary_check_</a>, <a class="el" href="page__pool_8cpp_source.html#l00122">foedus::memory::PagePool::set_debug_pool_name()</a>, <a class="el" href="cache__options_8hpp_source.html#l00058">foedus::cache::CacheOptions::snapshot_cache_size_mb_per_node_</a>, and <a class="el" href="shared__memory__repo_8hpp_source.html#l00344">foedus::soc::NodeMemoryAnchors::volatile_pool_status_</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                           {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Initializing NumaNodeMemory for node &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(numa_node_) &lt;&lt; <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; BEFORE: numa_node_size=&quot;</span> &lt;&lt; <a class="code" href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40">get_numa_node_size</a>(numa_node_);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// volatile pool is placed on the shared memory</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  soc::SharedMemoryRepo* memory_repo = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">get_soc_manager</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c">get_shared_memory_repo</a>();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  uint64_t volatile_size =</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#aaafa99544f3e4b55b2bd5369e5c363db">page_pool_size_mb_per_node_</a>) &lt;&lt; 20;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  volatile_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a6522fe3b6b37b4e87c0e4170e573b8d2">attach</a>(</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    memory_repo-&gt;get_node_memory_anchors(numa_node_)-&gt;volatile_pool_status_,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    memory_repo-&gt;get_volatile_pool(numa_node_),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    volatile_size,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#a4180425eb0e23ae388185aceaecd7722">rigorous_page_boundary_check_</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  volatile_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aeaee1accaade5856ad8786a2f8a3a22a">set_debug_pool_name</a>(</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    std::string(<span class="stringliteral">&quot;VolatilePool-&quot;</span>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    + std::to_string(static_cast&lt;int&gt;(numa_node_)));</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// snapshot pool is SOC-local</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  uint64_t snapshot_pool_bytes</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">cache_</a>.<a class="code" href="structfoedus_1_1cache_1_1CacheOptions.html#a59880c2bce011cc9fca58613e551c881">snapshot_cache_size_mb_per_node_</a>) &lt;&lt; 20;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">if</span> (engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#a4180425eb0e23ae388185aceaecd7722">rigorous_page_boundary_check_</a>) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// mprotect raises EINVAL if the underlying pages are hugepages.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;rigorous_page_boundary_check_ is specified, so disabled hugepages.&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7">allocate_numa_memory</a>(snapshot_pool_bytes, &amp;snapshot_pool_memory_);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aaf4edc54422d46a54523aed66e0daa40">allocate_huge_numa_memory</a>(snapshot_pool_bytes, &amp;snapshot_pool_memory_);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  snapshot_pool_control_block_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e">alloc</a>(1 &lt;&lt; 12, 1 &lt;&lt; 12, <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225">AlignedMemory::kNumaAllocOnnode</a>, numa_node_);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a6522fe3b6b37b4e87c0e4170e573b8d2">attach</a>(</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    reinterpret_cast&lt;PagePoolControlBlock*&gt;(snapshot_pool_control_block_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">get_block</a>()),</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    snapshot_pool_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">get_block</a>(),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    snapshot_pool_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd">get_size</a>(),</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">true</span>,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#a4180425eb0e23ae388185aceaecd7722">rigorous_page_boundary_check_</a>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aeaee1accaade5856ad8786a2f8a3a22a">set_debug_pool_name</a>(</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    std::string(<span class="stringliteral">&quot;SnapshotPool-&quot;</span>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    + std::to_string(static_cast&lt;int&gt;(numa_node_)));</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(volatile_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a88b1043207496ee52b2abf56e065b068">initialize</a>());</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a88b1043207496ee52b2abf56e065b068">initialize</a>());</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// snapshot_pool_ consumes #pages * 4kb bytes of memory.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// CacheBucket is 16 bytes, so even with 32-fold (3% full hashtable), we spend only</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// #pages * 0.5kb for hash buckets. This is a neligible overhead.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  uint64_t cache_hashtable_buckets = (snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#adb83fc01491a9886ee654d377b62696f">get_memory_size</a>() / <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">storage::kPageSize</a>) * 32;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  snapshot_cache_table_ = <span class="keyword">new</span> cache::CacheHashtable(cache_hashtable_buckets, numa_node_);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(initialize_page_offset_chunk_memory());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(initialize_log_buffers_memory());</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> ordinal = 0; ordinal &lt; cores_; ++ordinal) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(initialize_core_memory(ordinal));</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(volatile_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aea9acc75679861935dc7d2833ea458e4">is_initialized</a>());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aea9acc75679861935dc7d2833ea458e4">is_initialized</a>());</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(core_memories_.size() == cores_);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(volatile_offset_chunk_memory_pieces_.size() == cores_);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(snapshot_offset_chunk_memory_pieces_.size() == cores_);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log_buffer_memory_pieces_.size() == cores_);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Initialized NumaNodeMemory for node &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(numa_node_) &lt;&lt; <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; AFTER: numa_node_size=&quot;</span> &lt;&lt; <a class="code" href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40">get_numa_node_size</a>(numa_node_);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a6522fe3b6b37b4e87c0e4170e573b8d2"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a6522fe3b6b37b4e87c0e4170e573b8d2">foedus::memory::PagePool::attach</a></div><div class="ttdeci">void attach(PagePoolControlBlock *control_block, void *memory, uint64_t memory_size, bool owns, bool rigorous_page_boundary_check)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00101">page_pool.cpp:101</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a347b906362b2d1802069ead12c3ef9b7"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7">foedus::memory::NumaNodeMemory::allocate_numa_memory</a></div><div class="ttdeci">ErrorStack allocate_numa_memory(uint64_t size, AlignedMemory *out) const </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00085">numa_node_memory.hpp:85</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a57abf88bfdff732d23c00b6738567a43a104f4cb2cd45d6529e9b3096c552c225">foedus::memory::AlignedMemory::kNumaAllocOnnode</a></div><div class="ttdoc">numa_alloc_onnode() and numa_free(). </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00083">aligned_memory.hpp:83</a></div></div>
<div class="ttc" id="namespacefoedus_1_1memory_html_abf7fe6db604daec757bd932e9b629d40"><div class="ttname"><a href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40">foedus::memory::get_numa_node_size</a></div><div class="ttdeci">int64_t get_numa_node_size(int node)</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8cpp_source.html#l00049">numa_node_memory.cpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a5166bae2fdad9ffa0d5c279edfd3307e"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e">foedus::memory::AlignedMemory::alloc</a></div><div class="ttdeci">void alloc(uint64_t size, uint64_t alignment, AllocType alloc_type, int numa_node) noexcept</div><div class="ttdoc">Allocate a memory, releasing the current memory if exists. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8cpp_source.html#l00113">aligned_memory.cpp:113</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a0fba742942a9ff0de143e354fea34d4b"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">foedus::EngineOptions::memory_</a></div><div class="ttdeci">memory::MemoryOptions memory_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00139">engine_options.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a88b1043207496ee52b2abf56e065b068"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a88b1043207496ee52b2abf56e065b068">foedus::memory::PagePool::initialize</a></div><div class="ttdeci">ErrorStack initialize() override</div><div class="ttdoc">Acquires resources in this object, usually called right after constructor. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00114">page_pool.cpp:114</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_aaf4edc54422d46a54523aed66e0daa40"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aaf4edc54422d46a54523aed66e0daa40">foedus::memory::NumaNodeMemory::allocate_huge_numa_memory</a></div><div class="ttdeci">ErrorStack allocate_huge_numa_memory(uint64_t size, AlignedMemory *out) const </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00088">numa_node_memory.hpp:88</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_af306ba60622e2a87f75ae93dc6c597b1"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">foedus::memory::AlignedMemory::get_block</a></div><div class="ttdeci">void * get_block() const </div><div class="ttdoc">Returns the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00168">aligned_memory.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a8db2e188293eaeebdf36cf39920efedd"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd">foedus::memory::AlignedMemory::get_size</a></div><div class="ttdeci">uint64_t get_size() const </div><div class="ttdoc">Returns the byte size of the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00172">aligned_memory.hpp:172</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1MemoryOptions_html_aaafa99544f3e4b55b2bd5369e5c363db"><div class="ttname"><a href="structfoedus_1_1memory_1_1MemoryOptions.html#aaafa99544f3e4b55b2bd5369e5c363db">foedus::memory::MemoryOptions::page_pool_size_mb_per_node_</a></div><div class="ttdeci">uint32_t page_pool_size_mb_per_node_</div><div class="ttdoc">Size of the page pool in MB per each NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="memory__options_8hpp_source.html#l00122">memory_options.hpp:122</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_ae9ad7ab6a3df52b0e9f0e50ede6faa2e"><div class="ttname"><a href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">foedus::Engine::get_soc_manager</a></div><div class="ttdeci">soc::SocManager * get_soc_manager() const </div><div class="ttdoc">See SOC and IPC. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00059">engine.cpp:59</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_adb83fc01491a9886ee654d377b62696f"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#adb83fc01491a9886ee654d377b62696f">foedus::memory::PagePool::get_memory_size</a></div><div class="ttdeci">uint64_t get_memory_size() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00117">page_pool.cpp:117</a></div></div>
<div class="ttc" id="structfoedus_1_1cache_1_1CacheOptions_html_a59880c2bce011cc9fca58613e551c881"><div class="ttname"><a href="structfoedus_1_1cache_1_1CacheOptions.html#a59880c2bce011cc9fca58613e551c881">foedus::cache::CacheOptions::snapshot_cache_size_mb_per_node_</a></div><div class="ttdeci">uint32_t snapshot_cache_size_mb_per_node_</div><div class="ttdoc">Size of the snapshot cache in MB per each NUMA node. </div><div class="ttdef"><b>Definition:</b> <a href="cache__options_8hpp_source.html#l00058">cache_options.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_aea9acc75679861935dc7d2833ea458e4"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#aea9acc75679861935dc7d2833ea458e4">foedus::memory::PagePool::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00115">page_pool.cpp:115</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1MemoryOptions_html_a4180425eb0e23ae388185aceaecd7722"><div class="ttname"><a href="structfoedus_1_1memory_1_1MemoryOptions.html#a4180425eb0e23ae388185aceaecd7722">foedus::memory::MemoryOptions::rigorous_page_boundary_check_</a></div><div class="ttdeci">bool rigorous_page_boundary_check_</div><div class="ttdoc">Whether to use mprotect() for page boundaries to detect bogus memory accesses. </div><div class="ttdef"><b>Definition:</b> <a href="memory__options_8hpp_source.html#l00114">memory_options.hpp:114</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_aeaee1accaade5856ad8786a2f8a3a22a"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#aeaee1accaade5856ad8786a2f8a3a22a">foedus::memory::PagePool::set_debug_pool_name</a></div><div class="ttdeci">void set_debug_pool_name(const std::string &amp;name)</div><div class="ttdoc">Call this anytime after attach() </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00122">page_pool.cpp:122</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a6e51937e58975e50d0f3eea198b24d3e"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a6e51937e58975e50d0f3eea198b24d3e">foedus::EngineOptions::cache_</a></div><div class="ttdeci">cache::CacheOptions cache_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00136">engine_options.hpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SocManager_html_a627cf434892c441c90c2de7c20637e9c"><div class="ttname"><a href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c">foedus::soc::SocManager::get_shared_memory_repo</a></div><div class="ttdeci">SharedMemoryRepo * get_shared_memory_repo()</div><div class="ttdoc">Returns the shared memories maintained across SOCs. </div><div class="ttdef"><b>Definition:</b> <a href="soc__manager_8cpp_source.html#l00038">soc_manager.cpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_a70fdc4e831999f941d4105de0c3ce3fd_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_a70fdc4e831999f941d4105de0c3ce3fd_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_a70fdc4e831999f941d4105de0c3ce3fd_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_a70fdc4e831999f941d4105de0c3ce3fd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e" title="Allocate a memory, releasing the current memory if exists. " alt="" coords="749,207,963,248"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aaf4edc54422d46a54523aed66e0daa40" title="foedus::memory::NumaNode\lMemory::allocate_huge\l_numa_memory" alt="" coords="257,187,443,243"/>
<area shape="rect" id="node17" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="789,337,923,379"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7" title="foedus::memory::NumaNode\lMemory::allocate_numa\l_memory" alt="" coords="257,267,443,323"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePool.html#a6522fe3b6b37b4e87c0e4170e573b8d2" title="foedus::memory::PagePool\l::attach" alt="" coords="261,399,439,440"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="243,464,457,505"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePool.html#adb83fc01491a9886ee654d377b62696f" title="foedus::memory::PagePool\l::get_memory_size" alt="" coords="261,529,439,571"/>
<area shape="rect" id="node26" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a2e5d1a0a78c66ac6e1c8ef166d2965c3" title="foedus::soc::SharedMemory\lRepo::get_node_memory_anchors" alt="" coords="240,595,460,636"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40" title="foedus::memory::get\l_numa_node_size" alt="" coords="279,660,421,701"/>
<area shape="rect" id="node29" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="260,725,440,767"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd" title="Returns the byte size of the memory block. " alt="" coords="243,791,457,832"/>
<area shape="rect" id="node31" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="283,856,417,897"/>
<area shape="rect" id="node32" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a7e03c4b7d87150fb9175a239ca657f71" title="foedus::soc::SharedMemory\lRepo::get_volatile_pool" alt="" coords="257,921,443,963"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1PagePool.html#a88b1043207496ee52b2abf56e065b068" title="Acquires resources in this object, usually called right after constructor. " alt="" coords="261,987,439,1028"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1PagePool.html#aea9acc75679861935dc7d2833ea458e4" title="Returns whether the object has been already initialized or not. " alt="" coords="515,1045,694,1087"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1PagePool.html#aeaee1accaade5856ad8786a2f8a3a22a" title="Call this anytime after attach() " alt="" coords="261,1107,439,1148"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1memory.html#ac2422aa4fe378da8a9594901762e17df" title="foedus::memory::alloc_mmap" alt="" coords="1209,57,1403,83"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1463,173,1603,215"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1memory.html#ae51e4a90f52316ba9dce8ff783f30d84" title="foedus::memory::alloc\l_mmap_1gb_pages" alt="" coords="1011,5,1161,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="1225,173,1387,215"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#gab3d1892edaa7db4b02029567b7993f37" title="In order to run even on a non&#45;numa machine or a machine with fewer sockets, we allow specifying arbit..." alt="" coords="1011,291,1161,332"/>
<area shape="rect" id="node9" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="1251,357,1361,383"/>
<area shape="rect" id="node11" href="numa_8h.html#aba49c14c68d23dc05d046db02766b928" title="numa_preferred" alt="" coords="1031,407,1141,434"/>
<area shape="rect" id="node12" href="numa_8h.html#a56f33968932f6550e5e5eb4d1acc67b3" title="numa_set_preferred" alt="" coords="1018,458,1154,485"/>
<area shape="rect" id="node13" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="1019,123,1153,164"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1memory.html#af6145d9296231995c84badafb6a2a0a9" title="Returns if 1GB hugepages were enabled. " alt="" coords="1451,49,1616,91"/>
<area shape="rect" id="node10" href="numa_8h.html#a22585176d6e08c221de8377637bd72a7" title="numa_num_configured\l_nodes" alt="" coords="1230,291,1382,332"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="1239,108,1373,149"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b" title="Allocate a memory of the given size on this NUMA node. " alt="" coords="511,265,698,321"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="749,272,963,313"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a655d84c0582b445cbbdb5560e5fe4e07" title="foedus::memory::PagePool\lPimpl::attach" alt="" coords="515,403,694,444"/>
<area shape="rect" id="node22" href="classfoedus_1_1assorted_1_1FixedString.html#ad175b4520982eaf19692255255125b06" title="Clear string. " alt="" coords="760,468,952,509"/>
<area shape="rect" id="node23" href="group__ASSORTED.html#gae2beea4717aef7ca9d43b91e48cf5824" title="Efficient ceil(dividee/dividor) for integer. " alt="" coords="786,403,926,444"/>
<area shape="rect" id="node28" href="numa_8h.html#a1d53a351fd8dd60c3e5b661340eb54ad" title="numa_node_size" alt="" coords="545,617,665,643"/>
<area shape="rect" id="node34" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="519,980,691,1021"/>
<area shape="rect" id="node35" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="770,980,942,1021"/>
<area shape="rect" id="node36" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="791,849,921,891"/>
<area shape="rect" id="node37" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="770,1045,942,1087"/>
<area shape="rect" id="node38" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="770,915,942,956"/>
<area shape="rect" id="node41" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a4b74a063f1e70b1a634a77092b61e435" title="foedus::memory::PagePool\lPimpl::set_debug_pool_name" alt="" coords="508,1111,701,1152"/>
<area shape="rect" id="node42" href="classfoedus_1_1assorted_1_1FixedString.html#a4d6e347fcdae7d141e0167ad5a4a4bd2" title="Assign operator for all FixedString objects. " alt="" coords="760,1111,952,1152"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac0413b28301186a33621d72b12c92870"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaNodeMemory::uninitialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="numa__node__memory_8cpp_source.html#l00175">175</a> of file <a class="el" href="numa__node__memory_8cpp_source.html">numa_node_memory.cpp</a>.</p>

<p>References <a class="el" href="error__stack__batch_8hpp_source.html#l00083">foedus::ErrorStackBatch::emprace_back()</a>, <a class="el" href="numa__node__memory_8cpp_source.html#l00049">foedus::memory::get_numa_node_size()</a>, <a class="el" href="aligned__memory_8cpp_source.html#l00235">foedus::memory::AlignedMemory::release_block()</a>, <a class="el" href="error__stack__batch_8hpp_source.html#l00136">SUMMARIZE_ERROR_BATCH</a>, <a class="el" href="page__pool_8cpp_source.html#l00116">foedus::memory::PagePool::uninitialize()</a>, and <a class="el" href="error__stack__batch_8hpp_source.html#l00099">foedus::ErrorStackBatch::uninitialize_and_delete_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                             {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Uninitializing NumaNodeMemory for node &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(numa_node_) &lt;&lt; <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; BEFORE: numa_node_size=&quot;</span> &lt;&lt; <a class="code" href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40">get_numa_node_size</a>(numa_node_);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  ErrorStackBatch batch;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  batch.uninitialize_and_delete_all(&amp;core_memories_);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  volatile_offset_chunk_memory_pieces_.clear();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  volatile_offset_chunk_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  snapshot_offset_chunk_memory_pieces_.clear();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  snapshot_offset_chunk_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  log_buffer_memory_pieces_.clear();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  log_buffer_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span> (snapshot_cache_table_) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">delete</span> snapshot_cache_table_;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    snapshot_cache_table_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  batch.emprace_back(volatile_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a90b989911378d6bf2d7d75352dc77165">uninitialize</a>());</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  batch.emprace_back(snapshot_pool_.<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a90b989911378d6bf2d7d75352dc77165">uninitialize</a>());</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  snapshot_pool_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  snapshot_pool_control_block_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Uninitialized NumaNodeMemory for node &quot;</span> &lt;&lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(numa_node_) &lt;&lt; <span class="stringliteral">&quot;.&quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; AFTER: numa_node_size=&quot;</span> &lt;&lt; <a class="code" href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40">get_numa_node_size</a>(numa_node_);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a>(batch);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1memory_html_abf7fe6db604daec757bd932e9b629d40"><div class="ttname"><a href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40">foedus::memory::get_numa_node_size</a></div><div class="ttdeci">int64_t get_numa_node_size(int node)</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8cpp_source.html#l00049">numa_node_memory.cpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_afd955f5f991e28943c72ecff1167c16b"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">foedus::memory::AlignedMemory::release_block</a></div><div class="ttdeci">void release_block()</div><div class="ttdoc">Releases the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8cpp_source.html#l00235">aligned_memory.cpp:235</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a90b989911378d6bf2d7d75352dc77165"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a90b989911378d6bf2d7d75352dc77165">foedus::memory::PagePool::uninitialize</a></div><div class="ttdeci">ErrorStack uninitialize() override</div><div class="ttdoc">An idempotent method to release all resources of this object, if any. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00116">page_pool.cpp:116</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga67390b22b0afbe5a4938df9847eafda9"><div class="ttname"><a href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a></div><div class="ttdeci">#define SUMMARIZE_ERROR_BATCH(x)</div><div class="ttdoc">This macro calls ErrorStackBatch::summarize() with automatically provided parameters. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack__batch_8hpp_source.html#l00136">error_stack_batch.hpp:136</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaNodeMemory_ac0413b28301186a33621d72b12c92870_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaNodeMemory_ac0413b28301186a33621d72b12c92870_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaNodeMemory_ac0413b28301186a33621d72b12c92870_cgraph" id="classfoedus_1_1memory_1_1NumaNodeMemory_ac0413b28301186a33621d72b12c92870_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1ErrorStackBatch.html#a1fe18afaafed459feb5c644ba9d7c56e" title="If the given ErrorStack is an error, this method adds it to the end of this batch. " alt="" coords="505,111,669,153"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1memory.html#abf7fe6db604daec757bd932e9b629d40" title="foedus::memory::get\l_numa_node_size" alt="" coords="276,23,417,65"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b" title="Releases the memory block. " alt="" coords="240,141,453,182"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1PagePool.html#a90b989911378d6bf2d7d75352dc77165" title="An idempotent method to release all resources of this object, if any. " alt="" coords="257,271,436,313"/>
<area shape="rect" id="node11" href="classfoedus_1_1ErrorStackBatch.html#a6c6e566983e136b5c6a63bf110c6cef5" title="A convenience method to uninitialize and delete all Initializable objects in a vector, storing all errors in this batch. " alt="" coords="256,206,437,247"/>
<area shape="rect" id="node4" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="532,56,643,83"/>
<area shape="rect" id="node5" href="numa_8h.html#a1d53a351fd8dd60c3e5b661340eb54ad" title="numa_node_size" alt="" coords="527,5,647,32"/>
<area shape="rect" id="node8" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="501,271,673,313"/>
<area shape="rect" id="node9" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="721,337,893,378"/>
<area shape="rect" id="node10" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="721,271,893,313"/>
<area shape="rect" id="node12" href="classfoedus_1_1ErrorStackBatch.html#a1127d5a2207c91c4dacb7f2bc0f77d7b" title="If the given ErrorStack is an error, this method adds it to the end of this batch. " alt="" coords="505,206,669,247"/>
<area shape="rect" id="node13" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="742,206,873,247"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/memory/<a class="el" href="numa__node__memory_8hpp_source.html">numa_node_memory.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/memory/<a class="el" href="numa__node__memory_8cpp_source.html">numa_node_memory.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1memory.html">memory</a></li><li class="navelem"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
