<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::array::ArrayPartitioner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::array::ArrayPartitioner Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__ARRAY.html">Array Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> for an array storage.  
 <a href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> for an array storage. </p>
<p>There are a few options to implement partitioning for an array with trade-offs between simplicity/efficiency and accuracy/flexibility.</p>
<dl class="section user"><dt>Current policy</dt><dd>So far our choice prefers simplicity/efficiency. We split the whole range of the array into kInteriorFanout buckets and assign the partition based on who currently holds the page under the root page. Designing this policy is extremely simple; we just take a look at the root page of this storage and sees the volatile pointer's NUMA node.</dd></dl>
<dl class="section user"><dt>Balancing policy</dt><dd>We so far balance the partition assignments so that no partitition receives more than average buckets where average is buckets/partitions. The excessive bucket is given to needy ones that do not have enough buckets.</dd></dl>
<dl class="section user"><dt>Limitations of current policy</dt><dd>Of course this simple policy has some issue. One issue is that if the root page has direct children fewer than the number of partitions, some partition does not receive any bucket even if there are many more indirect children. That doesn't happen so often, though. We outputs warnings if this happens.</dd></dl>
<dl class="section user"><dt>Alternative policy</dt><dd>Another choice we considered was a vector of <a class="el" href="structfoedus_1_1storage_1_1array_1_1ArrayRange.html" title="Represents an offset range in an array storage. ">ArrayRange</a> in an arbitrary length over which we do binary search. However, this is more expensive. For a simple data structure like array, it might not pay off.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This is a private implementation-details of <a class="el" href="group__ARRAY.html">Array Storage</a>, thus file name ends with _impl. Do not include this header from a client program. There is no case client program needs to access this internal class. </dd></dl>

<p>Definition at line <a class="el" href="array__partitioner__impl_8hpp_source.html#l00072">72</a> of file <a class="el" href="array__partitioner__impl_8hpp_source.html">array_partitioner_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="array__partitioner__impl_8hpp_source.html">array_partitioner_impl.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac0e40ecaf673b0ba0c5ffa38ff093532"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#ac0e40ecaf673b0ba0c5ffa38ff093532">ArrayPartitioner</a> (<a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a> *parent)</td></tr>
<tr class="separator:ac0e40ecaf673b0ba0c5ffa38ff093532"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7002637fe43ab0917bead1d4636805ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a7002637fe43ab0917bead1d4636805ad">design_partition</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">Partitioner::DesignPartitionArguments</a> &amp;args)</td></tr>
<tr class="separator:a7002637fe43ab0917bead1d4636805ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c58729bbfe5d0d46d5812a6d876c2ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a3c58729bbfe5d0d46d5812a6d876c2ea">is_partitionable</a> () const </td></tr>
<tr class="separator:a3c58729bbfe5d0d46d5812a6d876c2ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69580ef7442b8b75d49f3e277614210f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a69580ef7442b8b75d49f3e277614210f">partition_batch</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">Partitioner::PartitionBatchArguments</a> &amp;args) const </td></tr>
<tr class="separator:a69580ef7442b8b75d49f3e277614210f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc2f61287dd0e9f643cc7c7b406ed32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#abcc2f61287dd0e9f643cc7c7b406ed32">sort_batch</a> (const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">Partitioner::SortBatchArguments</a> &amp;args) const </td></tr>
<tr class="separator:abcc2f61287dd0e9f643cc7c7b406ed32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9ba95f6207ac07472ec52a804f599a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#ab9ba95f6207ac07472ec52a804f599a4">get_array_size</a> () const </td></tr>
<tr class="separator:ab9ba95f6207ac07472ec52a804f599a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b186257f945ddabc8a2e52626343724"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a4b186257f945ddabc8a2e52626343724">get_array_levels</a> () const </td></tr>
<tr class="separator:a4b186257f945ddabc8a2e52626343724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51681c42f28279349497ec3eefcb0798"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a51681c42f28279349497ec3eefcb0798">get_bucket_owners</a> () const </td></tr>
<tr class="separator:a51681c42f28279349497ec3eefcb0798"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a22cc1ddaf965345a552fdb7446367ecb"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a22cc1ddaf965345a552fdb7446367ecb">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html">ArrayPartitioner</a> &amp;v)</td></tr>
<tr class="separator:a22cc1ddaf965345a552fdb7446367ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac0e40ecaf673b0ba0c5ffa38ff093532"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::array::ArrayPartitioner::ArrayPartitioner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html">Partitioner</a> *&#160;</td>
          <td class="paramname"><em>parent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00043">43</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="shared__mutex_8hpp_source.html#l00058">foedus::soc::SharedMutex::is_initialized()</a>, <a class="el" href="partitioner_8cpp_source.html#l00051">foedus::storage::PartitionerMetadata::locate_data()</a>, <a class="el" href="partitioner_8hpp_source.html#l00232">foedus::storage::PartitionerMetadata::mutex_</a>, and <a class="el" href="partitioner_8hpp_source.html#l00237">foedus::storage::PartitionerMetadata::valid_</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  : engine_(parent-&gt;get_engine()),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    id_(parent-&gt;get_storage_id()),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    metadata_(<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#aa6e48ddb92bb1c1b572cc3b90e19daf9">PartitionerMetadata::get_metadata</a>(engine_, id_)) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">mutex_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">is_initialized</a>());</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a>) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    data_ = <span class="keyword">reinterpret_cast&lt;</span>ArrayPartitionerData*<span class="keyword">&gt;</span>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">locate_data</a>(engine_));</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    data_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a63a799f43dfcc06d8c14d471fd0ebfcd"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">foedus::storage::PartitionerMetadata::valid_</a></div><div class="ttdeci">bool valid_</div><div class="ttdoc">Whether this partitioner information (metadata+data) has been constructed. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00237">partitioner.hpp:237</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a1b5e5a68b2cde0cd42300642f3b538a3"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">foedus::storage::PartitionerMetadata::mutex_</a></div><div class="ttdeci">soc::SharedMutex mutex_</div><div class="ttdoc">Serialize concurrent initialization of this partitioner. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00232">partitioner.hpp:232</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a0534520d3f4fb059afdf7b9db375907e"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">foedus::storage::PartitionerMetadata::locate_data</a></div><div class="ttdeci">void * locate_data(Engine *engine)</div><div class="ttdoc">Returns the partitioner data pointed from this metadata. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00051">partitioner.cpp:51</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedMutex_html_ae886a5d8af1495da00400cc3c958a3d9"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">foedus::soc::SharedMutex::is_initialized</a></div><div class="ttdeci">bool is_initialized() const </div><div class="ttdef"><b>Definition:</b> <a href="shared__mutex_8hpp_source.html#l00058">shared_mutex.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_aa6e48ddb92bb1c1b572cc3b90e19daf9"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#aa6e48ddb92bb1c1b572cc3b90e19daf9">foedus::storage::PartitionerMetadata::get_metadata</a></div><div class="ttdeci">static PartitionerMetadata * get_metadata(Engine *engine, StorageId id)</div><div class="ttdoc">Returns the shared memory for the given storage ID. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00038">partitioner.cpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ac0e40ecaf673b0ba0c5ffa38ff093532_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ac0e40ecaf673b0ba0c5ffa38ff093532_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ac0e40ecaf673b0ba0c5ffa38ff093532_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ac0e40ecaf673b0ba0c5ffa38ff093532_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9" title="foedus::soc::SharedMutex\l::is_initialized" alt="" coords="274,54,449,95"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e" title="Returns the partitioner data pointed from this metadata. " alt="" coords="272,119,451,161"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb" title="foedus::soc::SharedMemory\lRepo::get_global_memory\l_anchors" alt="" coords="499,5,684,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="524,86,659,127"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="501,151,681,193"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="524,217,659,258"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7002637fe43ab0917bead1d4636805ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::storage::array::ArrayPartitioner::design_partition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1DesignPartitionArguments">Partitioner::DesignPartitionArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00073">73</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="partitioner_8cpp_source.html#l00061">foedus::storage::PartitionerMetadata::allocate_data()</a>, <a class="el" href="array__partitioner__impl_8hpp_source.html#l00101">foedus::storage::array::ArrayPartitionerData::array_levels_</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage_8hpp_source.html#l00169">foedus::storage::Storage&lt; CONTROL_BLOCK &gt;::exists()</a>, <a class="el" href="storage__id_8hpp_source.html#l00095">foedus::storage::extract_numa_node_from_snapshot_pointer()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00057">foedus::storage::array::ArrayStorage::get_array_size()</a>, <a class="el" href="attachable_8hpp_source.html#l00097">foedus::Attachable&lt; CONTROL_BLOCK &gt;::get_control_block()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00105">foedus::storage::array::ArrayPage::get_interior_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00058">foedus::storage::array::ArrayStorage::get_levels()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="storage__id_8hpp_source.html#l00201">foedus::storage::VolatilePagePointer::get_numa_node()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="engine_8cpp_source.html#l00074">foedus::Engine::get_soc_count()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="shared__mutex_8hpp_source.html#l00058">foedus::soc::SharedMutex::is_initialized()</a>, <a class="el" href="array__page__impl_8hpp_source.html#l00070">foedus::storage::array::ArrayPage::is_leaf()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="partitioner_8cpp_source.html#l00051">foedus::storage::PartitionerMetadata::locate_data()</a>, <a class="el" href="partitioner_8hpp_source.html#l00232">foedus::storage::PartitionerMetadata::mutex_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, <a class="el" href="partitioner_8hpp_source.html#l00237">foedus::storage::PartitionerMetadata::valid_</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00106">foedus::storage::Partitioner::design_partition()</a>.</p>
<div class="fragment"><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                                                {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">mutex_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">is_initialized</a>());</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_ == <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  ArrayStorage storage(engine_, id_);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage.exists());</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  ArrayStorageControlBlock* control_block = storage.get_control_block();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  soc::SharedMutexScope mutex_scope(&amp;metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">mutex_</a>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a">allocate_data</a>(engine_, &amp;mutex_scope, <span class="keyword">sizeof</span>(ArrayPartitionerData)));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  data_ = <span class="keyword">reinterpret_cast&lt;</span>ArrayPartitionerData*<span class="keyword">&gt;</span>(metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">locate_data</a>(engine_));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#acd8cfdfb59a74b1b5fa4a10e5b42802e">array_levels_</a> = storage.get_levels();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  data_-&gt;array_size_ = storage.get_array_size();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">if</span> (storage.get_levels() == 1U || engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">get_soc_count</a>() == 1U) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// No partitioning needed.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    data_-&gt;bucket_owners_[0] = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    data_-&gt;partitionable_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    data_-&gt;bucket_size_ = data_-&gt;array_size_;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  data_-&gt;partitionable_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage.get_levels() &gt;= 2U);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// bucket size is interval that corresponds to a direct child of root.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// eg) levels==2 : leaf, levels==3: leaf*kInteriorFanout, ...</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  data_-&gt;bucket_size_ = control_block-&gt;route_finder_.get_records_in_leaf();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">for</span> (uint32_t level = 1; level &lt; storage.get_levels() - 1U; ++level) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    data_-&gt;bucket_size_ *= <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// root page is guaranteed to have volatile version.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  ArrayPage* root_page = <span class="keyword">reinterpret_cast&lt;</span>ArrayPage*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    resolver.resolve_offset(control_block-&gt;root_page_pointer_.volatile_pointer_));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!root_page-&gt;is_leaf());</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// how many direct children does this root page have?</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  uint16_t direct_children = storage.get_array_size() / data_-&gt;bucket_size_ + 1U;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (storage.get_array_size() % data_-&gt;bucket_size_ != 0) {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    ++direct_children;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// do we have enough direct children? if not, some partition will not receive buckets.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// Although it&#39;s not a critical error, let&#39;s log it as an error.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  uint16_t total_partitions = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(total_partitions &gt; 1U);  <span class="comment">// if not, why we are coming here. it&#39;s a waste.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (direct_children &lt; total_partitions) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Warning-like error: This array doesn&#39;t have enough direct children in root&quot;</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="stringliteral">&quot; page to assign partitions. #partitions=&quot;</span> &lt;&lt; total_partitions &lt;&lt; <span class="stringliteral">&quot;, #direct children=&quot;</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      &lt;&lt; direct_children &lt;&lt; <span class="stringliteral">&quot;. array=&quot;</span> &lt;&lt; storage;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// two paths. first path simply sees volatile/snapshot pointer and determines owner.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// second path addresses excessive assignments, off loading them to needy ones.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  std::vector&lt;uint16_t&gt; counts(total_partitions, 0);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">const</span> uint16_t excessive_count = (direct_children / total_partitions) + 1;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  std::vector&lt;uint16_t&gt; excessive_children;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">for</span> (uint16_t child = 0; child &lt; direct_children; ++child) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">const</span> DualPagePointer &amp;pointer = root_page-&gt;get_interior_record(child);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> partition;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (!pointer.volatile_pointer_.is_null()) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      partition = pointer.volatile_pointer_.get_numa_node();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="comment">// if no volatile page, see snapshot page owner.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      partition = <a class="code" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1">extract_numa_node_from_snapshot_pointer</a>(pointer.snapshot_pointer_);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="comment">// this ignores the case where neither snapshot/volatile page is there.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="comment">// however, as we create all pages at ArrayStorage::create(), this so far never happens.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(partition &lt; total_partitions);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (counts[partition] &gt;= excessive_count) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      excessive_children.push_back(child);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      ++counts[partition];</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      data_-&gt;bucket_owners_[child] = partition;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// just add it to the one with least assignments.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// a stupid loop, but this part won&#39;t be a bottleneck (only 250 elements).</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">for</span> (uint16_t child : excessive_children) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> most_needy = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> partition = 1; partition &lt; total_partitions; ++partition) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">if</span> (counts[partition] &lt; counts[most_needy]) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        most_needy = partition;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    ++counts[most_needy];</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    data_-&gt;bucket_owners_[child] = most_needy;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  metadata_-&gt;<a class="code" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">valid_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a63a799f43dfcc06d8c14d471fd0ebfcd"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a63a799f43dfcc06d8c14d471fd0ebfcd">foedus::storage::PartitionerMetadata::valid_</a></div><div class="ttdeci">bool valid_</div><div class="ttdoc">Whether this partitioner information (metadata+data) has been constructed. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00237">partitioner.hpp:237</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga0d50cbff79d98d6068fe0b8add81d06a"><div class="ttname"><a href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">foedus::storage::PartitionId</a></div><div class="ttdeci">thread::ThreadGroupId PartitionId</div><div class="ttdoc">As partition=NUMA node, this is just a synonym of foedus::thread::ThreadGroupId. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00065">storage_id.hpp:65</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_af0ac9dbae9481b295a8492c6d9f6c1d5"><div class="ttname"><a href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">foedus::Engine::get_soc_count</a></div><div class="ttdeci">soc::SocId get_soc_count() const </div><div class="ttdoc">Shorthand for get_options().thread_.group_count_. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00074">engine.cpp:74</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a3b5c729829a30ca3848d8254d616459a"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a">foedus::storage::PartitionerMetadata::allocate_data</a></div><div class="ttdeci">ErrorCode allocate_data(Engine *engine, soc::SharedMutexScope *locked, uint32_t data_size)</div><div class="ttdoc">Allocates a patitioner data in shared memory of the given size. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00061">partitioner.cpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData_html_acd8cfdfb59a74b1b5fa4a10e5b42802e"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#acd8cfdfb59a74b1b5fa4a10e5b42802e">foedus::storage::array::ArrayPartitionerData::array_levels_</a></div><div class="ttdeci">uint8_t array_levels_</div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8hpp_source.html#l00101">array_partitioner_impl.hpp:101</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a1b5e5a68b2cde0cd42300642f3b538a3"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a1b5e5a68b2cde0cd42300642f3b538a3">foedus::storage::PartitionerMetadata::mutex_</a></div><div class="ttdeci">soc::SharedMutex mutex_</div><div class="ttdoc">Serialize concurrent initialization of this partitioner. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8hpp_source.html#l00232">partitioner.hpp:232</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a8f6e96ac10eb804602349a54292d26a1"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1">foedus::storage::extract_numa_node_from_snapshot_pointer</a></div><div class="ttdeci">uint8_t extract_numa_node_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00095">storage_id.hpp:95</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PartitionerMetadata_html_a0534520d3f4fb059afdf7b9db375907e"><div class="ttname"><a href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e">foedus::storage::PartitionerMetadata::locate_data</a></div><div class="ttdeci">void * locate_data(Engine *engine)</div><div class="ttdoc">Returns the partitioner data pointed from this metadata. </div><div class="ttdef"><b>Definition:</b> <a href="partitioner_8cpp_source.html#l00051">partitioner.cpp:51</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedMutex_html_ae886a5d8af1495da00400cc3c958a3d9"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9">foedus::soc::SharedMutex::is_initialized</a></div><div class="ttdeci">bool is_initialized() const </div><div class="ttdef"><b>Definition:</b> <a href="shared__mutex_8hpp_source.html#l00058">shared_mutex.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a3b5c729829a30ca3848d8254d616459a" title="Allocates a patitioner data in shared memory of the given size. " alt="" coords="236,5,415,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1Storage.html#ade24602975f3928e77762f8cb4da51ca" title="Returns whether this storage is already created. " alt="" coords="243,71,407,112"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="231,137,419,193"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a2e5043394d70ac6f151fb06508a038ca" title="Returns the size of this array. " alt="" coords="226,217,425,259"/>
<area shape="rect" id="node12" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad" title="foedus::Attachable\l::get_control_block" alt="" coords="259,283,391,324"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="220,349,431,405"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a53643894d607ee034359b2a4f77f0d89" title="foedus::storage::array\l::ArrayPage::get_interior\l_record" alt="" coords="244,429,407,485"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3a535c4b81884868a2a5ead00428dd77" title="Returns the number of levels. " alt="" coords="240,509,411,551"/>
<area shape="rect" id="node16" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="258,575,393,616"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="229,640,422,681"/>
<area shape="rect" id="node18" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="763,927,897,968"/>
<area shape="rect" id="node19" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5" title="Shorthand for get_options().thread_.group_count_. " alt="" coords="258,757,393,799"/>
<area shape="rect" id="node20" href="classfoedus_1_1soc_1_1SharedMutex.html#ae886a5d8af1495da00400cc3c958a3d9" title="foedus::soc::SharedMutex\l::is_initialized" alt="" coords="238,823,413,864"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayPage.html#a9c7bc21358a340d36f3c43a49f774b93" title="foedus::storage::array\l::ArrayPage::is_leaf" alt="" coords="251,888,399,929"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="502,1005,663,1047"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a0534520d3f4fb059afdf7b9db375907e" title="Returns the partitioner data pointed from this metadata. " alt="" coords="493,201,672,243"/>
<area shape="rect" id="node25" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="224,1144,427,1185"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PartitionerMetadata.html#a889951c15caacc4d60b446f6c6c56cde" title="Returns the special index&#45;0 entry that manages data block allocation for partitioners. " alt="" coords="479,5,687,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedMutexScope.html#a51a27729ac214786ce97d32ae80dd6f7" title="foedus::soc::SharedMutex\lScope::get_mutex" alt="" coords="495,71,670,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SharedMutexScope.html#a9576d709cf25478f4fe81a8362ba7636" title="foedus::soc::SharedMutex\lScope::is_locked_by_me" alt="" coords="495,136,670,177"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb" title="foedus::soc::SharedMemory\lRepo::get_global_memory\l_anchors" alt="" coords="737,6,923,62"/>
<area shape="rect" id="node5" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="740,101,920,143"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="763,195,897,236"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="749,1025,911,1067"/>
<area shape="rect" id="node26" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="505,1217,660,1259"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="755,1276,905,1317"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="496,1071,669,1112"/>
<area shape="rect" id="node31" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="481,1137,684,1193"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="753,1144,907,1185"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="735,1211,925,1252"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a7002637fe43ab0917bead1d4636805ad_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#a31a7e393bf1f87a9a039c60b291ac9d1" title="Determines partitioning scheme for this storage. " alt="" coords="220,13,399,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4b186257f945ddabc8a2e52626343724"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t foedus::storage::array::ArrayPartitioner::get_array_levels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00060">60</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="array__partitioner__impl_8hpp_source.html#l00101">foedus::storage::array::ArrayPartitionerData::array_levels_</a>, and <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                 {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#acd8cfdfb59a74b1b5fa4a10e5b42802e">array_levels_</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData_html_acd8cfdfb59a74b1b5fa4a10e5b42802e"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#acd8cfdfb59a74b1b5fa4a10e5b42802e">foedus::storage::array::ArrayPartitionerData::array_levels_</a></div><div class="ttdeci">uint8_t array_levels_</div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8hpp_source.html#l00101">array_partitioner_impl.hpp:101</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab9ba95f6207ac07472ec52a804f599a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ARRAY.html#ga032dbb5dc93f7b51ac0ab5200ae013ab">ArrayOffset</a> foedus::storage::array::ArrayPartitioner::get_array_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00055">55</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="array__partitioner__impl_8hpp_source.html#l00104">foedus::storage::array::ArrayPartitionerData::array_size_</a>, and <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>

<p>Referenced by <a class="el" href="array__partitioner__impl_8cpp_source.html#l00175">partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                                   {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#afcf9c518adce58bb4092248459864536">array_size_</a>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData_html_afcf9c518adce58bb4092248459864536"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#afcf9c518adce58bb4092248459864536">foedus::storage::array::ArrayPartitionerData::array_size_</a></div><div class="ttdeci">ArrayOffset array_size_</div><div class="ttdoc">Size of the entire array. </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8hpp_source.html#l00104">array_partitioner_impl.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ab9ba95f6207ac07472ec52a804f599a4_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ab9ba95f6207ac07472ec52a804f599a4_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ab9ba95f6207ac07472ec52a804f599a4_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_ab9ba95f6207ac07472ec52a804f599a4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a69580ef7442b8b75d49f3e277614210f" title="foedus::storage::array\l::ArrayPartitioner::partition_batch" alt="" coords="201,13,415,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="463,13,641,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a51681c42f28279349497ec3eefcb0798"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a> * foedus::storage::array::ArrayPartitioner::get_bucket_owners </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00064">64</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="array__partitioner__impl_8hpp_source.html#l00110">foedus::storage::array::ArrayPartitionerData::bucket_owners_</a>.</p>

<p>Referenced by <a class="el" href="array__partitioner__impl_8cpp_source.html#l00175">partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                                             {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#a45c17eb74bc96eb6e96113ea13ed2760">bucket_owners_</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData_html_a45c17eb74bc96eb6e96113ea13ed2760"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#a45c17eb74bc96eb6e96113ea13ed2760">foedus::storage::array::ArrayPartitionerData::bucket_owners_</a></div><div class="ttdeci">PartitionId bucket_owners_[kInteriorFanout]</div><div class="ttdoc">partition of each bucket. </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8hpp_source.html#l00110">array_partitioner_impl.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a51681c42f28279349497ec3eefcb0798_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a51681c42f28279349497ec3eefcb0798_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a51681c42f28279349497ec3eefcb0798_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a51681c42f28279349497ec3eefcb0798_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a69580ef7442b8b75d49f3e277614210f" title="foedus::storage::array\l::ArrayPartitioner::partition_batch" alt="" coords="201,13,415,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="463,13,641,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3c58729bbfe5d0d46d5812a6d876c2ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::array::ArrayPartitioner::is_partitionable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00068">68</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="array__partitioner__impl_8hpp_source.html#l00100">foedus::storage::array::ArrayPartitionerData::partitionable_</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00094">foedus::storage::Partitioner::is_partitionable()</a>, and <a class="el" href="array__partitioner__impl_8cpp_source.html#l00175">partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                              {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">return</span> data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#ab01da89a10e1f0d757f9df8a43e056d8">partitionable_</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData_html_ab01da89a10e1f0d757f9df8a43e056d8"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#ab01da89a10e1f0d757f9df8a43e056d8">foedus::storage::array::ArrayPartitionerData::partitionable_</a></div><div class="ttdeci">bool partitionable_</div><div class="ttdoc">if false, every record goes to node-0. </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8hpp_source.html#l00100">array_partitioner_impl.hpp:100</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a3c58729bbfe5d0d46d5812a6d876c2ea_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a3c58729bbfe5d0d46d5812a6d876c2ea_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a3c58729bbfe5d0d46d5812a6d876c2ea_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a3c58729bbfe5d0d46d5812a6d876c2ea_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#ac031b933b72d2890fd24b90b1685110a" title="returns if this storage is partitionable. " alt="" coords="219,5,397,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a69580ef7442b8b75d49f3e277614210f" title="foedus::storage::array\l::ArrayPartitioner::partition_batch" alt="" coords="201,71,415,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="463,71,641,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a69580ef7442b8b75d49f3e277614210f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::array::ArrayPartitioner::partition_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1PartitionBatchArguments">Partitioner::PartitionBatchArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00175">175</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="array__partitioner__impl_8hpp_source.html#l00107">foedus::storage::array::ArrayPartitionerData::bucket_size_</a>, <a class="el" href="const__div_8hpp_source.html#l00241">foedus::assorted::ConstDiv::div64()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00055">get_array_size()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00064">get_bucket_owners()</a>, <a class="el" href="common__log__types_8hpp_source.html#l00113">foedus::log::BaseLogType::header_</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00068">is_partitionable()</a>, <a class="el" href="array__id_8hpp_source.html#l00110">foedus::storage::array::kInteriorFanout</a>, <a class="el" href="log__type_8hpp_source.html#l00116">foedus::log::kLogCodeArrayIncrement</a>, <a class="el" href="log__type_8hpp_source.html#l00115">foedus::log::kLogCodeArrayOverwrite</a>, <a class="el" href="partitioner_8hpp_source.html#l00120">foedus::storage::Partitioner::PartitionBatchArguments::log_buffer_</a>, <a class="el" href="partitioner_8hpp_source.html#l00122">foedus::storage::Partitioner::PartitionBatchArguments::log_positions_</a>, <a class="el" href="common__log__types_8hpp_source.html#l00055">foedus::log::LogHeader::log_type_code_</a>, <a class="el" href="partitioner_8hpp_source.html#l00124">foedus::storage::Partitioner::PartitionBatchArguments::logs_count_</a>, <a class="el" href="array__log__types_8hpp_source.html#l00076">foedus::storage::array::ArrayCommonUpdateLogType::offset_</a>, <a class="el" href="log__buffer_8hpp_source.html#l00042">foedus::snapshot::LogBuffer::resolve()</a>, <a class="el" href="partitioner_8hpp_source.html#l00126">foedus::storage::Partitioner::PartitionBatchArguments::results_</a>, and <a class="el" href="common__log__types_8hpp_source.html#l00066">foedus::log::LogHeader::storage_id_</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00118">foedus::storage::Partitioner::partition_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                                                                           {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a3c58729bbfe5d0d46d5812a6d876c2ea">is_partitionable</a>()) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    std::memset(args.results_, 0, <span class="keyword">sizeof</span>(<a class="code" href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">PartitionId</a>) * args.logs_count_);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#ad3d1191c145b129efca6112d4c903c9d">bucket_size_</a> &gt; 0);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  assorted::ConstDiv bucket_size_div(data_-&gt;<a class="code" href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#ad3d1191c145b129efca6112d4c903c9d">bucket_size_</a>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; args.logs_count_; ++i) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">const</span> ArrayCommonUpdateLogType *log = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>ArrayCommonUpdateLogType*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      args.log_buffer_.resolve(args.log_positions_[i]));</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log-&gt;header_.log_type_code_ == <a class="code" href="namespacefoedus_1_1log.html#gafeea30298c4f7a9586bddec3663fc4f3a6a78db5a65164c4b7847b593bb37f3dc">log::kLogCodeArrayOverwrite</a></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        || log-&gt;header_.log_type_code_ == <a class="code" href="namespacefoedus_1_1log.html#gafeea30298c4f7a9586bddec3663fc4f3afd556c25a942e70624cc64bff1ae95ce">log::kLogCodeArrayIncrement</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log-&gt;header_.storage_id_ == id_);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log-&gt;offset_ &lt; <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#ab9ba95f6207ac07472ec52a804f599a4">get_array_size</a>());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    uint64_t bucket = bucket_size_div.div64(log-&gt;offset_);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(bucket &lt; <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    args.results_[i] = <a class="code" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a51681c42f28279349497ec3eefcb0798">get_bucket_owners</a>()[bucket];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_html_ab9ba95f6207ac07472ec52a804f599a4"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#ab9ba95f6207ac07472ec52a804f599a4">foedus::storage::array::ArrayPartitioner::get_array_size</a></div><div class="ttdeci">ArrayOffset get_array_size() const </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8cpp_source.html#l00055">array_partitioner_impl.cpp:55</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga0d50cbff79d98d6068fe0b8add81d06a"><div class="ttname"><a href="group__STORAGE.html#ga0d50cbff79d98d6068fe0b8add81d06a">foedus::storage::PartitionId</a></div><div class="ttdeci">thread::ThreadGroupId PartitionId</div><div class="ttdoc">As partition=NUMA node, this is just a synonym of foedus::thread::ThreadGroupId. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00065">storage_id.hpp:65</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_html_a3c58729bbfe5d0d46d5812a6d876c2ea"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a3c58729bbfe5d0d46d5812a6d876c2ea">foedus::storage::array::ArrayPartitioner::is_partitionable</a></div><div class="ttdeci">bool is_partitionable() const </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8cpp_source.html#l00068">array_partitioner_impl.cpp:68</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_html_a51681c42f28279349497ec3eefcb0798"><div class="ttname"><a href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a51681c42f28279349497ec3eefcb0798">foedus::storage::array::ArrayPartitioner::get_bucket_owners</a></div><div class="ttdeci">const PartitionId * get_bucket_owners() const </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8cpp_source.html#l00064">array_partitioner_impl.cpp:64</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData_html_ad3d1191c145b129efca6112d4c903c9d"><div class="ttname"><a href="structfoedus_1_1storage_1_1array_1_1ArrayPartitionerData.html#ad3d1191c145b129efca6112d4c903c9d">foedus::storage::array::ArrayPartitionerData::bucket_size_</a></div><div class="ttdeci">ArrayOffset bucket_size_</div><div class="ttdoc">bucket = offset / bucket_size_. </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8hpp_source.html#l00107">array_partitioner_impl.hpp:107</a></div></div>
<div class="ttc" id="namespacefoedus_1_1log_html_gafeea30298c4f7a9586bddec3663fc4f3afd556c25a942e70624cc64bff1ae95ce"><div class="ttname"><a href="namespacefoedus_1_1log.html#gafeea30298c4f7a9586bddec3663fc4f3afd556c25a942e70624cc64bff1ae95ce">foedus::log::kLogCodeArrayIncrement</a></div><div class="ttdoc">0x0023 : foedus::storage::array::ArrayIncrementLogType . </div><div class="ttdef"><b>Definition:</b> <a href="log__type_8hpp_source.html#l00116">log_type.hpp:116</a></div></div>
<div class="ttc" id="namespacefoedus_1_1log_html_gafeea30298c4f7a9586bddec3663fc4f3a6a78db5a65164c4b7847b593bb37f3dc"><div class="ttname"><a href="namespacefoedus_1_1log.html#gafeea30298c4f7a9586bddec3663fc4f3a6a78db5a65164c4b7847b593bb37f3dc">foedus::log::kLogCodeArrayOverwrite</a></div><div class="ttdoc">0x0022 : foedus::storage::array::ArrayOverwriteLogType . </div><div class="ttdef"><b>Definition:</b> <a href="log__type_8hpp_source.html#l00115">log_type.hpp:115</a></div></div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1assorted_1_1ConstDiv.html#ac4bed598404eda88cd7d0929afeea28e" title="64&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="269,5,447,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#ab9ba95f6207ac07472ec52a804f599a4" title="foedus::storage::array\l::ArrayPartitioner::get\l_array_size" alt="" coords="284,71,432,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a51681c42f28279349497ec3eefcb0798" title="foedus::storage::array\l::ArrayPartitioner::get\l_bucket_owners" alt="" coords="284,151,432,207"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html#a3c58729bbfe5d0d46d5812a6d876c2ea" title="foedus::storage::array\l::ArrayPartitioner::is\l_partitionable" alt="" coords="284,231,432,287"/>
<area shape="rect" id="node7" href="structfoedus_1_1snapshot_1_1LogBuffer.html#a4c866d7cc1684237eca5fff49215b80e" title="foedus::snapshot::LogBuffer\l::resolve" alt="" coords="267,312,449,353"/>
<area shape="rect" id="node3" href="structfoedus_1_1assorted_1_1ConstDiv.html#a6892a2d35b9ae08a00190c9440e22a21" title="32&#45;bit integer division that outputs both quotient and remainder. " alt="" coords="497,5,675,47"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a" title="foedus::snapshot::from\l_buffer_position" alt="" coords="509,312,663,353"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_a69580ef7442b8b75d49f3e277614210f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="267,5,445,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abcc2f61287dd0e9f643cc7c7b406ed32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::array::ArrayPartitioner::sort_batch </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__STORAGE.html#structfoedus_1_1storage_1_1Partitioner_1_1SortBatchArguments">Partitioner::SortBatchArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00312">312</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="aligned__memory_8cpp_source.html#l00182">foedus::memory::AlignedMemory::assure_capacity()</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00249">foedus::storage::array::compact_logs()</a>, <a class="el" href="stop__watch_8hpp_source.html#l00048">foedus::debugging::StopWatch::elapsed_ms()</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00168">foedus::memory::AlignedMemory::get_block()</a>, <a class="el" href="partitioner_8hpp_source.html#l00146">foedus::storage::Partitioner::SortBatchArguments::logs_count_</a>, <a class="el" href="array__partitioner__impl_8cpp_source.html#l00228">foedus::storage::array::prepare_sort_entries()</a>, <a class="el" href="stop__watch_8cpp_source.html#l00035">foedus::debugging::StopWatch::stop()</a>, <a class="el" href="partitioner_8hpp_source.html#l00152">foedus::storage::Partitioner::SortBatchArguments::work_memory_</a>, and <a class="el" href="partitioner_8hpp_source.html#l00169">foedus::storage::Partitioner::SortBatchArguments::written_count_</a>.</p>

<p>Referenced by <a class="el" href="partitioner_8cpp_source.html#l00129">foedus::storage::Partitioner::sort_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (args.logs_count_ == 0) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    *args.written_count_ = 0;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// we so far sort them in one path.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="comment">// to save memory, we could do multi-path merge-sort.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">// however, in reality each log has many bytes, so log_count is not that big.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  args.work_memory_-&gt;assure_capacity(<span class="keyword">sizeof</span>(SortEntry) * args.logs_count_);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  debugging::StopWatch stop_watch_entire;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">sizeof</span>(SortEntry) == 16U);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  SortEntry* entries = <span class="keyword">reinterpret_cast&lt;</span>SortEntry*<span class="keyword">&gt;</span>(args.work_memory_-&gt;get_block());</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1array.html#a0d5e107fe3c1885c8984bacd1f5cf188">prepare_sort_entries</a>(args, entries);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  debugging::StopWatch stop_watch;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="comment">// Gave up non-gcc support because of aarch64 support. yes, we can also assume __uint128_t.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// CPU profile of partition_array_perf: 50% (introsort_loop) + 7% (other inlined).</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  std::sort(</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    reinterpret_cast&lt;__uint128_t*&gt;(entries),</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    reinterpret_cast&lt;__uint128_t*&gt;(entries + args.logs_count_));</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  stop_watch.stop();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Sorted &quot;</span> &lt;&lt; args.logs_count_ &lt;&lt; <span class="stringliteral">&quot; log entries in &quot;</span> &lt;&lt; stop_watch.elapsed_ms() &lt;&lt; <span class="stringliteral">&quot;ms&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  uint32_t result_count = <a class="code" href="namespacefoedus_1_1storage_1_1array.html#a7466ab3ddec9b0f64a0d8a8f0bf170b8">compact_logs</a>(args, entries);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  stop_watch_entire.stop();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Array-&quot;</span> &lt;&lt; id_ &lt;&lt; <span class="stringliteral">&quot; sort_batch() done in  &quot;</span> &lt;&lt; stop_watch_entire.elapsed_ms()</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;ms  for &quot;</span> &lt;&lt; args.logs_count_ &lt;&lt; <span class="stringliteral">&quot; log entries, compacted them to&quot;</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        &lt;&lt; result_count &lt;&lt; <span class="stringliteral">&quot; log entries&quot;</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  *args.written_count_ = result_count;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1array_html_a7466ab3ddec9b0f64a0d8a8f0bf170b8"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1array.html#a7466ab3ddec9b0f64a0d8a8f0bf170b8">foedus::storage::array::compact_logs</a></div><div class="ttdeci">uint32_t compact_logs(const Partitioner::SortBatchArguments &amp;args, SortEntry *entries)</div><div class="ttdoc">subroutine of sort_batch </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8cpp_source.html#l00249">array_partitioner_impl.cpp:249</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1array_html_a0d5e107fe3c1885c8984bacd1f5cf188"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1array.html#a0d5e107fe3c1885c8984bacd1f5cf188">foedus::storage::array::prepare_sort_entries</a></div><div class="ttdeci">void prepare_sort_entries(const Partitioner::SortBatchArguments &amp;args, SortEntry *entries)</div><div class="ttdoc">subroutine of sort_batch </div><div class="ttdef"><b>Definition:</b> <a href="array__partitioner__impl_8cpp_source.html#l00228">array_partitioner_impl.cpp:228</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_cgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad79701492d232cb5aec1ad4d8c99eb5d" title="If the current size is smaller than the given size, automatically expands. " alt="" coords="243,71,456,112"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1array.html#a7466ab3ddec9b0f64a0d8a8f0bf170b8" title="subroutine of sort_batch " alt="" coords="275,304,423,345"/>
<area shape="rect" id="node13" href="classfoedus_1_1debugging_1_1StopWatch.html#ac8a42ba406ab38b098e27a19e6803638" title="foedus::debugging::\lStopWatch::elapsed_ms" alt="" coords="267,389,432,431"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="243,455,456,496"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage_1_1array.html#a0d5e107fe3c1885c8984bacd1f5cf188" title="subroutine of sort_batch " alt="" coords="275,524,423,565"/>
<area shape="rect" id="node22" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="282,727,417,768"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="504,5,717,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b" title="Releases the memory block. " alt="" coords="504,71,717,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1array_1_1SortEntry.html#ae57b773bb6192e3cc6a10281f3024879" title="foedus::storage::array\l::SortEntry::get_offset" alt="" coords="536,136,685,177"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1array_1_1SortEntry.html#ad836d773206abcbb03e1e92f744cac4f" title="foedus::storage::array\l::SortEntry::get_position" alt="" coords="529,201,692,243"/>
<area shape="rect" id="node8" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="533,267,688,308"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a9454f790a5d8190207b7fc6d4acf340a" title="A special optimization for increment logs in log gleaner. " alt="" coords="527,333,694,389"/>
<area shape="rect" id="node11" href="structfoedus_1_1snapshot_1_1LogBuffer.html#a4c866d7cc1684237eca5fff49215b80e" title="foedus::snapshot::LogBuffer\l::resolve" alt="" coords="519,413,702,455"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1array_1_1ArrayIncrementLogType.html#a46f93f94d46ebd8f6f3928a630cb6c20" title="foedus::storage::array\l::ArrayIncrementLogType\l::addendum_64" alt="" coords="765,333,932,389"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a" title="foedus::snapshot::from\l_buffer_position" alt="" coords="771,413,926,455"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="549,479,672,520"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f" title="foedus::xct::XctId\l::get_ordinal" alt="" coords="549,544,672,585"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1array_1_1SortEntry.html#a0b242f0b7bf29e750af48fc9724f3bd1" title="foedus::storage::array\l::SortEntry::set" alt="" coords="537,609,685,651"/>
<area shape="rect" id="node20" href="classfoedus_1_1Epoch.html#a95ee2922375886d43b8e669a192fd4c4" title="Returns the number epochs from the given epoch to this epoch accounting for wrap&#45;around. " alt="" coords="531,675,691,702"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="787,479,910,520"/>
<area shape="rect" id="node21" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="771,675,926,702"/>
<area shape="rect" id="node23" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="530,727,691,768"/>
<area shape="rect" id="node24" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="543,792,678,833"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_icgraph" id="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner_abcc2f61287dd0e9f643cc7c7b406ed32_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1Partitioner.html#a8c8909d8a44ae9d6a4afee0ded0add4c" title="Called from log reducer to sort log entries by keys. " alt="" coords="243,5,421,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a22cc1ddaf965345a552fdb7446367ecb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html">ArrayPartitioner</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="array__partitioner__impl_8cpp_source.html#l00347">347</a> of file <a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                                                 {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;ArrayPartitioner&gt;&quot;</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (v.data_) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;array_size_&gt;&quot;</span> &lt;&lt; v.data_-&gt;array_size_ &lt;&lt; <span class="stringliteral">&quot;&lt;/array_size_&gt;&quot;</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;bucket_size_&gt;&quot;</span> &lt;&lt; v.data_-&gt;bucket_size_ &lt;&lt; <span class="stringliteral">&quot;&lt;/bucket_size_&gt;&quot;</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; <a class="code" href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">kInteriorFanout</a>; ++i) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      o &lt;&lt; <span class="stringliteral">&quot;&lt;range bucket=\&quot;&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;\&quot; partition=\&quot;&quot;</span> &lt;&lt; v.data_-&gt;bucket_owners_[i] &lt;&lt; <span class="stringliteral">&quot;\&quot; /&gt;&quot;</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;Not yet designed&quot;</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/ArrayPartitioner&gt;&quot;</span>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div>
<div class="ttc" id="group__ARRAY_html_gaaa3b4fa18b93d578250c8c8a5b613423"><div class="ttname"><a href="group__ARRAY.html#gaaa3b4fa18b93d578250c8c8a5b613423">foedus::storage::array::kInteriorFanout</a></div><div class="ttdeci">const uint16_t kInteriorFanout</div><div class="ttdoc">Max number of entries in an interior page of array storage. </div><div class="ttdef"><b>Definition:</b> <a href="array__id_8hpp_source.html#l00110">array_id.hpp:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/array/<a class="el" href="array__partitioner__impl_8hpp_source.html">array_partitioner_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/array/<a class="el" href="array__partitioner__impl_8cpp_source.html">array_partitioner_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1array.html">array</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1array_1_1ArrayPartitioner.html">ArrayPartitioner</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
