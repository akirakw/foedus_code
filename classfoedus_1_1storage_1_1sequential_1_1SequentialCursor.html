<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::sequential::SequentialCursor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::sequential::SequentialCursor Class Reference<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__SEQUENTIAL.html">Sequential Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A cursor interface to read tuples from a sequential storage.  
 <a href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A cursor interface to read tuples from a sequential storage. </p>
<p>Unlike other storages, the only read-access to sequential storages is, as the name implies, a full sequential scan. This cursor interface is thus optimized for cases where we scan millions of records. This implies that, unlike masstree's cursor, we don't have to worry about infrequent overheads, such as new/delete in initialization.</p>
<dl class="section user"><dt>Example first</dt><dd>Use it as follows. <div class="fragment"><div class="line">memory::AlignedMemory buffer(1 &lt;&lt; 16, 1 &lt;&lt; 12, kNumaAllocOnnode, 0);</div>
<div class="line"><a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a63f0ef6e7a9171191d4117e08da4e7d3">SequentialCursor</a> cursor(context, storage, buffer.get_block(), 1 &lt;&lt; 16);</div>
<div class="line">SequentialRecordIterator it;</div>
<div class="line"><span class="keywordflow">while</span> (cursor.is_valid()) {</div>
<div class="line">  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(cursor.next_batch(&amp;it));</div>
<div class="line">  <span class="keywordflow">while</span> (it.is_valid()) {</div>
<div class="line">    std::cout &lt;&lt; std::string(it.get_cur_record_raw(), it.get_cur_record_length());</div>
<div class="line">    ...</div>
<div class="line">    it.next();</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>Safe Epoch and Unsafe Epoch</dt><dd>Safe epochs are epochs <em>before</em> the current grace epoch (current global epoch -1). There will be no more transactions in such epochs that might insert new records. Thus, thanks to the append-only nature of sequential storage, reading records in safe epochs does not need any concurrency control. Unsafe epochs, OTOH, are the currrent grace epoch and later. Some transaction in grace-epoch might be now in apply-phase to insert records, and furthermore some transaction might newly start in current-epoch. This cursor might do expensive synchronization if the user requests to read records from unsafe epochs.</dd></dl>
<dl class="section user"><dt>Optimistic vs pessimistic</dt><dd>Reading unsafe epochs <em>should</em> be protected by lock (pessimistic) because 1) this happens rarely, and 2) quite likely that OCC will abort because all accesses are at the tail. So far, the implemention is OCC, just taking page version of tail page and read-set of last record in tail page. Frankly speaking to save coding. We should measure OCC vs lock in this case and most likely implement lock. The lock must be a bit more complicated than usual because insertion threads should not take locks frequently (too expensive then). </dd></dl>

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00091">91</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa8c5c98f3005057525ee3bd2ac703236"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236">OrderMode</a> { <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06">kNodeFirstMode</a>, 
<a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a9c414d471ec2fcf0ff79155b5ac861e8">kLooseEpochSortMode</a>
 }<tr class="memdesc:aa8c5c98f3005057525ee3bd2ac703236"><td class="mdescLeft">&#160;</td><td class="mdescRight">The order this cursor returns tuples.  <a href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236">More...</a><br /></td></tr>
<tr class="separator:aa8c5c98f3005057525ee3bd2ac703236"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a63f0ef6e7a9171191d4117e08da4e7d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a63f0ef6e7a9171191d4117e08da4e7d3">SequentialCursor</a> (<a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, const <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html">sequential::SequentialStorage</a> &amp;storage, void *buffer, uint64_t buffer_size, <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236">OrderMode</a> order_mode=<a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06">kNodeFirstMode</a>, <a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> from_epoch=<a class="el" href="group__IDIOMS.html#gabfa320c2e583e5d55202a3dfec99768f">INVALID_EPOCH</a>, <a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> to_epoch=<a class="el" href="group__IDIOMS.html#gabfa320c2e583e5d55202a3dfec99768f">INVALID_EPOCH</a>, int32_t node_filter=-1)</td></tr>
<tr class="memdesc:a63f0ef6e7a9171191d4117e08da4e7d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a cursor to read tuples from this storage.  <a href="#a63f0ef6e7a9171191d4117e08da4e7d3">More...</a><br /></td></tr>
<tr class="separator:a63f0ef6e7a9171191d4117e08da4e7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a592b80a55e5c90d88a333c124b674ba2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a592b80a55e5c90d88a333c124b674ba2">~SequentialCursor</a> ()</td></tr>
<tr class="separator:a592b80a55e5c90d88a333c124b674ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd0d027307677767abde8112fa70b11"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a8bd0d027307677767abde8112fa70b11">get_context</a> () const </td></tr>
<tr class="separator:a8bd0d027307677767abde8112fa70b11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac748cc394e0db33b7d5c4ba0d5bef73a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html">sequential::SequentialStorage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#ac748cc394e0db33b7d5c4ba0d5bef73a">get_storage</a> () const </td></tr>
<tr class="separator:ac748cc394e0db33b7d5c4ba0d5bef73a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad59df425f4d5080a50ac00d7fcd55bc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#ad59df425f4d5080a50ac00d7fcd55bc6">get_from_epoch</a> () const </td></tr>
<tr class="separator:ad59df425f4d5080a50ac00d7fcd55bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c60954a9841aafa5b598a554e4cd985"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a6c60954a9841aafa5b598a554e4cd985">get_to_epoch</a> () const </td></tr>
<tr class="separator:a6c60954a9841aafa5b598a554e4cd985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92c6ffe45d768e5f9aca4d6ba9fa517d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a92c6ffe45d768e5f9aca4d6ba9fa517d">next_batch</a> (<a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialRecordIterator.html">SequentialRecordIterator</a> *out)</td></tr>
<tr class="memdesc:a92c6ffe45d768e5f9aca4d6ba9fa517d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a batch of records as an iterator.  <a href="#a92c6ffe45d768e5f9aca4d6ba9fa517d">More...</a><br /></td></tr>
<tr class="separator:a92c6ffe45d768e5f9aca4d6ba9fa517d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890364fc4cd752c3ff2d6ffb5138d3b5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a890364fc4cd752c3ff2d6ffb5138d3b5">is_valid</a> () const </td></tr>
<tr class="separator:a890364fc4cd752c3ff2d6ffb5138d3b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0362c7b0ab222b4201e440d477c88105"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a0362c7b0ab222b4201e440d477c88105">is_finished_snapshots</a> () const </td></tr>
<tr class="memdesc:a0362c7b0ab222b4201e440d477c88105"><td class="mdescLeft">&#160;</td><td class="mdescRight">Followings are rather implementation details. Used only from testcases.  <a href="#a0362c7b0ab222b4201e440d477c88105">More...</a><br /></td></tr>
<tr class="separator:a0362c7b0ab222b4201e440d477c88105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a872baa003e3f5e998ef5511ea6ded231"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a872baa003e3f5e998ef5511ea6ded231">is_finished_safe_volatiles</a> () const </td></tr>
<tr class="separator:a872baa003e3f5e998ef5511ea6ded231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5576226989c6aaf3a0dfa93325cfd37"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#ac5576226989c6aaf3a0dfa93325cfd37">is_finished_unsafe_volatiles</a> () const </td></tr>
<tr class="separator:ac5576226989c6aaf3a0dfa93325cfd37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a4f7b7f1af4afbab0bf9c2efa0bf0ae93"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a4f7b7f1af4afbab0bf9c2efa0bf0ae93">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html">SequentialCursor</a> &amp;v)</td></tr>
<tr class="separator:a4f7b7f1af4afbab0bf9c2efa0bf0ae93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aa8c5c98f3005057525ee3bd2ac703236"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236">foedus::storage::sequential::SequentialCursor::OrderMode</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The order this cursor returns tuples. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06"></a>kNodeFirstMode&#160;</td><td class="fielddoc">
<p>Returns as many records as possible from node-0's core-0, core-1, do the same from node-1,... </p>
<p>Note that even this mode might return <em>unsafe</em> epoch at last because we delay reading unsafe epochs as much as possible. </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aa8c5c98f3005057525ee3bd2ac703236a9c414d471ec2fcf0ff79155b5ac861e8"></a>kLooseEpochSortMode&#160;</td><td class="fielddoc">
<p>Returns records <b>loosely</b> ordered by epochs. </p>
<p>We don't guarantee true ordering even in this case, which is too expensive. TASK(Hideaki) <b>Not</b> <b>implemented</b> <b>yet</b>. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00094">94</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                 {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06">kNodeFirstMode</a>,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a9c414d471ec2fcf0ff79155b5ac861e8">kLooseEpochSortMode</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  };</div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_html_aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06">foedus::storage::sequential::SequentialCursor::kNodeFirstMode</a></div><div class="ttdoc">Returns as many records as possible from node-0&#39;s core-0, core-1, do the same from node-1...</div><div class="ttdef"><b>Definition:</b> <a href="sequential__cursor_8hpp_source.html#l00100">sequential_cursor.hpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_html_aa8c5c98f3005057525ee3bd2ac703236a9c414d471ec2fcf0ff79155b5ac861e8"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a9c414d471ec2fcf0ff79155b5ac861e8">foedus::storage::sequential::SequentialCursor::kLooseEpochSortMode</a></div><div class="ttdoc">Returns records loosely ordered by epochs. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__cursor_8hpp_source.html#l00106">sequential_cursor.hpp:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a63f0ef6e7a9171191d4117e08da4e7d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::sequential::SequentialCursor::SequentialCursor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html">sequential::SequentialStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236">OrderMode</a>&#160;</td>
          <td class="paramname"><em>order_mode</em> = <code><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#aa8c5c98f3005057525ee3bd2ac703236a6f5a49bb7aedac0706c21175d3005a06">kNodeFirstMode</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td>
          <td class="paramname"><em>from_epoch</em> = <code><a class="el" href="group__IDIOMS.html#gabfa320c2e583e5d55202a3dfec99768f">INVALID_EPOCH</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td>
          <td class="paramname"><em>to_epoch</em> = <code><a class="el" href="group__IDIOMS.html#gabfa320c2e583e5d55202a3dfec99768f">INVALID_EPOCH</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>node_filter</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a cursor to read tuples from this storage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>Thread context of the transaction </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">storage</td><td>The sequential storage to read from </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">buffer</td><td>The buffer to read a number of snapshot pages in a batch. This buffer <b>must</b> <b>be</b> <b>aligned</b> for direct-IO. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_size</td><td>Byte size of buffer. Must be at least 4kb. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">order_mode</td><td>The order this cursor returns tuples </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">from_epoch</td><td>Inclusive beginning of epochs to read. If not specified, all epochs. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to_epoch</td><td>Exclusive end of epochs to read. To read records in unsafe epochs, specify a <em>future</em> epoch, larger than the current grace epoch (remember, it's exclusive end). If not specified, all <em>safe</em> epochs (fast, but does not return records being added). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_filter</td><td>If specified, returns records only in the given node. negative for reading from all nodes. This is especially useful for parallelizing a scan on a large sequential storage.</td></tr>
  </table>
  </dd>
</dl>
<p>Default parameter: the system-initial epoch for from_epoch and current-global epoch for to_epoch (thus safe_epoch_only_). Assuming this storage is used for log/archive data, this should be a quite common usecase. order_mode is defaulted to kNodeFirstMode. </p>

<p>Definition at line <a class="el" href="sequential__cursor_8cpp_source.html#l00050">50</a> of file <a class="el" href="sequential__cursor_8cpp_source.html">sequential_cursor.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00063">foedus::xct::XctManager::get_current_grace_epoch()</a>, <a class="el" href="xct_8hpp_source.html#l00149">foedus::xct::Xct::get_isolation_level()</a>, <a class="el" href="engine_8cpp_source.html#l00061">foedus::Engine::get_xct_manager()</a>, <a class="el" href="epoch_8hpp_source.html#l00096">foedus::Epoch::is_valid()</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, and <a class="el" href="xct__id_8hpp_source.html#l00078">foedus::xct::kSnapshot</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  : context_(context),</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    xct_(&amp;context-&gt;get_current_xct()),</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    engine_(context-&gt;get_engine()),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    resolver_(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>()),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    storage_(storage),</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    from_epoch_(</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      from_epoch.is_valid() ? from_epoch : engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">get_savepoint_manager</a>()-&gt;<a class="code" href="classfoedus_1_1savepoint_1_1SavepointManager.html#ac8c418cf8e39002b4a55cc3b3120807f">get_earliest_epoch</a>()),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    to_epoch_(</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      to_epoch.is_valid() ? to_epoch : engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#addd36d7a9f38e055767f9a36c0889385">get_current_grace_epoch</a>()),</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    latest_snapshot_epoch_(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a2770614b3ccee927036e14df8f4e6069">get_snapshot_manager</a>()-&gt;<a class="code" href="classfoedus_1_1snapshot_1_1SnapshotManager.html#a656febc5d2d6eecd25165b5bbd5fe3cb">get_snapshot_epoch</a>()),</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    from_epoch_volatile_(<a class="code" href="namespacefoedus_1_1storage_1_1sequential.html#a93179071bbdb69c7c29c90356bce51e1">max_from_epoch_snapshot_epoch</a>(from_epoch_, latest_snapshot_epoch_)),</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    node_filter_(node_filter),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    node_count_(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">get_soc_count</a>()),</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    order_mode_(order_mode),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    buffer_(reinterpret_cast&lt;SequentialRecordBatch*&gt;(buffer)),</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    buffer_size_(buffer_size),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    buffer_pages_(buffer_size / <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(buffer_size &gt;= <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  current_node_ = 0;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  finished_snapshots_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  finished_safe_volatiles_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  finished_unsafe_volatiles_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  states_.clear();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  grace_epoch_ = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#addd36d7a9f38e055767f9a36c0889385">get_current_grace_epoch</a>();</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(from_epoch_.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>());</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(to_epoch_.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>());</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(from_epoch_ &lt;= to_epoch_);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span> (xct_-&gt;<a class="code" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">get_isolation_level</a>() == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934">xct::kSnapshot</a></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    || (latest_snapshot_epoch_.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>() &amp;&amp; to_epoch_ &lt;= latest_snapshot_epoch_)) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    snapshot_only_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    safe_epoch_only_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    finished_safe_volatiles_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    finished_unsafe_volatiles_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    snapshot_only_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (to_epoch_ &lt;= grace_epoch_) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      safe_epoch_only_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="comment">// We do NOT rule out reading unsafe pages yet.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="comment">// Even a safe page might be conservatively deemed as unsafe in our logic,</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="comment">// so we must make sure we go on to unsafe-volatile phase too.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="comment">// Real-check happens in next_batch_unsafe_volatiles().</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="comment">// finished_unsafe_volatiles_ = true;</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="comment">// only in this case, we have to take a lock</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      safe_epoch_only_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">if</span> (!latest_snapshot_epoch_.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>() || latest_snapshot_epoch_ &lt; from_epoch_) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    finished_snapshots_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_addd36d7a9f38e055767f9a36c0889385"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#addd36d7a9f38e055767f9a36c0889385">foedus::xct::XctManager::get_current_grace_epoch</a></div><div class="ttdeci">Epoch get_current_grace_epoch() const </div><div class="ttdoc">Returns the current grace-period epoch (global epoch - 1), the epoch some transaction might be still ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00063">xct_manager_pimpl.cpp:63</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934">foedus::xct::kSnapshot</a></div><div class="ttdoc">Snapshot isolation (SI), meaning the transaction reads a consistent and complete image of the databas...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00078">xct_id.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a4f168d41ea00249fefe905def87e80c8"><div class="ttname"><a href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">foedus::Engine::get_savepoint_manager</a></div><div class="ttdeci">savepoint::SavepointManager * get_savepoint_manager() const </div><div class="ttdoc">See Savepoint Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00053">engine.cpp:53</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_af0ac9dbae9481b295a8492c6d9f6c1d5"><div class="ttname"><a href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">foedus::Engine::get_soc_count</a></div><div class="ttdeci">soc::SocId get_soc_count() const </div><div class="ttdoc">Shorthand for get_options().thread_.group_count_. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00074">engine.cpp:74</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1sequential_html_a93179071bbdb69c7c29c90356bce51e1"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1sequential.html#a93179071bbdb69c7c29c90356bce51e1">foedus::storage::sequential::max_from_epoch_snapshot_epoch</a></div><div class="ttdeci">Epoch max_from_epoch_snapshot_epoch(Epoch from_epoch, Epoch latest_snapshot_epoch)</div><div class="ttdef"><b>Definition:</b> <a href="sequential__cursor_8cpp_source.html#l00039">sequential_cursor.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a48d5e1f7ce2f70161c253f650c75ed95"><div class="ttname"><a href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">foedus::Engine::get_xct_manager</a></div><div class="ttdeci">xct::XctManager * get_xct_manager() const </div><div class="ttdoc">See Transaction Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00061">engine.cpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_a8228a1a49b7db9b93498a778cb40f8e9"><div class="ttname"><a href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">foedus::Epoch::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00096">epoch.hpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_abae2ae5210db8eda39a1507940bf7352"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">foedus::xct::Xct::get_isolation_level</a></div><div class="ttdeci">IsolationLevel get_isolation_level() const </div><div class="ttdoc">Returns the level of isolation for this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00149">xct.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1savepoint_1_1SavepointManager_html_ac8c418cf8e39002b4a55cc3b3120807f"><div class="ttname"><a href="classfoedus_1_1savepoint_1_1SavepointManager.html#ac8c418cf8e39002b4a55cc3b3120807f">foedus::savepoint::SavepointManager::get_earliest_epoch</a></div><div class="ttdeci">Epoch get_earliest_epoch() const </div><div class="ttdef"><b>Definition:</b> <a href="savepoint__manager_8cpp_source.html#l00042">savepoint_manager.cpp:42</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a2770614b3ccee927036e14df8f4e6069"><div class="ttname"><a href="classfoedus_1_1Engine.html#a2770614b3ccee927036e14df8f4e6069">foedus::Engine::get_snapshot_manager</a></div><div class="ttdeci">snapshot::SnapshotManager * get_snapshot_manager() const </div><div class="ttdoc">See Snapshot Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00056">engine.cpp:56</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1SnapshotManager_html_a656febc5d2d6eecd25165b5bbd5fe3cb"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1SnapshotManager.html#a656febc5d2d6eecd25165b5bbd5fe3cb">foedus::snapshot::SnapshotManager::get_snapshot_epoch</a></div><div class="ttdeci">Epoch get_snapshot_epoch() const </div><div class="ttdoc">Returns the most recently snapshot-ed epoch, all logs upto this epoch is safe to delete. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__manager_8cpp_source.html#l00034">snapshot_manager.cpp:34</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a63f0ef6e7a9171191d4117e08da4e7d3_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a63f0ef6e7a9171191d4117e08da4e7d3_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a63f0ef6e7a9171191d4117e08da4e7d3_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a63f0ef6e7a9171191d4117e08da4e7d3_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManager.html#addd36d7a9f38e055767f9a36c0889385" title="Returns the current grace&#45;period epoch (global epoch &#45; 1), the epoch some transaction might be still ..." alt="" coords="289,35,465,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352" title="Returns the level of isolation for this transaction. " alt="" coords="308,100,447,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95" title="See Transaction Manager. " alt="" coords="310,165,445,207"/>
<area shape="rect" id="node7" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="300,231,455,258"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a787bb892079cb32d5a2065188825a522" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch" alt="" coords="513,5,708,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1Epoch.html#a701de077839df51ebe44749a116ec10f" title="foedus::Epoch::one_less" alt="" coords="528,71,693,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a592b80a55e5c90d88a333c124b674ba2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::sequential::SequentialCursor::~SequentialCursor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__cursor_8cpp_source.html#l00114">114</a> of file <a class="el" href="sequential__cursor_8cpp_source.html">sequential_cursor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                    {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  states_.clear();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8bd0d027307677767abde8112fa70b11"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* foedus::storage::sequential::SequentialCursor::get_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00142">142</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{ <span class="keywordflow">return</span> context_;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad59df425f4d5080a50ac00d7fcd55bc6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> foedus::storage::sequential::SequentialCursor::get_from_epoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Inclusive beginning of epochs to read. </dd></dl>

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00146">146</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>

<p>Referenced by <a class="el" href="sequential__cursor_8cpp_source.html#l00652">foedus::storage::sequential::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{ <span class="keywordflow">return</span> from_epoch_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ad59df425f4d5080a50ac00d7fcd55bc6_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ad59df425f4d5080a50ac00d7fcd55bc6_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ad59df425f4d5080a50ac00d7fcd55bc6_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ad59df425f4d5080a50ac00d7fcd55bc6_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1sequential.html#a137c2a80a3061fc40c61e0aaf23f8354" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="232,13,411,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac748cc394e0db33b7d5c4ba0d5bef73a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html">sequential::SequentialStorage</a>&amp; foedus::storage::sequential::SequentialCursor::get_storage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00143">143</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>

<p>Referenced by <a class="el" href="sequential__cursor_8cpp_source.html#l00652">foedus::storage::sequential::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{ <span class="keywordflow">return</span> storage_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ac748cc394e0db33b7d5c4ba0d5bef73a_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ac748cc394e0db33b7d5c4ba0d5bef73a_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ac748cc394e0db33b7d5c4ba0d5bef73a_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_ac748cc394e0db33b7d5c4ba0d5bef73a_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1sequential.html#a137c2a80a3061fc40c61e0aaf23f8354" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="232,13,411,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c60954a9841aafa5b598a554e4cd985"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> foedus::storage::sequential::SequentialCursor::get_to_epoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Exclusive end of epochs to read. </dd></dl>

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00148">148</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>

<p>Referenced by <a class="el" href="sequential__cursor_8cpp_source.html#l00652">foedus::storage::sequential::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{ <span class="keywordflow">return</span> to_epoch_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a6c60954a9841aafa5b598a554e4cd985_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a6c60954a9841aafa5b598a554e4cd985_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a6c60954a9841aafa5b598a554e4cd985_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a6c60954a9841aafa5b598a554e4cd985_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1sequential.html#a137c2a80a3061fc40c61e0aaf23f8354" title="foedus::storage::sequential\l::operator\&lt;\&lt;" alt="" coords="232,13,411,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a872baa003e3f5e998ef5511ea6ded231"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::sequential::SequentialCursor::is_finished_safe_volatiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00170">170</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{ <span class="keywordflow">return</span> finished_safe_volatiles_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0362c7b0ab222b4201e440d477c88105"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::sequential::SequentialCursor::is_finished_snapshots </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Followings are rather implementation details. Used only from testcases. </p>

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00169">169</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;{ <span class="keywordflow">return</span> finished_snapshots_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac5576226989c6aaf3a0dfa93325cfd37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::sequential::SequentialCursor::is_finished_unsafe_volatiles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00171">171</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{ <span class="keywordflow">return</span> finished_unsafe_volatiles_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a890364fc4cd752c3ff2d6ffb5138d3b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::sequential::SequentialCursor::is_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>false if there is no chance that this cursor returns any more record. As a very rare case, this might return true though there is no more matching record. </dd></dl>

<p>Definition at line <a class="el" href="sequential__cursor_8hpp_source.html#l00164">164</a> of file <a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a>.</p>

<p>Referenced by <a class="el" href="sequential__cursor_8cpp_source.html#l00159">next_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                             {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">return</span> !(finished_snapshots_ &amp;&amp; finished_safe_volatiles_ &amp;&amp; finished_unsafe_volatiles_);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a890364fc4cd752c3ff2d6ffb5138d3b5_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a890364fc4cd752c3ff2d6ffb5138d3b5_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a890364fc4cd752c3ff2d6ffb5138d3b5_icgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a890364fc4cd752c3ff2d6ffb5138d3b5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a92c6ffe45d768e5f9aca4d6ba9fa517d" title="Returns a batch of records as an iterator. " alt="" coords="232,5,433,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a92c6ffe45d768e5f9aca4d6ba9fa517d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::storage::sequential::SequentialCursor::next_batch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialRecordIterator.html">SequentialRecordIterator</a> *&#160;</td>
          <td class="paramname"><em>out</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a batch of records as an iterator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>an iterator over returned records.</td></tr>
  </table>
  </dd>
</dl>
<p>It <em>might</em> return an empty batch even when this cursor has more records to return. Invoke <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a890364fc4cd752c3ff2d6ffb5138d3b5">is_valid()</a> to check it. This method does nothing if <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a890364fc4cd752c3ff2d6ffb5138d3b5">is_valid()</a> is already false. Each batch is guaranteed to be from one node, and actually from one page. </p>

<p>Definition at line <a class="el" href="sequential__cursor_8cpp_source.html#l00159">159</a> of file <a class="el" href="sequential__cursor_8cpp_source.html">sequential_cursor.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="sequential__cursor_8hpp_source.html#l00164">is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, and <a class="el" href="sequential__cursor_8hpp_source.html#l00388">foedus::storage::sequential::SequentialRecordIterator::reset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                                                    {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  out-&gt;reset();</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (states_.empty()) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(init_states());</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">if</span> (!finished_snapshots_) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(next_batch_snapshot(out, &amp;found));</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (found) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Finished reading snapshot pages:&quot;</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      DVLOG(2) &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(finished_snapshots_);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      refresh_grace_epoch();</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span> (!finished_safe_volatiles_) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(next_batch_safe_volatiles(out, &amp;found));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">if</span> (found) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Finished reading safe volatile pages:&quot;</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      DVLOG(2) &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(finished_safe_volatiles_);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      refresh_grace_epoch();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (!finished_unsafe_volatiles_) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(next_batch_unsafe_volatiles(out, &amp;found));</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (found) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Finished reading unsafe volatile pages:&quot;</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      DVLOG(2) &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(finished_unsafe_volatiles_);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a890364fc4cd752c3ff2d6ffb5138d3b5">is_valid</a>());</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_html_a890364fc4cd752c3ff2d6ffb5138d3b5"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a890364fc4cd752c3ff2d6ffb5138d3b5">foedus::storage::sequential::SequentialCursor::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__cursor_8hpp_source.html#l00164">sequential_cursor.hpp:164</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a92c6ffe45d768e5f9aca4d6ba9fa517d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a92c6ffe45d768e5f9aca4d6ba9fa517d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a92c6ffe45d768e5f9aca4d6ba9fa517d_cgraph" id="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor_a92c6ffe45d768e5f9aca4d6ba9fa517d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a890364fc4cd752c3ff2d6ffb5138d3b5" title="foedus::storage::sequential\l::SequentialCursor::is_valid" alt="" coords="270,5,449,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1sequential_1_1SequentialRecordIterator.html#a6a01296525dce6e3abaf5c91129cb3a3" title="foedus::storage::sequential\l::SequentialRecordIterator::reset" alt="" coords="255,71,464,112"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a4f7b7f1af4afbab0bf9c2efa0bf0ae93"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html">SequentialCursor</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="sequential__cursor_8cpp_source.html#l00652">652</a> of file <a class="el" href="sequential__cursor_8cpp_source.html">sequential_cursor.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                                                 {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;SequentialCursor&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; v.get_storage() &lt;&lt; std::endl;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;from_epoch&gt;&quot;</span> &lt;&lt; v.get_from_epoch() &lt;&lt; <span class="stringliteral">&quot;&lt;/from_epoch&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;to_epoch&gt;&quot;</span> &lt;&lt; v.get_to_epoch() &lt;&lt; <span class="stringliteral">&quot;&lt;/to_epoch&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;order_mode&gt;&quot;</span> &lt;&lt; v.order_mode_ &lt;&lt; <span class="stringliteral">&quot;&lt;/order_mode&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;node_filter&gt;&quot;</span> &lt;&lt; v.node_filter_ &lt;&lt; <span class="stringliteral">&quot;&lt;/node_filter&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;snapshot_only_&gt;&quot;</span> &lt;&lt; v.snapshot_only_ &lt;&lt; <span class="stringliteral">&quot;&lt;/snapshot_only_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;safe_epoch_only_&gt;&quot;</span> &lt;&lt; v.safe_epoch_only_ &lt;&lt; <span class="stringliteral">&quot;&lt;/safe_epoch_only_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;buffer_&gt;&quot;</span> &lt;&lt; v.buffer_ &lt;&lt; <span class="stringliteral">&quot;&lt;/buffer_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;buffer_size&gt;&quot;</span> &lt;&lt; v.buffer_size_ &lt;&lt; <span class="stringliteral">&quot;&lt;/buffer_size&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;buffer_pages_&gt;&quot;</span> &lt;&lt; v.buffer_pages_ &lt;&lt; <span class="stringliteral">&quot;&lt;/buffer_pages_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;current_node_&gt;&quot;</span> &lt;&lt; v.current_node_ &lt;&lt; <span class="stringliteral">&quot;&lt;/current_node_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;finished_snapshots_&gt;&quot;</span> &lt;&lt; v.finished_snapshots_ &lt;&lt; <span class="stringliteral">&quot;&lt;/finished_snapshots_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;finished_safe_volatiles_&gt;&quot;</span> &lt;&lt; v.finished_safe_volatiles_</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/finished_safe_volatiles_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;  &lt;finished_unsafe_volatiles_&gt;&quot;</span> &lt;&lt; v.finished_unsafe_volatiles_</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/finished_unsafe_volatiles_&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/SequentialCursor&gt;&quot;</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/sequential/<a class="el" href="sequential__cursor_8hpp_source.html">sequential_cursor.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/sequential/<a class="el" href="sequential__cursor_8cpp_source.html">sequential_cursor.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1sequential.html">sequential</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html">SequentialCursor</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
