<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::masstree::MasstreeBorderPage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::masstree::MasstreeBorderPage Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__MASSTREE.html">Masstree Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents one border page in <a class="el" href="group__MASSTREE.html">Masstree Storage</a>.  
 <a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents one border page in <a class="el" href="group__MASSTREE.html">Masstree Storage</a>. </p>
<dl class="section user"><dt>Slots</dt><dd>One border page has at most kBorderPageMaxSlots slots. One slot is reserved for one <em>physical</em> record, which is never moved except snapshotting and split/compact. A thread first installs a new record by atomically modifying page_version, then set up the record with deletion flag on. Flipping the delete flag of the record is done by apply() of transaction, which might fail. If it fails, the record is left as deleted until snapshotting or split/compact.</dd></dl>
<dl class="section user"><dt>Page Layout</dt><dd><table class="doxtable">
<tr>
<td>Headers, including common part and border-specific part </td></tr>
<tr>
<td><a class="el" href="structfoedus_1_1storage_1_1Record.html" title="Represents one record in our key-value store. ">Record</a> Data part, which grows forward </td></tr>
<tr>
<th>Unused part </th></tr>
<tr>
<td><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html" title="Fix-sized slot for each record, which is placed at the end of data region. ">Slot</a> part (32 bytes per record), which grows backward </td></tr>
</table>
</dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Do NOT instantiate this object or derive from this class. A page is always reinterpret-ed from a pooled memory region. No meaningful RTTI. </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00444">444</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::storage::masstree::MasstreeBorderPage:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage__inherit__graph.png" border="0" usemap="#foedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_inherit__map" id="foedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html" title="Common base of MasstreeIntermediatePage and MasstreeBorderPage. " alt="" coords="5,5,179,47"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::storage::masstree::MasstreeBorderPage:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage__coll__graph.png" border="0" usemap="#foedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_coll__map" id="foedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html" title="Common base of MasstreeIntermediatePage and MasstreeBorderPage. " alt="" coords="211,392,385,433"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PageHeader.html" title="Just a marker to denote that a memory region represents a data page. " alt="" coords="53,295,244,322"/>
<area shape="rect" id="node4" href="structfoedus_1_1assorted_1_1ProbCounter.html" title="Implements a probabilistic counter [Morris 1978]. " alt="" coords="5,199,204,225"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1PageVersion.html" title="Just a synonym of XctId to be used as a page lock mechanism. " alt="" coords="229,199,421,225"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1PageVersionStatus.html" title="foedus::storage::PageVersion\lStatus" alt="" coords="190,95,382,136"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1McsWwLock.html" title="An exclusive&#45;only (WW) MCS lock data structure. " alt="" coords="407,102,576,129"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1McsWwBlockData.html" title="Exclusive&#45;only (WW) MCS lock classes. " alt="" coords="391,5,592,32"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html" title="Represents a pointer to a volatile page with modification count for preventing ABA. " alt="" coords="268,288,429,329"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">return value for <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify...">find_key_for_reserve()</a>.  <a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix-sized slot for each record, which is placed at the end of data region.  <a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">SlotLengthPart</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart"><td class="mdescLeft">&#160;</td><td class="mdescRight">A piece of <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html" title="Fix-sized slot for each record, which is placed at the end of data region. ">Slot</a> object that must be read/written in one-shot, meaning no one reads half-written values whether it reads old values or new values.  <a href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MASSTREE.html#unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion">SlotLengthUnion</a></td></tr>
<tr class="separator:unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a8f7a0dbbbc0b3684cb349f551638a19d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">MatchType</a> { <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a> = 0, 
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a> = 1, 
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a> = 2, 
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a> = 3
 }<tr class="memdesc:a8f7a0dbbbc0b3684cb349f551638a19d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used in <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html" title="return value for find_key_for_reserve(). ">FindKeyForReserveResult</a>.  <a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">More...</a><br /></td></tr>
<tr class="separator:a8f7a0dbbbc0b3684cb349f551638a19d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a32d92c1f8e858d5cd407be8846f450a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a> ()=delete</td></tr>
<tr class="separator:a32d92c1f8e858d5cd407be8846f450a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2aa89486715069e08f189ad389bef5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#af2aa89486715069e08f189ad389bef5c">MasstreeBorderPage</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;other)=delete</td></tr>
<tr class="separator:af2aa89486715069e08f189ad389bef5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc02ae73638102469f4d8a0c66fa887"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abbc02ae73638102469f4d8a0c66fa887">operator=</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;other)=delete</td></tr>
<tr class="separator:abbc02ae73638102469f4d8a0c66fa887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab741ff207d274efcb4a5664880600f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f">initialize_volatile_page</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> storage_id, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id, uint8_t layer, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence)</td></tr>
<tr class="separator:a5ab741ff207d274efcb4a5664880600f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1e35c48bba8f7c8319d5739487768d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2f1e35c48bba8f7c8319d5739487768d">initialize_snapshot_page</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> storage_id, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id, uint8_t layer, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence)</td></tr>
<tr class="separator:a2f1e35c48bba8f7c8319d5739487768d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6318577ff1e6f5106712e9ed60a429fe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6318577ff1e6f5106712e9ed60a429fe">is_consecutive_inserts</a> () const </td></tr>
<tr class="memdesc:a6318577ff1e6f5106712e9ed60a429fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether this page is receiving only sequential inserts.  <a href="#a6318577ff1e6f5106712e9ed60a429fe">More...</a><br /></td></tr>
<tr class="separator:a6318577ff1e6f5106712e9ed60a429fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938979fd6b5ebe6bbfbec5d2a756ae05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">get_next_offset</a> () const </td></tr>
<tr class="separator:a938979fd6b5ebe6bbfbec5d2a756ae05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a293c8b397164e1f9ee32e69835846fb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">increase_next_offset</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> length)</td></tr>
<tr class="separator:a293c8b397164e1f9ee32e69835846fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b7973f3eb0f4f3c6894c278c18d7145"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a8b7973f3eb0f4f3c6894c278c18d7145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a812e899fc428c9223291e6233c4a23da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a812e899fc428c9223291e6233c4a23da">get_slot</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) __attribute__((always_inline))</td></tr>
<tr class="separator:a812e899fc428c9223291e6233c4a23da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a9c60937a3287ce6b73ea104a29d999"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) __attribute__((always_inline))</td></tr>
<tr class="separator:a8a9c60937a3287ce6b73ea104a29d999"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14aa45c7514f2a2d83dc7a138c24ecd0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">to_slot_index</a> (const <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a> *slot) const __attribute__((always_inline))</td></tr>
<tr class="separator:a14aa45c7514f2a2d83dc7a138c24ecd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a477537aab66e512a826f74d570397f41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a> () const </td></tr>
<tr class="memdesc:a477537aab66e512a826f74d570397f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns usable data space in bytes.  <a href="#a477537aab66e512a826f74d570397f41">More...</a><br /></td></tr>
<tr class="separator:a477537aab66e512a826f74d570397f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6883c1c1e9ef2fb0e6a40d7863f2d85b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b">find_key</a> (<a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, const void *suffix, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a6883c1c1e9ef2fb0e6a40d7863f2d85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Navigates a searching key-slice to one of the record in this page.  <a href="#a6883c1c1e9ef2fb0e6a40d7863f2d85b">More...</a><br /></td></tr>
<tr class="separator:a6883c1c1e9ef2fb0e6a40d7863f2d85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad27289df29e50bc9a55c3f3b53f876af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af">find_key_normalized</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> from_index, <a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> to_index, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ad27289df29e50bc9a55c3f3b53f876af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized version for 8 byte native integer search.  <a href="#ad27289df29e50bc9a55c3f3b53f876af">More...</a><br /></td></tr>
<tr class="separator:ad27289df29e50bc9a55c3f3b53f876af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec72735812ddc62ef4290a6fadfab13c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c">find_key_for_reserve</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> from_index, <a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> to_index, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, const void *suffix, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:aec72735812ddc62ef4290a6fadfab13c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is for the case we are looking for either the matching slot or the slot we will modify.  <a href="#aec72735812ddc62ef4290a6fadfab13c">More...</a><br /></td></tr>
<tr class="separator:aec72735812ddc62ef4290a6fadfab13c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8c6fe038e98df5df0f04ec2b2e91a1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a">find_key_for_snapshot</a> (<a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, const void *suffix, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ad8c6fe038e98df5df0f04ec2b2e91a1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This one is used for snapshot pages.  <a href="#ad8c6fe038e98df5df0f04ec2b2e91a1a">More...</a><br /></td></tr>
<tr class="separator:ad8c6fe038e98df5df0f04ec2b2e91a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1e8415916dbf458aee87572741890f"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) __attribute__((always_inline))</td></tr>
<tr class="separator:a2c1e8415916dbf458aee87572741890f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8af97da56967f8357bd330a57cd58476"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8af97da56967f8357bd330a57cd58476">get_record</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a8af97da56967f8357bd330a57cd58476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a357f4256ff48e1c5cefbee98d0a2dd2d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">get_record_payload</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) __attribute__((always_inline))</td></tr>
<tr class="separator:a357f4256ff48e1c5cefbee98d0a2dd2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cc9a759ee4e0b4c1041d64ae274a6dc"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0cc9a759ee4e0b4c1041d64ae274a6dc">get_record_payload</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a0cc9a759ee4e0b4c1041d64ae274a6dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c7383d33c5b6ddfcbab6b58ae80121"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">get_next_layer</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) __attribute__((always_inline))</td></tr>
<tr class="separator:a14c7383d33c5b6ddfcbab6b58ae80121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8cf45530f89c6c269a8574e648ce0e0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab8cf45530f89c6c269a8574e648ce0e0">get_next_layer</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:ab8cf45530f89c6c269a8574e648ce0e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acad0cd3a9c7bffd3ea0a478a21e5db1b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset) __attribute__((always_inline))</td></tr>
<tr class="memdesc:acad0cd3a9c7bffd3ea0a478a21e5db1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Offset versions.  <a href="#acad0cd3a9c7bffd3ea0a478a21e5db1b">More...</a><br /></td></tr>
<tr class="separator:acad0cd3a9c7bffd3ea0a478a21e5db1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bcb18d206fa77ccf24ef6097e89f1cc"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6bcb18d206fa77ccf24ef6097e89f1cc">get_record_from_offset</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset) const __attribute__((always_inline))</td></tr>
<tr class="separator:a6bcb18d206fa77ccf24ef6097e89f1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a327750cab5847980e336423128c42983"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) const __attribute__((always_inline))</td></tr>
<tr class="separator:a327750cab5847980e336423128c42983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba8deac13594e4b208f4905c7d894bf7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aba8deac13594e4b208f4905c7d894bf7">get_record_payload_from_offsets</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) __attribute__((always_inline))</td></tr>
<tr class="separator:aba8deac13594e4b208f4905c7d894bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8535da84525f0147643f5f827d83844"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">get_next_layer_from_offsets</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) __attribute__((always_inline))</td></tr>
<tr class="separator:ae8535da84525f0147643f5f827d83844"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad909b4004fb61cf846078c668d301246"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad909b4004fb61cf846078c668d301246">get_next_layer_from_offsets</a> (<a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) const __attribute__((always_inline))</td></tr>
<tr class="separator:ad909b4004fb61cf846078c668d301246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04113a783c1b0022d35e7e8d7eae02a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a04113a783c1b0022d35e7e8d7eae02a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42cee2c2a116efdd26420284e95a20f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a42cee2c2a116efdd26420284e95a20f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05c12e467155284686fe0a71dc617a2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) __attribute__((always_inline))</td></tr>
<tr class="separator:a05c12e467155284686fe0a71dc617a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9527f3829e488359a2d7d80318729bee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">get_offset_in_bytes</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a9527f3829e488359a2d7d80318729bee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bef5c88a00a3574b489d0259c5b49ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">get_owner_id</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) __attribute__((always_inline))</td></tr>
<tr class="separator:a0bef5c88a00a3574b489d0259c5b49ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa900861197b7e9b341cd73a6709832ed"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aa900861197b7e9b341cd73a6709832ed">get_owner_id</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:aa900861197b7e9b341cd73a6709832ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dc67e57eb2c90ffced75953dcef70fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a4dc67e57eb2c90ffced75953dcef70fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10a5e5c2b8774c5f2a96661dad217e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8">get_suffix_length</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:ad10a5e5c2b8774c5f2a96661dad217e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475fb985aa078dff7c627ce18538b52e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a475fb985aa078dff7c627ce18538b52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a634aa97d761122a7d7cd4cb7889d844f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f">get_payload_length</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a634aa97d761122a7d7cd4cb7889d844f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c0b897c662c4fdaaff4ac5b131da506"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506">get_max_payload_length</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const __attribute__((always_inline))</td></tr>
<tr class="separator:a9c0b897c662c4fdaaff4ac5b131da506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ce21d6a92abc597380b8385509464ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> new_index, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) const __attribute__((always_inline))</td></tr>
<tr class="separator:a6ce21d6a92abc597380b8385509464ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027ba66a84d7617e1f954edb3c3c4f56"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56">can_accomodate_snapshot</a> (<a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a027ba66a84d7617e1f954edb3c3c4f56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slightly different from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate()</a> as follows:  <a href="#a027ba66a84d7617e1f954edb3c3c4f56">More...</a><br /></td></tr>
<tr class="separator:a027ba66a84d7617e1f954edb3c3c4f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb8c5a7b49932a731872cdd8e71504d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">compare_key</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, const void *be_key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:aecb8c5a7b49932a731872cdd8e71504d"><td class="mdescLeft">&#160;</td><td class="mdescRight">actually this method should be renamed to equal_key...  <a href="#aecb8c5a7b49932a731872cdd8e71504d">More...</a><br /></td></tr>
<tr class="separator:aecb8c5a7b49932a731872cdd8e71504d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac16304e6fa2ee997cc6c897cb5792f47"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47">equal_key</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, const void *be_key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ac16304e6fa2ee997cc6c897cb5792f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">let's gradually migrate from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... ">compare_key()</a> to this.  <a href="#ac16304e6fa2ee997cc6c897cb5792f47">More...</a><br /></td></tr>
<tr class="separator:ac16304e6fa2ee997cc6c897cb5792f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bed0e3b1f6782710eb1e6891b850de7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">ltgt_key</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, const char *be_key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a0bed0e3b1f6782710eb1e6891b850de7"><td class="mdescLeft">&#160;</td><td class="mdescRight">compare the key.  <a href="#a0bed0e3b1f6782710eb1e6891b850de7">More...</a><br /></td></tr>
<tr class="separator:a0bed0e3b1f6782710eb1e6891b850de7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a231ba0760f76e9daba8bbcced965c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8">ltgt_key</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, const char *suffix, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a6a231ba0760f76e9daba8bbcced965c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overload to receive slice+suffix.  <a href="#a6a231ba0760f76e9daba8bbcced965c8">More...</a><br /></td></tr>
<tr class="separator:a6a231ba0760f76e9daba8bbcced965c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e978dad8a0a78a8b4fa49181d7352b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">will_conflict</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, const char *be_key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a23e978dad8a0a78a8b4fa49181d7352b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether inserting the key will cause creation of a new next layer.  <a href="#a23e978dad8a0a78a8b4fa49181d7352b">More...</a><br /></td></tr>
<tr class="separator:a23e978dad8a0a78a8b4fa49181d7352b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3039ec43fe6ced0332acec2ce9210aa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae3039ec43fe6ced0332acec2ce9210aa">will_conflict</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ae3039ec43fe6ced0332acec2ce9210aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overload to receive slice.  <a href="#ae3039ec43fe6ced0332acec2ce9210aa">More...</a><br /></td></tr>
<tr class="separator:ae3039ec43fe6ced0332acec2ce9210aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb37efdc8f717bb2b978861d8d1a772"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">will_contain_next_layer</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, const char *be_key, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:aecb37efdc8f717bb2b978861d8d1a772"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the record is a next-layer pointer that would contain the key.  <a href="#aecb37efdc8f717bb2b978861d8d1a772">More...</a><br /></td></tr>
<tr class="separator:aecb37efdc8f717bb2b978861d8d1a772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a571e2edc8ea6de6e92ea0e9110c0cc88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a571e2edc8ea6de6e92ea0e9110c0cc88">will_contain_next_layer</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) const __attribute__((always_inline))</td></tr>
<tr class="separator:a571e2edc8ea6de6e92ea0e9110c0cc88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ca15bf233b941d860679b88c8bc87f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f">reserve_record_space</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, const void *suffix, <a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count)</td></tr>
<tr class="memdesc:ac7ca15bf233b941d860679b88c8bc87f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs a new physical record that doesn't exist logically (delete bit on).  <a href="#ac7ca15bf233b941d860679b88c8bc87f">More...</a><br /></td></tr>
<tr class="separator:ac7ca15bf233b941d860679b88c8bc87f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be77538e13226dbc44134039be0dc73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73">reserve_initially_next_layer</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> &amp;pointer)</td></tr>
<tr class="memdesc:a2be77538e13226dbc44134039be0dc73"><td class="mdescLeft">&#160;</td><td class="mdescRight">For creating a record that is initially a next-layer.  <a href="#a2be77538e13226dbc44134039be0dc73">More...</a><br /></td></tr>
<tr class="separator:a2be77538e13226dbc44134039be0dc73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35973b360ff80fe5c939e971c373ee05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05">append_next_layer_snapshot</a> (<a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer)</td></tr>
<tr class="memdesc:a35973b360ff80fe5c939e971c373ee05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs a next layer pointer.  <a href="#a35973b360ff80fe5c939e971c373ee05">More...</a><br /></td></tr>
<tr class="separator:a35973b360ff80fe5c939e971c373ee05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb7f1ed0b7d15fc2f06d298e8a0260f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f">replace_next_layer_snapshot</a> (<a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer)</td></tr>
<tr class="memdesc:a4fb7f1ed0b7d15fc2f06d298e8a0260f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as above, except this is used to transform an existing record at end to a next layer pointer.  <a href="#a4fb7f1ed0b7d15fc2f06d298e8a0260f">More...</a><br /></td></tr>
<tr class="separator:a4fb7f1ed0b7d15fc2f06d298e8a0260f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e24c3f7398235571f6f0b0e013f1f23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23">initialize_layer_root</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> *copy_from, <a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> copy_index)</td></tr>
<tr class="memdesc:a9e24c3f7398235571f6f0b0e013f1f23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the initial record that will be the only record for a new root page.  <a href="#a9e24c3f7398235571f6f0b0e013f1f23">More...</a><br /></td></tr>
<tr class="separator:a9e24c3f7398235571f6f0b0e013f1f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd08567e3f74c11a90c599cbac45a24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24">release_pages_recursive</a> (const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;page_resolver, <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *batch)</td></tr>
<tr class="separator:abdd08567e3f74c11a90c599cbac45a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9eebf88265f64634f6fa42b7f89f581"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae9eebf88265f64634f6fa42b7f89f581">prefetch</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ae9eebf88265f64634f6fa42b7f89f581"><td class="mdescLeft">&#160;</td><td class="mdescRight">prefetch upto 256th bytes.  <a href="#ae9eebf88265f64634f6fa42b7f89f581">More...</a><br /></td></tr>
<tr class="separator:ae9eebf88265f64634f6fa42b7f89f581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a874518901eb38e4dc3b7b69afb69e5c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count) const __attribute__((always_inline))</td></tr>
<tr class="separator:a874518901eb38e4dc3b7b69afb69e5c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49c67f561e5748dbaf947cc22325a8a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5">try_expand_record_in_page_physical</a> (<a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, <a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> record_index)</td></tr>
<tr class="memdesc:a49c67f561e5748dbaf947cc22325a8a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">A physical-only method to expand a record within this page without any logical change.  <a href="#a49c67f561e5748dbaf947cc22325a8a5">More...</a><br /></td></tr>
<tr class="separator:a49c67f561e5748dbaf947cc22325a8a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a867f696df8da3aeeab003663a439a535"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535">initialize_as_layer_root_physical</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id, <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> *parent, <a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> parent_index)</td></tr>
<tr class="memdesc:a867f696df8da3aeeab003663a439a535"><td class="mdescLeft">&#160;</td><td class="mdescRight">A physical-only method to initialize this page as a volatile page of a layer-root pointed from the given parent record.  <a href="#a867f696df8da3aeeab003663a439a535">More...</a><br /></td></tr>
<tr class="separator:a867f696df8da3aeeab003663a439a535"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab905ff02e9f747f00d44e72ffc16f546"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546">track_moved_record</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *old_address, <a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">xct::WriteXctAccess</a> *write_set)</td></tr>
<tr class="separator:ab905ff02e9f747f00d44e72ffc16f546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1429b13cd5efb94c7b4735bf84087818"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818">track_moved_record_next_layer</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *old_address)</td></tr>
<tr class="memdesc:a1429b13cd5efb94c7b4735bf84087818"><td class="mdescLeft">&#160;</td><td class="mdescRight">This one further tracks it to next layer.  <a href="#a1429b13cd5efb94c7b4735bf84087818">More...</a><br /></td></tr>
<tr class="separator:a1429b13cd5efb94c7b4735bf84087818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1781897598dfbd41a6d1291d0c5dc060"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060">verify_slot_lengthes</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) const </td></tr>
<tr class="separator:a1781897598dfbd41a6d1291d0c5dc060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484b8322fccade3d1f77ac2abaa3a825"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825">assert_entries</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a484b8322fccade3d1f77ac2abaa3a825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564d9a348f851874c7a9c1d933e0b2e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9">assert_entries_impl</a> () const </td></tr>
<tr class="memdesc:a564d9a348f851874c7a9c1d933e0b2e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">defined in <a class="el" href="masstree__page__debug_8cpp.html">masstree_page_debug.cpp</a>.  <a href="#a564d9a348f851874c7a9c1d933e0b2e9">More...</a><br /></td></tr>
<tr class="separator:a564d9a348f851874c7a9c1d933e0b2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">foedus::storage::masstree::MasstreePage</a></td></tr>
<tr class="memitem:a2b0cd6e79e07f9b2241d0123ffe00ad2 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a> ()=delete</td></tr>
<tr class="separator:a2b0cd6e79e07f9b2241d0123ffe00ad2 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc0b1666fb47bd7a328eba9ef7b653d inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aadc0b1666fb47bd7a328eba9ef7b653d">MasstreePage</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a> &amp;other)=delete</td></tr>
<tr class="separator:aadc0b1666fb47bd7a328eba9ef7b653d inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac970fa7e96f6ea827ce28fdc1ac0d2c3 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ac970fa7e96f6ea827ce28fdc1ac0d2c3">operator=</a> (const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a> &amp;other)=delete</td></tr>
<tr class="separator:ac970fa7e96f6ea827ce28fdc1ac0d2c3 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ab7bbce35893143d2aac437e526d0e inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a> ()</td></tr>
<tr class="separator:ab5ab7bbce35893143d2aac437e526d0e inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1166bec8146a171da2457ef10bbffed inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#af1166bec8146a171da2457ef10bbffed">header</a> () const </td></tr>
<tr class="separator:af1166bec8146a171da2457ef10bbffed inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f8883172f7ee3c48a1609df044c3964 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8f8883172f7ee3c48a1609df044c3964">get_volatile_page_id</a> () const </td></tr>
<tr class="separator:a8f8883172f7ee3c48a1609df044c3964 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d297bf42db27de5e38943e057e97b9 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a39d297bf42db27de5e38943e057e97b9">get_snapshot_page_id</a> () const </td></tr>
<tr class="separator:a39d297bf42db27de5e38943e057e97b9 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a6f55a5a59bcab9631bbb879da689ec inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec">is_border</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a1a6f55a5a59bcab9631bbb879da689ec inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14cdcef87b3c0a6ef431df9d06a1a663 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663">is_empty_range</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a14cdcef87b3c0a6ef431df9d06a1a663 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">An empty-range page, either intermediate or border, never has any entries.  <a href="#a14cdcef87b3c0a6ef431df9d06a1a663">More...</a><br /></td></tr>
<tr class="separator:a14cdcef87b3c0a6ef431df9d06a1a663 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f922c414bf3a2faaf7e879b2277f0b inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">get_low_fence</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a30f922c414bf3a2faaf7e879b2277f0b inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb6557473edd899373ed9399b455be20 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">get_high_fence</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:abb6557473edd899373ed9399b455be20 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e32e13485c83c100d1153e23e96f88 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">is_high_fence_supremum</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:aa0e32e13485c83c100d1153e23e96f88 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabaf06ccbf57e3c511b1c34f07efd780 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aabaf06ccbf57e3c511b1c34f07efd780">is_low_fence_infimum</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:aabaf06ccbf57e3c511b1c34f07efd780 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb63e0ba2340f1b7e21bae579e0cf1b4 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#afb63e0ba2340f1b7e21bae579e0cf1b4">is_layer_root</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:afb63e0ba2340f1b7e21bae579e0cf1b4 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44cc8d18dc9077ae2310667e88ed5b7c inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a44cc8d18dc9077ae2310667e88ed5b7c">get_foster_fence</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a44cc8d18dc9077ae2310667e88ed5b7c inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a698b417f5e89daf68ebd78044222bb23 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23">is_foster_minor_null</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a698b417f5e89daf68ebd78044222bb23 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9d09469e106d14513932f3aebeef97 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97">is_foster_major_null</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a7a9d09469e106d14513932f3aebeef97 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32653a16ddca213c94560652e9388dd5 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5">get_foster_minor</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a32653a16ddca213c94560652e9388dd5 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27d301fad7d4d340cd2d6255dc330607 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607">get_foster_major</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a27d301fad7d4d340cd2d6255dc330607 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38e3cb12f6db6351ac0fc89369868fb9 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a38e3cb12f6db6351ac0fc89369868fb9">set_foster_twin</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> minor, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> major)</td></tr>
<tr class="separator:a38e3cb12f6db6351ac0fc89369868fb9 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c32af21fe03698567d80feab20a353b inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a9c32af21fe03698567d80feab20a353b">install_foster_twin</a> (<a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> minor, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> major, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> foster_fence)</td></tr>
<tr class="separator:a9c32af21fe03698567d80feab20a353b inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8830e2b301b1bdd3f2e16d9b047d79 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79">within_fences</a> (<a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) const __attribute__((always_inline))</td></tr>
<tr class="separator:a0f8830e2b301b1bdd3f2e16d9b047d79 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f1aa3c62852944d653777574af1602 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602">within_foster_minor</a> (<a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) const __attribute__((always_inline))</td></tr>
<tr class="separator:a73f1aa3c62852944d653777574af1602 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ea09e3e65a44845fb3ab5be08e84553 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a6ea09e3e65a44845fb3ab5be08e84553">within_foster_major</a> (<a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) const __attribute__((always_inline))</td></tr>
<tr class="separator:a6ea09e3e65a44845fb3ab5be08e84553 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfe53cdc69964e52901556b1e8d9de9e inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">has_foster_child</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:abfe53cdc69964e52901556b1e8d9de9e inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b54c43dec6f8ba15472a25760a3ed07 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a0b54c43dec6f8ba15472a25760a3ed07 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte...  <a href="#a0b54c43dec6f8ba15472a25760a3ed07">More...</a><br /></td></tr>
<tr class="separator:a0b54c43dec6f8ba15472a25760a3ed07 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab55e48873dcf5700871a035c65bfa588 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab55e48873dcf5700871a035c65bfa588">get_btree_level</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ab55e48873dcf5700871a035c65bfa588 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">used only in masstree.  <a href="#ab55e48873dcf5700871a035c65bfa588">More...</a><br /></td></tr>
<tr class="separator:ab55e48873dcf5700871a035c65bfa588 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab3ec4aa9b6e43a606e1555c5c74cec inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a3ab3ec4aa9b6e43a606e1555c5c74cec inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight"><em>physical</em> key count (those keys might be deleted) in this page.  <a href="#a3ab3ec4aa9b6e43a606e1555c5c74cec">More...</a><br /></td></tr>
<tr class="separator:a3ab3ec4aa9b6e43a606e1555c5c74cec inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fb331a72c86d72deb59c415e6b9b79c inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">set_key_count</a> (<a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> count) __attribute__((always_inline))</td></tr>
<tr class="separator:a3fb331a72c86d72deb59c415e6b9b79c inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36324bf7f670205988934070f3f162c8 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a36324bf7f670205988934070f3f162c8">increment_key_count</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a36324bf7f670205988934070f3f162c8 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3260be02451d5017a2301854454dd203 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203">prefetch_general</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a3260be02451d5017a2301854454dd203 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">prefetch upto keys/separators, whether this page is border or interior.  <a href="#a3260be02451d5017a2301854454dd203">More...</a><br /></td></tr>
<tr class="separator:a3260be02451d5017a2301854454dd203 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b27750b62fcc70c1677b0fceac983cf inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf">get_version</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a3b27750b62fcc70c1677b0fceac983cf inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d1f3c36f9a67c0489831a05aa48cad6 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2d1f3c36f9a67c0489831a05aa48cad6">get_version</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a2d1f3c36f9a67c0489831a05aa48cad6 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc553596fb9e1dc115e3aaccf3352f9 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9">get_version_address</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:abbc553596fb9e1dc115e3aaccf3352f9 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4edd339dc36c265a4c78e58235314f57 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a4edd339dc36c265a4c78e58235314f57">get_version_address</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a4edd339dc36c265a4c78e58235314f57 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2084911eccaf9e483ce8875f8cccd98c inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">xct::McsWwLock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2084911eccaf9e483ce8875f8cccd98c">get_lock_address</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a2084911eccaf9e483ce8875f8cccd98c inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16a2c06a304514be7b99fb6c884e7e9b inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a16a2c06a304514be7b99fb6c884e7e9b inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc22d21883e15b87cd5ff6b6ec513c35 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:adc22d21883e15b87cd5ff6b6ec513c35 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec1302bec7fe39ef71cf9ac0ab6b364a inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a">is_retired</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:aec1302bec7fe39ef71cf9ac0ab6b364a inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3171dd821766bcffba70946a4e44856 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad3171dd821766bcffba70946a4e44856">set_moved</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:ad3171dd821766bcffba70946a4e44856 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5263d631cad896c0494597018d72a8f inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad5263d631cad896c0494597018d72a8f">set_retired</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:ad5263d631cad896c0494597018d72a8f inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d24e70c0a141db733ff45411b5a161e inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e">release_pages_recursive_common</a> (const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;page_resolver, <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *batch)</td></tr>
<tr class="separator:a0d24e70c0a141db733ff45411b5a161e inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab889473973eae831407d49b9fb40fee2 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab889473973eae831407d49b9fb40fee2">set_foster_major_offset_unsafe</a> (<a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset) __attribute__((always_inline))</td></tr>
<tr class="memdesc:ab889473973eae831407d49b9fb40fee2 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">As the name suggests, this should be used only by composer.  <a href="#ab889473973eae831407d49b9fb40fee2">More...</a><br /></td></tr>
<tr class="separator:ab889473973eae831407d49b9fb40fee2 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a4e2ea33eef842e4013c91392e6838 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ae5a4e2ea33eef842e4013c91392e6838">set_high_fence_unsafe</a> (<a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence) __attribute__((always_inline))</td></tr>
<tr class="memdesc:ae5a4e2ea33eef842e4013c91392e6838 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">As the name suggests, this should be used only by composer.  <a href="#ae5a4e2ea33eef842e4013c91392e6838">More...</a><br /></td></tr>
<tr class="separator:ae5a4e2ea33eef842e4013c91392e6838 inherit pub_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a68797699a249ca9320a08038d1cdabbc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a> (<a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length)</td></tr>
<tr class="memdesc:a68797699a249ca9320a08038d1cdabbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns minimal physical_record_length_ for the given remainder/payload length.  <a href="#a68797699a249ca9320a08038d1cdabbc">More...</a><br /></td></tr>
<tr class="separator:a68797699a249ca9320a08038d1cdabbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ca875114e346439b950c703ab3586b5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">required_data_space</a> (<a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length, <a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length)</td></tr>
<tr class="memdesc:a4ca875114e346439b950c703ab3586b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the byte size of required contiguous space in data_ to insert a new record of the given remainder/payload length.  <a href="#a4ca875114e346439b950c703ab3586b5">More...</a><br /></td></tr>
<tr class="separator:a4ca875114e346439b950c703ab3586b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a2982228ebc3a26b4a64c54ba77317824"><td class="memItemLeft" align="right" valign="top">struct&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2982228ebc3a26b4a64c54ba77317824">SplitBorder</a></td></tr>
<tr class="separator:a2982228ebc3a26b4a64c54ba77317824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c23d249173f1a2733f78eb4fc5899f"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a20c23d249173f1a2733f78eb4fc5899f">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;v)</td></tr>
<tr class="memdesc:a20c23d249173f1a2733f78eb4fc5899f"><td class="mdescLeft">&#160;</td><td class="mdescRight">defined in <a class="el" href="masstree__page__debug_8cpp.html">masstree_page_debug.cpp</a>.  <a href="#a20c23d249173f1a2733f78eb4fc5899f">More...</a><br /></td></tr>
<tr class="separator:a20c23d249173f1a2733f78eb4fc5899f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">foedus::storage::masstree::MasstreePage</a></td></tr>
<tr class="memitem:aa95b56b38e523e345e5fb0283e43d65e inherit pro_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e">initialize_volatile_common</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> storage_id, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id, <a class="el" href="group__STORAGE.html#ga14e35f7fbe4bc18276fde8e8ba460f5b">PageType</a> page_type, uint8_t layer, uint8_t level, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence)</td></tr>
<tr class="separator:aa95b56b38e523e345e5fb0283e43d65e inherit pro_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab41ee4ce455995cd703dac3990442081 inherit pro_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab41ee4ce455995cd703dac3990442081">initialize_snapshot_common</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> storage_id, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id, <a class="el" href="group__STORAGE.html#ga14e35f7fbe4bc18276fde8e8ba460f5b">PageType</a> page_type, uint8_t layer, uint8_t level, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence, <a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence)</td></tr>
<tr class="separator:ab41ee4ce455995cd703dac3990442081 inherit pro_methods_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">foedus::storage::masstree::MasstreePage</a></td></tr>
<tr class="memitem:a168db13e03be3f699e4e409ceea88d76 inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a></td></tr>
<tr class="separator:a168db13e03be3f699e4e409ceea88d76 inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409bd08120ef1f54839bbdefd521dd8a inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">low_fence_</a></td></tr>
<tr class="memdesc:a409bd08120ef1f54839bbdefd521dd8a inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inclusive low fence of this page.  <a href="#a409bd08120ef1f54839bbdefd521dd8a">More...</a><br /></td></tr>
<tr class="separator:a409bd08120ef1f54839bbdefd521dd8a inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa50900a4544302f5056f62360f8d861e inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a></td></tr>
<tr class="memdesc:aa50900a4544302f5056f62360f8d861e inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inclusive high fence of this page.  <a href="#aa50900a4544302f5056f62360f8d861e">More...</a><br /></td></tr>
<tr class="separator:aa50900a4544302f5056f62360f8d861e inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6112ec9230a2769039e8cfe21f3faf inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foster_fence_</a></td></tr>
<tr class="memdesc:a8a6112ec9230a2769039e8cfe21f3faf inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inclusive low_fence of foster child.  <a href="#a8a6112ec9230a2769039e8cfe21f3faf">More...</a><br /></td></tr>
<tr class="separator:a8a6112ec9230a2769039e8cfe21f3faf inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a827faad5f063cf4bf9188f17bbf582b9 inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a> [2]</td></tr>
<tr class="memdesc:a827faad5f063cf4bf9188f17bbf582b9 inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="mdescLeft">&#160;</td><td class="mdescRight">Points to foster children, or tentative child pages.  <a href="#a827faad5f063cf4bf9188f17bbf582b9">More...</a><br /></td></tr>
<tr class="separator:a827faad5f063cf4bf9188f17bbf582b9 inherit pro_attribs_classfoedus_1_1storage_1_1masstree_1_1MasstreePage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a8f7a0dbbbc0b3684cb349f551638a19d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">foedus::storage::masstree::MasstreeBorderPage::MatchType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used in <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html" title="return value for find_key_for_reserve(). ">FindKeyForReserveResult</a>. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795"></a>kNotFound&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50"></a>kExactMatchLocalRecord&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763"></a>kExactMatchLayerPointer&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d"></a>kConflictingLocalRecord&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00585">585</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                 {</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a> = 0,</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a> = 1,</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a> = 2,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a> = 3,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  };</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00587">masstree_page_impl.hpp:587</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLayerPointer</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00588">masstree_page_impl.hpp:588</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">foedus::storage::masstree::MasstreeBorderPage::kConflictingLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00589">masstree_page_impl.hpp:589</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">foedus::storage::masstree::MasstreeBorderPage::kNotFound</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00586">masstree_page_impl.hpp:586</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a32d92c1f8e858d5cd407be8846f450a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af2aa89486715069e08f189ad389bef5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a35973b360ff80fe5c939e971c373ee05"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::append_next_layer_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a>&#160;</td>
          <td class="paramname"><em>initial_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>pointer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Installs a next layer pointer. </p>
<p>This is used only from snapshot composer, so no race. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01417">1417</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01570">can_accomodate()</a>, <a class="el" href="storage__id_8hpp_source.html#l00211">foedus::storage::VolatilePagePointer::clear()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00643">get_new_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00782">get_next_layer_from_offsets()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00537">foedus::storage::masstree::MasstreeBorderPage::Slot::original_offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00532">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00149">foedus::storage::masstree::MasstreePage::set_key_count()</a>, <a class="el" href="xct__id_8hpp_source.html#l01030">foedus::xct::XctId::set_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00805">set_slice()</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00480">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::unused_</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                               {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_);  <span class="comment">// this is used only from snapshot composer</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> kRemainder = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(index, kRemainder, <span class="keyword">sizeof</span>(DualPagePointer)));</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(kRemainder, <span class="keyword">sizeof</span>(DualPagePointer));</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> offset = next_offset_;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(index, slice);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// This is in snapshot page, so no worry on race.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(index);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  slot-&gt;lengthes_.components.offset_ = offset;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  slot-&gt;lengthes_.components.unused_ = 0;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  slot-&gt;lengthes_.components.physical_record_length_ = record_size;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  slot-&gt;lengthes_.components.payload_length_ = <span class="keyword">sizeof</span>(DualPagePointer);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  slot-&gt;original_physical_record_length_ = record_size;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  slot-&gt;remainder_length_ = kRemainder;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  slot-&gt;original_offset_ = offset;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  slot-&gt;tid_.xct_id_ = initial_owner_id;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  slot-&gt;tid_.xct_id_.set_next_layer();</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  DualPagePointer* dual_pointer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">get_next_layer_from_offsets</a>(offset, kRemainder);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  dual_pointer-&gt;volatile_pointer_.clear();</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  dual_pointer-&gt;snapshot_pointer_ = pointer;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">set_key_count</a>(index + 1U);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a05c12e467155284686fe0a71dc617a2e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">foedus::storage::masstree::MasstreeBorderPage::set_slice</a></div><div class="ttdeci">void set_slice(SlotIndex index, KeySlice slice) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00805">masstree_page_impl.hpp:805</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8a9c60937a3287ce6b73ea104a29d999"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">foedus::storage::masstree::MasstreeBorderPage::get_new_slot</a></div><div class="ttdeci">Slot * get_new_slot(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00643">masstree_page_impl.hpp:643</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6ce21d6a92abc597380b8385509464ed"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">foedus::storage::masstree::MasstreeBorderPage::can_accomodate</a></div><div class="ttdeci">bool can_accomodate(SlotIndex new_index, KeyLength remainder_length, PayloadLength payload_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01570">masstree_page_impl.hpp:1570</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ae8535da84525f0147643f5f827d83844"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">foedus::storage::masstree::MasstreeBorderPage::get_next_layer_from_offsets</a></div><div class="ttdeci">DualPagePointer * get_next_layer_from_offsets(DataOffset record_offset, KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00782">masstree_page_impl.hpp:782</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3fb331a72c86d72deb59c415e6b9b79c"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">foedus::storage::masstree::MasstreePage::set_key_count</a></div><div class="ttdeci">void set_key_count(SlotIndex count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00149">masstree_page_impl.hpp:149</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a35973b360ff80fe5c939e971c373ee05_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a35973b360ff80fe5c939e971c373ee05_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a35973b360ff80fe5c939e971c373ee05_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a35973b360ff80fe5c939e971c373ee05_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed" title="foedus::storage::masstree\l::MasstreeBorderPage::can\l_accomodate" alt="" coords="271,87,453,143"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="831,57,1005,113"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="815,211,1021,253"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29" title="foedus::storage::Volatile\lPagePointer::clear" alt="" coords="281,218,443,259"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_new_slot" alt="" coords="552,204,731,260"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer_from_offsets" alt="" coords="273,335,451,391"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="275,415,449,457"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c" title="foedus::storage::masstree\l::MasstreePage::set_key_count" alt="" coords="259,481,465,522"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1XctId.html#abe3bc94e31351c2fa965df411af532a1" title="foedus::xct::XctId\l::set_next_layer" alt="" coords="301,546,423,587"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e" title="foedus::storage::masstree\l::MasstreeBorderPage::set_slice" alt="" coords="256,611,468,653"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai..." alt="" coords="538,57,745,113"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41" title="Returns usable data space in bytes. " alt="" coords="516,138,767,179"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1069,123,1243,179"/>
<area shape="rect" id="node6" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1297,76,1457,103"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1291,130,1464,171"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="544,335,739,391"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="829,335,1007,391"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1PageHeader.html#a407bbd604662534963c7fc8f08acc898" title="foedus::storage::PageHeader\l::set_key_count" alt="" coords="546,481,737,522"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a484b8322fccade3d1f77ac2abaa3a825"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::assert_entries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00988">988</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>.</p>

<p>Referenced by <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                                      {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9">assert_entries_impl</a>();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a564d9a348f851874c7a9c1d933e0b2e9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9">foedus::storage::masstree::MasstreeBorderPage::assert_entries_impl</a></div><div class="ttdeci">void assert_entries_impl() const </div><div class="ttdoc">defined in masstree_page_debug.cpp. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__debug_8cpp_source.html#l00114">masstree_page_debug.cpp:114</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="249,447,445,503"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="515,35,693,76"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1257,527,1464,568"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="498,741,710,783"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="769,429,948,485"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="510,349,698,405"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length" alt="" coords="515,479,693,535"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="515,559,693,615"/>
<area shape="rect" id="node17" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1026,621,1186,647"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="493,239,715,280"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="769,71,948,127"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="763,5,955,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="1021,5,1191,47"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1260,5,1461,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1003,371,1209,412"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="797,312,920,353"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1019,535,1193,576"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="772,559,945,615"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="769,231,948,287"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="769,151,948,207"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a484b8322fccade3d1f77ac2abaa3a825_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="249,13,423,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a564d9a348f851874c7a9c1d933e0b2e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::assert_entries_impl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>defined in <a class="el" href="masstree__page__debug_8cpp.html">masstree_page_debug.cpp</a>. </p>

<p>Definition at line <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">114</a> of file <a class="el" href="masstree__page__debug_8cpp_source.html">masstree_page_debug.cpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00832">get_payload_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00823">get_suffix_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00827">get_suffix_length_aligned()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00168">foedus::storage::masstree::MasstreePage::is_locked()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l00988">assert_entries()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                   {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// the following logic holds only when this page is locked</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a> || <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">struct </span>Sorter {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">explicit</span> Sorter(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>* target) : target_(target) {}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordtype">bool</span> operator() (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> left, <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> right) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> left_slice = target_-&gt;get_slice(left);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> right_slice = target_-&gt;get_slice(right);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">if</span> (left_slice &lt; right_slice) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (left_slice == right_slice) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">return</span> target_-&gt;get_remainder_length(left) &lt; target_-&gt;get_remainder_length(right);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>* target_;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  };</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> order[<a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>];</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    order[i] = i;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  std::sort(order, order + key_count, Sorter(<span class="keyword">this</span>));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// in snapshot page, all entries should be fully sorted</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(order[i] == i);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 1; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> pre = order[i - 1];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> cur = order[i];</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> pre_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(pre);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> cur_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(cur);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pre_slice &lt;= cur_slice);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordflow">if</span> (pre_slice == cur_slice) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> pre_klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(pre);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> cur_klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(cur);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pre_klen &lt; cur_klen);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pre_klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// also check the padding between key suffix and payload</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>) {  <span class="comment">// this can&#39;t be checked in volatile pages that are being changed</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i)) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8">get_suffix_length</a>(i);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length_aligned = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a>(i);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">if</span> (suffix_length &gt; 0 &amp;&amp; suffix_length != suffix_length_aligned) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(suffix_length_aligned &gt; suffix_length);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> pos = suffix_length; pos &lt; suffix_length_aligned; ++pos) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;          <span class="comment">// must be zero-padded</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i)[pos] == 0);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f">get_payload_length</a>(i);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length_aligned = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">if</span> (payload_length &gt; 0 &amp;&amp; payload_length != payload_length_aligned) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_length_aligned &gt; payload_length);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> pos = payload_length; pos &lt; payload_length_aligned; ++pos) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;          <span class="comment">// must be zero-padded</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i)[suffix_length_aligned + pos] == 0);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga9d05e904033c0bba7113cdafb43d6610"><div class="ttname"><a href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">foedus::storage::masstree::PayloadLength</a></div><div class="ttdeci">uint16_t PayloadLength</div><div class="ttdoc">Represents a byte-length of a payload in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00092">masstree_id.hpp:92</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a634aa97d761122a7d7cd4cb7889d844f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f">foedus::storage::masstree::MasstreeBorderPage::get_payload_length</a></div><div class="ttdeci">PayloadLength get_payload_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00832">masstree_page_impl.hpp:832</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ad10a5e5c2b8774c5f2a96661dad217e8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8">foedus::storage::masstree::MasstreeBorderPage::get_suffix_length</a></div><div class="ttdeci">KeyLength get_suffix_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00823">masstree_page_impl.hpp:823</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a32d92c1f8e858d5cd407be8846f450a3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage</a></div><div class="ttdeci">MasstreeBorderPage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a475fb985aa078dff7c627ce18538b52e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">foedus::storage::masstree::MasstreeBorderPage::get_suffix_length_aligned</a></div><div class="ttdeci">KeyLength get_suffix_length_aligned(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00827">masstree_page_impl.hpp:827</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="782,142,942,169"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="266,385,454,441"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1013,240,1220,282"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="525,648,704,704"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="249,480,471,522"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="525,240,704,296"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="254,598,466,639"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length" alt="" coords="271,305,449,361"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="271,174,449,230"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="271,703,449,744"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="759,430,965,471"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="553,371,676,412"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="525,568,704,624"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="525,488,704,544"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="775,254,949,295"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="528,160,701,216"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="519,728,711,770"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="777,728,947,770"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1016,728,1217,770"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a564d9a348f851874c7a9c1d933e0b2e9_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="249,5,445,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="493,13,667,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a477537aab66e512a826f74d570397f41"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> foedus::storage::masstree::MasstreeBorderPage::available_space </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns usable data space in bytes. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00660">660</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01570">can_accomodate()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01585">can_accomodate_snapshot()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                                              {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    uint16_t consumed = next_offset_ + <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() * <span class="keyword">sizeof</span>(Slot);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(consumed &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (consumed &gt; <span class="keyword">sizeof</span>(data_)) {  <span class="comment">// just to be conservative on release build</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(data_) - consumed;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="304,5,511,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a477537aab66e512a826f74d570397f41_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed" title="foedus::storage::masstree\l::MasstreeBorderPage::can\l_accomodate" alt="" coords="324,121,505,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56" title="Slightly different from can_accomodate() as follows: " alt="" coords="324,201,505,257"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="304,281,525,337"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="574,5,775,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="824,111,997,153"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="574,136,775,192"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="573,216,776,272"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6ce21d6a92abc597380b8385509464ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::can_accomodate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>new_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01570">1570</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00660">available_space()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__id_8hpp_source.html#l00075">foedus::storage::masstree::kMaxKeyLength</a>, <a class="el" href="masstree__id_8hpp_source.html#l00098">foedus::storage::masstree::kMaxPayloadLength</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00687">required_data_space()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01417">append_next_layer_snapshot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">reserve_initially_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>, and <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                                     {</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keywordflow">if</span> (new_index == 0) {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a> || remainder_length == <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_count &lt;= <a class="code" href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">kMaxPayloadLength</a>);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_index &gt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> required = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">required_data_space</a>(remainder_length, payload_count);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> available = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a>();</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="keywordflow">return</span> required &lt;= available;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a477537aab66e512a826f74d570397f41"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">foedus::storage::masstree::MasstreeBorderPage::available_space</a></div><div class="ttdeci">DataOffset available_space() const </div><div class="ttdoc">Returns usable data space in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00660">masstree_page_impl.hpp:660</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4ca875114e346439b950c703ab3586b5"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">foedus::storage::masstree::MasstreeBorderPage::required_data_space</a></div><div class="ttdeci">static DataOffset required_data_space(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns the byte size of required contiguous space in data_ to insert a new record of the given remai...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00687">masstree_page_impl.hpp:687</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga453ffcac369fa68b5eb5d489e6cdca4f"><div class="ttname"><a href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">foedus::storage::masstree::kMaxPayloadLength</a></div><div class="ttdeci">const PayloadLength kMaxPayloadLength</div><div class="ttdoc">Max length of a payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00098">masstree_id.hpp:98</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41" title="Returns usable data space in bytes. " alt="" coords="235,5,485,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai..." alt="" coords="257,71,463,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="533,5,740,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="550,71,723,127"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="788,103,961,159"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1016,57,1176,83"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1009,111,1183,152"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6ce21d6a92abc597380b8385509464ed_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="235,5,437,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="235,85,437,141"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="485,158,659,199"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="235,216,437,272"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a027ba66a84d7617e1f954edb3c3c4f56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::can_accomodate_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slightly different from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate()</a> as follows: </p>
<ul>
<li>No race, so no need to receive new_index. It just uses <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. ">get_key_count()</a>. </li>
<li>Always guarantees that the payload can be later expanded to sizeof(DualPagePointer). <dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer...">replace_next_layer_snapshot()</a> </dd>
<dd>
MasstreeComposeContext::append_border() </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01585">1585</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00660">available_space()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00687">required_data_space()</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>
<div class="fragment"><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                                     {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> new_index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordflow">if</span> (new_index == 0) {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_index &gt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> adjusted_payload = std::max&lt;PayloadLength&gt;(payload_count, <span class="keyword">sizeof</span>(DualPagePointer));</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> required = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">required_data_space</a>(remainder_length, adjusted_payload);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> available = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a>();</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">return</span> required &lt;= available;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga9d05e904033c0bba7113cdafb43d6610"><div class="ttname"><a href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">foedus::storage::masstree::PayloadLength</a></div><div class="ttdeci">uint16_t PayloadLength</div><div class="ttdoc">Represents a byte-length of a payload in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00092">masstree_id.hpp:92</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a477537aab66e512a826f74d570397f41"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">foedus::storage::masstree::MasstreeBorderPage::available_space</a></div><div class="ttdeci">DataOffset available_space() const </div><div class="ttdoc">Returns usable data space in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00660">masstree_page_impl.hpp:660</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4ca875114e346439b950c703ab3586b5"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">foedus::storage::masstree::MasstreeBorderPage::required_data_space</a></div><div class="ttdeci">static DataOffset required_data_space(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns the byte size of required contiguous space in data_ to insert a new record of the given remai...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00687">masstree_page_impl.hpp:687</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a027ba66a84d7617e1f954edb3c3c4f56_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a027ba66a84d7617e1f954edb3c3c4f56_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a027ba66a84d7617e1f954edb3c3c4f56_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a027ba66a84d7617e1f954edb3c3c4f56_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41" title="Returns usable data space in bytes. " alt="" coords="235,5,485,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="533,31,740,72"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai..." alt="" coords="257,122,463,178"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="550,122,723,178"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="788,154,961,210"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1016,107,1176,134"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1009,161,1183,203"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aecb8c5a7b49932a731872cdd8e71504d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::compare_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>be_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>actually this method should be renamed to equal_key... </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01600">1600</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00144">foedus::storage::masstree::MasstreePage::get_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00279">foedus::storage::masstree::slice_layer()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01624">equal_key()</a>.</p>
<div class="fragment"><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                              {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keywordflow">if</span> (remainder != klen) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">if</span> (slice != rec_slice) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordflow">if</span> (remainder &gt; <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">return</span> std::memcmp(</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      reinterpret_cast&lt;const char*&gt;(be_key) + (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() + 1) * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>),</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index),</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0b54c43dec6f8ba15472a25760a3ed07"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">foedus::storage::masstree::MasstreePage::get_layer</a></div><div class="ttdeci">uint8_t get_layer() const __attribute__((always_inline))</div><div class="ttdoc">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00144">masstree_page_impl.hpp:144</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabdb6a706258be601e621e58653bf528e"><div class="ttname"><a href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">foedus::storage::masstree::slice_layer</a></div><div class="ttdeci">KeySlice slice_layer(const void *be_bytes, KeyLength key_length, Layer current_layer)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00279">masstree_id.hpp:279</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="315,27,490,69"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="292,93,513,134"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="573,165,752,221"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="297,210,509,251"/>
<area shape="rect" id="node10" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="316,275,489,317"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="573,5,752,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="573,85,752,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="812,133,1019,174"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1067,133,1273,174"/>
<area shape="rect" id="node11" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="561,261,764,302"/>
<area shape="rect" id="node12" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="829,290,1002,331"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb8c5a7b49932a731872cdd8e71504d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47" title="let&#39;s gradually migrate from compare_key() to this. " alt="" coords="292,5,511,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a04113a783c1b0022d35e7e8d7eae02a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">796</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="xct__id_8hpp_source.html#l01042">foedus::xct::XctId::is_next_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, <a class="el" href="masstree__storage__debug_8cpp_source.html#l00075">foedus::storage::masstree::MasstreeStoragePimpl::debugout_single_thread_recurse()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01198">find_key_for_reserve()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01256">find_key_for_snapshot()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00384">foedus::storage::masstree::MasstreeStoragePimpl::follow_layer()</a>, <a class="el" href="masstree__storage__debug_8cpp_source.html#l00170">foedus::storage::masstree::MasstreeStoragePimpl::hcc_reset_all_temperature_stat_recurse()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01641">ltgt_key()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__storage__peek_8cpp_source.html#l00061">foedus::storage::masstree::MasstreeStoragePimpl::peek_volatile_page_boundaries_next_layer()</a>, <a class="el" href="masstree__storage__prefetch_8cpp_source.html#l00051">foedus::storage::masstree::MasstreeStoragePimpl::prefetch_pages_normalized_recurse()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00266">release_pages_recursive()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01447">replace_next_layer_snapshot()</a>, <a class="el" href="masstree__grow__impl_8cpp_source.html#l00167">foedus::storage::masstree::GrowNonFirstLayerRoot::run()</a>, <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>, <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01723">will_contain_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                                                                {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">is_next_layer</a>();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_a8735d5698123b41317b3c5970ffd1e50"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">foedus::xct::RwLockableXctId::xct_id_</a></div><div class="ttdeci">XctId xct_id_</div><div class="ttdoc">the second 64bit: Persistent status part of TID. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01137">xct_id.hpp:1137</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_aa3d33ca4fe97b735ce59594993a1dd94"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">foedus::xct::XctId::is_next_layer</a></div><div class="ttdeci">bool is_next_layer() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01042">xct_id.hpp:1042</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a66cbce3b9c68797f9e070b950cc581c1"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a></div><div class="ttdeci">xct::RwLockableXctId tid_</div><div class="ttdoc">TID of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00504">masstree_page_impl.hpp:504</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="241,5,448,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="283,71,406,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="496,5,703,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a04113a783c1b0022d35e7e8d7eae02a8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="248,89,444,145"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="800,96,973,138"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="259,170,433,240"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="242,527,450,568"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="792,436,981,492"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="515,454,704,510"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="523,585,696,641"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="256,265,436,321"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="256,593,436,649"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="259,345,433,401"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="255,724,437,795"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="257,877,435,933"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="243,958,449,999"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="259,1023,433,1064"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="241,1126,451,1196"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="252,1292,440,1363"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="245,1412,447,1468"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="245,1492,447,1548"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="249,1572,443,1614"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="253,1638,439,1694"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a571e2edc8ea6de6e92ea0e9110c0cc88" title="foedus::storage::masstree\l::MasstreeBorderPage::will\l_contain_next_layer" alt="" coords="257,1718,435,1774"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="511,89,707,145"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adb503d118f53a417bf11f9e486bd3cf7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread_follow" alt="" coords="506,169,713,225"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a41e664c7035f1b89121ef06678a71386" title="These are defined in masstree_storage_debug.cpp. " alt="" coords="800,169,973,225"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1053,436,1227,492"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="787,1146,986,1187"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="800,752,973,808"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="800,516,973,572"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="779,880,994,922"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="771,978,1002,1019"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="793,596,980,652"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="768,676,1005,718"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="523,300,696,356"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="781,362,993,403"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="779,296,995,338"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a89828c1df02cadd8a38824f24e2adef9" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_follow" alt="" coords="518,666,701,736"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="523,1241,696,1297"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="523,761,696,817"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="515,841,704,897"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="523,921,696,977"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="516,1001,703,1057"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="515,1081,704,1137"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="512,1161,707,1217"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="505,1321,714,1377"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="515,1481,703,1537"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="523,1401,696,1457"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="520,1561,699,1617"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="797,1638,976,1694"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="499,1716,720,1772"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac16304e6fa2ee997cc6c897cb5792f47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::equal_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>be_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>let's gradually migrate from <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... ">compare_key()</a> to this. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01624">1624</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l01600">compare_key()</a>.</p>
<div class="fragment"><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                              {</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">compare_key</a>(index, be_key, key_length);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aecb8c5a7b49932a731872cdd8e71504d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">foedus::storage::masstree::MasstreeBorderPage::compare_key</a></div><div class="ttdeci">bool compare_key(SlotIndex index, const void *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">actually this method should be renamed to equal_key... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01600">masstree_page_impl.hpp:1600</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac16304e6fa2ee997cc6c897cb5792f47_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac16304e6fa2ee997cc6c897cb5792f47_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac16304e6fa2ee997cc6c897cb5792f47_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac16304e6fa2ee997cc6c897cb5792f47_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="272,151,511,193"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="582,27,757,69"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="559,93,780,134"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="840,165,1019,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="563,210,775,251"/>
<area shape="rect" id="node11" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="583,275,756,317"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="840,5,1019,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="840,85,1019,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1079,133,1285,174"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1333,133,1540,174"/>
<area shape="rect" id="node12" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="828,261,1031,302"/>
<area shape="rect" id="node13" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1095,290,1269,331"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6883c1c1e9ef2fb0e6a40d7863f2d85b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> foedus::storage::masstree::MasstreeBorderPage::find_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Navigates a searching key-slice to one of the record in this page. </p>
<dl class="section return"><dt>Returns</dt><dd>index of key found in this page, or kBorderPageMaxSlots if not found. </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">1120</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00075">foedus::storage::masstree::kMaxKeyLength</a>, <a class="el" href="compiler_8hpp_source.html#l00103">LIKELY</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00937">prefetch_additional_if_needed()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                             {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_count &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(key_count);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// one slice might be used for up to 10 keys, length 0 to 8 and pointer to next layer.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">// then we are looking for length 0-8 only.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="comment">// no suffix nor next layer, so just compare length. if not match, continue</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// then we are only looking for length&gt;8.</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i)) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">// as it points to next layer, no need to check suffix. We are sure this is it.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="comment">// so far we don&#39;t delete layers, so in this case the record is always valid.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="comment">// now, our key is &gt; 8 bytes and we found some local record.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// length 0-8, surely not a match. skip.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="comment">// compare suffix.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* record_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">if</span> (std::memcmp(record_suffix, suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;          <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="comment">// The record has &gt; 8 bytes key of the same slice. it must be the only such record in this</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="comment">// page because otherwise we must have created a next layer!</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">break</span>;  <span class="comment">// no more check needed</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a874518901eb38e4dc3b7b69afb69e5c0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">foedus::storage::masstree::MasstreeBorderPage::prefetch_additional_if_needed</a></div><div class="ttdeci">void prefetch_additional_if_needed(SlotIndex key_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00937">masstree_page_impl.hpp:937</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__COMPILER_html_gad10e2a9bf230cc6fdd98a6c70958ef81"><div class="ttname"><a href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)        </div><div class="ttdoc">Hints that x is highly likely true. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00103">compiler.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="278,57,466,113"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1012,263,1219,304"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="261,289,483,331"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="531,122,709,178"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="266,413,478,455"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="269,479,475,535"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="757,169,964,211"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="559,5,681,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="531,282,709,338"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="531,202,709,258"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="534,487,706,528"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="775,487,947,528"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6883c1c1e9ef2fb0e6a40d7863f2d85b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="269,258,443,314"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="523,510,712,566"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="261,510,451,566"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="518,5,717,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="531,71,704,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="531,151,704,207"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="510,232,725,273"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="502,297,733,339"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="524,363,711,419"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="499,444,736,485"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="784,510,957,566"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd" title="Resolves a &quot;moved&quot; record. " alt="" coords="1005,510,1179,566"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1227,510,1413,566"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1461,517,1657,559"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1705,517,1925,559"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1975,484,2183,525"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1973,549,2184,591"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="2232,484,2427,525"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2475,517,2669,559"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2717,517,2880,559"/>
<area shape="rect" id="node21" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2232,549,2427,591"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec72735812ddc62ef4290a6fadfab13c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">MasstreeBorderPage::FindKeyForReserveResult</a> foedus::storage::masstree::MasstreeBorderPage::find_key_for_reserve </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>from_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>to_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is for the case we are looking for either the matching slot or the slot we will modify. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01198">1198</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00589">kConflictingLocalRecord</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00588">kExactMatchLayerPointer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00587">kExactMatchLocalRecord</a>, <a class="el" href="masstree__id_8hpp_source.html#l00075">foedus::storage::masstree::kMaxKeyLength</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00586">kNotFound</a>, <a class="el" href="compiler_8hpp_source.html#l00103">LIKELY</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00937">prefetch_additional_if_needed()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00412">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record()</a>, and <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                             {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(to_index &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(from_index &lt;= to_index);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">if</span> (from_index == 0) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(to_index);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = from_index; i &lt; to_index; ++i) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = from_index; i &lt; to_index; ++i) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> next_layer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">if</span> (next_layer) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(klen &gt; <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>));</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="comment">// now, both the searching key and this key are more than 8 bytes.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="comment">// whether the key really matches or not, this IS the slot we are looking for.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="comment">// Either 1) the keys really match, or 2) we will make this record point to next layer.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* record_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <span class="keywordflow">if</span> (klen == remainder &amp;&amp;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        std::memcmp(record_suffix, suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="comment">// case 1)</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="comment">// case 2)</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a>);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">return</span> FindKeyForReserveResult(<a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a874518901eb38e4dc3b7b69afb69e5c0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">foedus::storage::masstree::MasstreeBorderPage::prefetch_additional_if_needed</a></div><div class="ttdeci">void prefetch_additional_if_needed(SlotIndex key_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00937">masstree_page_impl.hpp:937</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00587">masstree_page_impl.hpp:587</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLayerPointer</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00588">masstree_page_impl.hpp:588</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">foedus::storage::masstree::MasstreeBorderPage::kConflictingLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00589">masstree_page_impl.hpp:589</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">foedus::storage::masstree::MasstreeBorderPage::kNotFound</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00586">masstree_page_impl.hpp:586</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__COMPILER_html_gad10e2a9bf230cc6fdd98a6c70958ef81"><div class="ttname"><a href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)        </div><div class="ttdoc">Hints that x is highly likely true. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00103">compiler.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="250,33,438,89"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="233,175,455,216"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="503,266,681,322"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="238,292,450,334"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="241,358,447,414"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="729,194,936,235"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="531,40,653,82"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="984,194,1191,235"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="503,106,681,162"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="503,186,681,242"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="506,366,678,407"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="747,366,919,407"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aec72735812ddc62ef4290a6fadfab13c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="233,30,407,86"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="233,111,407,152"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="457,5,669,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="455,71,671,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad8c6fe038e98df5df0f04ec2b2e91a1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">MasstreeBorderPage::FindKeyForReserveResult</a> foedus::storage::masstree::MasstreeBorderPage::find_key_for_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This one is used for snapshot pages. </p>
<p>Because keys are fully sorted in snapshot pages, this returns the index of the first record whose key is strictly larger than given key (key_count if not exists). </p><dl class="section pre"><dt>Precondition</dt><dd>header_.snapshot </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01256">1256</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00589">kConflictingLocalRecord</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00588">kExactMatchLayerPointer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00587">kExactMatchLocalRecord</a>, <a class="el" href="masstree__id_8hpp_source.html#l00075">foedus::storage::masstree::kMaxKeyLength</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00586">kNotFound</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>
<div class="fragment"><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                             {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// Remember, unlike other cases above, there are no worry on concurrency.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">if</span> (rec_slice &lt; slice) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rec_slice &gt; slice) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="comment">// as keys are sorted in snapshot page, &quot;i&quot; is the place the slice would be inserted.</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(rec_slice == slice);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (klen &lt; remainder) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// same as &quot;rec_slice &lt; slice&quot; case</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);  <span class="comment">// same as &quot;rec_slice &gt; slice&quot; case</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="keywordflow">if</span> (rec_slice &lt; slice) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rec_slice &gt; slice) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="comment">// as keys are sorted in snapshot page, &quot;i&quot; is the place the slice would be inserted.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(rec_slice == slice);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i)) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordflow">if</span> (klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// same as &quot;rec_slice &lt; slice&quot; case</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">// see the comment in MasstreeComposerContext::PathLevel.</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">// Even if the record is larger than the current key, we consider it &quot;matched&quot; and cause</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="comment">// next layer creation, but keeping the larger record in a dummy original page in nexy layer.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* record_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keywordflow">if</span> (klen == remainder &amp;&amp;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        std::memcmp(record_suffix, suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">return</span> FindKeyForReserveResult(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">return</span> FindKeyForReserveResult(key_count, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00587">masstree_page_impl.hpp:587</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLayerPointer</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00588">masstree_page_impl.hpp:588</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">foedus::storage::masstree::MasstreeBorderPage::kConflictingLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00589">masstree_page_impl.hpp:589</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">foedus::storage::masstree::MasstreeBorderPage::kNotFound</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00586">masstree_page_impl.hpp:586</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad8c6fe038e98df5df0f04ec2b2e91a1a_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad8c6fe038e98df5df0f04ec2b2e91a1a_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad8c6fe038e98df5df0f04ec2b2e91a1a_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad8c6fe038e98df5df0f04ec2b2e91a1a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="250,128,438,184"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="984,34,1191,75"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="233,223,455,264"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="503,25,681,81"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="238,288,450,330"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="729,99,936,140"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="531,106,653,147"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="503,222,681,278"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="503,302,681,358"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad27289df29e50bc9a55c3f3b53f876af"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> foedus::storage::masstree::MasstreeBorderPage::find_key_normalized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>from_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>to_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specialized version for 8 byte native integer search. </p>
<p>Because such a key never goes to second layer, this is much simpler. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01179">1179</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00937">prefetch_additional_if_needed()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00515">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                        {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(to_index &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(from_index &lt;= to_index);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordflow">if</span> (from_index == 0) {  <span class="comment">// we don&#39;t need prefetching in second time</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(to_index);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = from_index; i &lt; to_index; ++i) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(slice == rec_slice &amp;&amp; klen == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>))) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a874518901eb38e4dc3b7b69afb69e5c0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">foedus::storage::masstree::MasstreeBorderPage::prefetch_additional_if_needed</a></div><div class="ttdeci">void prefetch_additional_if_needed(SlotIndex key_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00937">masstree_page_impl.hpp:937</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="250,5,429,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="233,86,445,127"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="236,152,443,208"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="493,13,700,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="748,13,955,54"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="511,159,683,201"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="765,159,937,201"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad27289df29e50bc9a55c3f3b53f876af_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="236,285,415,341"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="233,565,417,621"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="476,5,649,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="476,85,649,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="468,165,657,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="476,245,649,301"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="469,325,656,381"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="468,405,657,461"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="465,485,660,541"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="724,13,923,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="737,85,910,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="716,253,931,294"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="708,333,939,374"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="476,565,649,621"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="476,645,649,701"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9c0b897c662c4fdaaff4ac5b131da506"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> foedus::storage::masstree::MasstreeBorderPage::get_max_payload_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the maximum payload length the physical record allows. </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00838">838</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00553">foedus::storage::masstree::MasstreeBorderPage::Slot::get_max_payload_peek()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">initialize_as_layer_root_physical()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00661">foedus::storage::masstree::MasstreeStoragePimpl::insert_general()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00412">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00515">foedus::storage::masstree::MasstreeStoragePimpl::reserve_record_normalized()</a>, <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00711">foedus::storage::masstree::MasstreeStoragePimpl::upsert_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                                                                            {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076">get_max_payload_peek</a>();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a447049b6067b0d1be460802f1b6a7076"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076">foedus::storage::masstree::MasstreeBorderPage::Slot::get_max_payload_peek</a></div><div class="ttdeci">PayloadLength get_max_payload_peek() const __attribute__((always_inline))</div><div class="ttdoc">This might be affected by concurrent threads. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00553">masstree_page_impl.hpp:553</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076" title="This might be affected by concurrent threads. " alt="" coords="244,20,427,76"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="232,101,439,142"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0" title="foedus::storage::masstree\l::MasstreeBorderPage::Slot\l::get_aligned_suffix_length" alt="" coords="499,20,681,76"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="741,20,915,76"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="969,5,1129,32"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="963,57,1136,98"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="487,101,693,142"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9c0b897c662c4fdaaff4ac5b131da506_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="239,45,446,101"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="523,52,696,93"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="256,285,429,341"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="256,205,429,261"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="251,445,435,501"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="232,125,453,181"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="256,365,429,421"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="503,223,715,264"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="523,358,696,414"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="501,289,717,331"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="523,443,696,499"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a9c60937a3287ce6b73ea104a29d999"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* foedus::storage::masstree::MasstreeBorderPage::get_new_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00643">643</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01417">append_next_layer_snapshot()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00345">foedus::storage::masstree::SplitBorder::migrate_records()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">reserve_initially_next_layer()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>.</p>
<div class="fragment"><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                                                           {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - index - 1;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="232,13,439,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8a9c60937a3287ce6b73ea104a29d999_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="234,5,437,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="232,85,439,141"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#af12f943f013c35e9b4a549afd4075920" title="Subroutine to construct a new page. " alt="" coords="249,165,422,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="489,231,691,287"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="489,311,691,367"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="487,84,693,140"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="741,238,915,279"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="503,165,677,206"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a14c7383d33c5b6ddfcbab6b58ae80121"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* foedus::storage::masstree::MasstreeBorderPage::get_next_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00750">750</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">get_record_payload()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__debug_8cpp_source.html#l00075">foedus::storage::masstree::MasstreeStoragePimpl::debugout_single_thread_recurse()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00384">foedus::storage::masstree::MasstreeStoragePimpl::follow_layer()</a>, <a class="el" href="masstree__storage__debug_8cpp_source.html#l00170">foedus::storage::masstree::MasstreeStoragePimpl::hcc_reset_all_temperature_stat_recurse()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">initialize_as_layer_root_physical()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__storage__peek_8cpp_source.html#l00061">foedus::storage::masstree::MasstreeStoragePimpl::peek_volatile_page_boundaries_next_layer()</a>, <a class="el" href="masstree__storage__prefetch_8cpp_source.html#l00051">foedus::storage::masstree::MasstreeStoragePimpl::prefetch_pages_normalized_recurse()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00266">release_pages_recursive()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01447">replace_next_layer_snapshot()</a>, <a class="el" href="masstree__grow__impl_8cpp_source.html#l00167">foedus::storage::masstree::GrowNonFirstLayerRoot::run()</a>, <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>, and <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>.</p>
<div class="fragment"><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                                                 {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>DualPagePointer*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">get_record_payload</a>(index));</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a357f4256ff48e1c5cefbee98d0a2dd2d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">foedus::storage::masstree::MasstreeBorderPage::get_record_payload</a></div><div class="ttdeci">char * get_record_payload(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00740">masstree_page_impl.hpp:740</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="232,125,411,181"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="459,93,680,134"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="480,165,659,221"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="728,5,907,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="728,85,907,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="955,123,1161,165"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1209,123,1416,165"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="728,165,907,221"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="731,245,904,301"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="978,220,1138,247"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="971,271,1145,313"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14c7383d33c5b6ddfcbab6b58ae80121_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="250,109,423,179"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="250,583,423,639"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="245,663,428,734"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="233,759,440,815"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="513,799,687,841"/>
<area shape="rect" id="node24" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="250,890,423,931"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="232,955,441,1026"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="243,1050,431,1121"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="235,1169,438,1225"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="235,1249,438,1305"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="239,1330,434,1371"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="242,1420,431,1476"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="243,1500,430,1556"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adb503d118f53a417bf11f9e486bd3cf7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread_follow" alt="" coords="497,116,703,172"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a41e664c7035f1b89121ef06678a71386" title="These are defined in masstree_storage_debug.cpp. " alt="" coords="791,5,964,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a9d2f5eb65777d851bee6809acf6fe153" title="A super&#45;expensive and single&#45;thread only debugging feature to write out gigantic human&#45;readable texts..." alt="" coords="1044,5,1235,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="513,339,687,395"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="513,583,687,639"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="778,86,977,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="791,152,964,208"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="791,232,964,288"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="770,313,985,354"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="762,378,993,419"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="784,444,971,500"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="759,525,996,566"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="771,590,983,631"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="769,655,985,697"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a89828c1df02cadd8a38824f24e2adef9" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_follow" alt="" coords="509,663,691,734"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0fe6a82d90f30d4b9724009ba2fc40ae" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="771,721,983,777"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad23c8139c379dac6b0a1c07a52debd62" title="Resets all volatile pages&#39; temperature stat to be zero in this storage. " alt="" coords="1048,721,1231,777"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="495,897,705,953"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99" title="Checks the volatile pages of this storage to give hints to decide page boundary keys. " alt="" coords="791,897,964,953"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="506,977,694,1033"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="513,1057,687,1113"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="786,977,969,1033"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="511,1169,689,1225"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="791,1079,964,1121"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::release_pages_recursive" alt="" coords="785,1169,970,1225"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="1047,1065,1232,1135"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="1283,1079,1477,1121"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1525,1079,1699,1121"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="505,1420,695,1476"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="791,1420,964,1476"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd" title="Resolves a &quot;moved&quot; record. " alt="" coords="1053,1420,1226,1476"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1287,1420,1473,1476"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="788,1500,967,1556"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="489,1577,711,1633"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1053,1500,1226,1556"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1293,1500,1467,1556"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab8cf45530f89c6c269a8574e648ce0e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* foedus::storage::masstree::MasstreeBorderPage::get_next_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00753">753</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">get_record_payload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                                                                             {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>DualPagePointer*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">get_record_payload</a>(index));</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a357f4256ff48e1c5cefbee98d0a2dd2d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">foedus::storage::masstree::MasstreeBorderPage::get_record_payload</a></div><div class="ttdeci">char * get_record_payload(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00740">masstree_page_impl.hpp:740</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab8cf45530f89c6c269a8574e648ce0e0_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab8cf45530f89c6c269a8574e648ce0e0_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab8cf45530f89c6c269a8574e648ce0e0_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab8cf45530f89c6c269a8574e648ce0e0_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="232,125,411,181"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="459,93,680,134"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="480,165,659,221"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="728,5,907,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="728,85,907,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="955,123,1161,165"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1209,123,1416,165"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="728,165,907,221"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="731,245,904,301"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="978,220,1138,247"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="971,271,1145,313"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae8535da84525f0147643f5f827d83844"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* foedus::storage::masstree::MasstreeBorderPage::get_next_layer_from_offsets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>record_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00782">782</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00768">get_record_payload_from_offsets()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01417">append_next_layer_snapshot()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">reserve_initially_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                              {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordtype">char</span>* payload = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a>(record_offset, remainder_length);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>DualPagePointer*<span class="keyword">&gt;</span>(payload);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a327750cab5847980e336423128c42983"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets</a></div><div class="ttdeci">const char * get_record_payload_from_offsets(DataOffset record_offset, KeyLength remainder_length) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00768">masstree_page_impl.hpp:768</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="232,45,427,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="475,5,653,61"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="477,85,651,141"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="708,71,868,97"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="701,122,875,163"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae8535da84525f0147643f5f827d83844_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="232,5,435,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="233,85,434,141"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="483,93,656,134"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad909b4004fb61cf846078c668d301246"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* foedus::storage::masstree::MasstreeBorderPage::get_next_layer_from_offsets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>record_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00788">788</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00768">get_record_payload_from_offsets()</a>.</p>
<div class="fragment"><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                                    {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* payload = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a>(record_offset, remainder_length);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>DualPagePointer*<span class="keyword">&gt;</span>(payload);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a327750cab5847980e336423128c42983"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets</a></div><div class="ttdeci">const char * get_record_payload_from_offsets(DataOffset record_offset, KeyLength remainder_length) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00768">masstree_page_impl.hpp:768</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad909b4004fb61cf846078c668d301246_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad909b4004fb61cf846078c668d301246_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad909b4004fb61cf846078c668d301246_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad909b4004fb61cf846078c668d301246_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="232,45,427,101"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="475,5,653,61"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="477,85,651,141"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="708,71,868,97"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="701,122,875,163"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a938979fd6b5ebe6bbfbec5d2a756ae05"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> foedus::storage::masstree::MasstreeBorderPage::get_next_offset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00625">625</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="masstree__split__impl_8cpp_source.html#l00039">foedus::storage::masstree::SplitBorder::run()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;{ <span class="keywordflow">return</span> next_offset_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a938979fd6b5ebe6bbfbec5d2a756ae05_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a938979fd6b5ebe6bbfbec5d2a756ae05_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a938979fd6b5ebe6bbfbec5d2a756ae05_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a938979fd6b5ebe6bbfbec5d2a756ae05_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="256,5,429,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="232,71,453,127"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="501,79,675,120"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9527f3829e488359a2d7d80318729bee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> foedus::storage::masstree::MasstreeBorderPage::get_offset_in_bytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00809">809</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, and <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                                                                      {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a77c8283e11827f8a0064351c279d7072"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a></div><div class="ttdeci">SlotLengthUnion lengthes_</div><div class="ttdoc">Stores mutable length information of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00510">masstree_page_impl.hpp:510</a></div></div>
<div class="ttc" id="group__MASSTREE_html_af40fa90a8daca72e5c02e0ff9ac49a63"><div class="ttname"><a href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a></div><div class="ttdeci">SlotLengthPart components</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00492">masstree_page_impl.hpp:492</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="group__MASSTREE_html_a92e63ea650be68ac58e709d195c36ad4"><div class="ttname"><a href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a></div><div class="ttdeci">DataOffset offset_</div><div class="ttdoc">Byte offset in data_ where this record starts. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00472">masstree_page_impl.hpp:472</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="232,13,439,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="487,13,693,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9527f3829e488359a2d7d80318729bee_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="232,515,453,556"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="1073,1607,1246,1648"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="531,1063,710,1119"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="1065,82,1254,138"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1312,23,1501,79"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="793,123,1001,164"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="1069,474,1249,530"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="531,1143,711,1199"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="501,1285,740,1327"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="517,5,724,47"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="523,539,719,595"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="1072,213,1247,269"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="808,961,987,1017"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="1056,1366,1263,1422"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="794,1063,1001,1119"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="1073,1446,1246,1502"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="1073,1526,1246,1582"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="1320,263,1493,319"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="1073,671,1246,741"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1073,394,1246,450"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="1068,847,1251,917"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1320,947,1493,988"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="1055,941,1264,1012"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1065,1036,1253,1107"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="1058,1155,1261,1211"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="1058,1235,1261,1291"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="1062,605,1257,647"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1066,766,1253,822"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1320,503,1493,559"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1320,583,1493,639"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1569,1272,1767,1313"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1581,1526,1755,1582"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1581,1359,1755,1415"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1561,529,1775,571"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1553,383,1783,424"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1575,449,1761,505"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1549,317,1787,359"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1581,23,1755,79"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1320,1265,1493,1321"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1320,1526,1493,1582"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1312,1446,1501,1502"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="1553,252,1783,293"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1571,171,1765,227"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47" title="let&#39;s gradually migrate from compare_key() to this. " alt="" coords="788,1347,1007,1388"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="799,539,995,595"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="1320,103,1493,159"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="1320,423,1493,479"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="1320,183,1493,239"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="1320,343,1493,399"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0bef5c88a00a3574b489d0259c5b49ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* foedus::storage::masstree::MasstreeBorderPage::get_owner_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00813">813</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00384">foedus::storage::masstree::MasstreeStoragePimpl::follow_layer()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00304">foedus::storage::masstree::SplitBorder::lock_existing_records()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__record__location_8cpp_source.html#l00027">foedus::storage::masstree::RecordLocation::populate_logical()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00645">foedus::storage::masstree::MasstreeStoragePimpl::register_record_write_log()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01447">replace_next_layer_snapshot()</a>, <a class="el" href="masstree__grow__impl_8cpp_source.html#l00167">foedus::storage::masstree::GrowNonFirstLayerRoot::run()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00039">foedus::storage::masstree::SplitBorder::run()</a>, <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>, and <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>.</p>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                                                                  {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a66cbce3b9c68797f9e070b950cc581c1"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a></div><div class="ttdeci">xct::RwLockableXctId tid_</div><div class="ttdoc">TID of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00504">masstree_page_impl.hpp:504</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="232,13,439,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="487,13,693,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bef5c88a00a3574b489d0259c5b49ad_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="249,405,422,461"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="232,1429,439,1485"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="788,1667,961,1709"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ae4789d8489571fa435c97a03b4f93619" title="Subroutine to lock existing records in target_. " alt="" coords="246,1611,425,1667"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="511,1590,684,1631"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="249,1691,422,1733"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="247,565,424,621"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="248,951,423,1007"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="234,1757,437,1813"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="238,1838,433,1879"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="241,1928,430,1984"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="242,2008,429,2064"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="511,223,684,279"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="511,405,684,461"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1057,479,1256,521"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1070,749,1243,805"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="788,5,961,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1049,1119,1264,1161"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1041,1317,1272,1358"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="781,565,968,621"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="756,289,993,330"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="769,354,981,395"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="767,419,983,461"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="494,1429,701,1485"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="508,992,687,1048"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="505,565,689,621"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="788,872,961,928"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="788,952,961,1008"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="780,1032,969,1088"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="788,1112,961,1168"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="781,1309,968,1365"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="780,1389,969,1445"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="777,792,972,848"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="788,485,961,541"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="788,645,961,701"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="511,485,684,541"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="511,1144,684,1200"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="511,645,684,701"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="511,1349,684,1405"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="511,759,684,815"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#af263fb1494c7ac6a5dbfd28b926ede3b" title="foedus::storage::masstree\l::MasstreeCursor::delete_record" alt="" coords="771,1243,979,1285"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#ab8b1919cb195dd063be409f772b36630" title="foedus::storage::masstree\l::MasstreeCursor::overwrite_record" alt="" coords="763,1521,986,1562"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a496370a645284f8578875529c6eacb0f" title="foedus::storage::masstree\l::MasstreeCursor::overwrite\l_record_primitive" alt="" coords="785,1587,965,1643"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="759,726,990,767"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="503,1928,692,1984"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="788,1928,961,1984"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="785,2008,964,2064"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="487,2085,708,2141"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1070,2008,1243,2064"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa900861197b7e9b341cd73a6709832ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* foedus::storage::masstree::MasstreeBorderPage::get_owner_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00816">816</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>.</p>
<div class="fragment"><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                                                                              {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a66cbce3b9c68797f9e070b950cc581c1"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a></div><div class="ttdeci">xct::RwLockableXctId tid_</div><div class="ttdoc">TID of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00504">masstree_page_impl.hpp:504</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aa900861197b7e9b341cd73a6709832ed_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aa900861197b7e9b341cd73a6709832ed_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aa900861197b7e9b341cd73a6709832ed_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aa900861197b7e9b341cd73a6709832ed_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="232,13,439,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="487,13,693,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a634aa97d761122a7d7cd4cb7889d844f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> foedus::storage::masstree::MasstreeBorderPage::get_payload_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the current logical payload length, which might change later. </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00832">832</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00806">foedus::storage::masstree::MasstreeStoragePimpl::increment_general()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00772">foedus::storage::masstree::MasstreeStoragePimpl::overwrite_general()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00599">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_general()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00625">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_part_general()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00711">foedus::storage::masstree::MasstreeStoragePimpl::upsert_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                                                         {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a77c8283e11827f8a0064351c279d7072"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a></div><div class="ttdeci">SlotLengthUnion lengthes_</div><div class="ttdoc">Stores mutable length information of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00510">masstree_page_impl.hpp:510</a></div></div>
<div class="ttc" id="group__MASSTREE_html_a2ef17017ef81f095de4a76150bc3c015"><div class="ttname"><a href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a></div><div class="ttdeci">PayloadLength payload_length_</div><div class="ttdoc">Byte length of the payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00487">masstree_page_impl.hpp:487</a></div></div>
<div class="ttc" id="group__MASSTREE_html_af40fa90a8daca72e5c02e0ff9ac49a63"><div class="ttname"><a href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a></div><div class="ttdeci">SlotLengthPart components</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00492">masstree_page_impl.hpp:492</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="232,13,439,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="487,13,693,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a634aa97d761122a7d7cd4cb7889d844f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="232,39,428,95"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="243,184,417,240"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="243,429,417,470"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="243,495,417,551"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="243,720,417,776"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="243,916,417,972"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="243,1149,417,1205"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="497,5,693,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="790,13,963,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="479,86,710,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="476,151,713,193"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="497,217,692,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#ab8b1919cb195dd063be409f772b36630" title="foedus::storage::masstree\l::MasstreeCursor::overwrite_record" alt="" coords="483,298,706,339"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a496370a645284f8578875529c6eacb0f" title="foedus::storage::masstree\l::MasstreeCursor::overwrite\l_record_primitive" alt="" coords="505,364,685,420"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="761,510,992,551"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="501,495,688,551"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="501,575,688,631"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="500,655,689,711"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="777,761,976,802"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="508,785,681,841"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="790,895,963,951"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="508,916,681,972"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="508,996,681,1052"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="500,1076,689,1132"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="487,1157,703,1198"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="508,1223,681,1279"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2c1e8415916dbf458aee87572741890f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* foedus::storage::masstree::MasstreeBorderPage::get_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">732</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00809">get_offset_in_bytes()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01600">compare_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01198">find_key_for_reserve()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01256">find_key_for_snapshot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">get_record_payload()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01641">ltgt_key()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00645">foedus::storage::masstree::MasstreeStoragePimpl::register_record_write_log()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                                  {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">get_offset_in_bytes</a>(index));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9527f3829e488359a2d7d80318729bee"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">foedus::storage::masstree::MasstreeBorderPage::get_offset_in_bytes</a></div><div class="ttdeci">DataOffset get_offset_in_bytes(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00809">masstree_page_impl.hpp:809</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="275,5,453,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="275,85,453,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="501,13,708,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="756,13,963,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2c1e8415916dbf458aee87572741890f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="296,16,492,72"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="275,1634,513,1675"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="567,1517,775,1558"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1085,1509,1275,1565"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="838,1599,1027,1655"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="843,64,1023,120"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="304,1700,484,1756"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="305,968,483,1024"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="846,1197,1019,1238"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="291,1781,497,1822"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="845,275,1020,331"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="573,5,769,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1093,71,1267,113"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47" title="let&#39;s gradually migrate from compare_key() to this. " alt="" coords="561,1634,780,1675"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1093,691,1267,747"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1342,1386,1541,1427"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1355,1103,1528,1159"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1355,1244,1528,1300"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1334,486,1549,527"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1326,551,1557,593"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1348,617,1535,673"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1323,698,1560,739"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1355,1509,1528,1565"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1093,217,1267,273"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1335,261,1547,302"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1333,189,1549,230"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="581,792,760,848"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="829,144,1036,200"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="567,224,774,280"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="846,1393,1019,1449"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="846,1313,1019,1369"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="1093,537,1267,593"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="846,551,1019,622"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="846,405,1019,461"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="841,646,1024,717"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="828,741,1037,811"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="839,917,1027,987"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="831,1036,1034,1092"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="831,1116,1034,1172"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="835,486,1030,527"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="839,836,1026,892"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1093,1379,1267,1435"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1093,1168,1267,1224"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1085,1248,1275,1304"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="1326,421,1557,462"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="1093,297,1267,353"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="1093,377,1267,433"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="1093,137,1267,193"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="1093,457,1267,513"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8af97da56967f8357bd330a57cd58476"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* foedus::storage::masstree::MasstreeBorderPage::get_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00736">736</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00809">get_offset_in_bytes()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>
<div class="fragment"><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                                              {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">get_offset_in_bytes</a>(index));</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9527f3829e488359a2d7d80318729bee"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">foedus::storage::masstree::MasstreeBorderPage::get_offset_in_bytes</a></div><div class="ttdeci">DataOffset get_offset_in_bytes(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00809">masstree_page_impl.hpp:809</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8af97da56967f8357bd330a57cd58476_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8af97da56967f8357bd330a57cd58476_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8af97da56967f8357bd330a57cd58476_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8af97da56967f8357bd330a57cd58476_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="275,5,453,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="275,85,453,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="501,13,708,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="756,13,963,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acad0cd3a9c7bffd3ea0a478a21e5db1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>record_offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Offset versions. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">758</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00768">get_record_payload_from_offsets()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00345">foedus::storage::masstree::SplitBorder::migrate_records()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                                                                       {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset % 8 == 0);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset &lt; <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">return</span> data_ + record_offset;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_acad0cd3a9c7bffd3ea0a478a21e5db1b_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_acad0cd3a9c7bffd3ea0a478a21e5db1b_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_acad0cd3a9c7bffd3ea0a478a21e5db1b_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_acad0cd3a9c7bffd3ea0a478a21e5db1b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="232,691,453,733"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="794,339,1001,395"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="523,216,718,272"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#af12f943f013c35e9b4a549afd4075920" title="Subroutine to construct a new page. " alt="" coords="256,1132,429,1188"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="242,151,443,207"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="232,281,453,337"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="523,419,719,475"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="501,550,740,591"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="793,1366,1001,1407"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1312,1351,1501,1407"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="1065,1440,1254,1496"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="1069,389,1249,445"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="531,717,711,773"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="531,864,710,920"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="1073,681,1246,722"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="517,798,724,839"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="1072,600,1247,656"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="799,419,995,475"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1320,331,1493,373"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47" title="let&#39;s gradually migrate from compare_key() to this. " alt="" coords="788,550,1007,591"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1320,920,1493,976"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1569,1006,1767,1047"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1581,1248,1755,1304"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1581,1104,1755,1160"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1561,690,1775,731"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1553,854,1783,895"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1575,771,1761,827"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1549,925,1787,966"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1581,1351,1755,1407"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1320,520,1493,576"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1562,583,1774,625"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1560,495,1776,537"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="808,869,987,925"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="1056,469,1263,525"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="811,1067,984,1123"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="1320,1257,1493,1313"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="1320,840,1493,896"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="1073,878,1246,949"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1073,797,1246,853"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="1068,973,1251,1043"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="1055,1067,1264,1138"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="1320,600,1493,656"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="1320,680,1493,736"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="1320,440,1493,496"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="1320,760,1493,816"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer_from_offsets" alt="" coords="808,85,987,141"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="1058,5,1261,61"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="1059,85,1260,141"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="534,1483,707,1525"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6bcb18d206fa77ccf24ef6097e89f1cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>record_offset</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00763">763</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>
<div class="fragment"><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                                                                                   {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset % 8 == 0);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset &lt; <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> data_ + record_offset;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  }</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a357f4256ff48e1c5cefbee98d0a2dd2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* foedus::storage::masstree::MasstreeBorderPage::get_record_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">740</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00827">get_suffix_length_aligned()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l00750">get_next_layer()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00806">foedus::storage::masstree::MasstreeStoragePimpl::increment_general()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">initialize_as_layer_root_physical()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00599">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_general()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00625">foedus::storage::masstree::MasstreeStoragePimpl::retrieve_part_general()</a>.</p>
<div class="fragment"><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                                          {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a>(index);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a475fb985aa078dff7c627ce18538b52e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">foedus::storage::masstree::MasstreeBorderPage::get_suffix_length_aligned</a></div><div class="ttdeci">KeyLength get_suffix_length_aligned(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00827">masstree_page_impl.hpp:827</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="232,93,453,134"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="253,165,432,221"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="501,5,680,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="501,85,680,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="728,83,935,125"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="983,83,1189,125"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="501,165,680,221"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="504,245,677,301"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="751,220,911,247"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="745,271,918,313"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a357f4256ff48e1c5cefbee98d0a2dd2d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="246,920,425,976"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="499,422,705,478"/>
<area shape="rect" id="node23" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="515,1483,689,1524"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="249,292,422,348"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="232,372,439,428"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="515,26,689,82"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="515,145,689,201"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="515,1242,689,1312"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="515,657,689,713"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="511,738,693,808"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="789,423,963,464"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="497,1147,707,1218"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="508,1052,696,1123"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="501,972,703,1028"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="501,1337,703,1393"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="505,1418,699,1459"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="507,577,697,633"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="509,868,695,924"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adb503d118f53a417bf11f9e486bd3cf7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread_follow" alt="" coords="773,1300,979,1356"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a41e664c7035f1b89121ef06678a71386" title="These are defined in masstree_storage_debug.cpp. " alt="" coords="1067,1300,1240,1356"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="789,569,963,625"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="789,649,963,705"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1054,34,1253,75"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1067,222,1240,278"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1067,302,1240,358"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1046,595,1261,636"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1038,448,1269,490"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1060,514,1247,570"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1035,383,1272,424"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1047,660,1259,702"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1045,726,1261,767"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a89828c1df02cadd8a38824f24e2adef9" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_follow" alt="" coords="785,730,967,800"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0fe6a82d90f30d4b9724009ba2fc40ae" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="1047,792,1259,848"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="771,1220,981,1276"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99" title="Checks the volatile pages of this storage to give hints to decide page boundary keys. " alt="" coords="1067,1220,1240,1276"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="782,1140,970,1196"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="789,1060,963,1116"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="1062,1140,1245,1196"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="787,980,965,1036"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="1067,1060,1240,1102"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::release_pages_recursive" alt="" coords="1061,980,1246,1036"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="781,489,971,545"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="1064,876,1243,932"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="765,825,987,881"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="487,226,717,267"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="505,292,699,348"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="789,26,963,82"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="789,237,963,293"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="781,106,971,162"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0cc9a759ee4e0b4c1041d64ae274a6dc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* foedus::storage::masstree::MasstreeBorderPage::get_record_payload </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00745">745</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00827">get_suffix_length_aligned()</a>.</p>
<div class="fragment"><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                                                                      {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a>(index);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a475fb985aa078dff7c627ce18538b52e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">foedus::storage::masstree::MasstreeBorderPage::get_suffix_length_aligned</a></div><div class="ttdeci">KeyLength get_suffix_length_aligned(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00827">masstree_page_impl.hpp:827</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0cc9a759ee4e0b4c1041d64ae274a6dc_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0cc9a759ee4e0b4c1041d64ae274a6dc_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0cc9a759ee4e0b4c1041d64ae274a6dc_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0cc9a759ee4e0b4c1041d64ae274a6dc_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="232,93,453,134"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="253,165,432,221"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="501,5,680,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="501,85,680,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="728,83,935,125"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="983,83,1189,125"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="501,165,680,221"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="504,245,677,301"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="751,220,911,247"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="745,271,918,313"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a327750cab5847980e336423128c42983"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>record_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00768">768</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l01116">foedus::storage::masstree::calculate_suffix_length_aligned()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l00782">get_next_layer_from_offsets()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>.</p>
<div class="fragment"><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                                                    {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(record_offset);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a907f46e4f7d427806529dd8e2e03dd9c"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">foedus::storage::masstree::calculate_suffix_length_aligned</a></div><div class="ttdeci">KeyLength calculate_suffix_length_aligned(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01116">masstree_page_impl.hpp:1116</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="251,20,424,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="248,100,427,156"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="481,5,641,32"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="475,57,648,98"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a327750cab5847980e336423128c42983_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer_from_offsets" alt="" coords="262,85,441,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="248,165,455,221"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="505,5,707,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="505,85,707,141"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="757,133,931,174"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="503,165,709,221"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba8deac13594e4b208f4905c7d894bf7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>record_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00775">775</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l01116">foedus::storage::masstree::calculate_suffix_length_aligned()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                              {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(record_offset);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a907f46e4f7d427806529dd8e2e03dd9c"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">foedus::storage::masstree::calculate_suffix_length_aligned</a></div><div class="ttdeci">KeyLength calculate_suffix_length_aligned(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01116">masstree_page_impl.hpp:1116</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aba8deac13594e4b208f4905c7d894bf7_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aba8deac13594e4b208f4905c7d894bf7_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aba8deac13594e4b208f4905c7d894bf7_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aba8deac13594e4b208f4905c7d894bf7_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="251,20,424,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="248,100,427,156"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="481,5,641,32"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="475,57,648,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4dc67e57eb2c90ffced75953dcef70fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> foedus::storage::masstree::MasstreeBorderPage::get_remainder_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">820</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01600">compare_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01198">find_key_for_reserve()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01256">find_key_for_snapshot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01179">find_key_normalized()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00823">get_suffix_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00827">get_suffix_length_aligned()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01641">ltgt_key()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>, <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01699">will_conflict()</a>.</p>
<div class="fragment"><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                                                                      {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_aec6ae8c8582135c9368278ddfd18c7af"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a></div><div class="ttdeci">KeyLength remainder_length_</div><div class="ttdoc">Followings are immutable. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00527">masstree_page_impl.hpp:527</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="232,13,439,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="487,13,693,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4dc67e57eb2c90ffced75953dcef70fa_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="530,195,726,251"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="232,704,471,745"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="789,573,997,615"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="261,573,441,629"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="261,770,441,826"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="538,947,718,1003"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length" alt="" coords="262,341,441,397"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="1066,291,1239,332"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="262,261,441,317"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1059,407,1246,463"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="248,851,455,892"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="527,39,729,95"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae3039ec43fe6ced0332acec2ce9210aa" title="Overload to receive slice. " alt="" coords="262,917,441,973"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="795,29,991,85"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1336,167,1509,208"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47" title="let&#39;s gradually migrate from compare_key() to this. " alt="" coords="519,1028,737,1069"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1066,823,1239,879"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1328,571,1517,627"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="1058,511,1247,567"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1323,699,1522,740"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1336,1101,1509,1157"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1336,830,1509,886"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1315,1224,1530,1265"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1307,991,1538,1032"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1329,910,1516,966"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1304,764,1541,805"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1592,571,1765,627"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="541,813,715,869"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="787,885,999,927"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="785,820,1001,861"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="804,1023,983,1079"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="801,1383,985,1439"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1066,693,1239,749"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1066,1143,1239,1199"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1058,1223,1247,1279"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1066,1303,1239,1359"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1059,983,1246,1039"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1058,1063,1247,1119"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1055,903,1250,959"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1066,1383,1239,1439"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1066,1463,1239,1519"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="539,275,717,331"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="804,239,983,295"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="1049,159,1256,215"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="807,739,980,795"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="790,109,997,165"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="807,639,980,695"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="1589,407,1768,463"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1312,485,1533,541"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a42cee2c2a116efdd26420284e95a20f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> foedus::storage::masstree::MasstreeBorderPage::get_slice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">801</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01600">compare_key()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00146">foedus::storage::masstree::SplitBorder::decide_strategy()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01198">find_key_for_reserve()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01256">find_key_for_snapshot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01179">find_key_normalized()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01641">ltgt_key()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__storage__peek_8cpp_source.html#l00061">foedus::storage::masstree::MasstreeStoragePimpl::peek_volatile_page_boundaries_next_layer()</a>, <a class="el" href="masstree__storage__prefetch_8cpp_source.html#l00051">foedus::storage::masstree::MasstreeStoragePimpl::prefetch_pages_normalized_recurse()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">reserve_initially_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01699">will_conflict()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01723">will_contain_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                                                          {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> slices_[index];</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a42cee2c2a116efdd26420284e95a20f7_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a42cee2c2a116efdd26420284e95a20f7_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a42cee2c2a116efdd26420284e95a20f7_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a42cee2c2a116efdd26420284e95a20f7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="287,211,483,267"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="265,440,504,481"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#a3066f35f9409c63cea94515dd722c823" title="Subroutine to decide how we will split this page. " alt="" coords="287,524,482,565"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="281,707,489,748"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="835,943,1024,999"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="295,117,475,173"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="295,823,475,879"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="295,626,475,682"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="281,904,488,945"/>
<area shape="rect" id="node38" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="298,969,471,1011"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="280,1035,489,1105"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="291,1129,479,1200"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="562,262,763,318"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="562,342,763,398"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="291,1225,478,1281"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae3039ec43fe6ced0332acec2ce9210aa" title="Overload to receive slice. " alt="" coords="295,1305,474,1361"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a571e2edc8ea6de6e92ea0e9110c0cc88" title="foedus::storage::masstree\l::MasstreeBorderPage::will\l_contain_next_layer" alt="" coords="295,1385,474,1441"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="565,182,761,238"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="843,157,1016,199"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47" title="let&#39;s gradually migrate from compare_key() to this. " alt="" coords="553,423,772,464"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="576,488,749,529"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="843,863,1016,919"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="568,789,757,845"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1105,267,1303,308"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1117,369,1291,425"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1117,823,1291,879"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1097,513,1311,555"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1089,621,1319,663"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1111,903,1297,959"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1085,757,1323,799"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1117,983,1291,1039"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="576,51,749,107"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="823,5,1035,47"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="821,71,1037,112"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="573,554,752,610"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="571,634,755,690"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="843,223,1016,279"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="843,303,1016,359"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="835,383,1024,439"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="843,463,1016,519"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="836,543,1023,599"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="835,623,1024,679"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="832,703,1027,759"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="843,783,1016,839"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="558,982,767,1038"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="569,1062,757,1118"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="576,1142,749,1198"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="840,1225,1019,1281"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="552,1302,773,1358"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8b7973f3eb0f4f3c6894c278c18d7145"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* foedus::storage::masstree::MasstreeBorderPage::get_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">631</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00838">get_max_payload_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00809">get_offset_in_bytes()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00813">get_owner_id()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00832">get_payload_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">initialize_as_layer_root_physical()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01447">replace_next_layer_snapshot()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00708">verify_slot_lengthes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                                                   {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - index - 1;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="260,5,467,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a8b7973f3eb0f4f3c6894c278c18d7145_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="503,1010,691,1066"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1312,2056,1501,2112"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="1067,2780,1240,2821"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="774,1216,977,1272"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="786,1507,965,1563"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="1050,1604,1257,1660"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="1043,159,1264,215"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="260,2315,439,2371"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="508,1216,687,1272"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="772,1638,979,1694"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_payload_length" alt="" coords="786,2606,965,2662"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="508,2052,687,2108"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060" title="foedus::storage::masstree\l::MasstreeBorderPage::verify\l_slot_lengthes" alt="" coords="503,875,692,931"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="1055,2299,1251,2355"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="789,276,962,346"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="771,1950,979,1992"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1067,1136,1240,1192"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="1059,1911,1248,1967"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="785,1768,965,1824"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1320,1514,1493,1556"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a" title="This one is used for snapshot pages. " alt="" coords="785,2118,965,2174"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="789,1136,962,1192"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="784,422,967,493"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1064,1216,1243,1272"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8" title="Overload to receive slice+suffix. " alt="" coords="772,2198,979,2240"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="771,517,980,588"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="781,612,969,682"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="774,115,977,171"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="778,809,973,850"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="782,875,969,931"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a571e2edc8ea6de6e92ea0e9110c0cc88" title="foedus::storage::masstree\l::MasstreeBorderPage::will\l_contain_next_layer" alt="" coords="786,195,965,251"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1067,1376,1240,1432"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="1067,1991,1240,2047"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1061,1296,1245,1352"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="1067,2379,1240,2435"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="487,2322,708,2364"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d" title="actually this method should be renamed to equal_key... " alt="" coords="756,2838,995,2880"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="788,2446,963,2502"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="1067,2539,1240,2595"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="1067,2459,1240,2515"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ae4789d8489571fa435c97a03b4f93619" title="Subroutine to lock existing records in target_. " alt="" coords="786,1006,965,1062"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="1067,1041,1240,1082"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="787,1296,964,1352"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="1067,2699,1240,2755"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="1067,2619,1240,2675"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="785,1376,965,1432"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length" alt="" coords="786,2526,965,2582"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="786,2315,965,2371"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="1053,1790,1254,1846"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a812e899fc428c9223291e6233c4a23da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* foedus::storage::masstree::MasstreeBorderPage::get_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00637">637</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>
<div class="fragment"><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                                       {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - index - 1;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a812e899fc428c9223291e6233c4a23da_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a812e899fc428c9223291e6233c4a23da_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a812e899fc428c9223291e6233c4a23da_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a812e899fc428c9223291e6233c4a23da_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="260,5,467,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad10a5e5c2b8774c5f2a96661dad217e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> foedus::storage::masstree::MasstreeBorderPage::get_suffix_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00823">823</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l01105">foedus::storage::masstree::calculate_suffix_length()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, and <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">foedus::storage::masstree::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                                                   {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(remainder_length);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a575ba44804b98a334fc66eedf4b18d70"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">foedus::storage::masstree::calculate_suffix_length</a></div><div class="ttdeci">KeyLength calculate_suffix_length(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01105">masstree_page_impl.hpp:1105</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="235,5,408,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="232,71,411,127"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="459,79,665,120"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="713,79,920,120"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ad10a5e5c2b8774c5f2a96661dad217e8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="232,5,428,61"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="243,86,417,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="476,5,672,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="720,13,893,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a475fb985aa078dff7c627ce18538b52e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> foedus::storage::masstree::MasstreeBorderPage::get_suffix_length_aligned </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00827">827</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l01116">foedus::storage::masstree::calculate_suffix_length_aligned()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__debug_8cpp_source.html#l00114">assert_entries_impl()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">get_record_payload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                                                                           {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a907f46e4f7d427806529dd8e2e03dd9c"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">foedus::storage::masstree::calculate_suffix_length_aligned</a></div><div class="ttdeci">KeyLength calculate_suffix_length_aligned(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01116">masstree_page_impl.hpp:1116</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="235,41,408,97"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="232,121,411,177"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="482,5,642,32"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="475,57,649,98"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="459,129,665,170"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="713,129,920,170"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a475fb985aa078dff7c627ce18538b52e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9" title="defined in masstree_page_debug.cpp. " alt="" coords="232,517,428,573"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="241,597,419,653"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825" title="foedus::storage::masstree\l::MasstreeBorderPage::assert\l_entries" alt="" coords="481,523,677,579"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1033,478,1207,519"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="490,1040,669,1096"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="743,595,949,651"/>
<area shape="rect" id="node26" href="namespacefoedus_1_1storage_1_1masstree.html#a0ee5fcdcd9c6fc6ddb3f000835dbe9a1" title="foedus::storage::masstree\l::operator\&lt;\&lt;" alt="" coords="759,1621,933,1662"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="493,417,666,473"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="476,657,683,713"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8e24325e4b203cb3e2008283c6ef0c89" title="implementation of get_record family. " alt="" coords="759,267,933,323"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ae301e3aa587aa907eed1f6ae1ec5edb0" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::retrieve_part_general" alt="" coords="759,136,933,192"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6358da556d81e06726320b30c78755f7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread\l_recurse" alt="" coords="759,1526,933,1597"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="759,725,933,781"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a7e4b647b3c95a74b4de7fd18931cafb3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_recurse" alt="" coords="755,806,937,877"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="741,901,951,971"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="752,1077,940,1147"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24" title="foedus::storage::masstree\l::MasstreeBorderPage::release\l_pages_recursive" alt="" coords="745,1341,947,1397"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="745,996,947,1052"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="749,1171,943,1213"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="751,1445,941,1501"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="753,1237,939,1293"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adb503d118f53a417bf11f9e486bd3cf7" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::debugout_single_thread_follow" alt="" coords="1017,1533,1223,1589"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a41e664c7035f1b89121ef06678a71386" title="These are defined in masstree_storage_debug.cpp. " alt="" coords="1311,1533,1484,1589"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1033,544,1207,600"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1033,725,1207,781"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1298,339,1497,381"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1311,136,1484,192"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1311,237,1484,293"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1290,551,1505,593"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1282,617,1513,658"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1304,471,1491,527"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1279,405,1516,446"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1291,747,1503,789"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1289,682,1505,723"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a89828c1df02cadd8a38824f24e2adef9" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::hcc_reset_all_temperature\l_stat_follow" alt="" coords="1029,806,1211,877"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0fe6a82d90f30d4b9724009ba2fc40ae" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="1291,813,1503,869"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="1015,908,1225,964"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99" title="Checks the volatile pages of this storage to give hints to decide page boundary keys. " alt="" coords="1311,908,1484,964"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1026,1004,1214,1060"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1033,1084,1207,1140"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="1031,1341,1209,1397"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1025,1445,1215,1501"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="1308,1241,1487,1297"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1009,1164,1231,1220"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="731,478,961,519"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="749,397,943,453"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1033,267,1207,323"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1033,136,1207,192"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1025,5,1215,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a293c8b397164e1f9ee32e69835846fb0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::increase_next_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>&#160;</td>
          <td class="paramname"><em>length</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00626">626</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                                      {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    next_offset_ += length;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a293c8b397164e1f9ee32e69835846fb0_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a293c8b397164e1f9ee32e69835846fb0_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a293c8b397164e1f9ee32e69835846fb0_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a293c8b397164e1f9ee32e69835846fb0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="263,5,484,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="532,13,705,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a867f696df8da3aeeab003663a439a535"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::initialize_as_layer_root_physical </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>parent_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A physical-only method to initialize this page as a volatile page of a layer-root pointed from the given parent record. </p>
<p>It merely migrates the parent record without any logical change. </p><dl class="section pre"><dt>Precondition</dt><dd>!parent-&gt;header_.snapshot_: only for volatile page </dd>
<dd>
parent-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked()</a> &amp;&amp; !parent-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved()</a> </dd>
<dd>
parent-&gt;get_slot(parent_index)-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked()</a> </dd>
<dd>
!parent-&gt;get_slot(parent_index)-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved()</a> </dd>
<dd>
!parent-&gt;get_slot(parent_index)-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">431</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00144">foedus::storage::masstree::MasstreePage::get_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00838">get_max_payload_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00750">get_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">get_record_payload()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00128">initialize_volatile_page()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00168">foedus::storage::masstree::MasstreePage::is_locked()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00169">foedus::storage::masstree::MasstreePage::is_moved()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00170">foedus::storage::masstree::MasstreePage::is_retired()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00132">foedus::storage::masstree::kInfimumSlice</a>, <a class="el" href="masstree__id_8hpp_source.html#l00137">foedus::storage::masstree::kSupremumSlice</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00058">foedus::assorted::memory_fence_release()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="page_8hpp_source.html#l00196">foedus::storage::PageHeader::storage_id_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>.</p>

<p>Referenced by <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                          {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// This method assumes that the record&#39;s payload space is spacious enough.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="comment">// The caller must make it sure as pre-condition.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent-&gt;is_locked());</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parent-&gt;is_moved());</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  Slot* parent_slot = parent-&gt;get_slot(parent_index);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_slot-&gt;tid_.is_keylocked());</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parent_slot-&gt;tid_.is_moved());</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!parent_slot-&gt;does_point_to_layer());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent-&gt;get_max_payload_length(parent_index) &gt;= <span class="keyword">sizeof</span>(DualPagePointer));</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  DualPagePointer pointer;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  pointer.snapshot_pointer_ = 0;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  pointer.volatile_pointer_ = page_id;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// initialize the root page by copying the record</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f">initialize_volatile_page</a>(</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    parent-&gt;header_.storage_id_,</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    page_id,</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    parent-&gt;get_layer() + 1,</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">kInfimumSlice</a>,    <span class="comment">// infimum slice</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">kSupremumSlice</a>);   <span class="comment">// high-fence is supremum</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23">initialize_layer_root</a>(parent, parent_index);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved</a>());</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a">is_retired</a>());</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  SlotLengthPart new_lengthes = parent_slot-&gt;read_lengthes_oneshot();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  new_lengthes.payload_length_ = <span class="keyword">sizeof</span>(DualPagePointer);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordtype">char</span>* parent_payload = parent-&gt;get_record_payload(parent_index);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// point to the new page. Be careful on ordering.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  std::memcpy(parent_payload, &amp;pointer, <span class="keyword">sizeof</span>(pointer));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  parent_slot-&gt;write_lengthes_oneshot(new_lengthes);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  parent_slot-&gt;tid_.xct_id_.set_next_layer();  <span class="comment">// which also turns off delete-bit</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent-&gt;get_next_layer(parent_index)-&gt;volatile_pointer_ == page_id);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a9cffc20f29ad72d4edbeedece861c48f"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">foedus::storage::masstree::kInfimumSlice</a></div><div class="ttdeci">const KeySlice kInfimumSlice</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00132">masstree_id.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_adc22d21883e15b87cd5ff6b6ec513c35"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">foedus::storage::masstree::MasstreePage::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00169">masstree_page_impl.hpp:169</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aec1302bec7fe39ef71cf9ac0ab6b364a"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a">foedus::storage::masstree::MasstreePage::is_retired</a></div><div class="ttdeci">bool is_retired() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00170">masstree_page_impl.hpp:170</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9e24c3f7398235571f6f0b0e013f1f23"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23">foedus::storage::masstree::MasstreeBorderPage::initialize_layer_root</a></div><div class="ttdeci">void initialize_layer_root(const MasstreeBorderPage *copy_from, SlotIndex copy_index)</div><div class="ttdoc">Copy the initial record that will be the only record for a new root page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00298">masstree_page_impl.cpp:298</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a5ab741ff207d274efcb4a5664880600f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f">foedus::storage::masstree::MasstreeBorderPage::initialize_volatile_page</a></div><div class="ttdeci">void initialize_volatile_page(StorageId storage_id, VolatilePagePointer page_id, uint8_t layer, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00128">masstree_page_impl.cpp:128</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a7bfcd277a96bcd1e9008459abe1ec40d"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">foedus::storage::masstree::kSupremumSlice</a></div><div class="ttdeci">const KeySlice kSupremumSlice</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00137">masstree_id.hpp:137</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gafc1110de4c6bb85c7e1f7feccc27f6d7"><div class="ttname"><a href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">foedus::assorted::memory_fence_release</a></div><div class="ttdeci">void memory_fence_release()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_release). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00058">atomic_fences.hpp:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="276,5,451,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="274,669,453,725"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1291,327,1497,368"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="274,477,453,533"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="531,326,710,382"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="260,821,467,877"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="532,1332,709,1373"/>
<area shape="rect" id="node36" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="799,1280,972,1321"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f" title="foedus::storage::masstree\l::MasstreeBorderPage::initialize\l_volatile_page" alt="" coords="260,193,467,249"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="275,1395,451,1436"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a" title="foedus::storage::masstree\l::MasstreePage::is_retired" alt="" coords="276,1465,451,1507"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076" title="This might be affected by concurrent threads. " alt="" coords="529,697,712,753"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0" title="foedus::storage::masstree\l::MasstreeBorderPage::Slot\l::get_aligned_suffix_length" alt="" coords="794,741,977,797"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1057,846,1230,902"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1314,1017,1474,1043"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1307,853,1481,895"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1545,636,1752,677"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="775,260,996,301"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="796,326,975,382"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1054,239,1233,295"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="1054,597,1233,653"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1054,319,1233,375"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="1054,399,1233,455"/>
<area shape="rect" id="node24" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a610d8c1bfd1d86dcde181c3fb0020f0c" title="foedus::xct::RwLockableXct\lId::is_keylocked" alt="" coords="529,631,712,672"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_new_slot" alt="" coords="1305,1109,1483,1165"/>
<area shape="rect" id="node27" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="534,565,707,607"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="799,1002,972,1058"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e" title="foedus::storage::masstree\l::MasstreeBorderPage::set_slice" alt="" coords="515,828,727,869"/>
<area shape="rect" id="node32" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="559,1047,682,1088"/>
<area shape="rect" id="node33" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4" title="foedus::xct::McsRwLock\l::reset" alt="" coords="538,1215,703,1256"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="788,821,983,877"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="789,1345,981,1387"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="1059,1345,1228,1387"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1293,1345,1495,1387"/>
<area shape="rect" id="node25" href="structfoedus_1_1xct_1_1McsRwLock.html#adc5e6612e3cecf3d2f15d02237b4ef8f" title="foedus::xct::McsRwLock\l::is_locked" alt="" coords="803,675,968,716"/>
<area shape="rect" id="node28" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="784,609,987,651"/>
<area shape="rect" id="node29" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1057,677,1230,719"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1McsRwLock.html#a252a31f1689940909fe3520162b685f7" title="foedus::xct::McsRwLock\l::set_next_writer" alt="" coords="803,1215,968,1256"/>
<area shape="rect" id="node35" href="structfoedus_1_1xct_1_1McsRwLock.html#a0bd9c402804ed75f85852e0f9e429cba" title="foedus::xct::McsRwLock\l::xchg_next_writer" alt="" coords="1061,1215,1226,1256"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e" title="foedus::storage::masstree\l::MasstreePage::initialize\l_volatile_common" alt="" coords="534,122,707,178"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="790,129,981,171"/>
<area shape="rect" id="node41" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="1044,123,1243,164"/>
<area shape="rect" id="node42" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="1047,531,1239,572"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="1298,564,1490,605"/>
<area shape="rect" id="node44" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="1309,499,1479,540"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="525,1400,717,1441"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="789,1411,981,1452"/>
<area shape="rect" id="node49" href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca" title="foedus::storage::PageVersion\l::is_retired" alt="" coords="525,1472,717,1513"/>
<area shape="rect" id="node50" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ab07c3c3d030fab04f79b59dee83ecd2e" title="foedus::storage::PageVersion\lStatus::is_retired" alt="" coords="789,1476,981,1517"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a867f696df8da3aeeab003663a439a535_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="260,13,433,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9e24c3f7398235571f6f0b0e013f1f23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::initialize_layer_root </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> *&#160;</td>
          <td class="paramname"><em>copy_from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>copy_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy the initial record that will be the only record for a new root page. </p>
<p>This is called when a new layer is created, and done in a thread-private memory. So, no synchronization needed. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">298</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01116">foedus::storage::masstree::calculate_suffix_length_aligned()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00643">get_new_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00813">get_owner_id()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00740">get_record_payload()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00768">get_record_payload_from_offsets()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="xct__id_8hpp_source.html#l01140">foedus::xct::RwLockableXctId::is_keylocked()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00168">foedus::storage::masstree::MasstreePage::is_locked()</a>, <a class="el" href="xct__id_8hpp_source.html#l01042">foedus::xct::XctId::is_next_layer()</a>, <a class="el" href="page_8hpp_source.html#l00219">foedus::storage::PageHeader::key_count_</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="xct__id_8hpp_source.html#l01134">foedus::xct::RwLockableXctId::lock_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00537">foedus::storage::masstree::MasstreeBorderPage::Slot::original_offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00532">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="xct__id_8hpp_source.html#l00803">foedus::xct::McsRwLock::reset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00805">set_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00263">foedus::storage::masstree::slice_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00480">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::unused_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">initialize_as_layer_root_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                        {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() == 0);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());  <span class="comment">// we don&#39;t lock a new page</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(copy_from-&gt;get_owner_id(copy_index)-&gt;is_keylocked());</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// This is a new page, so no worry on race.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> new_index = 0;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(new_index);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keyword">const</span> Slot* parent_slot = copy_from-&gt;get_slot(copy_index);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keyword">const</span> SlotLengthPart parent_lengthes = parent_slot-&gt;lengthes_.components;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* parent_record = copy_from-&gt;get_record_from_offset(parent_lengthes.offset_);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> parent_remainder = parent_slot-&gt;remainder_length_;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_remainder != <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_remainder &gt; <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = parent_remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="comment">// retrieve the first 8 byte (or less) as the new slice.</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> new_slice = <a class="code" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8">slice_key</a>(parent_record, parent_remainder);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length = parent_lengthes.payload_length_;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length_aligned = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder, payload_length);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_offset = next_offset_;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(new_index, new_slice);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ == 0);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  slot-&gt;lengthes_.components.offset_ = new_offset;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  slot-&gt;lengthes_.components.unused_ = 0;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  slot-&gt;lengthes_.components.physical_record_length_ = record_size;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  slot-&gt;lengthes_.components.payload_length_ = payload_length;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  slot-&gt;original_physical_record_length_ = record_size;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  slot-&gt;remainder_length_ = remainder;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  slot-&gt;original_offset_ = new_offset;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  consecutive_inserts_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// use the same xct ID. This means we also inherit deleted flag.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  slot-&gt;tid_.xct_id_ = parent_slot-&gt;tid_.xct_id_;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!slot-&gt;tid_.xct_id_.is_next_layer());</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">// but we don&#39;t want to inherit locks</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  slot-&gt;tid_.lock_.reset();</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (suffix_length_aligned &gt; 0) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment">// because suffix parts are 8-byte aligned with zero padding, we can memcpy in 8-bytes unit</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    std::memcpy(</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(new_offset),</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      parent_record + <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>),</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      suffix_length_aligned);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">if</span> (payload_length &gt; 0) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    std::memcpy(</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a>(new_offset, remainder),</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      copy_from-&gt;get_record_payload(copy_index),</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length));  <span class="comment">// payload is zero-padded to 8 bytes, too.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// as we don&#39;t lock this page, we directly increment it to avoid is_locked assertion</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  ++<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a58cd9c4e7b12226634c1c7e5ca392890">key_count_</a>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a05c12e467155284686fe0a71dc617a2e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">foedus::storage::masstree::MasstreeBorderPage::set_slice</a></div><div class="ttdeci">void set_slice(SlotIndex index, KeySlice slice) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00805">masstree_page_impl.hpp:805</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a907f46e4f7d427806529dd8e2e03dd9c"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">foedus::storage::masstree::calculate_suffix_length_aligned</a></div><div class="ttdeci">KeyLength calculate_suffix_length_aligned(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01116">masstree_page_impl.hpp:1116</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga9d05e904033c0bba7113cdafb43d6610"><div class="ttname"><a href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">foedus::storage::masstree::PayloadLength</a></div><div class="ttdeci">uint16_t PayloadLength</div><div class="ttdoc">Represents a byte-length of a payload in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00092">masstree_id.hpp:92</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a327750cab5847980e336423128c42983"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets</a></div><div class="ttdeci">const char * get_record_payload_from_offsets(DataOffset record_offset, KeyLength remainder_length) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00768">masstree_page_impl.hpp:768</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8a9c60937a3287ce6b73ea104a29d999"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">foedus::storage::masstree::MasstreeBorderPage::get_new_slot</a></div><div class="ttdeci">Slot * get_new_slot(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00643">masstree_page_impl.hpp:643</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabfe21e7cd7f1a689891743d93c6996c8"><div class="ttname"><a href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8">foedus::storage::masstree::slice_key</a></div><div class="ttdeci">KeySlice slice_key(const void *be_bytes, KeyLength slice_length)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00263">masstree_id.hpp:263</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a58cd9c4e7b12226634c1c7e5ca392890"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a58cd9c4e7b12226634c1c7e5ca392890">foedus::storage::PageHeader::key_count_</a></div><div class="ttdeci">uint16_t key_count_</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00219">page.hpp:219</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1039,81,1199,108"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="792,132,965,188"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1271,575,1477,617"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_new_slot" alt="" coords="1030,633,1209,689"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="789,212,968,268"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1016,459,1223,501"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="789,372,968,428"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="277,452,455,508"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="533,241,728,297"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a610d8c1bfd1d86dcde181c3fb0020f0c" title="foedus::xct::RwLockableXct\lId::is_keylocked" alt="" coords="275,685,457,726"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="277,750,455,791"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="305,815,427,857"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4" title="foedus::xct::McsRwLock\l::reset" alt="" coords="283,881,449,922"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e" title="foedus::storage::masstree\l::MasstreeBorderPage::set_slice" alt="" coords="260,946,472,987"/>
<area shape="rect" id="node28" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="279,1011,453,1053"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="544,5,717,61"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1033,139,1206,181"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="520,459,741,501"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="541,321,720,377"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="789,452,968,508"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="789,292,968,348"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1McsRwLock.html#adc5e6612e3cecf3d2f15d02237b4ef8f" title="foedus::xct::McsRwLock\l::is_locked" alt="" coords="548,685,713,726"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="535,750,727,791"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="794,750,963,791"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1019,750,1220,791"/>
<area shape="rect" id="node24" href="structfoedus_1_1xct_1_1McsRwLock.html#a252a31f1689940909fe3520162b685f7" title="foedus::xct::McsRwLock\l::set_next_writer" alt="" coords="548,887,713,929"/>
<area shape="rect" id="node26" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="544,822,717,863"/>
<area shape="rect" id="node25" href="structfoedus_1_1xct_1_1McsRwLock.html#a0bd9c402804ed75f85852e0f9e429cba" title="foedus::xct::McsRwLock\l::xchg_next_writer" alt="" coords="796,887,961,929"/>
<area shape="rect" id="node29" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="529,1041,732,1082"/>
<area shape="rect" id="node30" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="792,1011,965,1053"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a9e24c3f7398235571f6f0b0e013f1f23_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="260,5,467,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="515,13,688,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2f1e35c48bba8f7c8319d5739487768d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::initialize_snapshot_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>low_fence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>high_fence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00146">146</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8cpp_source.html#l00068">foedus::storage::masstree::MasstreePage::initialize_snapshot_common()</a>, and <a class="el" href="page_8hpp_source.html#l00050">foedus::storage::kMasstreeBorderPageType</a>.</p>

<p>Referenced by <a class="el" href="masstree__composer__impl_8cpp_source.html#l00111">foedus::storage::masstree::MasstreeComposer::construct_root()</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                  {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab41ee4ce455995cd703dac3990442081">initialize_snapshot_common</a>(</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    storage_id,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    page_id,</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">kMasstreeBorderPageType</a>,</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    layer,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    0,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    low_fence,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    high_fence);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  consecutive_inserts_ = <span class="keyword">true</span>;  <span class="comment">// snapshot pages are always completely sorted</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  next_offset_ = 0;  <span class="comment">// well, already implicitly zero-ed, but to be clear</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">foedus::storage::kMasstreeBorderPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00050">page.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab41ee4ce455995cd703dac3990442081"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab41ee4ce455995cd703dac3990442081">foedus::storage::masstree::MasstreePage::initialize_snapshot_common</a></div><div class="ttdeci">void initialize_snapshot_common(StorageId storage_id, SnapshotPagePointer page_id, PageType page_type, uint8_t layer, uint8_t level, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00068">masstree_page_impl.cpp:68</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab41ee4ce455995cd703dac3990442081" title="foedus::storage::masstree\l::MasstreePage::initialize\l_snapshot_common" alt="" coords="260,112,433,168"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PageHeader.html#a65c4acd213d2f482eb29c6dee0818915" title="foedus::storage::PageHeader\l::init_snapshot" alt="" coords="489,86,680,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="481,151,688,193"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="741,5,929,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="736,86,935,127"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="739,151,931,193"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="983,118,1175,159"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="994,183,1163,225"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="1223,183,1424,225"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2f1e35c48bba8f7c8319d5739487768d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeComposer.html#a45eb1cba6ccf8f51c973030848a47a9d" title="foedus::storage::masstree\l::MasstreeComposer::construct_root" alt="" coords="260,13,495,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Composer.html#adf148cbea7c8146dec88d23d2218452c" title="Construct root page(s) for one storage based on the ouputs of compose(). " alt="" coords="543,13,721,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5ab741ff207d274efcb4a5664880600f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::initialize_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>layer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>low_fence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>high_fence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00128">128</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8cpp_source.html#l00047">foedus::storage::masstree::MasstreePage::initialize_volatile_common()</a>, and <a class="el" href="page_8hpp_source.html#l00050">foedus::storage::kMasstreeBorderPageType</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00431">initialize_as_layer_root_physical()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00122">foedus::storage::masstree::MasstreeStoragePimpl::load_empty()</a>, and <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                  {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e">initialize_volatile_common</a>(</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    storage_id,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    page_id,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">kMasstreeBorderPageType</a>,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    layer,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    0,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    low_fence,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    high_fence);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  consecutive_inserts_ = <span class="keyword">true</span>;  <span class="comment">// initially key_count = 0, so of course sorted</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  next_offset_ = 0;  <span class="comment">// well, already implicitly zero-ed, but to be clear</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">foedus::storage::kMasstreeBorderPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00050">page.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aa95b56b38e523e345e5fb0283e43d65e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e">foedus::storage::masstree::MasstreePage::initialize_volatile_common</a></div><div class="ttdeci">void initialize_volatile_common(StorageId storage_id, VolatilePagePointer page_id, PageType page_type, uint8_t layer, uint8_t level, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00047">masstree_page_impl.cpp:47</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e" title="foedus::storage::masstree\l::MasstreePage::initialize\l_volatile_common" alt="" coords="260,63,433,119"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="489,37,680,79"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="481,103,688,144"/>
<area shape="rect" id="node4" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="736,5,935,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="739,71,931,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="983,37,1175,79"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="994,103,1163,144"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="1223,103,1424,144"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a5ab741ff207d274efcb4a5664880600f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="260,5,467,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="525,27,699,69"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a9c2b2febfce356451e8183f66f71dcc3" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::load_empty" alt="" coords="277,136,450,192"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a192a4976aa71f457b356bf536d9f5fc2" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::create" alt="" coords="525,121,699,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a8d4ac5a88e7ce112f83b67597719fa82" title="foedus::storage::masstree\l::MasstreeStoragePimpl::load" alt="" coords="515,202,709,243"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a92ad35031262ae95e767c53746de2e29" title="foedus::storage::masstree\l::MasstreeStorage::create" alt="" coords="757,129,931,170"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2731aaf3a733c773a63df6d691ede3ac" title="foedus::storage::masstree\l::MasstreeStorage::load" alt="" coords="757,202,931,243"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6318577ff1e6f5106712e9ed60a429fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::is_consecutive_inserts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether this page is receiving only sequential inserts. </p>
<p>If this is true, cursor can skip its sorting phase. If this is a snapshot page, this is always true. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00623">623</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="masstree__split__impl_8cpp_source.html#l00146">foedus::storage::masstree::SplitBorder::decide_strategy()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00039">foedus::storage::masstree::SplitBorder::run()</a>, and <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;{ <span class="keywordflow">return</span> consecutive_inserts_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6318577ff1e6f5106712e9ed60a429fe_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6318577ff1e6f5106712e9ed60a429fe_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6318577ff1e6f5106712e9ed60a429fe_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6318577ff1e6f5106712e9ed60a429fe_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#a3066f35f9409c63cea94515dd722c823" title="Subroutine to decide how we will split this page. " alt="" coords="227,5,421,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="493,32,667,73"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="231,122,417,178"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="739,122,917,178"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="469,199,691,255"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="965,122,1139,178"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1187,122,1360,178"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0bed0e3b1f6782710eb1e6891b850de7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int foedus::storage::masstree::MasstreeBorderPage::ltgt_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>be_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>compare the key. </p>
<p>returns negative, 0, positive when the given key is smaller,same,larger. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01631">1631</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00144">foedus::storage::masstree::MasstreePage::get_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00129">foedus::storage::masstree::kSliceLen</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00279">foedus::storage::masstree::slice_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                              {</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix = be_key + (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() + 1) * kSliceLen;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">ltgt_key</a>(index, slice, suffix, remainder);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0b54c43dec6f8ba15472a25760a3ed07"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">foedus::storage::masstree::MasstreePage::get_layer</a></div><div class="ttdeci">uint8_t get_layer() const __attribute__((always_inline))</div><div class="ttdoc">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00144">masstree_page_impl.hpp:144</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a0bed0e3b1f6782710eb1e6891b850de7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">foedus::storage::masstree::MasstreeBorderPage::ltgt_key</a></div><div class="ttdeci">int ltgt_key(SlotIndex index, const char *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">compare the key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01631">masstree_page_impl.hpp:1631</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabdb6a706258be601e621e58653bf528e"><div class="ttname"><a href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">foedus::storage::masstree::slice_layer</a></div><div class="ttdeci">KeySlice slice_layer(const void *be_bytes, KeyLength key_length, Layer current_layer)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00279">masstree_id.hpp:279</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bed0e3b1f6782710eb1e6891b850de7_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bed0e3b1f6782710eb1e6891b850de7_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bed0e3b1f6782710eb1e6891b850de7_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a0bed0e3b1f6782710eb1e6891b850de7_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="260,5,435,47"/>
<area shape="rect" id="node3" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="261,71,434,112"/>
<area shape="rect" id="node4" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="483,41,685,83"/>
<area shape="rect" id="node5" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="733,71,907,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6a231ba0760f76e9daba8bbcced965c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int foedus::storage::masstree::MasstreeBorderPage::ltgt_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Overload to receive slice+suffix. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01641">1641</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00075">foedus::storage::masstree::kMaxKeyLength</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00129">foedus::storage::masstree::kSliceLen</a>.</p>
<div class="fragment"><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                             {</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; 0);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> rec_remainder = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordflow">if</span> (slice &lt; rec_slice) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (slice &gt; rec_slice) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">if</span> (remainder == rec_remainder) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remainder &lt; rec_remainder) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordflow">if</span> (rec_remainder &lt;= <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  }</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index)) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(rec_remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> min_remainder = std::min(remainder, rec_remainder);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* rec_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordtype">int</span> cmp = std::memcmp(suffix, rec_suffix, min_remainder);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">if</span> (cmp != 0) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">return</span> cmp;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">if</span> (remainder == rec_remainder) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remainder &lt; rec_remainder) {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6a231ba0760f76e9daba8bbcced965c8_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6a231ba0760f76e9daba8bbcced965c8_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6a231ba0760f76e9daba8bbcced965c8_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a6a231ba0760f76e9daba8bbcced965c8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="277,25,465,81"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="260,146,481,187"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="529,259,708,315"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="265,263,477,305"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="756,106,963,147"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="557,33,680,74"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1011,106,1217,147"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="529,99,708,155"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="529,179,708,235"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abbc02ae73638102469f4d8a0c66fa887"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>&amp; foedus::storage::masstree::MasstreeBorderPage::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae9eebf88265f64634f6fa42b7f89f581"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::prefetch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>prefetch upto 256th bytes. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00934">934</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="cacheline_8hpp_source.html#l00066">foedus::assorted::prefetch_cachelines()</a>.</p>
<div class="fragment"><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                      {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(<span class="keyword">this</span>, 4);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div>
<div class="ttc" id="group__ASSORTED_html_ga14adcd2a780f37023df88933f17a5a83"><div class="ttname"><a href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">foedus::assorted::prefetch_cachelines</a></div><div class="ttdeci">void prefetch_cachelines(const void *address, int cacheline_count)</div><div class="ttdoc">Prefetch multiple contiguous cachelines to L1 cache. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00066">cacheline.hpp:66</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae9eebf88265f64634f6fa42b7f89f581_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae9eebf88265f64634f6fa42b7f89f581_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae9eebf88265f64634f6fa42b7f89f581_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae9eebf88265f64634f6fa42b7f89f581_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="260,5,432,47"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="480,5,652,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a874518901eb38e4dc3b7b69afb69e5c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::prefetch_additional_if_needed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>key_count</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00937">937</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__id_8hpp_source.html#l00150">foedus::storage::masstree::kBorderPageAdditionalHeaderSize</a>, <a class="el" href="cacheline_8hpp_source.html#l00042">foedus::assorted::kCachelineSize</a>, <a class="el" href="masstree__id_8hpp_source.html#l00144">foedus::storage::masstree::kCommonPageHeaderSize</a>, and <a class="el" href="cacheline_8hpp_source.html#l00066">foedus::assorted::prefetch_cachelines()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01198">find_key_for_reserve()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01179">find_key_normalized()</a>, and <a class="el" href="masstree__storage__peek_8cpp_source.html#l00061">foedus::storage::masstree::MasstreeStoragePimpl::peek_volatile_page_boundaries_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                                                                              {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keyword">const</span> uint32_t kInitialPrefetchBytes = 4U * <a class="code" href="group__ASSORTED.html#gad5ea63b0770685f3aad857fbd6e9096e">assorted::kCachelineSize</a>;  <span class="comment">// 256 bytes</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> kInitiallyFetched</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      = (kInitialPrefetchBytes - <a class="code" href="group__MASSTREE.html#ga54533a5e0a23f34c29a57f8701356491">kCommonPageHeaderSize</a> - <a class="code" href="group__MASSTREE.html#ga1dee903a4fd4c4bcaadb95833c4b9a40">kBorderPageAdditionalHeaderSize</a>)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        / <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (key_count &gt; kInitiallyFetched) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="comment">// we initially prefetched 64*4 = 256 bytes: header and 22 key slices.</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="comment">// if we have more, prefetch now while we are still searching.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      uint16_t cachelines = ((key_count - kInitiallyFetched) / <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) + 1;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        reinterpret_cast&lt;const char*&gt;(<span class="keyword">this</span>) + kInitialPrefetchBytes,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        cachelines);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  }</div>
<div class="ttc" id="group__MASSTREE_html_ga54533a5e0a23f34c29a57f8701356491"><div class="ttname"><a href="group__MASSTREE.html#ga54533a5e0a23f34c29a57f8701356491">foedus::storage::masstree::kCommonPageHeaderSize</a></div><div class="ttdeci">const uint32_t kCommonPageHeaderSize</div><div class="ttdoc">Size of the base page class (MasstreePage), which is the common header for intermediate and border pa...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00144">masstree_id.hpp:144</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga14adcd2a780f37023df88933f17a5a83"><div class="ttname"><a href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">foedus::assorted::prefetch_cachelines</a></div><div class="ttdeci">void prefetch_cachelines(const void *address, int cacheline_count)</div><div class="ttdoc">Prefetch multiple contiguous cachelines to L1 cache. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00066">cacheline.hpp:66</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gad5ea63b0770685f3aad857fbd6e9096e"><div class="ttname"><a href="group__ASSORTED.html#gad5ea63b0770685f3aad857fbd6e9096e">foedus::assorted::kCachelineSize</a></div><div class="ttdeci">const uint16_t kCachelineSize</div><div class="ttdoc">Byte count of one cache line. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00042">cacheline.hpp:42</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1dee903a4fd4c4bcaadb95833c4b9a40"><div class="ttname"><a href="group__MASSTREE.html#ga1dee903a4fd4c4bcaadb95833c4b9a40">foedus::storage::masstree::kBorderPageAdditionalHeaderSize</a></div><div class="ttdeci">const uint32_t kBorderPageAdditionalHeaderSize</div><div class="ttdoc">Misc header attributes specific to MasstreeBorderPage placed after the common header. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00150">masstree_id.hpp:150</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="260,13,432,54"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="480,13,652,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a874518901eb38e4dc3b7b69afb69e5c0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="518,137,726,179"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c" title="This is for the case we are looking for either the matching slot or the slot we will modify..." alt="" coords="275,951,455,1007"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af" title="Specialized version for 8 byte native integer search. " alt="" coords="275,642,455,698"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a14fb0ae2a643a45c3f32ab6395285d8d" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::peek_volatile_page_boundaries\l_next_layer" alt="" coords="260,1061,469,1132"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="796,162,969,218"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="1063,31,1252,87"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="788,31,977,87"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1058,709,1257,751"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1071,778,1244,834"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1071,111,1244,167"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1050,373,1265,415"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1042,544,1273,585"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1064,191,1251,247"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1039,272,1276,313"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="1324,31,1497,87"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd" title="Resolves a &quot;moved&quot; record. " alt="" coords="1545,31,1719,87"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1767,31,1953,87"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="2001,39,2197,80"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="2245,39,2465,80"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="2515,5,2723,47"/>
<area shape="rect" id="node21" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="2513,71,2724,112"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="2772,5,2967,47"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="3015,39,3209,80"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="3257,39,3420,80"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2772,71,2967,112"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="535,951,709,1007"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="535,1032,709,1073"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="777,1028,989,1069"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="775,963,991,1004"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="533,642,711,698"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="530,322,714,378"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="796,802,969,858"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="796,882,969,938"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="788,482,977,538"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="796,402,969,458"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="789,642,976,698"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="788,722,977,778"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="785,562,980,618"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="796,322,969,378"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="796,242,969,298"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67482433dfc680921b443bdb8a1ea78e" title="Defined in masstree_storage_peek.cpp. " alt="" coords="517,1098,727,1154"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#abf137494ad55ab4d60cec25c7c654e99" title="Checks the volatile pages of this storage to give hints to decide page boundary keys. " alt="" coords="796,1098,969,1154"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abdd08567e3f74c11a90c599cbac45a24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::release_pages_recursive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>page_resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00266">266</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00211">foedus::storage::masstree::MasstreePage::foster_twin_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00750">get_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="page_8hpp_source.html#l00139">foedus::storage::PageVersion::is_moved()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, <a class="el" href="page_8hpp_source.html#l00272">foedus::storage::PageHeader::page_version_</a>, <a class="el" href="page__pool_8hpp_source.html#l00292">foedus::memory::PageReleaseBatch::release()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00266">release_pages_recursive()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00164">foedus::storage::masstree::MasstreePage::release_pages_recursive_common()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00266">release_pages_recursive()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00164">foedus::storage::masstree::MasstreePage::release_pages_recursive_common()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                 {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78">is_moved</a>()) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[i].is_null());</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>* p</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>*<span class="keyword">&gt;</span>(page_resolver.resolve_offset(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[i]));</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      p-&gt;release_pages_recursive(page_resolver, batch);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[i].<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">word</a> = 0;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_count &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i)) {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        DualPagePointer* pointer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">get_next_layer</a>(i);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span> (!pointer-&gt;volatile_pointer_.is_null()) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;          <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a>* child = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            page_resolver.resolve_offset(pointer-&gt;volatile_pointer_));</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;          child-&gt;release_pages_recursive_common(page_resolver, batch);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  VolatilePagePointer volatile_id;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  volatile_id.word = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  batch-&gt;release(volatile_id);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_a8bb6c37c44056c5f986f6dd164b5b23a"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">foedus::storage::VolatilePagePointer::word</a></div><div class="ttdeci">uint64_t word</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00195">storage_id.hpp:195</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14c7383d33c5b6ddfcbab6b58ae80121"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">foedus::storage::masstree::MasstreeBorderPage::get_next_layer</a></div><div class="ttdeci">DualPagePointer * get_next_layer(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00750">masstree_page_impl.hpp:750</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a827faad5f063cf4bf9188f17bbf582b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foedus::storage::masstree::MasstreePage::foster_twin_</a></div><div class="ttdeci">VolatilePagePointer foster_twin_[2]</div><div class="ttdoc">Points to foster children, or tentative child pages. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00211">masstree_page_impl.hpp:211</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a2b63daa9a7f39c8c85bf2d43f4c18d78"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78">foedus::storage::PageVersion::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00139">page.hpp:139</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a44c12d47d4b478bac2076df4760fc990"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">foedus::storage::PageHeader::page_version_</a></div><div class="ttdeci">PageVersion page_version_</div><div class="ttdoc">Used in several storage types as concurrency control mechanism for the page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00272">page.hpp:272</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a32d92c1f8e858d5cd407be8846f450a3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage</a></div><div class="ttdeci">MasstreeBorderPage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a2b0cd6e79e07f9b2241d0123ffe00ad2"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">foedus::storage::masstree::MasstreePage::MasstreePage</a></div><div class="ttdeci">MasstreePage()=delete</div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="256,350,444,406"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1500,307,1707,348"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="261,251,439,307"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="749,532,923,573"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="1000,591,1192,632"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="755,977,917,1019"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179" title="Returns the given in&#45;memory volatile page to appropriate NUMA node. " alt="" coords="736,912,936,953"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="261,531,439,587"/>
<area shape="rect" id="node26" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="735,1043,937,1084"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1245,307,1452,348"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="523,313,646,355"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="495,226,674,282"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="725,233,947,275"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="747,139,925,195"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1007,299,1185,355"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="1007,219,1185,275"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1009,59,1183,115"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1007,139,1185,195"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1269,67,1429,94"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1262,119,1435,160"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="1253,591,1445,632"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1268,996,1429,1037"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1253,919,1444,960"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::release_pages_recursive" alt="" coords="492,707,677,763"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663" title="An empty&#45;range page, either intermediate or border, never has any entries. " alt="" coords="729,715,943,756"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="743,781,929,837"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="748,649,924,691"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1019,1035,1173,1076"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1274,1087,1423,1128"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1009,969,1183,1011"/>
<area shape="rect" id="node31" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="995,1151,1197,1207"/>
<area shape="rect" id="node28" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1271,1156,1426,1197"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_abdd08567e3f74c11a90c599cbac45a24_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e" title="foedus::storage::masstree\l::MasstreePage::release\l_pages_recursive_common" alt="" coords="256,110,435,166"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1masstree.html#a744edfba3574c4c7dd041519321ed5b3" title="foedus::storage::masstree\l::release_parallel" alt="" coords="489,20,662,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::release_pages_recursive" alt="" coords="483,110,668,166"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c" title="This method is used when we release a large number of volatile pages, most likely when we drop a stor..." alt="" coords="716,5,901,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a67ab7c42dbfd788773d6293ffdb64d52" title="Storage&#45;wide operations, such as drop, create, etc. " alt="" coords="949,20,1144,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a40e22349aa6902839d3b80ac35e84790" title="foedus::storage::masstree\l::MasstreeStorage::drop" alt="" coords="1192,20,1365,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4fb7f1ed0b7d15fc2f06d298e8a0260f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::replace_next_layer_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>pointer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Same as above, except this is used to transform an existing record at end to a next layer pointer. </p>
<p>Unlike set_next_layer, this shrinks the payload part. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01447">1447</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage__id_8hpp_source.html#l00211">foedus::storage::VolatilePagePointer::clear()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00750">get_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00813">get_owner_id()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="xct__id_8hpp_source.html#l01143">foedus::xct::RwLockableXctId::is_next_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00532">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="xct__id_8hpp_source.html#l01030">foedus::xct::XctId::set_next_layer()</a>, <a class="el" href="storage__id_8hpp_source.html#l00307">foedus::storage::DualPagePointer::snapshot_pointer_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                                                                                       {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_);  <span class="comment">// this is used only from snapshot composer</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() &gt; 0);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() - 1U;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index));</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">get_owner_id</a>(index)-&gt;xct_id_.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736">is_next_layer</a>());</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// Overwriting an existing slot with kInitiallyNextLayer is not generally safe,</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// but this is in snapshot page, so no worry on race.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> kRemainder = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_record_size = <span class="keyword">sizeof</span>(DualPagePointer);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_record_size == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(kRemainder, <span class="keyword">sizeof</span>(DualPagePointer)));</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// This is in snapshot page, so no worry on race.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// This is the last record in this page, right?</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    == slot-&gt;lengthes_.components.offset_ + slot-&gt;lengthes_.components.physical_record_length_);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// Here, we assume the snapshot border page always leaves sizeof(DualPagePointer) whenever</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// it creates a record. Otherwise we might not have enough space!</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// For this reason, we use can_accomodate_snapshot() rather than can_accomodate().</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot-&gt;lengthes_.components.offset_ + new_record_size + <span class="keyword">sizeof</span>(Slot) * <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>()</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  slot-&gt;lengthes_.components.physical_record_length_ = new_record_size;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  slot-&gt;lengthes_.components.payload_length_ = <span class="keyword">sizeof</span>(DualPagePointer);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  slot-&gt;original_physical_record_length_ = new_record_size;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  slot-&gt;remainder_length_ = kRemainder;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  next_offset_ = slot-&gt;lengthes_.components.offset_ + new_record_size;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  slot-&gt;tid_.xct_id_.set_next_layer();</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  DualPagePointer* dual_pointer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">get_next_layer</a>(index);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  dual_pointer-&gt;volatile_pointer_.clear();</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  dual_pointer-&gt;snapshot_pointer_ = pointer;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index));</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14c7383d33c5b6ddfcbab6b58ae80121"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">foedus::storage::masstree::MasstreeBorderPage::get_next_layer</a></div><div class="ttdeci">DualPagePointer * get_next_layer(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00750">masstree_page_impl.hpp:750</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a0bef5c88a00a3574b489d0259c5b49ad"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">foedus::storage::masstree::MasstreeBorderPage::get_owner_id</a></div><div class="ttdeci">xct::RwLockableXctId * get_owner_id(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00813">masstree_page_impl.hpp:813</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_ac49bd73652693a170f3755c1daf96736"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736">foedus::xct::RwLockableXctId::is_next_layer</a></div><div class="ttdeci">bool is_next_layer() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01143">xct_id.hpp:1143</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4fb7f1ed0b7d15fc2f06d298e8a0260f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4fb7f1ed0b7d15fc2f06d298e8a0260f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4fb7f1ed0b7d15fc2f06d298e8a0260f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4fb7f1ed0b7d15fc2f06d298e8a0260f_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29" title="foedus::storage::Volatile\lPagePointer::clear" alt="" coords="269,5,431,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="256,225,444,281"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1215,205,1421,247"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1469,119,1676,160"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="261,371,439,427"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="492,122,671,178"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="263,572,437,613"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736" title="foedus::xct::RwLockableXct\lId::is_next_layer" alt="" coords="259,305,441,347"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#abe3bc94e31351c2fa965df411af532a1" title="foedus::xct::XctId\l::set_next_layer" alt="" coords="289,637,411,679"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="743,521,916,577"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="520,273,643,315"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="492,371,671,427"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="719,317,940,359"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="740,390,919,446"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="988,230,1167,286"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="988,310,1167,366"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="991,521,1164,577"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="988,390,1167,446"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1238,597,1398,623"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1231,528,1405,569"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4ca875114e346439b950c703ab3586b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> foedus::storage::masstree::MasstreeBorderPage::required_data_space </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns the byte size of required contiguous space in data_ to insert a new record of the given remainder/payload length. </p>
<p>This includes <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html" title="Fix-sized slot for each record, which is placed at the end of data region. ">Slot</a> size. Slices are not included as they are anyway statically placed. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. ">to_record_length()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00687">687</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01570">can_accomodate()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01585">can_accomodate_snapshot()</a>.</p>
<div class="fragment"><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                  {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder_length, payload_length) + <span class="keyword">sizeof</span>(Slot);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="260,20,433,76"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="481,52,655,108"/>
<area shape="rect" id="node4" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="709,5,869,32"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="703,59,876,101"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a4ca875114e346439b950c703ab3586b5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed" title="foedus::storage::masstree\l::MasstreeBorderPage::can\l_accomodate" alt="" coords="260,119,441,175"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56" title="Slightly different from can_accomodate() as follows: " alt="" coords="260,199,441,255"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="489,5,692,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="490,85,691,141"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="740,158,913,199"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="490,216,691,272"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2be77538e13226dbc44134039be0dc73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::reserve_initially_next_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a>&#160;</td>
          <td class="paramname"><em>initial_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> &amp;&#160;</td>
          <td class="paramname"><em>pointer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For creating a record that is initially a next-layer. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">1375</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01570">can_accomodate()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00643">get_new_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00782">get_next_layer_from_offsets()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="xct__id_8hpp_source.html#l01040">foedus::xct::XctId::is_deleted()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00168">foedus::storage::masstree::MasstreePage::is_locked()</a>, <a class="el" href="xct__id_8hpp_source.html#l01042">foedus::xct::XctId::is_next_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="xct__id_8hpp_source.html#l01134">foedus::xct::RwLockableXctId::lock_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00537">foedus::storage::masstree::MasstreeBorderPage::Slot::original_offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00532">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="xct__id_8hpp_source.html#l00803">foedus::xct::McsRwLock::reset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00805">set_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00480">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::unused_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                                  {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_ || <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() == index);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(index, <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>), <span class="keyword">sizeof</span>(DualPagePointer)));</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ % 8 == 0);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(initial_owner_id.is_next_layer());</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!initial_owner_id.is_deleted());</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder, <span class="keyword">sizeof</span>(DualPagePointer));</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_size % 8 == 0);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_offset = next_offset_;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(index, slice);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// This is a new slot, so no worry on race.</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(index);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  slot-&gt;lengthes_.components.offset_ = new_offset;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  slot-&gt;lengthes_.components.unused_ = 0;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  slot-&gt;lengthes_.components.physical_record_length_ = record_size;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  slot-&gt;lengthes_.components.payload_length_ = <span class="keyword">sizeof</span>(DualPagePointer);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  slot-&gt;original_physical_record_length_ = record_size;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  slot-&gt;remainder_length_ = remainder;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  slot-&gt;original_offset_ = new_offset;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">if</span> (index == 0) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    consecutive_inserts_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (consecutive_inserts_) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// This record must be the only full-length slice, so the check is simpler</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prev_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index - 1);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">if</span> (prev_slice &gt; slice) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      consecutive_inserts_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  slot-&gt;tid_.lock_.reset();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  slot-&gt;tid_.xct_id_ = initial_owner_id;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  *<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">get_next_layer_from_offsets</a>(new_offset, remainder) = pointer;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a05c12e467155284686fe0a71dc617a2e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">foedus::storage::masstree::MasstreeBorderPage::set_slice</a></div><div class="ttdeci">void set_slice(SlotIndex index, KeySlice slice) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00805">masstree_page_impl.hpp:805</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8a9c60937a3287ce6b73ea104a29d999"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">foedus::storage::masstree::MasstreeBorderPage::get_new_slot</a></div><div class="ttdeci">Slot * get_new_slot(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00643">masstree_page_impl.hpp:643</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6ce21d6a92abc597380b8385509464ed"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">foedus::storage::masstree::MasstreeBorderPage::can_accomodate</a></div><div class="ttdeci">bool can_accomodate(SlotIndex new_index, KeyLength remainder_length, PayloadLength payload_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01570">masstree_page_impl.hpp:1570</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ae8535da84525f0147643f5f827d83844"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">foedus::storage::masstree::MasstreeBorderPage::get_next_layer_from_offsets</a></div><div class="ttdeci">DualPagePointer * get_next_layer_from_offsets(DataOffset record_offset, KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00782">masstree_page_impl.hpp:782</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed" title="foedus::storage::masstree\l::MasstreeBorderPage::can\l_accomodate" alt="" coords="270,109,451,165"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="813,182,1020,223"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="830,43,1003,99"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_new_slot" alt="" coords="551,240,729,296"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer_from_offsets" alt="" coords="271,291,450,347"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="255,371,467,413"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="274,437,447,478"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="299,502,422,543"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="272,567,449,609"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="299,633,422,674"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4" title="foedus::xct::McsRwLock\l::reset" alt="" coords="278,698,443,739"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e" title="foedus::storage::masstree\l::MasstreeBorderPage::set_slice" alt="" coords="255,763,467,805"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41" title="Returns usable data space in bytes. " alt="" coords="515,123,765,165"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai..." alt="" coords="537,43,743,99"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1082,108,1255,164"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1324,61,1484,88"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1317,115,1491,157"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload_from_offsets" alt="" coords="543,320,737,376"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="827,320,1006,376"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="544,567,736,609"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="832,567,1001,609"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1068,567,1269,609"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1McsRwLock.html#a252a31f1689940909fe3520162b685f7" title="foedus::xct::McsRwLock\l::set_next_writer" alt="" coords="557,730,723,771"/>
<area shape="rect" id="node25" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="553,665,727,706"/>
<area shape="rect" id="node24" href="structfoedus_1_1xct_1_1McsRwLock.html#a0bd9c402804ed75f85852e0f9e429cba" title="foedus::xct::McsRwLock\l::xchg_next_writer" alt="" coords="834,730,999,771"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a2be77538e13226dbc44134039be0dc73_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="255,13,428,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7ca15bf233b941d860679b88c8bc87f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::reserve_record_space </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a>&#160;</td>
          <td class="paramname"><em>initial_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Installs a new physical record that doesn't exist logically (delete bit on). </p>
<p>This sets 1) slot, 2) suffix key, and 3) XctId. Payload is not set yet. This is executed as a system transaction. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">1322</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01105">foedus::storage::masstree::calculate_suffix_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01570">can_accomodate()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00643">get_new_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="xct__id_8hpp_source.html#l01040">foedus::xct::XctId::is_deleted()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00168">foedus::storage::masstree::MasstreePage::is_locked()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__id_8hpp_source.html#l00075">foedus::storage::masstree::kMaxKeyLength</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="xct__id_8hpp_source.html#l01134">foedus::xct::RwLockableXctId::lock_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00537">foedus::storage::masstree::MasstreeBorderPage::Slot::original_offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00532">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="xct__id_8hpp_source.html#l00803">foedus::xct::McsRwLock::reset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00805">set_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00480">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::unused_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                               {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_ || initial_owner_id.is_deleted());</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a> || remainder_length == <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length != <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a> || payload_count == <span class="keyword">sizeof</span>(DualPagePointer));</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_ || <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() == index);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(index, remainder_length, payload_count));</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ % 8 == 0);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(remainder_length);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder_length, payload_count);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_size % 8 == 0);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_offset = next_offset_;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(index, slice);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// This is a new slot, so no worry on race.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(index);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  slot-&gt;lengthes_.components.offset_ = new_offset;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  slot-&gt;lengthes_.components.unused_ = 0;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  slot-&gt;lengthes_.components.physical_record_length_ = record_size;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  slot-&gt;lengthes_.components.payload_length_ = payload_count;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  slot-&gt;original_physical_record_length_ = record_size;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  slot-&gt;remainder_length_ = remainder_length;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  slot-&gt;original_offset_ = new_offset;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">if</span> (index == 0) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    consecutive_inserts_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (consecutive_inserts_) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="comment">// do we have to turn off consecutive_inserts_ now?</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prev_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index - 1);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> prev_klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index - 1);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (prev_slice &gt; slice || (prev_slice == slice &amp;&amp; prev_klen &gt; remainder_length)) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      consecutive_inserts_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  }</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  slot-&gt;tid_.lock_.reset();</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  slot-&gt;tid_.xct_id_ = initial_owner_id;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (suffix_length &gt; 0) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(new_offset);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    std::memcpy(record, suffix, suffix_length);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length_aligned = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(suffix_length);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// zero-padding</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">if</span> (suffix_length_aligned &gt; suffix_length) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      std::memset(record + suffix_length, 0, suffix_length_aligned - suffix_length);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a05c12e467155284686fe0a71dc617a2e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">foedus::storage::masstree::MasstreeBorderPage::set_slice</a></div><div class="ttdeci">void set_slice(SlotIndex index, KeySlice slice) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00805">masstree_page_impl.hpp:805</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8a9c60937a3287ce6b73ea104a29d999"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">foedus::storage::masstree::MasstreeBorderPage::get_new_slot</a></div><div class="ttdeci">Slot * get_new_slot(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00643">masstree_page_impl.hpp:643</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6ce21d6a92abc597380b8385509464ed"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">foedus::storage::masstree::MasstreeBorderPage::can_accomodate</a></div><div class="ttdeci">bool can_accomodate(SlotIndex new_index, KeyLength remainder_length, PayloadLength payload_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01570">masstree_page_impl.hpp:1570</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a575ba44804b98a334fc66eedf4b18d70"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">foedus::storage::masstree::calculate_suffix_length</a></div><div class="ttdeci">KeyLength calculate_suffix_length(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01105">masstree_page_impl.hpp:1105</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1324,65,1484,91"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1317,172,1491,213"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed" title="foedus::storage::masstree\l::MasstreeBorderPage::can\l_accomodate" alt="" coords="270,165,451,221"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="813,325,1020,367"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="830,82,1003,138"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_new_slot" alt="" coords="551,346,729,402"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="271,477,450,533"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="271,397,450,453"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="255,557,467,599"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="274,623,447,664"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148" title="foedus::xct::XctId\l::is_deleted" alt="" coords="299,688,422,729"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="272,753,449,795"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4" title="foedus::xct::McsRwLock\l::reset" alt="" coords="278,819,443,860"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e" title="foedus::storage::masstree\l::MasstreeBorderPage::set_slice" alt="" coords="255,884,467,925"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41" title="Returns usable data space in bytes. " alt="" coords="515,179,765,220"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai..." alt="" coords="537,98,743,154"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1082,115,1255,171"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="537,427,743,468"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="544,753,736,795"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="832,753,1001,795"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1068,753,1269,795"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1McsRwLock.html#a252a31f1689940909fe3520162b685f7" title="foedus::xct::McsRwLock\l::set_next_writer" alt="" coords="557,884,723,925"/>
<area shape="rect" id="node24" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="553,819,727,860"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1McsRwLock.html#a0bd9c402804ed75f85852e0f9e429cba" title="foedus::xct::McsRwLock\l::xchg_next_writer" alt="" coords="834,884,999,925"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ac7ca15bf233b941d860679b88c8bc87f_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="255,13,428,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a05c12e467155284686fe0a71dc617a2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::masstree::MasstreeBorderPage::set_slice </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00805">805</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01417">append_next_layer_snapshot()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00345">foedus::storage::masstree::SplitBorder::migrate_records()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">reserve_initially_next_layer()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                                                                    {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    slices_[index] = slice;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a05c12e467155284686fe0a71dc617a2e_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a05c12e467155284686fe0a71dc617a2e_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a05c12e467155284686fe0a71dc617a2e_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a05c12e467155284686fe0a71dc617a2e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="267,5,470,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="265,85,472,141"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#af12f943f013c35e9b4a549afd4075920" title="Subroutine to construct a new page. " alt="" coords="282,165,455,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="523,231,724,287"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="523,311,724,367"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="520,84,727,140"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="775,238,948,279"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="537,165,710,206"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a68797699a249ca9320a08038d1cdabbc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> foedus::storage::masstree::MasstreeBorderPage::to_record_length </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns minimal physical_record_length_ for the given remainder/payload length. </p>
<dl class="section attention"><dt>Attention</dt><dd>this doesn't count the space for <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html" title="Fix-sized slot for each record, which is placed at the end of data region. ">Slot</a> nor slices. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai...">required_data_space()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">674</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l01116">foedus::storage::masstree::calculate_suffix_length_aligned()</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8hpp_source.html#l01417">append_next_layer_snapshot()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00298">initialize_layer_root()</a>, <a class="el" href="masstree__split__impl_8cpp_source.html#l00345">foedus::storage::masstree::SplitBorder::migrate_records()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01447">replace_next_layer_snapshot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00687">required_data_space()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01375">reserve_initially_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01322">reserve_record_space()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                  {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length_aligned = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> suffix_length_aligned + <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a907f46e4f7d427806529dd8e2e03dd9c"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">foedus::storage::masstree::calculate_suffix_length_aligned</a></div><div class="ttdeci">KeyLength calculate_suffix_length_aligned(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01116">masstree_page_impl.hpp:1116</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="455,5,615,32"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="227,52,400,108"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="448,59,621,101"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a68797699a249ca9320a08038d1cdabbc_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05" title="Installs a next layer pointer. " alt="" coords="753,216,955,272"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23" title="Copy the initial record that will be the only record for a new root page. " alt="" coords="496,5,703,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#af12f943f013c35e9b4a549afd4075920" title="Subroutine to construct a new page. " alt="" coords="251,463,424,519"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f" title="Same as above, except this is used to transform an existing record at end to a next layer pointer..." alt="" coords="236,543,439,599"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5" title="returns the byte size of required contiguous space in data_ to insert a new record of the given remai..." alt="" coords="234,252,441,308"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73" title="For creating a record that is initially a next&#45;layer. " alt="" coords="753,347,955,403"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f" title="Installs a new physical record that doesn&#39;t exist logically (delete bit on). " alt="" coords="753,136,955,192"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="227,71,448,127"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535" title="A physical&#45;only method to initialize this page as a volatile page of a layer&#45;root pointed from the gi..." alt="" coords="751,5,957,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="1005,143,1179,185"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="513,470,686,511"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed" title="foedus::storage::masstree\l::MasstreeBorderPage::can\l_accomodate" alt="" coords="509,332,690,388"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56" title="Slightly different from can_accomodate() as follows: " alt="" coords="509,252,690,308"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a14aa45c7514f2a2d83dc7a138c24ecd0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> foedus::storage::masstree::MasstreeBorderPage::to_slot_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a> *&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00649">649</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                                                                       {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    int64_t index = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - slot - 1;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &gt;= 0);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; static_cast&lt;int64_t&gt;(<span class="keyword">sizeof</span>(data_) / <span class="keyword">sizeof</span>(Slot)));</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a><span class="keyword">&gt;</span>(index);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14aa45c7514f2a2d83dc7a138c24ecd0_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14aa45c7514f2a2d83dc7a138c24ecd0_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14aa45c7514f2a2d83dc7a138c24ecd0_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a14aa45c7514f2a2d83dc7a138c24ecd0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="464,31,653,87"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="227,75,416,131"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="701,31,875,87"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd" title="Resolves a &quot;moved&quot; record. " alt="" coords="923,31,1096,87"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1144,31,1331,87"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1379,39,1575,80"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1623,39,1843,80"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1892,5,2100,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1891,71,2101,112"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="2149,5,2344,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2392,39,2587,80"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2635,39,2797,80"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2149,71,2344,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab905ff02e9f747f00d44e72ffc16f546"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a> foedus::storage::masstree::MasstreeBorderPage::track_moved_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>old_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">xct::WriteXctAccess</a> *&#160;</td>
          <td class="paramname"><em>write_set</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. ">StorageManager::track_moved_record()</a> </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">534</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00139">foedus::storage::masstree::MasstreePage::has_foster_child()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00111">foedus::storage::masstree::MasstreePage::is_foster_major_null()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00110">foedus::storage::masstree::MasstreePage::is_foster_minor_null()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00169">foedus::storage::masstree::MasstreePage::is_moved()</a>, <a class="el" href="xct__id_8hpp_source.html#l01142">foedus::xct::RwLockableXctId::is_moved()</a>, <a class="el" href="xct__id_8hpp_source.html#l01143">foedus::xct::RwLockableXctId::is_next_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="page_8hpp_source.html#l00050">foedus::storage::kMasstreeBorderPageType</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00649">to_slot_index()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00848">foedus::storage::masstree::MasstreeStoragePimpl::track_moved_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                        {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_address-&gt;is_moved() || owner_address-&gt;is_next_layer());</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().get_page_type() == <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">kMasstreeBorderPageType</a>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="comment">// Slot begins with TID, so it&#39;s also the slot address</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  Slot* slot = <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(owner_address);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(&amp;slot-&gt;tid_ == owner_address);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> original_index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">to_slot_index</a>(slot);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(original_index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(original_index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = slot-&gt;remainder_length_;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="comment">// If it&#39;s originally a next-layer record, why we took it as a record? This shouldn&#39;t happen.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder != <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(original_index)) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818">track_moved_record_next_layer</a>(engine, owner_address);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// otherwise, we can track without key information within this layer.</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// the slice and key length is enough to identify the record.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved</a>());</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">has_foster_child</a>());</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23">is_foster_minor_null</a>());</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97">is_foster_major_null</a>());</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(original_index);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(original_index);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="comment">// if remainder &lt;= 8 : this layer can have only one record that has this slice and this length.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// if remainder &gt; 8  : this layer has either the exact record, or it&#39;s now a next layer pointer.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// recursively track. although probably it&#39;s only one level</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>* cur_page = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    = engine-&gt;get_memory_manager()-&gt;get_global_volatile_page_resolver();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    cur_page = cur_page-&gt;track_foster_child(slice, resolver);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="comment">// now cur_page must be the page that contains the record.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="comment">// the only exception is</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="comment">// 1) again the record is being moved concurrently</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="comment">// 2) the record was moved to another layer</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index = cur_page-&gt;find_key(slice, suffix, remainder);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (index == <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="comment">// this can happen rarely because we are not doing the stable version trick here.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="comment">// this is rare, so we just abort. no safety violation.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Very interesting. moved record not found due to concurrent updates&quot;</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    Slot* cur_slot = cur_page-&gt;get_slot(index);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    xct::RwLockableXctId* new_owner_address = &amp;cur_slot-&gt;tid_;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">char</span>* new_record_address = cur_page-&gt;get_record(index);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">if</span> (cur_page-&gt;does_point_to_layer(index)) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="comment">// another rare case. the record has been now moved to another layer.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment">// the record we are looking for can&#39;t be stored in next layer..</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Wtf 2. moved record in next layer not found. Probably due to concurrent thread&quot;</span>;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Interesting. moved record are now in another layer. further track.&quot;</span>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">return</span> cur_page-&gt;track_moved_record_next_layer(engine, new_owner_address);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// Otherwise, this is it!</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// be careful, we give get_record() as &quot;payload&quot;. the word &quot;payload&quot; is a bit overused here.</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">return</span> xct::TrackMovedRecordResult(new_owner_address, new_record_address);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  }</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_adc22d21883e15b87cd5ff6b6ec513c35"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">foedus::storage::masstree::MasstreePage::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00169">masstree_page_impl.hpp:169</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a698b417f5e89daf68ebd78044222bb23"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23">foedus::storage::masstree::MasstreePage::is_foster_minor_null</a></div><div class="ttdeci">bool is_foster_minor_null() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00110">masstree_page_impl.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a7a9d09469e106d14513932f3aebeef97"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97">foedus::storage::masstree::MasstreePage::is_foster_major_null</a></div><div class="ttdeci">bool is_foster_major_null() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00111">masstree_page_impl.hpp:111</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">foedus::storage::kMasstreeBorderPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00050">page.hpp:50</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14aa45c7514f2a2d83dc7a138c24ecd0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">foedus::storage::masstree::MasstreeBorderPage::to_slot_index</a></div><div class="ttdeci">SlotIndex to_slot_index(const Slot *slot) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00649">masstree_page_impl.hpp:649</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_abfe53cdc69964e52901556b1e8d9de9e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">foedus::storage::masstree::MasstreePage::has_foster_child</a></div><div class="ttdeci">bool has_foster_child() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00139">masstree_page_impl.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a32d92c1f8e858d5cd407be8846f450a3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage</a></div><div class="ttdeci">MasstreeBorderPage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a1429b13cd5efb94c7b4735bf84087818"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818">foedus::storage::masstree::MasstreeBorderPage::track_moved_record_next_layer</a></div><div class="ttdeci">xct::TrackMovedRecordResult track_moved_record_next_layer(Engine *engine, xct::RwLockableXctId *old_address)</div><div class="ttdoc">This one further tracks it to next layer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00609">masstree_page_impl.cpp:609</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="777,572,965,628"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1521,780,1728,821"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1776,842,1983,884"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="508,864,716,905"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="1025,965,1247,1006"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="765,653,977,694"/>
<area shape="rect" id="node15" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="507,470,717,526"/>
<area shape="rect" id="node16" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="545,550,679,592"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e" title="foedus::storage::masstree\l::MasstreePage::has_foster_child" alt="" coords="243,136,459,177"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="525,616,699,657"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97" title="foedus::storage::masstree\l::MasstreePage::is_foster\l_major_null" alt="" coords="264,1506,437,1562"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23" title="foedus::storage::masstree\l::MasstreePage::is_foster\l_minor_null" alt="" coords="264,1718,437,1774"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="263,70,439,112"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a03782134d5ef0ebb8e187ddbd89f3c36" title="foedus::xct::RwLockableXct\lId::is_moved" alt="" coords="259,201,442,242"/>
<area shape="rect" id="node28" href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736" title="foedus::xct::RwLockableXct\lId::is_next_layer" alt="" coords="259,318,442,360"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0" title="foedus::storage::masstree\l::MasstreeBorderPage::to\l_slot_index" alt="" coords="525,682,699,738"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818" title="This one further tracks it to next layer. " alt="" coords="256,1163,445,1219"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1075,514,1197,556"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1295,770,1473,826"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="768,719,975,775"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1295,900,1473,956"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="1295,980,1473,1036"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1050,716,1222,757"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1298,704,1470,745"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="516,102,708,144"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="775,102,967,144"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="531,1857,693,1898"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1055,1665,1217,1706"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="551,201,673,242"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="525,1032,699,1073"/>
<area shape="rect" id="node32" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="525,1294,699,1336"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="523,1163,701,1219"/>
<area shape="rect" id="node37" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="511,1521,713,1562"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="510,1097,714,1138"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="785,1675,958,1731"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="512,1638,712,1680"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="784,1609,959,1650"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="1532,1312,1717,1368"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="519,1360,705,1416"/>
<area shape="rect" id="node49" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="519,1440,705,1496"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="1295,1112,1473,1168"/>
<area shape="rect" id="node33" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="770,1230,973,1272"/>
<area shape="rect" id="node34" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="1049,1260,1223,1301"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="782,1064,961,1120"/>
<area shape="rect" id="node38" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="794,1544,949,1585"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1061,1449,1211,1490"/>
<area shape="rect" id="node41" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="785,1478,958,1520"/>
<area shape="rect" id="node42" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="770,1347,973,1403"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1041,1576,1231,1617"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ab905ff02e9f747f00d44e72ffc16f546_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="243,31,416,87"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd" title="Resolves a &quot;moved&quot; record. " alt="" coords="464,31,637,87"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="685,31,872,87"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="920,39,1116,80"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1164,39,1384,80"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1433,5,1641,47"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1432,71,1643,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="1691,5,1885,47"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1933,39,2128,80"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2176,39,2339,80"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1691,71,1885,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1429b13cd5efb94c7b4735bf84087818"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a> foedus::storage::masstree::MasstreeBorderPage::track_moved_record_next_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>old_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This one further tracks it to next layer. </p>
<p>Instead it requires a non-null write_set. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">609</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l01120">find_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00312">foedus::storage::masstree::MasstreeIntermediatePage::find_minipage()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00287">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::find_pointer()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00144">foedus::storage::masstree::MasstreePage::get_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00098">foedus::storage::masstree::MasstreePage::get_low_fence()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00322">foedus::storage::masstree::MasstreeIntermediatePage::get_minipage()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00750">get_next_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00813">get_owner_id()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00732">get_record()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00073">foedus::storage::masstree::MasstreePage::header()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00084">foedus::storage::masstree::MasstreePage::is_border()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00100">foedus::storage::masstree::MasstreePage::is_high_fence_supremum()</a>, <a class="el" href="xct__id_8hpp_source.html#l01042">foedus::xct::XctId::is_next_layer()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, <a class="el" href="masstree__id_8hpp_source.html#l00132">foedus::storage::masstree::kInfimumSlice</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="page_8hpp_source.html#l00050">foedus::storage::kMasstreeBorderPageType</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00278">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::pointers_</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00263">foedus::storage::masstree::slice_key()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00649">to_slot_index()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00126">foedus::storage::masstree::MasstreePage::within_fences()</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00534">track_moved_record()</a>, and <a class="el" href="masstree__page__impl_8cpp_source.html#l00609">track_moved_record_next_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                     {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().get_page_type() == <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">kMasstreeBorderPageType</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_address-&gt;xct_id_.is_next_layer());</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  Slot* slot = <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(owner_address);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(&amp;slot-&gt;tid_ == owner_address);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> original_index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">to_slot_index</a>(slot);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(original_index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(original_index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(original_index));</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// The new masstree page layout leaves the original suffix untouched.</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// Thus, we can always retrieve the original key from it no matter whether</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// the record moved offset to expand. In case the record was expanded in-page,</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// we use original_xxx below.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = slot-&gt;remainder_length_;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder != <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>))) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;WTF. The original record was too short to get moved to next-layer, but it did?&quot;</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* original_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(original_index);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="keyword">const</span> uint8_t cur_layer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>();</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keyword">const</span> uint8_t next_layer = cur_layer + 1U;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> next_slice = <a class="code" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8">slice_key</a>(original_suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>));</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> next_remainder = remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* next_suffix = original_suffix + <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  VolatilePagePointer root_pointer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">get_next_layer</a>(original_index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">if</span> (root_pointer.is_null()) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Wtf. moved record in next layer not found. Probably due to concurrent thread&quot;</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keyword">const</span> memory::GlobalVolatilePageResolver&amp; resolver</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    = engine-&gt;get_memory_manager()-&gt;get_global_volatile_page_resolver();</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a>* cur_page</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>*<span class="keyword">&gt;</span>(resolver.resolve_offset(root_pointer));</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_page-&gt;get_low_fence() == <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">kInfimumSlice</a> &amp;&amp; cur_page-&gt;is_high_fence_supremum());</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_page-&gt;get_layer() == next_layer);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_page-&gt;get_layer() == next_layer);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_page-&gt;within_fences(next_slice));</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">if</span> (!cur_page-&gt;is_border()) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      MasstreeIntermediatePage* casted = <span class="keyword">reinterpret_cast&lt;</span>MasstreeIntermediatePage*<span class="keyword">&gt;</span>(cur_page);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      uint8_t index = casted-&gt;find_minipage(next_slice);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      MasstreeIntermediatePage::MiniPage&amp; minipage = casted-&gt;get_minipage(index);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      uint8_t index_mini = minipage.find_pointer(next_slice);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      VolatilePagePointer pointer = minipage.pointers_[index_mini].volatile_pointer_;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">if</span> (pointer.is_null()) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Wtf 1. moved record in next layer not found. Probably due to concurrent thread&quot;</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      cur_page = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a>*<span class="keyword">&gt;</span>(resolver.resolve_offset(pointer));</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_page-&gt;get_layer() == next_layer);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(cur_page-&gt;within_fences(next_slice));</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="comment">// now cur_page must be the page that contains the record.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// the only exception is</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="comment">// 1) again the record is being moved concurrently</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// 2) the record was moved to another layer</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>* casted = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>*<span class="keyword">&gt;</span>(cur_page);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">// we track foster child in border pages only</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    casted = casted-&gt;track_foster_child(next_slice, resolver);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(casted != <span class="keyword">this</span>);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index = casted-&gt;find_key(next_slice, next_suffix, next_remainder);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (index == <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>) {</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Very interesting. moved record not found due to concurrent updates&quot;</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    xct::RwLockableXctId* new_owner_address = casted-&gt;get_owner_id(index);</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_owner_address != owner_address);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordtype">char</span>* new_record_address = casted-&gt;get_record(index);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">if</span> (casted-&gt;does_point_to_layer(index)) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="comment">// the record has been now moved to yet another layer.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">if</span> (next_remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment">// the record we are looking for can&#39;t be stored in next layer..</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Wtf 2. moved record in next layer not found. Probably due to concurrent thread&quot;</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">return</span> xct::TrackMovedRecordResult();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      }</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      VLOG(0) &lt;&lt; <span class="stringliteral">&quot;Interesting. moved record are now in another layer. further track.&quot;</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="keywordflow">return</span> casted-&gt;track_moved_record_next_layer(engine, new_owner_address);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// be careful, we give get_record() as &quot;payload&quot;. the word &quot;payload&quot; is a bit overused here.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">return</span> xct::TrackMovedRecordResult(new_owner_address, new_record_address);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  }</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a9cffc20f29ad72d4edbeedece861c48f"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">foedus::storage::masstree::kInfimumSlice</a></div><div class="ttdeci">const KeySlice kInfimumSlice</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00132">masstree_id.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14c7383d33c5b6ddfcbab6b58ae80121"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">foedus::storage::masstree::MasstreeBorderPage::get_next_layer</a></div><div class="ttdeci">DualPagePointer * get_next_layer(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00750">masstree_page_impl.hpp:750</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">foedus::storage::kMasstreeBorderPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00050">page.hpp:50</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabfe21e7cd7f1a689891743d93c6996c8"><div class="ttname"><a href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8">foedus::storage::masstree::slice_key</a></div><div class="ttdeci">KeySlice slice_key(const void *be_bytes, KeyLength slice_length)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00263">masstree_id.hpp:263</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_a99e67179a5576a52a4710c700ac309f4"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">foedus::storage::DualPagePointer::volatile_pointer_</a></div><div class="ttdeci">VolatilePagePointer volatile_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00308">storage_id.hpp:308</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0b54c43dec6f8ba15472a25760a3ed07"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">foedus::storage::masstree::MasstreePage::get_layer</a></div><div class="ttdeci">uint8_t get_layer() const __attribute__((always_inline))</div><div class="ttdoc">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00144">masstree_page_impl.hpp:144</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14aa45c7514f2a2d83dc7a138c24ecd0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">foedus::storage::masstree::MasstreeBorderPage::to_slot_index</a></div><div class="ttdeci">SlotIndex to_slot_index(const Slot *slot) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00649">masstree_page_impl.hpp:649</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a32d92c1f8e858d5cd407be8846f450a3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage</a></div><div class="ttdeci">MasstreeBorderPage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a2b0cd6e79e07f9b2241d0123ffe00ad2"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">foedus::storage::masstree::MasstreePage::MasstreePage</a></div><div class="ttdeci">MasstreePage()=delete</div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="774,61,962,117"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="1508,603,1715,644"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="1055,11,1177,52"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b" title="Navigates a searching key&#45;slice to one of the record in this page. " alt="" coords="501,243,709,284"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f" title="foedus::storage::masstree\l::MasstreeBorderPage::get_record" alt="" coords="757,390,979,431"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f" title="Navigates a searching key&#45;slice to one of the mini pages in this page. " alt="" coords="1264,829,1449,885"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441" title="Navigates a searching key&#45;slice to one of pointers in this mini&#45;page. " alt="" coords="255,545,441,601"/>
<area shape="rect" id="node17" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="243,625,453,681"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="261,706,435,747"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b" title="foedus::storage::masstree\l::MasstreePage::get_low_fence" alt="" coords="246,771,450,812"/>
<area shape="rect" id="node20" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="281,836,415,878"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31" title="foedus::storage::masstree\l::MasstreeIntermediatePage\l::get_minipage" alt="" coords="255,902,441,958"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_layer" alt="" coords="259,414,437,470"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_owner_id" alt="" coords="1027,521,1205,577"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e" title="foedus::storage::masstree\l::MasstreePage::header" alt="" coords="261,1084,435,1126"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec" title="foedus::storage::masstree\l::MasstreePage::is_border" alt="" coords="518,1084,693,1126"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88" title="foedus::storage::masstree\l::MasstreePage::is_high\l_fence_supremum" alt="" coords="519,1477,692,1533"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="525,1150,686,1191"/>
<area shape="rect" id="node35" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="247,1267,449,1308"/>
<area shape="rect" id="node41" href="group__MASSTREE.html#gabfe21e7cd7f1a689891743d93c6996c8" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="261,1550,435,1591"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0" title="foedus::storage::masstree\l::MasstreeBorderPage::to\l_slot_index" alt="" coords="261,1450,435,1506"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79" title="foedus::storage::masstree\l::MasstreePage::within_fences" alt="" coords="248,1384,448,1426"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="1253,368,1460,410"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="1027,281,1205,337"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="762,243,974,284"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0" title="foedus::storage::masstree\l::MasstreeBorderPage::prefetch\l_additional_if_needed" alt="" coords="765,309,971,365"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_offset_in_bytes" alt="" coords="1027,361,1205,417"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="1027,441,1205,497"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83" title="Prefetch multiple contiguous cachelines to L1 cache. " alt="" coords="1030,215,1202,256"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#ga354bfce84ebf918859d54ba97b8ddc36" title="Prefetch one cacheline to L1 cache. " alt="" coords="1271,215,1443,256"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_record_payload" alt="" coords="516,414,695,470"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_suffix_length_aligned" alt="" coords="779,456,957,512"/>
<area shape="rect" id="node25" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1029,601,1203,657"/>
<area shape="rect" id="node26" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1277,586,1437,613"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1270,638,1443,679"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="773,1116,963,1158"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="787,1215,949,1256"/>
<area shape="rect" id="node36" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="528,1280,683,1322"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="793,1402,943,1443"/>
<area shape="rect" id="node39" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="519,1215,692,1256"/>
<area shape="rect" id="node40" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="504,1346,707,1402"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="791,1318,945,1359"/>
<area shape="rect" id="node42" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="504,1608,707,1650"/>
<area shape="rect" id="node43" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="781,1579,955,1620"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1429b13cd5efb94c7b4735bf84087818_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546" title="foedus::storage::masstree\l::MasstreeBorderPage::track\l_moved_record" alt="" coords="243,31,432,87"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff57df4d2b237e63e459d5fefe9d4cfb" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::track_moved_record" alt="" coords="480,31,653,87"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a2370f71beab1eb4b8b02e3ac9e4f29bd" title="Resolves a &quot;moved&quot; record. " alt="" coords="701,31,875,87"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="923,31,1109,87"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1157,39,1353,80"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1401,39,1621,80"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1671,5,1879,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1669,71,1880,112"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="1928,5,2123,47"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2171,39,2365,80"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2413,39,2576,80"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1928,71,2123,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a49c67f561e5748dbaf947cc22325a8a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::try_expand_record_in_page_physical </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>&#160;</td>
          <td class="paramname"><em>payload_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>record_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A physical-only method to expand a record within this page without any logical change. </p>
<dl class="section pre"><dt>Precondition</dt><dd>!header_.snapshot_: only for volatile page </dd>
<dd>
<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked()</a> &amp;&amp; !is_moved() </dd>
<dd>
get_slot(record_index)-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked()</a> &amp;&amp; !get_slot(record_index)-&gt;<a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved()</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>This method might fail if there isn't enough space. In that case it returns false. </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">360</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00660">available_space()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00560">foedus::storage::masstree::MasstreeBorderPage::Slot::does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00148">foedus::storage::masstree::MasstreePage::get_key_count()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00838">get_max_payload_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00625">get_next_offset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00758">get_record_from_offset()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00194">foedus::storage::masstree::MasstreePage::header_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00626">increase_next_offset()</a>, <a class="el" href="xct__id_8hpp_source.html#l01140">foedus::xct::RwLockableXctId::is_keylocked()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00168">foedus::storage::masstree::MasstreePage::is_locked()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00169">foedus::storage::masstree::MasstreePage::is_moved()</a>, <a class="el" href="xct__id_8hpp_source.html#l01142">foedus::xct::RwLockableXctId::is_moved()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00058">foedus::assorted::memory_fence_release()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00568">foedus::storage::masstree::MasstreeBorderPage::Slot::read_lengthes_oneshot()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00504">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00674">to_record_length()</a>, <a class="el" href="masstree__page__impl_8cpp_source.html#l00708">verify_slot_lengthes()</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00577">foedus::storage::masstree::MasstreeBorderPage::Slot::write_lengthes_oneshot()</a>.</p>

<p>Referenced by <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                          {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved</a>());</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  DVLOG(2) &lt;&lt; <span class="stringliteral">&quot;Expanding record.. current max=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506">get_max_payload_length</a>(record_index)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;, which must become &quot;</span> &lt;&lt; payload_count;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060">verify_slot_lengthes</a>(record_index));</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  Slot* old_slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(record_index);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!old_slot-&gt;tid_.is_moved());</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(old_slot-&gt;tid_.is_keylocked());</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!old_slot-&gt;does_point_to_layer());</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keyword">const</span> SlotLengthPart lengthes = old_slot-&gt;read_lengthes_oneshot();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length = old_slot-&gt;remainder_length_;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder_length, payload_count);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> available = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a>();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// 1. Trivial expansion if the record is placed at last. Fastest.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">get_next_offset</a>() == lengthes.offset_ + lengthes.physical_record_length_) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> diff = record_length - lengthes.physical_record_length_;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Lucky, expanding a record at last record region. diff=&quot;</span> &lt;&lt; diff;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (available &gt;= diff) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      DVLOG(2) &lt;&lt; <span class="stringliteral">&quot;woo. yes, we can just increase the length&quot;</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      old_slot-&gt;lengthes_.components.physical_record_length_ = record_length;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">increase_next_offset</a>(diff);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// 2. In-page expansion. Fast.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (available &gt;= record_length) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    DVLOG(2) &lt;&lt; <span class="stringliteral">&quot;Okay, in-page record expansion.&quot;</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// We have to make sure all threads see a valid state, either new or old.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    SlotLengthPart new_lengthes = lengthes;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    new_lengthes.offset_ = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">get_next_offset</a>();</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    new_lengthes.physical_record_length_ = record_length;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* old_record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(lengthes.offset_);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">char</span>* new_record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(new_lengthes.offset_);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// 2-a. Create the new record region.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (lengthes.physical_record_length_ &gt; 0) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      std::memcpy(new_record, old_record, lengthes.physical_record_length_);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// 2-b. announce the new location in one-shot.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    old_slot-&gt;write_lengthes_oneshot(new_lengthes);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// We don&#39;t have to change TID here because we did nothing logically.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Reading transactions are safe to read either old or new record regions.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// See comments in MasstreeCommonLogType::apply_record_prepare() for how we make it safe</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment">// for writing transactions.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">increase_next_offset</a>(record_length);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// 3. ouch. we need to split the page to complete it. beyond this method.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Umm, we need to split this page for record expansion. available=&quot;</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    &lt;&lt; available &lt;&lt; <span class="stringliteral">&quot;, record_length=&quot;</span> &lt;&lt; record_length</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;, record_index=&quot;</span> &lt;&lt; record_index</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;, key_count=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a1781897598dfbd41a6d1291d0c5dc060"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060">foedus::storage::masstree::MasstreeBorderPage::verify_slot_lengthes</a></div><div class="ttdeci">bool verify_slot_lengthes(SlotIndex index) const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00708">masstree_page_impl.cpp:708</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9c0b897c662c4fdaaff4ac5b131da506"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506">foedus::storage::masstree::MasstreeBorderPage::get_max_payload_length</a></div><div class="ttdeci">PayloadLength get_max_payload_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00838">masstree_page_impl.hpp:838</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_adc22d21883e15b87cd5ff6b6ec513c35"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">foedus::storage::masstree::MasstreePage::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00169">masstree_page_impl.hpp:169</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a938979fd6b5ebe6bbfbec5d2a756ae05"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">foedus::storage::masstree::MasstreeBorderPage::get_next_offset</a></div><div class="ttdeci">DataOffset get_next_offset() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00625">masstree_page_impl.hpp:625</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a293c8b397164e1f9ee32e69835846fb0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">foedus::storage::masstree::MasstreeBorderPage::increase_next_offset</a></div><div class="ttdeci">void increase_next_offset(DataOffset length)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00626">masstree_page_impl.hpp:626</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a477537aab66e512a826f74d570397f41"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">foedus::storage::masstree::MasstreeBorderPage::available_space</a></div><div class="ttdeci">DataOffset available_space() const </div><div class="ttdoc">Returns usable data space in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00660">masstree_page_impl.hpp:660</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gafc1110de4c6bb85c7e1f7feccc27f6d7"><div class="ttname"><a href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">foedus::assorted::memory_fence_release</a></div><div class="ttdeci">void memory_fence_release()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_release). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00058">atomic_fences.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41" title="Returns usable data space in bytes. " alt="" coords="532,76,783,117"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="831,76,1037,117"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a96be3b659b1812ecd7efbf601ea8c929" title="foedus::storage::masstree\l::MasstreeBorderPage::Slot\l::does_point_to_layer" alt="" coords="566,387,749,443"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_max_payload_length" alt="" coords="290,177,469,233"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="554,159,761,200"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_next_offset" alt="" coords="290,438,469,494"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b" title="Offset versions. " alt="" coords="290,518,469,574"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0" title="foedus::storage::masstree\l::MasstreeBorderPage::increase\l_next_offset" alt="" coords="275,598,484,654"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a610d8c1bfd1d86dcde181c3fb0020f0c" title="foedus::xct::RwLockableXct\lId::is_keylocked" alt="" coords="288,679,471,720"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b" title="foedus::storage::masstree\l::MasstreePage::is_locked" alt="" coords="291,744,468,785"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35" title="foedus::storage::masstree\l::MasstreePage::is_moved" alt="" coords="291,809,467,851"/>
<area shape="rect" id="node25" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a03782134d5ef0ebb8e187ddbd89f3c36" title="foedus::xct::RwLockableXct\lId::is_moved" alt="" coords="288,875,471,916"/>
<area shape="rect" id="node27" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="293,940,466,981"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ab8cb74332854cf84d1cfee7805eb3415" title="Reads lengthes_ of this slot in one&#45;shot. " alt="" coords="288,1006,471,1062"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc" title="returns minimal physical_record_length_ for the given remainder/payload length. " alt="" coords="847,318,1021,374"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060" title="foedus::storage::masstree\l::MasstreeBorderPage::verify\l_slot_lengthes" alt="" coords="285,257,474,313"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a5bf84675a6aae35cdfde862a1ffbe11f" title="Writes lengthes_ in one&#45;shot. " alt="" coords="288,1086,471,1142"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="873,399,995,440"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076" title="This might be affected by concurrent threads. " alt="" coords="566,238,749,294"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0" title="foedus::storage::masstree\l::MasstreeBorderPage::Slot\l::get_aligned_suffix_length" alt="" coords="843,238,1025,294"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="1099,253,1273,309"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="1341,329,1501,355"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="1335,260,1508,301"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1McsRwLock.html#adc5e6612e3cecf3d2f15d02237b4ef8f" title="foedus::xct::McsRwLock\l::is_locked" alt="" coords="575,679,740,720"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="561,744,753,785"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="849,744,1019,785"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="1085,744,1287,785"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78" title="foedus::storage::PageVersion\l::is_moved" alt="" coords="561,809,753,851"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1PageVersionStatus.html#ac3214863fa74628187ce46b2879994ae" title="foedus::storage::PageVersion\lStatus::is_moved" alt="" coords="838,809,1030,851"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="596,875,719,916"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a49c67f561e5748dbaf947cc22325a8a5_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="275,13,448,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1781897598dfbd41a6d1291d0c5dc060"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::verify_slot_lengthes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>whether the length information seems okay. used only for assertions. </dd></dl>

<p>Definition at line <a class="el" href="masstree__page__impl_8cpp_source.html#l00708">708</a> of file <a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00492">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00560">foedus::storage::masstree::MasstreeBorderPage::Slot::does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00553">foedus::storage::masstree::MasstreeBorderPage::Slot::get_max_payload_peek()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00631">get_slot()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00086">foedus::storage::masstree::kInitiallyNextLayer</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00510">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00472">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00537">foedus::storage::masstree::MasstreeBorderPage::Slot::original_offset_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00532">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00487">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00478">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a>, and <a class="el" href="masstree__page__impl_8hpp_source.html#l00527">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a>.</p>

<p>Referenced by <a class="el" href="masstree__page__impl_8cpp_source.html#l00360">try_expand_record_in_page_physical()</a>, and <a class="el" href="masstree__storage__verify_8cpp_source.html#l00201">foedus::storage::masstree::MasstreeStoragePimpl::verify_single_thread_border()</a>.</p>
<div class="fragment"><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                                                                   {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keyword">const</span> Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  SlotLengthPart lengthes = slot-&gt;lengthes_.components;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">if</span> (lengthes.offset_ % 8 != 0) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span> (lengthes.physical_record_length_ % 8 != 0) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">if</span> (lengthes.offset_ + lengthes.physical_record_length_ &gt; <span class="keyword">sizeof</span>(data_)) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span> (slot-&gt;remainder_length_ == <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keywordflow">if</span> (!slot-&gt;does_point_to_layer()) {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// the only case we move the record in-page is to get a larger record size.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">if</span> (lengthes.offset_ != slot-&gt;original_offset_) {</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordflow">if</span> (lengthes.offset_ &lt; slot-&gt;original_offset_) {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">if</span> (lengthes.physical_record_length_ &lt;= slot-&gt;original_physical_record_length_) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">if</span> (slot-&gt;does_point_to_layer()) {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (slot-&gt;remainder_length_ &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordflow">if</span> (lengthes.payload_length_ != <span class="keyword">sizeof</span>(DualPagePointer)) {</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (lengthes.payload_length_ &gt; slot-&gt;get_max_payload_peek()) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a96be3b659b1812ecd7efbf601ea8c929" title="foedus::storage::masstree\l::MasstreeBorderPage::Slot\l::does_point_to_layer" alt="" coords="255,5,437,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076" title="This might be affected by concurrent threads. " alt="" coords="255,85,437,141"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="243,166,449,207"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="539,13,662,54"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0" title="foedus::storage::masstree\l::MasstreeBorderPage::Slot\l::get_aligned_suffix_length" alt="" coords="509,85,692,141"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c" title="foedus::storage::masstree\l::calculate_suffix_length\l_aligned" alt="" coords="752,85,925,141"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="980,71,1140,97"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70" title="foedus::storage::masstree\l::calculate_suffix_length" alt="" coords="973,122,1147,163"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="497,166,704,207"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_icgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a1781897598dfbd41a6d1291d0c5dc060_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5" title="A physical&#45;only method to expand a record within this page without any logical change. " alt="" coords="243,5,464,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="260,85,447,141"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="536,13,709,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a09d587cc38996109b753a7704fa33736" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_layer" alt="" coords="781,85,960,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="512,163,733,219"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1008,85,1181,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1229,85,1403,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a23e978dad8a0a78a8b4fa49181d7352b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::will_conflict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>be_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether inserting the key will cause creation of a new next layer. </p>
<p>This is mainly used for assertions. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01690">1690</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00144">foedus::storage::masstree::MasstreePage::get_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00129">foedus::storage::masstree::kSliceLen</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00279">foedus::storage::masstree::slice_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                              {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">will_conflict</a>(index, slice, remainder);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0b54c43dec6f8ba15472a25760a3ed07"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">foedus::storage::masstree::MasstreePage::get_layer</a></div><div class="ttdeci">uint8_t get_layer() const __attribute__((always_inline))</div><div class="ttdoc">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00144">masstree_page_impl.hpp:144</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a23e978dad8a0a78a8b4fa49181d7352b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">foedus::storage::masstree::MasstreeBorderPage::will_conflict</a></div><div class="ttdeci">bool will_conflict(SlotIndex index, const char *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">Returns whether inserting the key will cause creation of a new next layer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01690">masstree_page_impl.hpp:1690</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabdb6a706258be601e621e58653bf528e"><div class="ttname"><a href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">foedus::storage::masstree::slice_layer</a></div><div class="ttdeci">KeySlice slice_layer(const void *be_bytes, KeyLength key_length, Layer current_layer)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00279">masstree_id.hpp:279</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a23e978dad8a0a78a8b4fa49181d7352b_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a23e978dad8a0a78a8b4fa49181d7352b_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a23e978dad8a0a78a8b4fa49181d7352b_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a23e978dad8a0a78a8b4fa49181d7352b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="232,5,407,47"/>
<area shape="rect" id="node3" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="233,71,406,112"/>
<area shape="rect" id="node4" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="455,41,657,83"/>
<area shape="rect" id="node5" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="705,71,879,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae3039ec43fe6ced0332acec2ce9210aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::will_conflict </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Overload to receive slice. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01699">1699</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00820">get_remainder_length()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00129">foedus::storage::masstree::kSliceLen</a>.</p>
<div class="fragment"><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                             {</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; 0);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordflow">if</span> (slice != <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index)) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> rec_remainder = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="keywordflow">if</span> (remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a> &amp;&amp; rec_remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// need to create next layer</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">return</span> (remainder == rec_remainder);  <span class="comment">// if same, it&#39;s exactly the same key</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae3039ec43fe6ced0332acec2ce9210aa_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae3039ec43fe6ced0332acec2ce9210aa_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae3039ec43fe6ced0332acec2ce9210aa_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_ae3039ec43fe6ced0332acec2ce9210aa_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa" title="foedus::storage::masstree\l::MasstreeBorderPage::get\l_remainder_length" alt="" coords="249,5,427,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="232,86,444,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="492,13,699,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="747,13,953,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aecb37efdc8f717bb2b978861d8d1a772"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::will_contain_next_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>be_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether the record is a next-layer pointer that would contain the key. </p>

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01714">1714</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00144">foedus::storage::masstree::MasstreePage::get_layer()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00129">foedus::storage::masstree::kSliceLen</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00279">foedus::storage::masstree::slice_layer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                              {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">will_contain_next_layer</a>(index, slice, remainder);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0b54c43dec6f8ba15472a25760a3ed07"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">foedus::storage::masstree::MasstreePage::get_layer</a></div><div class="ttdeci">uint8_t get_layer() const __attribute__((always_inline))</div><div class="ttdoc">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00144">masstree_page_impl.hpp:144</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabdb6a706258be601e621e58653bf528e"><div class="ttname"><a href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">foedus::storage::masstree::slice_layer</a></div><div class="ttdeci">KeySlice slice_layer(const void *be_bytes, KeyLength key_length, Layer current_layer)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00279">masstree_id.hpp:279</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aecb37efdc8f717bb2b978861d8d1a772"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">foedus::storage::masstree::MasstreeBorderPage::will_contain_next_layer</a></div><div class="ttdeci">bool will_contain_next_layer(SlotIndex index, const char *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">Returns whether the record is a next-layer pointer that would contain the key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01714">masstree_page_impl.hpp:1714</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb37efdc8f717bb2b978861d8d1a772_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb37efdc8f717bb2b978861d8d1a772_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb37efdc8f717bb2b978861d8d1a772_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_aecb37efdc8f717bb2b978861d8d1a772_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07" title="Layer&#45;0 stores the first 8 byte slice, Layer&#45;1 next 8 byte... " alt="" coords="232,5,407,47"/>
<area shape="rect" id="node3" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e" title="Extract a part of a big&#45;endian byte array of given length as KeySlice. " alt="" coords="233,71,406,112"/>
<area shape="rect" id="node4" href="group__MASSTREE.html#gaa6842bc28437a9d4319e51471f4e3237" title="Convert a big&#45;endian byte array of given length to KeySlice. " alt="" coords="455,41,657,83"/>
<area shape="rect" id="node5" href="group__MASSTREE.html#ga6818c708d9ac34b794cb1f91fa6f5296" title="Convert a big&#45;endian byte array of at least 8&#45;bytes&#45;length to KeySlice. " alt="" coords="705,71,879,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a571e2edc8ea6de6e92ea0e9110c0cc88"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::masstree::MasstreeBorderPage::will_contain_next_layer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>&#160;</td>
          <td class="paramname"><em>slice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>&#160;</td>
          <td class="paramname"><em>remainder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l01723">1723</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00796">does_point_to_layer()</a>, <a class="el" href="masstree__page__impl_8hpp_source.html#l00801">get_slice()</a>, <a class="el" href="masstree__id_8hpp_source.html#l00163">foedus::storage::masstree::kBorderPageMaxSlots</a>, and <a class="el" href="masstree__id_8hpp_source.html#l00129">foedus::storage::masstree::kSliceLen</a>.</p>
<div class="fragment"><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                             {</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; 0);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keywordflow">return</span> slice == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index) &amp;&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index) &amp;&amp; remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a571e2edc8ea6de6e92ea0e9110c0cc88_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a571e2edc8ea6de6e92ea0e9110c0cc88_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a571e2edc8ea6de6e92ea0e9110c0cc88_cgraph" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_a571e2edc8ea6de6e92ea0e9110c0cc88_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8" title="foedus::storage::masstree\l::MasstreeBorderPage::does\l_point_to_layer" alt="" coords="244,30,432,86"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slice" alt="" coords="232,111,444,152"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145" title="foedus::storage::masstree\l::MasstreeBorderPage::get_slot" alt="" coords="492,5,699,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="534,71,657,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec" title="physical key count (those keys might be deleted) in this page. " alt="" coords="747,5,953,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a20c23d249173f1a2733f78eb4fc5899f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>defined in <a class="el" href="masstree__page__debug_8cpp.html">masstree_page_debug.cpp</a>. </p>

<p>Definition at line <a class="el" href="masstree__page__debug_8cpp_source.html#l00080">80</a> of file <a class="el" href="masstree__page__debug_8cpp_source.html">masstree_page_debug.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                                                   {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;MasstreeBorderPage&gt;&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a76d989a7033cb8a6e331aea7e8a77475">describe_masstree_page_common</a>(&amp;o, v);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;consecutive_inserts_&gt;&quot;</span> &lt;&lt; v.consecutive_inserts_ &lt;&lt; <span class="stringliteral">&quot;&lt;/consecutive_inserts_&gt;&quot;</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;&lt;records&gt;&quot;</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; v.get_key_count(); ++i) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;record index=\&quot;&quot;</span> &lt;&lt; i</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; slice=\&quot;&quot;</span> &lt;&lt; assorted::Hex(v.get_slice(i), 16)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; remainder_len=\&quot;&quot;</span> &lt;&lt; static_cast&lt;int&gt;(v.get_remainder_length(i))</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; offset=\&quot;&quot;</span> &lt;&lt; v.get_offset_in_bytes(i)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; physical_record_len=\&quot;&quot;</span> &lt;&lt; v.get_slot(i)-&gt;lengthes_.components.physical_record_length_</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; payload_len=\&quot;&quot;</span> &lt;&lt; v.get_payload_length(i)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (v.does_point_to_layer(i)) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      o &lt;&lt; <span class="stringliteral">&quot;&lt;next_layer&gt;&quot;</span> &lt;&lt; *v.get_next_layer(i) &lt;&lt; <span class="stringliteral">&quot;&lt;/next_layer&gt;&quot;</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keywordflow">if</span> (v.get_remainder_length(i) &gt; <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        std::string suffix(v.get_record(i), v.get_suffix_length(i));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        o &lt;&lt; <span class="stringliteral">&quot;&lt;key_suffix&gt;&quot;</span> &lt;&lt; assorted::HexString(suffix) &lt;&lt; <span class="stringliteral">&quot;&lt;/key_suffix&gt;&quot;</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keywordflow">if</span> (v.get_payload_length(i) &gt; 0) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        std::string payload(v.get_record_payload(i), v.get_payload_length(i));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        o &lt;&lt; <span class="stringliteral">&quot;&lt;payload&gt;&quot;</span> &lt;&lt; assorted::HexString(payload) &lt;&lt; <span class="stringliteral">&quot;&lt;/payload&gt;&quot;</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    o &lt;&lt; * v.get_owner_id(i);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;/record&gt;&quot;</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;&lt;/records&gt;&quot;</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/MasstreeBorderPage&gt;&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a76d989a7033cb8a6e331aea7e8a77475"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a76d989a7033cb8a6e331aea7e8a77475">foedus::storage::masstree::describe_masstree_page_common</a></div><div class="ttdeci">void describe_masstree_page_common(std::ostream *o_ptr, const MasstreePage &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__debug_8cpp_source.html#l00039">masstree_page_debug.cpp:39</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2982228ebc3a26b4a64c54ba77317824"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend struct <a class="el" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html">SplitBorder</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="masstree__page__impl_8hpp_source.html#l00446">446</a> of file <a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/masstree/<a class="el" href="masstree__page__impl_8hpp_source.html">masstree_page_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/masstree/<a class="el" href="masstree__page__debug_8cpp_source.html">masstree_page_debug.cpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/masstree/<a class="el" href="masstree__page__impl_8cpp_source.html">masstree_page_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1masstree.html">masstree</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
