<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::soc::SharedPolling Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1soc_1_1SharedPolling.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfoedus_1_1soc_1_1SharedPolling-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::soc::SharedPolling Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__SOC.html">SOC and IPC</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A polling-wait mechanism that can be placed in shared memory and used from multiple processes.  
 <a href="classfoedus_1_1soc_1_1SharedPolling.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A polling-wait mechanism that can be placed in shared memory and used from multiple processes. </p>
<p>This class automatically switches from spinning to polling with sleeps, then exponentially increases the sleep interval with some upper limit. Usually, a condition-variable packages such a functionality. <b>BUT</b>, we got so many troubles with glibc's bugs. A fix was pushed to upstream, but there will be many environments that still have older glibc. This class is pthread-free. No glibc versioning issue. Also, does not need signaling functionality in underlying OS/hardware, which we might not have in The Machine.</p>
<p>A typical usage is: </p><div class="fragment"><div class="line"><span class="comment">// waiter-side</span></div>
<div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">  uint64_t demand = polling.acquire_ticket();</div>
<div class="line">  <span class="comment">// the check AFTER acquiring the ticket is required to avoid lost signal</span></div>
<div class="line">  <span class="keywordflow">if</span> (real_condition_is_met) <span class="keywordflow">break</span>;</div>
<div class="line">  polling.wait(demand);</div>
<div class="line">}</div>
<div class="line"><span class="comment">// signaller-side</span></div>
<div class="line">set_real_condition();  <span class="comment">// set the real condition BEFORE signal. otherwise lost signal possible.</span></div>
<div class="line">polling.signal();</div>
</div><!-- fragment --> 
<p>Definition at line <a class="el" href="shared__polling_8hpp_source.html#l00063">63</a> of file <a class="el" href="shared__polling_8hpp_source.html">shared_polling.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="shared__polling_8hpp_source.html">shared_polling.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad0b2a9aaf91e58d5d328b10833e68454"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#ad0b2a9aaf91e58d5d328b10833e68454">SharedPolling</a> ()</td></tr>
<tr class="separator:ad0b2a9aaf91e58d5d328b10833e68454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cabd11d8af93023e6604add05f9debd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#a5cabd11d8af93023e6604add05f9debd">SharedPolling</a> (const <a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a> &amp;)=delete</td></tr>
<tr class="separator:a5cabd11d8af93023e6604add05f9debd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ac932ad5cdd17f8f90f76c35f319f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#ad1ac932ad5cdd17f8f90f76c35f319f9">operator=</a> (const <a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a> &amp;)=delete</td></tr>
<tr class="separator:ad1ac932ad5cdd17f8f90f76c35f319f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace449e19d0a13388da16570aefd42994"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#ace449e19d0a13388da16570aefd42994">initialize</a> ()</td></tr>
<tr class="separator:ace449e19d0a13388da16570aefd42994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ad7822e42e2e942b55708b1da8516b"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b">acquire_ticket</a> () const </td></tr>
<tr class="memdesc:ac6ad7822e42e2e942b55708b1da8516b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives the ticket to.  <a href="#ac6ad7822e42e2e942b55708b1da8516b">More...</a><br /></td></tr>
<tr class="separator:ac6ad7822e42e2e942b55708b1da8516b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc7bfaf57e1f2224be9869a8e9708d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#a9fc7bfaf57e1f2224be9869a8e9708d3">wait</a> (uint64_t demanded_ticket, uint64_t polling_spins=<a class="el" href="namespacefoedus_1_1soc.html#a7dc9d6d7a8576dd0b9249fd6186c7124">kDefaultPollingSpins</a>, uint64_t max_interval_us=<a class="el" href="namespacefoedus_1_1soc.html#a4d5030ff75b2da5bf130e4aefb3e2403">kDefaultPollingMaxIntervalUs</a>) const </td></tr>
<tr class="memdesc:a9fc7bfaf57e1f2224be9869a8e9708d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unconditionally wait for signal.  <a href="#a9fc7bfaf57e1f2224be9869a8e9708d3">More...</a><br /></td></tr>
<tr class="separator:a9fc7bfaf57e1f2224be9869a8e9708d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b9f5c8b129c454887a77d3255956157"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157">timedwait</a> (uint64_t demanded_ticket, uint64_t timeout_microsec, uint64_t polling_spins=<a class="el" href="namespacefoedus_1_1soc.html#a7dc9d6d7a8576dd0b9249fd6186c7124">kDefaultPollingSpins</a>, uint64_t max_interval_us=<a class="el" href="namespacefoedus_1_1soc.html#a4d5030ff75b2da5bf130e4aefb3e2403">kDefaultPollingMaxIntervalUs</a>) const </td></tr>
<tr class="memdesc:a1b9f5c8b129c454887a77d3255956157"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for signal up to the given timeout.  <a href="#a1b9f5c8b129c454887a77d3255956157">More...</a><br /></td></tr>
<tr class="separator:a1b9f5c8b129c454887a77d3255956157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae523f3b3bda39c0c81bfb5cb0d5ad626"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626">signal</a> ()</td></tr>
<tr class="memdesc:ae523f3b3bda39c0c81bfb5cb0d5ad626"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal it to let waiters exit.  <a href="#ae523f3b3bda39c0c81bfb5cb0d5ad626">More...</a><br /></td></tr>
<tr class="separator:ae523f3b3bda39c0c81bfb5cb0d5ad626"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad0b2a9aaf91e58d5d328b10833e68454"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::soc::SharedPolling::SharedPolling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="shared__polling_8hpp_source.html#l00065">65</a> of file <a class="el" href="shared__polling_8hpp_source.html">shared_polling.hpp</a>.</p>

<p>References <a class="el" href="shared__polling_8cpp_source.html#l00032">initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{ <a class="code" href="classfoedus_1_1soc_1_1SharedPolling.html#ace449e19d0a13388da16570aefd42994">initialize</a>(); }</div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedPolling_html_ace449e19d0a13388da16570aefd42994"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedPolling.html#ace449e19d0a13388da16570aefd42994">foedus::soc::SharedPolling::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8cpp_source.html#l00032">shared_polling.cpp:32</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ad0b2a9aaf91e58d5d328b10833e68454_cgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ad0b2a9aaf91e58d5d328b10833e68454_cgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ad0b2a9aaf91e58d5d328b10833e68454_cgraph" id="classfoedus_1_1soc_1_1SharedPolling_ad0b2a9aaf91e58d5d328b10833e68454_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedPolling.html#ace449e19d0a13388da16570aefd42994" title="foedus::soc::SharedPolling\l::initialize" alt="" coords="231,5,408,47"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="456,5,629,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5cabd11d8af93023e6604add05f9debd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::soc::SharedPolling::SharedPolling </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac6ad7822e42e2e942b55708b1da8516b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::soc::SharedPolling::acquire_ticket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gives the ticket to. </p>
<p>This method takes an acquire fence after getting the ticket. The waiter should check the real condition variable after calling this method to avoid lost signal. </p>

<p>Definition at line <a class="el" href="shared__polling_8cpp_source.html#l00105">105</a> of file <a class="el" href="shared__polling_8cpp_source.html">shared_polling.cpp</a>.</p>

<p>References <a class="el" href="atomic__fences_8hpp_source.html#l00069">foedus::assorted::memory_fence_acq_rel()</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00255">foedus::xct::XctManagerPimpl::advance_current_global_epoch()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00135">foedus::xct::XctManagerPimpl::handle_epoch_chime()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00239">foedus::snapshot::SnapshotManagerPimpl::handle_snapshot_child()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00158">foedus::savepoint::SavepointManagerPimpl::savepoint_main()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00181">foedus::snapshot::SnapshotManagerPimpl::sleep_a_while()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00102">foedus::savepoint::SavepointManagerPimpl::take_savepoint()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00120">foedus::savepoint::SavepointManagerPimpl::take_savepoint_after_snapshot()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00277">foedus::snapshot::SnapshotManagerPimpl::trigger_snapshot_immediate()</a>, <a class="el" href="shared__rendezvous_8cpp_source.html#l00040">foedus::soc::SharedRendezvous::wait()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00069">foedus::thread::ImpersonateSession::wait()</a>, <a class="el" href="shared__rendezvous_8cpp_source.html#l00053">foedus::soc::SharedRendezvous::wait_for()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00083">foedus::thread::ImpersonateSession::wait_for()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00273">foedus::xct::XctManagerPimpl::wait_for_current_global_epoch()</a>, and <a class="el" href="log__manager__pimpl_8cpp_source.html#l00214">foedus::log::LogManagerPimpl::wait_until_durable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                             {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  uint64_t ret = cur_ticket_ + 1ULL;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">assorted::memory_fence_acq_rel</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_gaff9fa4aedd631410da28740f6e1dddbf"><div class="ttname"><a href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">foedus::assorted::memory_fence_acq_rel</a></div><div class="ttdeci">void memory_fence_acq_rel()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00069">atomic_fences.hpp:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_cgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_cgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_cgraph" id="classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="231,5,404,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_icgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_icgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_icgraph" id="classfoedus_1_1soc_1_1SharedPolling_ac6ad7822e42e2e942b55708b1da8516b_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="232,299,439,340"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ac95c3e56168f87c3550f908720035d60" title="Main routine for epoch_chime_thread_. " alt="" coords="238,364,433,405"/>
<area shape="rect" id="node16" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a84fdf2f4ccf499b44afed05a273739d9" title="Main routine for snapshot_thread_ in child engines. " alt="" coords="1271,423,1516,464"/>
<area shape="rect" id="node18" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="255,627,416,683"/>
<area shape="rect" id="node20" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#ab6b7456f65be108f3e51455b485f9a12" title="foedus::snapshot::Snapshot\lManagerPimpl::sleep_a_while" alt="" coords="494,481,689,523"/>
<area shape="rect" id="node22" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a932bf5c252e75e0a305fe524217cb46a" title="foedus::savepoint::\lSavepointManagerPimpl\l::take_savepoint" alt="" coords="255,707,416,763"/>
<area shape="rect" id="node26" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a48fedb8938affadcce93051ff8c2ce6f" title="foedus::savepoint::\lSavepointManagerPimpl\l::take_savepoint_after\l_snapshot" alt="" coords="255,532,416,603"/>
<area shape="rect" id="node30" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4496237075c2f411bb548e1bec7ca06b" title="foedus::snapshot::Snapshot\lManagerPimpl::trigger_snapshot\l_immediate" alt="" coords="231,787,440,843"/>
<area shape="rect" id="node32" href="classfoedus_1_1soc_1_1SharedRendezvous.html#a59eadd660b274272205331d9928b1654" title="Block until the event happens. " alt="" coords="231,868,439,909"/>
<area shape="rect" id="node33" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="244,933,427,975"/>
<area shape="rect" id="node44" href="classfoedus_1_1soc_1_1SharedRendezvous.html#aa46e3db70b7324e6f2c54e8f5084ca93" title="Block until the event happens or the given period elapses. " alt="" coords="231,999,439,1040"/>
<area shape="rect" id="node45" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a951cd701218b88d9a4cfe9bd6ee2ece6" title="Blocks until either the asynchronous session completes or the specified time elapses. " alt="" coords="244,1064,427,1105"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#af5cb0928185cf79dda519313f05fe0ee" title="foedus::xct::XctManagerPimpl\l::wait_for_current_global_epoch" alt="" coords="233,216,437,257"/>
<area shape="rect" id="node48" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a9835b4e2ce92a8ac46edd153be80a09d" title="foedus::log::LogManagerPimpl\l::wait_until_durable" alt="" coords="237,1131,434,1172"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="488,299,695,340"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="745,160,943,201"/>
<area shape="rect" id="node6" href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3" title="Synchronously writes out the given log to metadata log file. " alt="" coords="756,225,932,267"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb" title="Subroutine of collect_retired_volatile_page() in case the chunk becomes full. " alt="" coords="752,299,936,340"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4" title="Called while a successful commit of xct to issue a new xct id. " alt="" coords="769,364,919,405"/>
<area shape="rect" id="node5" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="1009,5,1207,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a9eec079742233abb22d147da7b4fa50a" title="foedus::storage::Storage\lManagerPimpl::create_storage\l_and_log" alt="" coords="1009,71,1207,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a252f35e96555817a5eba6ab2e2275d53" title="foedus::storage::Storage\lManagerPimpl::drop_storage" alt="" coords="1014,152,1202,193"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::truncate" alt="" coords="1019,218,1197,274"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="1012,299,1204,340"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="1011,364,1205,405"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#aefb36bf03b0bd29c160f5aa36b219d45" title="foedus::xct::XctManagerPimpl\l::initialize_once" alt="" coords="494,364,689,405"/>
<area shape="rect" id="node17" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1564,456,1759,497"/>
<area shape="rect" id="node19" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="511,627,672,683"/>
<area shape="rect" id="node21" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1288,488,1499,529"/>
<area shape="rect" id="node23" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a76145762bd869ce338b3f647a7244c30" title="Atomically and durably takes a savepoint for the given epoch advancement. " alt="" coords="511,707,672,763"/>
<area shape="rect" id="node24" href="classfoedus_1_1log_1_1LogManagerPimpl.html#ad75bb7dd8ca8589f86502836f975b2c3" title="foedus::log::LogManagerPimpl\l::refresh_global_durable_epoch" alt="" coords="743,711,945,752"/>
<area shape="rect" id="node25" href="classfoedus_1_1log_1_1LogManager.html#aba382b725496593eb3f06b1644ef53c6" title="Called whenever there is a chance that the global durable epoch advances. " alt="" coords="1007,711,1209,752"/>
<area shape="rect" id="node27" href="classfoedus_1_1savepoint_1_1SavepointManager.html#aaecb5989eaca658a8fbdc7de6c85222c" title="Takes a savepoint just to remember the newly taken snapshot. " alt="" coords="504,547,679,603"/>
<area shape="rect" id="node28" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a45097869d980cf8fe0ad3313e02c8117" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="752,545,936,601"/>
<area shape="rect" id="node29" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1003,543,1213,599"/>
<area shape="rect" id="node31" href="classfoedus_1_1snapshot_1_1SnapshotManager.html#ad0ca7bd80adde3e30e439d6902d9b299" title="Immediately take a snapshot. " alt="" coords="499,787,683,843"/>
<area shape="rect" id="node34" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="500,899,683,940"/>
<area shape="rect" id="node38" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="500,1003,683,1044"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="753,776,935,817"/>
<area shape="rect" id="node36" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="746,842,942,898"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="747,922,941,978"/>
<area shape="rect" id="node39" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472" title="foedus::thread::Impersonate\lSession::~ImpersonateSession" alt="" coords="743,1003,945,1044"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="759,1068,929,1109"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="1019,1003,1197,1044"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="993,1068,1223,1109"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="995,1133,1221,1175"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManager.html#aa3178a6ce1c815fb88b6c8d5607da5d4" title="Passively wait until the current global epoch becomes the given value. " alt="" coords="489,197,693,239"/>
<area shape="rect" id="node49" href="classfoedus_1_1log_1_1LogManager.html#aeadbabd0bc163b2301c3a9260f625f91" title="Synchronously blocks until the durable global epoch reaches the given commit epoch or the given durat..." alt="" coords="509,1132,673,1173"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a69fb51b2a05a90f46b4658cb984928a0" title="foedus::xct::XctManagerPimpl\l::wait_for_commit" alt="" coords="747,1133,941,1175"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace449e19d0a13388da16570aefd42994"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::soc::SharedPolling::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="shared__polling_8cpp_source.html#l00032">32</a> of file <a class="el" href="shared__polling_8cpp_source.html">shared_polling.cpp</a>.</p>

<p>References <a class="el" href="atomic__fences_8hpp_source.html#l00069">foedus::assorted::memory_fence_acq_rel()</a>.</p>

<p>Referenced by <a class="el" href="meta__log__buffer_8hpp_source.html#l00039">foedus::log::MetaLogControlBlock::initialize()</a>, <a class="el" href="savepoint__manager__pimpl_8hpp_source.html#l00043">foedus::savepoint::SavepointManagerControlBlock::initialize()</a>, <a class="el" href="shared__rendezvous_8cpp_source.html#l00027">foedus::soc::SharedRendezvous::initialize()</a>, <a class="el" href="xct__manager__pimpl_8hpp_source.html#l00044">foedus::xct::XctManagerControlBlock::initialize()</a>, <a class="el" href="log__manager__pimpl_8hpp_source.html#l00047">foedus::log::LogManagerControlBlock::initialize()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00053">foedus::thread::ThreadControlBlock::initialize()</a>, <a class="el" href="logger__impl_8hpp_source.html#l00064">foedus::log::LoggerControlBlock::initialize()</a>, <a class="el" href="snapshot__manager__pimpl_8hpp_source.html#l00125">foedus::snapshot::SnapshotManagerControlBlock::initialize()</a>, and <a class="el" href="shared__polling_8hpp_source.html#l00065">SharedPolling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                               {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  cur_ticket_ = 0;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">assorted::memory_fence_acq_rel</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_gaff9fa4aedd631410da28740f6e1dddbf"><div class="ttname"><a href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">foedus::assorted::memory_fence_acq_rel</a></div><div class="ttdeci">void memory_fence_acq_rel()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00069">atomic_fences.hpp:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_cgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_cgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_cgraph" id="classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="231,5,404,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_icgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_icgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_icgraph" id="classfoedus_1_1soc_1_1SharedPolling_ace449e19d0a13388da16570aefd42994_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1log_1_1MetaLogControlBlock.html#a2d5afcdf7b1f510072209d8203a959ae" title="foedus::log::MetaLogControl\lBlock::initialize" alt="" coords="243,5,427,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1savepoint_1_1SavepointManagerControlBlock.html#a62651ba9ef902336444a754277c76ef3" title="foedus::savepoint::\lSavepointManagerControlBlock\l::initialize" alt="" coords="233,71,436,127"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SharedRendezvous.html#a2dd1832d66399a5ceec71bbdcf5eafe3" title="foedus::soc::SharedRendezvous\l::initialize" alt="" coords="231,152,439,193"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1XctManagerControlBlock.html#a04554274a71a22a81696461d013ee9ec" title="foedus::xct::XctManagerControl\lBlock::initialize" alt="" coords="233,217,436,259"/>
<area shape="rect" id="node10" href="structfoedus_1_1log_1_1LogManagerControlBlock.html#a93a1bd4dcf76bc9cd4f266b2942f2b00" title="foedus::log::LogManagerControl\lBlock::initialize" alt="" coords="232,283,437,324"/>
<area shape="rect" id="node12" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a261b434597087690ad1f65e407a3a221" title="foedus::thread::ThreadControl\lBlock::initialize" alt="" coords="239,348,431,389"/>
<area shape="rect" id="node14" href="structfoedus_1_1log_1_1LoggerControlBlock.html#a39d5e48db76c97f972599fee2aa8c241" title="foedus::log::LoggerControl\lBlock::initialize" alt="" coords="248,413,421,455"/>
<area shape="rect" id="node15" href="structfoedus_1_1snapshot_1_1SnapshotManagerControlBlock.html#a797d62d33506815f6945b0c06bab280d" title="foedus::snapshot::Snapshot\lManagerControlBlock::initialize" alt="" coords="234,479,435,520"/>
<area shape="rect" id="node17" href="classfoedus_1_1soc_1_1SharedPolling.html#ad0b2a9aaf91e58d5d328b10833e68454" title="foedus::soc::SharedPolling\l::SharedPolling" alt="" coords="246,544,423,585"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="510,5,671,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="510,71,671,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedRendezvous.html#ac80ac007c6c0c2bf2c557bd4d2264eb2" title="foedus::soc::SharedRendezvous\l::SharedRendezvous" alt="" coords="487,152,695,193"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#aefb36bf03b0bd29c160f5aa36b219d45" title="foedus::xct::XctManagerPimpl\l::initialize_once" alt="" coords="493,217,688,259"/>
<area shape="rect" id="node11" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="492,283,689,324"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="499,348,683,389"/>
<area shape="rect" id="node16" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="493,479,688,520"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad1ac932ad5cdd17f8f90f76c35f319f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a>&amp; foedus::soc::SharedPolling::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae523f3b3bda39c0c81bfb5cb0d5ad626"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::soc::SharedPolling::signal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signal it to let waiters exit. </p>
<p>This method first takes a release fence to avoid lost signal. The signaller should set the real condition variable before calling this method to avoid lost signal. </p>

<p>Definition at line <a class="el" href="shared__polling_8cpp_source.html#l00100">100</a> of file <a class="el" href="shared__polling_8cpp_source.html">shared_polling.cpp</a>.</p>

<p>References <a class="el" href="atomic__fences_8hpp_source.html#l00069">foedus::assorted::memory_fence_acq_rel()</a>, and <a class="el" href="shared__cond_8cpp_source.html#l00083">foedus::soc::ugly_atomic_inc()</a>.</p>

<p>Referenced by <a class="el" href="log__manager__pimpl_8cpp_source.html#l00268">foedus::log::LogManagerPimpl::announce_new_durable_global_epoch()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00135">foedus::xct::XctManagerPimpl::handle_epoch_chime()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00316">foedus::snapshot::SnapshotManagerPimpl::handle_snapshot_triggered()</a>, <a class="el" href="log__manager__pimpl_8cpp_source.html#l00179">foedus::log::LogManagerPimpl::refresh_global_durable_epoch()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00158">foedus::savepoint::SavepointManagerPimpl::savepoint_main()</a>, <a class="el" href="shared__rendezvous_8cpp_source.html#l00067">foedus::soc::SharedRendezvous::signal()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00102">foedus::savepoint::SavepointManagerPimpl::take_savepoint()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00120">foedus::savepoint::SavepointManagerPimpl::take_savepoint_after_snapshot()</a>, <a class="el" href="thread__ref_8cpp_source.html#l00059">foedus::thread::ThreadRef::try_impersonate()</a>, <a class="el" href="meta__logger__impl_8cpp_source.html#l00164">foedus::log::MetaLogger::uninitialize_once()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00104">foedus::xct::XctManagerPimpl::uninitialize_once()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00086">foedus::savepoint::SavepointManagerPimpl::uninitialize_once()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00122">foedus::thread::ThreadPimpl::uninitialize_once()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00187">foedus::snapshot::SnapshotManagerPimpl::wakeup()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00237">foedus::xct::XctManagerPimpl::wakeup_epoch_chime_thread()</a>, and <a class="el" href="snapshot__manager__pimpl_8hpp_source.html#l00150">foedus::snapshot::SnapshotManagerControlBlock::wakeup_snapshot_children()</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                           {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">assorted::memory_fence_acq_rel</a>();  <span class="comment">// well, atomic op implies a full barrier, but to make sure.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <a class="code" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275">ugly_atomic_inc</a>(&amp;cur_ticket_);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1soc_html_ad6b40c6c8e2db3fbf1bbdf6daa025275"><div class="ttname"><a href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275">foedus::soc::ugly_atomic_inc</a></div><div class="ttdeci">void ugly_atomic_inc(uint32_t *address)</div><div class="ttdef"><b>Definition:</b> <a href="shared__cond_8cpp_source.html#l00083">shared_cond.cpp:83</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaff9fa4aedd631410da28740f6e1dddbf"><div class="ttname"><a href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">foedus::assorted::memory_fence_acq_rel</a></div><div class="ttdeci">void memory_fence_acq_rel()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00069">atomic_fences.hpp:69</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_cgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_cgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_cgraph" id="classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="239,5,413,47"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="231,71,421,98"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_icgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_icgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_icgraph" id="classfoedus_1_1soc_1_1SharedPolling_ae523f3b3bda39c0c81bfb5cb0d5ad626_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a6b560cbd51f4a39559154ff6a4007aae" title="foedus::log::LogManagerPimpl\l::announce_new_durable_global_epoch" alt="" coords="231,17,479,58"/>
<area shape="rect" id="node4" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="840,39,1001,95"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ac95c3e56168f87c3550f908720035d60" title="Main routine for epoch_chime_thread_. " alt="" coords="257,137,452,178"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1073,223,1284,279"/>
<area shape="rect" id="node13" href="classfoedus_1_1log_1_1LogManagerPimpl.html#ad75bb7dd8ca8589f86502836f975b2c3" title="foedus::log::LogManagerPimpl\l::refresh_global_durable_epoch" alt="" coords="820,439,1021,481"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SharedRendezvous.html#a4dbbdefba8911ce9c82e8700aee3d39a" title="Notify all waiters that the event has happened. " alt="" coords="251,349,459,390"/>
<area shape="rect" id="node16" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a932bf5c252e75e0a305fe524217cb46a" title="foedus::savepoint::\lSavepointManagerPimpl\l::take_savepoint" alt="" coords="274,415,435,471"/>
<area shape="rect" id="node18" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a48fedb8938affadcce93051ff8c2ce6f" title="foedus::savepoint::\lSavepointManagerPimpl\l::take_savepoint_after\l_snapshot" alt="" coords="274,254,435,325"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="269,546,440,587"/>
<area shape="rect" id="node31" href="classfoedus_1_1log_1_1MetaLogger.html#a708d39dc0dfcc07538391f10dc5dc8e5" title="foedus::log::MetaLogger\l::uninitialize_once" alt="" coords="274,611,435,653"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a8fb6cedfd224c44cac4224877c688672" title="foedus::xct::XctManagerPimpl\l::uninitialize_once" alt="" coords="257,677,452,718"/>
<area shape="rect" id="node33" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a9962c92d910415dc48253ea5a07f031e" title="foedus::savepoint::\lSavepointManagerPimpl\l::uninitialize_once" alt="" coords="274,743,435,799"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aba7104a56eaff1c1f8c87f5bb03f4045" title="foedus::thread::ThreadPimpl\l::uninitialize_once" alt="" coords="263,823,447,865"/>
<area shape="rect" id="node35" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#ab92f4472ad5436d0a216dd8183f26ec6" title="foedus::snapshot::Snapshot\lManagerPimpl::wakeup" alt="" coords="263,970,447,1011"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#afce787897428bd372c67224acd3e8ea7" title="foedus::xct::XctManagerPimpl\l::wakeup_epoch_chime_thread" alt="" coords="254,1043,455,1085"/>
<area shape="rect" id="node50" href="structfoedus_1_1snapshot_1_1SnapshotManagerControlBlock.html#aea6701821c4d7184cac37f3ad552c60f" title="Fires snapshot_children_wakeup_. " alt="" coords="255,889,454,945"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1LogManager.html#a970d90dc3ac74ec3e57cb4b833725290" title="Sets the new global durable epoch and also wakes up threads that were waiting for it..." alt="" coords="565,5,730,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="1098,39,1259,95"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#aefb36bf03b0bd29c160f5aa36b219d45" title="foedus::xct::XctManagerPimpl\l::initialize_once" alt="" coords="550,137,745,178"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1332,197,1543,238"/>
<area shape="rect" id="node11" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1360,262,1515,303"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1591,197,1785,238"/>
<area shape="rect" id="node12" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1591,262,1785,303"/>
<area shape="rect" id="node14" href="classfoedus_1_1log_1_1LogManager.html#aba382b725496593eb3f06b1644ef53c6" title="Called whenever there is a chance that the global durable epoch advances. " alt="" coords="1078,439,1279,481"/>
<area shape="rect" id="node17" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a76145762bd869ce338b3f647a7244c30" title="Atomically and durably takes a savepoint for the given epoch advancement. " alt="" coords="567,415,728,471"/>
<area shape="rect" id="node19" href="classfoedus_1_1savepoint_1_1SavepointManager.html#aaecb5989eaca658a8fbdc7de6c85222c" title="Takes a savepoint just to remember the newly taken snapshot. " alt="" coords="560,260,735,316"/>
<area shape="rect" id="node20" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a45097869d980cf8fe0ad3313e02c8117" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="829,257,1013,313"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="559,679,736,721"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="533,546,762,587"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="534,611,761,653"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="832,681,1009,722"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1087,685,1270,726"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="823,539,1019,581"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1081,524,1277,580"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="824,611,1017,653"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1082,604,1275,660"/>
<area shape="rect" id="node36" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#ac35e1cb910337b9d66852e47202fb442" title="This is a hidden API called at the beginning of engine shutdown (namely restart manager). " alt="" coords="527,897,768,938"/>
<area shape="rect" id="node39" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4496237075c2f411bb548e1bec7ca06b" title="foedus::snapshot::Snapshot\lManagerPimpl::trigger_snapshot\l_immediate" alt="" coords="543,963,752,1019"/>
<area shape="rect" id="node37" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#ad6262cf557ce9b4e8295ccc67a865554" title="foedus::restart::Restart\lManagerPimpl::uninitialize_once" alt="" coords="816,831,1025,873"/>
<area shape="rect" id="node38" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4fd4f82797b7ce89da73feca6570f581" title="foedus::snapshot::Snapshot\lManagerPimpl::uninitialize_once" alt="" coords="816,897,1025,938"/>
<area shape="rect" id="node40" href="classfoedus_1_1snapshot_1_1SnapshotManager.html#ad0ca7bd80adde3e30e439d6902d9b299" title="Immediately take a snapshot. " alt="" coords="829,963,1013,1019"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="544,1043,751,1085"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a69fb51b2a05a90f46b4658cb984928a0" title="foedus::xct::XctManagerPimpl\l::wait_for_commit" alt="" coords="550,1109,745,1150"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="817,1043,1024,1085"/>
<area shape="rect" id="node44" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="1079,1075,1278,1117"/>
<area shape="rect" id="node45" href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3" title="Synchronously writes out the given log to metadata log file. " alt="" coords="1091,1141,1267,1182"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb" title="Subroutine of collect_retired_volatile_page() in case the chunk becomes full. " alt="" coords="1087,945,1271,986"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4" title="Called while a successful commit of xct to issue a new xct id. " alt="" coords="1103,1010,1254,1051"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1XctManager.html#a577f44c6f10022d645605d171ef4a781" title="Synchronously blocks until the durable global epoch reaches the given commit epoch or the given durat..." alt="" coords="839,1109,1002,1150"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1b9f5c8b129c454887a77d3255956157"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::soc::SharedPolling::timedwait </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>demanded_ticket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>timeout_microsec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>polling_spins</em> = <code><a class="el" href="namespacefoedus_1_1soc.html#a7dc9d6d7a8576dd0b9249fd6186c7124">kDefaultPollingSpins</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>max_interval_us</em> = <code><a class="el" href="namespacefoedus_1_1soc.html#a4d5030ff75b2da5bf130e4aefb3e2403">kDefaultPollingMaxIntervalUs</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for signal up to the given timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">demanded_ticket</td><td>returns when cur_ticket_ becomes this value or larger. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_microsec</td><td>timeout in microsec </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">polling_spins</td><td>we stop spinning and switch to sleeps after this number of spins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_interval_us</td><td>the sleep interval exponentially grows up to this value in microsec. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether this thread received a signal </dd></dl>

<p>Definition at line <a class="el" href="shared__polling_8cpp_source.html#l00063">63</a> of file <a class="el" href="shared__polling_8cpp_source.html">shared_polling.cpp</a>.</p>

<p>References <a class="el" href="shared__polling_8cpp_source.html#l00058">foedus::soc::get_now_microsec()</a>, and <a class="el" href="shared__polling_8hpp_source.html#l00033">foedus::soc::kInitialPollingIntervalUs</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00135">foedus::xct::XctManagerPimpl::handle_epoch_chime()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00239">foedus::snapshot::SnapshotManagerPimpl::handle_snapshot_child()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00158">foedus::savepoint::SavepointManagerPimpl::savepoint_main()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00181">foedus::snapshot::SnapshotManagerPimpl::sleep_a_while()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00277">foedus::snapshot::SnapshotManagerPimpl::trigger_snapshot_immediate()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00069">foedus::thread::ImpersonateSession::wait()</a>, <a class="el" href="shared__rendezvous_8cpp_source.html#l00053">foedus::soc::SharedRendezvous::wait_for()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00083">foedus::thread::ImpersonateSession::wait_for()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00273">foedus::xct::XctManagerPimpl::wait_for_current_global_epoch()</a>, and <a class="el" href="log__manager__pimpl_8cpp_source.html#l00214">foedus::log::LogManagerPimpl::wait_until_durable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                  {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">if</span> (cur_ticket_ &gt;= demanded_ticket) {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  uint64_t start_us = <a class="code" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f">get_now_microsec</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  uint64_t end_us = start_us + timeout_microsec;  <span class="comment">// might overflow as a rare case, but not an issue</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  spin_poll(demanded_ticket, polling_spins);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  uint64_t interval_us = <a class="code" href="namespacefoedus_1_1soc.html#a31cebe05bc6b35aced7036bbb1420ded">kInitialPollingIntervalUs</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">while</span> (cur_ticket_ &lt; demanded_ticket) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    uint64_t now_us = <a class="code" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f">get_now_microsec</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (now_us &gt; end_us) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// ah, oh, timeout</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    std::this_thread::sleep_for(std::chrono::microseconds(interval_us));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    interval_us = std::min&lt;uint64_t&gt;(interval_us * 2ULL, max_interval_us);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1soc_html_a875ded688a72b32f8f690f37750e609f"><div class="ttname"><a href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f">foedus::soc::get_now_microsec</a></div><div class="ttdeci">uint64_t get_now_microsec()</div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8cpp_source.html#l00058">shared_polling.cpp:58</a></div></div>
<div class="ttc" id="namespacefoedus_1_1soc_html_a31cebe05bc6b35aced7036bbb1420ded"><div class="ttname"><a href="namespacefoedus_1_1soc.html#a31cebe05bc6b35aced7036bbb1420ded">foedus::soc::kInitialPollingIntervalUs</a></div><div class="ttdeci">const uint64_t kInitialPollingIntervalUs</div><div class="ttdoc">Initial value of sleep interval in us. </div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8hpp_source.html#l00033">shared_polling.hpp:33</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_cgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_cgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_cgraph" id="classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="231,5,376,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_icgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_icgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_icgraph" id="classfoedus_1_1soc_1_1SharedPolling_a1b9f5c8b129c454887a77d3255956157_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ac95c3e56168f87c3550f908720035d60" title="Main routine for epoch_chime_thread_. " alt="" coords="238,8,433,49"/>
<area shape="rect" id="node4" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a84fdf2f4ccf499b44afed05a273739d9" title="Main routine for snapshot_thread_ in child engines. " alt="" coords="488,136,733,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="255,202,416,258"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#ab6b7456f65be108f3e51455b485f9a12" title="foedus::snapshot::Snapshot\lManagerPimpl::sleep_a_while" alt="" coords="238,76,433,117"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4496237075c2f411bb548e1bec7ca06b" title="foedus::snapshot::Snapshot\lManagerPimpl::trigger_snapshot\l_immediate" alt="" coords="231,282,440,338"/>
<area shape="rect" id="node12" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="244,363,427,404"/>
<area shape="rect" id="node26" href="classfoedus_1_1soc_1_1SharedRendezvous.html#aa46e3db70b7324e6f2c54e8f5084ca93" title="Block until the event happens or the given period elapses. " alt="" coords="231,428,439,469"/>
<area shape="rect" id="node27" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a951cd701218b88d9a4cfe9bd6ee2ece6" title="Blocks until either the asynchronous session completes or the specified time elapses. " alt="" coords="244,493,427,535"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#af5cb0928185cf79dda519313f05fe0ee" title="foedus::xct::XctManagerPimpl\l::wait_for_current_global_epoch" alt="" coords="233,571,437,612"/>
<area shape="rect" id="node33" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a9835b4e2ce92a8ac46edd153be80a09d" title="foedus::log::LogManagerPimpl\l::wait_until_durable" alt="" coords="237,641,434,683"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#aefb36bf03b0bd29c160f5aa36b219d45" title="foedus::xct::XctManagerPimpl\l::initialize_once" alt="" coords="513,5,708,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="785,104,980,145"/>
<area shape="rect" id="node7" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="530,202,691,258"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="505,71,716,112"/>
<area shape="rect" id="node11" href="classfoedus_1_1snapshot_1_1SnapshotManager.html#ad0ca7bd80adde3e30e439d6902d9b299" title="Immediately take a snapshot. " alt="" coords="519,282,703,338"/>
<area shape="rect" id="node13" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="1317,413,1500,455"/>
<area shape="rect" id="node17" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="519,413,702,455"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1563,353,1745,395"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1556,425,1752,481"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1557,515,1751,571"/>
<area shape="rect" id="node18" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472" title="foedus::thread::Impersonate\lSession::~ImpersonateSession" alt="" coords="781,413,984,455"/>
<area shape="rect" id="node19" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="797,479,968,520"/>
<area shape="rect" id="node20" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="1058,413,1235,455"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="1032,479,1261,520"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="1033,544,1260,585"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="1320,348,1497,389"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="1311,479,1507,520"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="1312,544,1505,585"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1XctManager.html#aa3178a6ce1c815fb88b6c8d5607da5d4" title="Passively wait until the current global epoch becomes the given value. " alt="" coords="509,577,713,619"/>
<area shape="rect" id="node30" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="783,580,982,621"/>
<area shape="rect" id="node31" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="1047,609,1246,651"/>
<area shape="rect" id="node32" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="1309,609,1508,651"/>
<area shape="rect" id="node34" href="classfoedus_1_1log_1_1LogManager.html#aeadbabd0bc163b2301c3a9260f625f91" title="Synchronously blocks until the durable global epoch reaches the given commit epoch or the given durat..." alt="" coords="529,655,693,696"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a69fb51b2a05a90f46b4658cb984928a0" title="foedus::xct::XctManagerPimpl\l::wait_for_commit" alt="" coords="785,671,980,712"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1XctManager.html#a577f44c6f10022d645605d171ef4a781" title="Synchronously blocks until the durable global epoch reaches the given commit epoch or the given durat..." alt="" coords="1065,675,1228,716"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9fc7bfaf57e1f2224be9869a8e9708d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::soc::SharedPolling::wait </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>demanded_ticket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>polling_spins</em> = <code><a class="el" href="namespacefoedus_1_1soc.html#a7dc9d6d7a8576dd0b9249fd6186c7124">kDefaultPollingSpins</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>max_interval_us</em> = <code><a class="el" href="namespacefoedus_1_1soc.html#a4d5030ff75b2da5bf130e4aefb3e2403">kDefaultPollingMaxIntervalUs</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unconditionally wait for signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">demanded_ticket</td><td>returns when cur_ticket_ becomes this value or larger. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">polling_spins</td><td>we stop spinning and switch to sleeps after this number of spins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_interval_us</td><td>the sleep interval exponentially grows up to this value in microsec. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="shared__polling_8cpp_source.html#l00042">42</a> of file <a class="el" href="shared__polling_8cpp_source.html">shared_polling.cpp</a>.</p>

<p>References <a class="el" href="shared__polling_8hpp_source.html#l00033">foedus::soc::kInitialPollingIntervalUs</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00255">foedus::xct::XctManagerPimpl::advance_current_global_epoch()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00102">foedus::savepoint::SavepointManagerPimpl::take_savepoint()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00120">foedus::savepoint::SavepointManagerPimpl::take_savepoint_after_snapshot()</a>, <a class="el" href="shared__rendezvous_8cpp_source.html#l00040">foedus::soc::SharedRendezvous::wait()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00273">foedus::xct::XctManagerPimpl::wait_for_current_global_epoch()</a>, and <a class="el" href="log__manager__pimpl_8cpp_source.html#l00214">foedus::log::LogManagerPimpl::wait_until_durable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                  {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">if</span> (cur_ticket_ &gt;= demanded_ticket) {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  spin_poll(demanded_ticket, polling_spins);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  uint64_t interval_us = <a class="code" href="namespacefoedus_1_1soc.html#a31cebe05bc6b35aced7036bbb1420ded">kInitialPollingIntervalUs</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">while</span> (cur_ticket_ &lt; demanded_ticket) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    std::this_thread::sleep_for(std::chrono::microseconds(interval_us));</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    interval_us = std::min&lt;uint64_t&gt;(interval_us * 2ULL, max_interval_us);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1soc_html_a31cebe05bc6b35aced7036bbb1420ded"><div class="ttname"><a href="namespacefoedus_1_1soc.html#a31cebe05bc6b35aced7036bbb1420ded">foedus::soc::kInitialPollingIntervalUs</a></div><div class="ttdeci">const uint64_t kInitialPollingIntervalUs</div><div class="ttdoc">Initial value of sleep interval in us. </div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8hpp_source.html#l00033">shared_polling.hpp:33</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1soc_1_1SharedPolling_a9fc7bfaf57e1f2224be9869a8e9708d3_icgraph.png" border="0" usemap="#classfoedus_1_1soc_1_1SharedPolling_a9fc7bfaf57e1f2224be9869a8e9708d3_icgraph" alt=""/></div>
<map name="classfoedus_1_1soc_1_1SharedPolling_a9fc7bfaf57e1f2224be9869a8e9708d3_icgraph" id="classfoedus_1_1soc_1_1SharedPolling_a9fc7bfaf57e1f2224be9869a8e9708d3_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="231,304,438,345"/>
<area shape="rect" id="node30" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a932bf5c252e75e0a305fe524217cb46a" title="foedus::savepoint::\lSavepointManagerPimpl\l::take_savepoint" alt="" coords="254,374,415,430"/>
<area shape="rect" id="node34" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a48fedb8938affadcce93051ff8c2ce6f" title="foedus::savepoint::\lSavepointManagerPimpl\l::take_savepoint_after\l_snapshot" alt="" coords="254,455,415,525"/>
<area shape="rect" id="node42" href="classfoedus_1_1soc_1_1SharedRendezvous.html#a59eadd660b274272205331d9928b1654" title="Block until the event happens. " alt="" coords="231,549,439,591"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#af5cb0928185cf79dda519313f05fe0ee" title="foedus::xct::XctManagerPimpl\l::wait_for_current_global_epoch" alt="" coords="233,220,437,261"/>
<area shape="rect" id="node45" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a9835b4e2ce92a8ac46edd153be80a09d" title="foedus::log::LogManagerPimpl\l::wait_until_durable" alt="" coords="236,615,433,656"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="487,297,693,339"/>
<area shape="rect" id="node4" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#a5a0fd87ff73e0f43e5a901f1c4fa34e3" title="Main routine of cleaner_. " alt="" coords="743,167,941,208"/>
<area shape="rect" id="node7" href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3" title="Synchronously writes out the given log to metadata log file. " alt="" coords="754,232,930,273"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a694a2aaa7515ab45a8c9fa12b709defb" title="Subroutine of collect_retired_volatile_page() in case the chunk becomes full. " alt="" coords="750,297,934,339"/>
<area shape="rect" id="node25" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4" title="Called while a successful commit of xct to issue a new xct id. " alt="" coords="767,363,917,404"/>
<area shape="rect" id="node5" href="classfoedus_1_1cache_1_1CacheManagerPimpl.html#af04416fadb8ec5160408982fa67a08c1" title="foedus::cache::CacheManager\lPimpl::initialize_once" alt="" coords="997,5,1195,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1cache_1_1CacheManager.html#a9181ec7d7e0ee1faa942ba9eec6c1345" title="foedus::cache::CacheManager\l::initialize_once" alt="" coords="1255,5,1454,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a9eec079742233abb22d147da7b4fa50a" title="foedus::storage::Storage\lManagerPimpl::create_storage\l_and_log" alt="" coords="997,151,1195,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a252f35e96555817a5eba6ab2e2275d53" title="foedus::storage::Storage\lManagerPimpl::drop_storage" alt="" coords="1002,232,1190,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f" title="foedus::storage::sequential\l::SequentialStoragePimpl\l::truncate" alt="" coords="1007,71,1185,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1StorageManager.html#a2f5e7bd059656ae653d0a326141e76f1" title="Removes the storage object. " alt="" coords="1273,232,1437,273"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a9a4d7e58057f2fb648b7ff9ee6ab7fa0" title="Discards all records in this storage before the given epoch. " alt="" coords="1259,79,1450,120"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="1000,297,1192,339"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="1259,297,1451,339"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a31564163126364e4810f2f00398afd15" title="foedus::storage::masstree\l::Adopt::adopt_case_a" alt="" coords="1519,301,1692,343"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="1519,367,1692,408"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1storage_1_1masstree.html#a554f6fb34b45687df09df15076aac190" title="foedus::storage::masstree\l::grow_case_a_common" alt="" coords="1519,89,1692,131"/>
<area shape="rect" id="node22" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="1519,155,1692,196"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#a96de88f03cf5683529e00d2c209a07e9" title="The core implementation after locking relevant pages and acquiring free page resource. " alt="" coords="1519,221,1692,277"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="1761,335,1935,376"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="1761,89,1935,131"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="1751,155,1945,196"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="1761,228,1935,269"/>
<area shape="rect" id="node26" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="999,363,1193,404"/>
<area shape="rect" id="node27" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1257,395,1452,436"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1508,432,1703,473"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1767,432,1929,473"/>
<area shape="rect" id="node31" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a76145762bd869ce338b3f647a7244c30" title="Atomically and durably takes a savepoint for the given epoch advancement. " alt="" coords="509,389,671,445"/>
<area shape="rect" id="node32" href="classfoedus_1_1log_1_1LogManagerPimpl.html#ad75bb7dd8ca8589f86502836f975b2c3" title="foedus::log::LogManagerPimpl\l::refresh_global_durable_epoch" alt="" coords="741,428,943,469"/>
<area shape="rect" id="node33" href="classfoedus_1_1log_1_1LogManager.html#aba382b725496593eb3f06b1644ef53c6" title="Called whenever there is a chance that the global durable epoch advances. " alt="" coords="995,428,1197,469"/>
<area shape="rect" id="node35" href="classfoedus_1_1savepoint_1_1SavepointManager.html#aaecb5989eaca658a8fbdc7de6c85222c" title="Takes a savepoint just to remember the newly taken snapshot. " alt="" coords="503,473,677,529"/>
<area shape="rect" id="node36" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a45097869d980cf8fe0ad3313e02c8117" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="750,494,934,550"/>
<area shape="rect" id="node37" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="991,494,1201,550"/>
<area shape="rect" id="node38" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1249,564,1460,605"/>
<area shape="rect" id="node40" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1277,499,1432,540"/>
<area shape="rect" id="node39" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1508,564,1703,605"/>
<area shape="rect" id="node41" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1508,499,1703,540"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1XctManager.html#aa3178a6ce1c815fb88b6c8d5607da5d4" title="Passively wait until the current global epoch becomes the given value. " alt="" coords="488,200,692,241"/>
<area shape="rect" id="node46" href="classfoedus_1_1log_1_1LogManager.html#aeadbabd0bc163b2301c3a9260f625f91" title="Synchronously blocks until the durable global epoch reaches the given commit epoch or the given durat..." alt="" coords="508,615,672,656"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a69fb51b2a05a90f46b4658cb984928a0" title="foedus::xct::XctManagerPimpl\l::wait_for_commit" alt="" coords="745,615,939,656"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1XctManager.html#a577f44c6f10022d645605d171ef4a781" title="Synchronously blocks until the durable global epoch reaches the given commit epoch or the given durat..." alt="" coords="1015,615,1177,656"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/soc/<a class="el" href="shared__polling_8hpp_source.html">shared_polling.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/soc/<a class="el" href="shared__polling_8cpp_source.html">shared_polling.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1soc.html">soc</a></li><li class="navelem"><a class="el" href="classfoedus_1_1soc_1_1SharedPolling.html">SharedPolling</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
