<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::thread::ThreadPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1thread_1_1ThreadPool.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1thread_1_1ThreadPool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::thread::ThreadPool Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__THREAD.html">Thread and Thread-Group</a> &raquo; <a class="el" href="group__THREADPOOL.html">Thread-Pool and Impersonation</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The pool of pre-allocated threads in the engine to execute transactions.  
 <a href="classfoedus_1_1thread_1_1ThreadPool.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The pool of pre-allocated threads in the engine to execute transactions. </p>
<p>This is the main API class of thread package. Its gut is <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">impersonate()</a> which allows client programs to create a new session (<a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html" title="A user session running on an impersonated thread. ">ImpersonateSession</a>) that runs user-defined procedures (<a class="el" href="group__PROC.html">System and User Procedures</a>). The sessions are executed on pre-allocated threads in the engine. We throttle sessions, meaning <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">impersonate()</a> blocks when there is no available thread. To avoid waiting too long, <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">impersonate()</a> receives timeout parameter. </p>

<p>Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00127">127</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::thread::ThreadPool:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool__inherit__graph.png" border="0" usemap="#foedus_1_1thread_1_1ThreadPool_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1thread_1_1ThreadPool_inherit__map" id="foedus_1_1thread_1_1ThreadPool_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="28,5,160,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::thread::ThreadPool:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool__coll__graph.png" border="0" usemap="#foedus_1_1thread_1_1ThreadPool_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1thread_1_1ThreadPool_coll__map" id="foedus_1_1thread_1_1ThreadPool_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="28,5,160,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adc67f1b95ec0a7c65a6493377d994ab5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#adc67f1b95ec0a7c65a6493377d994ab5">ThreadPool</a> ()=delete</td></tr>
<tr class="separator:adc67f1b95ec0a7c65a6493377d994ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb228cdabbeaa28056d956507c286095"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#acb228cdabbeaa28056d956507c286095">ThreadPool</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:acb228cdabbeaa28056d956507c286095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f43db68f9098e832213effba6c33c4c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a3f43db68f9098e832213effba6c33c4c">~ThreadPool</a> ()</td></tr>
<tr class="separator:a3f43db68f9098e832213effba6c33c4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f45491feee920fedee731ad8eaeb45"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a76f45491feee920fedee731ad8eaeb45">initialize</a> () override</td></tr>
<tr class="memdesc:a76f45491feee920fedee731ad8eaeb45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires resources in this object, usually called right after constructor.  <a href="#a76f45491feee920fedee731ad8eaeb45">More...</a><br /></td></tr>
<tr class="separator:a76f45491feee920fedee731ad8eaeb45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a364984c53be46fcfec75c7a370214f1f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a364984c53be46fcfec75c7a370214f1f">is_initialized</a> () const  override</td></tr>
<tr class="memdesc:a364984c53be46fcfec75c7a370214f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already initialized or not.  <a href="#a364984c53be46fcfec75c7a370214f1f">More...</a><br /></td></tr>
<tr class="separator:a364984c53be46fcfec75c7a370214f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a822b45d78f6108e28e022992b70d986d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a822b45d78f6108e28e022992b70d986d">uninitialize</a> () override</td></tr>
<tr class="memdesc:a822b45d78f6108e28e022992b70d986d"><td class="mdescLeft">&#160;</td><td class="mdescRight">An <em>idempotent</em> method to release all resources of this object, if any.  <a href="#a822b45d78f6108e28e022992b70d986d">More...</a><br /></td></tr>
<tr class="separator:a822b45d78f6108e28e022992b70d986d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34531989c3885ab6e0cccc19bf53d87c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c">impersonate</a> (const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;proc_name, const void *task_input, uint64_t task_input_size, <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> *session)</td></tr>
<tr class="memdesc:a34531989c3885ab6e0cccc19bf53d87c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonated thread (<b>NOT</b> the current thread).  <a href="#a34531989c3885ab6e0cccc19bf53d87c">More...</a><br /></td></tr>
<tr class="separator:a34531989c3885ab6e0cccc19bf53d87c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0bb4530f9e58c38b0e3ce0e1058be4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4">impersonate_synchronous</a> (const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;proc_name, const void *task_input=nullptr, uint64_t task_input_size=0)</td></tr>
<tr class="memdesc:abc0bb4530f9e58c38b0e3ce0e1058be4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A shorthand for impersonating a session and synchronously waiting for its end.  <a href="#abc0bb4530f9e58c38b0e3ce0e1058be4">More...</a><br /></td></tr>
<tr class="separator:abc0bb4530f9e58c38b0e3ce0e1058be4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e3ba16ba231dab64401f2413a504f1d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d">impersonate_on_numa_node</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a> node, const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;proc_name, const void *task_input, uint64_t task_input_size, <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> *session)</td></tr>
<tr class="memdesc:a5e3ba16ba231dab64401f2413a504f1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overload to specify a NUMA node to run on.  <a href="#a5e3ba16ba231dab64401f2413a504f1d">More...</a><br /></td></tr>
<tr class="separator:a5e3ba16ba231dab64401f2413a504f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad660d97b51456a1a4f819087f7dfeee7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7">impersonate_on_numa_node_synchronous</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a> node, const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;proc_name, const void *task_input=nullptr, uint64_t task_input_size=0)</td></tr>
<tr class="memdesc:ad660d97b51456a1a4f819087f7dfeee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A shorthand for impersonating a session and synchronously waiting for its end.  <a href="#ad660d97b51456a1a4f819087f7dfeee7">More...</a><br /></td></tr>
<tr class="separator:ad660d97b51456a1a4f819087f7dfeee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f8014506cf0eea7986d26df628d4a71"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71">impersonate_on_numa_core</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> core, const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;proc_name, const void *task_input, uint64_t task_input_size, <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> *session)</td></tr>
<tr class="memdesc:a4f8014506cf0eea7986d26df628d4a71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Overload to specify a core to run on.  <a href="#a4f8014506cf0eea7986d26df628d4a71">More...</a><br /></td></tr>
<tr class="separator:a4f8014506cf0eea7986d26df628d4a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3024f0646533edde18e9718d9180e97e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e">impersonate_on_numa_core_synchronous</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> core, const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;proc_name, const void *task_input=nullptr, uint64_t task_input_size=0)</td></tr>
<tr class="memdesc:a3024f0646533edde18e9718d9180e97e"><td class="mdescLeft">&#160;</td><td class="mdescRight">A shorthand for impersonating a session and synchronously waiting for its end.  <a href="#a3024f0646533edde18e9718d9180e97e">More...</a><br /></td></tr>
<tr class="separator:a3024f0646533edde18e9718d9180e97e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4af4c3d3fd7a9353d892e5270a900f1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html">ThreadPoolPimpl</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c">get_pimpl</a> () const </td></tr>
<tr class="memdesc:a4af4c3d3fd7a9353d892e5270a900f1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pimpl of this object.  <a href="#a4af4c3d3fd7a9353d892e5270a900f1c">More...</a><br /></td></tr>
<tr class="separator:a4af4c3d3fd7a9353d892e5270a900f1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990314c9e1ee9ec3a04c73a683e1066c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1ThreadGroupRef.html">ThreadGroupRef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a990314c9e1ee9ec3a04c73a683e1066c">get_group_ref</a> (<a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a> numa_node)</td></tr>
<tr class="separator:a990314c9e1ee9ec3a04c73a683e1066c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac30dc90d5770fcaa8c302ea5d58ce17e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1ThreadRef.html">ThreadRef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#ac30dc90d5770fcaa8c302ea5d58ce17e">get_thread_ref</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id)</td></tr>
<tr class="separator:ac30dc90d5770fcaa8c302ea5d58ce17e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Initializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Initializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Initializable.html">foedus::Initializable</a></td></tr>
<tr class="memitem:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Initializable.html#aff308260543d18b3fd1367fd9017b176">~Initializable</a> ()</td></tr>
<tr class="separator:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a7680292b738e0278e1a7ded35d6b3d72"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a7680292b738e0278e1a7ded35d6b3d72">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html">ThreadPool</a> &amp;v)</td></tr>
<tr class="separator:a7680292b738e0278e1a7ded35d6b3d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="adc67f1b95ec0a7c65a6493377d994ab5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ThreadPool::ThreadPool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acb228cdabbeaa28056d956507c286095"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ThreadPool::ThreadPool </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00028">28</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;                                     : pimpl_(<span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  pimpl_ = <span class="keyword">new</span> ThreadPoolPimpl(engine);</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f43db68f9098e832213effba6c33c4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ThreadPool::~ThreadPool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00031">31</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                        {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keyword">delete</span> pimpl_;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  pimpl_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a990314c9e1ee9ec3a04c73a683e1066c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadGroupRef.html">ThreadGroupRef</a> * foedus::thread::ThreadPool::get_group_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>numa_node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00066">66</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="thread__pool__pimpl_8hpp_source.html#l00066">foedus::thread::ThreadPoolPimpl::get_group()</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00186">foedus::xct::XctManagerPimpl::handle_epoch_chime_wait_grace_period()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                                                 {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a30a6a44047fc684ddf453d6ce6450783">get_group</a>(numa_node);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPoolPimpl_html_a30a6a44047fc684ddf453d6ce6450783"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a30a6a44047fc684ddf453d6ce6450783">foedus::thread::ThreadPoolPimpl::get_group</a></div><div class="ttdeci">ThreadGroupRef * get_group(ThreadGroupId numa_node)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool__pimpl_8hpp_source.html#l00066">thread_pool_pimpl.hpp:66</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a30a6a44047fc684ddf453d6ce6450783" title="foedus::thread::ThreadPool\lPimpl::get_group" alt="" coords="231,5,408,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_icgraph" id="classfoedus_1_1thread_1_1ThreadPool_a990314c9e1ee9ec3a04c73a683e1066c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a881d783a084b1225debd5408a9248a51" title="Makes sure all worker threads will commit with an epoch larger than grace_epoch. " alt="" coords="231,5,425,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ac95c3e56168f87c3550f908720035d60" title="Main routine for epoch_chime_thread_. " alt="" coords="473,13,668,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#aefb36bf03b0bd29c160f5aa36b219d45" title="foedus::xct::XctManagerPimpl\l::initialize_once" alt="" coords="716,13,911,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4af4c3d3fd7a9353d892e5270a900f1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html">ThreadPoolPimpl</a>* foedus::thread::ThreadPool::get_pimpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the pimpl of this object. </p>
<p>Use it only when you know what you are doing. </p>

<p>Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00237">237</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00767">foedus::thread::ThreadPimpl::get_thread_ref()</a>, and <a class="el" href="logger__impl_8cpp_source.html#l00074">foedus::log::Logger::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{ <span class="keywordflow">return</span> pimpl_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a4af4c3d3fd7a9353d892e5270a900f1c_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a4af4c3d3fd7a9353d892e5270a900f1c_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a4af4c3d3fd7a9353d892e5270a900f1c_icgraph" id="classfoedus_1_1thread_1_1ThreadPool_a4af4c3d3fd7a9353d892e5270a900f1c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="231,123,415,164"/>
<area shape="rect" id="node9" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="257,188,389,229"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3e123fc4b38a06c77a0f8f12234eb5e0" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_other_cur_block" alt="" coords="463,5,680,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a99408b01841c4cd34977a90b71e04dfa" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other\l_async_block" alt="" coords="728,57,912,113"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other_block" alt="" coords="465,123,677,164"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a6b6b5272a4f797f30df41bd32ad13ad6" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_ww_other_block" alt="" coords="463,188,680,229"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3e8a52b170df473aaaf3efad96b5f6b3" title="foedus::thread::ThreadPimpl\lMcsAdaptor::other_waiting" alt="" coords="479,253,663,295"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ab70a7b7dfedbfd2444de64f9a946b262" title="foedus::thread::ThreadPimpl\lMcsAdaptor::dereference\l_rw_tail_block" alt="" coords="728,137,912,193"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac30dc90d5770fcaa8c302ea5d58ce17e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadRef.html">ThreadRef</a> * foedus::thread::ThreadPool::get_thread_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00070">70</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="thread__pool__pimpl_8cpp_source.html#l00074">foedus::thread::ThreadPoolPimpl::get_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                                 {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a3bc54c2f85a462fc295d4c31637b14f0">get_thread</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPoolPimpl_html_a3bc54c2f85a462fc295d4c31637b14f0"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a3bc54c2f85a462fc295d4c31637b14f0">foedus::thread::ThreadPoolPimpl::get_thread</a></div><div class="ttdeci">ThreadRef * get_thread(ThreadId id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool__pimpl_8cpp_source.html#l00074">thread_pool_pimpl.cpp:74</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_ac30dc90d5770fcaa8c302ea5d58ce17e_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_ac30dc90d5770fcaa8c302ea5d58ce17e_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_ac30dc90d5770fcaa8c302ea5d58ce17e_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_ac30dc90d5770fcaa8c302ea5d58ce17e_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a3bc54c2f85a462fc295d4c31637b14f0" title="foedus::thread::ThreadPool\lPimpl::get_thread" alt="" coords="231,104,408,145"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a30a6a44047fc684ddf453d6ce6450783" title="foedus::thread::ThreadPool\lPimpl::get_group" alt="" coords="461,5,638,47"/>
<area shape="rect" id="node4" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="460,71,639,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadGroupRef.html#a47cabd0de09329bc573c051a6ceaa80a" title="Returns Thread object for the given ordinal in this group. " alt="" coords="456,136,643,177"/>
<area shape="rect" id="node6" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="460,201,639,243"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a34531989c3885ab6e0cccc19bf53d87c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPool::impersonate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;&#160;</td>
          <td class="paramname"><em>proc_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>task_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>task_input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonated thread (<b>NOT</b> the current thread). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">proc_name</td><td>the name of the procedure to run on this thread. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">task_input</td><td>input data of arbitrary format for the procedure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">task_input_size</td><td>byte size of the input data to copy into the thread's memory. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">session</td><td>the session to run on this thread. On success, the session receives a ticket so that the caller can wait for the completion.</td></tr>
  </table>
  </dd>
</dl>
<p>This is similar to launch a new thread that calls the functor. The difference is that this doesn't actually create a thread (which is very expensive) but instead just impersonates as one of the pre-allocated threads in the engine. </p><dl class="section return"><dt>Returns</dt><dd>whether successfully impersonated. </dd></dl>

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00040">40</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="thread__pool__pimpl_8cpp_source.html#l00079">foedus::thread::ThreadPoolPimpl::impersonate()</a>.</p>

<p>Referenced by <a class="el" href="thread__pool_8hpp_source.html#l00171">impersonate_synchronous()</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                               {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db">impersonate</a>(proc_name, task_input, task_input_size, session);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPoolPimpl_html_a05fc63b02a5aa1d938f7220d40d7e8db"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db">foedus::thread::ThreadPoolPimpl::impersonate</a></div><div class="ttdeci">bool impersonate(const proc::ProcName &amp;proc_name, const void *task_input, uint64_t task_input_size, ImpersonateSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool__pimpl_8cpp_source.html#l00079">thread_pool_pimpl.cpp:79</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="231,177,408,219"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="474,144,609,185"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="456,209,627,251"/>
<area shape="rect" id="node5" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="1144,5,1327,47"/>
<area shape="rect" id="node6" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="675,119,857,160"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="679,365,853,407"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="677,300,855,341"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="1376,115,1547,156"/>
<area shape="rect" id="node8" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="909,148,1092,189"/>
<area shape="rect" id="node9" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1147,304,1324,345"/>
<area shape="rect" id="node11" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="1144,173,1327,215"/>
<area shape="rect" id="node12" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="1147,239,1324,280"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1375,333,1548,375"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="1389,239,1534,280"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="905,421,1096,447"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_icgraph" id="classfoedus_1_1thread_1_1ThreadPool_a34531989c3885ab6e0cccc19bf53d87c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="231,5,413,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4f8014506cf0eea7986d26df628d4a71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPool::impersonate_on_numa_core </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>core</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;&#160;</td>
          <td class="paramname"><em>proc_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>task_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>task_input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overload to specify a core to run on. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">impersonate()</a> </dd></dl>

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00057">57</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="thread__pool__pimpl_8cpp_source.html#l00111">foedus::thread::ThreadPoolPimpl::impersonate_on_numa_core()</a>.</p>

<p>Referenced by <a class="el" href="thread__pool_8hpp_source.html#l00224">impersonate_on_numa_core_synchronous()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                               {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f">impersonate_on_numa_core</a>(core, proc_name, task_input, task_input_size, session);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPoolPimpl_html_a15f304020e9adda3eb4f7c00f5b9311f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f">foedus::thread::ThreadPoolPimpl::impersonate_on_numa_core</a></div><div class="ttdeci">bool impersonate_on_numa_core(ThreadId core, const proc::ProcName &amp;proc_name, const void *task_input, uint64_t task_input_size, ImpersonateSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool__pimpl_8cpp_source.html#l00111">thread_pool_pimpl.cpp:111</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="247,249,473,291"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a3bc54c2f85a462fc295d4c31637b14f0" title="foedus::thread::ThreadPool\lPimpl::get_thread" alt="" coords="521,136,699,177"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="525,361,695,403"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a30a6a44047fc684ddf453d6ce6450783" title="foedus::thread::ThreadPool\lPimpl::get_group" alt="" coords="751,5,929,47"/>
<area shape="rect" id="node5" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="751,71,929,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadGroupRef.html#a47cabd0de09329bc573c051a6ceaa80a" title="Returns Thread object for the given ordinal in this group. " alt="" coords="747,136,933,177"/>
<area shape="rect" id="node7" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="751,201,929,243"/>
<area shape="rect" id="node9" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="1220,303,1403,344"/>
<area shape="rect" id="node10" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="749,361,931,403"/>
<area shape="rect" id="node18" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="753,608,927,649"/>
<area shape="rect" id="node19" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="751,543,929,584"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="1452,412,1623,453"/>
<area shape="rect" id="node12" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="985,445,1168,487"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1223,601,1400,643"/>
<area shape="rect" id="node15" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="1220,471,1403,512"/>
<area shape="rect" id="node16" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="1223,536,1400,577"/>
<area shape="rect" id="node14" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1451,631,1624,672"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="1465,536,1610,577"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="981,718,1172,745"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_icgraph" id="classfoedus_1_1thread_1_1ThreadPool_a4f8014506cf0eea7986d26df628d4a71_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="247,5,440,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3024f0646533edde18e9718d9180e97e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPool::impersonate_on_numa_core_synchronous </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>core</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;&#160;</td>
          <td class="paramname"><em>proc_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>task_input</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>task_input_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A shorthand for impersonating a session and synchronously waiting for its end. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. ">impersonate_synchronous()</a> </dd></dl>

<p>Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00224">224</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

<p>References <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00046">foedus::thread::ImpersonateSession::get_result()</a>, <a class="el" href="thread__pool_8cpp_source.html#l00057">impersonate_on_numa_core()</a>, and <a class="el" href="error__code_8hpp_source.html#l00242">foedus::kErrorCodeThrNoThreadAvailable</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                  {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    ImpersonateSession session;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71">impersonate_on_numa_core</a>(core, proc_name, task_input, task_input_size, &amp;session)) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">kErrorCodeThrNoThreadAvailable</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> session.get_result();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPool_html_a4f8014506cf0eea7986d26df628d4a71"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71">foedus::thread::ThreadPool::impersonate_on_numa_core</a></div><div class="ttdeci">bool impersonate_on_numa_core(ThreadId core, const proc::ProcName &amp;proc_name, const void *task_input, uint64_t task_input_size, ImpersonateSession *session)</div><div class="ttdoc">Overload to specify a core to run on. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8cpp_source.html#l00057">thread_pool.cpp:57</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">foedus::kErrorCodeThrNoThreadAvailable</a></div><div class="ttdoc">0x0E01 : "THREAD : No worker thread is available for impersonation." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00242">error_code.hpp:242</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a3024f0646533edde18e9718d9180e97e_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a3024f0646533edde18e9718d9180e97e_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a3024f0646533edde18e9718d9180e97e_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a3024f0646533edde18e9718d9180e97e_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="990,424,1173,465"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="247,556,440,597"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="1693,696,1864,737"/>
<area shape="rect" id="node4" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="1461,852,1644,893"/>
<area shape="rect" id="node5" href="classfoedus_1_1FixedErrorStack.html#ae188e11e3d0fb9481b8d20bd252c7920" title="Instantiates an ErrorStack object based on this object. " alt="" coords="1237,253,1399,295"/>
<area shape="rect" id="node17" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="1227,711,1409,752"/>
<area shape="rect" id="node6" href="classfoedus_1_1FixedErrorStack.html#a473b0d84aaa49e9e27d630ded372c641" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="1697,5,1860,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1FixedErrorStack.html#ab8644e6aea98412c534fac81e88e9203" title="Describe this object to the given stream. " alt="" coords="1471,253,1634,295"/>
<area shape="rect" id="node8" href="classfoedus_1_1FixedErrorStack.html#a24e01e0f89b47b93d3d0a547ee8f1017" title="Returns the custom error message. " alt="" coords="1697,71,1860,112"/>
<area shape="rect" id="node9" href="group__ERRORCODES.html#gaa2ded6dcdd1da8d29d893eeb014a78e9" title="Returns the names of ErrorCode enum defined in error_code.xmacro. " alt="" coords="1699,137,1858,163"/>
<area shape="rect" id="node10" href="classfoedus_1_1FixedErrorStack.html#a77e87960b6fa0c79b0b88d52197041e5" title="Returns the file name of the given stack position. " alt="" coords="1697,188,1860,229"/>
<area shape="rect" id="node11" href="classfoedus_1_1FixedErrorStack.html#ac3e802ea3b5a27d120a1b815216d4a53" title="Returns the function name of the given stack position. " alt="" coords="1697,253,1860,295"/>
<area shape="rect" id="node12" href="classfoedus_1_1FixedErrorStack.html#a7781080b8033dbe9afa7de813e39aa7c" title="Returns the line number of the given stack position. " alt="" coords="1697,319,1860,360"/>
<area shape="rect" id="node13" href="classfoedus_1_1FixedErrorStack.html#adce404a955c1598c740094be0ae796e1" title="Returns the error message inferred by the error code. " alt="" coords="1697,384,1860,425"/>
<area shape="rect" id="node15" href="classfoedus_1_1FixedErrorStack.html#a66b70d71bc70fc6d94c7d8cb6759437d" title="Returns the depth of stack this error code has collected. " alt="" coords="1697,449,1860,491"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1709,515,1849,556"/>
<area shape="rect" id="node14" href="group__ERRORCODES.html#gaefc0aeec33bc4adc2f147fd1828b816e" title="Returns the error messages corresponding to ErrorCode enum defined in error_code.xmacro. " alt="" coords="1913,391,2092,418"/>
<area shape="rect" id="node18" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1464,787,1641,828"/>
<area shape="rect" id="node20" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="1461,721,1644,763"/>
<area shape="rect" id="node21" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="1464,553,1641,595"/>
<area shape="rect" id="node19" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1692,885,1865,927"/>
<area shape="rect" id="node22" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="1706,580,1851,621"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="488,588,715,629"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a3bc54c2f85a462fc295d4c31637b14f0" title="foedus::thread::ThreadPool\lPimpl::get_thread" alt="" coords="763,588,940,629"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="766,816,937,857"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a30a6a44047fc684ddf453d6ce6450783" title="foedus::thread::ThreadPool\lPimpl::get_group" alt="" coords="993,620,1170,661"/>
<area shape="rect" id="node27" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="992,685,1171,727"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1ThreadGroupRef.html#a47cabd0de09329bc573c051a6ceaa80a" title="Returns Thread object for the given ordinal in this group. " alt="" coords="988,489,1175,531"/>
<area shape="rect" id="node29" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="992,555,1171,596"/>
<area shape="rect" id="node31" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="990,816,1173,857"/>
<area shape="rect" id="node32" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="995,751,1168,792"/>
<area shape="rect" id="node33" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="993,972,1170,1013"/>
<area shape="rect" id="node34" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1223,1030,1413,1057"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5e3ba16ba231dab64401f2413a504f1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPool::impersonate_on_numa_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;&#160;</td>
          <td class="paramname"><em>proc_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>task_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>task_input_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> *&#160;</td>
          <td class="paramname"><em>session</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Overload to specify a NUMA node to run on. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">impersonate()</a> </dd></dl>

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00048">48</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="thread__pool__pimpl_8cpp_source.html#l00095">foedus::thread::ThreadPoolPimpl::impersonate_on_numa_node()</a>.</p>

<p>Referenced by <a class="el" href="thread__pool_8hpp_source.html#l00197">impersonate_on_numa_node_synchronous()</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                               {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80">impersonate_on_numa_node</a>(node, proc_name, task_input, task_input_size, session);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPoolPimpl_html_af768218c3f43620264c7559fa089ed80"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80">foedus::thread::ThreadPoolPimpl::impersonate_on_numa_node</a></div><div class="ttdeci">bool impersonate_on_numa_node(ThreadGroupId node, const proc::ProcName &amp;proc_name, const void *task_input, uint64_t task_input_size, ImpersonateSession *session)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool__pimpl_8cpp_source.html#l00095">thread_pool_pimpl.cpp:95</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="249,144,479,185"/>
<area shape="rect" id="node3" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="553,79,687,120"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadGroupRef.html#a47cabd0de09329bc573c051a6ceaa80a" title="Returns Thread object for the given ordinal in this group. " alt="" coords="527,144,713,185"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="535,209,705,251"/>
<area shape="rect" id="node6" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="1231,5,1413,47"/>
<area shape="rect" id="node7" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="761,119,944,160"/>
<area shape="rect" id="node15" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="766,365,939,407"/>
<area shape="rect" id="node16" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="764,300,941,341"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="1463,115,1633,156"/>
<area shape="rect" id="node9" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="996,148,1179,189"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1233,304,1411,345"/>
<area shape="rect" id="node12" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="1231,173,1413,215"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="1233,239,1411,280"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1461,333,1635,375"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="1475,239,1621,280"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="992,421,1183,447"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_icgraph" id="classfoedus_1_1thread_1_1ThreadPool_a5e3ba16ba231dab64401f2413a504f1d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="249,5,445,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad660d97b51456a1a4f819087f7dfeee7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPool::impersonate_on_numa_node_synchronous </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a>&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;&#160;</td>
          <td class="paramname"><em>proc_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>task_input</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>task_input_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A shorthand for impersonating a session and synchronously waiting for its end. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. ">impersonate_synchronous()</a> </dd></dl>

<p>Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00197">197</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

<p>References <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00046">foedus::thread::ImpersonateSession::get_result()</a>, <a class="el" href="thread__pool_8cpp_source.html#l00048">impersonate_on_numa_node()</a>, and <a class="el" href="error__code_8hpp_source.html#l00242">foedus::kErrorCodeThrNoThreadAvailable</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                  {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    ImpersonateSession session;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d">impersonate_on_numa_node</a>(node, proc_name, task_input, task_input_size, &amp;session)) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">kErrorCodeThrNoThreadAvailable</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> session.get_result();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">foedus::kErrorCodeThrNoThreadAvailable</a></div><div class="ttdoc">0x0E01 : "THREAD : No worker thread is available for impersonation." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00242">error_code.hpp:242</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPool_html_a5e3ba16ba231dab64401f2413a504f1d"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d">foedus::thread::ThreadPool::impersonate_on_numa_node</a></div><div class="ttdeci">bool impersonate_on_numa_node(ThreadGroupId node, const proc::ProcName &amp;proc_name, const void *task_input, uint64_t task_input_size, ImpersonateSession *session)</div><div class="ttdoc">Overload to specify a NUMA node to run on. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8cpp_source.html#l00048">thread_pool.cpp:48</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_ad660d97b51456a1a4f819087f7dfeee7_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_ad660d97b51456a1a4f819087f7dfeee7_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_ad660d97b51456a1a4f819087f7dfeee7_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_ad660d97b51456a1a4f819087f7dfeee7_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="1005,671,1188,712"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="249,753,445,795"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="1707,696,1877,737"/>
<area shape="rect" id="node4" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="1475,852,1657,893"/>
<area shape="rect" id="node5" href="classfoedus_1_1FixedErrorStack.html#ae188e11e3d0fb9481b8d20bd252c7920" title="Instantiates an ErrorStack object based on this object. " alt="" coords="1250,253,1413,295"/>
<area shape="rect" id="node17" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="1240,700,1423,741"/>
<area shape="rect" id="node6" href="classfoedus_1_1FixedErrorStack.html#a473b0d84aaa49e9e27d630ded372c641" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="1711,5,1873,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1FixedErrorStack.html#ab8644e6aea98412c534fac81e88e9203" title="Describe this object to the given stream. " alt="" coords="1485,253,1647,295"/>
<area shape="rect" id="node8" href="classfoedus_1_1FixedErrorStack.html#a24e01e0f89b47b93d3d0a547ee8f1017" title="Returns the custom error message. " alt="" coords="1711,71,1873,112"/>
<area shape="rect" id="node9" href="group__ERRORCODES.html#gaa2ded6dcdd1da8d29d893eeb014a78e9" title="Returns the names of ErrorCode enum defined in error_code.xmacro. " alt="" coords="1713,137,1871,163"/>
<area shape="rect" id="node10" href="classfoedus_1_1FixedErrorStack.html#a77e87960b6fa0c79b0b88d52197041e5" title="Returns the file name of the given stack position. " alt="" coords="1711,188,1873,229"/>
<area shape="rect" id="node11" href="classfoedus_1_1FixedErrorStack.html#ac3e802ea3b5a27d120a1b815216d4a53" title="Returns the function name of the given stack position. " alt="" coords="1711,253,1873,295"/>
<area shape="rect" id="node12" href="classfoedus_1_1FixedErrorStack.html#a7781080b8033dbe9afa7de813e39aa7c" title="Returns the line number of the given stack position. " alt="" coords="1711,319,1873,360"/>
<area shape="rect" id="node13" href="classfoedus_1_1FixedErrorStack.html#adce404a955c1598c740094be0ae796e1" title="Returns the error message inferred by the error code. " alt="" coords="1711,384,1873,425"/>
<area shape="rect" id="node15" href="classfoedus_1_1FixedErrorStack.html#a66b70d71bc70fc6d94c7d8cb6759437d" title="Returns the depth of stack this error code has collected. " alt="" coords="1711,449,1873,491"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1722,515,1862,556"/>
<area shape="rect" id="node14" href="group__ERRORCODES.html#gaefc0aeec33bc4adc2f147fd1828b816e" title="Returns the error messages corresponding to ErrorCode enum defined in error_code.xmacro. " alt="" coords="1927,391,2105,418"/>
<area shape="rect" id="node18" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1477,787,1655,828"/>
<area shape="rect" id="node20" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="1475,721,1657,763"/>
<area shape="rect" id="node21" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="1477,553,1655,595"/>
<area shape="rect" id="node19" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1705,875,1879,916"/>
<area shape="rect" id="node22" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="1719,580,1865,621"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="493,785,723,827"/>
<area shape="rect" id="node25" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="797,867,931,908"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadGroupRef.html#a47cabd0de09329bc573c051a6ceaa80a" title="Returns Thread object for the given ordinal in this group. " alt="" coords="771,736,957,777"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="779,801,949,843"/>
<area shape="rect" id="node28" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="1005,801,1188,843"/>
<area shape="rect" id="node29" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="1010,736,1183,777"/>
<area shape="rect" id="node30" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="1008,961,1185,1003"/>
<area shape="rect" id="node31" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1236,1019,1427,1046"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abc0bb4530f9e58c38b0e3ce0e1058be4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPool::impersonate_synchronous </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__PROC.html#gaf2b456ef002bdeb0e8e51321a7a05c8f">proc::ProcName</a> &amp;&#160;</td>
          <td class="paramname"><em>proc_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>task_input</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>task_input_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A shorthand for impersonating a session and synchronously waiting for its end. </p>
<p>Useful for a single and synchronous task invocation. This is equivalent to the following <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">impersonate()</a> invocation. </p><div class="fragment"><div class="line">ImpersonateSession session;</div>
<div class="line"><span class="keywordflow">if</span> (!pool.impersonate(proc_name, task_input, task_input_size, &amp;session)) {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">kErrorCodeThrNoThreadAvailable</a>);</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">return</span> session.get_result();</div>
</div><!-- fragment --><p>{.cpp} </p><dl class="section return"><dt>Returns</dt><dd>Error code of the impersonation or (if impersonation succeeds) of the task. This returns kRetOk iff impersonation and the task succeed. </dd></dl>

<p>Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00171">171</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

<p>References <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00046">foedus::thread::ImpersonateSession::get_result()</a>, <a class="el" href="thread__pool_8cpp_source.html#l00040">impersonate()</a>, and <a class="el" href="error__code_8hpp_source.html#l00242">foedus::kErrorCodeThrNoThreadAvailable</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                  {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    ImpersonateSession session;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c">impersonate</a>(proc_name, task_input, task_input_size, &amp;session)) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">kErrorCodeThrNoThreadAvailable</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> session.get_result();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56af3957c5ac348b40fbaf406a0fe16db74">foedus::kErrorCodeThrNoThreadAvailable</a></div><div class="ttdoc">0x0E01 : "THREAD : No worker thread is available for impersonation." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00242">error_code.hpp:242</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPool_html_a34531989c3885ab6e0cccc19bf53d87c"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c">foedus::thread::ThreadPool::impersonate</a></div><div class="ttdeci">bool impersonate(const proc::ProcName &amp;proc_name, const void *task_input, uint64_t task_input_size, ImpersonateSession *session)</div><div class="ttdoc">Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8cpp_source.html#l00040">thread_pool.cpp:40</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_abc0bb4530f9e58c38b0e3ce0e1058be4_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_abc0bb4530f9e58c38b0e3ce0e1058be4_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_abc0bb4530f9e58c38b0e3ce0e1058be4_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_abc0bb4530f9e58c38b0e3ce0e1058be4_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="905,671,1088,712"/>
<area shape="rect" id="node23" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="236,733,413,775"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="1607,696,1777,737"/>
<area shape="rect" id="node4" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="1375,852,1557,893"/>
<area shape="rect" id="node5" href="classfoedus_1_1FixedErrorStack.html#ae188e11e3d0fb9481b8d20bd252c7920" title="Instantiates an ErrorStack object based on this object. " alt="" coords="1150,253,1313,295"/>
<area shape="rect" id="node17" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="1140,700,1323,741"/>
<area shape="rect" id="node6" href="classfoedus_1_1FixedErrorStack.html#a473b0d84aaa49e9e27d630ded372c641" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="1611,5,1773,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1FixedErrorStack.html#ab8644e6aea98412c534fac81e88e9203" title="Describe this object to the given stream. " alt="" coords="1385,253,1547,295"/>
<area shape="rect" id="node8" href="classfoedus_1_1FixedErrorStack.html#a24e01e0f89b47b93d3d0a547ee8f1017" title="Returns the custom error message. " alt="" coords="1611,71,1773,112"/>
<area shape="rect" id="node9" href="group__ERRORCODES.html#gaa2ded6dcdd1da8d29d893eeb014a78e9" title="Returns the names of ErrorCode enum defined in error_code.xmacro. " alt="" coords="1613,137,1771,163"/>
<area shape="rect" id="node10" href="classfoedus_1_1FixedErrorStack.html#a77e87960b6fa0c79b0b88d52197041e5" title="Returns the file name of the given stack position. " alt="" coords="1611,188,1773,229"/>
<area shape="rect" id="node11" href="classfoedus_1_1FixedErrorStack.html#ac3e802ea3b5a27d120a1b815216d4a53" title="Returns the function name of the given stack position. " alt="" coords="1611,253,1773,295"/>
<area shape="rect" id="node12" href="classfoedus_1_1FixedErrorStack.html#a7781080b8033dbe9afa7de813e39aa7c" title="Returns the line number of the given stack position. " alt="" coords="1611,319,1773,360"/>
<area shape="rect" id="node13" href="classfoedus_1_1FixedErrorStack.html#adce404a955c1598c740094be0ae796e1" title="Returns the error message inferred by the error code. " alt="" coords="1611,384,1773,425"/>
<area shape="rect" id="node15" href="classfoedus_1_1FixedErrorStack.html#a66b70d71bc70fc6d94c7d8cb6759437d" title="Returns the depth of stack this error code has collected. " alt="" coords="1611,449,1773,491"/>
<area shape="rect" id="node16" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1622,515,1762,556"/>
<area shape="rect" id="node14" href="group__ERRORCODES.html#gaefc0aeec33bc4adc2f147fd1828b816e" title="Returns the error messages corresponding to ErrorCode enum defined in error_code.xmacro. " alt="" coords="1827,391,2005,418"/>
<area shape="rect" id="node18" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="1377,787,1555,828"/>
<area shape="rect" id="node20" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="1375,721,1557,763"/>
<area shape="rect" id="node21" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="1377,553,1555,595"/>
<area shape="rect" id="node19" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1605,875,1779,916"/>
<area shape="rect" id="node22" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="1619,580,1765,621"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="461,733,639,775"/>
<area shape="rect" id="node25" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="705,733,839,775"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="687,801,857,843"/>
<area shape="rect" id="node27" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="905,801,1088,843"/>
<area shape="rect" id="node28" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="910,736,1083,777"/>
<area shape="rect" id="node29" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="908,961,1085,1003"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1136,1019,1327,1046"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a76f45491feee920fedee731ad8eaeb45"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPool::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Acquires resources in this object, usually called right after constructor. </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a364984c53be46fcfec75c7a370214f1f" title="Returns whether the object has been already initialized or not. ">is_initialized()</a> == FALSE</dd></dl>
<p>If and only if the return value was not an error, <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a364984c53be46fcfec75c7a370214f1f" title="Returns whether the object has been already initialized or not. ">is_initialized()</a> will return TRUE. This method is usually not idempotent, but some implementation can choose to be. In that case, the implementation class should clarify that it's idempotent. This method is responsible for releasing all acquired resources when initialization fails. This method itself is NOT thread-safe. Do not call this in a racy situation. </p>

<p>Implements <a class="el" href="classfoedus_1_1Initializable.html#aa087b096d1edaeb0304c250eadb0d7e1">foedus::Initializable</a>.</p>

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00036">36</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="initializable_8hpp_source.html#l00169">foedus::DefaultInitializable::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;{ <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a>(); }</div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a22a0dc3bbbca682c3bc41eace9b6d1ff"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">foedus::DefaultInitializable::initialize</a></div><div class="ttdeci">ErrorStack initialize() override final</div><div class="ttdoc">Typical implementation of Initializable::initialize() that provides initialize-once semantics...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00169">initializable.hpp:169</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a76f45491feee920fedee731ad8eaeb45_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a76f45491feee920fedee731ad8eaeb45_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a76f45491feee920fedee731ad8eaeb45_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a76f45491feee920fedee731ad8eaeb45_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff" title="Typical implementation of Initializable::initialize() that provides initialize&#45;once semantics..." alt="" coords="231,104,403,145"/>
<area shape="rect" id="node3" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250" title="foedus::DefaultInitializable\l::initialize_once" alt="" coords="451,5,623,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1ErrorStack.html#a9c7b3a8b3806ff623c7fb4a9db5cbeec" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="471,71,602,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="451,136,623,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="451,201,623,243"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a364984c53be46fcfec75c7a370214f1f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ThreadPool::is_initialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether the object has been already initialized or not. </p>

<p>Implements <a class="el" href="classfoedus_1_1Initializable.html#a3c3a54a44a7a86bd99f800dbebae90eb">foedus::Initializable</a>.</p>

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00037">37</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="initializable_8hpp_source.html#l00196">foedus::DefaultInitializable::is_initialized()</a>.</p>

<p>Referenced by <a class="el" href="storage__manager__pimpl_8cpp_source.html#l00069">foedus::storage::StorageManagerPimpl::initialize_once()</a>, <a class="el" href="log__manager__pimpl_8cpp_source.html#l00049">foedus::log::LogManagerPimpl::initialize_once()</a>, <a class="el" href="storage__manager__pimpl_8cpp_source.html#l00208">foedus::storage::StorageManagerPimpl::uninitialize_once()</a>, and <a class="el" href="log__manager__pimpl_8cpp_source.html#l00149">foedus::log::LogManagerPimpl::uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{ <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a>(); }</div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_a1abda1e84b8af8bd6916e52fd0a09f3e"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">foedus::DefaultInitializable::is_initialized</a></div><div class="ttdeci">bool is_initialized() const  override final</div><div class="ttdoc">Returns whether the object has been already initialized or not. </div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00196">initializable.hpp:196</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="231,5,403,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_icgraph" id="classfoedus_1_1thread_1_1ThreadPool_a364984c53be46fcfec75c7a370214f1f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#ad89ca2bb2619e01c3b13d65302a3d7c9" title="foedus::storage::Storage\lManagerPimpl::initialize_once" alt="" coords="238,5,433,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="237,71,434,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#ae4eaa4425c8c9aa4bfbbbf56303748e5" title="foedus::storage::Storage\lManagerPimpl::uninitialize_once" alt="" coords="231,136,440,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a9458809a7d4367f362b8775dbd5a18cf" title="foedus::log::LogManagerPimpl\l::uninitialize_once" alt="" coords="237,201,434,243"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a822b45d78f6108e28e022992b70d986d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ThreadPool::uninitialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An <em>idempotent</em> method to release all resources of this object, if any. </p>
<p>After this method, <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a364984c53be46fcfec75c7a370214f1f" title="Returns whether the object has been already initialized or not. ">is_initialized()</a> will return FALSE. <b>Whether</b> this method encounters an error or not, the implementation should make the best effort to release as many resources as possible. In other words, Do not leak <b>all</b> resources because of <b>one</b> issue. This method itself is NOT thread-safe. Do not call this in a racy situation. </p><dl class="section attention"><dt>Attention</dt><dd>This method is NOT automatically called from the destructor. This is due to the fundamental limitation in C++. Explicitly call this method as soon as you are done, checking the returned value. You can also use <a class="el" href="classfoedus_1_1UninitializeGuard.html" title="Calls Initializable::uninitialize() automatically when it gets out of scope. ">UninitializeGuard</a> to ameliorate the issue, but it's not perfect. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The error this method encounters, if any. In case there are multiple errors while uninitialization, the implementation should use <a class="el" href="classfoedus_1_1ErrorStackBatch.html" title="Batches zero or more ErrorStack objects to represent in one ErrorStack. ">ErrorStackBatch</a> to produce a batched <a class="el" href="classfoedus_1_1ErrorStack.html" title="Brings error stacktrace information as return value of functions. ">ErrorStack</a> object. </dd></dl>

<p>Implements <a class="el" href="classfoedus_1_1Initializable.html#afbe5738b0bc85362fba80bdf788fd3c3">foedus::Initializable</a>.</p>

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00038">38</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>

<p>References <a class="el" href="initializable_8hpp_source.html#l00187">foedus::DefaultInitializable::uninitialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{ <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a>(); }</div>
<div class="ttc" id="classfoedus_1_1DefaultInitializable_html_ab14b136a7d26f9f499ab9dc15a45a8cb"><div class="ttname"><a href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">foedus::DefaultInitializable::uninitialize</a></div><div class="ttdeci">ErrorStack uninitialize() override final</div><div class="ttdoc">Typical implementation of Initializable::uninitialize() that provides uninitialize-once semantics...</div><div class="ttdef"><b>Definition:</b> <a href="initializable_8hpp_source.html#l00187">initializable.hpp:187</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPool_a822b45d78f6108e28e022992b70d986d_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPool_a822b45d78f6108e28e022992b70d986d_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPool_a822b45d78f6108e28e022992b70d986d_cgraph" id="classfoedus_1_1thread_1_1ThreadPool_a822b45d78f6108e28e022992b70d986d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb" title="Typical implementation of Initializable::uninitialize() that provides uninitialize&#45;once semantics..." alt="" coords="231,39,403,80"/>
<area shape="rect" id="node3" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e" title="Returns whether the object has been already initialized or not. " alt="" coords="451,5,623,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b" title="foedus::DefaultInitializable\l::uninitialize_once" alt="" coords="451,71,623,112"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a7680292b738e0278e1a7ded35d6b3d72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html">ThreadPool</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pool_8cpp_source.html#l00075">75</a> of file <a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                                           {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  o &lt;&lt; *v.pimpl_;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/thread/<a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/thread/<a class="el" href="thread__pool_8cpp_source.html">thread_pool.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1thread.html">thread</a></li><li class="navelem"><a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html">ThreadPool</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
