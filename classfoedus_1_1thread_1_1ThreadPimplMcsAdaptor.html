<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__THREAD.html">Thread and Thread-Group</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements McsAdaptorConcept over <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html" title="Pimpl object of Thread. ">ThreadPimpl</a>.  
 <a href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename RW_BLOCK&gt;<br />
class foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;</h3>

<p>Implements McsAdaptorConcept over <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html" title="Pimpl object of Thread. ">ThreadPimpl</a>. </p>
<p>This object is instantiated for every MCS lock invocation in <a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html" title="Pimpl object of Thread. ">ThreadPimpl</a>, but this object is essentially just the <em>this</em> pointer itself (pimpl_). The compiler will/should eliminate basically everything. </p>

<p>Definition at line <a class="el" href="thread_2fwd_8hpp_source.html#l00038">38</a> of file <a class="el" href="thread_2fwd_8hpp_source.html">fwd.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="thread_2fwd_8hpp_source.html">fwd.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a8d415053db126175bf95dc313a5c18f9"><td class="memItemLeft" align="right" valign="top">typedef RW_BLOCK&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a8d415053db126175bf95dc313a5c18f9">ThisRwBlock</a></td></tr>
<tr class="separator:a8d415053db126175bf95dc313a5c18f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af227ef1772cf3e28524a500154420746"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#af227ef1772cf3e28524a500154420746">ThreadPimplMcsAdaptor</a> (<a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html">ThreadPimpl</a> *pimpl)</td></tr>
<tr class="separator:af227ef1772cf3e28524a500154420746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a252d9e2faa6808bed3cb753707bc1412"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a252d9e2faa6808bed3cb753707bc1412">~ThreadPimplMcsAdaptor</a> ()</td></tr>
<tr class="separator:a252d9e2faa6808bed3cb753707bc1412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60344962a6ac89a8370b7869109d4106"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a60344962a6ac89a8370b7869109d4106">issue_new_block</a> ()</td></tr>
<tr class="separator:a60344962a6ac89a8370b7869109d4106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c116f8315272a5898426a3e0532038b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a5c116f8315272a5898426a3e0532038b">cancel_new_block</a> (<a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> the_block)</td></tr>
<tr class="separator:a5c116f8315272a5898426a3e0532038b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ff66fec3137618e42043a3813295f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#aa6ff66fec3137618e42043a3813295f1">get_cur_block</a> () const </td></tr>
<tr class="separator:aa6ff66fec3137618e42043a3813295f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfade56f1f287f66e2ceb587bf5bd25d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#abfade56f1f287f66e2ceb587bf5bd25d">get_my_id</a> () const </td></tr>
<tr class="separator:abfade56f1f287f66e2ceb587bf5bd25d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc9ca36fcd15160de95cf14558801efa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#acc9ca36fcd15160de95cf14558801efa">get_my_numa_node</a> () const </td></tr>
<tr class="separator:acc9ca36fcd15160de95cf14558801efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a6f2f5b69b35952d85e1ab2f4188eb9"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a7a6f2f5b69b35952d85e1ab2f4188eb9">me_waiting</a> ()</td></tr>
<tr class="separator:a7a6f2f5b69b35952d85e1ab2f4188eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c69f88c0c057b40b7eaa32182632e21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsWwBlock.html">xct::McsWwBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a1c69f88c0c057b40b7eaa32182632e21">get_ww_my_block</a> (<a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> index)</td></tr>
<tr class="separator:a1c69f88c0c057b40b7eaa32182632e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9ab464a4636b91fb8957f03f73b3f8d"><td class="memItemLeft" align="right" valign="top">RW_BLOCK *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ac9ab464a4636b91fb8957f03f73b3f8d">get_rw_my_block</a> (<a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> index)</td></tr>
<tr class="separator:ac9ab464a4636b91fb8957f03f73b3f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e8a52b170df473aaaf3efad96b5f6b3"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3e8a52b170df473aaaf3efad96b5f6b3">other_waiting</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id)</td></tr>
<tr class="separator:a3e8a52b170df473aaaf3efad96b5f6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e123fc4b38a06c77a0f8f12234eb5e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3e123fc4b38a06c77a0f8f12234eb5e0">get_other_cur_block</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id)</td></tr>
<tr class="separator:a3e123fc4b38a06c77a0f8f12234eb5e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b6b5272a4f797f30df41bd32ad13ad6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsWwBlock.html">xct::McsWwBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a6b6b5272a4f797f30df41bd32ad13ad6">get_ww_other_block</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id, <a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> index)</td></tr>
<tr class="separator:a6b6b5272a4f797f30df41bd32ad13ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fec4f48fa468bf3c18986943938a47c"><td class="memItemLeft" align="right" valign="top">RW_BLOCK *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c">get_rw_other_block</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id, <a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> index)</td></tr>
<tr class="separator:a3fec4f48fa468bf3c18986943938a47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab70a7b7dfedbfd2444de64f9a946b262"><td class="memItemLeft" align="right" valign="top">RW_BLOCK *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ab70a7b7dfedbfd2444de64f9a946b262">dereference_rw_tail_block</a> (uint32_t tail_int)</td></tr>
<tr class="separator:ab70a7b7dfedbfd2444de64f9a946b262"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99408b01841c4cd34977a90b71e04dfa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html">xct::McsRwExtendedBlock</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a99408b01841c4cd34977a90b71e04dfa">get_rw_other_async_block</a> (<a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> id, <a class="el" href="structfoedus_1_1xct_1_1McsRwLock.html">xct::McsRwLock</a> *lock)</td></tr>
<tr class="separator:a99408b01841c4cd34977a90b71e04dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf76198e353d823422303c51a7241869"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#adf76198e353d823422303c51a7241869">add_rw_async_mapping</a> (<a class="el" href="structfoedus_1_1xct_1_1McsRwLock.html">xct::McsRwLock</a> *lock, <a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> block_index)</td></tr>
<tr class="separator:adf76198e353d823422303c51a7241869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1b4a1cda0dfedf0fa18e43e70c5d2b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ac1b4a1cda0dfedf0fa18e43e70c5d2b8">remove_rw_async_mapping</a> (<a class="el" href="structfoedus_1_1xct_1_1McsRwLock.html">xct::McsRwLock</a> *lock)</td></tr>
<tr class="separator:ac1b4a1cda0dfedf0fa18e43e70c5d2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a8d415053db126175bf95dc313a5c18f9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">typedef RW_BLOCK <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::<a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a8d415053db126175bf95dc313a5c18f9">ThisRwBlock</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00406">406</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af227ef1772cf3e28524a500154420746"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::<a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">ThreadPimplMcsAdaptor</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimpl.html">ThreadPimpl</a> *&#160;</td>
          <td class="paramname"><em>pimpl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00408">408</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;: pimpl_(pimpl) {}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a252d9e2faa6808bed3cb753707bc1412"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::~<a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">ThreadPimplMcsAdaptor</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00409">409</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="adf76198e353d823422303c51a7241869"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::add_rw_async_mapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsRwLock.html">xct::McsRwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td>
          <td class="paramname"><em>block_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00481">481</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00875">foedus::xct::McsRwAsyncMapping::block_index_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">foedus::thread::ThreadPimpl::control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a>, <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, <a class="el" href="xct__id_8hpp_source.html#l00874">foedus::xct::McsRwAsyncMapping::lock_id_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00087">foedus::thread::ThreadControlBlock::mcs_rw_async_mapping_current_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00390">foedus::thread::ThreadPimpl::mcs_rw_async_mappings_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01231">foedus::xct::rw_lock_to_universal_lock_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                                                              {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="comment">// TLS, no concurrency control needed</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">auto</span> index = pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">mcs_rw_async_mapping_current_</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt;= pimpl_-&gt;control_block_-&gt;mcs_block_current_);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[index].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a9952bb76a5f0a981d67b905ee671a41d">lock_id_</a> == <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">xct::kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[index].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a93d52c59f83a46ad670c19d98e38c97f">block_index_</a> == 0);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[index].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a9952bb76a5f0a981d67b905ee671a41d">lock_id_</a> =</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383">xct::rw_lock_to_universal_lock_id</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>, lock);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[index].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a93d52c59f83a46ad670c19d98e38c97f">block_index_</a> = block_index;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    ++pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">mcs_rw_async_mapping_current_</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ab6884f9a5b07248973aaa54b88e86383"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383">foedus::xct::rw_lock_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId rw_lock_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, McsRwLock *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01231">xct_id.hpp:1231</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a39fd5c3a2e0e0175a52ae24c3339e0c8"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">foedus::thread::ThreadControlBlock::mcs_rw_async_mapping_current_</a></div><div class="ttdeci">uint32_t mcs_rw_async_mapping_current_</div><div class="ttdoc">How many async mappings for extended RW lock we have so far. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00087">thread_pimpl.hpp:87</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsRwAsyncMapping_html_a93d52c59f83a46ad670c19d98e38c97f"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a93d52c59f83a46ad670c19d98e38c97f">foedus::xct::McsRwAsyncMapping::block_index_</a></div><div class="ttdeci">McsBlockIndex block_index_</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00875">xct_id.hpp:875</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a052ae65bb017f9f77741db58bcbcf936"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">foedus::thread::ThreadPimpl::mcs_rw_async_mappings_</a></div><div class="ttdeci">xct::McsRwAsyncMapping * mcs_rw_async_mappings_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00390">thread_pimpl.hpp:390</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsRwAsyncMapping_html_a9952bb76a5f0a981d67b905ee671a41d"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a9952bb76a5f0a981d67b905ee671a41d">foedus::xct::McsRwAsyncMapping::lock_id_</a></div><div class="ttdeci">UniversalLockId lock_id_</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00874">xct_id.hpp:874</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_adf76198e353d823422303c51a7241869_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_adf76198e353d823422303c51a7241869_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_adf76198e353d823422303c51a7241869_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_adf76198e353d823422303c51a7241869_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383" title="foedus::xct::rw_lock\l_to_universal_lock_id" alt="" coords="237,39,383,80"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="431,39,593,80"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="641,5,835,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="657,71,819,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5c116f8315272a5898426a3e0532038b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::cancel_new_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td>
          <td class="paramname"><em>the_block</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00416">416</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">foedus::thread::ThreadPimpl::control_block_</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>.</p>
<div class="fragment"><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                                  {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a> == the_block);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    --pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a174d00be0d6482995665c5731da35d79"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">foedus::thread::ThreadControlBlock::mcs_block_current_</a></div><div class="ttdeci">uint32_t mcs_block_current_</div><div class="ttdoc">How many MCS blocks we allocated in this thread&#39;s current xct. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00084">thread_pimpl.hpp:84</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab70a7b7dfedbfd2444de64f9a946b262"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">RW_BLOCK* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::dereference_rw_tail_block </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tail_int</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00464">464</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00454">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_block()</a>, <a class="el" href="xct__id_8hpp_source.html#l00818">foedus::xct::McsRwLock::get_tail_waiter()</a>, <a class="el" href="xct__id_8hpp_source.html#l00817">foedus::xct::McsRwLock::get_tail_waiter_block()</a>, and <a class="el" href="xct__id_8hpp_source.html#l00861">foedus::xct::McsRwLock::tail_</a>.</p>
<div class="fragment"><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                                         {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    xct::McsRwLock tail_tmp;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    tail_tmp.tail_ = tail_int;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    uint32_t tail_id = tail_tmp.get_tail_waiter();</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    uint32_t tail_block = tail_tmp.get_tail_waiter_block();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c">get_rw_other_block</a>(tail_id, tail_block);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_html_a3fec4f48fa468bf3c18986943938a47c"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c">foedus::thread::ThreadPimplMcsAdaptor::get_rw_other_block</a></div><div class="ttdeci">RW_BLOCK * get_rw_other_block(ThreadId id, xct::McsBlockIndex index)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00454">thread_pimpl.hpp:454</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ab70a7b7dfedbfd2444de64f9a946b262_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ab70a7b7dfedbfd2444de64f9a946b262_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ab70a7b7dfedbfd2444de64f9a946b262_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ab70a7b7dfedbfd2444de64f9a946b262_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other_block" alt="" coords="237,136,449,177"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1McsRwLock.html#a3d8cf73848daf77b739df642dbc6205e" title="foedus::xct::McsRwLock\l::get_tail_waiter" alt="" coords="261,201,426,243"/>
<area shape="rect" id="node12" href="structfoedus_1_1xct_1_1McsRwLock.html#acffec9f94307c8b3473e1d21c3999e14" title="foedus::xct::McsRwLock\l::get_tail_waiter_block" alt="" coords="261,267,426,308"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="497,71,681,112"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1ThreadRef.html#aef24583ba3b89316f31f6f07cef3d5c8" title="foedus::thread::ThreadRef\l::get_mcs_rw_blocks" alt="" coords="504,136,675,177"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="504,201,675,243"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="729,5,907,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="751,71,885,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="729,136,907,177"/>
<area shape="rect" id="node7" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="955,103,1133,144"/>
<area shape="rect" id="node8" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="955,168,1133,209"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa6ff66fec3137618e42043a3813295f1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_cur_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00420">420</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00382">foedus::thread::ThreadPimpl::control_block_</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>.</p>
<div class="fragment"><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{ <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a>; }</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a174d00be0d6482995665c5731da35d79"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">foedus::thread::ThreadControlBlock::mcs_block_current_</a></div><div class="ttdeci">uint32_t mcs_block_current_</div><div class="ttdoc">How many MCS blocks we allocated in this thread&#39;s current xct. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00084">thread_pimpl.hpp:84</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abfade56f1f287f66e2ceb587bf5bd25d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a> <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_my_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00421">421</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00330">foedus::thread::ThreadPimpl::id_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00471">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_async_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{ <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">id_</a>; }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_ac881d08d38d5332ddababbef597e67a9"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#ac881d08d38d5332ddababbef597e67a9">foedus::thread::ThreadPimpl::id_</a></div><div class="ttdeci">const ThreadId id_</div><div class="ttdoc">Unique ID of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00330">thread_pimpl.hpp:330</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_abfade56f1f287f66e2ceb587bf5bd25d_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_abfade56f1f287f66e2ceb587bf5bd25d_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_abfade56f1f287f66e2ceb587bf5bd25d_icgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_abfade56f1f287f66e2ceb587bf5bd25d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a99408b01841c4cd34977a90b71e04dfa" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other\l_async_block" alt="" coords="237,5,421,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acc9ca36fcd15160de95cf14558801efa"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">ThreadGroupId</a> <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_my_numa_node </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00422">422</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00333">foedus::thread::ThreadPimpl::numa_node_</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{ <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">numa_node_</a>; }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a0dc235d99dfaac00446b613f409de2ab"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a0dc235d99dfaac00446b613f409de2ab">foedus::thread::ThreadPimpl::numa_node_</a></div><div class="ttdeci">const ThreadGroupId numa_node_</div><div class="ttdoc">Node this thread belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00333">thread_pimpl.hpp:333</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e123fc4b38a06c77a0f8f12234eb5e0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_other_cur_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00445">445</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00767">foedus::thread::ThreadPimpl::get_thread_ref()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                                    {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    ThreadRef other = pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">get_thread_ref</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">return</span> other.<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>()-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a174d00be0d6482995665c5731da35d79"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">foedus::thread::ThreadControlBlock::mcs_block_current_</a></div><div class="ttdeci">uint32_t mcs_block_current_</div><div class="ttdoc">How many MCS blocks we allocated in this thread&#39;s current xct. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00084">thread_pimpl.hpp:84</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_af52661009b044c7a6553234720d71923"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">foedus::thread::ThreadPimpl::get_thread_ref</a></div><div class="ttdeci">ThreadRef get_thread_ref(ThreadId id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00767">thread_pimpl.cpp:767</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e123fc4b38a06c77a0f8f12234eb5e0_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e123fc4b38a06c77a0f8f12234eb5e0_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e123fc4b38a06c77a0f8f12234eb5e0_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e123fc4b38a06c77a0f8f12234eb5e0_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="277,5,448,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="271,71,455,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="503,5,680,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="524,71,659,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="503,136,680,177"/>
<area shape="rect" id="node7" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="728,103,907,144"/>
<area shape="rect" id="node8" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="728,168,907,209"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9ab464a4636b91fb8957f03f73b3f8d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">RW_BLOCK* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_rw_my_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00431">431</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00314">foedus::thread::ThreadPimpl::get_mcs_rw_my_blocks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                                    {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &gt; 0);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; 0xFFFFU);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt;= pimpl_-&gt;control_block_-&gt;mcs_block_current_);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    RW_BLOCK* ret;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa6ea11736c6b062482876159d39caec8">get_mcs_rw_my_blocks</a>(&amp;ret);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    ret += index;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_aa6ea11736c6b062482876159d39caec8"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa6ea11736c6b062482876159d39caec8">foedus::thread::ThreadPimpl::get_mcs_rw_my_blocks</a></div><div class="ttdeci">void get_mcs_rw_my_blocks(xct::McsRwSimpleBlock **out)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00314">thread_pimpl.hpp:314</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac9ab464a4636b91fb8957f03f73b3f8d_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac9ab464a4636b91fb8957f03f73b3f8d_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac9ab464a4636b91fb8957f03f73b3f8d_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac9ab464a4636b91fb8957f03f73b3f8d_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aa6ea11736c6b062482876159d39caec8" title="foedus::thread::ThreadPimpl\l::get_mcs_rw_my_blocks" alt="" coords="255,5,439,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a99408b01841c4cd34977a90b71e04dfa"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsRwExtendedBlock.html">xct::McsRwExtendedBlock</a>* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_rw_other_async_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsRwLock.html">xct::McsRwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00471">471</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__ref_8cpp_source.html#l00149">foedus::thread::ThreadRef::get_mcs_rw_async_mapping()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00421">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_my_id()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00454">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_block()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00767">foedus::thread::ThreadPimpl::get_thread_ref()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00046">foedus::assorted::memory_fence_acquire()</a>, and <a class="el" href="xct__id_8hpp_source.html#l01231">foedus::xct::rw_lock_to_universal_lock_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                                                                                   {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keywordtype">id</span> != <a class="code" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#abfade56f1f287f66e2ceb587bf5bd25d">get_my_id</a>());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    ThreadRef other = pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">get_thread_ref</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <a class="code" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">assorted::memory_fence_acquire</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">auto</span> lock_id = <a class="code" href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383">xct::rw_lock_to_universal_lock_id</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>, lock);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keyword">auto</span>* mapping = other.get_mcs_rw_async_mapping(lock_id);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mapping);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mapping-&gt;lock_id_ == lock_id);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c">get_rw_other_block</a>(<span class="keywordtype">id</span>, mapping-&gt;block_index_);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_html_abfade56f1f287f66e2ceb587bf5bd25d"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#abfade56f1f287f66e2ceb587bf5bd25d">foedus::thread::ThreadPimplMcsAdaptor::get_my_id</a></div><div class="ttdeci">ThreadId get_my_id() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00421">thread_pimpl.hpp:421</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_html_a3fec4f48fa468bf3c18986943938a47c"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c">foedus::thread::ThreadPimplMcsAdaptor::get_rw_other_block</a></div><div class="ttdeci">RW_BLOCK * get_rw_other_block(ThreadId id, xct::McsBlockIndex index)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00454">thread_pimpl.hpp:454</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ab6884f9a5b07248973aaa54b88e86383"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383">foedus::xct::rw_lock_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId rw_lock_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, McsRwLock *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01231">xct_id.hpp:1231</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaf84f9944a16c5848f69beacdfeedf939"><div class="ttname"><a href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">foedus::assorted::memory_fence_acquire</a></div><div class="ttdeci">void memory_fence_acquire()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acquire). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00046">atomic_fences.hpp:46</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_af52661009b044c7a6553234720d71923"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">foedus::thread::ThreadPimpl::get_thread_ref</a></div><div class="ttdeci">ThreadRef get_thread_ref(ThreadId id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00767">thread_pimpl.cpp:767</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a99408b01841c4cd34977a90b71e04dfa_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a99408b01841c4cd34977a90b71e04dfa_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a99408b01841c4cd34977a90b71e04dfa_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a99408b01841c4cd34977a90b71e04dfa_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#ab5556f95e1e3a5e11eb38dddaf3d0672" title="foedus::thread::ThreadRef\l::get_mcs_rw_async_mapping" alt="" coords="244,5,443,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#abfade56f1f287f66e2ceb587bf5bd25d" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_my_id" alt="" coords="251,71,435,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a3fec4f48fa468bf3c18986943938a47c" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other_block" alt="" coords="237,188,449,229"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="497,123,681,164"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="257,253,430,295"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383" title="foedus::xct::rw_lock\l_to_universal_lock_id" alt="" coords="271,319,416,360"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadRef.html#aef24583ba3b89316f31f6f07cef3d5c8" title="foedus::thread::ThreadRef\l::get_mcs_rw_blocks" alt="" coords="504,188,675,229"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="504,253,675,295"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="737,57,915,99"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="759,123,893,164"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="737,188,915,229"/>
<area shape="rect" id="node9" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="971,155,1149,196"/>
<area shape="rect" id="node10" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="971,220,1149,261"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="508,319,671,360"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="729,285,923,327"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="745,351,907,392"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3fec4f48fa468bf3c18986943938a47c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">RW_BLOCK* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_rw_other_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00454">454</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="thread__ref_8hpp_source.html#l00068">foedus::thread::ThreadRef::get_mcs_rw_blocks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00767">foedus::thread::ThreadPimpl::get_thread_ref()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8hpp_source.html#l00464">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::dereference_rw_tail_block()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00471">foedus::thread::ThreadPimplMcsAdaptor&lt; RW_BLOCK &gt;::get_rw_other_async_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                                                    {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &gt; 0);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; 0xFFFFU);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    ThreadRef other = pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">get_thread_ref</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    RW_BLOCK* ret;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    other.<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#aef24583ba3b89316f31f6f07cef3d5c8">get_mcs_rw_blocks</a>(&amp;ret);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt;= other.get_control_block()-&gt;mcs_block_current_);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    ret += index;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_aef24583ba3b89316f31f6f07cef3d5c8"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#aef24583ba3b89316f31f6f07cef3d5c8">foedus::thread::ThreadRef::get_mcs_rw_blocks</a></div><div class="ttdeci">void get_mcs_rw_blocks(xct::McsRwSimpleBlock **out) const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00068">thread_ref.hpp:68</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_af52661009b044c7a6553234720d71923"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">foedus::thread::ThreadPimpl::get_thread_ref</a></div><div class="ttdeci">ThreadRef get_thread_ref(ThreadId id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00767">thread_pimpl.cpp:767</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="272,5,443,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadRef.html#aef24583ba3b89316f31f6f07cef3d5c8" title="foedus::thread::ThreadRef\l::get_mcs_rw_blocks" alt="" coords="272,71,443,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="265,136,449,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="497,71,675,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="519,136,653,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="497,201,675,243"/>
<area shape="rect" id="node8" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="723,168,901,209"/>
<area shape="rect" id="node9" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="723,233,901,275"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_icgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_icgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_icgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3fec4f48fa468bf3c18986943938a47c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#ab70a7b7dfedbfd2444de64f9a946b262" title="foedus::thread::ThreadPimpl\lMcsAdaptor::dereference\l_rw_tail_block" alt="" coords="265,5,449,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html#a99408b01841c4cd34977a90b71e04dfa" title="foedus::thread::ThreadPimpl\lMcsAdaptor::get_rw_other\l_async_block" alt="" coords="265,85,449,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1c69f88c0c057b40b7eaa32182632e21"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsWwBlock.html">xct::McsWwBlock</a>* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_ww_my_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00425">425</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00387">foedus::thread::ThreadPimpl::mcs_ww_blocks_</a>.</p>
<div class="fragment"><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                                         {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &gt; 0);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; 0xFFFFU);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt;= pimpl_-&gt;control_block_-&gt;mcs_block_current_);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span> pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">mcs_ww_blocks_</a> + index;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a7964fa7de54357a65cab8f05c1de4696"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a7964fa7de54357a65cab8f05c1de4696">foedus::thread::ThreadPimpl::mcs_ww_blocks_</a></div><div class="ttdeci">xct::McsWwBlock * mcs_ww_blocks_</div><div class="ttdoc">Pre-allocated MCS blocks. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00387">thread_pimpl.hpp:387</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6b6b5272a4f797f30df41bd32ad13ad6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1McsWwBlock.html">xct::McsWwBlock</a>* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::get_ww_other_block </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00449">449</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="thread__ref_8hpp_source.html#l00064">foedus::thread::ThreadRef::get_mcs_ww_blocks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00767">foedus::thread::ThreadPimpl::get_thread_ref()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                                                         {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    ThreadRef other = pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">get_thread_ref</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt;= other.get_control_block()-&gt;mcs_block_current_);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> other.get_mcs_ww_blocks() + index;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_af52661009b044c7a6553234720d71923"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">foedus::thread::ThreadPimpl::get_thread_ref</a></div><div class="ttdeci">ThreadRef get_thread_ref(ThreadId id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00767">thread_pimpl.cpp:767</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a6b6b5272a4f797f30df41bd32ad13ad6_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a6b6b5272a4f797f30df41bd32ad13ad6_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a6b6b5272a4f797f30df41bd32ad13ad6_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a6b6b5272a4f797f30df41bd32ad13ad6_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="277,5,448,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadRef.html#a0a74f10663dafe66b51e956328ce24d3" title="foedus::thread::ThreadRef\l::get_mcs_ww_blocks" alt="" coords="277,71,448,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="271,136,455,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="503,71,680,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="524,136,659,177"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="503,201,680,243"/>
<area shape="rect" id="node8" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="728,168,907,209"/>
<area shape="rect" id="node9" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="728,233,907,275"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a60344962a6ac89a8370b7869109d4106"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1xct.html#ac6d197caa170dca6b4cd91c12ccf779e">xct::McsBlockIndex</a> <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::issue_new_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00411">411</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">foedus::thread::ThreadPimpl::control_block_</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00084">foedus::thread::ThreadControlBlock::mcs_block_current_</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                     {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="comment">// if this assertion fires, probably we are retrying something too many times</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a> &lt; 0xFFFFU);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> ++pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">mcs_block_current_</a>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a174d00be0d6482995665c5731da35d79"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a174d00be0d6482995665c5731da35d79">foedus::thread::ThreadControlBlock::mcs_block_current_</a></div><div class="ttdeci">uint32_t mcs_block_current_</div><div class="ttdoc">How many MCS blocks we allocated in this thread&#39;s current xct. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00084">thread_pimpl.hpp:84</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a6f2f5b69b35952d85e1ab2f4188eb9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt;* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::me_waiting </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00423">423</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00382">foedus::thread::ThreadPimpl::control_block_</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00097">foedus::thread::ThreadControlBlock::mcs_waiting_</a>.</p>
<div class="fragment"><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{ <span class="keywordflow">return</span> &amp;pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a937689460c4562cc746bfb5c5f130a61">mcs_waiting_</a>; }</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a937689460c4562cc746bfb5c5f130a61"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a937689460c4562cc746bfb5c5f130a61">foedus::thread::ThreadControlBlock::mcs_waiting_</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mcs_waiting_</div><div class="ttdoc">Whether this thread is waiting for some MCS lock. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00097">thread_pimpl.hpp:97</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e8a52b170df473aaaf3efad96b5f6b3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt;* <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::other_waiting </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">ThreadId</a>&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00441">441</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00767">foedus::thread::ThreadPimpl::get_thread_ref()</a>, and <a class="el" href="thread__pimpl_8hpp_source.html#l00097">foedus::thread::ThreadControlBlock::mcs_waiting_</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                              {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    ThreadRef other = pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">get_thread_ref</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">return</span> &amp;(other.get_control_block()-&gt;mcs_waiting_);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_af52661009b044c7a6553234720d71923"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923">foedus::thread::ThreadPimpl::get_thread_ref</a></div><div class="ttdeci">ThreadRef get_thread_ref(ThreadId id)</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00767">thread_pimpl.cpp:767</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e8a52b170df473aaaf3efad96b5f6b3_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e8a52b170df473aaaf3efad96b5f6b3_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e8a52b170df473aaaf3efad96b5f6b3_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_a3e8a52b170df473aaaf3efad96b5f6b3_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="244,5,415,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af52661009b044c7a6553234720d71923" title="foedus::thread::ThreadPimpl\l::get_thread_ref" alt="" coords="237,71,421,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#a4af4c3d3fd7a9353d892e5270a900f1c" title="Returns the pimpl of this object. " alt="" coords="469,5,647,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1Engine.html#a4243a3e399186727d6bbdda5bc98f8cd" title="See Thread and Thread&#45;Group. " alt="" coords="491,71,625,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a61040189c343e97c3f0ee961df7a9f31" title="For better performance, but for some reason this method causes an issue in MCS lock. " alt="" coords="469,136,647,177"/>
<area shape="rect" id="node7" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa" title="Extracts NUMA node ID from the given globally unique ID of Thread (core). " alt="" coords="695,103,873,144"/>
<area shape="rect" id="node8" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d" title="Extracts local ordinal from the given globally unique ID of Thread (core). " alt="" coords="695,168,873,209"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac1b4a1cda0dfedf0fa18e43e70c5d2b8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RW_BLOCK&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">foedus::thread::ThreadPimplMcsAdaptor</a>&lt; RW_BLOCK &gt;::remove_rw_async_mapping </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsRwLock.html">xct::McsRwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="thread__pimpl_8hpp_source.html#l00492">492</a> of file <a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00875">foedus::xct::McsRwAsyncMapping::block_index_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00382">foedus::thread::ThreadPimpl::control_block_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00354">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a>, <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, <a class="el" href="xct__id_8hpp_source.html#l00874">foedus::xct::McsRwAsyncMapping::lock_id_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00087">foedus::thread::ThreadControlBlock::mcs_rw_async_mapping_current_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00390">foedus::thread::ThreadPimpl::mcs_rw_async_mappings_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01231">foedus::xct::rw_lock_to_universal_lock_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                                   {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">xct::UniversalLockId</a> lock_id =</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <a class="code" href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383">xct::rw_lock_to_universal_lock_id</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">global_volatile_page_resolver_</a>, lock);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">mcs_rw_async_mapping_current_</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">control_block_</a>-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">mcs_rw_async_mapping_current_</a>; ++i) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">if</span> (pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[i].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a9952bb76a5f0a981d67b905ee671a41d">lock_id_</a> == lock_id) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[i].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a93d52c59f83a46ad670c19d98e38c97f">block_index_</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[i].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a9952bb76a5f0a981d67b905ee671a41d">lock_id_</a> = <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">xct::kNullUniversalLockId</a>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        pimpl_-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">mcs_rw_async_mappings_</a>[i].<a class="code" href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a93d52c59f83a46ad670c19d98e38c97f">block_index_</a>= 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a44232f657701896a24ec4a238d0ab226"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a44232f657701896a24ec4a238d0ab226">foedus::thread::ThreadPimpl::global_volatile_page_resolver_</a></div><div class="ttdeci">memory::GlobalVolatilePageResolver global_volatile_page_resolver_</div><div class="ttdoc">Page resolver to convert all page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00354">thread_pimpl.hpp:354</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ab6884f9a5b07248973aaa54b88e86383"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383">foedus::xct::rw_lock_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId rw_lock_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, McsRwLock *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01231">xct_id.hpp:1231</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a39fd5c3a2e0e0175a52ae24c3339e0c8"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a39fd5c3a2e0e0175a52ae24c3339e0c8">foedus::thread::ThreadControlBlock::mcs_rw_async_mapping_current_</a></div><div class="ttdeci">uint32_t mcs_rw_async_mapping_current_</div><div class="ttdoc">How many async mappings for extended RW lock we have so far. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00087">thread_pimpl.hpp:87</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsRwAsyncMapping_html_a93d52c59f83a46ad670c19d98e38c97f"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a93d52c59f83a46ad670c19d98e38c97f">foedus::xct::McsRwAsyncMapping::block_index_</a></div><div class="ttdeci">McsBlockIndex block_index_</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00875">xct_id.hpp:875</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a052ae65bb017f9f77741db58bcbcf936"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a052ae65bb017f9f77741db58bcbcf936">foedus::thread::ThreadPimpl::mcs_rw_async_mappings_</a></div><div class="ttdeci">xct::McsRwAsyncMapping * mcs_rw_async_mappings_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00390">thread_pimpl.hpp:390</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsRwAsyncMapping_html_a9952bb76a5f0a981d67b905ee671a41d"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsRwAsyncMapping.html#a9952bb76a5f0a981d67b905ee671a41d">foedus::xct::McsRwAsyncMapping::lock_id_</a></div><div class="ttdeci">UniversalLockId lock_id_</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00874">xct_id.hpp:874</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadPimpl_html_a1dafa88a0e8db9faa2deffb4d893b69f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadPimpl.html#a1dafa88a0e8db9faa2deffb4d893b69f">foedus::thread::ThreadPimpl::control_block_</a></div><div class="ttdeci">ThreadControlBlock * control_block_</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00382">thread_pimpl.hpp:382</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac1b4a1cda0dfedf0fa18e43e70c5d2b8_cgraph.png" border="0" usemap="#classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac1b4a1cda0dfedf0fa18e43e70c5d2b8_cgraph" alt=""/></div>
<map name="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac1b4a1cda0dfedf0fa18e43e70c5d2b8_cgraph" id="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor_ac1b4a1cda0dfedf0fa18e43e70c5d2b8_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#ab6884f9a5b07248973aaa54b88e86383" title="foedus::xct::rw_lock\l_to_universal_lock_id" alt="" coords="256,39,401,80"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="449,39,612,80"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="660,5,853,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="676,71,837,112"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/thread/<a class="el" href="thread_2fwd_8hpp_source.html">fwd.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/include/foedus/thread/<a class="el" href="thread__pimpl_8hpp_source.html">thread_pimpl.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1thread.html">thread</a></li><li class="navelem"><a class="el" href="classfoedus_1_1thread_1_1ThreadPimplMcsAdaptor.html">ThreadPimplMcsAdaptor</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
