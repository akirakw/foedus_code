<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: Physical-only, short-living system transactions.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__SYSXCT.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Physical-only, short-living system transactions.<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__XCT.html">Transaction Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A system transaction is a special transaction that changes nothing logically. It changes only physical structures. For example, it splits a page or expand a physical record without changing their logical data to help normal, user transactions (<a class="el" href="classfoedus_1_1xct_1_1Xct.html" title="Represents a user transaction. ">Xct</a>).</p>
<p>There are several prior work in databases to use system tranasctions. System transactions in FOEDUS differ a bit from others in the following sense: </p><ul>
<li>No transaction logging at all. FOEDUS's logical-logging protocol needs no transaction logs for physical-only operations. Sysxct has no interaction with log entries. </li>
<li>Sysxct might take <em>both</em> page and record locks. In prior work, system transactions take no record locks. </li>
<li>Instead, normal transactions in FOEDUS never take page locks. It's always a system transaction to lock a page. Either normal or system, reads don't take page locks. </li>
<li>Sysxct might abort. Because of the page and record locks, there is a chance of forming wait-for cycles. If this happens or might happen, Sysxct aborts. Thanks to the no-logging property, aborts cause no aftermath, though.</li>
</ul>
<p>System transactions are not exposed to users, so the whole file is _impl. </p>
<div class="dynheader">
Collaboration diagram for Physical-only, short-living system transactions.:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__SYSXCT.png" border="0" alt="" usemap="#group____SYSXCT"/>
<map name="group____SYSXCT" id="group____SYSXCT">
<area shape="rect" id="node1" href="group__XCT.html" title="Transaction Manager, which provides APIs to begin/commit/abort transactions. " alt="" coords="5,13,148,39"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1xct_1_1SysxctFunctor.html">foedus::xct::SysxctFunctor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A functor representing the logic in a system transaction via virtual-function.  <a href="structfoedus_1_1xct_1_1SysxctFunctor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry_1_1LessThan.html">foedus::xct::SysxctLockEntry::LessThan</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">for std::binary_search() etc without creating the object  <a href="structfoedus_1_1xct_1_1SysxctLockEntry_1_1LessThan.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1xct_1_1SysxctLockEntry.html">foedus::xct::SysxctLockEntry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An entry in CLL/RLL for system transactions.  <a href="structfoedus_1_1xct_1_1SysxctLockEntry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">foedus::xct::SysxctWorkspace</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Per-thread reused work memory for system transactions.  <a href="structfoedus_1_1xct_1_1SysxctWorkspace.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf49955c6d4efe3d92e6e09b4ff890618"><td class="memTemplParams" colspan="2">template&lt;typename MCS_ADAPTOR , typename ENCLOSURE_RELEASE_ALL_LOCKS_FUNCTOR &gt; </td></tr>
<tr class="memitem:gaf49955c6d4efe3d92e6e09b4ff890618"><td class="memTemplItemLeft" align="right" valign="top">ErrorCode&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618">foedus::xct::run_nested_sysxct_impl</a> (SysxctFunctor *functor, MCS_ADAPTOR mcs_adaptor, uint32_t max_retries, SysxctWorkspace *workspace, UniversalLockId enclosing_max_lock_id, ENCLOSURE_RELEASE_ALL_LOCKS_FUNCTOR enclosure_release_all_locks_functor)</td></tr>
<tr class="memdesc:gaf49955c6d4efe3d92e6e09b4ff890618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs a system transaction nested in a user transaction.  <a href="group__SYSXCT.html#gaf49955c6d4efe3d92e6e09b4ff890618">More...</a><br /></td></tr>
<tr class="separator:gaf49955c6d4efe3d92e6e09b4ff890618"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaf49955c6d4efe3d92e6e09b4ff890618"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MCS_ADAPTOR , typename ENCLOSURE_RELEASE_ALL_LOCKS_FUNCTOR &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ErrorCode foedus::xct::run_nested_sysxct_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctFunctor.html">SysxctFunctor</a> *&#160;</td>
          <td class="paramname"><em>functor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MCS_ADAPTOR&#160;</td>
          <td class="paramname"><em>mcs_adaptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_retries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">SysxctWorkspace</a> *&#160;</td>
          <td class="paramname"><em>workspace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>enclosing_max_lock_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ENCLOSURE_RELEASE_ALL_LOCKS_FUNCTOR&#160;</td>
          <td class="paramname"><em>enclosure_release_all_locks_functor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs a system transaction nested in a user transaction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>the enclosing user transaction's thread. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">functor</td><td>the functor content of the system transaction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mcs_adaptor</td><td>abstracts MCS interface. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_retries</td><td>How many times at most to retry the same system transaction if it aborts. 0 means no retries (default behavior). It retries when the return value of the functor was RaceAbort or LockAbort. Other return values are immediately propagated. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">workspace</td><td>Resource for system transaction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enclosing_max_lock_id</td><td>largest lock-id held by outer transaction. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">enclosure_release_all_locks_functor</td><td>when the system transaction gets a race abort, it might call this back to release all locks in the outer transaction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Propagates the return value of the functor.</dd></dl>
<p>System transactions are much more casual transactions than user transactions. They are begun/committed for a small function or a few. In order to make sure we release related resources in <a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html" title="Per-thread reused work memory for system transactions. ">SysxctWorkspace</a>, we should always use this function.</p>
<p>This function is for the majority of system transaction usecases where a normal user transaction needs to physically change some page/record and invokes a system transaction. </p>

<p>Definition at line <a class="el" href="sysxct__impl_8hpp_source.html#l00496">496</a> of file <a class="el" href="sysxct__impl_8hpp_source.html">sysxct_impl.hpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00206">foedus::kErrorCodeXctLockAbort</a>, <a class="el" href="error__code_8hpp_source.html#l00200">foedus::kErrorCodeXctRaceAbort</a>, <a class="el" href="error__code_8hpp_source.html#l00209">foedus::kErrorCodeXctTwoSysXcts</a>, <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00460">foedus::xct::SysxctWorkspace::lock_list_</a>, <a class="el" href="structfoedus_1_1xct_1_1SysxctFunctor.html#a383a9cfd5d8fa5caf45c7ffb6dc05535">foedus::xct::SysxctFunctor::run()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00452">foedus::xct::SysxctWorkspace::running_sysxct_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00980">foedus::thread::ThreadPimpl::run_nested_sysxct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                                                           {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(workspace-&gt;running_sysxct_)) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// so far each thread can convey only one system transaction.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// this is 1) to reuse SysxctWorkspace, and 2) to avoid deadlocks.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ad0558b2302cbccafc098d32a88e6ff5d">kErrorCodeXctTwoSysXcts</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  workspace-&gt;running_sysxct_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  uint32_t cur_retries = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keyword">auto</span>* lock_list = &amp;(workspace-&gt;lock_list_);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  lock_list-&gt;clear_entries(enclosing_max_lock_id);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> ret = functor-&gt;run(workspace);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="comment">// In any case, release all locks.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    lock_list-&gt;release_all_locks(mcs_adaptor);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="comment">// The first run of the system transaction takes locks only in &quot;try&quot; mode</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="comment">// to avoid deadlocks. They thus have higher chance to get aborted.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(ret == <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aa5f11dac739aec74f9a79d67faa13596">kErrorCodeXctRaceAbort</a> || ret == <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">kErrorCodeXctLockAbort</a>)) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="comment">// consider retry</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">if</span> (cur_retries &lt; max_retries) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// When we retry, we release all locks in _outer_ transaction to eliminate the</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="comment">// chance of deadlocks. Then the next run of the system transaction can</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="comment">// take locks unconditionally, waiting for an arbitrary period.</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">if</span> (enclosing_max_lock_id != <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>) {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;          enclosure_release_all_locks_functor();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;          lock_list-&gt;compress_entries(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;          enclosing_max_lock_id = <a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          <span class="comment">// Now the next run, helped by inherited entries, should be in unconditional mode</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        }</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        ++cur_retries;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    workspace-&gt;running_sysxct_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">foedus::kErrorCodeXctLockAbort</a></div><div class="ttdoc">0x0AA1 : "XCTION : Lock acquire failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00206">error_code.hpp:206</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56aa5f11dac739aec74f9a79d67faa13596"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aa5f11dac739aec74f9a79d67faa13596">foedus::kErrorCodeXctRaceAbort</a></div><div class="ttdoc">0x0A05 : "XCTION : Aborted a transaction because of a race condition. This is an expected error in hi...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00200">error_code.hpp:200</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ad0558b2302cbccafc098d32a88e6ff5d"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ad0558b2302cbccafc098d32a88e6ff5d">foedus::kErrorCodeXctTwoSysXcts</a></div><div class="ttdoc">0x0AA4 : "XCTION : The thread is already running a system transaction. This means an incorrect use of...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00209">error_code.hpp:209</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_cgraph.png" border="0" usemap="#group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_cgraph" alt=""/></div>
<map name="group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_cgraph" id="group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1xct_1_1SysxctFunctor.html#a383a9cfd5d8fa5caf45c7ffb6dc05535" title="Execute the system transaction. " alt="" coords="212,13,417,39"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_icgraph.png" border="0" usemap="#group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_icgraph" alt=""/></div>
<map name="group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_icgraph" id="group__SYSXCT_gaf49955c6d4efe3d92e6e09b4ff890618_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="212,805,396,846"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="444,805,595,846"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1401,5,1580,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1399,405,1582,461"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="643,316,824,372"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1129,447,1303,503"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="647,797,820,853"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="879,1249,1053,1305"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="874,1329,1058,1385"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="647,1184,820,1240"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="647,1104,820,1160"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1671,5,1817,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1669,405,1819,461"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="875,316,1057,372"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1125,316,1307,372"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1125,236,1307,292"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1409,85,1573,141"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1409,165,1573,221"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1400,245,1581,301"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1393,325,1589,381"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1404,503,1577,559"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a70b1c5e023fa0aac150e7b607e37727c" title="Deliberately causes splits under the volatile root of first layer, or &quot;fatify&quot; it. " alt="" coords="1657,503,1831,559"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="879,651,1053,693"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="879,557,1053,627"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1129,1377,1303,1433"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="877,1017,1055,1073"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="872,717,1060,773"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="879,797,1053,853"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a3ca58d4acdbc13f9cfd341d95f45caa2" title="foedus::storage::masstree\l::MasstreeCursor::open\l_normalized" alt="" coords="1129,577,1303,633"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1391,1227,1590,1269"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1404,1297,1577,1353"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1404,1524,1577,1580"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1383,955,1598,997"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1375,1073,1606,1114"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1397,1377,1584,1433"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1372,1458,1609,1499"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1129,1217,1303,1273"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1129,1297,1303,1353"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1121,817,1311,873"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1129,897,1303,953"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1123,977,1309,1033"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1121,1057,1311,1113"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1119,1137,1313,1193"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1110,1458,1322,1499"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1108,1523,1324,1565"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1129,1589,1303,1645"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1129,1669,1303,1725"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="1125,657,1307,713"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1129,737,1303,793"/>
</map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
