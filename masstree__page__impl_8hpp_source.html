<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/include/foedus/storage/masstree/masstree_page_impl.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('masstree__page__impl_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">masstree_page_impl.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="masstree__page__impl_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef FOEDUS_STORAGE_MASSTREE_MASSTREE_PAGE_IMPL_HPP_</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define FOEDUS_STORAGE_MASSTREE_MASSTREE_PAGE_IMPL_HPP_</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;iosfwd&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assert__nd_8hpp.html">foedus/assert_nd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="compiler_8hpp.html">foedus/compiler.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="epoch_8hpp.html">foedus/epoch.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="error__code_8hpp.html">foedus/error_code.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fwd_8hpp.html">foedus/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assorted__func_8hpp.html">foedus/assorted/assorted_func.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cacheline_8hpp.html">foedus/assorted/cacheline.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memory_2fwd_8hpp.html">foedus/memory/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page_8hpp.html">foedus/storage/page.hpp</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="record_8hpp.html">foedus/storage/record.hpp</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage__id_8hpp.html">foedus/storage/storage_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage_2masstree_2fwd_8hpp.html">foedus/storage/masstree/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="masstree__id_8hpp.html">foedus/storage/masstree/masstree_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread_2fwd_8hpp.html">foedus/thread/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct_2fwd_8hpp.html">foedus/xct/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__id_8hpp.html">foedus/xct/xct_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">namespace </span>storage {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">namespace </span>masstree {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html">   52</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html">HighFence</a> {</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#a7031da2663e8009ebd7f20acfe9d2932">   53</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#a7031da2663e8009ebd7f20acfe9d2932">HighFence</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <span class="keywordtype">bool</span> supremum) : <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ab0ee01f611370ba5c58efe9941731218">slice_</a>(slice), <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ac6f986bd4ebbf6a5b9433fd109d36f39">supremum_</a>(supremum) {}</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ab0ee01f611370ba5c58efe9941731218">   54</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ab0ee01f611370ba5c58efe9941731218">slice_</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ac6f986bd4ebbf6a5b9433fd109d36f39">   55</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ac6f986bd4ebbf6a5b9433fd109d36f39">supremum_</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;};</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">   66</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a> {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">MasstreePage</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ac970fa7e96f6ea827ce28fdc1ac0d2c3">operator=</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// simple accessors</span></div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">   73</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a>&amp;         <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>() { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>; }</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#af1166bec8146a171da2457ef10bbffed">   74</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a>&amp;   <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#af1166bec8146a171da2457ef10bbffed">header</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>; }</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8f8883172f7ee3c48a1609df044c3964">   75</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8f8883172f7ee3c48a1609df044c3964">get_volatile_page_id</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a39d297bf42db27de5e38943e057e97b9">   79</a></span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a39d297bf42db27de5e38943e057e97b9">get_snapshot_page_id</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a><span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec">   84</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec">is_border</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956">get_page_type</a>() == <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">kMasstreeBorderPageType</a> ||</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956">get_page_type</a>() == <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba23ef27cc0a436fe010a22a7374e8737b">kMasstreeIntermediatePageType</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956">get_page_type</a>() == <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">kMasstreeBorderPageType</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663">   97</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663">is_empty_range</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">low_fence_</a> == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a>; }</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">   98</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">get_low_fence</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">low_fence_</a>; }</div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">   99</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">get_high_fence</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a>; }</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">  100</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">is_high_fence_supremum</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a> == <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">kSupremumSlice</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aabaf06ccbf57e3c511b1c34f07efd780">  103</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aabaf06ccbf57e3c511b1c34f07efd780">is_low_fence_infimum</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">low_fence_</a> == <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">kInfimumSlice</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#afb63e0ba2340f1b7e21bae579e0cf1b4">  106</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#afb63e0ba2340f1b7e21bae579e0cf1b4">is_layer_root</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aabaf06ccbf57e3c511b1c34f07efd780">is_low_fence_infimum</a>() &amp;&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">is_high_fence_supremum</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  }</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a44cc8d18dc9077ae2310667e88ed5b7c">  109</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a44cc8d18dc9077ae2310667e88ed5b7c">get_foster_fence</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foster_fence_</a>; }</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23">  110</a></span>&#160;  <span class="keywordtype">bool</span>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23">is_foster_minor_null</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[0].<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7">is_null</a>(); }</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97">  111</a></span>&#160;  <span class="keywordtype">bool</span>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97">is_foster_major_null</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[1].<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7">is_null</a>(); }</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5">  112</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5">get_foster_minor</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[0]; }</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607">  113</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607">get_foster_major</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[1]; }</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a38e3cb12f6db6351ac0fc89369868fb9">  114</a></span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a38e3cb12f6db6351ac0fc89369868fb9">set_foster_twin</a>(<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> minor, <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> major) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[0] = minor;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[1] = major;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a9c32af21fe03698567d80feab20a353b">  118</a></span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a9c32af21fe03698567d80feab20a353b">install_foster_twin</a>(</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> minor,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> major,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> foster_fence) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a38e3cb12f6db6351ac0fc89369868fb9">set_foster_twin</a>(minor, major);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foster_fence_</a> = foster_fence;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79">  126</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79">within_fences</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> slice &gt;= <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">low_fence_</a> &amp;&amp; (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">is_high_fence_supremum</a>() || slice &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602">  129</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602">within_foster_minor</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79">within_fences</a>(slice));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">has_foster_child</a>());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> slice &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foster_fence_</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a6ea09e3e65a44845fb3ab5be08e84553">  134</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a6ea09e3e65a44845fb3ab5be08e84553">within_foster_major</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79">within_fences</a>(slice));</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">has_foster_child</a>());</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> slice &gt;= <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foster_fence_</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">  139</a></span>&#160;  <span class="keywordtype">bool</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">has_foster_child</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78">is_moved</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">  144</a></span>&#160;  uint8_t             <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#aedb491bd51b577feeb9ff84976548afc">masstree_layer_</a>; }</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab55e48873dcf5700871a035c65bfa588">  146</a></span>&#160;  uint8_t <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab55e48873dcf5700871a035c65bfa588">get_btree_level</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a7bd38dfe4e87951dc615e1df8f6a4557">masstree_in_layer_level_</a>; }</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">  148</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a>           <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a58cd9c4e7b12226634c1c7e5ca392890">key_count_</a>; }</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">  149</a></span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">set_key_count</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> count) ALWAYS_INLINE { <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a407bbd604662534963c7fc8f08acc898">set_key_count</a>(count); }</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a36324bf7f670205988934070f3f162c8">  150</a></span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a36324bf7f670205988934070f3f162c8">increment_key_count</a>() ALWAYS_INLINE { <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f">increment_key_count</a>(); }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203">  158</a></span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203">prefetch_general</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(<span class="keyword">this</span>, 4);  <span class="comment">// max(border&#39;s prefetch, interior&#39;s prefetch)</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf">  162</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a>&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf">get_version</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>; }</div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2d1f3c36f9a67c0489831a05aa48cad6">  163</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a>&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2d1f3c36f9a67c0489831a05aa48cad6">get_version</a>() ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>; }</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9">  164</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9">get_version_address</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>; }</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a4edd339dc36c265a4c78e58235314f57">  165</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1PageVersion.html">PageVersion</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a4edd339dc36c265a4c78e58235314f57">get_version_address</a>() ALWAYS_INLINE { <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>; }</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2084911eccaf9e483ce8875f8cccd98c">  166</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1McsWwLock.html">xct::McsWwLock</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2084911eccaf9e483ce8875f8cccd98c">get_lock_address</a>() ALWAYS_INLINE { <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a30d12825f4f0f5860406f0b6922ac732">lock_</a>; }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">  168</a></span>&#160;  <span class="keywordtype">bool</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2">is_locked</a>(); }</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">  169</a></span>&#160;  <span class="keywordtype">bool</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">is_moved</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78">is_moved</a>(); }</div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a">  170</a></span>&#160;  <span class="keywordtype">bool</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a">is_retired</a>() const ALWAYS_INLINE { <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca">is_retired</a>(); }</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad3171dd821766bcffba70946a4e44856">  171</a></span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad3171dd821766bcffba70946a4e44856">set_moved</a>() ALWAYS_INLINE { <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a100c23d40bf8e14fe08f59599c81cd26">set_moved</a>(); }</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad5263d631cad896c0494597018d72a8f">  172</a></span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad5263d631cad896c0494597018d72a8f">set_retired</a>() ALWAYS_INLINE { <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a018b79a89f8e665d8f0bb22023f3dad7">set_retired</a>(); }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e">release_pages_recursive_common</a>(</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; page_resolver,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a>* batch);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab889473973eae831407d49b9fb40fee2">  180</a></span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab889473973eae831407d49b9fb40fee2">set_foster_major_offset_unsafe</a>(<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset) ALWAYS_INLINE {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[1].<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a73da964f115a4ae55e118f6532859c9a">set_offset_unsafe</a>(offset);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ae5a4e2ea33eef842e4013c91392e6838">  185</a></span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ae5a4e2ea33eef842e4013c91392e6838">set_high_fence_unsafe</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> high_fence) ALWAYS_INLINE {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a> = high_fence;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a135fc7a9cc57bedf582df2d3cf0f7f84">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>&amp; v);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">  194</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a>          <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>;      <span class="comment">// +40 -&gt; 40</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">  197</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">low_fence_</a>;   <span class="comment">// +8 -&gt; 48</span></div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">  199</a></span>&#160;<span class="comment"></span>  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">high_fence_</a>;  <span class="comment">// +8 -&gt; 56</span></div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">  201</a></span>&#160;<span class="comment"></span>  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foster_fence_</a>;  <span class="comment">// +8 -&gt; 64</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">  211</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foster_twin_</a>[2];  <span class="comment">// +16 -&gt; 80</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e">initialize_volatile_common</a>(</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id,</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="group__STORAGE.html#ga14e35f7fbe4bc18276fde8e8ba460f5b">PageType</a>            page_type,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    uint8_t             layer,</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    uint8_t             level,</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            low_fence,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            high_fence);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordtype">void</span>                <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab41ee4ce455995cd703dac3990442081">initialize_snapshot_common</a>(</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id,</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="group__STORAGE.html#ga14e35f7fbe4bc18276fde8e8ba460f5b">PageType</a>            page_type,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    uint8_t             layer,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    uint8_t             level,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            low_fence,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            high_fence);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;};</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#ga2ce564bb661a338ce070653e1ca48efa">  237</a></span>&#160;<span class="keyword">const</span> uint16_t <a class="code" href="group__MASSTREE.html#ga2ce564bb661a338ce070653e1ca48efa">kMaxIntermediateSeparators</a> = 9U;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#gaaa62799e432e5c5b145851eed621d33d">  244</a></span>&#160;<span class="keyword">const</span> uint16_t <a class="code" href="group__MASSTREE.html#gaaa62799e432e5c5b145851eed621d33d">kMaxIntermediateMiniSeparators</a> = 15U;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keyword">const</span> uint32_t <a class="code" href="group__MASSTREE.html#ga6b0f46dbd051897bd6dae9bbd3eb446e">kMaxIntermediatePointers</a></div>
<div class="line"><a name="l00251"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#ga6b0f46dbd051897bd6dae9bbd3eb446e">  251</a></span>&#160;  = (kMaxIntermediateSeparators + 1U) * (kMaxIntermediateMiniSeparators + 1U);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">  262</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a> final : <span class="keyword">public</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a> {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a0cbc8e79016f276a123274a231a0500e">  264</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html">SplitIntermediate</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">  265</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a> {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a60f7685960f2d7c46d31330ab47c8199">MiniPage</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a60f7685960f2d7c46d31330ab47c8199">MiniPage</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#aba125783806b2c580e71cd7b6cff9ce2">operator=</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// +8 -&gt; 8</span></div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">  271</a></span>&#160;    uint8_t         <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#accb959e88f7a96ef7d018739d5ebbba0">  272</a></span>&#160;    uint8_t         <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#accb959e88f7a96ef7d018739d5ebbba0">reserved_</a>[7];</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// +8*15 -&gt; 128</span></div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">  276</a></span>&#160;<span class="comment"></span>    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>        <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[<a class="code" href="group__MASSTREE.html#gaaa62799e432e5c5b145851eed621d33d">kMaxIntermediateMiniSeparators</a>];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// +16*16 -&gt; 384</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">  278</a></span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[kMaxIntermediateMiniSeparators + 1];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5">  281</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5">prefetch</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(<span class="keyword">this</span>, 2);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441">  287</a></span>&#160;    uint8_t <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441">find_pointer</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      uint8_t key_count = <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_count &lt;= kMaxIntermediateMiniSeparators);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keywordflow">if</span> (slice &lt; separators_[i]) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;          <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span> key_count;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  };</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// A page object is never explicitly instantiated. You must reinterpret_cast.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa83c386108c95db96c325ce7061dd618">MasstreeIntermediatePage</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa83c386108c95db96c325ce7061dd618">MasstreeIntermediatePage</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a2e673300211d10b2fe8df02108073ad2">operator=</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa7f9dfce1b1a92ad89e7163459025b64">  305</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa7f9dfce1b1a92ad89e7163459025b64">prefetch</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(<span class="keyword">this</span>, 3);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f">  312</a></span>&#160;  uint8_t <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f">find_minipage</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    uint8_t key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_count &lt;= kMaxIntermediateSeparators);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">if</span> (slice &lt; separators_[i]) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> key_count;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div>
<div class="line"><a name="l00322"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">  322</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp;         <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(uint8_t index) ALWAYS_INLINE { <span class="keywordflow">return</span> mini_pages_[index]; }</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7743b78e92bef0f6930df669ca93727a">  323</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp;   <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7743b78e92bef0f6930df669ca93727a">get_minipage</a>(uint8_t index) <span class="keyword">const</span> ALWAYS_INLINE { <span class="keywordflow">return</span> mini_pages_[index]; }</div>
<div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">  324</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>          <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">get_separator</a>(uint8_t index) <span class="keyword">const</span> ALWAYS_INLINE { <span class="keywordflow">return</span> separators_[index]; }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c">release_pages_recursive_parallel</a>(<a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">void</span>              <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688">release_pages_recursive</a>(</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; page_resolver,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a>* batch);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ab25cb34a8304c744bf309cc02b515e72">initialize_volatile_page</a>(</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id,</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    uint8_t             layer,</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    uint8_t             level,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            low_fence,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            high_fence);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a558cb535a501ee9d8ed391a45c04c705">initialize_snapshot_page</a>(</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    uint8_t             layer,</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    uint8_t             level,</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            low_fence,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            high_fence);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">void</span>      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a2d0f9a395fbf20a9a70a026d611e2af3">append_pointer_snapshot</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence, <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordtype">void</span>      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a46dc7e7ac5fab5c66bf0b519e2cebc70">append_minipage_snapshot</a>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence, <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">bool</span>      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a8960e682ff51f3ca77aeee1e4bfee9d7">is_full_snapshot</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa64c68858f06b2665809772e26e385c1">  367</a></span>&#160;  <span class="keywordtype">void</span>      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa64c68858f06b2665809772e26e385c1">extract_separators_snapshot</a>(</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    uint8_t index,</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    uint8_t index_mini,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_low,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_high)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7b5848c6b2be269bf90d1d5e41e66a33">extract_separators_common</a>(index, index_mini, separator_low, separator_high);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  }</div>
<div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adf33025a5de02efa6fc49d868ca5c43f">  379</a></span>&#160;  <span class="keywordtype">void</span>      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adf33025a5de02efa6fc49d868ca5c43f">extract_separators_volatile</a>(</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    uint8_t index,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    uint8_t index_mini,</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_low,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_high)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7b5848c6b2be269bf90d1d5e41e66a33">extract_separators_common</a>(index, index_mini, separator_low, separator_high);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordtype">void</span>      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7b5848c6b2be269bf90d1d5e41e66a33">extract_separators_common</a>(</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    uint8_t index,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    uint8_t index_mini,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_low,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_high) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7216fe075ea3db89bbba06f5a156ce81">verify_separators</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aeeeaee9ae59e1abddc18c8d78dbfc068">  397</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aeeeaee9ae59e1abddc18c8d78dbfc068">set_separator</a>(uint8_t minipage_index, <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> new_separator) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    separators_[minipage_index] = new_separator;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a17611d6ca15dd8fadd33bd1c6a7101eb">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>&amp; v);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// 80</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            separators_[<a class="code" href="group__MASSTREE.html#ga2ce564bb661a338ce070653e1ca48efa">kMaxIntermediateSeparators</a>];  <span class="comment">// +72 -&gt; 152</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">char</span>                reserved_[104];    <span class="comment">// -&gt; 256</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  MiniPage            mini_pages_[10];  <span class="comment">// +384 * 10 -&gt; 4096</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;};</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">  444</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a> final : <span class="keyword">public</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a> {</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2982228ebc3a26b4a64c54ba77317824">  446</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html">SplitBorder</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno"><a class="line" href="group__MASSTREE.html">  466</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">SlotLengthPart</a> {</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">  472</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>  <a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a>;                <span class="comment">// +2  -&gt; 2</span></div>
<div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">  478</a></span>&#160;<span class="comment"></span>    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>  <a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a>;  <span class="comment">// +2  -&gt; 4</span></div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#ac50431aba2baceab1e50acfc7f4c5b56">  480</a></span>&#160;<span class="comment"></span>    uint16_t    <a class="code" href="group__MASSTREE.html#ac50431aba2baceab1e50acfc7f4c5b56">unused_</a>;    <span class="comment">// +2  -&gt; 6</span></div>
<div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">  487</a></span>&#160;<span class="comment"></span>    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> <a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a>;        <span class="comment">// +2  -&gt; 8</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  };</div>
<div class="line"><a name="l00490"></a><span class="lineno"><a class="line" href="group__MASSTREE.html">  490</a></span>&#160;  <span class="keyword">union </span><a class="code" href="group__MASSTREE.html#unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion">SlotLengthUnion</a> {</div>
<div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">  491</a></span>&#160;    uint64_t        <a class="code" href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">word</a>;</div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">  492</a></span>&#160;    <a class="code" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">SlotLengthPart</a>  <a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  };</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">  500</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a> {</div>
<div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">  504</a></span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>;       <span class="comment">// +16 -&gt; 16</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">  510</a></span>&#160;    <a class="code" href="group__MASSTREE.html#unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion">SlotLengthUnion</a>     <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>;  <span class="comment">// +8  -&gt; 24</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">  527</a></span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a>           <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a>;          <span class="comment">// +2  -&gt; 26</span></div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">  532</a></span>&#160;<span class="comment"></span>    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">original_physical_record_length_</a>;   <span class="comment">// +2 -&gt; 28</span></div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ac733ed12643052a2f6dc0e6fd4c882fa">  537</a></span>&#160;<span class="comment"></span>    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>          <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ac733ed12643052a2f6dc0e6fd4c882fa">original_offset_</a>;           <span class="comment">// +2 -&gt; 30</span></div>
<div class="line"><a name="l00538"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a76dd33fb726e34a5294417e549d5f4fe">  538</a></span>&#160;    <span class="keywordtype">char</span>                <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a76dd33fb726e34a5294417e549d5f4fe">filler_</a>[2];                 <span class="comment">// +2 -&gt; 32</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aee9abb2322317ee30c7cc9a0fee1c671">Slot</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aee9abb2322317ee30c7cc9a0fee1c671">Slot</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>&amp; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aaa54bf8d7216fa8eb4e86e9b6b63fb8f">operator=</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>&amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a224dac36bcf1532205498f2ed07427a2">~Slot</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0">  546</a></span>&#160;    <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0">get_aligned_suffix_length</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length_);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    }</div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a8a6e5607a634aacda2986655f80420ca">  549</a></span>&#160;    <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a8a6e5607a634aacda2986655f80420ca">get_suffix_length</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(remainder_length_);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    }</div>
<div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076">  553</a></span>&#160;    <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076">get_max_payload_peek</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">return</span> lengthes_.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a> - <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0">get_aligned_suffix_length</a>();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
<div class="line"><a name="l00557"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a913ee08e26f12e4b8031ec34967962a0">  557</a></span>&#160;    <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a913ee08e26f12e4b8031ec34967962a0">get_max_payload_stable</a>(<a class="code" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">SlotLengthPart</a> stable_length) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> stable_length.physical_record_length_ - <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0">get_aligned_suffix_length</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div>
<div class="line"><a name="l00560"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a96be3b659b1812ecd7efbf601ea8c929">  560</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a96be3b659b1812ecd7efbf601ea8c929">does_point_to_layer</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> tid_.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">is_next_layer</a>();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ab8cb74332854cf84d1cfee7805eb3415">  568</a></span>&#160;    <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">SlotLengthPart</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ab8cb74332854cf84d1cfee7805eb3415">read_lengthes_oneshot</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <a class="code" href="group__MASSTREE.html#unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion">SlotLengthUnion</a> ret;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      ret.<a class="code" href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">word</a> = lengthes_.<a class="code" href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">word</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">return</span> ret.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a5bf84675a6aae35cdfde862a1ffbe11f">  577</a></span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a5bf84675a6aae35cdfde862a1ffbe11f">write_lengthes_oneshot</a>(<a class="code" href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">SlotLengthPart</a> new_value) ALWAYS_INLINE {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="group__MASSTREE.html#unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion">SlotLengthUnion</a> tmp;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      tmp.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a> = new_value;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      lengthes_.<a class="code" href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">word</a> = tmp.<a class="code" href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">word</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  };</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">  585</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">MatchType</a> {</div>
<div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">  586</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a> = 0,</div>
<div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">  587</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a> = 1,</div>
<div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">  588</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a> = 2,</div>
<div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">  589</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a> = 3,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  };</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">  593</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a> {</div>
<div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a212f66ee089508752d6512114210a649">  594</a></span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a212f66ee089508752d6512114210a649">FindKeyForReserveResult</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">MatchType</a> match_type)</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      : <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#af2a6c43d81102f71c916e0f80fe45e17">index_</a>(index), <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a7adabca0abbf85305a41b21a2de97afd">match_type_</a>(match_type) {}</div>
<div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#af2a6c43d81102f71c916e0f80fe45e17">  596</a></span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#af2a6c43d81102f71c916e0f80fe45e17">index_</a>;</div>
<div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a7adabca0abbf85305a41b21a2de97afd">  597</a></span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">MatchType</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a7adabca0abbf85305a41b21a2de97afd">match_type_</a>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  };</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// A page object is never explicitly instantiated. You must reinterpret_cast.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">MasstreeBorderPage</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abbc02ae73638102469f4d8a0c66fa887">operator=</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>&amp; other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f">initialize_volatile_page</a>(</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id,</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id,</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    uint8_t             layer,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            low_fence,</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            high_fence);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2f1e35c48bba8f7c8319d5739487768d">initialize_snapshot_page</a>(</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>           storage_id,</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id,</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    uint8_t             layer,</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            low_fence,</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>            high_fence);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6318577ff1e6f5106712e9ed60a429fe">  623</a></span>&#160;  <span class="keywordtype">bool</span>        <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6318577ff1e6f5106712e9ed60a429fe">is_consecutive_inserts</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> consecutive_inserts_; }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div>
<div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">  625</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">get_next_offset</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> next_offset_; }</div>
<div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">  626</a></span>&#160;  <span class="keywordtype">void</span>        <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">increase_next_offset</a>(<a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> length) {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    next_offset_ += length;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">  631</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - index - 1;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a812e899fc428c9223291e6233c4a23da">  637</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a812e899fc428c9223291e6233c4a23da">get_slot</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) ALWAYS_INLINE {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - index - 1;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  }</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">  643</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) ALWAYS_INLINE {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>());</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - index - 1;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">  649</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">to_slot_index</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* slot) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot);</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    int64_t index = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - slot - 1;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &gt;= 0);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; static_cast&lt;int64_t&gt;(<span class="keyword">sizeof</span>(data_) / <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>)));</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a><span class="keyword">&gt;</span>(index);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// methods about available/required spaces</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">  660</a></span>&#160;  <span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>   <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    uint16_t consumed = next_offset_ + <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() * <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(consumed &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (consumed &gt; <span class="keyword">sizeof</span>(data_)) {  <span class="comment">// just to be conservative on release build</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(data_) - consumed;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">  674</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">static</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length_aligned = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span> suffix_length_aligned + <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">  687</a></span>&#160;  <span class="keyword">inline</span> <span class="keyword">static</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">required_data_space</a>(</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_length) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder_length, payload_length) + <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b">find_key</a>(</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af">find_key_normalized</a>(</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> from_index,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> to_index,</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  FindKeyForReserveResult <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c">find_key_for_reserve</a>(</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> from_index,</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> to_index,</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  FindKeyForReserveResult <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a">find_key_for_snapshot</a>(</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">  732</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) ALWAYS_INLINE {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">get_offset_in_bytes</a>(index));</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  }</div>
<div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8af97da56967f8357bd330a57cd58476">  736</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8af97da56967f8357bd330a57cd58476">get_record</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">get_offset_in_bytes</a>(index));</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">  740</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">get_record_payload</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) ALWAYS_INLINE {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a>(index);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  }</div>
<div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0cc9a759ee4e0b4c1041d64ae274a6dc">  745</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0cc9a759ee4e0b4c1041d64ae274a6dc">get_record_payload</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a>(index);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">  750</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">get_next_layer</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) ALWAYS_INLINE {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">get_record_payload</a>(index));</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div>
<div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab8cf45530f89c6c269a8574e648ce0e0">  753</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab8cf45530f89c6c269a8574e648ce0e0">get_next_layer</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>*<span class="keyword">&gt;</span>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">get_record_payload</a>(index));</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">  758</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(<a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset) ALWAYS_INLINE {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset % 8 == 0);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset &lt; <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">return</span> data_ + record_offset;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div>
<div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6bcb18d206fa77ccf24ef6097e89f1cc">  763</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6bcb18d206fa77ccf24ef6097e89f1cc">get_record_from_offset</a>(<a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset % 8 == 0);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_offset &lt; <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> data_ + record_offset;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  }</div>
<div class="line"><a name="l00768"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">  768</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a>(</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset,</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(record_offset);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;  }</div>
<div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aba8deac13594e4b208f4905c7d894bf7">  775</a></span>&#160;  <span class="keywordtype">char</span>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aba8deac13594e4b208f4905c7d894bf7">get_record_payload_from_offsets</a>(</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) ALWAYS_INLINE {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(record_offset);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> skipped = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">return</span> record + skipped;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  }</div>
<div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">  782</a></span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">get_next_layer_from_offsets</a>(</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset,</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) ALWAYS_INLINE {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordtype">char</span>* payload = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a>(record_offset, remainder_length);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>*<span class="keyword">&gt;</span>(payload);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="line"><a name="l00788"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad909b4004fb61cf846078c668d301246">  788</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad909b4004fb61cf846078c668d301246">get_next_layer_from_offsets</a>(</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_offset,</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* payload = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">get_record_payload_from_offsets</a>(record_offset, remainder_length);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>*<span class="keyword">&gt;</span>(payload);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">  796</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">is_next_layer</a>();</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">  801</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> slices_[index];</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  }</div>
<div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">  805</a></span>&#160;  <span class="keywordtype">void</span>     <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice) ALWAYS_INLINE {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    slices_[index] = slice;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  }</div>
<div class="line"><a name="l00809"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">  809</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">get_offset_in_bytes</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">  813</a></span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">get_owner_id</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) ALWAYS_INLINE {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  }</div>
<div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aa900861197b7e9b341cd73a6709832ed">  816</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aa900861197b7e9b341cd73a6709832ed">get_owner_id</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div>
<div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">  820</a></span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a>;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  }</div>
<div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8">  823</a></span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8">get_suffix_length</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(remainder_length);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  }</div>
<div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">  827</a></span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">get_suffix_length_aligned</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(remainder_length);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f">  832</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f">get_payload_length</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  }</div>
<div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506">  838</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506">get_max_payload_length</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index)-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076">get_max_payload_peek</a>();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordtype">bool</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> new_index,</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordtype">bool</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56">can_accomodate_snapshot</a>(</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordtype">bool</span>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">compare_key</a>(</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* be_key,</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordtype">bool</span>  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47">equal_key</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <span class="keyword">const</span> <span class="keywordtype">void</span>* be_key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="keywordtype">int</span>   <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">ltgt_key</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <span class="keyword">const</span> <span class="keywordtype">char</span>* be_key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordtype">int</span>   <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">ltgt_key</a>(</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix,</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">will_conflict</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <span class="keyword">const</span> <span class="keywordtype">char</span>* be_key, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">will_conflict</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index, <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice, <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">will_contain_next_layer</a>(</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* be_key,</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">will_contain_next_layer</a>(</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder) <span class="keyword">const</span> <a class="code" href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a>;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  <span class="keywordtype">void</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f">reserve_record_space</a>(</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id,</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordtype">void</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73">reserve_initially_next_layer</a>(</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id,</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>&amp; pointer);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  <span class="keywordtype">void</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05">append_next_layer_snapshot</a>(</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <span class="keywordtype">void</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f">replace_next_layer_snapshot</a>(<a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="keywordtype">void</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23">initialize_layer_root</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>* copy_from, <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> copy_index);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keywordtype">void</span>    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24">release_pages_recursive</a>(</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; page_resolver,</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a>* batch);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae9eebf88265f64634f6fa42b7f89f581">  934</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae9eebf88265f64634f6fa42b7f89f581">prefetch</a>() const ALWAYS_INLINE {</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(<span class="keyword">this</span>, 4);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  }</div>
<div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">  937</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count) <span class="keyword">const</span> ALWAYS_INLINE {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keyword">const</span> uint32_t kInitialPrefetchBytes = 4U * <a class="code" href="group__ASSORTED.html#gad5ea63b0770685f3aad857fbd6e9096e">assorted::kCachelineSize</a>;  <span class="comment">// 256 bytes</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> kInitiallyFetched</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      = (kInitialPrefetchBytes - <a class="code" href="group__MASSTREE.html#ga54533a5e0a23f34c29a57f8701356491">kCommonPageHeaderSize</a> - <a class="code" href="group__MASSTREE.html#ga1dee903a4fd4c4bcaadb95833c4b9a40">kBorderPageAdditionalHeaderSize</a>)</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        / <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (key_count &gt; kInitiallyFetched) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      <span class="comment">// we initially prefetched 64*4 = 256 bytes: header and 22 key slices.</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="comment">// if we have more, prefetch now while we are still searching.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      uint16_t cachelines = ((key_count - kInitiallyFetched) / <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) + 1;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">assorted::prefetch_cachelines</a>(</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        reinterpret_cast&lt;const char*&gt;(<span class="keyword">this</span>) + kInitialPrefetchBytes,</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        cachelines);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5">try_expand_record_in_page_physical</a>(<a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count, <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> record_index);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535">initialize_as_layer_root_physical</a>(</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id,</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>* parent,</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> parent_index);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546">track_moved_record</a>(</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine,</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* old_address,</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1WriteXctAccess.html">xct::WriteXctAccess</a>* write_set);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">xct::TrackMovedRecordResult</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818">track_moved_record_next_layer</a>(</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine,</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html">xct::RwLockableXctId</a>* old_address);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060">verify_slot_lengthes</a>(<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00988"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825">  988</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825">assert_entries</a>() ALWAYS_INLINE {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9">assert_entries_impl</a>();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;  }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9">assert_entries_impl</a>() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a20c23d249173f1a2733f78eb4fc5899f">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>&amp; v);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// 80</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment"></span>  <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a>  next_offset_;                 <span class="comment">// +2 -&gt; 82</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span>        consecutive_inserts_;         <span class="comment">// +1 -&gt; 83</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordtype">char</span>        dummy_[5];                    <span class="comment">// +5 -&gt; 88</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>    slices_[<a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>];</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordtype">char</span>        data_[<a class="code" href="group__MASSTREE.html#ga91326b566ce7355c1ee6fd3848af01cd">kBorderPageDataPartSize</a>];</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>* track_foster_child(</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; resolver);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;};</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div>
<div class="line"><a name="l01047"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html"> 1047</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html">MasstreeIntermediatePointerIterator</a> final {</div>
<div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a2a483a354a301bcd4f66d853f2f981ec"> 1048</a></span>&#160;  <span class="keyword">explicit</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a2a483a354a301bcd4f66d853f2f981ec">MasstreeIntermediatePointerIterator</a>(<span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>* page)</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    : <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>(page), <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>(0), <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a>(0) {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">if</span> (page-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663">is_empty_range</a>()) {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;        <span class="comment">// Empty-range page has zero pointers, which is special.</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!page-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a> = 1;  <span class="comment">// so that initial is_valid returns false.</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    }</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a50f249d95bb8fceda793e40a76b4e386"> 1057</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a50f249d95bb8fceda793e40a76b4e386">next</a>() {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5">is_valid</a>()) {</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    }</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    ++<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a> &gt; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>).<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      ++<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a> = 0;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  }</div>
<div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5"> 1067</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5">is_valid</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a> &lt;= <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>()</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      &amp;&amp; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a> &lt;= <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>).<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  }</div>
<div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aefcac4f0e94dee19b7b26ff392ba4c54"> 1071</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aefcac4f0e94dee19b7b26ff392ba4c54">get_low_key</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5">is_valid</a>());</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MasstreeIntermediatePage::MiniPage</a>&amp; minipage = <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a> &gt; 0) {</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">return</span> minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a> - 1];</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a> &gt; 0) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">get_separator</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a> - 1);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">get_low_fence</a>();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  }</div>
<div class="line"><a name="l01082"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aceace47cb99cf71122b066ba5c7b9e06"> 1082</a></span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aceace47cb99cf71122b066ba5c7b9e06">get_high_key</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5">is_valid</a>());</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MasstreeIntermediatePage::MiniPage</a>&amp; minipage = <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a> &lt; minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>) {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">return</span> minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a>];</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (index_ &lt; page_-&gt;get_key_count()) {</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">get_separator</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a> );</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">get_high_fence</a>();</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  }</div>
<div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a8988fe635186bff06191f3eb87447bc8"> 1093</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>&amp; <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a8988fe635186bff06191f3eb87447bc8">get_pointer</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5">is_valid</a>());</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MasstreeIntermediatePage::MiniPage</a>&amp; minipage = <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>-&gt;<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    <span class="keywordflow">return</span> minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a>];</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  }</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div>
<div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872"> 1099</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>* <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">page_</a>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e"> 1100</a></span>&#160;  uint16_t  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">index_</a>;</div>
<div class="line"><a name="l01101"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c"> 1101</a></span>&#160;  uint16_t  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">index_mini_</a>;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;};</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70"> 1105</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="keywordflow">if</span> (remainder_length == <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>) {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  }</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">if</span> (remainder_length &gt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;    <span class="keywordflow">return</span> remainder_length - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;}</div>
<div class="line"><a name="l01116"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c"> 1116</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">calculate_suffix_length_aligned</a>(<a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length) {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(<a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(remainder_length));</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;}</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;</div>
<div class="line"><a name="l01120"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b"> 1120</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b">MasstreeBorderPage::find_key</a>(</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_count &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(key_count);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// one slice might be used for up to 10 keys, length 0 to 8 and pointer to next layer.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;    <span class="comment">// then we are looking for length 0-8 only.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      }</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="comment">// no suffix nor next layer, so just compare length. if not match, continue</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      }</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    }</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="comment">// then we are only looking for length&gt;8.</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i)) {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;        <span class="comment">// as it points to next layer, no need to check suffix. We are sure this is it.</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;        <span class="comment">// so far we don&#39;t delete layers, so in this case the record is always valid.</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      }</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="comment">// now, our key is &gt; 8 bytes and we found some local record.</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// length 0-8, surely not a match. skip.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      }</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;        <span class="comment">// compare suffix.</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* record_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;        <span class="keywordflow">if</span> (std::memcmp(record_suffix, suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0) {</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;          <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        }</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      }</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <span class="comment">// The record has &gt; 8 bytes key of the same slice. it must be the only such record in this</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="comment">// page because otherwise we must have created a next layer!</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">break</span>;  <span class="comment">// no more check needed</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  }</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div>
<div class="line"><a name="l01179"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af"> 1179</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af">MasstreeBorderPage::find_key_normalized</a>(</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> from_index,</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> to_index,</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(to_index &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(from_index &lt;= to_index);</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordflow">if</span> (from_index == 0) {  <span class="comment">// we don&#39;t need prefetching in second time</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(to_index);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  }</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = from_index; i &lt; to_index; ++i) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(slice == rec_slice &amp;&amp; klen == <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>))) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;      <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  }</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;}</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div>
<div class="line"><a name="l01198"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c"> 1198</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">MasstreeBorderPage::FindKeyForReserveResult</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c">MasstreeBorderPage::find_key_for_reserve</a>(</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> from_index,</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> to_index,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(to_index &lt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(from_index &lt;= to_index);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="keywordflow">if</span> (from_index == 0) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">prefetch_additional_if_needed</a>(to_index);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  }</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = from_index; i &lt; to_index; ++i) {</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    }</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = from_index; i &lt; to_index; ++i) {</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(slice != rec_slice)) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      }</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> next_layer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">if</span> (next_layer) {</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(klen &gt; <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>));</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      }</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="comment">// now, both the searching key and this key are more than 8 bytes.</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="comment">// whether the key really matches or not, this IS the slot we are looking for.</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="comment">// Either 1) the keys really match, or 2) we will make this record point to next layer.</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* record_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <span class="keywordflow">if</span> (klen == remainder &amp;&amp;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        std::memcmp(record_suffix, suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0) {</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="comment">// case 1)</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="comment">// case 2)</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a>);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      }</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  }</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(<a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div>
<div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a"> 1256</a></span>&#160;<span class="keyword">inline</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">MasstreeBorderPage::FindKeyForReserveResult</a> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a">MasstreeBorderPage::find_key_for_snapshot</a>(</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// Remember, unlike other cases above, there are no worry on concurrency.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">if</span> (rec_slice &lt; slice) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rec_slice &gt; slice) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        <span class="comment">// as keys are sorted in snapshot page, &quot;i&quot; is the place the slice would be inserted.</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(rec_slice == slice);</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">if</span> (klen == remainder) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (klen &lt; remainder) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// same as &quot;rec_slice &lt; slice&quot; case</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);  <span class="comment">// same as &quot;rec_slice &gt; slice&quot; case</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    }</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> i = 0; i &lt; key_count; ++i) {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(i);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="keywordflow">if</span> (rec_slice &lt; slice) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rec_slice &gt; slice) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        <span class="comment">// as keys are sorted in snapshot page, &quot;i&quot; is the place the slice would be inserted.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(rec_slice == slice);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(i);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i)) {</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">kExactMatchLayerPointer</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(i));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <span class="keywordflow">if</span> (klen &lt;= <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// same as &quot;rec_slice &lt; slice&quot; case</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;      }</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">// see the comment in MasstreeComposerContext::PathLevel.</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="comment">// Even if the record is larger than the current key, we consider it &quot;matched&quot; and cause</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="comment">// next layer creation, but keeping the larger record in a dummy original page in nexy layer.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span>* record_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(i);</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="keywordflow">if</span> (klen == remainder &amp;&amp;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        std::memcmp(record_suffix, suffix, remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0) {</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">kExactMatchLocalRecord</a>);</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(i, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">kConflictingLocalRecord</a>);</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      }</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    }</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  }</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">FindKeyForReserveResult</a>(key_count, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">kNotFound</a>);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;}</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f"> 1322</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f">MasstreeBorderPage::reserve_record_space</a>(</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id,</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* suffix,</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_ || initial_owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148">is_deleted</a>());</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a> || remainder_length == <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length != <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a> || payload_count == <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>));</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_ || <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() == index);</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(index, remainder_length, payload_count));</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ % 8 == 0);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length = <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">calculate_suffix_length</a>(remainder_length);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder_length, payload_count);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_size % 8 == 0);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_offset = next_offset_;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(index, slice);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="comment">// This is a new slot, so no worry on race.</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(index);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a> = new_offset;</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ac50431aba2baceab1e50acfc7f4c5b56">unused_</a> = 0;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a> = record_size;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a> = payload_count;</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">original_physical_record_length_</a> = record_size;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a> = remainder_length;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ac733ed12643052a2f6dc0e6fd4c882fa">original_offset_</a> = new_offset;</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">if</span> (index == 0) {</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    consecutive_inserts_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (consecutive_inserts_) {</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <span class="comment">// do we have to turn off consecutive_inserts_ now?</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prev_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index - 1);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> prev_klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index - 1);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    <span class="keywordflow">if</span> (prev_slice &gt; slice || (prev_slice == slice &amp;&amp; prev_klen &gt; remainder_length)) {</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      consecutive_inserts_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    }</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  }</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5325f7a947e61e6aa5256f5c3ad98d">lock_</a>.<a class="code" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4">reset</a>();</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a> = initial_owner_id;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (suffix_length &gt; 0) {</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">get_record_from_offset</a>(new_offset);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    std::memcpy(record, suffix, suffix_length);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> suffix_length_aligned = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(suffix_length);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <span class="comment">// zero-padding</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordflow">if</span> (suffix_length_aligned &gt; suffix_length) {</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      std::memset(record + suffix_length, 0, suffix_length_aligned - suffix_length);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  }</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div>
<div class="line"><a name="l01375"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73"> 1375</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73">MasstreeBorderPage::reserve_initially_next_layer</a>(</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id,</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>&amp; pointer) {</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_ || <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">is_locked</a>());</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() == index);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(index, <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>), <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>)));</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_ % 8 == 0);</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(initial_owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">is_next_layer</a>());</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!initial_owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148">is_deleted</a>());</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(remainder, <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>));</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_size % 8 == 0);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_offset = next_offset_;</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(index, slice);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// This is a new slot, so no worry on race.</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(index);</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a> = new_offset;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ac50431aba2baceab1e50acfc7f4c5b56">unused_</a> = 0;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a> = record_size;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a> = <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">original_physical_record_length_</a> = record_size;</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a> = remainder;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ac733ed12643052a2f6dc0e6fd4c882fa">original_offset_</a> = new_offset;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="keywordflow">if</span> (index == 0) {</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    consecutive_inserts_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (consecutive_inserts_) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// This record must be the only full-length slice, so the check is simpler</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> prev_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index - 1);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;    <span class="keywordflow">if</span> (prev_slice &gt; slice) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      consecutive_inserts_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5325f7a947e61e6aa5256f5c3ad98d">lock_</a>.<a class="code" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4">reset</a>();</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a> = initial_owner_id;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  *<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">get_next_layer_from_offsets</a>(new_offset, remainder) = pointer;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;}</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;</div>
<div class="line"><a name="l01417"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05"> 1417</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05">MasstreeBorderPage::append_next_layer_snapshot</a>(</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> initial_owner_id,</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer) {</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_);  <span class="comment">// this is used only from snapshot composer</span></div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> kRemainder = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">can_accomodate</a>(index, kRemainder, <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>)));</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> record_size = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(kRemainder, <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>));</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> offset = next_offset_;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">set_slice</a>(index, slice);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <span class="comment">// This is in snapshot page, so no worry on race.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">get_new_slot</a>(index);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a> = offset;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ac50431aba2baceab1e50acfc7f4c5b56">unused_</a> = 0;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a> = record_size;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a> = <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">original_physical_record_length_</a> = record_size;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a> = kRemainder;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ac733ed12643052a2f6dc0e6fd4c882fa">original_offset_</a> = offset;</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  next_offset_ += record_size;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a> = initial_owner_id;</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#abe3bc94e31351c2fa965df411af532a1">set_next_layer</a>();</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* dual_pointer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">get_next_layer_from_offsets</a>(offset, kRemainder);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  dual_pointer-&gt;<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">clear</a>();</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  dual_pointer-&gt;<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> = pointer;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">set_key_count</a>(index + 1U);</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div>
<div class="line"><a name="l01447"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f"> 1447</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f">MasstreeBorderPage::replace_next_layer_snapshot</a>(<a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer) {</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">header</a>().snapshot_);  <span class="comment">// this is used only from snapshot composer</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() &gt; 0);</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>() - 1U;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index));</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">get_owner_id</a>(index)-&gt;xct_id_.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736">is_next_layer</a>());</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// Overwriting an existing slot with kInitiallyNextLayer is not generally safe,</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="comment">// but this is in snapshot page, so no worry on race.</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> kRemainder = <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> new_record_size = <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_record_size == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">to_record_length</a>(kRemainder, <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>)));</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// This is in snapshot page, so no worry on race.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>* slot = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">get_slot</a>(index);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <span class="comment">// This is the last record in this page, right?</span></div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next_offset_</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;    == slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a> + slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a>);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// Here, we assume the snapshot border page always leaves sizeof(DualPagePointer) whenever</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// it creates a record. Otherwise we might not have enough space!</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// For this reason, we use can_accomodate_snapshot() rather than can_accomodate().</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a> + new_record_size + <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">Slot</a>) * <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>()</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">physical_record_length_</a> = new_record_size;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">payload_length_</a> = <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">original_physical_record_length_</a> = new_record_size;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">remainder_length_</a> = kRemainder;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  next_offset_ = slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">lengthes_</a>.<a class="code" href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">components</a>.<a class="code" href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">offset_</a> + new_record_size;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  slot-&gt;<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">tid_</a>.<a class="code" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">xct_id_</a>.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#abe3bc94e31351c2fa965df411af532a1">set_next_layer</a>();</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* dual_pointer = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">get_next_layer</a>(index);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  dual_pointer-&gt;<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">clear</a>();</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  dual_pointer-&gt;<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> = pointer;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index));</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;}</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div>
<div class="line"><a name="l01487"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a8960e682ff51f3ca77aeee1e4bfee9d7"> 1487</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a8960e682ff51f3ca77aeee1e4bfee9d7">MasstreeIntermediatePage::is_full_snapshot</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  uint16_t keys = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(keys &lt;= kMaxIntermediateSeparators);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp; minipage = mini_pages_[keys];</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  uint16_t keys_mini = minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>;</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(keys_mini &lt;= kMaxIntermediateMiniSeparators);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordflow">return</span> keys == kMaxIntermediateSeparators &amp;&amp; keys_mini == <a class="code" href="group__MASSTREE.html#gaaa62799e432e5c5b145851eed621d33d">kMaxIntermediateMiniSeparators</a>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;}</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;</div>
<div class="line"><a name="l01496"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a2d0f9a395fbf20a9a70a026d611e2af3"> 1496</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a2d0f9a395fbf20a9a70a026d611e2af3">MasstreeIntermediatePage::append_pointer_snapshot</a>(</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence,</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer) {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a8960e682ff51f3ca77aeee1e4bfee9d7">is_full_snapshot</a>());</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  uint16_t index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp; mini = mini_pages_[index];</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  uint16_t index_mini = mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(low_fence &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">get_low_fence</a>());</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">is_high_fence_supremum</a>() || low_fence &lt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">get_high_fence</a>());</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer == 0 || <a class="code" href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c">extract_snapshot_id_from_snapshot_pointer</a>(pointer) != 0);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;  <span class="keywordflow">if</span> (index_mini &lt; kMaxIntermediateMiniSeparators) {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="comment">// p0 s0 p1  + &quot;s p&quot; -&gt; p0 s0 p1 s1 p2</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer == 0  <span class="comment">// composer init_root uses this method to set null pointers..</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      || mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[index_mini].<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> != pointer);  <span class="comment">// otherwise dup.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index_mini == 0 || low_fence &gt; mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[index_mini - 1]);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index == 0 || low_fence &gt; separators_[index - 1]);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[index_mini] = low_fence;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[index_mini + 1].<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">clear</a>();</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[index_mini + 1].<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> = pointer;</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    ++mini.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a46dc7e7ac5fab5c66bf0b519e2cebc70">append_minipage_snapshot</a>(low_fence, pointer);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;}</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div>
<div class="line"><a name="l01522"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a46dc7e7ac5fab5c66bf0b519e2cebc70"> 1522</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a46dc7e7ac5fab5c66bf0b519e2cebc70">MasstreeIntermediatePage::append_minipage_snapshot</a>(</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> low_fence,</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> pointer) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a8960e682ff51f3ca77aeee1e4bfee9d7">is_full_snapshot</a>());</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  uint16_t key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_count &lt; kMaxIntermediateSeparators);</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mini_pages_[key_count].key_count_ == kMaxIntermediateMiniSeparators);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(low_fence &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(key_count).separators_[kMaxIntermediateMiniSeparators - 1]);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  separators_[key_count] = low_fence;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MiniPage</a>&amp; new_minipage = mini_pages_[key_count + 1];</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  new_minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a> = 0;</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;  new_minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[0].<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">clear</a>();</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;  new_minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">pointers_</a>[0].<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">snapshot_pointer_</a> = pointer;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">set_key_count</a>(key_count + 1);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;}</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div>
<div class="line"><a name="l01539"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7b5848c6b2be269bf90d1d5e41e66a33"> 1539</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7b5848c6b2be269bf90d1d5e41e66a33">MasstreeIntermediatePage::extract_separators_common</a>(</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  uint8_t index,</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  uint8_t index_mini,</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_low,</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>* separator_high)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec">is_border</a>());</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  uint8_t key_count = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt;= key_count);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">MasstreeIntermediatePage::MiniPage</a>&amp; minipage = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">get_minipage</a>(index);</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index_mini &lt;= minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="keywordflow">if</span> (index_mini == 0) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;    <span class="keywordflow">if</span> (index == 0) {</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      *separator_low = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">get_low_fence</a>();</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      *separator_low = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">get_separator</a>(index - 1U);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;    *separator_low = minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[index_mini - 1U];</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  }</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="keywordflow">if</span> (index_mini == minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">key_count_</a>) {</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span> (index == key_count) {</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      *separator_high = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">get_high_fence</a>();</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      *separator_high = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">get_separator</a>(index);</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    *separator_high = minipage.<a class="code" href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">separators_</a>[index_mini];</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;}</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div>
<div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed"> 1570</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">MasstreeBorderPage::can_accomodate</a>(</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> new_index,</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keywordflow">if</span> (new_index == 0) {</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder_length &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a> || remainder_length == <a class="code" href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">kInitiallyNextLayer</a>);</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_count &lt;= <a class="code" href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">kMaxPayloadLength</a>);</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_index &gt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>) {</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  }</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> required = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">required_data_space</a>(remainder_length, payload_count);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> available = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a>();</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <span class="keywordflow">return</span> required &lt;= available;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div>
<div class="line"><a name="l01585"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56"> 1585</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56">MasstreeBorderPage::can_accomodate_snapshot</a>(</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder_length,</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> payload_count)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">header_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> new_index = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">get_key_count</a>();</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordflow">if</span> (new_index == 0) {</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_index &gt;= <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>) {</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <a class="code" href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">PayloadLength</a> adjusted_payload = std::max&lt;PayloadLength&gt;(payload_count, <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>));</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> required = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">required_data_space</a>(remainder_length, adjusted_payload);</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">DataOffset</a> available = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">available_space</a>();</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">return</span> required &lt;= available;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;}</div>
<div class="line"><a name="l01600"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d"> 1600</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">MasstreeBorderPage::compare_key</a>(</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* be_key,</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> klen = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keywordflow">if</span> (remainder != klen) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="keywordflow">if</span> (slice != rec_slice) {</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordflow">if</span> (remainder &gt; <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <span class="keywordflow">return</span> std::memcmp(</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      reinterpret_cast&lt;const char*&gt;(be_key) + (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() + 1) * <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>),</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index),</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      remainder - <span class="keyword">sizeof</span>(<a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a>)) == 0;</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;  }</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="line"><a name="l01624"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47"> 1624</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47">MasstreeBorderPage::equal_key</a>(</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* be_key,</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">compare_key</a>(index, be_key, key_length);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;}</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div>
<div class="line"><a name="l01631"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7"> 1631</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">MasstreeBorderPage::ltgt_key</a>(</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* be_key,</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix = be_key + (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() + 1) * kSliceLen;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">ltgt_key</a>(index, slice, suffix, remainder);</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;}</div>
<div class="line"><a name="l01641"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6a231ba0760f76e9daba8bbcced965c8"> 1641</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">MasstreeBorderPage::ltgt_key</a>(</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix,</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; 0);</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> rec_remainder = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> rec_slice = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index);</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="keywordflow">if</span> (slice &lt; rec_slice) {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (slice &gt; rec_slice) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="keywordflow">if</span> (remainder &lt;= <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>) {</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <span class="keywordflow">if</span> (remainder == rec_remainder) {</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remainder &lt; rec_remainder) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    }</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  }</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keywordflow">if</span> (rec_remainder &lt;= <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>) {</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  }</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index)) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  }</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(rec_remainder &lt;= <a class="code" href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">kMaxKeyLength</a>);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> min_remainder = std::min(remainder, rec_remainder);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* rec_suffix = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">get_record</a>(index);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordtype">int</span> cmp = std::memcmp(suffix, rec_suffix, min_remainder);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  <span class="keywordflow">if</span> (cmp != 0) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">return</span> cmp;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;  <span class="keywordflow">if</span> (remainder == rec_remainder) {</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remainder &lt; rec_remainder) {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  }</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div>
<div class="line"><a name="l01690"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b"> 1690</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">MasstreeBorderPage::will_conflict</a>(</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* be_key,</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">will_conflict</a>(index, slice, remainder);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;}</div>
<div class="line"><a name="l01699"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae3039ec43fe6ced0332acec2ce9210aa"> 1699</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">MasstreeBorderPage::will_conflict</a>(</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; 0);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="keywordflow">if</span> (slice != <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index)) {</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  }</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> rec_remainder = <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">get_remainder_length</a>(index);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <span class="keywordflow">if</span> (remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a> &amp;&amp; rec_remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>) {</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// need to create next layer</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <span class="keywordflow">return</span> (remainder == rec_remainder);  <span class="comment">// if same, it&#39;s exactly the same key</span></div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="line"><a name="l01714"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772"> 1714</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">MasstreeBorderPage::will_contain_next_layer</a>(</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* be_key,</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> key_length)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder = key_length - <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>() * <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice = <a class="code" href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">slice_layer</a>(be_key, key_length, <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">get_layer</a>());</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">will_contain_next_layer</a>(index, slice, remainder);</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;}</div>
<div class="line"><a name="l01723"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a571e2edc8ea6de6e92ea0e9110c0cc88"> 1723</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">MasstreeBorderPage::will_contain_next_layer</a>(</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <a class="code" href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">SlotIndex</a> index,</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <a class="code" href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">KeySlice</a> slice,</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <a class="code" href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">KeyLength</a> remainder)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">kBorderPageMaxSlots</a>);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(remainder &gt; 0);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keywordflow">return</span> slice == <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">get_slice</a>(index) &amp;&amp; <a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">does_point_to_layer</a>(index) &amp;&amp; remainder &gt; <a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">kSliceLen</a>;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;}</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;<span class="comment">// We must place static asserts at the end, otherwise doxygen gets confused (most likely its bug)</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1storage_1_1masstree.html#aba87e2c8ebf35b2a616c9544d2c6c113"> 1733</a></span>&#160;<a class="code" href="assorted__func_8hpp.html#a89bbe410ea9cf2e51d59f618158562cb">STATIC_SIZE_CHECK</a>(<span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">MasstreePage</a>), <a class="code" href="group__MASSTREE.html#ga54533a5e0a23f34c29a57f8701356491">kCommonPageHeaderSize</a>)</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<a class="code" href="assorted__func_8hpp.html#a89bbe410ea9cf2e51d59f618158562cb">STATIC_SIZE_CHECK</a>(sizeof(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">MasstreeBorderPage</a>), <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>)</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<a class="code" href="assorted__func_8hpp.html#a89bbe410ea9cf2e51d59f618158562cb">STATIC_SIZE_CHECK</a>(sizeof(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>::MiniPage), 128 + 256)</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<a class="code" href="assorted__func_8hpp.html#a89bbe410ea9cf2e51d59f618158562cb">STATIC_SIZE_CHECK</a>(sizeof(<a class="code" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">MasstreeIntermediatePage</a>), <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>)</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<a class="code" href="assorted__func_8hpp.html#a89bbe410ea9cf2e51d59f618158562cb">STATIC_SIZE_CHECK</a>(<a class="code" href="namespacefoedus_1_1storage_1_1masstree.html#a7abc672ebc91931d1fb7debd5fc1affc">kBorderPageDataPartOffset</a>, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a> - <a class="code" href="group__MASSTREE.html#ga91326b566ce7355c1ee6fd3848af01cd">kBorderPageDataPartSize</a>)</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;}  <span class="comment">// namespace masstree</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;}  <span class="comment">// namespace storage</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="preprocessor">#endif  // FOEDUS_STORAGE_MASSTREE_MASSTREE_PAGE_IMPL_HPP_</span></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ac7ca15bf233b941d860679b88c8bc87f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac7ca15bf233b941d860679b88c8bc87f">foedus::storage::masstree::MasstreeBorderPage::reserve_record_space</a></div><div class="ttdeci">void reserve_record_space(SlotIndex index, xct::XctId initial_owner_id, KeySlice slice, const void *suffix, KeyLength remainder_length, PayloadLength payload_count)</div><div class="ttdoc">Installs a new physical record that doesn&#39;t exist logically (delete bit on). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01322">masstree_page_impl.hpp:1322</a></div></div>
<div class="ttc" id="assorted__func_8hpp_html"><div class="ttname"><a href="assorted__func_8hpp.html">assorted_func.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4dc67e57eb2c90ffced75953dcef70fa"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4dc67e57eb2c90ffced75953dcef70fa">foedus::storage::masstree::MasstreeBorderPage::get_remainder_length</a></div><div class="ttdeci">KeyLength get_remainder_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00820">masstree_page_impl.hpp:820</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a05c12e467155284686fe0a71dc617a2e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a05c12e467155284686fe0a71dc617a2e">foedus::storage::masstree::MasstreeBorderPage::set_slice</a></div><div class="ttdeci">void set_slice(SlotIndex index, KeySlice slice) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00805">masstree_page_impl.hpp:805</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ad016dc644874d83b96ad0b8046e6582c"><div class="ttname"><a href="group__MASSTREE.html#ad016dc644874d83b96ad0b8046e6582c">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::physical_record_length_</a></div><div class="ttdeci">DataOffset physical_record_length_</div><div class="ttdoc">Byte count this record occupies. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00478">masstree_page_impl.hpp:478</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a9cffc20f29ad72d4edbeedece861c48f"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a9cffc20f29ad72d4edbeedece861c48f">foedus::storage::masstree::kInfimumSlice</a></div><div class="ttdeci">const KeySlice kInfimumSlice</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00132">masstree_id.hpp:132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a874518901eb38e4dc3b7b69afb69e5c0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a874518901eb38e4dc3b7b69afb69e5c0">foedus::storage::masstree::MasstreeBorderPage::prefetch_additional_if_needed</a></div><div class="ttdeci">void prefetch_additional_if_needed(SlotIndex key_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00937">masstree_page_impl.hpp:937</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a5bf84675a6aae35cdfde862a1ffbe11f"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a5bf84675a6aae35cdfde862a1ffbe11f">foedus::storage::masstree::MasstreeBorderPage::Slot::write_lengthes_oneshot</a></div><div class="ttdeci">void write_lengthes_oneshot(SlotLengthPart new_value) __attribute__((always_inline))</div><div class="ttdoc">Writes lengthes_ in one-shot. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00577">masstree_page_impl.hpp:577</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aa50900a4544302f5056f62360f8d861e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa50900a4544302f5056f62360f8d861e">foedus::storage::masstree::MasstreePage::high_fence_</a></div><div class="ttdeci">KeySlice high_fence_</div><div class="ttdoc">Inclusive high fence of this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00199">masstree_page_impl.hpp:199</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3ab3ec4aa9b6e43a606e1555c5c74cec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3ab3ec4aa9b6e43a606e1555c5c74cec">foedus::storage::masstree::MasstreePage::get_key_count</a></div><div class="ttdeci">SlotIndex get_key_count() const __attribute__((always_inline))</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00148">masstree_page_impl.hpp:148</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult_html_a212f66ee089508752d6512114210a649"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a212f66ee089508752d6512114210a649">foedus::storage::masstree::MasstreeBorderPage::FindKeyForReserveResult::FindKeyForReserveResult</a></div><div class="ttdeci">FindKeyForReserveResult(SlotIndex index, MatchType match_type)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00594">masstree_page_impl.hpp:594</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a1781897598dfbd41a6d1291d0c5dc060"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1781897598dfbd41a6d1291d0c5dc060">foedus::storage::masstree::MasstreeBorderPage::verify_slot_lengthes</a></div><div class="ttdeci">bool verify_slot_lengthes(SlotIndex index) const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00708">masstree_page_impl.cpp:708</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ac50431aba2baceab1e50acfc7f4c5b56"><div class="ttname"><a href="group__MASSTREE.html#ac50431aba2baceab1e50acfc7f4c5b56">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::unused_</a></div><div class="ttdeci">uint16_t unused_</div><div class="ttdoc">unused so far </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00480">masstree_page_impl.hpp:480</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a447049b6067b0d1be460802f1b6a7076"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a447049b6067b0d1be460802f1b6a7076">foedus::storage::masstree::MasstreeBorderPage::Slot::get_max_payload_peek</a></div><div class="ttdeci">PayloadLength get_max_payload_peek() const __attribute__((always_inline))</div><div class="ttdoc">This might be affected by concurrent threads. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00553">masstree_page_impl.hpp:553</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9527f3829e488359a2d7d80318729bee"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9527f3829e488359a2d7d80318729bee">foedus::storage::masstree::MasstreeBorderPage::get_offset_in_bytes</a></div><div class="ttdeci">DataOffset get_offset_in_bytes(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00809">masstree_page_impl.hpp:809</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a42cee2c2a116efdd26420284e95a20f7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a42cee2c2a116efdd26420284e95a20f7">foedus::storage::masstree::MasstreeBorderPage::get_slice</a></div><div class="ttdeci">KeySlice get_slice(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00801">masstree_page_impl.hpp:801</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0d24e70c0a141db733ff45411b5a161e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0d24e70c0a141db733ff45411b5a161e">foedus::storage::masstree::MasstreePage::release_pages_recursive_common</a></div><div class="ttdeci">void release_pages_recursive_common(const memory::GlobalVolatilePageResolver &amp;page_resolver, memory::PageReleaseBatch *batch)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00164">masstree_page_impl.cpp:164</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga54533a5e0a23f34c29a57f8701356491"><div class="ttname"><a href="group__MASSTREE.html#ga54533a5e0a23f34c29a57f8701356491">foedus::storage::masstree::kCommonPageHeaderSize</a></div><div class="ttdeci">const uint32_t kCommonPageHeaderSize</div><div class="ttdoc">Size of the base page class (MasstreePage), which is the common header for intermediate and border pa...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00144">masstree_id.hpp:144</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_abdd08567e3f74c11a90c599cbac45a24"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abdd08567e3f74c11a90c599cbac45a24">foedus::storage::masstree::MasstreeBorderPage::release_pages_recursive</a></div><div class="ttdeci">void release_pages_recursive(const memory::GlobalVolatilePageResolver &amp;page_resolver, memory::PageReleaseBatch *batch)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00266">masstree_page_impl.cpp:266</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_af3549bb49f633f74d58adfb5880b4c52"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#af3549bb49f633f74d58adfb5880b4c52">foedus::storage::masstree::kSliceLen</a></div><div class="ttdeci">const uint64_t kSliceLen</div><div class="ttdoc">Shorthand for sizeof(KeySlice). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00129">masstree_id.hpp:129</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a907f46e4f7d427806529dd8e2e03dd9c"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a907f46e4f7d427806529dd8e2e03dd9c">foedus::storage::masstree::calculate_suffix_length_aligned</a></div><div class="ttdeci">KeyLength calculate_suffix_length_aligned(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01116">masstree_page_impl.hpp:1116</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a77c8283e11827f8a0064351c279d7072"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a77c8283e11827f8a0064351c279d7072">foedus::storage::masstree::MasstreeBorderPage::Slot::lengthes_</a></div><div class="ttdeci">SlotLengthUnion lengthes_</div><div class="ttdoc">Stores mutable length information of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00510">masstree_page_impl.hpp:510</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html">foedus::storage::DualPagePointer</a></div><div class="ttdoc">Represents a pointer to another page (usually a child page). </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00271">storage_id.hpp:271</a></div></div>
<div class="ttc" id="epoch_8hpp_html"><div class="ttname"><a href="epoch_8hpp.html">epoch.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ae9eebf88265f64634f6fa42b7f89f581"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae9eebf88265f64634f6fa42b7f89f581">foedus::storage::masstree::MasstreeBorderPage::prefetch</a></div><div class="ttdeci">void prefetch() const __attribute__((always_inline))</div><div class="ttdoc">prefetch upto 256th bytes. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00934">masstree_page_impl.hpp:934</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a14cdcef87b3c0a6ef431df9d06a1a663"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a14cdcef87b3c0a6ef431df9d06a1a663">foedus::storage::masstree::MasstreePage::is_empty_range</a></div><div class="ttdeci">bool is_empty_range() const __attribute__((always_inline))</div><div class="ttdoc">An empty-range page, either intermediate or border, never has any entries. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00097">masstree_page_impl.hpp:97</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga9d05e904033c0bba7113cdafb43d6610"><div class="ttname"><a href="group__MASSTREE.html#ga9d05e904033c0bba7113cdafb43d6610">foedus::storage::masstree::PayloadLength</a></div><div class="ttdeci">uint16_t PayloadLength</div><div class="ttdoc">Represents a byte-length of a payload in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00092">masstree_id.hpp:92</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a20c23d249173f1a2733f78eb4fc5899f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a20c23d249173f1a2733f78eb4fc5899f">foedus::storage::masstree::MasstreeBorderPage::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const MasstreeBorderPage &amp;v)</div><div class="ttdoc">defined in masstree_page_debug.cpp. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__debug_8cpp_source.html#l00080">masstree_page_debug.cpp:80</a></div></div>
<div class="ttc" id="storage__id_8hpp_html"><div class="ttname"><a href="storage__id_8hpp.html">storage_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a2d1f3c36f9a67c0489831a05aa48cad6"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2d1f3c36f9a67c0489831a05aa48cad6">foedus::storage::masstree::MasstreePage::get_version</a></div><div class="ttdeci">PageVersion &amp; get_version() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00163">masstree_page_impl.hpp:163</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6280f932bf17f1d9d4acc294ca984bee"><div class="ttname"><a href="group__MASSTREE.html#ga6280f932bf17f1d9d4acc294ca984bee">foedus::storage::masstree::SlotIndex</a></div><div class="ttdeci">uint16_t SlotIndex</div><div class="ttdoc">Index of a record in a (border) page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00110">masstree_id.hpp:110</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a224dac36bcf1532205498f2ed07427a2"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a224dac36bcf1532205498f2ed07427a2">foedus::storage::masstree::MasstreeBorderPage::Slot::~Slot</a></div><div class="ttdeci">~Slot()=delete</div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html">foedus::storage::masstree::MasstreeBorderPage::FindKeyForReserveResult</a></div><div class="ttdoc">return value for find_key_for_reserve(). </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00593">masstree_page_impl.hpp:593</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a327750cab5847980e336423128c42983"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a327750cab5847980e336423128c42983">foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets</a></div><div class="ttdeci">const char * get_record_payload_from_offsets(DataOffset record_offset, KeyLength remainder_length) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00768">masstree_page_impl.hpp:768</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2f1e35c48bba8f7c8319d5739487768d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2f1e35c48bba8f7c8319d5739487768d">foedus::storage::masstree::MasstreeBorderPage::initialize_snapshot_page</a></div><div class="ttdeci">void initialize_snapshot_page(StorageId storage_id, SnapshotPagePointer page_id, uint8_t layer, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00146">masstree_page_impl.cpp:146</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a867f696df8da3aeeab003663a439a535"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a867f696df8da3aeeab003663a439a535">foedus::storage::masstree::MasstreeBorderPage::initialize_as_layer_root_physical</a></div><div class="ttdeci">void initialize_as_layer_root_physical(VolatilePagePointer page_id, MasstreeBorderPage *parent, SlotIndex parent_index)</div><div class="ttdoc">A physical-only method to initialize this page as a volatile page of a layer-root pointed from the gi...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00431">masstree_page_impl.cpp:431</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9c0b897c662c4fdaaff4ac5b131da506"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9c0b897c662c4fdaaff4ac5b131da506">foedus::storage::masstree::MasstreeBorderPage::get_max_payload_length</a></div><div class="ttdeci">PayloadLength get_max_payload_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00838">masstree_page_impl.hpp:838</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae33cf61cd45f5956aa2e46283b9474ab"><div class="ttname"><a href="group__MASSTREE.html#gae33cf61cd45f5956aa2e46283b9474ab">foedus::storage::masstree::kMaxKeyLength</a></div><div class="ttdeci">const KeyLength kMaxKeyLength</div><div class="ttdoc">Max length of a key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00075">masstree_id.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19dac61d11c33d266ee7aee52cef8d7b2b50">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00587">masstree_page_impl.hpp:587</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a7743b78e92bef0f6930df669ca93727a"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7743b78e92bef0f6930df669ca93727a">foedus::storage::masstree::MasstreeIntermediatePage::get_minipage</a></div><div class="ttdeci">const MiniPage &amp; get_minipage(uint8_t index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00323">masstree_page_impl.hpp:323</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aa900861197b7e9b341cd73a6709832ed"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aa900861197b7e9b341cd73a6709832ed">foedus::storage::masstree::MasstreeBorderPage::get_owner_id</a></div><div class="ttdeci">const xct::RwLockableXctId * get_owner_id(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00816">masstree_page_impl.hpp:816</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ac970fa7e96f6ea827ce28fdc1ac0d2c3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ac970fa7e96f6ea827ce28fdc1ac0d2c3">foedus::storage::masstree::MasstreePage::operator=</a></div><div class="ttdeci">MasstreePage &amp; operator=(const MasstreePage &amp;other)=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a16a2c06a304514be7b99fb6c884e7e9b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a16a2c06a304514be7b99fb6c884e7e9b">foedus::storage::masstree::MasstreePage::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00168">masstree_page_impl.hpp:168</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a61318d7aab5c4ca7334ec05f8de168ca"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a61318d7aab5c4ca7334ec05f8de168ca">foedus::storage::PageVersion::is_retired</a></div><div class="ttdeci">bool is_retired() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00140">page.hpp:140</a></div></div>
<div class="ttc" id="group__MASSTREE_html_a2ef17017ef81f095de4a76150bc3c015"><div class="ttname"><a href="group__MASSTREE.html#a2ef17017ef81f095de4a76150bc3c015">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::payload_length_</a></div><div class="ttdeci">PayloadLength payload_length_</div><div class="ttdoc">Byte length of the payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00487">masstree_page_impl.hpp:487</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga595ca7fc4a3011a9704a883a25141e5f"><div class="ttname"><a href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">foedus::storage::StorageId</a></div><div class="ttdeci">uint32_t StorageId</div><div class="ttdoc">Unique ID for storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00055">storage_id.hpp:55</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19d">foedus::storage::masstree::MasstreeBorderPage::MatchType</a></div><div class="ttdeci">MatchType</div><div class="ttdoc">Used in FindKeyForReserveResult. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00585">masstree_page_impl.hpp:585</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1WriteXctAccess_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1WriteXctAccess.html">foedus::xct::WriteXctAccess</a></div><div class="ttdoc">Represents a record of write-access during a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00168">xct_access.hpp:168</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_a3a25bf9cfcf69c0beb594b5c052a650c"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a3a25bf9cfcf69c0beb594b5c052a650c">foedus::storage::masstree::MasstreeIntermediatePointerIterator::index_mini_</a></div><div class="ttdeci">uint16_t index_mini_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01101">masstree_page_impl.hpp:1101</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_adc22d21883e15b87cd5ff6b6ec513c35"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#adc22d21883e15b87cd5ff6b6ec513c35">foedus::storage::masstree::MasstreePage::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00169">masstree_page_impl.hpp:169</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a1a6f55a5a59bcab9631bbb879da689ec"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a1a6f55a5a59bcab9631bbb879da689ec">foedus::storage::masstree::MasstreePage::is_border</a></div><div class="ttdeci">bool is_border() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00084">masstree_page_impl.hpp:84</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a3f361aa72342a7354ef9b8130b10d21f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f">foedus::storage::PageHeader::increment_key_count</a></div><div class="ttdeci">void increment_key_count() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00318">page.hpp:318</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a39d297bf42db27de5e38943e057e97b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a39d297bf42db27de5e38943e057e97b9">foedus::storage::masstree::MasstreePage::get_snapshot_page_id</a></div><div class="ttdeci">SnapshotPagePointer get_snapshot_page_id() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00079">masstree_page_impl.hpp:79</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_af1166bec8146a171da2457ef10bbffed"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#af1166bec8146a171da2457ef10bbffed">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">const PageHeader &amp; header() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00074">masstree_page_impl.hpp:74</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a409bd08120ef1f54839bbdefd521dd8a"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a409bd08120ef1f54839bbdefd521dd8a">foedus::storage::masstree::MasstreePage::low_fence_</a></div><div class="ttdeci">KeySlice low_fence_</div><div class="ttdoc">Inclusive low fence of this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00197">masstree_page_impl.hpp:197</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a938979fd6b5ebe6bbfbec5d2a756ae05"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a938979fd6b5ebe6bbfbec5d2a756ae05">foedus::storage::masstree::MasstreeBorderPage::get_next_offset</a></div><div class="ttdeci">DataOffset get_next_offset() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00625">masstree_page_impl.hpp:625</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a76dd33fb726e34a5294417e549d5f4fe"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a76dd33fb726e34a5294417e549d5f4fe">foedus::storage::masstree::MasstreeBorderPage::Slot::filler_</a></div><div class="ttdeci">char filler_[2]</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00538">masstree_page_impl.hpp:538</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7c834f0fdc4afb46ae9992b2a4396763">foedus::storage::masstree::MasstreeBorderPage::kExactMatchLayerPointer</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00588">masstree_page_impl.hpp:588</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da7404b8beb2a94619df655d62bc1a144d">foedus::storage::masstree::MasstreeBorderPage::kConflictingLocalRecord</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00589">masstree_page_impl.hpp:589</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3260be02451d5017a2301854454dd203"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3260be02451d5017a2301854454dd203">foedus::storage::masstree::MasstreePage::prefetch_general</a></div><div class="ttdeci">void prefetch_general() const __attribute__((always_inline))</div><div class="ttdoc">prefetch upto keys/separators, whether this page is border or interior. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00158">masstree_page_impl.hpp:158</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_aedb491bd51b577feeb9ff84976548afc"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#aedb491bd51b577feeb9ff84976548afc">foedus::storage::PageHeader::masstree_layer_</a></div><div class="ttdeci">uint8_t masstree_layer_</div><div class="ttdoc">used only in masstree. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00226">page.hpp:226</a></div></div>
<div class="ttc" id="page_8hpp_html"><div class="ttname"><a href="page_8hpp.html">page.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8f7a0dbbbc0b3684cb349f551638a19da6e2a8365af0c79a106cad65d93890795">foedus::storage::masstree::MasstreeBorderPage::kNotFound</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00586">masstree_page_impl.hpp:586</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult_html_a7adabca0abbf85305a41b21a2de97afd"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#a7adabca0abbf85305a41b21a2de97afd">foedus::storage::masstree::MasstreeBorderPage::FindKeyForReserveResult::match_type_</a></div><div class="ttdeci">MatchType match_type_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00597">masstree_page_impl.hpp:597</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aecb8c5a7b49932a731872cdd8e71504d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb8c5a7b49932a731872cdd8e71504d">foedus::storage::masstree::MasstreeBorderPage::compare_key</a></div><div class="ttdeci">bool compare_key(SlotIndex index, const void *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">actually this method should be renamed to equal_key... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01600">masstree_page_impl.hpp:1600</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8a9c60937a3287ce6b73ea104a29d999"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8a9c60937a3287ce6b73ea104a29d999">foedus::storage::masstree::MasstreeBorderPage::get_new_slot</a></div><div class="ttdeci">Slot * get_new_slot(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00643">masstree_page_impl.hpp:643</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1ab02d0a6214e7d36d74a30afda7b1ff"><div class="ttname"><a href="group__MASSTREE.html#ga1ab02d0a6214e7d36d74a30afda7b1ff">foedus::storage::masstree::DataOffset</a></div><div class="ttdeci">uint16_t DataOffset</div><div class="ttdoc">Byte-offset in a page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00104">masstree_id.hpp:104</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a698b417f5e89daf68ebd78044222bb23"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a698b417f5e89daf68ebd78044222bb23">foedus::storage::masstree::MasstreePage::is_foster_minor_null</a></div><div class="ttdeci">bool is_foster_minor_null() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00110">masstree_page_impl.hpp:110</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga14e35f7fbe4bc18276fde8e8ba460f5b"><div class="ttname"><a href="group__STORAGE.html#ga14e35f7fbe4bc18276fde8e8ba460f5b">foedus::storage::PageType</a></div><div class="ttdeci">PageType</div><div class="ttdoc">The following 1-byte value is stored in the common page header. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00046">page.hpp:46</a></div></div>
<div class="ttc" id="xct_2fwd_8hpp_html"><div class="ttname"><a href="xct_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in transaction package. </div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a7a9d09469e106d14513932f3aebeef97"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a7a9d09469e106d14513932f3aebeef97">foedus::storage::masstree::MasstreePage::is_foster_major_null</a></div><div class="ttdeci">bool is_foster_major_null() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00111">masstree_page_impl.hpp:111</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1TrackMovedRecordResult_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1TrackMovedRecordResult.html">foedus::xct::TrackMovedRecordResult</a></div><div class="ttdoc">Result of track_moved_record(). </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01180">xct_id.hpp:1180</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a8a6112ec9230a2769039e8cfe21f3faf"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8a6112ec9230a2769039e8cfe21f3faf">foedus::storage::masstree::MasstreePage::foster_fence_</a></div><div class="ttdeci">KeySlice foster_fence_</div><div class="ttdoc">Inclusive low_fence of foster child. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00201">masstree_page_impl.hpp:201</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html">foedus::storage::VolatilePagePointer</a></div><div class="ttdoc">Represents a pointer to a volatile page with modification count for preventing ABA. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00194">storage_id.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a1cb83de15afc0a903046937276b0ed31"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a1cb83de15afc0a903046937276b0ed31">foedus::storage::masstree::MasstreeIntermediatePage::get_minipage</a></div><div class="ttdeci">MiniPage &amp; get_minipage(uint8_t index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00322">masstree_page_impl.hpp:322</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html">foedus::storage::PageVersion</a></div><div class="ttdoc">Just a synonym of XctId to be used as a page lock mechanism. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00129">page.hpp:129</a></div></div>
<div class="ttc" id="fwd_8hpp_html"><div class="ttname"><a href="fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in root package. </div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html">foedus::xct::XctId</a></div><div class="ttdoc">Persistent status part of Transaction ID. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00955">xct_id.hpp:955</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_ab8cb74332854cf84d1cfee7805eb3415"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ab8cb74332854cf84d1cfee7805eb3415">foedus::storage::masstree::MasstreeBorderPage::Slot::read_lengthes_oneshot</a></div><div class="ttdeci">SlotLengthPart read_lengthes_oneshot() const __attribute__((always_inline))</div><div class="ttdoc">Reads lengthes_ of this slot in one-shot. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00568">masstree_page_impl.hpp:568</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_aa7f9dfce1b1a92ad89e7163459025b64"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa7f9dfce1b1a92ad89e7163459025b64">foedus::storage::masstree::MasstreeIntermediatePage::prefetch</a></div><div class="ttdeci">void prefetch() const </div><div class="ttdoc">prefetch upto separators. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00305">masstree_page_impl.hpp:305</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html">foedus::storage::masstree::MasstreeBorderPage</a></div><div class="ttdoc">Represents one border page in Masstree Storage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00444">masstree_page_impl.hpp:444</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6318577ff1e6f5106712e9ed60a429fe"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6318577ff1e6f5106712e9ed60a429fe">foedus::storage::masstree::MasstreeBorderPage::is_consecutive_inserts</a></div><div class="ttdeci">bool is_consecutive_inserts() const </div><div class="ttdoc">Whether this page is receiving only sequential inserts. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00623">masstree_page_impl.hpp:623</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14c7383d33c5b6ddfcbab6b58ae80121"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14c7383d33c5b6ddfcbab6b58ae80121">foedus::storage::masstree::MasstreeBorderPage::get_next_layer</a></div><div class="ttdeci">DualPagePointer * get_next_layer(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00750">masstree_page_impl.hpp:750</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab889473973eae831407d49b9fb40fee2"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab889473973eae831407d49b9fb40fee2">foedus::storage::masstree::MasstreePage::set_foster_major_offset_unsafe</a></div><div class="ttdeci">void set_foster_major_offset_unsafe(memory::PagePoolOffset offset) __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this should be used only by composer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00180">masstree_page_impl.hpp:180</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_a541c911b49454a9baece1d658f51abf5"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a541c911b49454a9baece1d658f51abf5">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::prefetch</a></div><div class="ttdeci">void prefetch() const </div><div class="ttdoc">prefetch upto separators. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00281">masstree_page_impl.hpp:281</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a293c8b397164e1f9ee32e69835846fb0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a293c8b397164e1f9ee32e69835846fb0">foedus::storage::masstree::MasstreeBorderPage::increase_next_offset</a></div><div class="ttdeci">void increase_next_offset(DataOffset length)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00626">masstree_page_impl.hpp:626</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a7abc672ebc91931d1fb7debd5fc1affc"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a7abc672ebc91931d1fb7debd5fc1affc">foedus::storage::masstree::kBorderPageDataPartOffset</a></div><div class="ttdeci">const DataOffset kBorderPageDataPartOffset</div><div class="ttdoc">Offset of data_ member in MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00178">masstree_id.hpp:178</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_a8735d5698123b41317b3c5970ffd1e50"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#a8735d5698123b41317b3c5970ffd1e50">foedus::xct::RwLockableXctId::xct_id_</a></div><div class="ttdeci">XctId xct_id_</div><div class="ttdoc">the second 64bit: Persistent status part of TID. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01137">xct_id.hpp:1137</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ad3171dd821766bcffba70946a4e44856"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad3171dd821766bcffba70946a4e44856">foedus::storage::masstree::MasstreePage::set_moved</a></div><div class="ttdeci">void set_moved() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00171">masstree_page_impl.hpp:171</a></div></div>
<div class="ttc" id="error__code_8hpp_html"><div class="ttname"><a href="error__code_8hpp.html">error_code.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1HighFence_html_a7031da2663e8009ebd7f20acfe9d2932"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#a7031da2663e8009ebd7f20acfe9d2932">foedus::storage::masstree::HighFence::HighFence</a></div><div class="ttdeci">HighFence(KeySlice slice, bool supremum)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00053">masstree_page_impl.hpp:53</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba0fb7a3d57453730f4ed6bb2914d076db">foedus::storage::kMasstreeBorderPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00050">page.hpp:50</a></div></div>
<div class="ttc" id="group__ASSORTED_html_ga14adcd2a780f37023df88933f17a5a83"><div class="ttname"><a href="group__ASSORTED.html#ga14adcd2a780f37023df88933f17a5a83">foedus::assorted::prefetch_cachelines</a></div><div class="ttdeci">void prefetch_cachelines(const void *address, int cacheline_count)</div><div class="ttdoc">Prefetch multiple contiguous cachelines to L1 cache. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00066">cacheline.hpp:66</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga556e8f0d5e02e78f3ddecd8f5b022bf6"><div class="ttname"><a href="group__MASSTREE.html#ga556e8f0d5e02e78f3ddecd8f5b022bf6">foedus::storage::masstree::KeySlice</a></div><div class="ttdeci">uint64_t KeySlice</div><div class="ttdoc">Each key slice is an 8-byte integer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00126">masstree_id.hpp:126</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_aefcac4f0e94dee19b7b26ff392ba4c54"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aefcac4f0e94dee19b7b26ff392ba4c54">foedus::storage::masstree::MasstreeIntermediatePointerIterator::get_low_key</a></div><div class="ttdeci">KeySlice get_low_key() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01071">masstree_page_impl.hpp:1071</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_afb63e0ba2340f1b7e21bae579e0cf1b4"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#afb63e0ba2340f1b7e21bae579e0cf1b4">foedus::storage::masstree::MasstreePage::is_layer_root</a></div><div class="ttdeci">bool is_layer_root() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00106">masstree_page_impl.hpp:106</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a17611d6ca15dd8fadd33bd1c6a7101eb"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a17611d6ca15dd8fadd33bd1c6a7101eb">foedus::storage::masstree::MasstreeIntermediatePage::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const MasstreeIntermediatePage &amp;v)</div><div class="ttdoc">defined in masstree_page_debug.cpp. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__debug_8cpp_source.html#l00054">masstree_page_debug.cpp:54</a></div></div>
<div class="ttc" id="masstree__id_8hpp_html"><div class="ttname"><a href="masstree__id_8hpp.html">masstree_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="group__MASSTREE_html_gaaa62799e432e5c5b145851eed621d33d"><div class="ttname"><a href="group__MASSTREE.html#gaaa62799e432e5c5b145851eed621d33d">foedus::storage::masstree::kMaxIntermediateMiniSeparators</a></div><div class="ttdeci">const uint16_t kMaxIntermediateMiniSeparators</div><div class="ttdoc">Max number of separators stored in the second level of intermediate pages. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00244">masstree_page_impl.hpp:244</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a827faad5f063cf4bf9188f17bbf582b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a827faad5f063cf4bf9188f17bbf582b9">foedus::storage::masstree::MasstreePage::foster_twin_</a></div><div class="ttdeci">VolatilePagePointer foster_twin_[2]</div><div class="ttdoc">Points to foster children, or tentative child pages. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00211">masstree_page_impl.hpp:211</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8af97da56967f8357bd330a57cd58476"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8af97da56967f8357bd330a57cd58476">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">const char * get_record(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00736">masstree_page_impl.hpp:736</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gaa0c469cd4f863aa64e07fcea90b72859"><div class="ttname"><a href="group__MASSTREE.html#gaa0c469cd4f863aa64e07fcea90b72859">foedus::storage::masstree::KeyLength</a></div><div class="ttdeci">uint16_t KeyLength</div><div class="ttdoc">Represents a byte-length of a key in this package. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00069">masstree_id.hpp:69</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_a50f249d95bb8fceda793e40a76b4e386"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a50f249d95bb8fceda793e40a76b4e386">foedus::storage::masstree::MasstreeIntermediatePointerIterator::next</a></div><div class="ttdeci">void next()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01057">masstree_page_impl.hpp:1057</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html">foedus::storage::masstree::MasstreePage</a></div><div class="ttdoc">Common base of MasstreeIntermediatePage and MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00066">masstree_page_impl.hpp:66</a></div></div>
<div class="ttc" id="group__COMPILER_html_gad10e2a9bf230cc6fdd98a6c70958ef81"><div class="ttname"><a href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)        </div><div class="ttdoc">Hints that x is highly likely true. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00103">compiler.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2c1e8415916dbf458aee87572741890f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2c1e8415916dbf458aee87572741890f">foedus::storage::masstree::MasstreeBorderPage::get_record</a></div><div class="ttdeci">char * get_record(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00732">masstree_page_impl.hpp:732</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a913ee08e26f12e4b8031ec34967962a0"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a913ee08e26f12e4b8031ec34967962a0">foedus::storage::masstree::MasstreeBorderPage::Slot::get_max_payload_stable</a></div><div class="ttdeci">PayloadLength get_max_payload_stable(SlotLengthPart stable_length) const __attribute__((always_inline))</div><div class="ttdoc">This is not affected by concurrent threads. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00557">masstree_page_impl.hpp:557</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6ce21d6a92abc597380b8385509464ed"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6ce21d6a92abc597380b8385509464ed">foedus::storage::masstree::MasstreeBorderPage::can_accomodate</a></div><div class="ttdeci">bool can_accomodate(SlotIndex new_index, KeyLength remainder_length, PayloadLength payload_count) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01570">masstree_page_impl.hpp:1570</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a32653a16ddca213c94560652e9388dd5"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a32653a16ddca213c94560652e9388dd5">foedus::storage::masstree::MasstreePage::get_foster_minor</a></div><div class="ttdeci">VolatilePagePointer get_foster_minor() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00112">masstree_page_impl.hpp:112</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a634aa97d761122a7d7cd4cb7889d844f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a634aa97d761122a7d7cd4cb7889d844f">foedus::storage::masstree::MasstreeBorderPage::get_payload_length</a></div><div class="ttdeci">PayloadLength get_payload_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00832">masstree_page_impl.hpp:832</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_aaa54bf8d7216fa8eb4e86e9b6b63fb8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aaa54bf8d7216fa8eb4e86e9b6b63fb8f">foedus::storage::masstree::MasstreeBorderPage::Slot::operator=</a></div><div class="ttdeci">Slot &amp; operator=(const Slot &amp;)=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ad909b4004fb61cf846078c668d301246"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad909b4004fb61cf846078c668d301246">foedus::storage::masstree::MasstreeBorderPage::get_next_layer_from_offsets</a></div><div class="ttdeci">const DualPagePointer * get_next_layer_from_offsets(DataOffset record_offset, KeyLength remainder_length) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00788">masstree_page_impl.hpp:788</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aec1302bec7fe39ef71cf9ac0ab6b364a"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aec1302bec7fe39ef71cf9ac0ab6b364a">foedus::storage::masstree::MasstreePage::is_retired</a></div><div class="ttdeci">bool is_retired() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00170">masstree_page_impl.hpp:170</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a27d301fad7d4d340cd2d6255dc330607"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a27d301fad7d4d340cd2d6255dc330607">foedus::storage::masstree::MasstreePage::get_foster_major</a></div><div class="ttdeci">VolatilePagePointer get_foster_major() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00113">masstree_page_impl.hpp:113</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_a2a483a354a301bcd4f66d853f2f981ec"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a2a483a354a301bcd4f66d853f2f981ec">foedus::storage::masstree::MasstreeIntermediatePointerIterator::MasstreeIntermediatePointerIterator</a></div><div class="ttdeci">MasstreeIntermediatePointerIterator(const MasstreeIntermediatePage *page)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01048">masstree_page_impl.hpp:1048</a></div></div>
<div class="ttc" id="group__MASSTREE_html_af40fa90a8daca72e5c02e0ff9ac49a63"><div class="ttname"><a href="group__MASSTREE.html#af40fa90a8daca72e5c02e0ff9ac49a63">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::components</a></div><div class="ttdeci">SlotLengthPart components</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00492">masstree_page_impl.hpp:492</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_afe5325f7a947e61e6aa5256f5c3ad98d"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5325f7a947e61e6aa5256f5c3ad98d">foedus::xct::RwLockableXctId::lock_</a></div><div class="ttdeci">McsRwLock lock_</div><div class="ttdoc">the first 64bit: Locking part of TID </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01134">xct_id.hpp:1134</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_a7a1d64c4c68bb144cc3d7c11966498f9"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a7a1d64c4c68bb144cc3d7c11966498f9">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::key_count_</a></div><div class="ttdeci">uint8_t key_count_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00271">masstree_page_impl.hpp:271</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_a73da964f115a4ae55e118f6532859c9a"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a73da964f115a4ae55e118f6532859c9a">foedus::storage::VolatilePagePointer::set_offset_unsafe</a></div><div class="ttdeci">void set_offset_unsafe(memory::PagePoolOffset offset)</div><div class="ttdoc">This is used only in special places (snapshot composer). </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00207">storage_id.hpp:207</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_adaf1febd2954da507ffd8daa2757c890"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adaf1febd2954da507ffd8daa2757c890">foedus::storage::masstree::MasstreeIntermediatePage::get_separator</a></div><div class="ttdeci">KeySlice get_separator(uint8_t index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00324">masstree_page_impl.hpp:324</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a96be3b659b1812ecd7efbf601ea8c929"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a96be3b659b1812ecd7efbf601ea8c929">foedus::storage::masstree::MasstreeBorderPage::Slot::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00560">masstree_page_impl.hpp:560</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_a4573f39b65809290ae67850a6ee0c57e"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a4573f39b65809290ae67850a6ee0c57e">foedus::storage::masstree::MasstreeIntermediatePointerIterator::index_</a></div><div class="ttdeci">uint16_t index_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01100">masstree_page_impl.hpp:1100</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aa95b56b38e523e345e5fb0283e43d65e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa95b56b38e523e345e5fb0283e43d65e">foedus::storage::masstree::MasstreePage::initialize_volatile_common</a></div><div class="ttdeci">void initialize_volatile_common(StorageId storage_id, VolatilePagePointer page_id, PageType page_type, uint8_t layer, uint8_t level, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00047">masstree_page_impl.cpp:47</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a8a6e5607a634aacda2986655f80420ca"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a8a6e5607a634aacda2986655f80420ca">foedus::storage::masstree::MasstreeBorderPage::Slot::get_suffix_length</a></div><div class="ttdeci">KeyLength get_suffix_length() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00549">masstree_page_impl.hpp:549</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gad5ea63b0770685f3aad857fbd6e9096e"><div class="ttname"><a href="group__ASSORTED.html#gad5ea63b0770685f3aad857fbd6e9096e">foedus::assorted::kCachelineSize</a></div><div class="ttdeci">const uint16_t kCachelineSize</div><div class="ttdoc">Byte count of one cache line. </div><div class="ttdef"><b>Definition:</b> <a href="cacheline_8hpp_source.html#l00042">cacheline.hpp:42</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html">foedus::xct::RwLockableXctId</a></div><div class="ttdoc">The MCS reader-writer lock variant of LockableXctId. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01132">xct_id.hpp:1132</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a35973b360ff80fe5c939e971c373ee05"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a35973b360ff80fe5c939e971c373ee05">foedus::storage::masstree::MasstreeBorderPage::append_next_layer_snapshot</a></div><div class="ttdeci">void append_next_layer_snapshot(xct::XctId initial_owner_id, KeySlice slice, SnapshotPagePointer pointer)</div><div class="ttdoc">Installs a next layer pointer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01417">masstree_page_impl.hpp:1417</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ad10a5e5c2b8774c5f2a96661dad217e8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad10a5e5c2b8774c5f2a96661dad217e8">foedus::storage::masstree::MasstreeBorderPage::get_suffix_length</a></div><div class="ttdeci">KeyLength get_suffix_length(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00823">masstree_page_impl.hpp:823</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_acfa0bbaaa7f6f6c5e8ee18e9019354f0"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#acfa0bbaaa7f6f6c5e8ee18e9019354f0">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::pointers_</a></div><div class="ttdeci">DualPagePointer pointers_[kMaxIntermediateMiniSeparators+1]</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00278">masstree_page_impl.hpp:278</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aec72735812ddc62ef4290a6fadfab13c"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aec72735812ddc62ef4290a6fadfab13c">foedus::storage::masstree::MasstreeBorderPage::find_key_for_reserve</a></div><div class="ttdeci">FindKeyForReserveResult find_key_for_reserve(SlotIndex from_index, SlotIndex to_index, KeySlice slice, const void *suffix, KeyLength remainder) const __attribute__((always_inline))</div><div class="ttdoc">This is for the case we are looking for either the matching slot or the slot we will modify...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01198">masstree_page_impl.hpp:1198</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a2d0f9a395fbf20a9a70a026d611e2af3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a2d0f9a395fbf20a9a70a026d611e2af3">foedus::storage::masstree::MasstreeIntermediatePage::append_pointer_snapshot</a></div><div class="ttdeci">void append_pointer_snapshot(KeySlice low_fence, SnapshotPagePointer pointer)</div><div class="ttdoc">Appends a new poiner and separator in an existing mini page, used only by snapshot composer...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01496">masstree_page_impl.hpp:1496</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_a60f7685960f2d7c46d31330ab47c8199"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a60f7685960f2d7c46d31330ab47c8199">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::MiniPage</a></div><div class="ttdeci">MiniPage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a477537aab66e512a826f74d570397f41"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a477537aab66e512a826f74d570397f41">foedus::storage::masstree::MasstreeBorderPage::available_space</a></div><div class="ttdeci">DataOffset available_space() const </div><div class="ttdoc">Returns usable data space in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00660">masstree_page_impl.hpp:660</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_a99e67179a5576a52a4710c700ac309f4"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">foedus::storage::DualPagePointer::volatile_pointer_</a></div><div class="ttdeci">VolatilePagePointer volatile_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00308">storage_id.hpp:308</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a2b63daa9a7f39c8c85bf2d43f4c18d78"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a2b63daa9a7f39c8c85bf2d43f4c18d78">foedus::storage::PageVersion::is_moved</a></div><div class="ttdeci">bool is_moved() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00139">page.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_abbc02ae73638102469f4d8a0c66fa887"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#abbc02ae73638102469f4d8a0c66fa887">foedus::storage::masstree::MasstreeBorderPage::operator=</a></div><div class="ttdeci">MasstreeBorderPage &amp; operator=(const MasstreeBorderPage &amp;other)=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ae5a4e2ea33eef842e4013c91392e6838"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ae5a4e2ea33eef842e4013c91392e6838">foedus::storage::masstree::MasstreePage::set_high_fence_unsafe</a></div><div class="ttdeci">void set_high_fence_unsafe(KeySlice high_fence) __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this should be used only by composer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00185">masstree_page_impl.hpp:185</a></div></div>
<div class="ttc" id="compiler_8hpp_html"><div class="ttname"><a href="compiler_8hpp.html">compiler.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a4edd339dc36c265a4c78e58235314f57"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a4edd339dc36c265a4c78e58235314f57">foedus::storage::masstree::MasstreePage::get_version_address</a></div><div class="ttdeci">PageVersion * get_version_address() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00165">masstree_page_impl.hpp:165</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a854ff4750eb7aad99b3cff474882ec5c"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a854ff4750eb7aad99b3cff474882ec5c">foedus::storage::masstree::MasstreeIntermediatePage::release_pages_recursive_parallel</a></div><div class="ttdeci">void release_pages_recursive_parallel(Engine *engine)</div><div class="ttdoc">This method is used when we release a large number of volatile pages, most likely when we drop a stor...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00188">masstree_page_impl.cpp:188</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1HighFence_html_ac6f986bd4ebbf6a5b9433fd109d36f39"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ac6f986bd4ebbf6a5b9433fd109d36f39">foedus::storage::masstree::HighFence::supremum_</a></div><div class="ttdeci">bool supremum_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00055">masstree_page_impl.hpp:55</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a7bd38dfe4e87951dc615e1df8f6a4557"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a7bd38dfe4e87951dc615e1df8f6a4557">foedus::storage::PageHeader::masstree_in_layer_level_</a></div><div class="ttdeci">uint8_t masstree_in_layer_level_</div><div class="ttdoc">used only in masstree. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00243">page.hpp:243</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a564d9a348f851874c7a9c1d933e0b2e9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a564d9a348f851874c7a9c1d933e0b2e9">foedus::storage::masstree::MasstreeBorderPage::assert_entries_impl</a></div><div class="ttdeci">void assert_entries_impl() const </div><div class="ttdoc">defined in masstree_page_debug.cpp. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__debug_8cpp_source.html#l00114">masstree_page_debug.cpp:114</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a018b79a89f8e665d8f0bb22023f3dad7"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a018b79a89f8e665d8f0bb22023f3dad7">foedus::storage::PageVersion::set_retired</a></div><div class="ttdeci">void set_retired() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00150">page.hpp:150</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a58cd9c4e7b12226634c1c7e5ca392890"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a58cd9c4e7b12226634c1c7e5ca392890">foedus::storage::PageHeader::key_count_</a></div><div class="ttdeci">uint16_t key_count_</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00219">page.hpp:219</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ad27289df29e50bc9a55c3f3b53f876af"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad27289df29e50bc9a55c3f3b53f876af">foedus::storage::masstree::MasstreeBorderPage::find_key_normalized</a></div><div class="ttdeci">SlotIndex find_key_normalized(SlotIndex from_index, SlotIndex to_index, KeySlice slice) const __attribute__((always_inline))</div><div class="ttdoc">Specialized version for 8 byte native integer search. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01179">masstree_page_impl.hpp:1179</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_ac733ed12643052a2f6dc0e6fd4c882fa"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#ac733ed12643052a2f6dc0e6fd4c882fa">foedus::storage::masstree::MasstreeBorderPage::Slot::original_offset_</a></div><div class="ttdeci">DataOffset original_offset_</div><div class="ttdoc">The value of offset_ as of the creation of this record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00537">masstree_page_impl.hpp:537</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ab8cf45530f89c6c269a8574e648ce0e0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab8cf45530f89c6c269a8574e648ce0e0">foedus::storage::masstree::MasstreeBorderPage::get_next_layer</a></div><div class="ttdeci">const DualPagePointer * get_next_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00753">masstree_page_impl.hpp:753</a></div></div>
<div class="ttc" id="xct__id_8hpp_html"><div class="ttname"><a href="xct__id_8hpp.html">xct_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_aee9abb2322317ee30c7cc9a0fee1c671"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aee9abb2322317ee30c7cc9a0fee1c671">foedus::storage::masstree::MasstreeBorderPage::Slot::Slot</a></div><div class="ttdeci">Slot()=delete</div><div class="ttdoc">only reinterpret_cast </div></div>
<div class="ttc" id="group__MASSTREE_html_ga2ce564bb661a338ce070653e1ca48efa"><div class="ttname"><a href="group__MASSTREE.html#ga2ce564bb661a338ce070653e1ca48efa">foedus::storage::masstree::kMaxIntermediateSeparators</a></div><div class="ttdeci">const uint16_t kMaxIntermediateSeparators</div><div class="ttdoc">Max number of separators stored in the first level of intermediate pages. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00237">masstree_page_impl.hpp:237</a></div></div>
<div class="ttc" id="record_8hpp_html"><div class="ttname"><a href="record_8hpp.html">record.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsWwLock_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsWwLock.html">foedus::xct::McsWwLock</a></div><div class="ttdoc">An exclusive-only (WW) MCS lock data structure. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00324">xct_id.hpp:324</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a30d12825f4f0f5860406f0b6922ac732"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a30d12825f4f0f5860406f0b6922ac732">foedus::storage::PageVersion::lock_</a></div><div class="ttdeci">xct::McsWwLock lock_</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00171">page.hpp:171</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PageReleaseBatch_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1PageReleaseBatch.html">foedus::memory::PageReleaseBatch</a></div><div class="ttdoc">A helper class to return a bunch of pages to individual nodes. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00276">page_pool.hpp:276</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4ca875114e346439b950c703ab3586b5"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4ca875114e346439b950c703ab3586b5">foedus::storage::masstree::MasstreeBorderPage::required_data_space</a></div><div class="ttdeci">static DataOffset required_data_space(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns the byte size of required contiguous space in data_ to insert a new record of the given remai...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00687">masstree_page_impl.hpp:687</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a9c32af21fe03698567d80feab20a353b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a9c32af21fe03698567d80feab20a353b">foedus::storage::masstree::MasstreePage::install_foster_twin</a></div><div class="ttdeci">void install_foster_twin(VolatilePagePointer minor, VolatilePagePointer major, KeySlice foster_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00118">masstree_page_impl.hpp:118</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga629d4b8103bfb83ef9c11b842a4fd398"><div class="ttname"><a href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">foedus::storage::SnapshotPagePointer</a></div><div class="ttdeci">uint64_t SnapshotPagePointer</div><div class="ttdoc">Page ID of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00079">storage_id.hpp:79</a></div></div>
<div class="ttc" id="cacheline_8hpp_html"><div class="ttname"><a href="cacheline_8hpp.html">cacheline.hpp</a></div><div class="ttdoc">Constants and methods related to CPU cacheline and its prefetching. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a30f12f27f5a51903a684133fae01e5a1"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a30f12f27f5a51903a684133fae01e5a1">foedus::storage::masstree::MasstreeBorderPage::Slot::original_physical_record_length_</a></div><div class="ttdeci">DataOffset original_physical_record_length_</div><div class="ttdoc">The value of physical_record_length_ as of the creation of this record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00532">masstree_page_impl.hpp:532</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gae073d9373f83e959a96a36d14caef1a4"><div class="ttname"><a href="group__MASSTREE.html#gae073d9373f83e959a96a36d14caef1a4">foedus::storage::masstree::kInitiallyNextLayer</a></div><div class="ttdeci">const KeyLength kInitiallyNextLayer</div><div class="ttdoc">A special key length value that denotes the record in a border page was initially a next-layer pointe...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00086">masstree_id.hpp:86</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a1bdd725342fd4aa90f983fec651f6956"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956">foedus::storage::PageHeader::get_page_type</a></div><div class="ttdeci">PageType get_page_type() const </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00280">page.hpp:280</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html"><div class="ttname"><a href="classfoedus_1_1Engine.html">foedus::Engine</a></div><div class="ttdoc">Database engine object that holds all resources and provides APIs. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8hpp_source.html#l00109">engine.hpp:109</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a812e899fc428c9223291e6233c4a23da"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a812e899fc428c9223291e6233c4a23da">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">Slot * get_slot(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00637">masstree_page_impl.hpp:637</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1SplitBorder_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html">foedus::storage::masstree::SplitBorder</a></div><div class="ttdoc">A system transaction to split a border page in Master-Tree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__split__impl_8hpp_source.html#l00051">masstree_split_impl.hpp:51</a></div></div>
<div class="ttc" id="assert__nd_8hpp_html"><div class="ttname"><a href="assert__nd_8hpp.html">assert_nd.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab55e48873dcf5700871a035c65bfa588"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab55e48873dcf5700871a035c65bfa588">foedus::storage::masstree::MasstreePage::get_btree_level</a></div><div class="ttdeci">uint8_t get_btree_level() const __attribute__((always_inline))</div><div class="ttdoc">used only in masstree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00146">masstree_page_impl.hpp:146</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html">foedus::storage::masstree::MasstreeIntermediatePointerIterator</a></div><div class="ttdoc">Handy iterator for MasstreeIntermediate. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01047">masstree_page_impl.hpp:1047</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html">foedus::storage::masstree::MasstreeBorderPage::Slot</a></div><div class="ttdoc">Fix-sized slot for each record, which is placed at the end of data region. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00500">masstree_page_impl.hpp:500</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab41ee4ce455995cd703dac3990442081"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab41ee4ce455995cd703dac3990442081">foedus::storage::masstree::MasstreePage::initialize_snapshot_common</a></div><div class="ttdeci">void initialize_snapshot_common(StorageId storage_id, SnapshotPagePointer page_id, PageType page_type, uint8_t layer, uint8_t level, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00068">masstree_page_impl.cpp:68</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a8b7973f3eb0f4f3c6894c278c18d7145"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a8b7973f3eb0f4f3c6894c278c18d7145">foedus::storage::masstree::MasstreeBorderPage::get_slot</a></div><div class="ttdeci">const Slot * get_slot(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00631">masstree_page_impl.hpp:631</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_af1b2fd480af916504df50c01faa3e597"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#af1b2fd480af916504df50c01faa3e597">foedus::storage::DualPagePointer::snapshot_pointer_</a></div><div class="ttdeci">SnapshotPagePointer snapshot_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00307">storage_id.hpp:307</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a36324bf7f670205988934070f3f162c8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a36324bf7f670205988934070f3f162c8">foedus::storage::masstree::MasstreePage::increment_key_count</a></div><div class="ttdeci">void increment_key_count() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00150">masstree_page_impl.hpp:150</a></div></div>
<div class="ttc" id="group__MASSTREE_html_a0165decace03833448779f10ab9e85fd"><div class="ttname"><a href="group__MASSTREE.html#a0165decace03833448779f10ab9e85fd">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion::word</a></div><div class="ttdeci">uint64_t word</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00491">masstree_page_impl.hpp:491</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga78a96e3a0ec4256513d9d2e9c94f37fd"><div class="ttname"><a href="group__MASSTREE.html#ga78a96e3a0ec4256513d9d2e9c94f37fd">foedus::storage::masstree::kBorderPageMaxSlots</a></div><div class="ttdeci">const SlotIndex kBorderPageMaxSlots</div><div class="ttdoc">Maximum number of slots in one MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00163">masstree_id.hpp:163</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html">foedus::storage::PageHeader</a></div><div class="ttdoc">Just a marker to denote that a memory region represents a data page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00184">page.hpp:184</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html">foedus::storage::masstree::SplitIntermediate</a></div><div class="ttdoc">A system transaction to split an intermediate page in Master-Tree. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__split__impl_8hpp_source.html#l00158">masstree_split_impl.hpp:158</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_aa3d33ca4fe97b735ce59594993a1dd94"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94">foedus::xct::XctId::is_next_layer</a></div><div class="ttdeci">bool is_next_layer() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01042">xct_id.hpp:1042</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga91326b566ce7355c1ee6fd3848af01cd"><div class="ttname"><a href="group__MASSTREE.html#ga91326b566ce7355c1ee6fd3848af01cd">foedus::storage::masstree::kBorderPageDataPartSize</a></div><div class="ttdeci">const uint32_t kBorderPageDataPartSize</div><div class="ttdoc">Byte size of the record data part (data_) in MasstreeBorderPage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00171">masstree_id.hpp:171</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a82df0b3921d7c863275baf4f9c59959c"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a82df0b3921d7c863275baf4f9c59959c">foedus::storage::extract_snapshot_id_from_snapshot_pointer</a></div><div class="ttdeci">uint16_t extract_snapshot_id_from_snapshot_pointer(SnapshotPagePointer pointer)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00098">storage_id.hpp:98</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga1dee903a4fd4c4bcaadb95833c4b9a40"><div class="ttname"><a href="group__MASSTREE.html#ga1dee903a4fd4c4bcaadb95833c4b9a40">foedus::storage::masstree::kBorderPageAdditionalHeaderSize</a></div><div class="ttdeci">const uint32_t kBorderPageAdditionalHeaderSize</div><div class="ttdoc">Misc header attributes specific to MasstreeBorderPage placed after the common header. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00150">masstree_id.hpp:150</a></div></div>
<div class="ttc" id="group__MASSTREE_html_structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart"><div class="ttname"><a href="group__MASSTREE.html#structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthPart">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart</a></div><div class="ttdoc">A piece of Slot object that must be read/written in one-shot, meaning no one reads half-written value...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00466">masstree_page_impl.hpp:466</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a44c12d47d4b478bac2076df4760fc990"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">foedus::storage::PageHeader::page_version_</a></div><div class="ttdeci">PageVersion page_version_</div><div class="ttdoc">Used in several storage types as concurrency control mechanism for the page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00272">page.hpp:272</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0b54c43dec6f8ba15472a25760a3ed07"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0b54c43dec6f8ba15472a25760a3ed07">foedus::storage::masstree::MasstreePage::get_layer</a></div><div class="ttdeci">uint8_t get_layer() const __attribute__((always_inline))</div><div class="ttdoc">Layer-0 stores the first 8 byte slice, Layer-1 next 8 byte... </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00144">masstree_page_impl.hpp:144</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a2084911eccaf9e483ce8875f8cccd98c"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2084911eccaf9e483ce8875f8cccd98c">foedus::storage::masstree::MasstreePage::get_lock_address</a></div><div class="ttdeci">xct::McsWwLock * get_lock_address() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00166">masstree_page_impl.hpp:166</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a6008b5f8531e6ee524d60cf86bc20148"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a6008b5f8531e6ee524d60cf86bc20148">foedus::xct::XctId::is_deleted</a></div><div class="ttdeci">bool is_deleted() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01040">xct_id.hpp:1040</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_acd0b166a127ed5fbadecd838f8e32be5"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#acd0b166a127ed5fbadecd838f8e32be5">foedus::storage::masstree::MasstreeIntermediatePointerIterator::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01067">masstree_page_impl.hpp:1067</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ad5263d631cad896c0494597018d72a8f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ad5263d631cad896c0494597018d72a8f">foedus::storage::masstree::MasstreePage::set_retired</a></div><div class="ttdeci">void set_retired() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00172">masstree_page_impl.hpp:172</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult_html_af2a6c43d81102f71c916e0f80fe45e17"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1FindKeyForReserveResult.html#af2a6c43d81102f71c916e0f80fe45e17">foedus::storage::masstree::MasstreeBorderPage::FindKeyForReserveResult::index_</a></div><div class="ttdeci">SlotIndex index_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00596">masstree_page_impl.hpp:596</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_abb6557473edd899373ed9399b455be20"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abb6557473edd899373ed9399b455be20">foedus::storage::masstree::MasstreePage::get_high_fence</a></div><div class="ttdeci">KeySlice get_high_fence() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00099">masstree_page_impl.hpp:99</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a0bed0e3b1f6782710eb1e6891b850de7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bed0e3b1f6782710eb1e6891b850de7">foedus::storage::masstree::MasstreeBorderPage::ltgt_key</a></div><div class="ttdeci">int ltgt_key(SlotIndex index, const char *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">compare the key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01631">masstree_page_impl.hpp:1631</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a38e3cb12f6db6351ac0fc89369868fb9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a38e3cb12f6db6351ac0fc89369868fb9">foedus::storage::masstree::MasstreePage::set_foster_twin</a></div><div class="ttdeci">void set_foster_twin(VolatilePagePointer minor, VolatilePagePointer major)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00114">masstree_page_impl.hpp:114</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_aeeeaee9ae59e1abddc18c8d78dbfc068"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aeeeaee9ae59e1abddc18c8d78dbfc068">foedus::storage::masstree::MasstreeIntermediatePage::set_separator</a></div><div class="ttdeci">void set_separator(uint8_t minipage_index, KeySlice new_separator)</div><div class="ttdoc">Place a new separator for a new minipage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00397">masstree_page_impl.hpp:397</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a484b8322fccade3d1f77ac2abaa3a825"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a484b8322fccade3d1f77ac2abaa3a825">foedus::storage::masstree::MasstreeBorderPage::assert_entries</a></div><div class="ttdeci">void assert_entries() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00988">masstree_page_impl.hpp:988</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a73f1aa3c62852944d653777574af1602"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a73f1aa3c62852944d653777574af1602">foedus::storage::masstree::MasstreePage::within_foster_minor</a></div><div class="ttdeci">bool within_foster_minor(KeySlice slice) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00129">masstree_page_impl.hpp:129</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ae8535da84525f0147643f5f827d83844"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ae8535da84525f0147643f5f827d83844">foedus::storage::masstree::MasstreeBorderPage::get_next_layer_from_offsets</a></div><div class="ttdeci">DualPagePointer * get_next_layer_from_offsets(DataOffset record_offset, KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00782">masstree_page_impl.hpp:782</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_a8d47494ef770c0d29764d3f711d97f54"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#a8d47494ef770c0d29764d3f711d97f54">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::separators_</a></div><div class="ttdeci">KeySlice separators_[kMaxIntermediateMiniSeparators]</div><div class="ttdoc">Same semantics as separators_ in enclosing class. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00276">masstree_page_impl.hpp:276</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ad8c6fe038e98df5df0f04ec2b2e91a1a"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ad8c6fe038e98df5df0f04ec2b2e91a1a">foedus::storage::masstree::MasstreeBorderPage::find_key_for_snapshot</a></div><div class="ttdeci">FindKeyForReserveResult find_key_for_snapshot(KeySlice slice, const void *suffix, KeyLength remainder) const __attribute__((always_inline))</div><div class="ttdoc">This one is used for snapshot pages. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01256">masstree_page_impl.hpp:1256</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1HighFence_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html">foedus::storage::masstree::HighFence</a></div><div class="ttdoc">Used only for debugging as this is not space efficient. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00052">masstree_page_impl.hpp:52</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a9e24c3f7398235571f6f0b0e013f1f23"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a9e24c3f7398235571f6f0b0e013f1f23">foedus::storage::masstree::MasstreeBorderPage::initialize_layer_root</a></div><div class="ttdeci">void initialize_layer_root(const MasstreeBorderPage *copy_from, SlotIndex copy_index)</div><div class="ttdoc">Copy the initial record that will be the only record for a new root page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00298">masstree_page_impl.cpp:298</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a14aa45c7514f2a2d83dc7a138c24ecd0"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a14aa45c7514f2a2d83dc7a138c24ecd0">foedus::storage::masstree::MasstreeBorderPage::to_slot_index</a></div><div class="ttdeci">SlotIndex to_slot_index(const Slot *slot) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00649">masstree_page_impl.hpp:649</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga453ffcac369fa68b5eb5d489e6cdca4f"><div class="ttname"><a href="group__MASSTREE.html#ga453ffcac369fa68b5eb5d489e6cdca4f">foedus::storage::masstree::kMaxPayloadLength</a></div><div class="ttdeci">const PayloadLength kMaxPayloadLength</div><div class="ttdoc">Max length of a payload. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00098">masstree_id.hpp:98</a></div></div>
<div class="ttc" id="memory_2fwd_8hpp_html"><div class="ttname"><a href="memory_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in memory package. </div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_abfe53cdc69964e52901556b1e8d9de9e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abfe53cdc69964e52901556b1e8d9de9e">foedus::storage::masstree::MasstreePage::has_foster_child</a></div><div class="ttdeci">bool has_foster_child() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00139">masstree_page_impl.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a30f922c414bf3a2faaf7e879b2277f0b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a30f922c414bf3a2faaf7e879b2277f0b">foedus::storage::masstree::MasstreePage::get_low_fence</a></div><div class="ttdeci">KeySlice get_low_fence() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00098">masstree_page_impl.hpp:98</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a5ab741ff207d274efcb4a5664880600f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a5ab741ff207d274efcb4a5664880600f">foedus::storage::masstree::MasstreeBorderPage::initialize_volatile_page</a></div><div class="ttdeci">void initialize_volatile_page(StorageId storage_id, VolatilePagePointer page_id, uint8_t layer, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00128">masstree_page_impl.cpp:128</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a100c23d40bf8e14fe08f59599c81cd26"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a100c23d40bf8e14fe08f59599c81cd26">foedus::storage::PageVersion::set_moved</a></div><div class="ttdeci">void set_moved() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00146">page.hpp:146</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a2e673300211d10b2fe8df02108073ad2"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a2e673300211d10b2fe8df02108073ad2">foedus::storage::masstree::MasstreeIntermediatePage::operator=</a></div><div class="ttdeci">MasstreeIntermediatePage &amp; operator=(const MasstreeIntermediatePage &amp;other)=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6883c1c1e9ef2fb0e6a40d7863f2d85b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6883c1c1e9ef2fb0e6a40d7863f2d85b">foedus::storage::masstree::MasstreeBorderPage::find_key</a></div><div class="ttdeci">SlotIndex find_key(KeySlice slice, const void *suffix, KeyLength remainder) const __attribute__((always_inline))</div><div class="ttdoc">Navigates a searching key-slice to one of the record in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01120">masstree_page_impl.hpp:1120</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a32d92c1f8e858d5cd407be8846f450a3"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a32d92c1f8e858d5cd407be8846f450a3">foedus::storage::masstree::MasstreeBorderPage::MasstreeBorderPage</a></div><div class="ttdeci">MasstreeBorderPage()=delete</div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1McsRwLock_html_a522c5b2702bad890293b39e634f2c3c4"><div class="ttname"><a href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4">foedus::xct::McsRwLock::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00803">xct_id.hpp:803</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a027ba66a84d7617e1f954edb3c3c4f56"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a027ba66a84d7617e1f954edb3c3c4f56">foedus::storage::masstree::MasstreeBorderPage::can_accomodate_snapshot</a></div><div class="ttdeci">bool can_accomodate_snapshot(KeyLength remainder_length, PayloadLength payload_count) const __attribute__((always_inline))</div><div class="ttdoc">Slightly different from can_accomodate() as follows: </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01585">masstree_page_impl.hpp:1585</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a49c67f561e5748dbaf947cc22325a8a5"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a49c67f561e5748dbaf947cc22325a8a5">foedus::storage::masstree::MasstreeBorderPage::try_expand_record_in_page_physical</a></div><div class="ttdeci">bool try_expand_record_in_page_physical(PayloadLength payload_count, SlotIndex record_index)</div><div class="ttdoc">A physical-only method to expand a record within this page without any logical change. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00360">masstree_page_impl.cpp:360</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a44cc8d18dc9077ae2310667e88ed5b7c"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a44cc8d18dc9077ae2310667e88ed5b7c">foedus::storage::masstree::MasstreePage::get_foster_fence</a></div><div class="ttdeci">KeySlice get_foster_fence() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00109">masstree_page_impl.hpp:109</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_adf33025a5de02efa6fc49d868ca5c43f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#adf33025a5de02efa6fc49d868ca5c43f">foedus::storage::masstree::MasstreeIntermediatePage::extract_separators_volatile</a></div><div class="ttdeci">void extract_separators_volatile(uint8_t index, uint8_t index_mini, KeySlice *separator_low, KeySlice *separator_high) const </div><div class="ttdoc">Retrieves separators defining the index, used for volatile page, which requires appropriate locks or ...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00379">masstree_page_impl.hpp:379</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_a8988fe635186bff06191f3eb87447bc8"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a8988fe635186bff06191f3eb87447bc8">foedus::storage::masstree::MasstreeIntermediatePointerIterator::get_pointer</a></div><div class="ttdeci">const DualPagePointer &amp; get_pointer() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01093">masstree_page_impl.hpp:1093</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aa0e32e13485c83c100d1153e23e96f88"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aa0e32e13485c83c100d1153e23e96f88">foedus::storage::masstree::MasstreePage::is_high_fence_supremum</a></div><div class="ttdeci">bool is_high_fence_supremum() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00100">masstree_page_impl.hpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ab905ff02e9f747f00d44e72ffc16f546"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ab905ff02e9f747f00d44e72ffc16f546">foedus::storage::masstree::MasstreeBorderPage::track_moved_record</a></div><div class="ttdeci">xct::TrackMovedRecordResult track_moved_record(Engine *engine, xct::RwLockableXctId *old_address, xct::WriteXctAccess *write_set)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00534">masstree_page_impl.cpp:534</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a46dc7e7ac5fab5c66bf0b519e2cebc70"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a46dc7e7ac5fab5c66bf0b519e2cebc70">foedus::storage::masstree::MasstreeIntermediatePage::append_minipage_snapshot</a></div><div class="ttdeci">void append_minipage_snapshot(KeySlice low_fence, SnapshotPagePointer pointer)</div><div class="ttdoc">Appends a new separator and the initial pointer in new mini page, used only by snapshot composer...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01522">masstree_page_impl.hpp:1522</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a1429b13cd5efb94c7b4735bf84087818"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a1429b13cd5efb94c7b4735bf84087818">foedus::storage::masstree::MasstreeBorderPage::track_moved_record_next_layer</a></div><div class="ttdeci">xct::TrackMovedRecordResult track_moved_record_next_layer(Engine *engine, xct::RwLockableXctId *old_address)</div><div class="ttdoc">This one further tracks it to next layer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00609">masstree_page_impl.cpp:609</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1HighFence_html_ab0ee01f611370ba5c58efe9941731218"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1HighFence.html#ab0ee01f611370ba5c58efe9941731218">foedus::storage::masstree::HighFence::slice_</a></div><div class="ttdeci">KeySlice slice_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00054">masstree_page_impl.hpp:54</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a23e978dad8a0a78a8b4fa49181d7352b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a23e978dad8a0a78a8b4fa49181d7352b">foedus::storage::masstree::MasstreeBorderPage::will_conflict</a></div><div class="ttdeci">bool will_conflict(SlotIndex index, const char *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">Returns whether inserting the key will cause creation of a new next layer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01690">masstree_page_impl.hpp:1690</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_abbc553596fb9e1dc115e3aaccf3352f9"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#abbc553596fb9e1dc115e3aaccf3352f9">foedus::storage::masstree::MasstreePage::get_version_address</a></div><div class="ttdeci">const PageVersion * get_version_address() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00164">masstree_page_impl.hpp:164</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_ad9d25c0d8211f93db82d8cefe9d6ead7"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7">foedus::storage::VolatilePagePointer::is_null</a></div><div class="ttdeci">bool is_null() const </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00210">storage_id.hpp:210</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_aec6ae8c8582135c9368278ddfd18c7af"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#aec6ae8c8582135c9368278ddfd18c7af">foedus::storage::masstree::MasstreeBorderPage::Slot::remainder_length_</a></div><div class="ttdeci">KeyLength remainder_length_</div><div class="ttdoc">Followings are immutable. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00527">masstree_page_impl.hpp:527</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_ab25cb34a8304c744bf309cc02b515e72"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ab25cb34a8304c744bf309cc02b515e72">foedus::storage::masstree::MasstreeIntermediatePage::initialize_volatile_page</a></div><div class="ttdeci">void initialize_volatile_page(StorageId storage_id, VolatilePagePointer page_id, uint8_t layer, uint8_t level, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00088">masstree_page_impl.cpp:88</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a8f8883172f7ee3c48a1609df044c3964"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a8f8883172f7ee3c48a1609df044c3964">foedus::storage::masstree::MasstreePage::get_volatile_page_id</a></div><div class="ttdeci">VolatilePagePointer get_volatile_page_id() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00075">masstree_page_impl.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aba8deac13594e4b208f4905c7d894bf7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aba8deac13594e4b208f4905c7d894bf7">foedus::storage::masstree::MasstreeBorderPage::get_record_payload_from_offsets</a></div><div class="ttdeci">char * get_record_payload_from_offsets(DataOffset record_offset, KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00775">masstree_page_impl.hpp:775</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00265">masstree_page_impl.hpp:265</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_ab5ab7bbce35893143d2aac437e526d0e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#ab5ab7bbce35893143d2aac437e526d0e">foedus::storage::masstree::MasstreePage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00073">masstree_page_impl.hpp:73</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a135fc7a9cc57bedf582df2d3cf0f7f84"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a135fc7a9cc57bedf582df2d3cf0f7f84">foedus::storage::masstree::MasstreePage::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const MasstreePage &amp;v)</div><div class="ttdoc">defined in masstree_page_debug.cpp. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__debug_8cpp_source.html#l00030">masstree_page_debug.cpp:30</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a2b0cd6e79e07f9b2241d0123ffe00ad2"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a2b0cd6e79e07f9b2241d0123ffe00ad2">foedus::storage::masstree::MasstreePage::MasstreePage</a></div><div class="ttdeci">MasstreePage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a357f4256ff48e1c5cefbee98d0a2dd2d"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a357f4256ff48e1c5cefbee98d0a2dd2d">foedus::storage::masstree::MasstreeBorderPage::get_record_payload</a></div><div class="ttdeci">char * get_record_payload(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00740">masstree_page_impl.hpp:740</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_aabaf06ccbf57e3c511b1c34f07efd780"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#aabaf06ccbf57e3c511b1c34f07efd780">foedus::storage::masstree::MasstreePage::is_low_fence_infimum</a></div><div class="ttdeci">bool is_low_fence_infimum() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00103">masstree_page_impl.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a09552cf1a9e8f061f9bd6cbdb9268688"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a09552cf1a9e8f061f9bd6cbdb9268688">foedus::storage::masstree::MasstreeIntermediatePage::release_pages_recursive</a></div><div class="ttdeci">void release_pages_recursive(const memory::GlobalVolatilePageResolver &amp;page_resolver, memory::PageReleaseBatch *batch)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00226">masstree_page_impl.cpp:226</a></div></div>
<div class="ttc" id="group__MASSTREE_html_ga6b0f46dbd051897bd6dae9bbd3eb446e"><div class="ttname"><a href="group__MASSTREE.html#ga6b0f46dbd051897bd6dae9bbd3eb446e">foedus::storage::masstree::kMaxIntermediatePointers</a></div><div class="ttdeci">const uint32_t kMaxIntermediatePointers</div><div class="ttdoc">Max number of pointers (if completely filled) stored in an intermediate pages. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00251">masstree_page_impl.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a68797699a249ca9320a08038d1cdabbc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a68797699a249ca9320a08038d1cdabbc">foedus::storage::masstree::MasstreeBorderPage::to_record_length</a></div><div class="ttdeci">static DataOffset to_record_length(KeyLength remainder_length, PayloadLength payload_length)</div><div class="ttdoc">returns minimal physical_record_length_ for the given remainder/payload length. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00674">masstree_page_impl.hpp:674</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a7b5848c6b2be269bf90d1d5e41e66a33"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7b5848c6b2be269bf90d1d5e41e66a33">foedus::storage::masstree::MasstreeIntermediatePage::extract_separators_common</a></div><div class="ttdeci">void extract_separators_common(uint8_t index, uint8_t index_mini, KeySlice *separator_low, KeySlice *separator_high) const </div><div class="ttdoc">Retrieves separators defining the index, used only by snapshot composer (or when no race) ...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01539">masstree_page_impl.hpp:1539</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_a561e67a2a0a381b64b4644d6d516a872"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#a561e67a2a0a381b64b4644d6d516a872">foedus::storage::masstree::MasstreeIntermediatePointerIterator::page_</a></div><div class="ttdeci">const MasstreeIntermediatePage *const page_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01099">masstree_page_impl.hpp:1099</a></div></div>
<div class="ttc" id="assorted__func_8hpp_html_a89bbe410ea9cf2e51d59f618158562cb"><div class="ttname"><a href="assorted__func_8hpp.html#a89bbe410ea9cf2e51d59f618158562cb">STATIC_SIZE_CHECK</a></div><div class="ttdeci">#define STATIC_SIZE_CHECK(desired, actual)</div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00264">assorted_func.hpp:264</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a6bcb18d206fa77ccf24ef6097e89f1cc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a6bcb18d206fa77ccf24ef6097e89f1cc">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">const char * get_record_from_offset(DataOffset record_offset) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00763">masstree_page_impl.hpp:763</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a475fb985aa078dff7c627ce18538b52e"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a475fb985aa078dff7c627ce18538b52e">foedus::storage::masstree::MasstreeBorderPage::get_suffix_length_aligned</a></div><div class="ttdeci">KeyLength get_suffix_length_aligned(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00827">masstree_page_impl.hpp:827</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">foedus::memory::GlobalVolatilePageResolver</a></div><div class="ttdoc">Resolves an offset in a volatile page pool to an actual pointer and vice versa. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00092">page_resolver.hpp:92</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a407bbd604662534963c7fc8f08acc898"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a407bbd604662534963c7fc8f08acc898">foedus::storage::PageHeader::set_key_count</a></div><div class="ttdeci">void set_key_count(uint8_t key_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00319">page.hpp:319</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba23ef27cc0a436fe010a22a7374e8737b"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba23ef27cc0a436fe010a22a7374e8737b">foedus::storage::kMasstreeIntermediatePageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00049">page.hpp:49</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a7bfcd277a96bcd1e9008459abe1ec40d"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a7bfcd277a96bcd1e9008459abe1ec40d">foedus::storage::masstree::kSupremumSlice</a></div><div class="ttdeci">const KeySlice kSupremumSlice</div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00137">masstree_id.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a0cc9a759ee4e0b4c1041d64ae274a6dc"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0cc9a759ee4e0b4c1041d64ae274a6dc">foedus::storage::masstree::MasstreeBorderPage::get_record_payload</a></div><div class="ttdeci">const char * get_record_payload(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00745">masstree_page_impl.hpp:745</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a0bef5c88a00a3574b489d0259c5b49ad"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a0bef5c88a00a3574b489d0259c5b49ad">foedus::storage::masstree::MasstreeBorderPage::get_owner_id</a></div><div class="ttdeci">xct::RwLockableXctId * get_owner_id(SlotIndex index) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00813">masstree_page_impl.hpp:813</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html">foedus::storage::masstree::MasstreeIntermediatePage</a></div><div class="ttdoc">Represents one intermediate page in Masstree Storage. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00262">masstree_page_impl.hpp:262</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_aa8c59b8e2944d4a6a68d5fed840a7a29"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">foedus::storage::VolatilePagePointer::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00211">storage_id.hpp:211</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1masstree_html_a575ba44804b98a334fc66eedf4b18d70"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1masstree.html#a575ba44804b98a334fc66eedf4b18d70">foedus::storage::masstree::calculate_suffix_length</a></div><div class="ttdeci">KeyLength calculate_suffix_length(KeyLength remainder_length) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01105">masstree_page_impl.hpp:1105</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a7216fe075ea3db89bbba06f5a156ce81"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a7216fe075ea3db89bbba06f5a156ce81">foedus::storage::masstree::MasstreeIntermediatePage::verify_separators</a></div><div class="ttdeci">void verify_separators() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00475">masstree_page_impl.cpp:475</a></div></div>
<div class="ttc" id="group__MASSTREE_html_unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion"><div class="ttname"><a href="group__MASSTREE.html#unionfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1SlotLengthUnion">foedus::storage::masstree::MasstreeBorderPage::SlotLengthUnion</a></div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00490">masstree_page_impl.hpp:490</a></div></div>
<div class="ttc" id="storage_2masstree_2fwd_8hpp_html"><div class="ttname"><a href="storage_2masstree_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in masstree storage package. </div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a8960e682ff51f3ca77aeee1e4bfee9d7"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a8960e682ff51f3ca77aeee1e4bfee9d7">foedus::storage::masstree::MasstreeIntermediatePage::is_full_snapshot</a></div><div class="ttdeci">bool is_full_snapshot() const </div><div class="ttdoc">Whether this page is full of poiters, used only by snapshot composer (or when no race) ...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01487">masstree_page_impl.hpp:1487</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a6ea09e3e65a44845fb3ab5be08e84553"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a6ea09e3e65a44845fb3ab5be08e84553">foedus::storage::masstree::MasstreePage::within_foster_major</a></div><div class="ttdeci">bool within_foster_major(KeySlice slice) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00134">masstree_page_impl.hpp:134</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a301cba19b01cf82d7b576a04180b56e2"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2">foedus::storage::PageVersion::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00138">page.hpp:138</a></div></div>
<div class="ttc" id="group__MASSTREE_html_gabdb6a706258be601e621e58653bf528e"><div class="ttname"><a href="group__MASSTREE.html#gabdb6a706258be601e621e58653bf528e">foedus::storage::masstree::slice_layer</a></div><div class="ttdeci">KeySlice slice_layer(const void *be_bytes, KeyLength key_length, Layer current_layer)</div><div class="ttdoc">Extract a part of a big-endian byte array of given length as KeySlice. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__id_8hpp_source.html#l00279">masstree_id.hpp:279</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_ac16304e6fa2ee997cc6c897cb5792f47"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#ac16304e6fa2ee997cc6c897cb5792f47">foedus::storage::masstree::MasstreeBorderPage::equal_key</a></div><div class="ttdeci">bool equal_key(SlotIndex index, const void *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">let&#39;s gradually migrate from compare_key() to this. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01624">masstree_page_impl.hpp:1624</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a2be77538e13226dbc44134039be0dc73"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a2be77538e13226dbc44134039be0dc73">foedus::storage::masstree::MasstreeBorderPage::reserve_initially_next_layer</a></div><div class="ttdeci">void reserve_initially_next_layer(SlotIndex index, xct::XctId initial_owner_id, KeySlice slice, const DualPagePointer &amp;pointer)</div><div class="ttdoc">For creating a record that is initially a next-layer. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01375">masstree_page_impl.hpp:1375</a></div></div>
<div class="ttc" id="thread_2fwd_8hpp_html"><div class="ttname"><a href="thread_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in thread package. </div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_aba125783806b2c580e71cd7b6cff9ce2"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#aba125783806b2c580e71cd7b6cff9ce2">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::operator=</a></div><div class="ttdeci">MiniPage &amp; operator=(const MiniPage &amp;other)=delete</div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_a66cbce3b9c68797f9e070b950cc581c1"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#a66cbce3b9c68797f9e070b950cc581c1">foedus::storage::masstree::MasstreeBorderPage::Slot::tid_</a></div><div class="ttdeci">xct::RwLockableXctId tid_</div><div class="ttdoc">TID of the record. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00504">masstree_page_impl.hpp:504</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_aecb37efdc8f717bb2b978861d8d1a772"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#aecb37efdc8f717bb2b978861d8d1a772">foedus::storage::masstree::MasstreeBorderPage::will_contain_next_layer</a></div><div class="ttdeci">bool will_contain_next_layer(SlotIndex index, const char *be_key, KeyLength key_length) const __attribute__((always_inline))</div><div class="ttdoc">Returns whether the record is a next-layer pointer that would contain the key. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01714">masstree_page_impl.hpp:1714</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot_html_adecf558d81c86d2c96a701b6305a68b0"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_1_1Slot.html#adecf558d81c86d2c96a701b6305a68b0">foedus::storage::masstree::MasstreeBorderPage::Slot::get_aligned_suffix_length</a></div><div class="ttdeci">KeyLength get_aligned_suffix_length() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00546">masstree_page_impl.hpp:546</a></div></div>
<div class="ttc" id="group__COMPILER_html_gaa1dec568e79152c892dcf63f445cbd7a"><div class="ttname"><a href="group__COMPILER.html#gaa1dec568e79152c892dcf63f445cbd7a">ALWAYS_INLINE</a></div><div class="ttdeci">#define ALWAYS_INLINE</div><div class="ttdoc">A function suffix to hint that the function should always be inlined. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00106">compiler.hpp:106</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1RwLockableXctId_html_ac49bd73652693a170f3755c1daf96736"><div class="ttname"><a href="structfoedus_1_1xct_1_1RwLockableXctId.html#ac49bd73652693a170f3755c1daf96736">foedus::xct::RwLockableXctId::is_next_layer</a></div><div class="ttdeci">bool is_next_layer() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01143">xct_id.hpp:1143</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a168db13e03be3f699e4e409ceea88d76"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a168db13e03be3f699e4e409ceea88d76">foedus::storage::masstree::MasstreePage::header_</a></div><div class="ttdeci">PageHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00194">masstree_page_impl.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a0f8830e2b301b1bdd3f2e16d9b047d79"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a0f8830e2b301b1bdd3f2e16d9b047d79">foedus::storage::masstree::MasstreePage::within_fences</a></div><div class="ttdeci">bool within_fences(KeySlice slice) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00126">masstree_page_impl.hpp:126</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a4fb7f1ed0b7d15fc2f06d298e8a0260f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a4fb7f1ed0b7d15fc2f06d298e8a0260f">foedus::storage::masstree::MasstreeBorderPage::replace_next_layer_snapshot</a></div><div class="ttdeci">void replace_next_layer_snapshot(SnapshotPagePointer pointer)</div><div class="ttdoc">Same as above, except this is used to transform an existing record at end to a next layer pointer...</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01447">masstree_page_impl.hpp:1447</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_a04113a783c1b0022d35e7e8d7eae02a8"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#a04113a783c1b0022d35e7e8d7eae02a8">foedus::storage::masstree::MasstreeBorderPage::does_point_to_layer</a></div><div class="ttdeci">bool does_point_to_layer(SlotIndex index) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00796">masstree_page_impl.hpp:796</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_aa83c386108c95db96c325ce7061dd618"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa83c386108c95db96c325ce7061dd618">foedus::storage::masstree::MasstreeIntermediatePage::MasstreeIntermediatePage</a></div><div class="ttdeci">MasstreeIntermediatePage()=delete</div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3fb331a72c86d72deb59c415e6b9b79c"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3fb331a72c86d72deb59c415e6b9b79c">foedus::storage::masstree::MasstreePage::set_key_count</a></div><div class="ttdeci">void set_key_count(SlotIndex count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00149">masstree_page_impl.hpp:149</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_ad5ffa0667ef80499cbffb041dbb57b5f"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#ad5ffa0667ef80499cbffb041dbb57b5f">foedus::storage::masstree::MasstreeIntermediatePage::find_minipage</a></div><div class="ttdeci">uint8_t find_minipage(KeySlice slice) const __attribute__((always_inline))</div><div class="ttdoc">Navigates a searching key-slice to one of the mini pages in this page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00312">masstree_page_impl.hpp:312</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator_html_aceace47cb99cf71122b066ba5c7b9e06"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePointerIterator.html#aceace47cb99cf71122b066ba5c7b9e06">foedus::storage::masstree::MasstreeIntermediatePointerIterator::get_high_key</a></div><div class="ttdeci">KeySlice get_high_key() const </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l01082">masstree_page_impl.hpp:1082</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_aa64c68858f06b2665809772e26e385c1"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#aa64c68858f06b2665809772e26e385c1">foedus::storage::masstree::MasstreeIntermediatePage::extract_separators_snapshot</a></div><div class="ttdeci">void extract_separators_snapshot(uint8_t index, uint8_t index_mini, KeySlice *separator_low, KeySlice *separator_high) const </div><div class="ttdoc">Retrieves separators defining the index, used only by snapshot composer, thus no race. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00367">masstree_page_impl.hpp:367</a></div></div>
<div class="ttc" id="group__MASSTREE_html_a92e63ea650be68ac58e709d195c36ad4"><div class="ttname"><a href="group__MASSTREE.html#a92e63ea650be68ac58e709d195c36ad4">foedus::storage::masstree::MasstreeBorderPage::SlotLengthPart::offset_</a></div><div class="ttdeci">DataOffset offset_</div><div class="ttdoc">Byte offset in data_ where this record starts. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00472">masstree_page_impl.hpp:472</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_ad8666438d88f0d1c34b8c22d53b20441"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#ad8666438d88f0d1c34b8c22d53b20441">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::find_pointer</a></div><div class="ttdeci">uint8_t find_pointer(KeySlice slice) const __attribute__((always_inline))</div><div class="ttdoc">Navigates a searching key-slice to one of pointers in this mini-page. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00287">masstree_page_impl.hpp:287</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_html_a558cb535a501ee9d8ed391a45c04c705"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage.html#a558cb535a501ee9d8ed391a45c04c705">foedus::storage::masstree::MasstreeIntermediatePage::initialize_snapshot_page</a></div><div class="ttdeci">void initialize_snapshot_page(StorageId storage_id, SnapshotPagePointer page_id, uint8_t layer, uint8_t level, KeySlice low_fence, KeySlice high_fence)</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8cpp_source.html#l00108">masstree_page_impl.cpp:108</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage_html_acad0cd3a9c7bffd3ea0a478a21e5db1b"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreeBorderPage.html#acad0cd3a9c7bffd3ea0a478a21e5db1b">foedus::storage::masstree::MasstreeBorderPage::get_record_from_offset</a></div><div class="ttdeci">char * get_record_from_offset(DataOffset record_offset) __attribute__((always_inline))</div><div class="ttdoc">Offset versions. </div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00758">masstree_page_impl.hpp:758</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage_html_accb959e88f7a96ef7d018739d5ebbba0"><div class="ttname"><a href="structfoedus_1_1storage_1_1masstree_1_1MasstreeIntermediatePage_1_1MiniPage.html#accb959e88f7a96ef7d018739d5ebbba0">foedus::storage::masstree::MasstreeIntermediatePage::MiniPage::reserved_</a></div><div class="ttdeci">uint8_t reserved_[7]</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00272">masstree_page_impl.hpp:272</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_abe3bc94e31351c2fa965df411af532a1"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#abe3bc94e31351c2fa965df411af532a1">foedus::xct::XctId::set_next_layer</a></div><div class="ttdeci">void set_next_layer() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01030">xct_id.hpp:1030</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1masstree_1_1MasstreePage_html_a3b27750b62fcc70c1677b0fceac983cf"><div class="ttname"><a href="classfoedus_1_1storage_1_1masstree_1_1MasstreePage.html#a3b27750b62fcc70c1677b0fceac983cf">foedus::storage::masstree::MasstreePage::get_version</a></div><div class="ttdeci">const PageVersion &amp; get_version() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="masstree__page__impl_8hpp_source.html#l00162">masstree_page_impl.hpp:162</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_6f67f5e5099bcaca1b86c6412add5f6c.html">include</a></li><li class="navelem"><a class="el" href="dir_e2c6bc5bd212a768ceff7b155baa199e.html">foedus</a></li><li class="navelem"><a class="el" href="dir_2fbda52012fcfad96d33d284c8344f9b.html">storage</a></li><li class="navelem"><a class="el" href="dir_8090459ce47917ebff411612cf8b5fc9.html">masstree</a></li><li class="navelem"><a class="el" href="masstree__page__impl_8hpp.html">masstree_page_impl.hpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
