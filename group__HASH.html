<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: Hashtable Storage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__HASH.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Hashtable Storage<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><b>Hashtable</b> Storage, a concurrent hashtable.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Hashtable</b> Storage, a concurrent hashtable. </p>
<p>What we have here is a quite simple hash storage. Allthemore simple, more robust and scalable.</p>
<h1><a class="anchor" id="HASH_PAGES"></a>
Hash Interemediate page and Data page</h1>
<p>The hash storage has two types of pages: HashIntermediatePage and HashDataPage. HashIntermediatePage, starting from the root page, points down to other intermediate pages, and the level-0 intermediate pages point to HashDataPage. HashDataPage has a next-pointer. One entry (pointer) in a level-0 intermediate page corresponds to a hash <em>bin</em>. Usually one hash bin corresponds to a very small number of data pages, zero, one or rarely two.</p>
<p><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html">foedus::storage::hash::HashIntermediatePage</a> <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">foedus::storage::hash::HashDataPage</a></p>
<h1><a class="anchor" id="HASH_LINK"></a>
Singly-linked data pages, hopefully rarely used</h1>
<p>When a hash bin receives many records or very long key or values, a data page contains a link to <em>next</em> page that forms a singly-linked list of pages. Although this is a dual page pointer, we use only one of them. Snapshot hash pages of course point to only snapshot hash pages. Volatile hash pages, to simplify, also point to only volatile hash pages.</p>
<p>In other words, when we make a volatile version of any page in a hash bin, we instantiate volatile pages for all pages in the hash bin. This might sound costly, but there should be only 1 or only occasionaly a few pages in the bin, assuming 1) bin-bits that is large enough, and 2) good hash function.</p>
<h1><a class="anchor" id="HASH_LOCKS"></a>
Locking Protocol</h1>
<p>Intermediate pages are completely lock-free. Data pages do have per-page and per-tuple locks. Hopefully most locks are per-tuple, meaning just taking the TID of the tuple as read-set or write-set. However, there are a few cases the thread must take an exclusive lock in page-header.</p>
<ul>
<li>Inserting a new tuple. A system-transaction takes a page-lock, places a logically-deleted tuple with the hash/key, modifies the page header, releases the lock. </li>
<li>Installing a next-page pointer. A system-transaction creates an empty next-page, takes a page-lock, installs the pointer to the new page, modifies the page header, releases the lock. </li>
<li>Migrating a tuple for expansion. Also a system transaction. Detailed in next section. </li>
<li>Miss-search. A user-transaction adds the page header of the tail page to PageVersionSet and verifies it at pre-commit.</li>
</ul>
<p>All of the above are quite similar to masstree package's insertion/splits/miss-search. Like masstree package, the full-hash/key of a physical tuple is immutable once installed. We only use logical deletion flags and "moved" bits to allow record expansion. Also like masstree, other operations proceed without locks or in many cases even atomic operations, just a few memory barriers. For example, deletion just puts a logical deletion flag to the record without page-lock. Reading is completely atomics-free as far as you find the exact record (miss-search is a bit more complicated as above).</p>
<h1><a class="anchor" id="HASH_FLAGS"></a>
Flags in TID of Hash storages</h1>
<p>To implement the above protocol, the <em>moved</em> bit in TID has a bit different meaning from masstree package. It means that the corresponding record for the full-hash/key is somewhere later in the list. When we need to expand a record space that is not at the end, we insert a new physical tuple for the record with large space, then put the "moved" bit in the original physical record. If threads see the flag while processing, it skips such a record. If pre-commit sees the flag because of concurrent migration, it tracks the moved record just like Master-Tree protocol. The idea is almost the same, but here the tracking is much simpler. Just follow the linked list.</p>
<dl class="section user"><dt>History note, or a tombstone</dt><dd>We initially considered a bit more fancy hash storages (namely Cuckoo Hashing), but we didn't see enough benefits to justify its limitations (eg, how to structure snapshot pages if a tuple might be placed in two bins!). The only case it is useful is when the hash bins are really close to full, but we'll just have larger hash storages to avoid such a case. On huge NVRAM (whose density will also quickly grow), 100% fill-factor doesn't buy us anything significant over 50%. Hence discarded that plan. A sad war story, but ain't gonna win all wars. Keep it simple stupid, men. </dd></dl>
<div class="dynheader">
Collaboration diagram for Hashtable Storage:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__HASH.png" border="0" alt="" usemap="#group____HASH"/>
<map name="group____HASH" id="group____HASH">
<area shape="rect" id="node3" href="group__LOGTYPE.html" title="Defines the content and apply logic of transactional operatrions. " alt="" coords="493,168,575,195"/>
<area shape="rect" id="node2" href="group__STORAGE.html" title="Storage Manager, which implements a couple of key/value stores. " alt="" coords="5,168,127,195"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:storage_2hash_2fwd_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="storage_2hash_2fwd_8hpp.html">fwd.hpp</a></td></tr>
<tr class="memdesc:storage_2hash_2fwd_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward declarations of classes in hash storage package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:hash__hashinate_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hash__hashinate_8hpp.html">hash_hashinate.hpp</a></td></tr>
<tr class="memdesc:hash__hashinate_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Independent utility methods/classes for hashination, or hash functions. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:hash__id_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hash__id_8hpp.html">hash_id.hpp</a></td></tr>
<tr class="memdesc:hash__id_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definitions of IDs in this package and a few related constant values. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:hash__log__types_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hash__log__types_8hpp.html">hash_log_types.hpp</a></td></tr>
<tr class="memdesc:hash__log__types_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declares all log types used in this storage type. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashCombo.html">foedus::storage::hash::HashCombo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A set of information that are used in many places, extracted from the given key.  <a href="structfoedus_1_1storage_1_1hash_1_1HashCombo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1hash_1_1ComposedBin"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin">foedus::storage::hash::ComposedBin</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1hash_1_1ComposedBin"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents an output of composer on one bin.  <a href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1hash_1_1ComposedBin"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage">foedus::storage::hash::HashComposedBinsPage</a></td></tr>
<tr class="memdesc:structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage"><td class="mdescLeft">&#160;</td><td class="mdescRight">A page to pack many <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin" title="Represents an output of composer on one bin. ">ComposedBin</a> as an output of composer.  <a href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsBuffer.html">foedus::storage::hash::ComposedBinsBuffer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abstracts how we batch-read several <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> emit from individual composers.  <a href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsBuffer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsMergedStream.html">foedus::storage::hash::ComposedBinsMergedStream</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packages all <a class="el" href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsBuffer.html" title="Abstracts how we batch-read several HashComposedBinsPage emit from individual composers. ">ComposedBinsBuffer</a> to easily extract bins of current interest.  <a href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsMergedStream.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashComposer.html">foedus::storage::hash::HashComposer</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfoedus_1_1storage_1_1Composer.html" title="Represents a logic to compose a new version of data pages for one storage. ">Composer</a> for a hash storage.  <a href="classfoedus_1_1storage_1_1hash_1_1HashComposer.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">foedus::storage::hash::BloomFilterFingerprint</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A fingerprint for bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>.  <a href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html">foedus::storage::hash::DataPageBloomFilter</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">To quickly check whether a <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a> <em>might</em> contain a specific hash value, we maintain a non-counting bloom filter in each page.  <a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionfoedus_1_1storage_1_1hash_1_1IntermediateRoute.html">foedus::storage::hash::IntermediateRoute</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compactly represents the route of intermediate pages to reach the given hash bin.  <a href="unionfoedus_1_1storage_1_1hash_1_1IntermediateRoute.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashBinRange.html">foedus::storage::hash::HashBinRange</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a range of hash bins in a hash storage, such as what an intermediate page is responsible for.  <a href="structfoedus_1_1storage_1_1hash_1_1HashBinRange.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashCreateLogType.html">foedus::storage::hash::HashCreateLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log type of CREATE HASH STORAGE operation.  <a href="structfoedus_1_1storage_1_1hash_1_1HashCreateLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html">foedus::storage::hash::HashCommonLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A base class for HashInsertLogType/HashDeleteLogType/HashOverwriteLogType.  <a href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashInsertLogType.html">foedus::storage::hash::HashInsertLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log type of hash-storage's insert operation.  <a href="structfoedus_1_1storage_1_1hash_1_1HashInsertLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDeleteLogType.html">foedus::storage::hash::HashDeleteLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log type of hash-storage's delete operation.  <a href="structfoedus_1_1storage_1_1hash_1_1HashDeleteLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashUpdateLogType.html">foedus::storage::hash::HashUpdateLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log type of hash-storage's update operation.  <a href="structfoedus_1_1storage_1_1hash_1_1HashUpdateLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashOverwriteLogType.html">foedus::storage::hash::HashOverwriteLogType</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log type of hash-storage's overwrite operation.  <a href="structfoedus_1_1storage_1_1hash_1_1HashOverwriteLogType.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashMetadata.html">foedus::storage::hash::HashMetadata</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structfoedus_1_1storage_1_1Metadata.html" title="Metadata of one storage. ">Metadata</a> of an hash storage.  <a href="structfoedus_1_1storage_1_1hash_1_1HashMetadata.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html">foedus::storage::hash::HashIntermediatePage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents an intermediate page in <a class="el" href="group__HASH.html">Hashtable Storage</a>.  <a href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">foedus::storage::hash::HashDataPage::Slot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix-sized slot for each record, which is placed at the end of data region.  <a href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">foedus::storage::hash::HashDataPage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents an individual data page in <a class="el" href="group__HASH.html">Hashtable Storage</a>.  <a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html">foedus::storage::hash::HashPartitioner</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classfoedus_1_1storage_1_1Partitioner.html" title="Partitioning and sorting logic for one storage. ">Partitioner</a> for a hash storage.  <a href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html">foedus::storage::hash::ReserveRecords</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A system transaction to reserve a physical record(s) in a hash data page.  <a href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html">foedus::storage::hash::HashStorage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a key-value store based on a dense and regular hash.  <a href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html">foedus::storage::hash::HashStoragePimpl</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pimpl object of <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html" title="Represents a key-value store based on a dense and regular hash. ">HashStorage</a>.  <a href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashTmpBin_1_1Record.html">foedus::storage::hash::HashTmpBin::Record</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a record with a unique key.  <a href="structfoedus_1_1storage_1_1hash_1_1HashTmpBin_1_1Record.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashTmpBin.html">foedus::storage::hash::HashTmpBin</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An in-memory single-threaded data structure to compose tuples in a hash bin.  <a href="classfoedus_1_1storage_1_1hash_1_1HashTmpBin.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga80112dcdbc2c32d5504356737f7808ee"><td class="memItemLeft" align="right" valign="top">typedef HashIntermediatePage&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga80112dcdbc2c32d5504356737f7808ee">foedus::storage::hash::HashRootInfoPage</a></td></tr>
<tr class="memdesc:ga80112dcdbc2c32d5504356737f7808ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output of one compose() call, which are then combined in construct_root().  <a href="group__HASH.html#ga80112dcdbc2c32d5504356737f7808ee">More...</a><br /></td></tr>
<tr class="separator:ga80112dcdbc2c32d5504356737f7808ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fb894469b702dac3a6564416e19ed42"><td class="memItemLeft" align="right" valign="top">typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">foedus::storage::hash::HashValue</a></td></tr>
<tr class="memdesc:ga9fb894469b702dac3a6564416e19ed42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a full 64-bit hash value calculated from a key.  <a href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">More...</a><br /></td></tr>
<tr class="separator:ga9fb894469b702dac3a6564416e19ed42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb9a1ea596bf0db3f6ded1710ab3b3d6"><td class="memItemLeft" align="right" valign="top">typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">foedus::storage::hash::HashBin</a></td></tr>
<tr class="memdesc:gacb9a1ea596bf0db3f6ded1710ab3b3d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a <b>bin</b> of a hash value.  <a href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">More...</a><br /></td></tr>
<tr class="separator:gacb9a1ea596bf0db3f6ded1710ab3b3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80072e9a1d445f90ee2bd91a16a44267"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga80072e9a1d445f90ee2bd91a16a44267">foedus::storage::hash::KeyLength</a></td></tr>
<tr class="memdesc:ga80072e9a1d445f90ee2bd91a16a44267"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a byte-length of a key in this package.  <a href="group__HASH.html#ga80072e9a1d445f90ee2bd91a16a44267">More...</a><br /></td></tr>
<tr class="separator:ga80072e9a1d445f90ee2bd91a16a44267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a9515ea30058385c47f1d22ff400494"><td class="memItemLeft" align="right" valign="top">typedef uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga5a9515ea30058385c47f1d22ff400494">foedus::storage::hash::PayloadLength</a></td></tr>
<tr class="memdesc:ga5a9515ea30058385c47f1d22ff400494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a byte-length of a payload in this package.  <a href="group__HASH.html#ga5a9515ea30058385c47f1d22ff400494">More...</a><br /></td></tr>
<tr class="separator:ga5a9515ea30058385c47f1d22ff400494"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8c4ca78e36b2188f1feac100ce7df679"><td class="memItemLeft" align="right" valign="top">HashValue&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">foedus::storage::hash::hashinate</a> (const void *key, uint16_t key_length)</td></tr>
<tr class="memdesc:ga8c4ca78e36b2188f1feac100ce7df679"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates hash value for general input.  <a href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">More...</a><br /></td></tr>
<tr class="separator:ga8c4ca78e36b2188f1feac100ce7df679"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabaf07af9be6f884ec7db6535f1641b4"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:gaabaf07af9be6f884ec7db6535f1641b4"><td class="memTemplItemLeft" align="right" valign="top">HashValue&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__HASH.html#gaabaf07af9be6f884ec7db6535f1641b4">foedus::storage::hash::hashinate</a> (T key)</td></tr>
<tr class="memdesc:gaabaf07af9be6f884ec7db6535f1641b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates hash value for a primitive type.  <a href="group__HASH.html#gaabaf07af9be6f884ec7db6535f1641b4">More...</a><br /></td></tr>
<tr class="separator:gaabaf07af9be6f884ec7db6535f1641b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad584a49d2de255afd325aa2ddbb7e726"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gad584a49d2de255afd325aa2ddbb7e726">foedus::storage::hash::fanout_power</a> (uint8_t exponent)</td></tr>
<tr class="separator:gad584a49d2de255afd325aa2ddbb7e726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacfc9ccab28ee4ffc1a7317ec51b332f4"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gacfc9ccab28ee4ffc1a7317ec51b332f4">foedus::storage::hash::bins_to_level</a> (uint64_t bins)</td></tr>
<tr class="separator:gacfc9ccab28ee4ffc1a7317ec51b332f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaacad2985a0febe20bb69953e0ad18b26"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gaacad2985a0febe20bb69953e0ad18b26">foedus::storage::hash::kXxhashKeySeed</a> = 0x3f119e0435262a17ULL</td></tr>
<tr class="memdesc:gaacad2985a0febe20bb69953e0ad18b26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default seed value used for xxhash's xxh32/64 to hashinate keys.  <a href="group__HASH.html#gaacad2985a0febe20bb69953e0ad18b26">More...</a><br /></td></tr>
<tr class="separator:gaacad2985a0febe20bb69953e0ad18b26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae2f0b6af2ba07e3f75fbd8041959b03"><td class="memItemLeft" align="right" valign="top">const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gaae2f0b6af2ba07e3f75fbd8041959b03">foedus::storage::hash::kHashDataPageBloomFilterBytes</a> = 64</td></tr>
<tr class="memdesc:gaae2f0b6af2ba07e3f75fbd8041959b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Byte size of bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>.  <a href="group__HASH.html#gaae2f0b6af2ba07e3f75fbd8041959b03">More...</a><br /></td></tr>
<tr class="separator:gaae2f0b6af2ba07e3f75fbd8041959b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga336251f5000e3e9f5f5b9e81ff56606b"><td class="memItemLeft" align="right" valign="top">const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga336251f5000e3e9f5f5b9e81ff56606b">foedus::storage::hash::kHashDataPageBloomFilterBits</a> = kHashDataPageBloomFilterBytes * 8</td></tr>
<tr class="memdesc:ga336251f5000e3e9f5f5b9e81ff56606b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bit size of bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>.  <a href="group__HASH.html#ga336251f5000e3e9f5f5b9e81ff56606b">More...</a><br /></td></tr>
<tr class="separator:ga336251f5000e3e9f5f5b9e81ff56606b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd516c5d25cdff2f93b3d40806cc2297"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gabd516c5d25cdff2f93b3d40806cc2297">foedus::storage::hash::kHashDataPageBloomFilterIndexSize</a> = 9U</td></tr>
<tr class="memdesc:gabd516c5d25cdff2f93b3d40806cc2297"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many bits we need in order to represent an index in bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>.  <a href="group__HASH.html#gabd516c5d25cdff2f93b3d40806cc2297">More...</a><br /></td></tr>
<tr class="separator:gabd516c5d25cdff2f93b3d40806cc2297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03d312a7fd67cf27c26265073ef919b5"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga03d312a7fd67cf27c26265073ef919b5">foedus::storage::hash::kHashDataPageBloomFilterHashes</a> = 3</td></tr>
<tr class="memdesc:ga03d312a7fd67cf27c26265073ef919b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of hash functions (k) of bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>.  <a href="group__HASH.html#ga03d312a7fd67cf27c26265073ef919b5">More...</a><br /></td></tr>
<tr class="separator:ga03d312a7fd67cf27c26265073ef919b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga604da1f82736beb67c968203025b91c0"><td class="memItemLeft" align="right" valign="top">const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga604da1f82736beb67c968203025b91c0">foedus::storage::hash::kHashIntermediatePageHeaderSize</a> = 64</td></tr>
<tr class="memdesc:ga604da1f82736beb67c968203025b91c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Byte size of header in an intermediate page of hash storage.  <a href="group__HASH.html#ga604da1f82736beb67c968203025b91c0">More...</a><br /></td></tr>
<tr class="separator:ga604da1f82736beb67c968203025b91c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4398665205e13bd71e8b2c1691ba1ba3"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga4398665205e13bd71e8b2c1691ba1ba3">foedus::storage::hash::kHashIntermediatePageFanout</a></td></tr>
<tr class="memdesc:ga4398665205e13bd71e8b2c1691ba1ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of pointers in an intermediate page of hash storage.  <a href="group__HASH.html#ga4398665205e13bd71e8b2c1691ba1ba3">More...</a><br /></td></tr>
<tr class="separator:ga4398665205e13bd71e8b2c1691ba1ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0083e0d73570a990b862bb330f8d5831"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">foedus::storage::hash::kHashMaxBins</a> []</td></tr>
<tr class="memdesc:ga0083e0d73570a990b862bb330f8d5831"><td class="mdescLeft">&#160;</td><td class="mdescRight">kHashTotalBins[n] gives the maximum number of hash bins n-level hash can hold.  <a href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">More...</a><br /></td></tr>
<tr class="separator:ga0083e0d73570a990b862bb330f8d5831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb6faca61be6849c9cdb02447cb3edbe"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gacb6faca61be6849c9cdb02447cb3edbe">foedus::storage::hash::kHashMaxLevels</a> = 8</td></tr>
<tr class="memdesc:gacb6faca61be6849c9cdb02447cb3edbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max level of intermediate pages.  <a href="group__HASH.html#gacb6faca61be6849c9cdb02447cb3edbe">More...</a><br /></td></tr>
<tr class="separator:gacb6faca61be6849c9cdb02447cb3edbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga110c76b9c31881d7c6f3898d164579d8"><td class="memItemLeft" align="right" valign="top">const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga110c76b9c31881d7c6f3898d164579d8">foedus::storage::hash::kHashDataPageHeaderSize</a> = 128</td></tr>
<tr class="memdesc:ga110c76b9c31881d7c6f3898d164579d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Byte size of header in data page of hash storage.  <a href="group__HASH.html#ga110c76b9c31881d7c6f3898d164579d8">More...</a><br /></td></tr>
<tr class="separator:ga110c76b9c31881d7c6f3898d164579d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab2bbc8a5492145da0994d00a4d4c4c76"><td class="memItemLeft" align="right" valign="top">const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gab2bbc8a5492145da0994d00a4d4c4c76">foedus::storage::hash::kHashDataPageDataSize</a> = kPageSize - kHashDataPageHeaderSize</td></tr>
<tr class="memdesc:gab2bbc8a5492145da0994d00a4d4c4c76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Body data byte size in data page of hash storage.  <a href="group__HASH.html#gab2bbc8a5492145da0994d00a4d4c4c76">More...</a><br /></td></tr>
<tr class="separator:gab2bbc8a5492145da0994d00a4d4c4c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga074dfefefc5b7853d94abe85c53b7e03"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#ga074dfefefc5b7853d94abe85c53b7e03">foedus::storage::hash::kHashMinBinBits</a> = 7U</td></tr>
<tr class="memdesc:ga074dfefefc5b7853d94abe85c53b7e03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum number allowed for bin-bits.  <a href="group__HASH.html#ga074dfefefc5b7853d94abe85c53b7e03">More...</a><br /></td></tr>
<tr class="separator:ga074dfefefc5b7853d94abe85c53b7e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad71f09d7ed5990ea1c9ca356987e2fb9"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__HASH.html#gad71f09d7ed5990ea1c9ca356987e2fb9">foedus::storage::hash::kHashMaxBinBits</a> = 48U</td></tr>
<tr class="memdesc:gad71f09d7ed5990ea1c9ca356987e2fb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number allowed for bin-bits.  <a href="group__HASH.html#gad71f09d7ed5990ea1c9ca356987e2fb9">More...</a><br /></td></tr>
<tr class="separator:gad71f09d7ed5990ea1c9ca356987e2fb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Class Documentation</h2>
<a name="structfoedus_1_1storage_1_1hash_1_1ComposedBin" id="structfoedus_1_1storage_1_1hash_1_1ComposedBin"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct foedus::storage::hash::ComposedBin</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Represents an output of composer on one bin. </p>

<p>Definition at line <a class="el" href="hash__composed__bins__impl_8hpp_source.html#l00085">85</a> of file <a class="el" href="hash__composed__bins__impl_8hpp_source.html">hash_composed_bins_impl.hpp</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a86bd75fe57411cd40ff85b8f261ddb6f"></a><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a></td>
<td class="fieldname">
bin_</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a82b6b585669e9d65774b3c9a5589382d"></a><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a></td>
<td class="fieldname">
page_id_</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" id="structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct foedus::storage::hash::HashComposedBinsPage</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>A page to pack many <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin" title="Represents an output of composer on one bin. ">ComposedBin</a> as an output of composer. </p>
<p>Output of a composer consists of many of this pages. Each <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> contains lots of snapshotted-bins. This is simply a linked list connected by the next-page pointer. All bins stored here are sorted by bin. </p>

<p>Definition at line <a class="el" href="hash__composed__bins__impl_8hpp_source.html#l00101">101</a> of file <a class="el" href="hash__composed__bins__impl_8hpp_source.html">hash_composed_bins_impl.hpp</a>.</p>
</div><div class="dynheader">
Collaboration diagram for foedus::storage::hash::HashComposedBinsPage:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage__coll__graph.png" border="0" usemap="#foedus_1_1storage_1_1hash_1_1HashComposedBinsPage_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1storage_1_1hash_1_1HashComposedBinsPage_coll__map" id="foedus_1_1storage_1_1hash_1_1HashComposedBinsPage_coll__map">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1HashBinRange.html" title="Represents a range of hash bins in a hash storage, such as what an intermediate page is responsible f..." alt="" coords="927,5,1074,47"/>
<area shape="rect" id="node3" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin" title="Represents an output of composer on one bin. " alt="" coords="927,71,1074,112"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1PageHeader.html" title="Just a marker to denote that a memory region represents a data page. " alt="" coords="905,137,1096,163"/>
<area shape="rect" id="node5" href="structfoedus_1_1assorted_1_1ProbCounter.html" title="Implements a probabilistic counter [Morris 1978]. " alt="" coords="572,113,771,139"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1PageVersion.html" title="Just a synonym of XctId to be used as a page lock mechanism. " alt="" coords="575,163,767,190"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1PageVersionStatus.html" title="foedus::storage::PageVersion\lStatus" alt="" coords="284,129,476,171"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1McsWwLock.html" title="An exclusive&#45;only (WW) MCS lock data structure. " alt="" coords="295,195,465,222"/>
<area shape="rect" id="node9" href="structfoedus_1_1xct_1_1McsWwBlockData.html" title="Exclusive&#45;only (WW) MCS lock classes. " alt="" coords="5,195,207,222"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a3a4243b1268fe656202183f0f9158d43"></a>uint32_t</td>
<td class="fieldname">
bin_count_</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="af13309c311891474e968db5d622c577d"></a><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashBinRange.html">HashBinRange</a></td>
<td class="fieldname">
bin_range_</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a84a7ab6b04755a6167c7bbea18332b62"></a><a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin">ComposedBin</a></td>
<td class="fieldname">
bins_[<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#afa048c55d022f75afcce203b645724f3">kHashComposedBinsPageMaxBins</a>]</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad43084540c9c9a500087a21fcebd5b6b"></a>uint32_t</td>
<td class="fieldname">
dummy_</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a88d63c11236a5f6f117b664b51f8592c"></a><a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a></td>
<td class="fieldname">
header_</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a24d4c9625d39bf6a1c53d89e24576936"></a><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a></td>
<td class="fieldname">
next_page_</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ae7700b23934b7041a049897db3308df8"></a>uint64_t</td>
<td class="fieldname">
padding_</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gacb9a1ea596bf0db3f6ded1710ab3b3d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t <a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">foedus::storage::hash::HashBin</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a <b>bin</b> of a hash value. </p>
<p>As a primitive type, this is same as HashValue, but this type represents an extracted hash bin. For example, if the storage uses 20 bin-bits, bin = hash &gt;&gt; (64-20). Each bin, even empty one, consumes a 16-byte space. So, 32 bin-bits consumes 64 GB even without tuple data. Most usecase would be within 32 bits. However, there might be a biiiiigggggggg hash storage (NVRAM! PBs!), so let's reserve 64 bits. But, this is guaranteed to be within 48 bits. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00142">142</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga80112dcdbc2c32d5504356737f7808ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef HashIntermediatePage <a class="el" href="group__HASH.html#ga80112dcdbc2c32d5504356737f7808ee">foedus::storage::hash::HashRootInfoPage</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output of one compose() call, which are then combined in construct_root(). </p>
<p>The format is exactly same as <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html" title="Represents an intermediate page in Hashtable Storage. ">HashIntermediatePage</a>, but typedef-ed for clarity. The only differences are: </p><ul>
<li>Snapshot pointer points to <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> instead of HashDataPage/HashIntermediatePage. </li>
<li>Volatile pointer (which of course is never used in snapshot page) instead represents the number of contiguously-written <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> in the pointed sub-tree. This allows the combiner to read the entire linked-list in one-shot.</li>
</ul>
<dl class="section user"><dt>Linked list of HashComposedBinsPage</dt><dd>In hash storage, what compose() returns are just a list of bins. There essentially is no structure of them. The only reason we have this "root" page is to allow parallel combination by the gleaner. Each child-pointer from the root page is assigned to one thread on its own node, then written out in that node. So, after following the first child pointer, we just need a linked list, which is <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a>.</dd></dl>
<dl class="section user"><dt>2-path composition</dt><dd>Each reducer returns a linked-list of <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> for every direct-child of the root page. Then, the gleaner combines them in a parallel fashion, resulting in snapshot interemediate pages that will be installed to the root page. The second phase consists of reading the <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> from each composer (reducer), collecting updated bins on each page, and creating a new interemediate page hierarchically. We have several classes decoupled from the composer class itself as listed below: <ul>
<li><a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1ComposedBin" title="Represents an output of composer on one bin. ">ComposedBin</a> (individual bin) </li>
<li><a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a> (hundreds of bins) </li>
<li><a class="el" href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsBuffer.html" title="Abstracts how we batch-read several HashComposedBinsPage emit from individual composers. ">ComposedBinsBuffer</a> (all bins from a sub-tree emit from one composer) </li>
<li><a class="el" href="structfoedus_1_1storage_1_1hash_1_1ComposedBinsMergedStream.html" title="Packages all ComposedBinsBuffer to easily extract bins of current interest. ">ComposedBinsMergedStream</a> (all bins from a sub-tree emit from all composers)</li>
</ul>
</dd></dl>
<dl class="section user"><dt>1-level hashtable</dt><dd>It works the same way even when the hash table has only one level (root directly points to data pages). Even in this case, HashRootInfoPage still points to <a class="el" href="group__HASH.html#structfoedus_1_1storage_1_1hash_1_1HashComposedBinsPage" title="A page to pack many ComposedBin as an output of composer. ">HashComposedBinsPage</a>, which contains only one entry per page. Kind of wasteful, but it has negligible overheads compared to the entire mapper/reducer. Unlike array package, we don't do special optimization for this case in order to keep the code simpler, and because the storage could benefit from parallelization even in this case (the root page still contains hundreds of hash bins). </dd></dl>

<p>Definition at line <a class="el" href="hash__composed__bins__impl_8hpp_source.html#l00079">79</a> of file <a class="el" href="hash__composed__bins__impl_8hpp_source.html">hash_composed_bins_impl.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga9fb894469b702dac3a6564416e19ed42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t <a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">foedus::storage::hash::HashValue</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a full 64-bit hash value calculated from a key. </p>
<p>In addition to use it as usual hash value, we extract its higher bits as <b>bin</b>. Each hash storage has a static configuration that determines how many bits are used for bins. Each bin represents a range of hash values, such as 0x1234560000000000 (inclusive) to 0x1234570000000000 (exclusive) where bins use the high 24 bits. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6" title="Represents a bin of a hash value. ">HashBin</a> </dd>
<dd>
HashRange </dd></dl>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00129">129</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga80072e9a1d445f90ee2bd91a16a44267"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="group__HASH.html#ga80072e9a1d445f90ee2bd91a16a44267">foedus::storage::hash::KeyLength</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a byte-length of a key in this package. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00203">203</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga5a9515ea30058385c47f1d22ff400494"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="group__HASH.html#ga5a9515ea30058385c47f1d22ff400494">foedus::storage::hash::PayloadLength</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a byte-length of a payload in this package. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00209">209</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gacfc9ccab28ee4ffc1a7317ec51b332f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t foedus::storage::hash::bins_to_level </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>bins</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>levels appropriate to hold at least the given number of bins. </dd></dl>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00090">90</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00076">foedus::storage::hash::HashStoragePimpl::create()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00135">foedus::storage::hash::HashStoragePimpl::load()</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                                            {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  uint8_t level;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">for</span> (level = 1U; <a class="code" href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">kHashMaxBins</a>[level] &lt; bins; ++level) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">return</span> level;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="ttc" id="group__HASH_html_ga0083e0d73570a990b862bb330f8d5831"><div class="ttname"><a href="group__HASH.html#ga0083e0d73570a990b862bb330f8d5831">foedus::storage::hash::kHashMaxBins</a></div><div class="ttdeci">const uint64_t kHashMaxBins[]</div><div class="ttdoc">kHashTotalBins[n] gives the maximum number of hash bins n-level hash can hold. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00074">hash_id.hpp:74</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__HASH_gacfc9ccab28ee4ffc1a7317ec51b332f4_icgraph.png" border="0" usemap="#group__HASH_gacfc9ccab28ee4ffc1a7317ec51b332f4_icgraph" alt=""/></div>
<map name="group__HASH_gacfc9ccab28ee4ffc1a7317ec51b332f4_icgraph" id="group__HASH_gacfc9ccab28ee4ffc1a7317ec51b332f4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="200,5,383,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a44bc6cd5427daadbee9fd6fcc366af09" title="foedus::storage::hash\l::HashStoragePimpl::load" alt="" coords="206,71,377,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="431,5,580,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a200dd1b1b2b5bc937cae55120e1befc9" title="foedus::storage::hash\l::HashStorage::load" alt="" coords="432,71,579,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad584a49d2de255afd325aa2ddbb7e726"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::storage::hash::fanout_power </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>exponent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>kHashIntermediatePageFanout^exponent. </dd></dl>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00056">56</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>References <a class="el" href="hash__id_8hpp_source.html#l00049">foedus::storage::hash::kHashIntermediatePageFanout</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00076">foedus::storage::hash::HashStoragePimpl::create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                                               {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  uint64_t ret = 1U;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; exponent; ++i) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    ret *= <a class="code" href="group__HASH.html#ga4398665205e13bd71e8b2c1691ba1ba3">kHashIntermediatePageFanout</a>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="group__HASH_html_ga4398665205e13bd71e8b2c1691ba1ba3"><div class="ttname"><a href="group__HASH.html#ga4398665205e13bd71e8b2c1691ba1ba3">foedus::storage::hash::kHashIntermediatePageFanout</a></div><div class="ttdeci">const uint8_t kHashIntermediatePageFanout</div><div class="ttdoc">Number of pointers in an intermediate page of hash storage. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00049">hash_id.hpp:49</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__HASH_gad584a49d2de255afd325aa2ddbb7e726_icgraph.png" border="0" usemap="#group__HASH_gad584a49d2de255afd325aa2ddbb7e726_icgraph" alt=""/></div>
<map name="group__HASH_gad584a49d2de255afd325aa2ddbb7e726_icgraph" id="group__HASH_gad584a49d2de255afd325aa2ddbb7e726_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a2823bcc0a488ad58faee46d876db8abe" title="foedus::storage::hash\l::HashStoragePimpl::create" alt="" coords="200,5,383,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac77a3ace0e46fc133fa68affc8901409" title="foedus::storage::hash\l::HashStorage::create" alt="" coords="431,5,580,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga8c4ca78e36b2188f1feac100ce7df679"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HashValue foedus::storage::hash::hashinate </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates hash value for general input. </p>

<p>Definition at line <a class="el" href="hash__hashinate_8cpp_source.html#l00031">31</a> of file <a class="el" href="hash__hashinate_8cpp_source.html">hash_hashinate.cpp</a>.</p>

<p>References <a class="el" href="hash__hashinate_8hpp_source.html#l00046">foedus::storage::hash::kXxhashKeySeed</a>.</p>

<p>Referenced by <a class="el" href="hash__page__debug_8cpp_source.html#l00089">foedus::storage::hash::HashDataPage::assert_entries_impl()</a>, <a class="el" href="hash__log__types_8hpp_source.html#l00142">foedus::storage::hash::HashCommonLogType::assert_record_and_log_keys()</a>, <a class="el" href="hash__log__types_8hpp_source.html#l00162">foedus::storage::hash::HashCommonLogType::assert_type()</a>, <a class="el" href="hash__log__types_8hpp_source.html#l00178">foedus::storage::hash::HashCommonLogType::compare_logs()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00396">foedus::storage::hash::HashDataPage::compare_slot_key()</a>, <a class="el" href="hash__tmpbin_8cpp_source.html#l00167">foedus::storage::hash::HashTmpBin::delete_record()</a>, <a class="el" href="hash__combo_8cpp_source.html#l00029">foedus::storage::hash::HashCombo::HashCombo()</a>, <a class="el" href="hash__tmpbin_8cpp_source.html#l00126">foedus::storage::hash::HashTmpBin::insert_record()</a>, <a class="el" href="hash__tmpbin_8cpp_source.html#l00194">foedus::storage::hash::HashTmpBin::overwrite_record()</a>, <a class="el" href="hash__log__types_8hpp_source.html#l00104">foedus::storage::hash::HashCommonLogType::populate_base()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00106">foedus::storage::hash::HashDataPage::search_key_physical()</a>, and <a class="el" href="hash__tmpbin_8cpp_source.html#l00229">foedus::storage::hash::HashTmpBin::update_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                                          {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  return ::XXH64(key, key_length, <a class="code" href="group__HASH.html#gaacad2985a0febe20bb69953e0ad18b26">kXxhashKeySeed</a>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div>
<div class="ttc" id="group__HASH_html_gaacad2985a0febe20bb69953e0ad18b26"><div class="ttname"><a href="group__HASH.html#gaacad2985a0febe20bb69953e0ad18b26">foedus::storage::hash::kXxhashKeySeed</a></div><div class="ttdeci">const uint64_t kXxhashKeySeed</div><div class="ttdoc">Default seed value used for xxhash&#39;s xxh32/64 to hashinate keys. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00046">hash_hashinate.hpp:46</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__HASH_ga8c4ca78e36b2188f1feac100ce7df679_icgraph.png" border="0" usemap="#group__HASH_ga8c4ca78e36b2188f1feac100ce7df679_icgraph" alt=""/></div>
<map name="group__HASH_ga8c4ca78e36b2188f1feac100ce7df679_icgraph" id="group__HASH_ga8c4ca78e36b2188f1feac100ce7df679_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="209,287,371,343"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#ad66913658c856c60c06500b1179db779" title="used only for sanity check. " alt="" coords="440,683,628,739"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#a409566a4b1453421a1eaa945d561c751" title="foedus::storage::hash\l::HashCommonLogType::\lassert_type" alt="" coords="206,748,374,804"/>
<area shape="rect" id="node17" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#aa67a216d25315f5dd1c90ffb8a9f6615" title="Returns &#45;1, 0, 1 when left is less than, same, larger than right in terms of bin and xct_id..." alt="" coords="206,828,374,884"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a33c82d9bc3661456265ee9991cba1f98" title="returns whether the slot contains the exact key specified " alt="" coords="203,392,377,448"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashTmpBin.html#a105eb120235425e73380a9b943a9bf66" title="Logically deletes a record of the given key. " alt="" coords="217,908,363,964"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1hash_1_1HashCombo.html#a0b01cbd3892778b43b051d68daf8246d" title="foedus::storage::hash\l::HashCombo::HashCombo" alt="" coords="200,989,380,1030"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashTmpBin.html#ab5ac0d32ded6cfa7bb3df7f28eafb33e" title="Inserts a new record of the given key and payload. " alt="" coords="217,1055,363,1111"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashTmpBin.html#ae3f726ea1ce191d9ea5c41202568623b" title="Overwrites a part of the record of the given key. " alt="" coords="209,1135,371,1191"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1hash_1_1HashCommonLogType.html#a46e30aeb1cf54b5780feb3d98de33616" title="foedus::storage::hash\l::HashCommonLogType::\lpopulate_base" alt="" coords="206,1215,374,1271"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aa03f1438dc159688f49de6e73c851d6e" title="Search for a physical slot that exactly contains the given key. " alt="" coords="208,523,372,579"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashTmpBin.html#ad54d9fdfa4874b6eaa0231bce58fccf8" title="Updates a record of the given key with the given payload, which might change length. " alt="" coords="215,1295,365,1351"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="453,261,615,317"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="695,683,869,739"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="941,689,1088,745"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1161,693,1348,749"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1407,701,1603,742"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1655,701,1875,742"/>
<area shape="rect" id="node11" href="classfoedus_1_1snapshot_1_1MergeSort.html#a6c611c17929fbf66fdab84a824a82b3c" title="For debug/test only. " alt="" coords="439,894,629,935"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a7b2f3ff32863d2e4e44c96b93071067e" title="foedus::storage::hash\l::HashPartitioner::partition_batch" alt="" coords="428,763,640,805"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage_1_1hash.html#a213ec023dfa3d7901e0c40ce20fc538d" title="subroutine of sort_batch " alt="" coords="460,829,608,870"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1Partitioner.html#a8c7b2f626b460815615663be4d22427f" title="Identifies the partition of each log record in a batched fashion. " alt="" coords="693,763,871,805"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashPartitioner.html#a8255043c6cb91246cbff43cceb88f596" title="foedus::storage::hash\l::HashPartitioner::sort_batch" alt="" coords="688,829,876,870"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1Partitioner.html#a8c8909d8a44ae9d6a4afee0ded0add4c" title="Called from log reducer to sort log entries by keys. " alt="" coords="925,829,1104,870"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="443,392,625,448"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="691,377,873,433"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="924,297,1105,353"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="924,377,1105,433"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1173,279,1337,335"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1173,373,1337,429"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1165,453,1344,509"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1164,533,1345,589"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1163,613,1346,669"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1157,85,1353,141"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1153,176,1356,232"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1418,246,1593,287"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1423,377,1587,433"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1404,311,1607,353"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1677,377,1852,433"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1432,457,1579,513"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1431,537,1579,593"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1431,617,1580,673"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1407,85,1603,141"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1424,5,1587,61"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1420,165,1591,221"/>
<area shape="rect" id="node46" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="449,523,619,579"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="447,603,621,659"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="706,523,858,579"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="939,530,1090,571"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaabaf07af9be6f884ec7db6535f1641b4"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">HashValue foedus::storage::hash::hashinate </td>
          <td>(</td>
          <td class="paramtype">T&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates hash value for a primitive type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key to hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Primitive type. All primitive types are explicitly instantiated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>Primitive key to hash </td></tr>
  </table>
  </dd>
</dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Primitive type. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="hash__hashinate_8cpp_source.html#l00042">42</a> of file <a class="el" href="hash__hashinate_8cpp_source.html">hash_hashinate.cpp</a>.</p>

<p>References <a class="el" href="hash__hashinate_8hpp_source.html#l00046">foedus::storage::hash::kXxhashKeySeed</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                           {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  return ::XXH64(&amp;key, <span class="keyword">sizeof</span>(T), <a class="code" href="group__HASH.html#gaacad2985a0febe20bb69953e0ad18b26">kXxhashKeySeed</a>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div>
<div class="ttc" id="group__HASH_html_gaacad2985a0febe20bb69953e0ad18b26"><div class="ttname"><a href="group__HASH.html#gaacad2985a0febe20bb69953e0ad18b26">foedus::storage::hash::kXxhashKeySeed</a></div><div class="ttdeci">const uint64_t kXxhashKeySeed</div><div class="ttdoc">Default seed value used for xxhash&#39;s xxh32/64 to hashinate keys. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00046">hash_hashinate.hpp:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="ga336251f5000e3e9f5f5b9e81ff56606b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint16_t foedus::storage::hash::kHashDataPageBloomFilterBits = kHashDataPageBloomFilterBytes * 8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bit size of bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>. </p>

<p>Definition at line <a class="el" href="hash__hashinate_8hpp_source.html#l00075">75</a> of file <a class="el" href="hash__hashinate_8hpp_source.html">hash_hashinate.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="gaae2f0b6af2ba07e3f75fbd8041959b03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint16_t foedus::storage::hash::kHashDataPageBloomFilterBytes = 64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Byte size of bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>. </p>
<p>must be a power of 2 to slightly simplify the index calculation. </p>

<p>Definition at line <a class="el" href="hash__hashinate_8hpp_source.html#l00069">69</a> of file <a class="el" href="hash__hashinate_8hpp_source.html">hash_hashinate.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__hashinate_8cpp_source.html#l00073">foedus::storage::hash::operator&lt;&lt;()</a>.</p>

</div>
</div>
<a class="anchor" id="ga03d312a7fd67cf27c26265073ef919b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t foedus::storage::hash::kHashDataPageBloomFilterHashes = 3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of hash functions (k) of bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>. </p>
<p>We consume kHashDataPageBloomFilterHashes * kHashDataPageBloomFilterIndexSize bits out of the full hash value as the fingerprint. </p>

<p>Definition at line <a class="el" href="hash__hashinate_8hpp_source.html#l00097">97</a> of file <a class="el" href="hash__hashinate_8hpp_source.html">hash_hashinate.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__hashinate_8hpp_source.html#l00165">foedus::storage::hash::DataPageBloomFilter::add()</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00152">foedus::storage::hash::DataPageBloomFilter::contains()</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00175">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint()</a>, <a class="el" href="hash__hashinate_8cpp_source.html#l00055">foedus::storage::hash::operator&lt;&lt;()</a>, and <a class="el" href="hash__hashinate_8hpp_source.html#l00107">foedus::storage::hash::BloomFilterFingerprint::operator==()</a>.</p>

</div>
</div>
<a class="anchor" id="gabd516c5d25cdff2f93b3d40806cc2297"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t foedus::storage::hash::kHashDataPageBloomFilterIndexSize = 9U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>How many bits we need in order to represent an index in bloom filter in each <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html" title="Represents an individual data page in Hashtable Storage. ">HashDataPage</a>. </p>
<dl class="section invariant"><dt>Invariant</dt><dd>2^kHashDataPageBloomFilterIndexSize == kHashDataPageBloomFilterBits </dd></dl>

<p>Definition at line <a class="el" href="hash__hashinate_8hpp_source.html#l00082">82</a> of file <a class="el" href="hash__hashinate_8hpp_source.html">hash_hashinate.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__hashinate_8hpp_source.html#l00175">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint()</a>.</p>

</div>
</div>
<a class="anchor" id="gab2bbc8a5492145da0994d00a4d4c4c76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint16_t foedus::storage::hash::kHashDataPageDataSize = kPageSize - kHashDataPageHeaderSize</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Body data byte size in data page of hash storage. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00116">116</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ga110c76b9c31881d7c6f3898d164579d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint16_t foedus::storage::hash::kHashDataPageHeaderSize = 128</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Byte size of header in data page of hash storage. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00110">110</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__page__debug_8cpp_source.html#l00089">foedus::storage::hash::HashDataPage::assert_entries_impl()</a>.</p>

</div>
</div>
<a class="anchor" id="ga4398665205e13bd71e8b2c1691ba1ba3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t foedus::storage::hash::kHashIntermediatePageFanout</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">  (<a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a> - <a class="code" href="group__HASH.html#ga604da1f82736beb67c968203025b91c0">kHashIntermediatePageHeaderSize</a>) / <span class="keyword">sizeof</span>(DualPagePointer)</div>
<div class="ttc" id="group__HASH_html_ga604da1f82736beb67c968203025b91c0"><div class="ttname"><a href="group__HASH.html#ga604da1f82736beb67c968203025b91c0">foedus::storage::hash::kHashIntermediatePageHeaderSize</a></div><div class="ttdeci">const uint16_t kHashIntermediatePageHeaderSize</div><div class="ttdoc">Byte size of header in an intermediate page of hash storage. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00040">hash_id.hpp:40</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
</div><!-- fragment -->
<p>Number of pointers in an intermediate page of hash storage. </p>
<p>This number is quite close to a power of 2, but unfortunately it's not exactly a power of two due to the page header. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00049">49</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__hashinate_8hpp_source.html#l00233">foedus::storage::hash::IntermediateRoute::construct()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00068">foedus::storage::hash::HashPartitioner::design_partition()</a>, <a class="el" href="hash__id_8hpp_source.html#l00056">foedus::storage::hash::fanout_power()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00625">foedus::storage::hash::HashStoragePimpl::follow_page()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00232">foedus::storage::hash::hash_data_volatile_page_init()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00213">foedus::storage::hash::hash_intermediate_volatile_page_init()</a>, <a class="el" href="hash__storage__debug_8cpp_source.html#l00231">foedus::storage::hash::HashStoragePimpl::hcc_reset_all_temperature_stat_intermediate()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00031">foedus::storage::hash::operator&lt;&lt;()</a>, <a class="el" href="hash__composed__bins__impl_8cpp_source.html#l00150">foedus::storage::hash::ComposedBinsMergedStream::process_a_bin()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00302">foedus::storage::hash::HashIntermediatePage::release_pages_recursive()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00271">foedus::storage::hash::HashIntermediatePage::release_pages_recursive_parallel()</a>, and <a class="el" href="hash__storage__verify_8cpp_source.html#l00055">foedus::storage::hash::HashStoragePimpl::verify_single_thread_intermediate()</a>.</p>

</div>
</div>
<a class="anchor" id="ga604da1f82736beb67c968203025b91c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint16_t foedus::storage::hash::kHashIntermediatePageHeaderSize = 64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Byte size of header in an intermediate page of hash storage. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00040">40</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="gad71f09d7ed5990ea1c9ca356987e2fb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t foedus::storage::hash::kHashMaxBinBits = 48U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number allowed for bin-bits. </p>
<p>Restricting to this size should be reasonable (2^48 is big!) and allows optimization for 128-bit sorting. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00159">159</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00213">foedus::storage::hash::SortEntry::set()</a>, and <a class="el" href="hash__metadata_8cpp_source.html#l00051">foedus::storage::hash::HashMetadata::set_capacity()</a>.</p>

</div>
</div>
<a class="anchor" id="ga0083e0d73570a990b862bb330f8d5831"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint64_t foedus::storage::hash::kHashMaxBins[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">  1ULL,</div>
<div class="line">  <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * kFanout64 * kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * kFanout64 * kFanout64 * kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * kFanout64 * kFanout64 * kFanout64 * kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * kFanout64 * kFanout64 * kFanout64 * kFanout64 * kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">  kFanout64 * kFanout64 * kFanout64 * kFanout64 * kFanout64 * kFanout64 * kFanout64 * <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">kFanout64</a>,</div>
<div class="line">}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_ab02caef574792ce5304a9c0d45a971c9"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#ab02caef574792ce5304a9c0d45a971c9">foedus::storage::hash::kFanout64</a></div><div class="ttdeci">const uint64_t kFanout64</div><div class="ttdoc">just to write the following concisely </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00065">hash_id.hpp:65</a></div></div>
</div><!-- fragment -->
<p>kHashTotalBins[n] gives the maximum number of hash bins n-level hash can hold. </p>
<p>n is at most 7, which should be a reasonable assumption. almost 2^56. Depending on the bin-bits config of the storage, it uses a smaller number of bins. In other words, kHashMaxBins[level - 1] &lt; 2^bin_bits &lt;= kHashMaxBins[level]. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00074">74</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__page__impl_8hpp_source.html#l00110">foedus::storage::hash::HashIntermediatePage::assert_range()</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00224">foedus::storage::hash::IntermediateRoute::convert_back()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00068">foedus::storage::hash::HashPartitioner::design_partition()</a>, <a class="el" href="hash__partitioner__impl_8cpp_source.html#l00128">foedus::storage::hash::HashPartitioner::design_partition_task()</a>, <a class="el" href="hash__storage__pimpl_8hpp_source.html#l00056">foedus::storage::hash::HashStorageControlBlock::get_root_children()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00213">foedus::storage::hash::hash_intermediate_volatile_page_init()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00058">foedus::storage::hash::HashIntermediatePage::initialize_snapshot_page()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00040">foedus::storage::hash::HashIntermediatePage::initialize_volatile_page()</a>, <a class="el" href="hash__composed__bins__impl_8cpp_source.html#l00225">foedus::storage::hash::ComposedBinsMergedStream::open_path()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00031">foedus::storage::hash::operator&lt;&lt;()</a>, and <a class="el" href="hash__storage__verify_8cpp_source.html#l00055">foedus::storage::hash::HashStoragePimpl::verify_single_thread_intermediate()</a>.</p>

</div>
</div>
<a class="anchor" id="gacb6faca61be6849c9cdb02447cb3edbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t foedus::storage::hash::kHashMaxLevels = 8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Max level of intermediate pages. </p>
<p>In reality 7, but let's make it 8 so that it's good for alignments in several places. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00104">104</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__composer__impl_8cpp_source.html#l00097">foedus::storage::hash::HashComposer::compose()</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00224">foedus::storage::hash::IntermediateRoute::convert_back()</a>, and <a class="el" href="hash__composer__impl_8cpp_source.html#l00436">foedus::storage::hash::HashComposeContext::HashComposeContext()</a>.</p>

</div>
</div>
<a class="anchor" id="ga074dfefefc5b7853d94abe85c53b7e03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t foedus::storage::hash::kHashMinBinBits = 7U</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minimum number allowed for bin-bits. </p>
<p>128 pointers fit in one intermediate page, so there is no point to use less than 2^7 bins. </p>

<p>Definition at line <a class="el" href="hash__id_8hpp_source.html#l00150">150</a> of file <a class="el" href="hash__id_8hpp_source.html">hash_id.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__metadata_8cpp_source.html#l00051">foedus::storage::hash::HashMetadata::set_capacity()</a>.</p>

</div>
</div>
<a class="anchor" id="gaacad2985a0febe20bb69953e0ad18b26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint64_t foedus::storage::hash::kXxhashKeySeed = 0x3f119e0435262a17ULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default seed value used for xxhash's xxh32/64 to hashinate keys. </p>

<p>Definition at line <a class="el" href="hash__hashinate_8hpp_source.html#l00046">46</a> of file <a class="el" href="hash__hashinate_8hpp_source.html">hash_hashinate.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__hashinate_8cpp_source.html#l00031">foedus::storage::hash::hashinate()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
