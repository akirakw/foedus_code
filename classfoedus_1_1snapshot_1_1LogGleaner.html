<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::snapshot::LogGleaner Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1snapshot_1_1LogGleaner.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1snapshot_1_1LogGleaner-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::snapshot::LogGleaner Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__SNAPSHOT.html">Snapshot Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A log-gleaner, which constructs a new set of snapshot files during snapshotting.  
 <a href="classfoedus_1_1snapshot_1_1LogGleaner.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A log-gleaner, which constructs a new set of snapshot files during snapshotting. </p>
<h1><a class="anchor" id="GLEANER_OVERVIEW"></a>
Log Gleaner Overview</h1>
<p><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html" title="A log-gleaner, which constructs a new set of snapshot files during snapshotting. ">LogGleaner</a> is the main class that manages most mechanisms to construct a new set of snapshot files. <a class="el" href="structfoedus_1_1snapshot_1_1Snapshot.html" title="Represents one snapshot that converts all logs from base epoch to valid_until epoch into snapshot fil...">Snapshot</a> procedure constructs and calls this object during snapshot. It receives partitioning policy (which snapshot partitions to send ranges of keys) per storage and beginning/ending epoch of logs to <em>glean</em> while log-gleaning.</p>
<p>Log-gleaning consists of two components; <b>mapper</b> (<a class="el" href="classfoedus_1_1snapshot_1_1LogMapper.html" title="A log mapper, which reads log files from one logger and sends them to corresponding log reducers...">foedus::snapshot::LogMapper</a>) and <b>reducer</b> (<a class="el" href="classfoedus_1_1snapshot_1_1LogReducer.html" title="A log reducer, which receives log entries sent from mappers and applies them to construct new snapsho...">foedus::snapshot::LogReducer</a>), obviously named after the well-known map-reduce concepts.</p>
<h1><a class="anchor" id="GLEANER_MAPPER"></a>
Mapper</h1>
<p><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html" title="A log-gleaner, which constructs a new set of snapshot files during snapshotting. ">LogGleaner</a> launches a set of mapper threads (<a class="el" href="classfoedus_1_1snapshot_1_1LogMapper.html" title="A log mapper, which reads log files from one logger and sends them to corresponding log reducers...">foedus::snapshot::LogMapper</a>) to read log files. Each <a class="el" href="classfoedus_1_1snapshot_1_1LogMapper.html" title="A log mapper, which reads log files from one logger and sends them to corresponding log reducers...">LogMapper</a> corresponds to <a class="el" href="classfoedus_1_1log_1_1Logger.html" title="A log writer that writes out buffered logs to stable storages. ">foedus::log::Logger</a>, the NUMA-local log writer which simply writes out log entries produced by local worker threads. Thus, the log files contain log entries that might be sent to any partitions. <a class="el" href="classfoedus_1_1snapshot_1_1LogMapper.html" title="A log mapper, which reads log files from one logger and sends them to corresponding log reducers...">LogMapper</a> <em>maps</em> each log entry to some partition and send it to a reducer corresponding to the partition. For more details, see <a class="el" href="classfoedus_1_1snapshot_1_1LogMapper.html" title="A log mapper, which reads log files from one logger and sends them to corresponding log reducers...">foedus::snapshot::LogMapper</a>.</p>
<h1><a class="anchor" id="GLEANER_REDUCER"></a>
Reducer</h1>
<p><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html" title="A log-gleaner, which constructs a new set of snapshot files during snapshotting. ">LogGleaner</a> also launches a set of reducer threads (<a class="el" href="classfoedus_1_1snapshot_1_1LogReducer.html" title="A log reducer, which receives log entries sent from mappers and applies them to construct new snapsho...">foedus::snapshot::LogReducer</a>), one for each NUMA node. <a class="el" href="classfoedus_1_1snapshot_1_1LogReducer.html" title="A log reducer, which receives log entries sent from mappers and applies them to construct new snapsho...">LogReducer</a> sorts log entries sent from <a class="el" href="classfoedus_1_1snapshot_1_1LogMapper.html" title="A log mapper, which reads log files from one logger and sends them to corresponding log reducers...">LogMapper</a>. The log entries are sorted by key and ordinal (*), then processed just like usual APPLY at the end of transaction, but on top of snapshot files.</p>
<p>(*) otherwise correct result is not guaranteed. For example, imagine the following case: </p><ul>
<li>UPDATE rec-1 to A. Log-ordinal 1. </li>
<li>UPDATE rec-1 to B. Log-ordinal 2.</li>
</ul>
<p>Ordinal-1 must be processed before ordinal 2.</p>
<h1><a class="anchor" id="GLEANER_SYNC"></a>
Synchronization</h1>
<p><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html" title="A log-gleaner, which constructs a new set of snapshot files during snapshotting. ">LogGleaner</a> coordinates the synchronization between mappers and reducers during snapshotting. At the beginning of snapshotting, gleaner wakes up reducers and mappers. Mappers go in to sleep when they process all logs. When all mappers went to sleep, reducers start to also go into sleep when they process all logs they receive. When all of them are done, gleaner initiates the last wrap-up phase. Additionally, <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html" title="A log-gleaner, which constructs a new set of snapshot files during snapshotting. ">LogGleaner</a> is in charge of receiving termination request from the engine if the user invokes <a class="el" href="classfoedus_1_1Engine.html#ab9107891ec9e48472d68bbd91e5f5934" title="Terminates the database engine. ">Engine::uninitialize()</a> and requesting reducers/mappers to stop.</p>
<p>Reducers/mappers occasionally check if they are requested to stop when they get idle or complete all work. They do the check at least once for a while so that the latency to stop can not be catastrophic.</p>
<h1><a class="anchor" id="GLEANER_ROOT"></a>
Constructing Root Pages</h1>
<p>After all mappers and reducers complete, the last phase of log gleaning is to construct root pages for the storages modified in this snapshotting. Gleaner collects <em>root-page-info</em> from each reducer and combines them to create the root page(s). When all set, gleaner produces maps from storage ID to a new root page ID. This will be written out in a snapshot metadata file by snapshot manager.</p>
<dl class="section note"><dt>Note</dt><dd>This is a private implementation-details of <a class="el" href="group__SNAPSHOT.html">Snapshot Manager</a>, thus file name ends with _impl. Do not include this header from a client program. There is no case client program needs to access this internal class. </dd></dl>

<p>Definition at line <a class="el" href="log__gleaner__impl_8hpp_source.html#l00104">104</a> of file <a class="el" href="log__gleaner__impl_8hpp_source.html">log_gleaner_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="log__gleaner__impl_8hpp_source.html">log_gleaner_impl.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::snapshot::LogGleaner:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1snapshot_1_1LogGleaner__inherit__graph.png" border="0" usemap="#foedus_1_1snapshot_1_1LogGleaner_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1snapshot_1_1LogGleaner_inherit__map" id="foedus_1_1snapshot_1_1LogGleaner_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html" title="A remote view of LogGleaner from all engines. " alt="" coords="5,95,220,121"/>
<area shape="rect" id="node3" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; LogGleanerControlBlock \&gt;" alt="" coords="19,5,206,47"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::snapshot::LogGleaner:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1snapshot_1_1LogGleaner__coll__graph.png" border="0" usemap="#foedus_1_1snapshot_1_1LogGleaner_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1snapshot_1_1LogGleaner_coll__map" id="foedus_1_1snapshot_1_1LogGleaner_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html" title="A remote view of LogGleaner from all engines. " alt="" coords="265,407,479,433"/>
<area shape="rect" id="node3" href="classfoedus_1_1Attachable.html" title="foedus::Attachable\l\&lt; LogGleanerControlBlock \&gt;" alt="" coords="156,303,343,344"/>
<area shape="rect" id="node4" href="structfoedus_1_1snapshot_1_1LogGleanerControlBlock.html" title="Shared data for LogGleaner. " alt="" coords="5,199,200,240"/>
<area shape="rect" id="node5" href="structfoedus_1_1snapshot_1_1Snapshot.html" title="Represents one snapshot that converts all logs from base epoch to valid_until epoch into snapshot fil..." alt="" coords="7,109,191,136"/>
<area shape="rect" id="node6" href="classfoedus_1_1Epoch.html" title="Represents a time epoch. " alt="" coords="46,5,151,32"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html" title="Database engine object that holds all resources and provides APIs. " alt="" coords="226,206,334,233"/>
<area shape="rect" id="node8" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="215,109,347,136"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1PartitionerMetadata.html" title="Tiny metadata of partitioner for every storage used while log gleaning. " alt="" coords="367,303,545,344"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SharedMutex.html" title="A mutex that can be placed in shared memory and used from multiple processes. " alt="" coords="369,206,543,233"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7bcf3a6761f65f3f274e682fb3d3c5a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a7bcf3a6761f65f3f274e682fb3d3c5a1">LogGleaner</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="structfoedus_1_1snapshot_1_1LogGleanerResource.html">LogGleanerResource</a> *gleaner_resource, const <a class="el" href="structfoedus_1_1snapshot_1_1Snapshot.html">Snapshot</a> &amp;new_snapshot)</td></tr>
<tr class="separator:a7bcf3a6761f65f3f274e682fb3d3c5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ad589fd28ad2f3a7bacfcecddf39918"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a7ad589fd28ad2f3a7bacfcecddf39918">LogGleaner</a> ()=delete</td></tr>
<tr class="separator:a7ad589fd28ad2f3a7bacfcecddf39918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e57a8ebf0abaaedff04d6ffad1189a6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a6e57a8ebf0abaaedff04d6ffad1189a6">LogGleaner</a> (const <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;other)=delete</td></tr>
<tr class="separator:a6e57a8ebf0abaaedff04d6ffad1189a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a917c98d4fae6bfcae4c5166bbe49c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a0a917c98d4fae6bfcae4c5166bbe49c6">operator=</a> (const <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;other)=delete</td></tr>
<tr class="separator:a0a917c98d4fae6bfcae4c5166bbe49c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a617c3de45c34c6533c7f3e82216557f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a617c3de45c34c6533c7f3e82216557f4">execute</a> ()</td></tr>
<tr class="memdesc:a617c3de45c34c6533c7f3e82216557f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine of log gleaner.  <a href="#a617c3de45c34c6533c7f3e82216557f4">More...</a><br /></td></tr>
<tr class="separator:a617c3de45c34c6533c7f3e82216557f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbc12046b8663cdbf375ad56fb79e7e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a0cbc12046b8663cdbf375ad56fb79e7e">to_string</a> () const </td></tr>
<tr class="separator:a0cbc12046b8663cdbf375ad56fb79e7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1629807dcb35f0174fa6ad6e247eda8f"><td class="memItemLeft" align="right" valign="top">const std::map&lt; <a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a1629807dcb35f0174fa6ad6e247eda8f">get_new_root_page_pointers</a> () const </td></tr>
<tr class="memdesc:a1629807dcb35f0174fa6ad6e247eda8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns pointers to new root pages constructed at the end of gleaning.  <a href="#a1629807dcb35f0174fa6ad6e247eda8f">More...</a><br /></td></tr>
<tr class="separator:a1629807dcb35f0174fa6ad6e247eda8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html">foedus::snapshot::LogGleanerRef</a></td></tr>
<tr class="memitem:a77c97ba61ccb4b52741a44f30edd7e23 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a77c97ba61ccb4b52741a44f30edd7e23">LogGleanerRef</a> ()</td></tr>
<tr class="separator:a77c97ba61ccb4b52741a44f30edd7e23 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41909aaaf2f05485a26998af4e291fbf inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a41909aaaf2f05485a26998af4e291fbf">LogGleanerRef</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:a41909aaaf2f05485a26998af4e291fbf inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b28bcfdc09bd7fe48cd7dd1e687fd1 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ac5b28bcfdc09bd7fe48cd7dd1e687fd1">is_error</a> () const </td></tr>
<tr class="separator:ac5b28bcfdc09bd7fe48cd7dd1e687fd1 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05510b85c72323263351a945decbbb7e inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a05510b85c72323263351a945decbbb7e">wakeup</a> ()</td></tr>
<tr class="separator:a05510b85c72323263351a945decbbb7e inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21d824a0cd1489c832ed6d6b7105331 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1snapshot_1_1Snapshot.html">Snapshot</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#aa21d824a0cd1489c832ed6d6b7105331">get_cur_snapshot</a> () const </td></tr>
<tr class="separator:aa21d824a0cd1489c832ed6d6b7105331 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429b6bdd5e14d8ce0ad71aaf44d25f93 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__SNAPSHOT.html#gaec32eb05303ebec1048d120f73295031">SnapshotId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a429b6bdd5e14d8ce0ad71aaf44d25f93">get_snapshot_id</a> () const </td></tr>
<tr class="separator:a429b6bdd5e14d8ce0ad71aaf44d25f93 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93148c754cfdf2f0beaa1d98b00eb985 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a93148c754cfdf2f0beaa1d98b00eb985">get_base_epoch</a> () const </td></tr>
<tr class="separator:a93148c754cfdf2f0beaa1d98b00eb985 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e1882e28b982377e1fc0968c62e1395 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a6e1882e28b982377e1fc0968c62e1395">get_valid_until_epoch</a> () const </td></tr>
<tr class="separator:a6e1882e28b982377e1fc0968c62e1395 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fa59844d83e3206ca272c78faa09b2 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a51fa59844d83e3206ca272c78faa09b2">increment_completed_count</a> ()</td></tr>
<tr class="separator:a51fa59844d83e3206ca272c78faa09b2 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39683f026c7eb9e9d791406e7d3e1517 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a39683f026c7eb9e9d791406e7d3e1517">increment_completed_mapper_count</a> ()</td></tr>
<tr class="separator:a39683f026c7eb9e9d791406e7d3e1517 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5c335ada3d8654746c6b83c57d96f2 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a6e5c335ada3d8654746c6b83c57d96f2">increment_error_count</a> ()</td></tr>
<tr class="separator:a6e5c335ada3d8654746c6b83c57d96f2 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a880cdfdde6beec8db15427470ca137 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a4a880cdfdde6beec8db15427470ca137">increment_exit_count</a> ()</td></tr>
<tr class="separator:a4a880cdfdde6beec8db15427470ca137 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae06d65ba38a5838c873c3b9b788905f3 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ae06d65ba38a5838c873c3b9b788905f3">is_all_exitted</a> () const </td></tr>
<tr class="separator:ae06d65ba38a5838c873c3b9b788905f3 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10961d61eb650f91fa737270dd690a0b inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a10961d61eb650f91fa737270dd690a0b">is_all_completed</a> () const </td></tr>
<tr class="separator:a10961d61eb650f91fa737270dd690a0b inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae41c8b743b7c1eae699b809b2dd70b3 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#aae41c8b743b7c1eae699b809b2dd70b3">is_all_mappers_completed</a> () const </td></tr>
<tr class="separator:aae41c8b743b7c1eae699b809b2dd70b3 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf8238628b47e5f3012f6ed2a40a2cea inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#abf8238628b47e5f3012f6ed2a40a2cea">get_mappers_count</a> () const </td></tr>
<tr class="separator:abf8238628b47e5f3012f6ed2a40a2cea inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa772088b0352368643c289f4ea42a166 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#aa772088b0352368643c289f4ea42a166">get_reducers_count</a> () const </td></tr>
<tr class="separator:aa772088b0352368643c289f4ea42a166 inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab23b14c649b4076dbff2bc236eb3b2dc inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ab23b14c649b4076dbff2bc236eb3b2dc">get_all_count</a> () const </td></tr>
<tr class="separator:ab23b14c649b4076dbff2bc236eb3b2dc inherit pub_methods_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; LogGleanerControlBlock &gt;</a></td></tr>
<tr class="memitem:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ab3209bc9bd57c99f0ad601f33ec77d1e">Attachable</a> ()</td></tr>
<tr class="separator:ab3209bc9bd57c99f0ad601f33ec77d1e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad91af21656ffcf7eeb56a5f7d0f5f661">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:ad91af21656ffcf7eeb56a5f7d0f5f661 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ac28be42953c806e4c4e0ad8f99201dae">Attachable</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, LogGleanerControlBlock *control_block)</td></tr>
<tr class="separator:ac28be42953c806e4c4e0ad8f99201dae inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#ad1182f6bd28f64e3c48bf5ee36d54cce">Attachable</a> (LogGleanerControlBlock *control_block)</td></tr>
<tr class="separator:ad1182f6bd28f64e3c48bf5ee36d54cce inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a7892c78e38fb5f025ea73939a25c9d2e">Attachable</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a7892c78e38fb5f025ea73939a25c9d2e inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aed95388e1a77a81a5d7d04cf28ef3577">~Attachable</a> ()</td></tr>
<tr class="separator:aed95388e1a77a81a5d7d04cf28ef3577 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a0666676a4eaed1c0fdf94a2e1b00c099">operator=</a> (const <a class="el" href="classfoedus_1_1Attachable.html">Attachable</a> &amp;other)</td></tr>
<tr class="separator:a0666676a4eaed1c0fdf94a2e1b00c099 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a484796b2fffa361b9a6ed2f1b7f61a35">attach</a> (LogGleanerControlBlock *control_block)</td></tr>
<tr class="memdesc:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attaches to the given shared memory.  <a href="#a484796b2fffa361b9a6ed2f1b7f61a35">More...</a><br /></td></tr>
<tr class="separator:a484796b2fffa361b9a6ed2f1b7f61a35 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#aebf4adece08c298864ce05ddd9461a0c">is_attached</a> () const</td></tr>
<tr class="memdesc:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already attached to some shared memory.  <a href="#aebf4adece08c298864ce05ddd9461a0c">More...</a><br /></td></tr>
<tr class="separator:aebf4adece08c298864ce05ddd9461a0c inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">LogGleanerControlBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5b324e3abf302a59801aa73419bb4fad">get_control_block</a> () const</td></tr>
<tr class="separator:a5b324e3abf302a59801aa73419bb4fad inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a44f07b6dbb803d41d16b40182e8ff583">get_engine</a> () const</td></tr>
<tr class="separator:a44f07b6dbb803d41d16b40182e8ff583 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#acd701f80820c2ef1f665bda157346021">set_engine</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine)</td></tr>
<tr class="separator:acd701f80820c2ef1f665bda157346021 inherit pub_methods_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a4e4c9be9ac8dae3f3d9bd7b97eba4de8"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html#a4e4c9be9ac8dae3f3d9bd7b97eba4de8">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;v)</td></tr>
<tr class="separator:a4e4c9be9ac8dae3f3d9bd7b97eba4de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_attribs_classfoedus_1_1snapshot_1_1LogGleanerRef"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classfoedus_1_1snapshot_1_1LogGleanerRef')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html">foedus::snapshot::LogGleanerRef</a></td></tr>
<tr class="memitem:ab0d22b509364b653120b9908b2cb46d5 inherit pro_attribs_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1PartitionerMetadata.html">storage::PartitionerMetadata</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ab0d22b509364b653120b9908b2cb46d5">partitioner_metadata_</a></td></tr>
<tr class="separator:ab0d22b509364b653120b9908b2cb46d5 inherit pro_attribs_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b72ab975f68f797d31571a410acfe6 inherit pro_attribs_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a23b72ab975f68f797d31571a410acfe6">partitioner_data_</a></td></tr>
<tr class="separator:a23b72ab975f68f797d31571a410acfe6 inherit pro_attribs_classfoedus_1_1snapshot_1_1LogGleanerRef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classfoedus_1_1Attachable"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classfoedus_1_1Attachable')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classfoedus_1_1Attachable.html">foedus::Attachable&lt; LogGleanerControlBlock &gt;</a></td></tr>
<tr class="memitem:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a></td></tr>
<tr class="memdesc:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most attachable object stores an engine pointer (local engine), so we define it here.  <a href="#a5f84f871a1d36f9ee990f3175661cd99">More...</a><br /></td></tr>
<tr class="separator:a5f84f871a1d36f9ee990f3175661cd99 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memItemLeft" align="right" valign="top">LogGleanerControlBlock *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a></td></tr>
<tr class="memdesc:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="mdescLeft">&#160;</td><td class="mdescRight">The shared data on shared memory that has been initialized in some SOC or master engine.  <a href="#af9f87c691e2df0b04322e6df8d7c0d81">More...</a><br /></td></tr>
<tr class="separator:af9f87c691e2df0b04322e6df8d7c0d81 inherit pro_attribs_classfoedus_1_1Attachable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7bcf3a6761f65f3f274e682fb3d3c5a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::snapshot::LogGleaner::LogGleaner </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1snapshot_1_1LogGleanerResource.html">LogGleanerResource</a> *&#160;</td>
          <td class="paramname"><em>gleaner_resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1snapshot_1_1Snapshot.html">Snapshot</a> &amp;&#160;</td>
          <td class="paramname"><em>new_snapshot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="log__gleaner__impl_8cpp_source.html#l00052">52</a> of file <a class="el" href="log__gleaner__impl_8cpp_source.html">log_gleaner_impl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  : <a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a77c97ba61ccb4b52741a44f30edd7e23">LogGleanerRef</a>(engine),</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    gleaner_resource_(gleaner_resource),</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    new_snapshot_(new_snapshot) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogGleanerRef_html_a77c97ba61ccb4b52741a44f30edd7e23"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a77c97ba61ccb4b52741a44f30edd7e23">foedus::snapshot::LogGleanerRef::LogGleanerRef</a></div><div class="ttdeci">LogGleanerRef()</div><div class="ttdef"><b>Definition:</b> <a href="log__gleaner__ref_8cpp_source.html#l00026">log_gleaner_ref.cpp:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ad589fd28ad2f3a7bacfcecddf39918"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::snapshot::LogGleaner::LogGleaner </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6e57a8ebf0abaaedff04d6ffad1189a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::snapshot::LogGleaner::LogGleaner </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a617c3de45c34c6533c7f3e82216557f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::snapshot::LogGleaner::execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main routine of log gleaner. </p>

<p>Definition at line <a class="el" href="log__gleaner__impl_8cpp_source.html#l00148">148</a> of file <a class="el" href="log__gleaner__impl_8cpp_source.html">log_gleaner_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="attachable_8hpp_source.html#l00111">foedus::Attachable&lt; LogGleanerControlBlock &gt;::control_block_</a>, <a class="el" href="stop__watch_8hpp_source.html#l00051">foedus::debugging::StopWatch::elapsed_sec()</a>, <a class="el" href="attachable_8hpp_source.html#l00107">foedus::Attachable&lt; LogGleanerControlBlock &gt;::engine_</a>, <a class="el" href="shared__memory__repo_8hpp_source.html#l00514">foedus::soc::SharedMemoryRepo::get_global_memory_anchors()</a>, <a class="el" href="soc__manager_8cpp_source.html#l00038">foedus::soc::SocManager::get_shared_memory_repo()</a>, <a class="el" href="log__gleaner__ref_8cpp_source.html#l00076">foedus::snapshot::LogGleanerRef::get_snapshot_id()</a>, <a class="el" href="engine_8cpp_source.html#l00059">foedus::Engine::get_soc_manager()</a>, <a class="el" href="log__gleaner__ref_8cpp_source.html#l00061">foedus::snapshot::LogGleanerRef::is_all_completed()</a>, <a class="el" href="log__gleaner__ref_8cpp_source.html#l00057">foedus::snapshot::LogGleanerRef::is_all_exitted()</a>, <a class="el" href="log__gleaner__ref_8cpp_source.html#l00071">foedus::snapshot::LogGleanerRef::is_error()</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="assorted__func_8hpp_source.html#l00256">SPINLOCK_WHILE</a>, and <a class="el" href="stop__watch_8cpp_source.html#l00035">foedus::debugging::StopWatch::stop()</a>.</p>

<p>Referenced by <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00386">foedus::snapshot::SnapshotManagerPimpl::glean_logs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                               {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner starts running: snapshot_id=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a429b6bdd5e14d8ce0ad71aaf44d25f93">get_snapshot_id</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  clear_all();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 1: Design partitions for all storages...&quot;</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  debugging::StopWatch watch1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="comment">// Another approach is to delay this step until some mapper really needs it so that we can</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="comment">// skip partition-designing for storages that weren&#39;t modified.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="comment">// However, it requires synchronization in mapper/reducer and this step is anyway fast enough.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// So, we so far simply design partitions for all of them.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(design_partitions());</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  watch1.stop();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 1: Ended in &quot;</span> &lt;&lt; watch1.elapsed_sec() &lt;&lt; <span class="stringliteral">&quot;s&quot;</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 2: Run mappers/reducers...&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  debugging::StopWatch watch2;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// Request each node&#39;s snapshot manager to launch mappers/reducers threads</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;gleaning_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">get_soc_manager</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c">get_shared_memory_repo</a>()-&gt;<a class="code" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb">get_global_memory_anchors</a>()-&gt;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    snapshot_manager_memory_-&gt;wakeup_snapshot_children();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// then, wait until all mappers/reducers are done</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="group__ASSORTED.html#gae932f87b60cbd230347151ccf33eed86">SPINLOCK_WHILE</a>(!<a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ac5b28bcfdc09bd7fe48cd7dd1e687fd1">is_error</a>() &amp;&amp; !<a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a10961d61eb650f91fa737270dd690a0b">is_all_completed</a>()) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// snapshot is an infrequent operation, doesn&#39;t have to wake up immediately.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// just sleep for a while</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    std::this_thread::sleep_for(std::chrono::milliseconds(10));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;gleaning_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  watch2.stop();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 2: Ended in &quot;</span> &lt;&lt; watch2.elapsed_sec() &lt;&lt; <span class="stringliteral">&quot;s&quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 3: Combine outputs from reducers (root page info)...&quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  debugging::StopWatch watch3;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ac5b28bcfdc09bd7fe48cd7dd1e687fd1">is_error</a>()) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;Some mapper/reducer got an error. &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a10961d61eb650f91fa737270dd690a0b">is_all_completed</a>()) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;gleaner stopped without completion. cancelled? &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;All mappers/reducers successfully done. Now on to the final phase.&quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(construct_root_pages());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  watch3.stop();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 3: Ended in &quot;</span> &lt;&lt; watch3.elapsed_sec() &lt;&lt; <span class="stringliteral">&quot;s&quot;</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner Step 4: Uninitializing...&quot;</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(cancel_reducers_mappers());</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ac5b28bcfdc09bd7fe48cd7dd1e687fd1">is_error</a>() || <a class="code" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ae06d65ba38a5838c873c3b9b788905f3">is_all_exitted</a>());</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Gleaner ends&quot;</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedMemoryRepo_html_a1c21cc6a27cabaf4a8c9dc26985aacfb"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb">foedus::soc::SharedMemoryRepo::get_global_memory_anchors</a></div><div class="ttdeci">GlobalMemoryAnchors * get_global_memory_anchors()</div><div class="ttdef"><b>Definition:</b> <a href="shared__memory__repo_8hpp_source.html#l00514">shared_memory_repo.hpp:514</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; LogGleanerControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogGleanerRef_html_ac5b28bcfdc09bd7fe48cd7dd1e687fd1"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ac5b28bcfdc09bd7fe48cd7dd1e687fd1">foedus::snapshot::LogGleanerRef::is_error</a></div><div class="ttdeci">bool is_error() const </div><div class="ttdef"><b>Definition:</b> <a href="log__gleaner__ref_8cpp_source.html#l00071">log_gleaner_ref.cpp:71</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; LogGleanerControlBlock &gt;::control_block_</a></div><div class="ttdeci">LogGleanerControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gae932f87b60cbd230347151ccf33eed86"><div class="ttname"><a href="group__ASSORTED.html#gae932f87b60cbd230347151ccf33eed86">SPINLOCK_WHILE</a></div><div class="ttdeci">#define SPINLOCK_WHILE(x)</div><div class="ttdoc">A macro to busy-wait (spinlock) with occasional pause. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00256">assorted_func.hpp:256</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogGleanerRef_html_a10961d61eb650f91fa737270dd690a0b"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a10961d61eb650f91fa737270dd690a0b">foedus::snapshot::LogGleanerRef::is_all_completed</a></div><div class="ttdeci">bool is_all_completed() const </div><div class="ttdef"><b>Definition:</b> <a href="log__gleaner__ref_8cpp_source.html#l00061">log_gleaner_ref.cpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogGleanerRef_html_a429b6bdd5e14d8ce0ad71aaf44d25f93"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a429b6bdd5e14d8ce0ad71aaf44d25f93">foedus::snapshot::LogGleanerRef::get_snapshot_id</a></div><div class="ttdeci">SnapshotId get_snapshot_id() const </div><div class="ttdef"><b>Definition:</b> <a href="log__gleaner__ref_8cpp_source.html#l00076">log_gleaner_ref.cpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogGleanerRef_html_ae06d65ba38a5838c873c3b9b788905f3"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ae06d65ba38a5838c873c3b9b788905f3">foedus::snapshot::LogGleanerRef::is_all_exitted</a></div><div class="ttdeci">bool is_all_exitted() const </div><div class="ttdef"><b>Definition:</b> <a href="log__gleaner__ref_8cpp_source.html#l00057">log_gleaner_ref.cpp:57</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_ae9ad7ab6a3df52b0e9f0e50ede6faa2e"><div class="ttname"><a href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e">foedus::Engine::get_soc_manager</a></div><div class="ttdeci">soc::SocManager * get_soc_manager() const </div><div class="ttdoc">See SOC and IPC. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00059">engine.cpp:59</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SocManager_html_a627cf434892c441c90c2de7c20637e9c"><div class="ttname"><a href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c">foedus::soc::SocManager::get_shared_memory_repo</a></div><div class="ttdeci">SharedMemoryRepo * get_shared_memory_repo()</div><div class="ttdoc">Returns the shared memories maintained across SOCs. </div><div class="ttdef"><b>Definition:</b> <a href="soc__manager_8cpp_source.html#l00038">soc_manager.cpp:38</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_cgraph.png" border="0" usemap="#classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_cgraph" alt=""/></div>
<map name="classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_cgraph" id="classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1debugging_1_1StopWatch.html#acc122593c59aa99c4bed52c0cb8e9a20" title="foedus::debugging::\lStopWatch::elapsed_sec" alt="" coords="261,5,429,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a1c21cc6a27cabaf4a8c9dc26985aacfb" title="foedus::soc::SharedMemory\lRepo::get_global_memory\l_anchors" alt="" coords="253,71,438,127"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SocManager.html#a627cf434892c441c90c2de7c20637e9c" title="Returns the shared memories maintained across SOCs. " alt="" coords="255,152,435,193"/>
<area shape="rect" id="node5" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a429b6bdd5e14d8ce0ad71aaf44d25f93" title="foedus::snapshot::LogGleaner\lRef::get_snapshot_id" alt="" coords="248,217,443,259"/>
<area shape="rect" id="node7" href="classfoedus_1_1Engine.html#ae9ad7ab6a3df52b0e9f0e50ede6faa2e" title="See SOC and IPC. " alt="" coords="278,283,413,324"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#a10961d61eb650f91fa737270dd690a0b" title="foedus::snapshot::LogGleaner\lRef::is_all_completed" alt="" coords="248,348,443,389"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ae06d65ba38a5838c873c3b9b788905f3" title="foedus::snapshot::LogGleaner\lRef::is_all_exitted" alt="" coords="248,413,443,455"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#ac5b28bcfdc09bd7fe48cd7dd1e687fd1" title="foedus::snapshot::LogGleaner\lRef::is_error" alt="" coords="248,479,443,520"/>
<area shape="rect" id="node11" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="278,544,413,585"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1LogGleanerRef.html#aa21d824a0cd1489c832ed6d6b7105331" title="foedus::snapshot::LogGleaner\lRef::get_cur_snapshot" alt="" coords="491,217,685,259"/>
<area shape="rect" id="node12" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="507,511,669,552"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="521,576,655,617"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_icgraph.png" border="0" usemap="#classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_icgraph" alt=""/></div>
<map name="classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_icgraph" id="classfoedus_1_1snapshot_1_1LogGleaner_a617c3de45c34c6533c7f3e82216557f4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a75c5d41290ab6f960725a004622dc3be" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="248,39,432,80"/>
<area shape="rect" id="node3" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="480,31,691,87"/>
<area shape="rect" id="node4" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="767,5,921,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="739,71,949,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="997,5,1192,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="997,71,1192,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1629807dcb35f0174fa6ad6e247eda8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::map&lt;<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">storage::SnapshotPagePointer</a>&gt;&amp; foedus::snapshot::LogGleaner::get_new_root_page_pointers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns pointers to new root pages constructed at the end of gleaning. </p>

<p>Definition at line <a class="el" href="log__gleaner__impl_8hpp_source.html#l00119">119</a> of file <a class="el" href="log__gleaner__impl_8hpp_source.html">log_gleaner_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00386">foedus::snapshot::SnapshotManagerPimpl::glean_logs()</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;          {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span> new_root_page_pointers_;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1snapshot_1_1LogGleaner_a1629807dcb35f0174fa6ad6e247eda8f_icgraph.png" border="0" usemap="#classfoedus_1_1snapshot_1_1LogGleaner_a1629807dcb35f0174fa6ad6e247eda8f_icgraph" alt=""/></div>
<map name="classfoedus_1_1snapshot_1_1LogGleaner_a1629807dcb35f0174fa6ad6e247eda8f_icgraph" id="classfoedus_1_1snapshot_1_1LogGleaner_a1629807dcb35f0174fa6ad6e247eda8f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a75c5d41290ab6f960725a004622dc3be" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="248,39,432,80"/>
<area shape="rect" id="node3" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="480,31,691,87"/>
<area shape="rect" id="node4" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="767,5,921,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="739,71,949,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="997,5,1192,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="997,71,1192,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a0a917c98d4fae6bfcae4c5166bbe49c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a>&amp; foedus::snapshot::LogGleaner::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0cbc12046b8663cdbf375ad56fb79e7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::snapshot::LogGleaner::to_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="log__gleaner__impl_8cpp_source.html#l00307">307</a> of file <a class="el" href="log__gleaner__impl_8cpp_source.html">log_gleaner_impl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                                      {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  std::stringstream stream;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  stream &lt;&lt; *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">return</span> stream.str();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a4e4c9be9ac8dae3f3d9bd7b97eba4de8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="log__gleaner__impl_8cpp_source.html#l00312">312</a> of file <a class="el" href="log__gleaner__impl_8cpp_source.html">log_gleaner_impl.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                                           {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;LogGleaner&gt;&quot;</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    &lt;&lt; v.new_snapshot_</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;completed_count_&gt;&quot;</span> &lt;&lt; v.control_block_-&gt;completed_count_ &lt;&lt; <span class="stringliteral">&quot;&lt;/completed_count_&gt;&quot;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;completed_mapper_count_&gt;&quot;</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      &lt;&lt; v.control_block_-&gt;completed_mapper_count_ &lt;&lt; <span class="stringliteral">&quot;&lt;/completed_mapper_count_&gt;&quot;</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;error_count_&gt;&quot;</span> &lt;&lt; v.control_block_-&gt;error_count_ &lt;&lt; <span class="stringliteral">&quot;&lt;/error_count_&gt;&quot;</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;exit_count_&gt;&quot;</span> &lt;&lt; v.control_block_-&gt;exit_count_ &lt;&lt; <span class="stringliteral">&quot;&lt;/exit_count_&gt;&quot;</span>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/LogGleaner&gt;&quot;</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/snapshot/<a class="el" href="log__gleaner__impl_8hpp_source.html">log_gleaner_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/snapshot/<a class="el" href="log__gleaner__impl_8cpp_source.html">log_gleaner_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1snapshot.html">snapshot</a></li><li class="navelem"><a class="el" href="classfoedus_1_1snapshot_1_1LogGleaner.html">LogGleaner</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
