<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::xct::McsWwOwnerlessImpl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::xct::McsWwOwnerlessImpl Class Reference<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__XCT.html">Transaction Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A ownerless (contextless) interface for <a class="el" href="classfoedus_1_1xct_1_1McsWwImpl.html" title="A specialized/simplified implementation of an MCS-locking Algorithm for exclusive-only (WW) locks...">McsWwImpl</a>.  
 <a href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A ownerless (contextless) interface for <a class="el" href="classfoedus_1_1xct_1_1McsWwImpl.html" title="A specialized/simplified implementation of an MCS-locking Algorithm for exclusive-only (WW) locks...">McsWwImpl</a>. </p>
<p>Conceptually this is part of <a class="el" href="classfoedus_1_1xct_1_1McsWwImpl.html" title="A specialized/simplified implementation of an MCS-locking Algorithm for exclusive-only (WW) locks...">McsWwImpl</a>, but this doesn't depend on Adaptor because guests don't need any context in MCSg. We separate the methods to this class for easier use. </p>

<p>Definition at line <a class="el" href="xct__mcs__impl_8hpp_source.html#l00218">218</a> of file <a class="el" href="xct__mcs__impl_8hpp_source.html">xct_mcs_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="xct__mcs__impl_8hpp_source.html">xct_mcs_impl.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aedd38a5452ed706982cf92df46006fc1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#aedd38a5452ed706982cf92df46006fc1">McsWwOwnerlessImpl</a> ()=delete</td></tr>
<tr class="separator:aedd38a5452ed706982cf92df46006fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e58b541a16c7ce93dff3342b59bb9e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#a5e58b541a16c7ce93dff3342b59bb9e2">~McsWwOwnerlessImpl</a> ()=delete</td></tr>
<tr class="separator:a5e58b541a16c7ce93dff3342b59bb9e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a1ccdb01d5d5921f397b5e6e138e4435c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#a1ccdb01d5d5921f397b5e6e138e4435c">ownerless_acquire_unconditional</a> (<a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *lock)</td></tr>
<tr class="memdesc:a1ccdb01d5d5921f397b5e6e138e4435c"><td class="mdescLeft">&#160;</td><td class="mdescRight">[WW-Guest] Unconditionally takes exclusive-only <b>guest</b> lock on the given MCSg lock.  <a href="#a1ccdb01d5d5921f397b5e6e138e4435c">More...</a><br /></td></tr>
<tr class="separator:a1ccdb01d5d5921f397b5e6e138e4435c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5598adda6c5660dbad40be50c34aeb8d"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#a5598adda6c5660dbad40be50c34aeb8d">ownerless_acquire_try</a> (<a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *lock)</td></tr>
<tr class="memdesc:a5598adda6c5660dbad40be50c34aeb8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">[WW-Guest] Try to take an exclusive <b>guest</b> lock on the given MCSg lock.  <a href="#a5598adda6c5660dbad40be50c34aeb8d">More...</a><br /></td></tr>
<tr class="separator:a5598adda6c5660dbad40be50c34aeb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401267b664485526790472daafedb231"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#a401267b664485526790472daafedb231">ownerless_release</a> (<a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *lock)</td></tr>
<tr class="separator:a401267b664485526790472daafedb231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef284a7c1407d3136647b9f162533c3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#a7ef284a7c1407d3136647b9f162533c3">ownerless_initial</a> (<a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *lock)</td></tr>
<tr class="separator:a7ef284a7c1407d3136647b9f162533c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aedd38a5452ed706982cf92df46006fc1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::McsWwOwnerlessImpl::McsWwOwnerlessImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5e58b541a16c7ce93dff3342b59bb9e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::McsWwOwnerlessImpl::~McsWwOwnerlessImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a5598adda6c5660dbad40be50c34aeb8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::McsWwOwnerlessImpl::ownerless_acquire_try </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>[WW-Guest] Try to take an exclusive <b>guest</b> lock on the given MCSg lock. </p>
<dl class="section return"><dt>Returns</dt><dd>whether we got the lock. If you receive true, you are responsible to call <a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html#a401267b664485526790472daafedb231">ownerless_release()</a> </dd></dl>

<p>Definition at line <a class="el" href="xct__mcs__impl_8cpp_source.html#l00292">292</a> of file <a class="el" href="xct__mcs__impl_8cpp_source.html">xct_mcs_impl.cpp</a>.</p>

<p>References <a class="el" href="xct__mcs__impl_8cpp_source.html#l00034">foedus::xct::assert_mcs_aligned()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00334">foedus::xct::McsWwLock::is_locked()</a>, <a class="el" href="xct__id_8hpp_source.html#l00230">foedus::xct::McsWwBlockData::is_valid_relaxed()</a>, <a class="el" href="xct__id_8hpp_source.html#l00158">foedus::xct::kMcsGuestId</a>, <a class="el" href="xct__id_8hpp_source.html#l00377">foedus::xct::McsWwLock::tail_</a>, and <a class="el" href="xct__id_8hpp_source.html#l00189">foedus::xct::McsWwBlockData::word_</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                                                  {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Similar to acquire_try()</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(mcs_lock);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keyword">auto</span>* int_address = &amp;(mcs_lock-&gt;tail_.word_);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(int_address);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  McsWwBlockData pred;                      <span class="comment">// purely local copy. okay to be always relaxed.</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!pred.is_valid_relaxed());</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordtype">bool</span> swapped = assorted::raw_atomic_compare_exchange_weak&lt;uint64_t&gt;(</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    &amp;(mcs_lock-&gt;tail_.word_),</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    &amp;pred.word_,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="namespacefoedus_1_1xct.html#a35fe0c38c087f59d229b9b87754e5319">kMcsGuestId</a>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordflow">if</span> (swapped) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mcs_lock-&gt;is_locked());</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    DVLOG(2) &lt;&lt; <span class="stringliteral">&quot;Okay, got a guest lock uncontended.&quot;</span>;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// We can&#39;t test is_guest here because we might now have a successor swapping it.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!pred.is_valid_relaxed());</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a35fe0c38c087f59d229b9b87754e5319"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a35fe0c38c087f59d229b9b87754e5319">foedus::xct::kMcsGuestId</a></div><div class="ttdeci">const uint64_t kMcsGuestId</div><div class="ttdoc">A special value meaning the lock is held by a non-regular guest that doesn&#39;t have a context...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00158">xct_id.hpp:158</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_abc92f6bf35f5db4360f8596b09f778f8"><div class="ttname"><a href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">foedus::xct::assert_mcs_aligned</a></div><div class="ttdeci">void assert_mcs_aligned(const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="xct__mcs__impl_8cpp_source.html#l00034">xct_mcs_impl.cpp:34</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a5598adda6c5660dbad40be50c34aeb8d_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a5598adda6c5660dbad40be50c34aeb8d_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a5598adda6c5660dbad40be50c34aeb8d_cgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a5598adda6c5660dbad40be50c34aeb8d_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8" title="foedus::xct::assert\l_mcs_aligned" alt="" coords="275,5,406,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="256,71,425,112"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="473,100,675,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1ccdb01d5d5921f397b5e6e138e4435c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::McsWwOwnerlessImpl::ownerless_acquire_unconditional </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>[WW-Guest] Unconditionally takes exclusive-only <b>guest</b> lock on the given MCSg lock. </p>
<p>Ownerless interface for WW-lock implementations.</p>

<p>Definition at line <a class="el" href="xct__mcs__impl_8cpp_source.html#l00272">272</a> of file <a class="el" href="xct__mcs__impl_8cpp_source.html">xct_mcs_impl.cpp</a>.</p>

<p>References <a class="el" href="xct__mcs__impl_8cpp_source.html#l00034">foedus::xct::assert_mcs_aligned()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00334">foedus::xct::McsWwLock::is_locked()</a>, <a class="el" href="xct__id_8hpp_source.html#l00230">foedus::xct::McsWwBlockData::is_valid_relaxed()</a>, <a class="el" href="xct__id_8hpp_source.html#l00158">foedus::xct::kMcsGuestId</a>, <a class="el" href="xct__mcs__impl_8cpp_source.html#l00041">foedus::xct::spin_until()</a>, <a class="el" href="xct__id_8hpp_source.html#l00377">foedus::xct::McsWwLock::tail_</a>, and <a class="el" href="xct__id_8hpp_source.html#l00189">foedus::xct::McsWwBlockData::word_</a>.</p>

<p>Referenced by <a class="el" href="xct__id_8cpp_source.html#l00078">foedus::xct::McsWwLock::ownerless_acquire_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                                                                            {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// Basically _all_ writes in this function must come with some memory barrier. Be careful!</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="comment">// Also, the performance of this method really matters, especially that of common path.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Check objdump -d. Everything in common path should be inlined.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// Also, check minimal sufficient mfences (note, xchg implies lock prefix. not a compiler&#39;s bug!).</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(mcs_lock);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keyword">auto</span>* int_address = &amp;(mcs_lock-&gt;tail_.word_);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(int_address);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490">spin_until</a>([mcs_lock, int_address]{</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    McsWwBlockData old;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!old.is_valid_relaxed());</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> assorted::raw_atomic_compare_exchange_weak&lt;uint64_t&gt;(</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      int_address,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      &amp;old.word_,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="namespacefoedus_1_1xct.html#a35fe0c38c087f59d229b9b87754e5319">kMcsGuestId</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  });</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Okay, now I hold the lock. me=guest&quot;</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mcs_lock-&gt;is_locked());</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a35fe0c38c087f59d229b9b87754e5319"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a35fe0c38c087f59d229b9b87754e5319">foedus::xct::kMcsGuestId</a></div><div class="ttdeci">const uint64_t kMcsGuestId</div><div class="ttdoc">A special value meaning the lock is held by a non-regular guest that doesn&#39;t have a context...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00158">xct_id.hpp:158</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ad815773827f1856f8fd25a9d4b41d490"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490">foedus::xct::spin_until</a></div><div class="ttdeci">void spin_until(COND spin_until_cond)</div><div class="ttdef"><b>Definition:</b> <a href="xct__mcs__impl_8cpp_source.html#l00041">xct_mcs_impl.cpp:41</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_abc92f6bf35f5db4360f8596b09f778f8"><div class="ttname"><a href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">foedus::xct::assert_mcs_aligned</a></div><div class="ttdeci">void assert_mcs_aligned(const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="xct__mcs__impl_8cpp_source.html#l00034">xct_mcs_impl.cpp:34</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_cgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8" title="foedus::xct::assert\l_mcs_aligned" alt="" coords="275,5,406,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="256,71,425,112"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="473,93,675,135"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490" title="foedus::xct::spin_until" alt="" coords="266,187,415,214"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1assorted.html#aba5893ad8aab7d6aafff7be7f92e1372" title="Spin locally until the given condition returns true. " alt="" coords="499,180,649,221"/>
<area shape="rect" id="node7" href="classfoedus_1_1debugging_1_1RdtscWatch.html#afc5d436b00dfd6af4727e4975e84aa75" title="foedus::debugging::\lRdtscWatch::elapsed" alt="" coords="945,151,1092,192"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1assorted.html#aea055a054d205c76d8f221de4f6aa058" title="foedus::assorted::is\l_running_on_valgrind" alt="" coords="739,147,881,188"/>
<area shape="rect" id="node9" href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb" title="Invoke _mm_pause(), x86 PAUSE instruction, or something equivalent in the env. " alt="" coords="723,212,897,253"/>
<area shape="rect" id="node10" href="classfoedus_1_1debugging_1_1RdtscWatch.html#a0f5961269d79e636777d722ade37dd2e" title="Take another current time tick. " alt="" coords="743,277,877,319"/>
<area shape="rect" id="node11" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="951,277,1086,319"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_icgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a1ccdb01d5d5921f397b5e6e138e4435c_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1xct_1_1McsWwLock.html#adb1f6d8968c71a9ce91c7a3c812cb43c" title="foedus::xct::McsWwLock\l::ownerless_acquire_lock" alt="" coords="256,13,425,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1McsOwnerlessLockScope.html#a42e3a3f1d5511994623010af52ff9a28" title="Acquires the lock. " alt="" coords="473,13,653,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1McsOwnerlessLockScope.html#afc93395843770944d528724b598e390f" title="foedus::xct::McsOwnerless\lLockScope::McsOwnerlessLockScope" alt="" coords="701,13,948,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7ef284a7c1407d3136647b9f162533c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::McsWwOwnerlessImpl::ownerless_initial </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct__mcs__impl_8cpp_source.html#l00315">315</a> of file <a class="el" href="xct__mcs__impl_8cpp_source.html">xct_mcs_impl.cpp</a>.</p>

<p>References <a class="el" href="xct__mcs__impl_8cpp_source.html#l00034">foedus::xct::assert_mcs_aligned()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00334">foedus::xct::McsWwLock::is_locked()</a>, and <a class="el" href="xct__id_8hpp_source.html#l00357">foedus::xct::McsWwLock::reset_guest_id_release()</a>.</p>

<p>Referenced by <a class="el" href="xct__id_8cpp_source.html#l00086">foedus::xct::McsWwLock::ownerless_initial_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                                              {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(mcs_lock);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!mcs_lock-&gt;is_locked());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  mcs_lock-&gt;reset_guest_id_release();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_abc92f6bf35f5db4360f8596b09f778f8"><div class="ttname"><a href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">foedus::xct::assert_mcs_aligned</a></div><div class="ttdeci">void assert_mcs_aligned(const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="xct__mcs__impl_8cpp_source.html#l00034">xct_mcs_impl.cpp:34</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_cgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8" title="foedus::xct::assert\l_mcs_aligned" alt="" coords="275,5,406,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="256,71,425,112"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1McsWwLock.html#aeb9387704d4395c40dc90ad7743a56a6" title="foedus::xct::McsWwLock\l::reset_guest_id_release" alt="" coords="256,136,425,177"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="473,71,675,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a91e84e53293e5aff556661071d20ca3c" title="foedus::xct::McsWwBlockData\l::set_combined_release" alt="" coords="473,136,675,177"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_icgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a7ef284a7c1407d3136647b9f162533c3_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1xct_1_1McsWwLock.html#a6cff23a5832a37c988d10252d07efead" title="The followings are implemented in thread_pimpl.cpp along with the above methods, but these don&#39;t use ..." alt="" coords="256,5,425,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1McsOwnerlessLockScope.html#a42e3a3f1d5511994623010af52ff9a28" title="Acquires the lock. " alt="" coords="473,5,653,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1McsOwnerlessLockScope.html#afc93395843770944d528724b598e390f" title="foedus::xct::McsOwnerless\lLockScope::McsOwnerlessLockScope" alt="" coords="701,5,948,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a401267b664485526790472daafedb231"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::McsWwOwnerlessImpl::ownerless_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1McsWwLock.html">McsWwLock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct__mcs__impl_8cpp_source.html#l00321">321</a> of file <a class="el" href="xct__mcs__impl_8cpp_source.html">xct_mcs_impl.cpp</a>.</p>

<p>References <a class="el" href="xct__mcs__impl_8cpp_source.html#l00034">foedus::xct::assert_mcs_aligned()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00235">foedus::xct::McsWwBlockData::is_guest_relaxed()</a>, <a class="el" href="xct__id_8hpp_source.html#l00334">foedus::xct::McsWwLock::is_locked()</a>, <a class="el" href="xct__id_8hpp_source.html#l00230">foedus::xct::McsWwBlockData::is_valid_relaxed()</a>, <a class="el" href="xct__id_8hpp_source.html#l00158">foedus::xct::kMcsGuestId</a>, <a class="el" href="xct__mcs__impl_8cpp_source.html#l00041">foedus::xct::spin_until()</a>, <a class="el" href="xct__id_8hpp_source.html#l00377">foedus::xct::McsWwLock::tail_</a>, and <a class="el" href="xct__id_8hpp_source.html#l00189">foedus::xct::McsWwBlockData::word_</a>.</p>

<p>Referenced by <a class="el" href="xct__id_8cpp_source.html#l00082">foedus::xct::McsWwLock::ownerless_release_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                                                              {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">// Basically _all_ writes in this function must come with some memory barrier. Be careful!</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// Also, the performance of this method really matters, especially that of common path.</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="comment">// Check objdump -d. Everything in common path should be inlined.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="comment">// Also, check minimal sufficient mfences (note, xchg implies lock prefix. not a compiler&#39;s bug!).</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(mcs_lock);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keyword">auto</span>* int_address = &amp;(mcs_lock-&gt;tail_.word_);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">assert_mcs_aligned</a>(int_address);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(mcs_lock-&gt;is_locked());</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490">spin_until</a>([int_address]{</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    McsWwBlockData old(<a class="code" href="namespacefoedus_1_1xct.html#a35fe0c38c087f59d229b9b87754e5319">kMcsGuestId</a>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(old.is_valid_relaxed());</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(old.is_guest_relaxed());</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> assorted::raw_atomic_compare_exchange_weak&lt;uint64_t&gt;(int_address, &amp;old.word_, 0);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  });</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Okay, guest released the lock.&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a35fe0c38c087f59d229b9b87754e5319"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a35fe0c38c087f59d229b9b87754e5319">foedus::xct::kMcsGuestId</a></div><div class="ttdeci">const uint64_t kMcsGuestId</div><div class="ttdoc">A special value meaning the lock is held by a non-regular guest that doesn&#39;t have a context...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00158">xct_id.hpp:158</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ad815773827f1856f8fd25a9d4b41d490"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490">foedus::xct::spin_until</a></div><div class="ttdeci">void spin_until(COND spin_until_cond)</div><div class="ttdef"><b>Definition:</b> <a href="xct__mcs__impl_8cpp_source.html#l00041">xct_mcs_impl.cpp:41</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_abc92f6bf35f5db4360f8596b09f778f8"><div class="ttname"><a href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8">foedus::xct::assert_mcs_aligned</a></div><div class="ttdeci">void assert_mcs_aligned(const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="xct__mcs__impl_8cpp_source.html#l00034">xct_mcs_impl.cpp:34</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_cgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#abc92f6bf35f5db4360f8596b09f778f8" title="foedus::xct::assert\l_mcs_aligned" alt="" coords="291,5,422,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1McsWwBlockData.html#ae1dc97f03080589ed7ad1cabbdf07ae3" title="foedus::xct::McsWwBlockData\l::is_guest_relaxed" alt="" coords="256,71,457,112"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="272,136,441,177"/>
<area shape="rect" id="node5" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="505,159,707,200"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1xct.html#ad815773827f1856f8fd25a9d4b41d490" title="foedus::xct::spin_until" alt="" coords="282,253,431,279"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1assorted.html#aba5893ad8aab7d6aafff7be7f92e1372" title="Spin locally until the given condition returns true. " alt="" coords="531,245,681,287"/>
<area shape="rect" id="node8" href="classfoedus_1_1debugging_1_1RdtscWatch.html#afc5d436b00dfd6af4727e4975e84aa75" title="foedus::debugging::\lRdtscWatch::elapsed" alt="" coords="977,216,1124,257"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1assorted.html#aea055a054d205c76d8f221de4f6aa058" title="foedus::assorted::is\l_running_on_valgrind" alt="" coords="771,212,913,253"/>
<area shape="rect" id="node10" href="group__ASSORTED.html#gaa05e01910d3ea9909f1a64afd62729fb" title="Invoke _mm_pause(), x86 PAUSE instruction, or something equivalent in the env. " alt="" coords="755,277,929,319"/>
<area shape="rect" id="node11" href="classfoedus_1_1debugging_1_1RdtscWatch.html#a0f5961269d79e636777d722ade37dd2e" title="Take another current time tick. " alt="" coords="775,343,909,384"/>
<area shape="rect" id="node12" href="group__DEBUGGING.html#ga48dd46b3a1382506a34fcb4e6e0941f6" title="Returns the current CPU cycle via x86 RDTSC. " alt="" coords="983,343,1118,384"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_icgraph" id="classfoedus_1_1xct_1_1McsWwOwnerlessImpl_a401267b664485526790472daafedb231_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1xct_1_1McsWwLock.html#a5d7d7206c9ffc1261829346148361414" title="foedus::xct::McsWwLock\l::ownerless_release_lock" alt="" coords="256,5,425,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1McsOwnerlessLockScope.html#abe151a050342dbaed862cfb67e02fab7" title="Release the lock if acquired. " alt="" coords="473,5,653,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1McsOwnerlessLockScope.html#a0abce8a09831ca63a4c255a6f6e2132f" title="foedus::xct::McsOwnerless\lLockScope::~McsOwnerlessLockScope" alt="" coords="701,5,956,47"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/xct/<a class="el" href="xct__mcs__impl_8hpp_source.html">xct_mcs_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/xct/<a class="el" href="xct__mcs__impl_8cpp_source.html">xct_mcs_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1xct.html">xct</a></li><li class="navelem"><a class="el" href="classfoedus_1_1xct_1_1McsWwOwnerlessImpl.html">McsWwOwnerlessImpl</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
