<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::storage::hash::HashDataPage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1storage_1_1hash_1_1HashDataPage.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::storage::hash::HashDataPage Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__STORAGE.html">Storage Manager</a> &raquo; <a class="el" href="group__HASH.html">Hashtable Storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents an individual data page in <a class="el" href="group__HASH.html">Hashtable Storage</a>.  
 <a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents an individual data page in <a class="el" href="group__HASH.html">Hashtable Storage</a>. </p>
<p>This is one of the page types in hash. A data page contains full keys and values.</p>
<dl class="section user"><dt>Page Layout</dt><dd><table class="doxtable">
<tr>
<td>Headers, including bloom filter for faster check </td></tr>
<tr>
<td><a class="el" href="structfoedus_1_1storage_1_1Record.html" title="Represents one record in our key-value store. ">Record</a> Data part, which grows forward </td></tr>
<tr>
<th>Unused part </th></tr>
<tr>
<td><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html" title="Fix-sized slot for each record, which is placed at the end of data region. ">Slot</a> part (32 bytes per record), which grows backward </td></tr>
</table>
</dd></dl>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00155">155</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix-sized slot for each record, which is placed at the end of data region.  <a href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aef4fcde9f84d801c1aabd83001eb7f8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">HashDataPage</a> ()=delete</td></tr>
<tr class="separator:aef4fcde9f84d801c1aabd83001eb7f8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af038b3636af13bb6ccfe089f92a10a5d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#af038b3636af13bb6ccfe089f92a10a5d">HashDataPage</a> (const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;other)=delete</td></tr>
<tr class="separator:af038b3636af13bb6ccfe089f92a10a5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd94b36f4051216649467d763ea79875"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#afd94b36f4051216649467d763ea79875">operator=</a> (const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;other)=delete</td></tr>
<tr class="separator:afd94b36f4051216649467d763ea79875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dc5746931434bcc27b2b3b6856c33f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a03dc5746931434bcc27b2b3b6856c33f">initialize_volatile_page</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> storage_id, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> page_id, const <a class="el" href="structfoedus_1_1storage_1_1Page.html">Page</a> *parent, <a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> bin, uint8_t bin_shifts)</td></tr>
<tr class="separator:a03dc5746931434bcc27b2b3b6856c33f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65f65774022d686c807da4f5e2983c26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a65f65774022d686c807da4f5e2983c26">initialize_snapshot_page</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a> storage_id, <a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> page_id, <a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> bin, uint8_t bin_bits, uint8_t bin_shifts)</td></tr>
<tr class="separator:a65f65774022d686c807da4f5e2983c26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a752f776127f131ccc60744c10d5cf490"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a752f776127f131ccc60744c10d5cf490">release_pages_recursive</a> (const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;page_resolver, <a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *batch)</td></tr>
<tr class="separator:a752f776127f131ccc60744c10d5cf490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac653a03fd75011048550f8e9f5dd198d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac653a03fd75011048550f8e9f5dd198d">header</a> ()</td></tr>
<tr class="separator:ac653a03fd75011048550f8e9f5dd198d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde4417aa79c53e2476b0f8b7ab7c8b6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#afde4417aa79c53e2476b0f8b7ab7c8b6">header</a> () const </td></tr>
<tr class="separator:afde4417aa79c53e2476b0f8b7ab7c8b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2fa612bf9214b1d94366eba360167df"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad2fa612bf9214b1d94366eba360167df">is_locked</a> () const </td></tr>
<tr class="separator:ad2fa612bf9214b1d94366eba360167df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2203e4757be26e410e6f49263e439c53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2203e4757be26e410e6f49263e439c53">get_volatile_page_id</a> () const </td></tr>
<tr class="separator:a2203e4757be26e410e6f49263e439c53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1168135e29d8934505f96d7f7e2ee6de"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a1168135e29d8934505f96d7f7e2ee6de">get_snapshot_page_id</a> () const </td></tr>
<tr class="separator:a1168135e29d8934505f96d7f7e2ee6de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac977ed25935d3fa3a8d9651f96349c32"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac977ed25935d3fa3a8d9651f96349c32">next_page</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:ac977ed25935d3fa3a8d9651f96349c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e55d9c0192bc8126fa3bae8ab689f5e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3e55d9c0192bc8126fa3bae8ab689f5e">next_page</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a3e55d9c0192bc8126fa3bae8ab689f5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6286d91dcdb8b6455e20bc770155a0be"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a6286d91dcdb8b6455e20bc770155a0be">next_page_address</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:a6286d91dcdb8b6455e20bc770155a0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c4a6d101bcc97226edacb38483ee21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a28c4a6d101bcc97226edacb38483ee21">next_page_address</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:a28c4a6d101bcc97226edacb38483ee21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2169cfc93933b2b35fea60fe8be9cf8"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html">DataPageBloomFilter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad2169cfc93933b2b35fea60fe8be9cf8">bloom_filter</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:ad2169cfc93933b2b35fea60fe8be9cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9a49ecf998b324449ddf7776ebaf3df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html">DataPageBloomFilter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac9a49ecf998b324449ddf7776ebaf3df">bloom_filter</a> () __attribute__((always_inline))</td></tr>
<tr class="separator:ac9a49ecf998b324449ddf7776ebaf3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b4a13e6f057be1874f637fb9f87c51"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:ac6b4a13e6f057be1874f637fb9f87c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2e82163d7348a6c88fecff711025b08"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a> (<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> record) const __attribute__((always_inline))</td></tr>
<tr class="separator:ac2e82163d7348a6c88fecff711025b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad96b81e0d79c2cbdede77943fe3400cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad96b81e0d79c2cbdede77943fe3400cd">get_slot</a> (<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> record) __attribute__((always_inline))</td></tr>
<tr class="separator:ad96b81e0d79c2cbdede77943fe3400cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501d3dfae095bac5a8f35d578ab9bfab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a501d3dfae095bac5a8f35d578ab9bfab">get_new_slot</a> (<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> record) __attribute__((always_inline))</td></tr>
<tr class="separator:a501d3dfae095bac5a8f35d578ab9bfab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab696a16e6a995a515736ff0a28b47885"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ab696a16e6a995a515736ff0a28b47885">get_slot_address</a> (<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> record) const __attribute__((always_inline))</td></tr>
<tr class="memdesc:ab696a16e6a995a515736ff0a28b47885"><td class="mdescLeft">&#160;</td><td class="mdescRight">same as &amp;<a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot()</a>, but this is more explicit and easier to understand/maintain  <a href="#ab696a16e6a995a515736ff0a28b47885">More...</a><br /></td></tr>
<tr class="separator:ab696a16e6a995a515736ff0a28b47885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5349168bb200032e6fcec457200de84a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a5349168bb200032e6fcec457200de84a">get_slot_address</a> (<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> record) __attribute__((always_inline))</td></tr>
<tr class="separator:a5349168bb200032e6fcec457200de84a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f720ed7ecd8720931ccfeff29769b16"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a1f720ed7ecd8720931ccfeff29769b16">to_slot_index</a> (const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> *slot) const __attribute__((always_inline))</td></tr>
<tr class="separator:a1f720ed7ecd8720931ccfeff29769b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49863802f2bfb024c928a37ea7abce07"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a> (uint16_t offset)</td></tr>
<tr class="separator:a49863802f2bfb024c928a37ea7abce07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f43e30911d75ce75b0af9ca70d5d382"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a1f43e30911d75ce75b0af9ca70d5d382">record_from_offset</a> (uint16_t offset) const </td></tr>
<tr class="separator:a1f43e30911d75ce75b0af9ca70d5d382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4d03b6ce42261195e565bdccaeb12b9"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9">available_space</a> () const </td></tr>
<tr class="memdesc:ae4d03b6ce42261195e565bdccaeb12b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns usable space in bytes.  <a href="#ae4d03b6ce42261195e565bdccaeb12b9">More...</a><br /></td></tr>
<tr class="separator:ae4d03b6ce42261195e565bdccaeb12b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ac1ba8382fecd225d2ad1b6e13dae55"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">next_offset</a> () const </td></tr>
<tr class="memdesc:a9ac1ba8382fecd225d2ad1b6e13dae55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns offset of a next record.  <a href="#a9ac1ba8382fecd225d2ad1b6e13dae55">More...</a><br /></td></tr>
<tr class="separator:a9ac1ba8382fecd225d2ad1b6e13dae55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82dc0eaea96412a4ddb70006b450d754"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754">reserve_record</a> (<a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a> hash, const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">BloomFilterFingerprint</a> &amp;fingerprint, const void *key, uint16_t key_length, uint16_t payload_length)</td></tr>
<tr class="memdesc:a82dc0eaea96412a4ddb70006b450d754"><td class="mdescLeft">&#160;</td><td class="mdescRight">A system transaction that creates a logically deleted record in this page for the given key.  <a href="#a82dc0eaea96412a4ddb70006b450d754">More...</a><br /></td></tr>
<tr class="separator:a82dc0eaea96412a4ddb70006b450d754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3834e18f4738d71f2e8f1a848b9e11d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5">create_record_in_snapshot</a> (<a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> xct_id, <a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a> hash, const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">BloomFilterFingerprint</a> &amp;fingerprint, const void *key, uint16_t key_length, const void *payload, uint16_t payload_length) __attribute__((always_inline))</td></tr>
<tr class="memdesc:a3834e18f4738d71f2e8f1a848b9e11d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">A simplified/efficient version to insert an active record, which must be used only in snapshot pages.  <a href="#a3834e18f4738d71f2e8f1a848b9e11d5">More...</a><br /></td></tr>
<tr class="separator:a3834e18f4738d71f2e8f1a848b9e11d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa03f1438dc159688f49de6e73c851d6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aa03f1438dc159688f49de6e73c851d6e">search_key_physical</a> (<a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a> hash, const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">BloomFilterFingerprint</a> &amp;fingerprint, const void *key, <a class="el" href="group__HASH.html#ga80072e9a1d445f90ee2bd91a16a44267">KeyLength</a> key_length, <a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> record_count, <a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> check_from=0) const </td></tr>
<tr class="memdesc:aa03f1438dc159688f49de6e73c851d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for a physical slot that exactly contains the given key.  <a href="#aa03f1438dc159688f49de6e73c851d6e">More...</a><br /></td></tr>
<tr class="separator:aa03f1438dc159688f49de6e73c851d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c82d9bc3661456265ee9991cba1f98"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a33c82d9bc3661456265ee9991cba1f98">compare_slot_key</a> (<a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> index, <a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a> hash, const void *key, uint16_t key_length) const </td></tr>
<tr class="memdesc:a33c82d9bc3661456265ee9991cba1f98"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns whether the slot contains the exact key specified  <a href="#a33c82d9bc3661456265ee9991cba1f98">More...</a><br /></td></tr>
<tr class="separator:a33c82d9bc3661456265ee9991cba1f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfa062e1acf64b882f466cca8e190fdd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#acfa062e1acf64b882f466cca8e190fdd">get_bin</a> () const </td></tr>
<tr class="separator:acfa062e1acf64b882f466cca8e190fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbabc3c8db8e648082104dc754449864"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#afbabc3c8db8e648082104dc754449864">assert_bin</a> (<a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> bin) const __attribute__((always_inline))</td></tr>
<tr class="separator:afbabc3c8db8e648082104dc754449864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76f0d1e0caffa655e5ffe03c2a59864"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864">protected_set_bin_shifts</a> (uint8_t bin_shifts)</td></tr>
<tr class="memdesc:ad76f0d1e0caffa655e5ffe03c2a59864"><td class="mdescLeft">&#160;</td><td class="mdescRight">this method should be called only in page creation.  <a href="#ad76f0d1e0caffa655e5ffe03c2a59864">More...</a><br /></td></tr>
<tr class="separator:ad76f0d1e0caffa655e5ffe03c2a59864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a8118e0aa8c3ce3c5c6138f2f1aa8c"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a47a8118e0aa8c3ce3c5c6138f2f1aa8c">get_bin_shifts</a> () const </td></tr>
<tr class="separator:a47a8118e0aa8c3ce3c5c6138f2f1aa8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff42645ccbe996e009d1ffe226fe5b42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42">assert_entries</a> () const __attribute__((always_inline))</td></tr>
<tr class="separator:aff42645ccbe996e009d1ffe226fe5b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ba57f24b316aa460765eb960cc7df00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00">assert_entries_impl</a> () const </td></tr>
<tr class="memdesc:a2ba57f24b316aa460765eb960cc7df00"><td class="mdescLeft">&#160;</td><td class="mdescRight">defined in <a class="el" href="hash__page__debug_8cpp.html">hash_page_debug.cpp</a>.  <a href="#a2ba57f24b316aa460765eb960cc7df00">More...</a><br /></td></tr>
<tr class="separator:a2ba57f24b316aa460765eb960cc7df00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a446f51ede965fce59769df74a0044dd8"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8">required_space</a> (uint16_t key_length, uint16_t payload_length)</td></tr>
<tr class="memdesc:a446f51ede965fce59769df74a0044dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns physical_record_length_ for a new record  <a href="#a446f51ede965fce59769df74a0044dd8">More...</a><br /></td></tr>
<tr class="separator:a446f51ede965fce59769df74a0044dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a0997623d4b1299eca25b45a046179842"><td class="memItemLeft" align="right" valign="top">struct&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a0997623d4b1299eca25b45a046179842">ReserveRecords</a></td></tr>
<tr class="separator:a0997623d4b1299eca25b45a046179842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac070399b2f22a1c281daab73fe0a9f27"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac070399b2f22a1c281daab73fe0a9f27">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;v)</td></tr>
<tr class="memdesc:ac070399b2f22a1c281daab73fe0a9f27"><td class="mdescLeft">&#160;</td><td class="mdescRight">defined in <a class="el" href="hash__page__debug_8cpp.html">hash_page_debug.cpp</a>.  <a href="#ac070399b2f22a1c281daab73fe0a9f27">More...</a><br /></td></tr>
<tr class="separator:ac070399b2f22a1c281daab73fe0a9f27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aef4fcde9f84d801c1aabd83001eb7f8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::hash::HashDataPage::HashDataPage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af038b3636af13bb6ccfe089f92a10a5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::storage::hash::HashDataPage::HashDataPage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="afbabc3c8db8e648082104dc754449864"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::assert_bin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a>&#160;</td>
          <td class="paramname"><em>bin</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00413">413</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{ <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(bin_ == bin); }</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aff42645ccbe996e009d1ffe226fe5b42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::assert_entries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00424">424</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="hash__page__debug_8cpp_source.html#l00089">assert_entries_impl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                                   {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00">assert_entries_impl</a>();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a2ba57f24b316aa460765eb960cc7df00"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00">foedus::storage::hash::HashDataPage::assert_entries_impl</a></div><div class="ttdeci">void assert_entries_impl() const </div><div class="ttdoc">defined in hash_page_debug.cpp. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__debug_8cpp_source.html#l00089">hash_page_debug.cpp:89</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aff42645ccbe996e009d1ffe226fe5b42_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_aff42645ccbe996e009d1ffe226fe5b42_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aff42645ccbe996e009d1ffe226fe5b42_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aff42645ccbe996e009d1ffe226fe5b42_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="215,335,376,391"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a47a8118e0aa8c3ce3c5c6138f2f1aa8c" title="foedus::storage::hash\l::HashDataPage::get_bin\l_shifts" alt="" coords="453,5,620,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="424,86,649,127"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac977ed25935d3fa3a8d9651f96349c32" title="foedus::storage::hash\l::HashDataPage::next_page" alt="" coords="444,151,629,193"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a7ab4e97e088ffc9b469ab2f48036abc2" title="usually zero&#45;cleared as part of a data page, but in case of specifically clearing this ..." alt="" coords="460,217,613,273"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ab696a16e6a995a515736ff0a28b47885" title="same as &amp;get_slot(), but this is more explicit and easier to understand/maintain " alt="" coords="451,297,622,353"/>
<area shape="rect" id="node8" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="463,378,610,419"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07" title="foedus::storage::hash\l::HashDataPage::record\l_from_offset" alt="" coords="456,444,617,500"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61" title="Adds the fingerprint to this bloom filter. " alt="" coords="445,525,628,566"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f" title="foedus::storage::hash\l::DataPageBloomFilter\l::extract_fingerprint" alt="" coords="460,591,613,647"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html#a35da6a7faa712cb7cf70355803634063" title="foedus::storage::hash\l::HashDataPage::Slot\l::get_aligned_key_length" alt="" coords="453,671,620,727"/>
<area shape="rect" id="node13" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="697,685,857,712"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ba57f24b316aa460765eb960cc7df00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::assert_entries_impl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>defined in <a class="el" href="hash__page__debug_8cpp.html">hash_page_debug.cpp</a>. </p>

<p>Definition at line <a class="el" href="hash__page__debug_8cpp_source.html#l00089">89</a> of file <a class="el" href="hash__page__debug_8cpp_source.html">hash_page_debug.cpp</a>.</p>

<p>References <a class="el" href="hash__hashinate_8hpp_source.html#l00165">foedus::storage::hash::DataPageBloomFilter::add()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00147">foedus::storage::hash::DataPageBloomFilter::clear()</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00175">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00196">foedus::storage::hash::HashDataPage::Slot::get_aligned_key_length()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00422">get_bin_shifts()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00259">get_slot_address()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00194">foedus::storage::hash::HashDataPage::Slot::hash_</a>, <a class="el" href="hash__hashinate_8cpp_source.html#l00031">foedus::storage::hash::hashinate()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00184">foedus::storage::hash::HashDataPage::Slot::key_length_</a>, <a class="el" href="hash__id_8hpp_source.html#l00110">foedus::storage::hash::kHashDataPageHeaderSize</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00238">next_page()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00171">foedus::storage::hash::HashDataPage::Slot::offset_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00191">foedus::storage::hash::HashDataPage::Slot::payload_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00179">foedus::storage::hash::HashDataPage::Slot::physical_record_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00275">record_from_offset()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, and <a class="el" href="hash__hashinate_8hpp_source.html#l00144">foedus::storage::hash::DataPageBloomFilter::values_</a>.</p>

<p>Referenced by <a class="el" href="hash__page__impl_8hpp_source.html#l00424">assert_entries()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                             {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keyword">const</span> uint8_t bin_shifts = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a47a8118e0aa8c3ce3c5c6138f2f1aa8c">get_bin_shifts</a>();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  uint8_t records = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac977ed25935d3fa3a8d9651f96349c32">next_page</a>().volatile_pointer_.is_null());</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac977ed25935d3fa3a8d9651f96349c32">next_page</a>().snapshot_pointer_ == 0);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  DataPageBloomFilter correct_filter;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  correct_filter.clear();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> i = 0; i &lt; records; ++i) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">const</span> HashDataPage::Slot* slot = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ab696a16e6a995a515736ff0a28b47885">get_slot_address</a>(i);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (i &gt; 0) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="keyword">const</span> HashDataPage::Slot* pre = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ab696a16e6a995a515736ff0a28b47885">get_slot_address</a>(i - 1);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot-&gt;offset_ == pre-&gt;offset_ + pre-&gt;physical_record_length_);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a> hash = <a class="code" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">hashinate</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(slot-&gt;offset_), slot-&gt;key_length_);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot-&gt;hash_ == hash);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> bin = hash &gt;&gt; bin_shifts;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(bin_ == bin);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    correct_filter.add(<a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f">DataPageBloomFilter::extract_fingerprint</a>(slot-&gt;hash_));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot-&gt;physical_record_length_</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      &gt;= slot-&gt;get_aligned_key_length() + slot-&gt;payload_length_);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    uint16_t end_offset = slot-&gt;offset_ + slot-&gt;physical_record_length_;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(end_offset + records * <span class="keyword">sizeof</span>(Slot) &lt;= (<a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a> - <a class="code" href="group__HASH.html#ga110c76b9c31881d7c6f3898d164579d8">kHashDataPageHeaderSize</a>));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; <span class="keyword">sizeof</span>(correct_filter.values_); ++i) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(correct_filter.values_[i] == bloom_filter_.<a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a5e40a9808e4f31042f222f4a823d2936">values_</a>[i]);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a47a8118e0aa8c3ce3c5c6138f2f1aa8c"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a47a8118e0aa8c3ce3c5c6138f2f1aa8c">foedus::storage::hash::HashDataPage::get_bin_shifts</a></div><div class="ttdeci">uint8_t get_bin_shifts() const </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00422">hash_page_impl.hpp:422</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ab696a16e6a995a515736ff0a28b47885"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ab696a16e6a995a515736ff0a28b47885">foedus::storage::hash::HashDataPage::get_slot_address</a></div><div class="ttdeci">const Slot * get_slot_address(DataPageSlotIndex record) const __attribute__((always_inline))</div><div class="ttdoc">same as &get_slot(), but this is more explicit and easier to understand/maintain </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00259">hash_page_impl.hpp:259</a></div></div>
<div class="ttc" id="group__HASH_html_ga8c4ca78e36b2188f1feac100ce7df679"><div class="ttname"><a href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">foedus::storage::hash::hashinate</a></div><div class="ttdeci">HashValue hashinate(const void *key, uint16_t key_length)</div><div class="ttdoc">Calculates hash value for general input. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8cpp_source.html#l00031">hash_hashinate.cpp:31</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a476dd04e514ebe83142d21135e8b91c7"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">foedus::storage::hash::DataPageSlotIndex</a></div><div class="ttdeci">uint16_t DataPageSlotIndex</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00196">hash_id.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a5e40a9808e4f31042f222f4a823d2936"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a5e40a9808e4f31042f222f4a823d2936">foedus::storage::hash::DataPageBloomFilter::values_</a></div><div class="ttdeci">uint8_t values_[kHashDataPageBloomFilterBytes]</div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00144">hash_hashinate.hpp:144</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a28a11a7b04e04d895b21f29709eacd1f"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint</a></div><div class="ttdeci">static BloomFilterFingerprint extract_fingerprint(HashValue fullhash)</div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00175">hash_hashinate.hpp:175</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a49863802f2bfb024c928a37ea7abce07"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">foedus::storage::hash::HashDataPage::record_from_offset</a></div><div class="ttdeci">char * record_from_offset(uint16_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00275">hash_page_impl.hpp:275</a></div></div>
<div class="ttc" id="group__HASH_html_gacb9a1ea596bf0db3f6ded1710ab3b3d6"><div class="ttname"><a href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">foedus::storage::hash::HashBin</a></div><div class="ttdeci">uint64_t HashBin</div><div class="ttdoc">Represents a bin of a hash value. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00142">hash_id.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac977ed25935d3fa3a8d9651f96349c32"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac977ed25935d3fa3a8d9651f96349c32">foedus::storage::hash::HashDataPage::next_page</a></div><div class="ttdeci">const DualPagePointer &amp; next_page() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00238">hash_page_impl.hpp:238</a></div></div>
<div class="ttc" id="group__HASH_html_ga110c76b9c31881d7c6f3898d164579d8"><div class="ttname"><a href="group__HASH.html#ga110c76b9c31881d7c6f3898d164579d8">foedus::storage::hash::kHashDataPageHeaderSize</a></div><div class="ttdeci">const uint16_t kHashDataPageHeaderSize</div><div class="ttdoc">Byte size of header in data page of hash storage. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00110">hash_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="group__HASH_html_ga9fb894469b702dac3a6564416e19ed42"><div class="ttname"><a href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">foedus::storage::hash::HashValue</a></div><div class="ttdeci">uint64_t HashValue</div><div class="ttdoc">Represents a full 64-bit hash value calculated from a key. </div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00129">hash_id.hpp:129</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61" title="Adds the fingerprint to this bloom filter. " alt="" coords="236,5,419,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a7ab4e97e088ffc9b469ab2f48036abc2" title="usually zero&#45;cleared as part of a data page, but in case of specifically clearing this ..." alt="" coords="251,71,404,127"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f" title="foedus::storage::hash\l::DataPageBloomFilter\l::extract_fingerprint" alt="" coords="251,151,404,207"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html#a35da6a7faa712cb7cf70355803634063" title="foedus::storage::hash\l::HashDataPage::Slot\l::get_aligned_key_length" alt="" coords="244,231,411,287"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a47a8118e0aa8c3ce3c5c6138f2f1aa8c" title="foedus::storage::hash\l::HashDataPage::get_bin\l_shifts" alt="" coords="244,311,411,367"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="215,392,440,433"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ab696a16e6a995a515736ff0a28b47885" title="same as &amp;get_slot(), but this is more explicit and easier to understand/maintain " alt="" coords="242,458,413,514"/>
<area shape="rect" id="node10" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="254,539,401,580"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac977ed25935d3fa3a8d9651f96349c32" title="foedus::storage::hash\l::HashDataPage::next_page" alt="" coords="235,604,420,645"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07" title="foedus::storage::hash\l::HashDataPage::record\l_from_offset" alt="" coords="247,670,408,726"/>
<area shape="rect" id="node6" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="488,246,648,273"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2ba57f24b316aa460765eb960cc7df00_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="215,5,376,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae4d03b6ce42261195e565bdccaeb12b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::storage::hash::HashDataPage::available_space </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns usable space in bytes. </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00281">281</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, and <a class="el" href="hash__page__impl_8hpp_source.html#l00291">next_offset()</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00261">foedus::storage::hash::ReserveRecords::append_record_to_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00208">foedus::storage::hash::ReserveRecords::create_new_record_in_tail_page()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00480">create_record_in_snapshot()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00101">foedus::storage::hash::ReserveRecords::expand_record()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00139">foedus::storage::hash::ReserveRecords::find_and_lock_spacious_tail()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00170">reserve_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                              {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    uint16_t consumed = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">next_offset</a>() + <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>() * <span class="keyword">sizeof</span>(Slot);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(consumed &lt;= <span class="keyword">sizeof</span>(data_));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (consumed &gt; <span class="keyword">sizeof</span>(data_)) {  <span class="comment">// just to be conservative on release build</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(data_) - consumed;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a9ac1ba8382fecd225d2ad1b6e13dae55"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">foedus::storage::hash::HashDataPage::next_offset</a></div><div class="ttdeci">uint16_t next_offset() const </div><div class="ttdoc">Returns offset of a next record. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00291">hash_page_impl.hpp:291</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="468,5,693,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55" title="Returns offset of a next record. " alt="" coords="269,63,420,119"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08" title="foedus::storage::hash\l::HashDataPage::get_slot" alt="" coords="495,71,666,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ae4d03b6ce42261195e565bdccaeb12b9_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="269,115,444,171"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="492,35,667,91"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="494,115,665,171"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5" title="A simplified/efficient version to insert an active record, which must be used only in snapshot pages..." alt="" coords="276,195,437,251"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="275,35,439,91"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754" title="A system transaction that creates a logically deleted record in this page for the given key..." alt="" coords="273,326,440,382"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="715,75,867,131"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="915,82,1065,124"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad2169cfc93933b2b35fea60fe8be9cf8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html">DataPageBloomFilter</a>&amp; foedus::storage::hash::HashDataPage::bloom_filter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00243">243</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00277">foedus::storage::hash::HashStoragePimpl::insert_record()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00390">foedus::storage::hash::HashStoragePimpl::upsert_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{ <span class="keywordflow">return</span> bloom_filter_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2169cfc93933b2b35fea60fe8be9cf8_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2169cfc93933b2b35fea60fe8be9cf8_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2169cfc93933b2b35fea60fe8be9cf8_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2169cfc93933b2b35fea60fe8be9cf8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="215,5,394,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="213,85,396,141"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="445,5,592,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="444,85,593,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac9a49ecf998b324449ddf7776ebaf3df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html">DataPageBloomFilter</a>&amp; foedus::storage::hash::HashDataPage::bloom_filter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00244">244</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{ <span class="keywordflow">return</span> bloom_filter_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33c82d9bc3661456265ee9991cba1f98"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::hash::HashDataPage::compare_slot_key </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns whether the slot contains the exact key specified </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00396">396</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00248">get_slot()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00194">foedus::storage::hash::HashDataPage::Slot::hash_</a>, <a class="el" href="hash__hashinate_8cpp_source.html#l00031">foedus::storage::hash::hashinate()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00184">foedus::storage::hash::HashDataPage::Slot::key_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00171">foedus::storage::hash::HashDataPage::Slot::offset_</a>, and <a class="el" href="hash__page__impl_8hpp_source.html#l00275">record_from_offset()</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00889">foedus::storage::hash::HashStoragePimpl::locate_record_in_snapshot()</a>.</p>
<div class="fragment"><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                               {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>());  <span class="comment">// record count purely increasing</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">const</span> Slot&amp; slot = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a>(index);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">hashinate</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(slot.offset_), slot.key_length_) == slot.hash_);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// quick check first</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (slot.hash_ != hash || slot.key_length_ != key_length) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">void</span>* data = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(slot.offset_);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> std::memcmp(data, key, key_length) == 0;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac2e82163d7348a6c88fecff711025b08"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">foedus::storage::hash::HashDataPage::get_slot</a></div><div class="ttdeci">const Slot &amp; get_slot(DataPageSlotIndex record) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00248">hash_page_impl.hpp:248</a></div></div>
<div class="ttc" id="group__HASH_html_ga8c4ca78e36b2188f1feac100ce7df679"><div class="ttname"><a href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">foedus::storage::hash::hashinate</a></div><div class="ttdeci">HashValue hashinate(const void *key, uint16_t key_length)</div><div class="ttdoc">Calculates hash value for general input. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8cpp_source.html#l00031">hash_hashinate.cpp:31</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a49863802f2bfb024c928a37ea7abce07"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">foedus::storage::hash::HashDataPage::record_from_offset</a></div><div class="ttdeci">char * record_from_offset(uint16_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00275">hash_page_impl.hpp:275</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="228,5,453,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08" title="foedus::storage::hash\l::HashDataPage::get_slot" alt="" coords="255,71,426,112"/>
<area shape="rect" id="node4" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="267,136,414,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07" title="foedus::storage::hash\l::HashDataPage::record\l_from_offset" alt="" coords="260,202,421,258"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a33c82d9bc3661456265ee9991cba1f98_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="457,258,639,314"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="228,290,409,346"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="687,218,868,274"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="687,298,868,354"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="935,29,1099,85"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="935,138,1099,194"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="928,218,1107,274"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="927,298,1108,354"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="926,378,1109,434"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="919,458,1115,514"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="916,578,1119,634"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1181,5,1355,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1186,71,1350,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1167,152,1369,193"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1417,71,1592,127"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1195,218,1341,274"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1194,298,1342,354"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1193,378,1343,434"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1170,458,1366,514"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1187,538,1349,594"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1423,458,1586,514"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1183,618,1353,674"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3834e18f4738d71f2e8f1a848b9e11d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::create_record_in_snapshot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a>&#160;</td>
          <td class="paramname"><em>xct_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">BloomFilterFingerprint</a> &amp;&#160;</td>
          <td class="paramname"><em>fingerprint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A simplified/efficient version to insert an active record, which must be used only in snapshot pages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xct_id</td><td>XctId of the record. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hash</td><td>hash value of the key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fingerprint</td><td>Bloom Filter fingerprint of the key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>full key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>full key length. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload</td><td>the payload of the new record </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_length</td><td>length of payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>the page is a snapshot page being constructed </dd>
<dd>
the page doesn't have the key </dd>
<dd>
required_space(key_length, payload_length) &lt;= <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. ">available_space()</a></dd></dl>
<p>On constructing snapshot pages, we don't need any concurrency control, and we can loosen all restrictions. We thus have this method as an optimized version for snapshot pages. Inlined to make it more efficient. </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00480">480</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="hash__hashinate_8hpp_source.html#l00165">foedus::storage::hash::DataPageBloomFilter::add()</a>, <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="compiler_8hpp_source.html#l00111">ASSUME_ALIGNED</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00281">available_space()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00248">get_slot()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00194">foedus::storage::hash::HashDataPage::Slot::hash_</a>, <a class="el" href="page_8hpp_source.html#l00318">foedus::storage::PageHeader::increment_key_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00184">foedus::storage::hash::HashDataPage::Slot::key_length_</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00291">next_offset()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00171">foedus::storage::hash::HashDataPage::Slot::offset_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00191">foedus::storage::hash::HashDataPage::Slot::payload_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00179">foedus::storage::hash::HashDataPage::Slot::physical_record_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00275">record_from_offset()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00302">required_space()</a>, <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00165">foedus::storage::hash::HashDataPage::Slot::tid_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                           {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9">available_space</a>() &gt;= <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8">required_space</a>(key_length, payload_length));</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(reinterpret_cast&lt;uintptr_t&gt;(<span class="keyword">this</span>) % <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a> == 0);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(reinterpret_cast&lt;uintptr_t&gt;(key_arg) % 8 == 0);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(reinterpret_cast&lt;uintptr_t&gt;(payload_arg) % 8 == 0);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* key = <a class="code" href="group__COMPILER.html#gae36a71bd5471dacafdfc44648ab7fd2b">ASSUME_ALIGNED</a>(key_arg, 8U);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* payload = <a class="code" href="group__COMPILER.html#gae36a71bd5471dacafdfc44648ab7fd2b">ASSUME_ALIGNED</a>(payload_arg, 8U);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> index = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  Slot&amp; slot = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a>(index);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  slot.tid_.xct_id_ = xct_id;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  slot.offset_ = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">next_offset</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  slot.hash_ = hash;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  slot.key_length_ = key_length;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  uint16_t aligned_key_length = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(key_length);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  slot.physical_record_length_ = aligned_key_length + <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  slot.payload_length_ = payload_length;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(reinterpret_cast&lt;uintptr_t&gt;(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(slot.offset_)) % 8 == 0);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordtype">char</span>* record = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="group__COMPILER.html#gae36a71bd5471dacafdfc44648ab7fd2b">ASSUME_ALIGNED</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(slot.offset_), 8U));</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(key_length &gt; 0);</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  std::memcpy(record, key, key_length);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordflow">if</span> (key_length != aligned_key_length) {</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    std::memset(record + key_length, 0, aligned_key_length - key_length % 8);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (payload_length &gt; 0) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">char</span>* dest = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(<a class="code" href="group__COMPILER.html#gae36a71bd5471dacafdfc44648ab7fd2b">ASSUME_ALIGNED</a>(record + aligned_key_length, 8U));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    uint16_t aligned_payload_length = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    std::memcpy(dest, payload, payload_length);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (key_length != aligned_payload_length) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      std::memset(dest + payload_length, 0, aligned_payload_length - payload_length);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  bloom_filter_.<a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61">add</a>(fingerprint);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f">increment_key_count</a>();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a9ac1ba8382fecd225d2ad1b6e13dae55"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">foedus::storage::hash::HashDataPage::next_offset</a></div><div class="ttdeci">uint16_t next_offset() const </div><div class="ttdoc">Returns offset of a next record. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00291">hash_page_impl.hpp:291</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a3f361aa72342a7354ef9b8130b10d21f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f">foedus::storage::PageHeader::increment_key_count</a></div><div class="ttdeci">void increment_key_count() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00318">page.hpp:318</a></div></div>
<div class="ttc" id="group__COMPILER_html_gae36a71bd5471dacafdfc44648ab7fd2b"><div class="ttname"><a href="group__COMPILER.html#gae36a71bd5471dacafdfc44648ab7fd2b">ASSUME_ALIGNED</a></div><div class="ttdeci">#define ASSUME_ALIGNED(x, y)</div><div class="ttdoc">Wraps GCC&#39;s __builtin_assume_aligned. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00111">compiler.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac2e82163d7348a6c88fecff711025b08"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">foedus::storage::hash::HashDataPage::get_slot</a></div><div class="ttdeci">const Slot &amp; get_slot(DataPageSlotIndex record) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00248">hash_page_impl.hpp:248</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a476dd04e514ebe83142d21135e8b91c7"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">foedus::storage::hash::DataPageSlotIndex</a></div><div class="ttdeci">uint16_t DataPageSlotIndex</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00196">hash_id.hpp:196</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a446f51ede965fce59769df74a0044dd8"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8">foedus::storage::hash::HashDataPage::required_space</a></div><div class="ttdeci">static uint16_t required_space(uint16_t key_length, uint16_t payload_length)</div><div class="ttdoc">returns physical_record_length_ for a new record </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00302">hash_page_impl.hpp:302</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a49863802f2bfb024c928a37ea7abce07"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">foedus::storage::hash::HashDataPage::record_from_offset</a></div><div class="ttdeci">char * record_from_offset(uint16_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00275">hash_page_impl.hpp:275</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a41762390daf4751147dee762c64d8a61"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61">foedus::storage::hash::DataPageBloomFilter::add</a></div><div class="ttdeci">void add(const BloomFilterFingerprint &amp;fingerprint) __attribute__((always_inline))</div><div class="ttdoc">Adds the fingerprint to this bloom filter. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00165">hash_hashinate.hpp:165</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ae4d03b6ce42261195e565bdccaeb12b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9">foedus::storage::hash::HashDataPage::available_space</a></div><div class="ttdeci">uint16_t available_space() const </div><div class="ttdoc">Returns usable space in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00281">hash_page_impl.hpp:281</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a3834e18f4738d71f2e8f1a848b9e11d5_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a3834e18f4738d71f2e8f1a848b9e11d5_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a3834e18f4738d71f2e8f1a848b9e11d5_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a3834e18f4738d71f2e8f1a848b9e11d5_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61" title="Adds the fingerprint to this bloom filter. " alt="" coords="231,5,414,47"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="479,281,639,307"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. " alt="" coords="215,123,431,164"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="687,116,912,157"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55" title="Returns offset of a next record. " alt="" coords="483,174,634,230"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08" title="foedus::storage::hash\l::HashDataPage::get_slot" alt="" coords="714,339,885,380"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f" title="foedus::storage::PageHeader\l::increment_key_count" alt="" coords="227,357,418,399"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07" title="foedus::storage::hash\l::HashDataPage::record\l_from_offset" alt="" coords="242,423,403,479"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8" title="returns physical_record_length_ for a new record " alt="" coords="216,240,429,281"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acfa062e1acf64b882f466cca8e190fdd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a> foedus::storage::hash::HashDataPage::get_bin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00412">412</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00187">foedus::storage::hash::ReserveRecords::create_new_tail_page()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00232">foedus::storage::hash::hash_data_volatile_page_init()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00070">initialize_volatile_page()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00842">foedus::storage::hash::HashStoragePimpl::locate_bin()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00889">foedus::storage::hash::HashStoragePimpl::locate_record_in_snapshot()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00052">foedus::storage::hash::operator&lt;&lt;()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00329">release_pages_recursive()</a>, <a class="el" href="hash__storage__verify_8cpp_source.html#l00087">foedus::storage::hash::HashStoragePimpl::verify_single_thread_data()</a>, and <a class="el" href="hash__storage__verify_8cpp_source.html#l00055">foedus::storage::hash::HashStoragePimpl::verify_single_thread_intermediate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{ <span class="keywordflow">return</span> bin_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_acfa062e1acf64b882f466cca8e190fdd_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_acfa062e1acf64b882f466cca8e190fdd_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_acfa062e1acf64b882f466cca8e190fdd_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_acfa062e1acf64b882f466cca8e190fdd_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="457,80,625,136"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="683,240,861,296"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1172,309,1377,350"/>
<area shape="rect" id="node29" href="group__ARRAY.html#ga8423aae479f4b36ddc54127b07268c8c" title="volatile page initialize callback for HashDataPage. " alt="" coords="468,189,615,245"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a03dc5746931434bcc27b2b3b6856c33f" title="foedus::storage::hash\l::HashDataPage::initialize\l_volatile_page" alt="" coords="225,139,397,195"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="451,405,632,461"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="220,371,401,427"/>
<area shape="rect" id="node35" href="namespacefoedus_1_1storage_1_1hash.html#a473b6a9b60f79af8898447d30c8fe963" title="foedus::storage::hash\l::operator\&lt;\&lt;" alt="" coords="237,502,384,543"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a752f776127f131ccc60744c10d5cf490" title="foedus::storage::hash\l::HashDataPage::release\l_pages_recursive" alt="" coords="227,592,394,648"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ad137d51b31782b8e525481bb69816848" title="foedus::storage::hash\l::HashStoragePimpl::verify\l_single_thread_data" alt="" coords="223,723,398,779"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afc1a73e49f6386098d3fff98bc1baf78" title="foedus::storage::hash\l::HashStoragePimpl::verify\l_single_thread_intermediate" alt="" coords="449,723,633,779"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="690,81,854,137"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="932,5,1103,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="930,85,1105,141"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="1199,5,1351,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1451,13,1602,54"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="911,250,1124,291"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1445,559,1609,615"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1445,79,1609,135"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1437,159,1616,215"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1436,239,1617,295"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1435,319,1618,375"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1429,399,1625,455"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1425,479,1628,535"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1690,639,1865,681"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1695,9,1859,65"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1676,90,1879,131"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1927,9,2101,65"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1704,159,1851,215"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1703,239,1851,295"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1703,319,1852,375"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1679,399,1875,455"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1696,479,1859,535"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1933,399,2095,455"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1692,559,1863,615"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="681,440,863,496"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1184,375,1365,431"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a7a5b98d7f141ded1682a9e46ae3b8589" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive" alt="" coords="455,592,627,648"/>
<area shape="rect" id="node38" href="namespacefoedus_1_1storage_1_1hash.html#a05601cf00ffeb4df540a0d43379d3387" title="foedus::storage::hash\l::release_parallel" alt="" coords="699,590,845,631"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="931,625,1103,695"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="1189,639,1360,681"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1453,639,1600,681"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ae1d255af4c59e5d9eb4696da85b77121" title="These are defined in hash_storage_verify.cpp. " alt="" coords="685,723,859,779"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a29cf082a85cdc7074a748e151e34807d" title="foedus::storage::hash\l::HashStorage::verify\l_single_thread" alt="" coords="944,721,1091,777"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3e66818c84450f40fdb3d84a945cc36c" title="foedus::storage::hash\l::HashStoragePimpl::verify\l_single_thread" alt="" coords="930,801,1105,857"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a47a8118e0aa8c3ce3c5c6138f2f1aa8c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t foedus::storage::hash::HashDataPage::get_bin_shifts </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00422">422</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="page_8hpp_source.html#l00226">foedus::storage::PageHeader::masstree_layer_</a>.</p>

<p>Referenced by <a class="el" href="hash__page__debug_8cpp_source.html#l00089">assert_entries_impl()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00187">foedus::storage::hash::ReserveRecords::create_new_tail_page()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00070">initialize_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;{ <span class="keywordflow">return</span> header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#aedb491bd51b577feeb9ff84976548afc">masstree_layer_</a>; }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_aedb491bd51b577feeb9ff84976548afc"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#aedb491bd51b577feeb9ff84976548afc">foedus::storage::PageHeader::masstree_layer_</a></div><div class="ttdeci">uint8_t masstree_layer_</div><div class="ttdoc">used only in masstree. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00226">page.hpp:226</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a47a8118e0aa8c3ce3c5c6138f2f1aa8c_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a47a8118e0aa8c3ce3c5c6138f2f1aa8c_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a47a8118e0aa8c3ce3c5c6138f2f1aa8c_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a47a8118e0aa8c3ce3c5c6138f2f1aa8c_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="225,9,387,65"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="440,85,608,141"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a03dc5746931434bcc27b2b3b6856c33f" title="foedus::storage::hash\l::HashDataPage::initialize\l_volatile_page" alt="" coords="220,147,392,203"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="443,5,605,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="663,13,827,69"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="904,85,1075,141"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="902,5,1077,61"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="1171,5,1323,61"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1423,7,1574,49"/>
<area shape="rect" id="node11" href="group__ARRAY.html#ga8423aae479f4b36ddc54127b07268c8c" title="volatile page initialize callback for HashDataPage. " alt="" coords="451,184,597,240"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="656,223,835,279"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="883,306,1096,347"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1144,315,1349,357"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1417,73,1581,129"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1417,153,1581,209"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1409,233,1588,289"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1408,313,1589,369"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1407,393,1590,449"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1401,473,1597,529"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1397,593,1600,649"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1662,21,1837,62"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1667,87,1831,143"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1648,167,1851,209"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1899,87,2073,143"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1676,233,1823,289"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1675,313,1823,369"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1675,393,1824,449"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1651,473,1847,529"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1668,553,1831,609"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1905,473,2067,529"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1664,633,1835,689"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a501d3dfae095bac5a8f35d578ab9bfab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a>&amp; foedus::storage::hash::HashDataPage::get_new_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>record</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00254">254</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00261">foedus::storage::hash::ReserveRecords::append_record_to_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                                                                 {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Only in this method, record is okay to be == key_count</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1)[-record - 1];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a501d3dfae095bac5a8f35d578ab9bfab_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a501d3dfae095bac5a8f35d578ab9bfab_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a501d3dfae095bac5a8f35d578ab9bfab_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a501d3dfae095bac5a8f35d578ab9bfab_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="255,45,429,101"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="477,5,652,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="479,85,650,141"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="700,45,852,101"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="900,53,1051,94"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac6b4a13e6f057be1874f637fb9f87c51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::storage::hash::HashDataPage::get_record_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00246">246</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="page_8hpp_source.html#l00219">foedus::storage::PageHeader::key_count_</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00261">foedus::storage::hash::ReserveRecords::append_record_to_page()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00089">assert_entries_impl()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00281">available_space()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00396">compare_slot_key()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00480">create_record_in_snapshot()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00036">foedus::storage::hash::ReserveRecords::find_or_create_or_expand()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00889">foedus::storage::hash::HashStoragePimpl::locate_record_in_snapshot()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00291">next_offset()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00052">foedus::storage::hash::operator&lt;&lt;()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00170">reserve_record()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00106">search_key_physical()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00244">foedus::storage::hash::ReserveRecords::search_within_page()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{ <span class="keywordflow">return</span> header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a58cd9c4e7b12226634c1c7e5ca392890">key_count_</a>; }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a58cd9c4e7b12226634c1c7e5ca392890"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a58cd9c4e7b12226634c1c7e5ca392890">foedus::storage::PageHeader::key_count_</a></div><div class="ttdeci">uint16_t key_count_</div><div class="ttdoc">physical key count (those keys might be deleted) in this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00219">page.hpp:219</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac6b4a13e6f057be1874f637fb9f87c51_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac6b4a13e6f057be1874f637fb9f87c51_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac6b4a13e6f057be1874f637fb9f87c51_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac6b4a13e6f057be1874f637fb9f87c51_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="769,267,943,323"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="1249,231,1401,287"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="285,840,447,896"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. " alt="" coords="501,149,717,190"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5" title="A simplified/efficient version to insert an active record, which must be used only in snapshot pages..." alt="" coords="775,5,937,61"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754" title="A system transaction that creates a logically deleted record in this page for the given key..." alt="" coords="773,347,939,403"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a33c82d9bc3661456265ee9991cba1f98" title="returns whether the slot contains the exact key specified " alt="" coords="279,659,453,715"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="765,625,947,681"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="519,608,700,664"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55" title="Returns offset of a next record. " alt="" coords="291,199,441,255"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1storage_1_1hash.html#a473b6a9b60f79af8898447d30c8fe963" title="foedus::storage::hash\l::operator\&lt;\&lt;" alt="" coords="293,921,439,962"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aa03f1438dc159688f49de6e73c851d6e" title="Search for a physical slot that exactly contains the given key. " alt="" coords="284,528,448,584"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="524,477,695,533"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="522,789,697,845"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="998,149,1173,205"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="1000,231,1171,287"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1501,190,1651,231"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="529,869,690,925"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="774,136,938,192"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="995,643,1176,699"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="995,563,1176,619"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1243,847,1407,903"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1243,323,1407,379"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1236,403,1415,459"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1235,483,1416,539"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1234,563,1417,619"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1227,643,1423,699"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1224,737,1427,793"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1489,883,1663,925"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1494,256,1658,312"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1475,337,1677,378"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1748,256,1923,312"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1503,403,1649,459"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1502,483,1650,539"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1501,563,1651,619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1478,643,1674,699"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1495,723,1657,779"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1754,643,1917,699"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1491,803,1661,859"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="769,827,943,883"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="1012,892,1159,948"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1232,935,1419,991"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1478,949,1674,990"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1725,949,1945,990"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1995,915,2203,957"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1993,981,2204,1022"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="2252,915,2447,957"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2495,949,2689,990"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2252,981,2447,1022"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac2e82163d7348a6c88fecff711025b08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a>&amp; foedus::storage::hash::HashDataPage::get_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>record</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00248">248</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__page__impl_8hpp_source.html#l00396">compare_slot_key()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00480">create_record_in_snapshot()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00101">foedus::storage::hash::ReserveRecords::expand_record()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00036">foedus::storage::hash::ReserveRecords::find_or_create_or_expand()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00291">next_offset()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00170">reserve_record()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00106">search_key_physical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                                                                   {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1)[-record - 1];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac2e82163d7348a6c88fecff711025b08_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac2e82163d7348a6c88fecff711025b08_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac2e82163d7348a6c88fecff711025b08_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac2e82163d7348a6c88fecff711025b08_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a33c82d9bc3661456265ee9991cba1f98" title="returns whether the slot contains the exact key specified " alt="" coords="224,369,399,425"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5" title="A simplified/efficient version to insert an active record, which must be used only in snapshot pages..." alt="" coords="721,761,882,817"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="943,841,1118,897"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="1195,835,1347,891"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55" title="Returns offset of a next record. " alt="" coords="236,924,387,980"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754" title="A system transaction that creates a logically deleted record in this page for the given key..." alt="" coords="718,1103,885,1159"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aa03f1438dc159688f49de6e73c851d6e" title="Search for a physical slot that exactly contains the given key. " alt="" coords="229,500,393,556"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="711,337,892,393"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="464,369,645,425"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="940,257,1121,313"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="940,337,1121,393"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1189,112,1353,168"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1189,217,1353,273"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1181,297,1360,353"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1180,377,1361,433"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1179,457,1362,513"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1173,537,1369,593"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1169,19,1372,75"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1434,86,1609,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1439,217,1603,273"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1420,151,1623,193"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1693,217,1868,273"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1448,297,1595,353"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1447,377,1595,433"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1447,457,1596,513"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1423,617,1619,673"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1440,537,1603,593"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1699,617,1862,673"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1436,5,1607,61"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1446,842,1597,883"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. " alt="" coords="447,931,663,973"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="714,1023,889,1079"/>
<area shape="rect" id="node32" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="945,957,1116,1013"/>
<area shape="rect" id="node33" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="719,841,883,897"/>
<area shape="rect" id="node36" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="469,580,640,636"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="467,500,642,556"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="714,504,889,560"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="957,519,1104,575"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1177,653,1364,709"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1423,698,1619,739"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1671,698,1891,739"/>
<area shape="rect" id="node43" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1940,665,2148,706"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1939,730,2149,771"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="2197,665,2392,706"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2440,698,2635,739"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2683,698,2845,739"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2197,730,2392,771"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad96b81e0d79c2cbdede77943fe3400cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a>&amp; foedus::storage::hash::HashDataPage::get_slot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>record</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00251">251</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                                                             {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1)[-record - 1];</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab696a16e6a995a515736ff0a28b47885"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a>* foedus::storage::hash::HashDataPage::get_slot_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>record</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>same as &amp;<a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot()</a>, but this is more explicit and easier to understand/maintain </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00259">259</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__page__debug_8cpp_source.html#l00089">assert_entries_impl()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00052">foedus::storage::hash::operator&lt;&lt;()</a>, <a class="el" href="hash__record__location_8cpp_source.html#l00027">foedus::storage::hash::RecordLocation::populate_logical()</a>, <a class="el" href="hash__record__location_8cpp_source.html#l00079">foedus::storage::hash::RecordLocation::populate_physical()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00260">foedus::storage::hash::HashStoragePimpl::register_record_write_log()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                                                                           {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - record - 1;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ab696a16e6a995a515736ff0a28b47885_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ab696a16e6a995a515736ff0a28b47885_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ab696a16e6a995a515736ff0a28b47885_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ab696a16e6a995a515736ff0a28b47885_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="232,139,393,195"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage_1_1hash.html#a473b6a9b60f79af8898447d30c8fe963" title="foedus::storage::hash\l::operator\&lt;\&lt;" alt="" coords="239,223,386,264"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="451,215,629,271"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#ab1d971d633ca8153c6a7363694e254a0" title="Populates fields other than readset_. " alt="" coords="224,339,401,395"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aeea83aff996263bc8e9b3623fbe305a1" title="Used in the following methods. " alt="" coords="908,403,1097,459"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="225,481,400,537"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="459,135,621,191"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="679,281,860,337"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="912,222,1093,278"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="912,302,1093,358"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1165,29,1329,85"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1165,142,1329,198"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1157,542,1336,598"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1156,222,1337,278"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1155,302,1338,358"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1149,382,1345,438"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1145,462,1348,518"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1419,5,1593,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1424,71,1588,127"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1405,152,1607,193"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1682,71,1857,127"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1433,618,1579,674"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1432,218,1580,274"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1431,298,1581,354"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1408,458,1604,514"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1425,378,1587,434"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1688,458,1851,514"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1421,538,1591,594"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="449,346,631,402"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="453,483,627,539"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="696,485,843,541"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="909,501,1096,557"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1149,660,1345,701"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1396,699,1616,740"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1665,665,1873,707"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1664,731,1875,772"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="1923,665,2117,707"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2165,699,2360,740"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2408,699,2571,740"/>
<area shape="rect" id="node41" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1923,731,2117,772"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5349168bb200032e6fcec457200de84a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a>* foedus::storage::hash::HashDataPage::get_slot_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>record</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00262">262</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                                                                     {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - record - 1;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1168135e29d8934505f96d7f7e2ee6de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a> foedus::storage::hash::HashDataPage::get_snapshot_page_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00233">233</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                                         {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a><span class="keyword">&gt;</span>(header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a>);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  }</div>
<div class="ttc" id="group__STORAGE_html_ga629d4b8103bfb83ef9c11b842a4fd398"><div class="ttname"><a href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">foedus::storage::SnapshotPagePointer</a></div><div class="ttdeci">uint64_t SnapshotPagePointer</div><div class="ttdoc">Page ID of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00079">storage_id.hpp:79</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2203e4757be26e410e6f49263e439c53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> foedus::storage::hash::HashDataPage::get_volatile_page_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00229">229</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, and <a class="el" href="page_8hpp_source.html#l00211">foedus::storage::PageHeader::snapshot_</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00208">foedus::storage::hash::ReserveRecords::create_new_record_in_tail_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00101">foedus::storage::hash::ReserveRecords::expand_record()</a>, and <a class="el" href="hash__reserve__impl_8cpp_source.html#l00139">foedus::storage::hash::ReserveRecords::find_and_lock_spacious_tail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                                         {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">snapshot_</a>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> VolatilePagePointer(header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_ac0baf9ee636d13c02d334ce779cc6a8f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#ac0baf9ee636d13c02d334ce779cc6a8f">foedus::storage::PageHeader::snapshot_</a></div><div class="ttdeci">bool snapshot_</div><div class="ttdoc">Whether this page image is of a snapshot page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00211">page.hpp:211</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2203e4757be26e410e6f49263e439c53_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2203e4757be26e410e6f49263e439c53_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2203e4757be26e410e6f49263e439c53_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a2203e4757be26e410e6f49263e439c53_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="457,5,627,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="455,85,629,141"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="243,121,407,177"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="677,45,829,101"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="877,53,1028,94"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac653a03fd75011048550f8e9f5dd198d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a>&amp; foedus::storage::hash::HashDataPage::header </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00225">225</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00208">foedus::storage::hash::ReserveRecords::create_new_record_in_tail_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00187">foedus::storage::hash::ReserveRecords::create_new_tail_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00139">foedus::storage::hash::ReserveRecords::find_and_lock_spacious_tail()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00036">foedus::storage::hash::ReserveRecords::find_or_create_or_expand()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="hash__storage__debug_8cpp_source.html#l00253">foedus::storage::hash::HashStoragePimpl::hcc_reset_all_temperature_stat_data()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00277">foedus::storage::hash::HashStoragePimpl::insert_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00889">foedus::storage::hash::HashStoragePimpl::locate_record_in_snapshot()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00052">foedus::storage::hash::operator&lt;&lt;()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00302">foedus::storage::hash::HashIntermediatePage::release_pages_recursive()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00329">release_pages_recursive()</a>, <a class="el" href="hash__composer__impl_8cpp_source.html#l00059">foedus::storage::hash::resolve_data_impl()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00244">foedus::storage::hash::ReserveRecords::search_within_page()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00390">foedus::storage::hash::HashStoragePimpl::upsert_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;{ <span class="keywordflow">return</span> header_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac653a03fd75011048550f8e9f5dd198d_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac653a03fd75011048550f8e9f5dd198d_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac653a03fd75011048550f8e9f5dd198d_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac653a03fd75011048550f8e9f5dd198d_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="468,136,639,192"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="987,49,1139,105"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="224,193,392,249"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="471,216,635,272"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="219,455,397,511"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="973,609,1152,665"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="971,529,1154,585"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ab283888fe4b6038d8885f385a136f40b" title="foedus::storage::hash\l::HashStoragePimpl::hcc\l_reset_all_temperature\l_stat_data" alt="" coords="225,637,391,707"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="463,343,644,399"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="217,375,399,431"/>
<area shape="rect" id="node37" href="namespacefoedus_1_1storage_1_1hash.html#a473b6a9b60f79af8898447d30c8fe963" title="foedus::storage::hash\l::operator\&lt;\&lt;" alt="" coords="235,731,381,773"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a7a5b98d7f141ded1682a9e46ae3b8589" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive" alt="" coords="467,801,639,857"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a752f776127f131ccc60744c10d5cf490" title="foedus::storage::hash\l::HashDataPage::release\l_pages_recursive" alt="" coords="225,872,391,928"/>
<area shape="rect" id="node44" href="namespacefoedus_1_1storage_1_1hash.html#a9f2184183295be33fa07409851c479eb" title="foedus::storage::hash\l::resolve_data_impl" alt="" coords="235,953,381,994"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="468,5,639,61"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="221,1019,395,1075"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1238,11,1389,53"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="723,207,898,263"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="447,459,660,501"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="708,457,913,498"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="981,209,1145,265"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="981,289,1145,345"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="972,369,1153,425"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="965,449,1161,505"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="961,129,1164,185"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1226,158,1401,199"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1231,289,1395,345"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1212,223,1415,265"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1463,289,1637,345"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1240,689,1387,745"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1239,369,1387,425"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1239,609,1388,665"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1215,529,1411,585"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1232,449,1395,505"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1469,529,1631,585"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1228,77,1399,133"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aece3aacb3a8a9fd362fbad83321cacaf" title="foedus::storage::hash\l::HashStoragePimpl::hcc\l_reset_all_temperature\l_stat_intermediate" alt="" coords="470,647,637,718"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a9075ef5e205fc3e6284e56894b1c8c4b" title="For stupid reasons (I&#39;m lazy!) these are defined in _debug.cpp. " alt="" coords="719,677,902,733"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ace67899d434503ffa7b9ca4b35e2f36c" title="Resets all volatile pages&#39; temperature stat to be zero in this storage. " alt="" coords="977,689,1148,745"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="720,376,901,432"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="720,296,901,352"/>
<area shape="rect" id="node39" href="namespacefoedus_1_1storage_1_1hash.html#a05601cf00ffeb4df540a0d43379d3387" title="foedus::storage::hash\l::release_parallel" alt="" coords="737,829,884,870"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="977,785,1149,855"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="1228,799,1399,841"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1477,799,1623,841"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="466,1019,641,1075"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="737,1019,884,1075"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="969,1019,1156,1075"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1215,1026,1411,1067"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afde4417aa79c53e2476b0f8b7ab7c8b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1PageHeader.html">PageHeader</a>&amp; foedus::storage::hash::HashDataPage::header </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00226">226</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{ <span class="keywordflow">return</span> header_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a65f65774022d686c807da4f5e2983c26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::initialize_snapshot_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga629d4b8103bfb83ef9c11b842a4fd398">SnapshotPagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a>&#160;</td>
          <td class="paramname"><em>bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bin_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bin_shifts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8cpp_source.html#l00093">93</a> of file <a class="el" href="hash__page__impl_8cpp_source.html">hash_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00301">foedus::storage::PageHeader::init_snapshot()</a>, <a class="el" href="page_8hpp_source.html#l00054">foedus::storage::kHashDataPageType</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, and <a class="el" href="hash__page__impl_8hpp_source.html#l00421">protected_set_bin_shifts()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                      {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(bin_bits + bin_shifts == 64U);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  std::memset(<span class="keyword">this</span>, 0, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a65c4acd213d2f482eb29c6dee0818915">init_snapshot</a>(page_id, storage_id, <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba6c1740f811f2524fac6cd76aa2a31c6c">kHashDataPageType</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  bin_ = bin;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864">protected_set_bin_shifts</a>(bin_shifts);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ad76f0d1e0caffa655e5ffe03c2a59864"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864">foedus::storage::hash::HashDataPage::protected_set_bin_shifts</a></div><div class="ttdeci">void protected_set_bin_shifts(uint8_t bin_shifts)</div><div class="ttdoc">this method should be called only in page creation. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00421">hash_page_impl.hpp:421</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a65c4acd213d2f482eb29c6dee0818915"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a65c4acd213d2f482eb29c6dee0818915">foedus::storage::PageHeader::init_snapshot</a></div><div class="ttdeci">void init_snapshot(SnapshotPagePointer page_id, StorageId storage_id, PageType page_type) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00301">page.hpp:301</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba6c1740f811f2524fac6cd76aa2a31c6c"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba6c1740f811f2524fac6cd76aa2a31c6c">foedus::storage::kHashDataPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00054">page.hpp:54</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a65f65774022d686c807da4f5e2983c26_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a65f65774022d686c807da4f5e2983c26_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a65f65774022d686c807da4f5e2983c26_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a65f65774022d686c807da4f5e2983c26_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1PageHeader.html#a65c4acd213d2f482eb29c6dee0818915" title="foedus::storage::PageHeader\l::init_snapshot" alt="" coords="225,86,416,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864" title="this method should be called only in page creation. " alt="" coords="231,152,410,208"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a8f6e96ac10eb804602349a54292d26a1" title="foedus::storage::extract\l_numa_node_from_snapshot\l_pointer" alt="" coords="469,5,657,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="464,86,663,127"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="467,151,659,193"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="711,118,903,159"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="722,183,891,225"/>
<area shape="rect" id="node8" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="951,183,1152,225"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a03dc5746931434bcc27b2b3b6856c33f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::initialize_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>page_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1Page.html">Page</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__HASH.html#gacb9a1ea596bf0db3f6ded1710ab3b3d6">HashBin</a>&#160;</td>
          <td class="paramname"><em>bin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bin_shifts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8cpp_source.html#l00070">70</a> of file <a class="el" href="hash__page__impl_8cpp_source.html">hash_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__id_8hpp_source.html#l00176">foedus::storage::hash::HashBinRange::contains()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00412">get_bin()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00104">foedus::storage::hash::HashIntermediatePage::get_bin_range()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00422">get_bin_shifts()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00105">foedus::storage::hash::HashIntermediatePage::get_level()</a>, <a class="el" href="page_8hpp_source.html#l00280">foedus::storage::PageHeader::get_page_type()</a>, <a class="el" href="page_8hpp_source.html#l00284">foedus::storage::PageHeader::init_volatile()</a>, <a class="el" href="page_8hpp_source.html#l00054">foedus::storage::kHashDataPageType</a>, <a class="el" href="page_8hpp_source.html#l00053">foedus::storage::kHashIntermediatePageType</a>, <a class="el" href="storage__id_8hpp_source.html#l00045">foedus::storage::kPageSize</a>, and <a class="el" href="hash__page__impl_8hpp_source.html#l00421">protected_set_bin_shifts()</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00187">foedus::storage::hash::ReserveRecords::create_new_tail_page()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00232">foedus::storage::hash::hash_data_volatile_page_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                      {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  std::memset(<span class="keyword">this</span>, 0, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5">init_volatile</a>(page_id, storage_id, <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba6c1740f811f2524fac6cd76aa2a31c6c">kHashDataPageType</a>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  bin_ = bin;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864">protected_set_bin_shifts</a>(bin_shifts);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">if</span> (parent-&gt;get_header().get_page_type() == <a class="code" href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5baa295f358dce197aac9c593ba56d89714">kHashIntermediatePageType</a>) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">const</span> HashIntermediatePage* parent_casted</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>HashIntermediatePage*<span class="keyword">&gt;</span>(parent);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_casted-&gt;get_level() == 0);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_casted-&gt;get_bin_range().contains(bin));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">const</span> <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">HashDataPage</a>* parent_casted = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">HashDataPage</a>*<span class="keyword">&gt;</span>(parent);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_casted-&gt;get_bin() == bin);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(parent_casted-&gt;get_bin_shifts() == bin_shifts);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5baa295f358dce197aac9c593ba56d89714"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5baa295f358dce197aac9c593ba56d89714">foedus::storage::kHashIntermediatePageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00053">page.hpp:53</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a5a84eed10b8675e5df2f35f791991eb5"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5">foedus::storage::PageHeader::init_volatile</a></div><div class="ttdeci">void init_volatile(VolatilePagePointer page_id, StorageId storage_id, PageType page_type) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00284">page.hpp:284</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_aef4fcde9f84d801c1aabd83001eb7f8d"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">foedus::storage::hash::HashDataPage::HashDataPage</a></div><div class="ttdeci">HashDataPage()=delete</div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ad76f0d1e0caffa655e5ffe03c2a59864"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864">foedus::storage::hash::HashDataPage::protected_set_bin_shifts</a></div><div class="ttdeci">void protected_set_bin_shifts(uint8_t bin_shifts)</div><div class="ttdoc">this method should be called only in page creation. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00421">hash_page_impl.hpp:421</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="group__STORAGE_html_gga14e35f7fbe4bc18276fde8e8ba460f5ba6c1740f811f2524fac6cd76aa2a31c6c"><div class="ttname"><a href="group__STORAGE.html#gga14e35f7fbe4bc18276fde8e8ba460f5ba6c1740f811f2524fac6cd76aa2a31c6c">foedus::storage::kHashDataPageType</a></div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00054">page.hpp:54</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1HashBinRange.html#af492eb6df181653434b727ba29e5c833" title="foedus::storage::hash\l::HashBinRange::contains" alt="" coords="234,5,407,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#acfa062e1acf64b882f466cca8e190fdd" title="foedus::storage::hash\l::HashDataPage::get_bin" alt="" coords="237,71,404,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#ac5e2de81d5e512b5a0f735a9fc413629" title="foedus::storage::hash\l::HashIntermediatePage\l::get_bin_range" alt="" coords="240,137,401,193"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a47a8118e0aa8c3ce3c5c6138f2f1aa8c" title="foedus::storage::hash\l::HashDataPage::get_bin\l_shifts" alt="" coords="237,217,404,273"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="246,297,395,339"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a6ddc93fb5df01249140895435819da2f" title="foedus::storage::hash\l::HashIntermediatePage\l::get_level" alt="" coords="240,363,401,419"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="225,444,416,485"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1PageHeader.html#a5a84eed10b8675e5df2f35f791991eb5" title="foedus::storage::PageHeader\l::init_volatile" alt="" coords="225,509,416,551"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ad76f0d1e0caffa655e5ffe03c2a59864" title="this method should be called only in page creation. " alt="" coords="231,575,410,631"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1PageHeader.html#ac40b3dad0a38d9a142bd14ea5000b669" title="foedus::storage::PageHeader\l::get_in_layer_level" alt="" coords="468,371,659,412"/>
<area shape="rect" id="node11" href="structfoedus_1_1assorted_1_1ProbCounter.html#a8e7b31f9a6b4997f6c0916f7e20d755a" title="foedus::assorted::ProbCounter\l::reset" alt="" coords="464,477,663,519"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1PageVersion.html#ae40168c82f16645e85bb66f9019e53cf" title="used only while page initialization " alt="" coords="467,543,659,584"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1PageVersionStatus.html#af49ef4f3320148130f46f494f1c845aa" title="foedus::storage::PageVersion\lStatus::reset" alt="" coords="711,509,903,551"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1McsWwLock.html#a4114c2dec151ad650a294dedac4f239d" title="used only while page initialization " alt="" coords="722,575,891,616"/>
<area shape="rect" id="node15" href="structfoedus_1_1xct_1_1McsWwBlockData.html#a3161e47c41388e9c1b50929f585e366b" title="foedus::xct::McsWwBlockData\l::clear" alt="" coords="951,575,1152,616"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a03dc5746931434bcc27b2b3b6856c33f_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="225,85,393,141"/>
<area shape="rect" id="node8" href="group__ARRAY.html#ga8423aae479f4b36ddc54127b07268c8c" title="volatile page initialize callback for HashDataPage. " alt="" coords="236,184,383,240"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="449,13,613,69"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="689,85,860,141"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="687,5,862,61"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="956,5,1108,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1209,7,1359,49"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="441,223,620,279"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="668,306,881,347"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="929,315,1135,357"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1202,73,1366,129"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1202,153,1366,209"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1195,233,1373,289"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1193,313,1375,369"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1193,393,1375,449"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1186,473,1382,529"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1183,593,1385,649"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1447,21,1622,62"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1453,87,1617,143"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1433,167,1636,209"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1684,87,1859,143"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1461,233,1608,289"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1461,313,1609,369"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1460,393,1609,449"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1437,473,1633,529"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1453,553,1616,609"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1690,473,1853,529"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1449,633,1620,689"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad2fa612bf9214b1d94366eba360167df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::storage::hash::HashDataPage::is_locked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00227">227</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="page_8hpp_source.html#l00138">foedus::storage::PageVersion::is_locked()</a>, and <a class="el" href="page_8hpp_source.html#l00272">foedus::storage::PageHeader::page_version_</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00208">foedus::storage::hash::ReserveRecords::create_new_record_in_tail_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00187">foedus::storage::hash::ReserveRecords::create_new_tail_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00101">foedus::storage::hash::ReserveRecords::expand_record()</a>, and <a class="el" href="hash__reserve__impl_8cpp_source.html#l00036">foedus::storage::hash::ReserveRecords::find_or_create_or_expand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{ <span class="keywordflow">return</span> header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2">is_locked</a>(); }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a44c12d47d4b478bac2076df4760fc990"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">foedus::storage::PageHeader::page_version_</a></div><div class="ttdeci">PageVersion page_version_</div><div class="ttdoc">Used in several storage types as concurrency control mechanism for the page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00272">page.hpp:272</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a301cba19b01cf82d7b576a04180b56e2"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2">foedus::storage::PageVersion::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00138">page.hpp:138</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="233,5,425,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="473,5,643,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="691,5,892,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad2fa612bf9214b1d94366eba360167df_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="449,5,620,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="891,111,1043,167"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="233,85,401,141"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="668,111,843,167"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1091,118,1241,159"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="453,85,617,141"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9ac1ba8382fecd225d2ad1b6e13dae55"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::storage::hash::HashDataPage::next_offset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns offset of a next record. </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00291">291</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00248">get_slot()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00171">foedus::storage::hash::HashDataPage::Slot::offset_</a>, and <a class="el" href="hash__page__impl_8hpp_source.html#l00179">foedus::storage::hash::HashDataPage::Slot::physical_record_length_</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00261">foedus::storage::hash::ReserveRecords::append_record_to_page()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00281">available_space()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00480">create_record_in_snapshot()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00170">reserve_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                          {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> count = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (count == 0) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keyword">const</span> Slot&amp; last_slot = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a>(count - 1);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>((last_slot.offset_ + last_slot.physical_record_length_) % 8 == 0);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">return</span> last_slot.offset_ + last_slot.physical_record_length_;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac2e82163d7348a6c88fecff711025b08"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">foedus::storage::hash::HashDataPage::get_slot</a></div><div class="ttdeci">const Slot &amp; get_slot(DataPageSlotIndex record) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00248">hash_page_impl.hpp:248</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a476dd04e514ebe83142d21135e8b91c7"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">foedus::storage::hash::DataPageSlotIndex</a></div><div class="ttdeci">uint16_t DataPageSlotIndex</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00196">hash_id.hpp:196</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="204,5,429,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08" title="foedus::storage::hash\l::HashDataPage::get_slot" alt="" coords="231,71,402,112"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a9ac1ba8382fecd225d2ad1b6e13dae55_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="468,5,643,61"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. " alt="" coords="204,209,420,250"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5" title="A simplified/efficient version to insert an active record, which must be used only in snapshot pages..." alt="" coords="475,267,636,323"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754" title="A system transaction that creates a logically deleted record in this page for the given key..." alt="" coords="472,347,639,403"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="691,71,865,127"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="693,151,863,207"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="913,111,1065,167"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1113,118,1264,159"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="473,136,637,192"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac977ed25935d3fa3a8d9651f96349c32"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>&amp; foedus::storage::hash::HashDataPage::next_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00238">238</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__page__debug_8cpp_source.html#l00089">assert_entries_impl()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00208">foedus::storage::hash::ReserveRecords::create_new_record_in_tail_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00139">foedus::storage::hash::ReserveRecords::find_and_lock_spacious_tail()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00036">foedus::storage::hash::ReserveRecords::find_or_create_or_expand()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00052">foedus::storage::hash::operator&lt;&lt;()</a>, and <a class="el" href="hash__reserve__impl_8cpp_source.html#l00244">foedus::storage::hash::ReserveRecords::search_within_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;{ <span class="keywordflow">return</span> next_page_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac977ed25935d3fa3a8d9651f96349c32_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac977ed25935d3fa3a8d9651f96349c32_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac977ed25935d3fa3a8d9651f96349c32_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ac977ed25935d3fa3a8d9651f96349c32_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="247,13,409,69"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="487,245,657,301"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="753,165,905,221"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="246,100,410,156"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="239,447,417,503"/>
<area shape="rect" id="node30" href="namespacefoedus_1_1storage_1_1hash.html#a473b6a9b60f79af8898447d30c8fe963" title="foedus::storage::hash\l::operator\&lt;\&lt;" alt="" coords="255,377,401,418"/>
<area shape="rect" id="node31" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="487,165,657,221"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="491,5,653,61"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1006,170,1157,211"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="485,85,659,141"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="465,463,679,505"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="727,481,932,522"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="999,316,1163,372"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="999,396,1163,452"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="992,476,1171,532"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="991,556,1172,612"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="990,636,1173,692"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="983,716,1179,772"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="980,236,1183,292"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1245,263,1419,305"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1250,329,1414,385"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1231,410,1433,451"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1481,329,1656,385"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1259,476,1405,532"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1258,556,1406,612"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1257,636,1407,692"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1234,716,1430,772"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1251,796,1413,852"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1487,716,1650,772"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1247,183,1417,239"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3e55d9c0192bc8126fa3bae8ab689f5e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>&amp; foedus::storage::hash::HashDataPage::next_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00239">239</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;{ <span class="keywordflow">return</span> next_page_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6286d91dcdb8b6455e20bc770155a0be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* foedus::storage::hash::HashDataPage::next_page_address </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00240">240</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00889">foedus::storage::hash::HashStoragePimpl::locate_record_in_snapshot()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;{ <span class="keywordflow">return</span> &amp;next_page_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a6286d91dcdb8b6455e20bc770155a0be_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a6286d91dcdb8b6455e20bc770155a0be_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a6286d91dcdb8b6455e20bc770155a0be_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a6286d91dcdb8b6455e20bc770155a0be_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="205,355,384,411"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="449,473,631,529"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="204,503,385,559"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="207,597,382,653"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="433,351,647,393"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="695,333,900,374"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="967,325,1131,381"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="967,405,1131,461"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="960,485,1139,541"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="959,565,1140,621"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="958,85,1141,141"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="951,165,1147,221"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="948,245,1151,301"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1213,326,1387,367"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1218,392,1382,448"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1199,473,1401,514"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1472,392,1647,448"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1227,539,1373,595"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1226,619,1374,675"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1225,5,1375,61"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1202,85,1398,141"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1219,165,1381,221"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1478,85,1641,141"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1215,245,1385,301"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="707,479,888,535"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="707,399,888,455"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="453,605,627,661"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="724,660,871,716"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="956,668,1143,724"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1202,699,1398,741"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1449,699,1669,741"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1719,666,1927,707"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1717,731,1928,773"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="1976,666,2171,707"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2219,699,2413,741"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2461,699,2624,741"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1976,731,2171,773"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28c4a6d101bcc97226edacb38483ee21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1DualPagePointer.html">DualPagePointer</a>* foedus::storage::hash::HashDataPage::next_page_address </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00241">241</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{ <span class="keywordflow">return</span> &amp;next_page_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afd94b36f4051216649467d763ea79875"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a>&amp; foedus::storage::hash::HashDataPage::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad76f0d1e0caffa655e5ffe03c2a59864"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::protected_set_bin_shifts </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bin_shifts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this method should be called only in page creation. </p>
<p>bin_shifts is immutable after that. we currently reuse header_.masstree_layer_ (not applicable to hash storage) for bin_shifts to squeeze space. </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00421">421</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="page_8hpp_source.html#l00226">foedus::storage::PageHeader::masstree_layer_</a>.</p>

<p>Referenced by <a class="el" href="hash__page__impl_8cpp_source.html#l00093">initialize_snapshot_page()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00070">initialize_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{ header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#aedb491bd51b577feeb9ff84976548afc">masstree_layer_</a> = bin_shifts; }</div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_aedb491bd51b577feeb9ff84976548afc"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#aedb491bd51b577feeb9ff84976548afc">foedus::storage::PageHeader::masstree_layer_</a></div><div class="ttdeci">uint8_t masstree_layer_</div><div class="ttdoc">used only in masstree. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00226">page.hpp:226</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad76f0d1e0caffa655e5ffe03c2a59864_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad76f0d1e0caffa655e5ffe03c2a59864_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad76f0d1e0caffa655e5ffe03c2a59864_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_ad76f0d1e0caffa655e5ffe03c2a59864_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a65f65774022d686c807da4f5e2983c26" title="foedus::storage::hash\l::HashDataPage::initialize\l_snapshot_page" alt="" coords="232,55,404,111"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a03dc5746931434bcc27b2b3b6856c33f" title="foedus::storage::hash\l::HashDataPage::initialize\l_volatile_page" alt="" coords="232,135,404,191"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="452,85,620,141"/>
<area shape="rect" id="node10" href="group__ARRAY.html#ga8423aae479f4b36ddc54127b07268c8c" title="volatile page initialize callback for HashDataPage. " alt="" coords="463,184,609,240"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="675,13,839,69"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="916,85,1087,141"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="914,5,1089,61"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="1183,5,1335,61"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1435,7,1586,49"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="668,223,847,279"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="895,306,1108,347"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1156,315,1361,357"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1429,73,1593,129"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1429,153,1593,209"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1421,233,1600,289"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1420,313,1601,369"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1419,393,1602,449"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1413,473,1609,529"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1409,593,1612,649"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1674,21,1849,62"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1679,87,1843,143"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1660,167,1863,209"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1911,87,2085,143"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1688,233,1835,289"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1687,313,1835,369"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1687,393,1836,449"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1663,473,1859,529"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1680,553,1843,609"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1917,473,2079,529"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1676,633,1847,689"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a49863802f2bfb024c928a37ea7abce07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* foedus::storage::hash::HashDataPage::record_from_offset </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00275">275</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00261">foedus::storage::hash::ReserveRecords::append_record_to_page()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00089">assert_entries_impl()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00396">compare_slot_key()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00480">create_record_in_snapshot()</a>, <a class="el" href="hash__page__debug_8cpp_source.html#l00052">foedus::storage::hash::operator&lt;&lt;()</a>, <a class="el" href="hash__record__location_8cpp_source.html#l00027">foedus::storage::hash::RecordLocation::populate_logical()</a>, <a class="el" href="hash__record__location_8cpp_source.html#l00079">foedus::storage::hash::RecordLocation::populate_physical()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00170">reserve_record()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00106">search_key_physical()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;{ <span class="keywordflow">return</span> data_ + offset; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a49863802f2bfb024c928a37ea7abce07_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a49863802f2bfb024c928a37ea7abce07_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a49863802f2bfb024c928a37ea7abce07_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a49863802f2bfb024c928a37ea7abce07_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="216,108,391,164"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a2ba57f24b316aa460765eb960cc7df00" title="defined in hash_page_debug.cpp. " alt="" coords="223,635,384,691"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a33c82d9bc3661456265ee9991cba1f98" title="returns whether the slot contains the exact key specified " alt="" coords="216,504,391,560"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5" title="A simplified/efficient version to insert an active record, which must be used only in snapshot pages..." alt="" coords="223,715,384,771"/>
<area shape="rect" id="node33" href="namespacefoedus_1_1storage_1_1hash.html#a473b6a9b60f79af8898447d30c8fe963" title="foedus::storage::hash\l::operator\&lt;\&lt;" alt="" coords="230,795,377,837"/>
<area shape="rect" id="node34" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="442,188,619,244"/>
<area shape="rect" id="node35" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#ab1d971d633ca8153c6a7363694e254a0" title="Populates fields other than readset_. " alt="" coords="215,424,392,480"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754" title="A system transaction that creates a logically deleted record in this page for the given key..." alt="" coords="220,861,387,917"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aa03f1438dc159688f49de6e73c851d6e" title="Search for a physical slot that exactly contains the given key. " alt="" coords="221,344,385,400"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="443,580,618,636"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="443,28,618,84"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="445,108,616,164"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="684,108,836,164"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="914,115,1065,157"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aff42645ccbe996e009d1ffe226fe5b42" title="foedus::storage::hash\l::HashDataPage::assert\l_entries" alt="" coords="450,660,611,716"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="669,365,851,421"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="440,399,621,455"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="899,285,1080,341"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="899,365,1080,421"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1147,325,1311,381"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1147,405,1311,461"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1140,497,1319,553"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1139,600,1320,656"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1138,45,1321,101"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1131,165,1327,221"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1128,245,1331,301"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1393,326,1567,367"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1398,392,1562,448"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1379,473,1581,514"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1652,392,1827,448"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1407,539,1553,595"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1406,619,1554,675"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1405,5,1555,61"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1382,85,1578,141"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1399,165,1561,221"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1658,85,1821,141"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1395,245,1565,301"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="445,268,616,324"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="673,641,847,697"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="916,661,1063,717"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="1136,687,1323,743"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1382,699,1578,741"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1629,699,1849,741"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1899,666,2107,707"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1897,731,2108,773"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="2156,666,2351,707"/>
<area shape="rect" id="node47" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2399,699,2593,741"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2641,699,2804,741"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="2156,731,2351,773"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f43e30911d75ce75b0af9ca70d5d382"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* foedus::storage::hash::HashDataPage::record_from_offset </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00276">276</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{ <span class="keywordflow">return</span> data_ + offset; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a752f776127f131ccc60744c10d5cf490"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::storage::hash::HashDataPage::release_pages_recursive </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a> &amp;&#160;</td>
          <td class="paramname"><em>page_resolver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1PageReleaseBatch.html">memory::PageReleaseBatch</a> *&#160;</td>
          <td class="paramname"><em>batch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8cpp_source.html#l00329">329</a> of file <a class="el" href="hash__page__impl_8cpp_source.html">hash_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="storage__id_8hpp_source.html#l00211">foedus::storage::VolatilePagePointer::clear()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00412">get_bin()</a>, <a class="el" href="page_8hpp_source.html#l00281">foedus::storage::PageHeader::get_in_layer_level()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00225">header()</a>, <a class="el" href="storage__id_8hpp_source.html#l00210">foedus::storage::VolatilePagePointer::is_null()</a>, <a class="el" href="page_8hpp_source.html#l00191">foedus::storage::PageHeader::page_id_</a>, <a class="el" href="page__pool_8hpp_source.html#l00292">foedus::memory::PageReleaseBatch::release()</a>, <a class="el" href="hash__page__impl_8cpp_source.html#l00329">release_pages_recursive()</a>, <a class="el" href="page__resolver_8hpp_source.html#l00120">foedus::memory::GlobalVolatilePageResolver::resolve_offset()</a>, <a class="el" href="storage__id_8hpp_source.html#l00308">foedus::storage::DualPagePointer::volatile_pointer_</a>, and <a class="el" href="storage__id_8hpp_source.html#l00195">foedus::storage::VolatilePagePointer::word</a>.</p>

<p>Referenced by <a class="el" href="hash__page__impl_8cpp_source.html#l00302">foedus::storage::hash::HashIntermediatePage::release_pages_recursive()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00329">release_pages_recursive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                 {</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">if</span> (!next_page_.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7">is_null</a>()) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">HashDataPage</a>* next = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">HashDataPage</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      page_resolver.resolve_offset(next_page_.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>));</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next-&gt;header().get_in_layer_level() == 0);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(next-&gt;get_bin() == <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#acfa062e1acf64b882f466cca8e190fdd">get_bin</a>());</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    next-&gt;release_pages_recursive(page_resolver, batch);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    next_page_.<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a>.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">clear</a>();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  VolatilePagePointer volatile_id;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  volatile_id.word = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac653a03fd75011048550f8e9f5dd198d">header</a>().<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">page_id_</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  batch-&gt;release(volatile_id);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_aef4fcde9f84d801c1aabd83001eb7f8d"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#aef4fcde9f84d801c1aabd83001eb7f8d">foedus::storage::hash::HashDataPage::HashDataPage</a></div><div class="ttdeci">HashDataPage()=delete</div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_a99e67179a5576a52a4710c700ac309f4"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">foedus::storage::DualPagePointer::volatile_pointer_</a></div><div class="ttdeci">VolatilePagePointer volatile_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00308">storage_id.hpp:308</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac653a03fd75011048550f8e9f5dd198d"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac653a03fd75011048550f8e9f5dd198d">foedus::storage::hash::HashDataPage::header</a></div><div class="ttdeci">PageHeader &amp; header()</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00225">hash_page_impl.hpp:225</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_ad9d25c0d8211f93db82d8cefe9d6ead7"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7">foedus::storage::VolatilePagePointer::is_null</a></div><div class="ttdeci">bool is_null() const </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00210">storage_id.hpp:210</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_aa8c59b8e2944d4a6a68d5fed840a7a29"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29">foedus::storage::VolatilePagePointer::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00211">storage_id.hpp:211</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_acfa062e1acf64b882f466cca8e190fdd"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#acfa062e1acf64b882f466cca8e190fdd">foedus::storage::hash::HashDataPage::get_bin</a></div><div class="ttdeci">HashBin get_bin() const </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00412">hash_page_impl.hpp:412</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a59128590fdc568e894a8973a319a0154"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a59128590fdc568e894a8973a319a0154">foedus::storage::PageHeader::page_id_</a></div><div class="ttdeci">uint64_t page_id_</div><div class="ttdoc">Page ID of this page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00191">page.hpp:191</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#aa8c59b8e2944d4a6a68d5fed840a7a29" title="foedus::storage::Volatile\lPagePointer::clear" alt="" coords="241,5,402,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#acfa062e1acf64b882f466cca8e190fdd" title="foedus::storage::hash\l::HashDataPage::get_bin" alt="" coords="238,71,405,112"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1PageHeader.html#ac40b3dad0a38d9a142bd14ea5000b669" title="foedus::storage::PageHeader\l::get_in_layer_level" alt="" coords="226,136,417,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac653a03fd75011048550f8e9f5dd198d" title="foedus::storage::hash\l::HashDataPage::header" alt="" coords="239,201,403,243"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ad9d25c0d8211f93db82d8cefe9d6ead7" title="foedus::storage::Volatile\lPagePointer::is_null" alt="" coords="491,172,653,213"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PageReleaseBatch.html#afe13efbf3cc2111936b08e31bd18e179" title="Returns the given in&#45;memory volatile page to appropriate NUMA node. " alt="" coords="221,384,421,425"/>
<area shape="rect" id="node9" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="220,319,423,360"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="736,179,897,220"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="495,319,649,360"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="742,413,891,455"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="485,384,659,425"/>
<area shape="rect" id="node15" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="471,238,673,294"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="739,249,894,291"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="721,319,912,360"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a752f776127f131ccc60744c10d5cf490_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a7a5b98d7f141ded1682a9e46ae3b8589" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive" alt="" coords="220,29,392,85"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage_1_1hash.html#a05601cf00ffeb4df540a0d43379d3387" title="foedus::storage::hash\l::release_parallel" alt="" coords="440,7,587,49"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashIntermediatePage.html#a72474ba11f14c8e37ab6b9b3bd92d64b" title="foedus::storage::hash\l::HashIntermediatePage\l::release_pages_recursive\l_parallel" alt="" coords="635,22,807,93"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a79c499b589d9e31709b066f1457bc1e3" title="foedus::storage::hash\l::HashStoragePimpl::drop" alt="" coords="855,37,1025,78"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab5edd3becb0d83ffab431754e2d80118" title="foedus::storage::hash\l::HashStorage::drop" alt="" coords="1073,37,1220,78"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a446f51ede965fce59769df74a0044dd8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint16_t foedus::storage::hash::HashDataPage::required_space </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>returns physical_record_length_ for a new record </p>

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00302">302</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00261">foedus::storage::hash::ReserveRecords::append_record_to_page()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00208">foedus::storage::hash::ReserveRecords::create_new_record_in_tail_page()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00480">create_record_in_snapshot()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00101">foedus::storage::hash::ReserveRecords::expand_record()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00139">foedus::storage::hash::ReserveRecords::find_and_lock_spacious_tail()</a>, and <a class="el" href="hash__page__impl_8cpp_source.html#l00170">reserve_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                                                                      {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(key_length) + <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length) + <span class="keyword">sizeof</span>(Slot);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_cgraph">
<area shape="rect" id="node2" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="267,13,427,39"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a446f51ede965fce59769df74a0044dd8_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a958308b83b377f31e6b01b39979e23b2" title="Appends a new physical record to the page. " alt="" coords="267,115,441,171"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="489,35,664,91"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="491,115,662,171"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a3834e18f4738d71f2e8f1a848b9e11d5" title="A simplified/efficient version to insert an active record, which must be used only in snapshot pages..." alt="" coords="273,195,435,251"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="272,35,436,91"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a82dc0eaea96412a4ddb70006b450d754" title="A system transaction that creates a logically deleted record in this page for the given key..." alt="" coords="271,326,437,382"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="712,75,864,131"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="912,82,1063,124"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a82dc0eaea96412a4ddb70006b450d754"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> foedus::storage::hash::HashDataPage::reserve_record </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">BloomFilterFingerprint</a> &amp;&#160;</td>
          <td class="paramname"><em>fingerprint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A system transaction that creates a logically deleted record in this page for the given key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hash</td><td>hash value of the key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fingerprint</td><td>Bloom Filter fingerprint of the key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>full key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>full key length. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">payload_length</td><td>the new record can contain at least this length of payload </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>slot index of the newly created record </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>the page is locked </dd>
<dd>
the page must not already contain a record with the exact key except it's moved </dd>
<dd>
required_space(key_length, payload_length) &lt;= <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. ">available_space()</a></dd></dl>
<p>This method also adds the fingerprint to the bloom filter. </p>

<p>Definition at line <a class="el" href="hash__page__impl_8cpp_source.html#l00170">170</a> of file <a class="el" href="hash__page__impl_8cpp_source.html">hash_page_impl.cpp</a>.</p>

<p>References <a class="el" href="hash__hashinate_8hpp_source.html#l00165">foedus::storage::hash::DataPageBloomFilter::add()</a>, <a class="el" href="assorted__func_8hpp_source.html#l00058">foedus::assorted::align8()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00281">available_space()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00248">get_slot()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00194">foedus::storage::hash::HashDataPage::Slot::hash_</a>, <a class="el" href="page_8hpp_source.html#l00318">foedus::storage::PageHeader::increment_key_count()</a>, <a class="el" href="page_8hpp_source.html#l00138">foedus::storage::PageVersion::is_locked()</a>, <a class="el" href="epoch_8hpp_source.html#l00077">foedus::Epoch::kEpochInitialCurrent</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00184">foedus::storage::hash::HashDataPage::Slot::key_length_</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00058">foedus::assorted::memory_fence_release()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00291">next_offset()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00171">foedus::storage::hash::HashDataPage::Slot::offset_</a>, <a class="el" href="page_8hpp_source.html#l00272">foedus::storage::PageHeader::page_version_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00191">foedus::storage::hash::HashDataPage::Slot::payload_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00179">foedus::storage::hash::HashDataPage::Slot::physical_record_length_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00275">record_from_offset()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00302">required_space()</a>, <a class="el" href="xct__id_8hpp_source.html#l01150">foedus::xct::RwLockableXctId::reset()</a>, <a class="el" href="xct__id_8hpp_source.html#l00958">foedus::xct::XctId::set()</a>, <a class="el" href="xct__id_8hpp_source.html#l01027">foedus::xct::XctId::set_deleted()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00165">foedus::storage::hash::HashDataPage::Slot::tid_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                           {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">page_version_</a>.<a class="code" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2">is_locked</a>());</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9">available_space</a>() &gt;= <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8">HashDataPage::required_space</a>(key_length, payload_length));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> index = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  Slot&amp; slot = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a>(index);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  slot.offset_ = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">next_offset</a>();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  slot.hash_ = hash;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  slot.key_length_ = key_length;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  slot.physical_record_length_ = <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(key_length) + <a class="code" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">assorted::align8</a>(payload_length);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  slot.payload_length_ = 0;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordtype">char</span>* record = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(slot.offset_);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  std::memcpy(record, key, key_length);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span> (key_length % 8 != 0) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    std::memset(record + key_length, 0, 8 - (key_length % 8));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  xct::XctId initial_id;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  initial_id.set(</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classfoedus_1_1Epoch.html#a987db657e61845e18835ce4b1617470fabfe4d611fb293208a4a9141666b16575">Epoch::kEpochInitialCurrent</a>,  <span class="comment">// TODO(Hideaki) this should be something else</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    0);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  initial_id.set_deleted();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// FIXME(tzwang): do this in a more meaningful place,</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// e.g., have something like get_new_slot.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  slot.tid_.reset();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  slot.tid_.xct_id_ = initial_id;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// we install the fingerprint to bloom filter BEFORE we increment key count.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// it&#39;s okay for concurrent reads to see false positives, but false negatives are wrong!</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  bloom_filter_.<a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61">add</a>(fingerprint);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// we increment key count AFTER installing the key because otherwise the optimistic read</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="comment">// might see the record but find that the key doesn&#39;t match. we need a fence to prevent it.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  header_.<a class="code" href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f">increment_key_count</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">return</span> index;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="ttc" id="group__ASSORTED_html_ga34d731a5b871bbd8a43b748808e9ce52"><div class="ttname"><a href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52">foedus::assorted::align8</a></div><div class="ttdeci">T align8(T value)</div><div class="ttdoc">8-alignment. </div><div class="ttdef"><b>Definition:</b> <a href="assorted__func_8hpp_source.html#l00058">assorted_func.hpp:58</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_a987db657e61845e18835ce4b1617470fabfe4d611fb293208a4a9141666b16575"><div class="ttname"><a href="classfoedus_1_1Epoch.html#a987db657e61845e18835ce4b1617470fabfe4d611fb293208a4a9141666b16575">foedus::Epoch::kEpochInitialCurrent</a></div><div class="ttdoc">The first epoch (before wrap-around) that might have transactions is ep-3. </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00077">epoch.hpp:77</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a9ac1ba8382fecd225d2ad1b6e13dae55"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55">foedus::storage::hash::HashDataPage::next_offset</a></div><div class="ttdeci">uint16_t next_offset() const </div><div class="ttdoc">Returns offset of a next record. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00291">hash_page_impl.hpp:291</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a3f361aa72342a7354ef9b8130b10d21f"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f">foedus::storage::PageHeader::increment_key_count</a></div><div class="ttdeci">void increment_key_count() __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00318">page.hpp:318</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac2e82163d7348a6c88fecff711025b08"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">foedus::storage::hash::HashDataPage::get_slot</a></div><div class="ttdeci">const Slot &amp; get_slot(DataPageSlotIndex record) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00248">hash_page_impl.hpp:248</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageHeader_html_a44c12d47d4b478bac2076df4760fc990"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageHeader.html#a44c12d47d4b478bac2076df4760fc990">foedus::storage::PageHeader::page_version_</a></div><div class="ttdeci">PageVersion page_version_</div><div class="ttdoc">Used in several storage types as concurrency control mechanism for the page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00272">page.hpp:272</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a476dd04e514ebe83142d21135e8b91c7"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">foedus::storage::hash::DataPageSlotIndex</a></div><div class="ttdeci">uint16_t DataPageSlotIndex</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00196">hash_id.hpp:196</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a446f51ede965fce59769df74a0044dd8"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8">foedus::storage::hash::HashDataPage::required_space</a></div><div class="ttdeci">static uint16_t required_space(uint16_t key_length, uint16_t payload_length)</div><div class="ttdoc">returns physical_record_length_ for a new record </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00302">hash_page_impl.hpp:302</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a49863802f2bfb024c928a37ea7abce07"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">foedus::storage::hash::HashDataPage::record_from_offset</a></div><div class="ttdeci">char * record_from_offset(uint16_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00275">hash_page_impl.hpp:275</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a41762390daf4751147dee762c64d8a61"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61">foedus::storage::hash::DataPageBloomFilter::add</a></div><div class="ttdeci">void add(const BloomFilterFingerprint &amp;fingerprint) __attribute__((always_inline))</div><div class="ttdoc">Adds the fingerprint to this bloom filter. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00165">hash_hashinate.hpp:165</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ae4d03b6ce42261195e565bdccaeb12b9"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9">foedus::storage::hash::HashDataPage::available_space</a></div><div class="ttdeci">uint16_t available_space() const </div><div class="ttdoc">Returns usable space in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00281">hash_page_impl.hpp:281</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1PageVersion_html_a301cba19b01cf82d7b576a04180b56e2"><div class="ttname"><a href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2">foedus::storage::PageVersion::is_locked</a></div><div class="ttdeci">bool is_locked() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00138">page.hpp:138</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gafc1110de4c6bb85c7e1f7feccc27f6d7"><div class="ttname"><a href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">foedus::assorted::memory_fence_release</a></div><div class="ttdeci">void memory_fence_release()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_release). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00058">atomic_fences.hpp:58</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a82dc0eaea96412a4ddb70006b450d754_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_a82dc0eaea96412a4ddb70006b450d754_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a82dc0eaea96412a4ddb70006b450d754_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_a82dc0eaea96412a4ddb70006b450d754_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a41762390daf4751147dee762c64d8a61" title="Adds the fingerprint to this bloom filter. " alt="" coords="237,5,419,47"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#ga34d731a5b871bbd8a43b748808e9ce52" title="8&#45;alignment. " alt="" coords="489,365,649,391"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ae4d03b6ce42261195e565bdccaeb12b9" title="Returns usable space in bytes. " alt="" coords="220,136,436,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="701,115,927,156"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a9ac1ba8382fecd225d2ad1b6e13dae55" title="Returns offset of a next record. " alt="" coords="493,173,644,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08" title="foedus::storage::hash\l::HashDataPage::get_slot" alt="" coords="729,213,899,255"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1PageHeader.html#a3f361aa72342a7354ef9b8130b10d21f" title="foedus::storage::PageHeader\l::increment_key_count" alt="" coords="233,355,423,396"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1PageVersion.html#a301cba19b01cf82d7b576a04180b56e2" title="foedus::storage::PageVersion\l::is_locked" alt="" coords="232,485,424,527"/>
<area shape="rect" id="node12" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7" title="Equivalent to std::atomic_thread_fence(std::memory_order_release). " alt="" coords="727,624,901,665"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07" title="foedus::storage::hash\l::HashDataPage::record\l_from_offset" alt="" coords="247,551,409,607"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a446f51ede965fce59769df74a0044dd8" title="returns physical_record_length_ for a new record " alt="" coords="221,420,435,461"/>
<area shape="rect" id="node15" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a5e7ab8019cc94226ed2d71fe671dd6b7" title="used only while page initialization " alt="" coords="237,683,419,724"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#ad18a2d4a528fa063786b6efaf1035377" title="foedus::xct::XctId::set" alt="" coords="254,749,402,775"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#a4fe6746e50f7bd8ca61c9d141eafc8a2" title="foedus::xct::XctId\l::set_deleted" alt="" coords="267,800,389,841"/>
<area shape="rect" id="node10" href="structfoedus_1_1xct_1_1McsWwLock.html#abe15a0d250a2186ac534fc5d2d0b7f8e" title="This is a &quot;relaxed&quot; check. " alt="" coords="484,485,653,527"/>
<area shape="rect" id="node11" href="structfoedus_1_1xct_1_1McsWwBlockData.html#aa6a3e9b495bb234bf4c840a0e43d082e" title="foedus::xct::McsWwBlockData\l::is_valid_relaxed" alt="" coords="713,485,915,527"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1McsRwLock.html#a522c5b2702bad890293b39e634f2c3c4" title="foedus::xct::McsRwLock\l::reset" alt="" coords="486,683,651,724"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1McsRwLock.html#a252a31f1689940909fe3520162b685f7" title="foedus::xct::McsRwLock\l::set_next_writer" alt="" coords="731,689,897,731"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1McsRwLock.html#a0bd9c402804ed75f85852e0f9e429cba" title="foedus::xct::McsRwLock\l::xchg_next_writer" alt="" coords="975,689,1140,731"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa03f1438dc159688f49de6e73c851d6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> foedus::storage::hash::HashDataPage::search_key_physical </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__HASH.html#ga9fb894469b702dac3a6564416e19ed42">HashValue</a>&#160;</td>
          <td class="paramname"><em>hash</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1BloomFilterFingerprint.html">BloomFilterFingerprint</a> &amp;&#160;</td>
          <td class="paramname"><em>fingerprint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__HASH.html#ga80072e9a1d445f90ee2bd91a16a44267">KeyLength</a>&#160;</td>
          <td class="paramname"><em>key_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>record_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a>&#160;</td>
          <td class="paramname"><em>check_from</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search for a physical slot that exactly contains the given key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">hash</td><td>hash value of the key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fingerprint</td><td>Bloom Filter fingerprint of the key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>full key. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">key_length</td><td>full key length. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">record_count</td><td>how many records this page <em>supposedly</em> contains. See below. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">check_from</td><td>From which record we start searching. If you know that records before this index do definitely not contain the keys, this will speed up the search. The caller must guarantee that none of the records before this index have the key or they have been moved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>index of the slot that has the key. kSlotNotFound if not found (including the case where an exactly-matched record's TID says it's "moved"). </dd></dl>
<dl class="section invariant"><dt>Invariant</dt><dd>hash == hashinate(key, key_length)</dd></dl>
<p>If you have acquired record_count in a protected way (after a page lock, which you still keep) then this method is an exact search. Otherwise, a concurrent thread might be now inserting, so this method might have false negative (which is why you should take <a class="el" href="structfoedus_1_1storage_1_1PageVersion.html" title="Just a synonym of XctId to be used as a page lock mechanism. ">PageVersion</a> for miss-search). However, no false positive possible.</p>
<p>This method searches for a physical slot no matter whether the record is logically deleted. However, "moved" records are completely ignored.</p>
<p>This method is <em>physical-only</em>. The returend record might be now being modified or moved. The only contract is the returend slot (if not kSlotNotFound) points to a physical record whose key is exactly same as the given one. It is trivially guaranteed because key/hash in physical records in our hash pages are immutable. </p>

<p>Definition at line <a class="el" href="hash__page__impl_8cpp_source.html#l00106">106</a> of file <a class="el" href="hash__page__impl_8cpp_source.html">hash_page_impl.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00152">foedus::storage::hash::DataPageBloomFilter::contains()</a>, <a class="el" href="hash__hashinate_8hpp_source.html#l00175">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00246">get_record_count()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00248">get_slot()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00194">foedus::storage::hash::HashDataPage::Slot::hash_</a>, <a class="el" href="hash__hashinate_8cpp_source.html#l00031">foedus::storage::hash::hashinate()</a>, <a class="el" href="xct__id_8hpp_source.html#l01041">foedus::xct::XctId::is_moved()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00184">foedus::storage::hash::HashDataPage::Slot::key_length_</a>, <a class="el" href="hash__id_8hpp_source.html#l00197">foedus::storage::hash::kSlotNotFound</a>, <a class="el" href="compiler_8hpp_source.html#l00103">LIKELY</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00171">foedus::storage::hash::HashDataPage::Slot::offset_</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00275">record_from_offset()</a>, <a class="el" href="hash__page__impl_8hpp_source.html#l00165">foedus::storage::hash::HashDataPage::Slot::tid_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00889">foedus::storage::hash::HashStoragePimpl::locate_record_in_snapshot()</a>, <a class="el" href="hash__reserve__impl_8cpp_source.html#l00244">foedus::storage::hash::ReserveRecords::search_within_page()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l01135">foedus::storage::hash::HashStoragePimpl::track_moved_record_search()</a>.</p>
<div class="fragment"><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                      {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// invariant checks</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(hash == <a class="code" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">hashinate</a>(key, key_length));</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f">DataPageBloomFilter::extract_fingerprint</a>(hash) == fingerprint);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(record_count &lt;= <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">get_record_count</a>());  <span class="comment">// it must be increasing.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// Check the invariant on check_from</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; check_from; ++i) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">const</span> Slot&amp; s = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a>(i);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(s.hash_ != hash) || s.key_length_ != key_length) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s.tid_.xct_id_.is_moved()) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* data = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(s.offset_);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(s.key_length_ != key_length || std::memcmp(data, key, key_length) != 0);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">// check bloom filter first.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (!bloom_filter_.<a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a4e5601b652daaffbcb9fa81aee6746c6">contains</a>(fingerprint)) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a33cdddb3771cf2fdc3e65465792b6c96">kSlotNotFound</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// then most likely this page contains it. let&#39;s check one by one.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">for</span> (uint16_t i = check_from; i &lt; record_count; ++i) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keyword">const</span> Slot&amp; s = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">get_slot</a>(i);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a>(s.hash_ != hash) || s.key_length_ != key_length) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// At this point, we don&#39;t take read-set (this is a physical search).</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// We thus mind seeing being-written. The logical check will follow.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// We can also simply check is_moved because the flag is guaranteed to remain once set.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// But, remember, it might be NOW being moved, so a logical read-set must follow.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (s.tid_.xct_id_.is_moved()) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// not so rare. this happens.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;Hash matched, but the record was moved&quot;</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* data = <a class="code" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">record_from_offset</a>(s.offset_);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (s.key_length_ == key_length &amp;&amp; std::memcmp(data, key, key_length) == 0) {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// hash matched, but key didn&#39;t match? wow, that&#39;s rare</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    DLOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Hash matched, but key didn&#39;t match. interesting. hash=&quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      &lt;&lt; assorted::Hex(hash, 16) &lt;&lt; <span class="stringliteral">&quot;, key=&quot;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      &lt;&lt; assorted::HexString(std::string(reinterpret_cast&lt;const char*&gt;(key), key_length))</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;, key_slot=&quot;</span>  &lt;&lt; assorted::HexString(std::string(data, s.key_length_));</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// should be 1~2%</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  DVLOG(0) &lt;&lt; <span class="stringliteral">&quot;Nope, bloom filter contained it, but key not found in this page. false positive&quot;</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a33cdddb3771cf2fdc3e65465792b6c96">kSlotNotFound</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a33cdddb3771cf2fdc3e65465792b6c96"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a33cdddb3771cf2fdc3e65465792b6c96">foedus::storage::hash::kSlotNotFound</a></div><div class="ttdeci">const DataPageSlotIndex kSlotNotFound</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00197">hash_id.hpp:197</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a4e5601b652daaffbcb9fa81aee6746c6"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a4e5601b652daaffbcb9fa81aee6746c6">foedus::storage::hash::DataPageBloomFilter::contains</a></div><div class="ttdeci">bool contains(const BloomFilterFingerprint &amp;fingerprint) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00152">hash_hashinate.hpp:152</a></div></div>
<div class="ttc" id="group__COMPILER_html_gad10e2a9bf230cc6fdd98a6c70958ef81"><div class="ttname"><a href="group__COMPILER.html#gad10e2a9bf230cc6fdd98a6c70958ef81">LIKELY</a></div><div class="ttdeci">#define LIKELY(x)        </div><div class="ttdoc">Hints that x is highly likely true. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00103">compiler.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac2e82163d7348a6c88fecff711025b08"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08">foedus::storage::hash::HashDataPage::get_slot</a></div><div class="ttdeci">const Slot &amp; get_slot(DataPageSlotIndex record) const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00248">hash_page_impl.hpp:248</a></div></div>
<div class="ttc" id="group__HASH_html_ga8c4ca78e36b2188f1feac100ce7df679"><div class="ttname"><a href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679">foedus::storage::hash::hashinate</a></div><div class="ttdeci">HashValue hashinate(const void *key, uint16_t key_length)</div><div class="ttdoc">Calculates hash value for general input. </div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8cpp_source.html#l00031">hash_hashinate.cpp:31</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a28a11a7b04e04d895b21f29709eacd1f"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint</a></div><div class="ttdeci">static BloomFilterFingerprint extract_fingerprint(HashValue fullhash)</div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00175">hash_hashinate.hpp:175</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_a49863802f2bfb024c928a37ea7abce07"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07">foedus::storage::hash::HashDataPage::record_from_offset</a></div><div class="ttdeci">char * record_from_offset(uint16_t offset)</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00275">hash_page_impl.hpp:275</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_html_ac6b4a13e6f057be1874f637fb9f87c51"><div class="ttname"><a href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51">foedus::storage::hash::HashDataPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="hash__page__impl_8hpp_source.html#l00246">hash_page_impl.hpp:246</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_cgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_cgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_cgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a4e5601b652daaffbcb9fa81aee6746c6" title="foedus::storage::hash\l::DataPageBloomFilter\l::contains" alt="" coords="253,5,407,61"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f" title="foedus::storage::hash\l::DataPageBloomFilter\l::extract_fingerprint" alt="" coords="253,85,407,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac6b4a13e6f057be1874f637fb9f87c51" title="foedus::storage::hash\l::HashDataPage::get_record_count" alt="" coords="217,166,443,207"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#ac2e82163d7348a6c88fecff711025b08" title="foedus::storage::hash\l::HashDataPage::get_slot" alt="" coords="245,231,415,273"/>
<area shape="rect" id="node6" href="group__HASH.html#ga8c4ca78e36b2188f1feac100ce7df679" title="Calculates hash value for general input. " alt="" coords="257,297,403,338"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="269,362,391,403"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html#a49863802f2bfb024c928a37ea7abce07" title="foedus::storage::hash\l::HashDataPage::record\l_from_offset" alt="" coords="249,428,411,484"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_icgraph.png" border="0" usemap="#classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_icgraph" alt=""/></div>
<map name="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_icgraph" id="classfoedus_1_1storage_1_1hash_1_1HashDataPage_aa03f1438dc159688f49de6e73c851d6e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="447,338,628,394"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="217,403,399,459"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a0947f74956ac95cf143ff61f6493dcc4" title="foedus::storage::hash\l::ReserveRecords::search\l_within_page" alt="" coords="223,483,393,539"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a144ddbe7819e7b3576611d456aa46c77" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record_search" alt="" coords="221,577,395,633"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="676,258,857,314"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="676,338,857,394"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="925,29,1089,85"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="925,138,1089,194"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="917,218,1096,274"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="916,298,1097,354"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="915,378,1098,434"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="909,458,1105,514"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="905,557,1108,613"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1170,5,1345,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1175,71,1339,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1156,152,1359,193"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1429,71,1604,127"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1184,218,1331,274"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1183,298,1331,354"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1183,378,1332,434"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1159,458,1355,514"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1176,538,1339,594"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1435,458,1598,514"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1172,618,1343,674"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="461,483,613,539"/>
<area shape="rect" id="node26" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="691,491,842,532"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af3a7066a8881f653e759362cf39e01c4" title="foedus::storage::hash\l::HashStoragePimpl::track\l_moved_record" alt="" coords="450,590,625,646"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ab763d5d37f053808257f662611f2e603" title="Resolves a &quot;moved&quot; record. " alt="" coords="693,645,840,701"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a3248d8440d805f772ad7b6122a4d309b" title="foedus::storage::Storage\lManagerPimpl::track_moved\l_record" alt="" coords="913,673,1100,729"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1StorageManager.html#a02513539acf9d7cd9805d34154281076" title="Resolves a &quot;moved&quot; record. " alt="" coords="1159,699,1355,740"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9090dd1fa81513f61620b44a9a8bbd1d" title="used from verification methods to track moved record " alt="" coords="1407,699,1627,740"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="1676,665,1884,707"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="1675,731,1885,772"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="1933,665,2128,707"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="2176,699,2371,740"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="2419,699,2581,740"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1933,731,2128,772"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f720ed7ecd8720931ccfeff29769b16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> foedus::storage::hash::HashDataPage::to_slot_index </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1hash_1_1HashDataPage_1_1Slot.html">Slot</a> *&#160;</td>
          <td class="paramname"><em>slot</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00266">266</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                                                                {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(slot);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    int64_t index = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>Slot*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1) - slot - 1;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &gt;= 0);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; static_cast&lt;int64_t&gt;(<span class="keyword">sizeof</span>(data_) / <span class="keyword">sizeof</span>(Slot)));</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a><span class="keyword">&gt;</span>(index);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a476dd04e514ebe83142d21135e8b91c7"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">foedus::storage::hash::DataPageSlotIndex</a></div><div class="ttdeci">uint16_t DataPageSlotIndex</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00196">hash_id.hpp:196</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="ac070399b2f22a1c281daab73fe0a9f27"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>defined in <a class="el" href="hash__page__debug_8cpp.html">hash_page_debug.cpp</a>. </p>

<p>Definition at line <a class="el" href="hash__page__debug_8cpp_source.html#l00052">52</a> of file <a class="el" href="hash__page__debug_8cpp_source.html">hash_page_debug.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                                                             {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;HashDataPage&gt;&quot;</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;vaddr&gt;&quot;</span> &lt;&lt; assorted::Hex(reinterpret_cast&lt;uintptr_t&gt;(&amp;v), 16) &lt;&lt; <span class="stringliteral">&quot;&lt;/vaddr&gt;&quot;</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  o &lt;&lt; std::endl &lt;&lt; v.header();</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;bin&gt;&quot;</span> &lt;&lt; assorted::Hex(v.get_bin()) &lt;&lt; <span class="stringliteral">&quot;&lt;/bin&gt;&quot;</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  uint16_t records = v.get_record_count();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;record_count&gt;&quot;</span> &lt;&lt; records &lt;&lt; <span class="stringliteral">&quot;&lt;/record_count&gt;&quot;</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;next_page&gt;&quot;</span> &lt;&lt; v.next_page() &lt;&lt; <span class="stringliteral">&quot;&lt;/next_page&gt;&quot;</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;records&gt;&quot;</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">DataPageSlotIndex</a> i = 0; i &lt; records; ++i) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">const</span> HashDataPage::Slot* slot = v.get_slot_address(i);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;record index=\&quot;&quot;</span> &lt;&lt; i</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; hash=\&quot;&quot;</span> &lt;&lt; assorted::Hex(slot-&gt;hash_, 16)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; physical_record_len=\&quot;&quot;</span> &lt;&lt; slot-&gt;physical_record_length_</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; key_length_=\&quot;&quot;</span> &lt;&lt; slot-&gt;key_length_</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; offset=\&quot;&quot;</span> &lt;&lt; slot-&gt;offset_</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot; payload_len=\&quot;&quot;</span> &lt;&lt; slot-&gt;payload_length_</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* data = v.record_from_offset(slot-&gt;offset_);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    std::string key(data, slot-&gt;key_length_);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;key&gt;&quot;</span> &lt;&lt; assorted::HexString(key) &lt;&lt; <span class="stringliteral">&quot;&lt;/key&gt;&quot;</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">if</span> (slot-&gt;payload_length_ &gt; 0) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      std::string payload(data + slot-&gt;get_aligned_key_length(), slot-&gt;payload_length_);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      o &lt;&lt; <span class="stringliteral">&quot;&lt;payload&gt;&quot;</span> &lt;&lt; assorted::HexString(payload) &lt;&lt; <span class="stringliteral">&quot;&lt;/payload&gt;&quot;</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    BloomFilterFingerprint fingerprint = <a class="code" href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f">DataPageBloomFilter::extract_fingerprint</a>(slot-&gt;hash_);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    o &lt;&lt; fingerprint;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    o &lt;&lt; slot-&gt;tid_;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;/record&gt;&quot;</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;/records&gt;&quot;</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  o &lt;&lt; std::endl &lt;&lt; <span class="stringliteral">&quot;  &lt;BloomFilter&gt;&quot;</span> &lt;&lt; v.bloom_filter_ &lt;&lt; <span class="stringliteral">&quot;&lt;/BloomFilter&gt;&quot;</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/HashDataPage&gt;&quot;</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1hash_html_a476dd04e514ebe83142d21135e8b91c7"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1hash.html#a476dd04e514ebe83142d21135e8b91c7">foedus::storage::hash::DataPageSlotIndex</a></div><div class="ttdeci">uint16_t DataPageSlotIndex</div><div class="ttdef"><b>Definition:</b> <a href="hash__id_8hpp_source.html#l00196">hash_id.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter_html_a28a11a7b04e04d895b21f29709eacd1f"><div class="ttname"><a href="structfoedus_1_1storage_1_1hash_1_1DataPageBloomFilter.html#a28a11a7b04e04d895b21f29709eacd1f">foedus::storage::hash::DataPageBloomFilter::extract_fingerprint</a></div><div class="ttdeci">static BloomFilterFingerprint extract_fingerprint(HashValue fullhash)</div><div class="ttdef"><b>Definition:</b> <a href="hash__hashinate_8hpp_source.html#l00175">hash_hashinate.hpp:175</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0997623d4b1299eca25b45a046179842"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend struct <a class="el" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html">ReserveRecords</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="hash__page__impl_8hpp_source.html#l00157">157</a> of file <a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/storage/hash/<a class="el" href="hash__page__impl_8hpp_source.html">hash_page_impl.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/hash/<a class="el" href="hash__page__debug_8cpp_source.html">hash_page_debug.cpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/storage/hash/<a class="el" href="hash__page__impl_8cpp_source.html">hash_page_impl.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage.html">storage</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1storage_1_1hash.html">hash</a></li><li class="navelem"><a class="el" href="classfoedus_1_1storage_1_1hash_1_1HashDataPage.html">HashDataPage</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
