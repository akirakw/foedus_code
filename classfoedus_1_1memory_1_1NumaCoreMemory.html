<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::memory::NumaCoreMemory Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1memory_1_1NumaCoreMemory.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classfoedus_1_1memory_1_1NumaCoreMemory-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::memory::NumaCoreMemory Class Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__MEMORY.html">Memory Manager</a> &raquo; <a class="el" href="group__MEMHIERARCHY.html">Memory Hierarchy</a><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo;  &#124; <a class="el" href="group__THREAD.html">Thread and Thread-Group</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Repository of memories dynamically acquired within one CPU core (thread).  
 <a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Repository of memories dynamically acquired within one CPU core (thread). </p>
<p>One <a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html" title="Repository of memories dynamically acquired within one CPU core (thread). ">NumaCoreMemory</a> corresponds to one <a class="el" href="classfoedus_1_1thread_1_1Thread.html" title="Represents one thread running on one NUMA core. ">foedus::thread::Thread</a>. Each Thread exclusively access its <a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html" title="Repository of memories dynamically acquired within one CPU core (thread). ">NumaCoreMemory</a> so that it needs no synchronization nor causes cache misses/cache-line ping-pongs. All memories here are allocated/freed via <a class="el" href="numa_8h.html#a751dfa7ea95405372b4f30cfde9aa550">numa_alloc_interleaved()</a>, <a class="el" href="numa_8h.html#a0c2d1ca7771933df34f77c175082294f">numa_alloc_onnode()</a>, and <a class="el" href="numa_8h.html#a75ff6cd426469e8afb447fbb61d7dfe8">numa_free()</a> (except the user specifies to not use them). </p>

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00046">46</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for foedus::memory::NumaCoreMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory__inherit__graph.png" border="0" usemap="#foedus_1_1memory_1_1NumaCoreMemory_inherit__map" alt="Inheritance graph"/></div>
<map name="foedus_1_1memory_1_1NumaCoreMemory_inherit__map" id="foedus_1_1memory_1_1NumaCoreMemory_inherit__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="11,80,183,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="31,5,163,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for foedus::memory::NumaCoreMemory:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory__coll__graph.png" border="0" usemap="#foedus_1_1memory_1_1NumaCoreMemory_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1memory_1_1NumaCoreMemory_coll__map" id="foedus_1_1memory_1_1NumaCoreMemory_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1DefaultInitializable.html" title="Typical implementation of Initializable as a skeleton base class. " alt="" coords="11,80,183,107"/>
<area shape="rect" id="node3" href="classfoedus_1_1Initializable.html" title="The pure&#45;virtual interface to initialize/uninitialize non&#45;trivial resources. " alt="" coords="31,5,163,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__MEMHIERARCHY.html#structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces">SmallThreadLocalMemoryPieces</a></td></tr>
<tr class="memdesc:structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs pointers to pieces of small_thread_local_memory_.  <a href="group__MEMHIERARCHY.html#structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces">More...</a><br /></td></tr>
<tr class="separator:structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5d2bed95cc64311edc57f70203d8075b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a5d2bed95cc64311edc57f70203d8075b">NumaCoreMemory</a> ()=delete</td></tr>
<tr class="separator:a5d2bed95cc64311edc57f70203d8075b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae52c70de54b28d69dc585e33ee5775b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ae52c70de54b28d69dc585e33ee5775b1">NumaCoreMemory</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a> *node_memory, <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> core_id)</td></tr>
<tr class="separator:ae52c70de54b28d69dc585e33ee5775b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7bdd6c02647872c28ecb66d89adb965"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965">initialize_once</a> () override</td></tr>
<tr class="separator:af7bdd6c02647872c28ecb66d89adb965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a7a7f3ef2839774e1e35fc0b9f79336"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a4a7a7f3ef2839774e1e35fc0b9f79336">uninitialize_once</a> () override</td></tr>
<tr class="separator:a4a7a7f3ef2839774e1e35fc0b9f79336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab02e9bcb37082e31781b4b8ce8e4bf21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">AlignedMemorySlice</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ab02e9bcb37082e31781b4b8ce8e4bf21">get_log_buffer_memory</a> () const </td></tr>
<tr class="separator:ab02e9bcb37082e31781b4b8ce8e4bf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a694668bb2a5894b720406d5ed40f5bc0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a694668bb2a5894b720406d5ed40f5bc0">get_node_memory</a> () const </td></tr>
<tr class="memdesc:a694668bb2a5894b720406d5ed40f5bc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the parent memory repository.  <a href="#a694668bb2a5894b720406d5ed40f5bc0">More...</a><br /></td></tr>
<tr class="separator:a694668bb2a5894b720406d5ed40f5bc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09e335bbca636246cf2c3d60ec22570"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">grab_free_volatile_page</a> ()</td></tr>
<tr class="memdesc:ad09e335bbca636246cf2c3d60ec22570"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires one free volatile page from <b>local</b> page pool.  <a href="#ad09e335bbca636246cf2c3d60ec22570">More...</a><br /></td></tr>
<tr class="separator:ad09e335bbca636246cf2c3d60ec22570"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb436d68c982228d9e4bc66104b2aa98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98">grab_free_volatile_page_pointer</a> ()</td></tr>
<tr class="memdesc:afb436d68c982228d9e4bc66104b2aa98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for <a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. ">grab_free_volatile_page()</a>.  <a href="#afb436d68c982228d9e4bc66104b2aa98">More...</a><br /></td></tr>
<tr class="separator:afb436d68c982228d9e4bc66104b2aa98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3e2f6d24f2b0f5c04d2cde48db11f6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac3e2f6d24f2b0f5c04d2cde48db11f6a">grab_free_snapshot_page</a> ()</td></tr>
<tr class="memdesc:ac3e2f6d24f2b0f5c04d2cde48db11f6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same, except it's for snapshot page.  <a href="#ac3e2f6d24f2b0f5c04d2cde48db11f6a">More...</a><br /></td></tr>
<tr class="separator:ac3e2f6d24f2b0f5c04d2cde48db11f6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c9bf7d6b21ac33a61d6f7176023ea3a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a6c9bf7d6b21ac33a61d6f7176023ea3a">release_free_volatile_page</a> (<a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> offset)</td></tr>
<tr class="memdesc:a6c9bf7d6b21ac33a61d6f7176023ea3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns one free volatile page to <b>local</b> page pool.  <a href="#a6c9bf7d6b21ac33a61d6f7176023ea3a">More...</a><br /></td></tr>
<tr class="separator:a6c9bf7d6b21ac33a61d6f7176023ea3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea5067e450fa872240cb010ddb65464"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a7ea5067e450fa872240cb010ddb65464">release_free_snapshot_page</a> (<a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> offset)</td></tr>
<tr class="memdesc:a7ea5067e450fa872240cb010ddb65464"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same, except it's for snapshot page.  <a href="#a7ea5067e450fa872240cb010ddb65464">More...</a><br /></td></tr>
<tr class="separator:a7ea5067e450fa872240cb010ddb65464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cddb16a58222307e8876f35ff8041d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a4cddb16a58222307e8876f35ff8041d7">get_volatile_pool</a> ()</td></tr>
<tr class="separator:a4cddb16a58222307e8876f35ff8041d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3fd2a870909f108bdea1ee3d184cebe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad3fd2a870909f108bdea1ee3d184cebe">get_snapshot_pool</a> ()</td></tr>
<tr class="separator:ad3fd2a870909f108bdea1ee3d184cebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0624fe34e52c0904ee449c97f0325c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html">PagePoolOffsetAndEpochChunk</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad0624fe34e52c0904ee449c97f0325c5">get_retired_volatile_pool_chunk</a> (uint16_t node)</td></tr>
<tr class="separator:ad0624fe34e52c0904ee449c97f0325c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac62f3ab84bf9ac7f5b7a07c656d5190a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">xct::LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac62f3ab84bf9ac7f5b7a07c656d5190a">get_current_lock_list_memory</a> () const </td></tr>
<tr class="separator:ac62f3ab84bf9ac7f5b7a07c656d5190a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1542703e9d39b62b7269192a4db8e4b6"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a1542703e9d39b62b7269192a4db8e4b6">get_current_lock_list_capacity</a> () const </td></tr>
<tr class="separator:a1542703e9d39b62b7269192a4db8e4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11de415935b61a9f48e35719d500cbb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">xct::LockEntry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a11de415935b61a9f48e35719d500cbb9">get_retrospective_lock_list_memory</a> () const </td></tr>
<tr class="separator:a11de415935b61a9f48e35719d500cbb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15ff5555f06dfff58b3fd11f60f2ca7"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#aa15ff5555f06dfff58b3fd11f60f2ca7">get_retrospective_lock_list_capacity</a> () const </td></tr>
<tr class="separator:aa15ff5555f06dfff58b3fd11f60f2ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f376657b7efceecf12e0cc504ab8c17"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="group__MEMHIERARCHY.html#structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces">SmallThreadLocalMemoryPieces</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a3f376657b7efceecf12e0cc504ab8c17">get_small_thread_local_memory_pieces</a> () const </td></tr>
<tr class="separator:a3f376657b7efceecf12e0cc504ab8c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f55dee0a9b4f7f55d22a60cd677f39e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a8f55dee0a9b4f7f55d22a60cd677f39e">get_local_work_memory</a> () const </td></tr>
<tr class="separator:a8f55dee0a9b4f7f55d22a60cd677f39e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a318c160df3a63c1063665a1f19e741e8"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a318c160df3a63c1063665a1f19e741e8">get_local_work_memory_size</a> () const </td></tr>
<tr class="separator:a318c160df3a63c1063665a1f19e741e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1DefaultInitializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1DefaultInitializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1DefaultInitializable.html">foedus::DefaultInitializable</a></td></tr>
<tr class="memitem:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a5e0a2679baa030e297c1a51847352945">DefaultInitializable</a> ()</td></tr>
<tr class="separator:a5e0a2679baa030e297c1a51847352945 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afe7a18ec3e5edd143eb7d6a75d65ef9b">~DefaultInitializable</a> ()</td></tr>
<tr class="separator:afe7a18ec3e5edd143eb7d6a75d65ef9b inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#afd6a8f8296ab570b545430593287d454">DefaultInitializable</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:afd6a8f8296ab570b545430593287d454 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a31eb5acadf0544b97414efd33aed08c7">operator=</a> (const <a class="el" href="classfoedus_1_1DefaultInitializable.html">DefaultInitializable</a> &amp;)=delete</td></tr>
<tr class="separator:a31eb5acadf0544b97414efd33aed08c7 inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a22a0dc3bbbca682c3bc41eace9b6d1ff">initialize</a> () override final</td></tr>
<tr class="memdesc:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#aa087b096d1edaeb0304c250eadb0d7e1" title="Acquires resources in this object, usually called right after constructor. ">Initializable::initialize()</a> that provides initialize-once semantics.  <a href="#a22a0dc3bbbca682c3bc41eace9b6d1ff">More...</a><br /></td></tr>
<tr class="separator:a22a0dc3bbbca682c3bc41eace9b6d1ff inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#ab14b136a7d26f9f499ab9dc15a45a8cb">uninitialize</a> () override final</td></tr>
<tr class="memdesc:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Typical implementation of <a class="el" href="classfoedus_1_1Initializable.html#afbe5738b0bc85362fba80bdf788fd3c3" title="An idempotent method to release all resources of this object, if any. ">Initializable::uninitialize()</a> that provides uninitialize-once semantics.  <a href="#ab14b136a7d26f9f499ab9dc15a45a8cb">More...</a><br /></td></tr>
<tr class="separator:ab14b136a7d26f9f499ab9dc15a45a8cb inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1DefaultInitializable.html#a1abda1e84b8af8bd6916e52fd0a09f3e">is_initialized</a> () const  override final</td></tr>
<tr class="memdesc:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object has been already initialized or not.  <a href="#a1abda1e84b8af8bd6916e52fd0a09f3e">More...</a><br /></td></tr>
<tr class="separator:a1abda1e84b8af8bd6916e52fd0a09f3e inherit pub_methods_classfoedus_1_1DefaultInitializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classfoedus_1_1Initializable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classfoedus_1_1Initializable')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classfoedus_1_1Initializable.html">foedus::Initializable</a></td></tr>
<tr class="memitem:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1Initializable.html#aff308260543d18b3fd1367fd9017b176">~Initializable</a> ()</td></tr>
<tr class="separator:aff308260543d18b3fd1367fd9017b176 inherit pub_methods_classfoedus_1_1Initializable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:adb12d1c6977fada9ea158addc0e27130"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#adb12d1c6977fada9ea158addc0e27130">calculate_local_small_memory_size</a> (const <a class="el" href="structfoedus_1_1EngineOptions.html">EngineOptions</a> &amp;options)</td></tr>
<tr class="separator:adb12d1c6977fada9ea158addc0e27130"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5d2bed95cc64311edc57f70203d8075b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::NumaCoreMemory::NumaCoreMemory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae52c70de54b28d69dc585e33ee5775b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::memory::NumaCoreMemory::NumaCoreMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a> *&#160;</td>
          <td class="paramname"><em>node_memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>core_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00039">39</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__id_8hpp_source.html#l00123">foedus::thread::compose_thread_id()</a>, and <a class="el" href="numa__node__memory_8hpp_source.html#l00055">foedus::memory::NumaNodeMemory::get_numa_node()</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  : engine_(engine),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    node_memory_(node_memory),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    core_id_(core_id),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    numa_node_(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">thread::decompose_numa_node</a>(core_id)),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    core_local_ordinal_(<a class="code" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">thread::decompose_numa_local_ordinal</a>(core_id)),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    free_volatile_pool_chunk_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    free_snapshot_pool_chunk_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    retired_volatile_pool_chunks_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    current_lock_list_memory_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    current_lock_list_capacity_(0),</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    retrospective_lock_list_memory_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    retrospective_lock_list_capacity_(0),</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    volatile_pool_(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    snapshot_pool_(<span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(numa_node_ == node_memory-&gt;get_numa_node());</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(core_id_ == <a class="code" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">thread::compose_thread_id</a>(node_memory-&gt;get_numa_node(),</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                          core_local_ordinal_));</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="ttc" id="group__THREAD_html_ga93083d6b052db01851cb61c120522c1d"><div class="ttname"><a href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">foedus::thread::decompose_numa_local_ordinal</a></div><div class="ttdeci">ThreadLocalOrdinal decompose_numa_local_ordinal(ThreadId global_id)</div><div class="ttdoc">Extracts local ordinal from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00139">thread_id.hpp:139</a></div></div>
<div class="ttc" id="group__THREAD_html_ga1622c6d8c64ca80f51c1bef5190ec4fa"><div class="ttname"><a href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">foedus::thread::decompose_numa_node</a></div><div class="ttdeci">ThreadGroupId decompose_numa_node(ThreadId global_id)</div><div class="ttdoc">Extracts NUMA node ID from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00131">thread_id.hpp:131</a></div></div>
<div class="ttc" id="group__THREAD_html_ga3cfa4441e96554e775ec6013c180e192"><div class="ttname"><a href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">foedus::thread::compose_thread_id</a></div><div class="ttdeci">ThreadId compose_thread_id(ThreadGroupId node, ThreadLocalOrdinal local_core)</div><div class="ttdoc">Returns a globally unique ID of Thread (core) for the given node and ordinal in the node...</div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00123">thread_id.hpp:123</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ae52c70de54b28d69dc585e33ee5775b1_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ae52c70de54b28d69dc585e33ee5775b1_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ae52c70de54b28d69dc585e33ee5775b1_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ae52c70de54b28d69dc585e33ee5775b1_cgraph">
<area shape="rect" id="node2" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192" title="Returns a globally unique ID of Thread (core) for the given node and ordinal in the node..." alt="" coords="249,5,415,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a07b0da28d3afe3b46d80335a5f422d03" title="foedus::memory::NumaNode\lMemory::get_numa_node" alt="" coords="239,71,425,112"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="adb12d1c6977fada9ea158addc0e27130"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::NumaCoreMemory::calculate_local_small_memory_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1EngineOptions.html">EngineOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the byte size of small_thread_local_memory each thread consumes </dd></dl>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00062">62</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="xct_8hpp_source.html#l00062">foedus::xct::Xct::kMaxPageVersionSets</a>, <a class="el" href="xct_8hpp_source.html#l00061">foedus::xct::Xct::kMaxPointerSets</a>, <a class="el" href="xct__options_8hpp_source.html#l00084">foedus::xct::XctOptions::max_lock_free_read_set_size_</a>, <a class="el" href="xct__options_8hpp_source.html#l00092">foedus::xct::XctOptions::max_lock_free_write_set_size_</a>, <a class="el" href="xct__options_8hpp_source.html#l00060">foedus::xct::XctOptions::max_read_set_size_</a>, <a class="el" href="xct__options_8hpp_source.html#l00076">foedus::xct::XctOptions::max_write_set_size_</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, <a class="el" href="thread__options_8hpp_source.html#l00050">foedus::thread::ThreadOptions::thread_count_per_group_</a>, and <a class="el" href="engine__options_8hpp_source.html#l00147">foedus::EngineOptions::xct_</a>.</p>

<p>Referenced by <a class="el" href="engine__options_8cpp_source.html#l00341">foedus::EngineOptions::calculate_required_memory()</a>, and <a class="el" href="numa__core__memory_8cpp_source.html#l00088">initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                                                                       {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  uint64_t memory_size = 0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// for the &quot;shift&quot; part, we calculate conservatively then skip it at the end.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// it&#39;s a wasted memory, but negligible.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  memory_size += <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(options.thread_.thread_count_per_group_) &lt;&lt; 12;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::SysxctWorkspace);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::PageVersionAccess) * <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">xct::Xct::kMaxPageVersionSets</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::PointerAccess) * <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">xct::Xct::kMaxPointerSets</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keyword">const</span> xct::XctOptions&amp; xct_opt = options.xct_;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keyword">const</span> uint16_t nodes = options.thread_.group_count_;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::ReadXctAccess) * xct_opt.max_read_set_size_;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::WriteXctAccess) * xct_opt.max_write_set_size_;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::LockFreeReadXctAccess)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    * xct_opt.max_lock_free_read_set_size_;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::LockFreeWriteXctAccess)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    * xct_opt.max_lock_free_write_set_size_;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  memory_size += <span class="keyword">sizeof</span>(memory::PagePoolOffsetAndEpochChunk) * nodes;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">// In reality almost no chance we take as many locks as all read/write-sets,</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// but let&#39;s simplify that. Not much memory anyways.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keyword">const</span> uint64_t total_access_sets = xct_opt.max_read_set_size_ + xct_opt.max_write_set_size_;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::LockEntry) * total_access_sets;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  memory_size += <span class="keyword">sizeof</span>(xct::LockEntry) * total_access_sets;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">return</span> memory_size;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">foedus::xct::Xct::kMaxPointerSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00061">xct.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">foedus::xct::Xct::kMaxPageVersionSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00062">xct.hpp:62</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_adb12d1c6977fada9ea158addc0e27130_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_adb12d1c6977fada9ea158addc0e27130_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_adb12d1c6977fada9ea158addc0e27130_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_adb12d1c6977fada9ea158addc0e27130_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1EngineOptions.html#ace695b3d0e069ed255df9572f71ecfa4" title="foedus::EngineOptions\l::calculate_required\l_memory" alt="" coords="253,5,406,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#af7bdd6c02647872c28ecb66d89adb965" title="foedus::memory::NumaCore\lMemory::initialize_once" alt="" coords="237,86,421,127"/>
<area shape="rect" id="node3" href="structfoedus_1_1EngineOptions.html#ae11d1267946c562743cea44470525a69" title="Checks the machine environment and raises as many errors as possible before the engine starts up..." alt="" coords="469,13,623,54"/>
<area shape="rect" id="node4" href="classfoedus_1_1EnginePimpl.html#ad48323b2f8311ecee663647aeeecdea6" title="foedus::EnginePimpl\l::check_valid_options" alt="" coords="671,13,817,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1EnginePimpl.html#a15c27fd38d4219abdf0b2deb5e5f365c" title="foedus::EnginePimpl\l::initialize_once" alt="" coords="865,13,1007,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1542703e9d39b62b7269192a4db8e4b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::NumaCoreMemory::get_current_lock_list_capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00095">95</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                  {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> current_lock_list_capacity_;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a1542703e9d39b62b7269192a4db8e4b6_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a1542703e9d39b62b7269192a4db8e4b6_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a1542703e9d39b62b7269192a4db8e4b6_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a1542703e9d39b62b7269192a4db8e4b6_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac62f3ab84bf9ac7f5b7a07c656d5190a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">xct::LockEntry</a>* foedus::memory::NumaCoreMemory::get_current_lock_list_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00092">92</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                                                     {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> current_lock_list_memory_;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ac62f3ab84bf9ac7f5b7a07c656d5190a_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ac62f3ab84bf9ac7f5b7a07c656d5190a_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ac62f3ab84bf9ac7f5b7a07c656d5190a_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ac62f3ab84bf9ac7f5b7a07c656d5190a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8f55dee0a9b4f7f55d22a60cd677f39e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* foedus::memory::NumaCoreMemory::get_local_work_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00109">109</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>References <a class="el" href="aligned__memory_8hpp_source.html#l00168">foedus::memory::AlignedMemory::get_block()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{ <span class="keywordflow">return</span> local_work_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">get_block</a>(); }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_af306ba60622e2a87f75ae93dc6c597b1"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">foedus::memory::AlignedMemory::get_block</a></div><div class="ttdeci">void * get_block() const </div><div class="ttdoc">Returns the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00168">aligned_memory.hpp:168</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="237,13,451,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a8f55dee0a9b4f7f55d22a60cd677f39e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a318c160df3a63c1063665a1f19e741e8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::NumaCoreMemory::get_local_work_memory_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00110">110</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>References <a class="el" href="aligned__memory_8hpp_source.html#l00172">foedus::memory::AlignedMemory::get_size()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{ <span class="keywordflow">return</span> local_work_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd">get_size</a>(); }</div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_a8db2e188293eaeebdf36cf39920efedd"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd">foedus::memory::AlignedMemory::get_size</a></div><div class="ttdeci">uint64_t get_size() const </div><div class="ttdoc">Returns the byte size of the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00172">aligned_memory.hpp:172</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd" title="Returns the byte size of the memory block. " alt="" coords="237,13,451,54"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a318c160df3a63c1063665a1f19e741e8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab02e9bcb37082e31781b4b8ce8e4bf21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">AlignedMemorySlice</a> foedus::memory::NumaCoreMemory::get_log_buffer_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00064">64</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__log__buffer_8cpp_source.html#l00110">foedus::log::ThreadLogBuffer::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{ <span class="keywordflow">return</span> log_buffer_memory_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ab02e9bcb37082e31781b4b8ce8e4bf21_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ab02e9bcb37082e31781b4b8ce8e4bf21_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ab02e9bcb37082e31781b4b8ce8e4bf21_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ab02e9bcb37082e31781b4b8ce8e4bf21_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a8303f5db549570913eefd0e123dbfc2e" title="foedus::log::ThreadLogBuffer\l::initialize_once" alt="" coords="237,13,424,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a694668bb2a5894b720406d5ed40f5bc0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1NumaNodeMemory.html">NumaNodeMemory</a>* foedus::memory::NumaCoreMemory::get_node_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the parent memory repository. </p>

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00067">67</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread_8cpp_source.html#l00058">foedus::thread::Thread::get_node_memory()</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{ <span class="keywordflow">return</span> node_memory_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a694668bb2a5894b720406d5ed40f5bc0_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a694668bb2a5894b720406d5ed40f5bc0_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a694668bb2a5894b720406d5ed40f5bc0_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a694668bb2a5894b720406d5ed40f5bc0_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1Thread.html#a45fb679126e4fd5b02ccb7d1f257e4bf" title="Returns the node&#45;shared memory repository of the NUMA node this thread belongs to. " alt="" coords="237,5,388,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad0624fe34e52c0904ee449c97f0325c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html">PagePoolOffsetAndEpochChunk</a> * foedus::memory::NumaCoreMemory::get_retired_volatile_pool_chunk </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00253">253</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00777">foedus::thread::ThreadPimpl::collect_retired_volatile_page()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00122">foedus::thread::ThreadPimpl::uninitialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">return</span> retired_volatile_pool_chunks_ + node;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ad0624fe34e52c0904ee449c97f0325c5_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ad0624fe34e52c0904ee449c97f0325c5_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ad0624fe34e52c0904ee449c97f0325c5_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ad0624fe34e52c0904ee449c97f0325c5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a674a8a8e613dc4e19a626da490c883fc" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="237,136,429,177"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aba7104a56eaff1c1f8c87f5bb03f4045" title="foedus::thread::ThreadPimpl\l::uninitialize_once" alt="" coords="241,201,425,243"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ab41d50498e6830c6aedc20c93b495037" title="Keeps the specified volatile page as retired as of the current epoch. " alt="" coords="477,136,669,177"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a31564163126364e4810f2f00398afd15" title="foedus::storage::masstree\l::Adopt::adopt_case_a" alt="" coords="717,71,891,112"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="717,5,891,47"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage_1_1masstree.html#a554f6fb34b45687df09df15076aac190" title="foedus::storage::masstree\l::grow_case_a_common" alt="" coords="717,201,891,243"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="717,136,891,177"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#a96de88f03cf5683529e00d2c209a07e9" title="The core implementation after locking relevant pages and acquiring free page resource. " alt="" coords="717,267,891,323"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="949,39,1123,80"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="949,136,1123,177"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="939,201,1133,243"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="949,275,1123,316"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa15ff5555f06dfff58b3fd11f60f2ca7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::memory::NumaCoreMemory::get_retrospective_lock_list_capacity </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00101">101</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                                        {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> retrospective_lock_list_capacity_;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_aa15ff5555f06dfff58b3fd11f60f2ca7_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_aa15ff5555f06dfff58b3fd11f60f2ca7_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_aa15ff5555f06dfff58b3fd11f60f2ca7_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_aa15ff5555f06dfff58b3fd11f60f2ca7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a11de415935b61a9f48e35719d500cbb9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockEntry.html">xct::LockEntry</a>* foedus::memory::NumaCoreMemory::get_retrospective_lock_list_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00098">98</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                                           {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> retrospective_lock_list_memory_;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a11de415935b61a9f48e35719d500cbb9_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a11de415935b61a9f48e35719d500cbb9_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a11de415935b61a9f48e35719d500cbb9_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a11de415935b61a9f48e35719d500cbb9_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3f376657b7efceecf12e0cc504ab8c17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="group__MEMHIERARCHY.html#structfoedus_1_1memory_1_1NumaCoreMemory_1_1SmallThreadLocalMemoryPieces">SmallThreadLocalMemoryPieces</a>&amp; foedus::memory::NumaCoreMemory::get_small_thread_local_memory_pieces </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00105">105</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00077">foedus::xct::Xct::initialize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                                                                   {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">return</span> small_thread_local_memory_pieces_;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a3f376657b7efceecf12e0cc504ab8c17_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a3f376657b7efceecf12e0cc504ab8c17_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a3f376657b7efceecf12e0cc504ab8c17_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a3f376657b7efceecf12e0cc504ab8c17_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529" title="foedus::xct::Xct::initialize" alt="" coords="237,20,404,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="452,13,636,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad3fd2a870909f108bdea1ee3d184cebe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a>* foedus::memory::NumaCoreMemory::get_snapshot_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00089">89</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{ <span class="keywordflow">return</span> snapshot_pool_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4cddb16a58222307e8876f35ff8041d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a>* foedus::memory::NumaCoreMemory::get_volatile_pool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="numa__core__memory_8hpp_source.html#l00088">88</a> of file <a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{ <span class="keywordflow">return</span> volatile_pool_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3e2f6d24f2b0f5c04d2cde48db11f6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> foedus::memory::NumaCoreMemory::grab_free_snapshot_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same, except it's for snapshot page. </p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00221">221</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8hpp_source.html#l00060">foedus::memory::PagePoolOffsetChunk::empty()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="page__pool_8hpp_source.html#l00064">foedus::memory::PagePoolOffsetChunk::pop_back()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00741">foedus::thread::ThreadPimpl::on_snapshot_cache_miss()</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                                       {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b">empty</a>())) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">if</span> (grab_free_pages_from_node(free_snapshot_pool_chunk_, snapshot_pool_) != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b">empty</a>());</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">return</span> free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e">pop_back</a>();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_ac661b8baf462a1e969a8a1c7e619858b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b">foedus::memory::PagePoolOffsetChunk::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00060">page_pool.hpp:60</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_af897b38ac1ef4217ff99018436c0112e"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e">foedus::memory::PagePoolOffsetChunk::pop_back</a></div><div class="ttdeci">PagePoolOffset pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00064">page_pool.hpp:64</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="505,5,684,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="279,35,457,76"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ac3e2f6d24f2b0f5c04d2cde48db11f6a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="279,788,463,829"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="511,750,720,792"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="523,816,707,872"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1232,909,1441,950"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="768,748,952,789"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1000,670,1184,712"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1489,982,1683,1038"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1741,430,1955,472"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1497,446,1675,502"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1495,1062,1677,1118"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1499,902,1673,958"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1731,992,1965,1033"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="2015,913,2217,954"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="2013,766,2219,808"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2286,1068,2450,1124"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2286,1148,2450,1204"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2279,668,2457,724"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2277,748,2459,804"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2277,828,2459,884"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2270,908,2466,964"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2267,988,2469,1044"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1757,1059,1939,1115"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="2025,979,2207,1035"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="2025,1059,2207,1115"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1754,897,1942,968"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="2022,832,2210,888"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1257,974,1416,1016"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1000,736,1184,792"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1261,421,1412,462"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1497,576,1675,632"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1503,656,1669,712"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1504,315,1668,371"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1499,210,1673,266"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1499,51,1673,107"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1755,576,1941,632"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1755,496,1941,552"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1755,816,1941,872"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1755,736,1941,792"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1760,656,1936,712"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1761,37,1935,78"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1761,102,1935,173"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="2029,110,2203,166"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1761,248,1935,304"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1261,736,1412,792"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1497,736,1675,792"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="780,998,940,1054"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="768,816,952,872"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="1017,816,1167,872"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1247,816,1426,872"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad09e335bbca636246cf2c3d60ec22570"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a> foedus::memory::NumaCoreMemory::grab_free_volatile_page </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires one free volatile page from <b>local</b> page pool. </p>
<dl class="section return"><dt>Returns</dt><dd>acquired page, or 0 if no free page is available (OUTOFMEMORY).</dd></dl>
<p>This method does not return error code to be simple and fast. Instead, The caller MUST check if the returned page is zero or not. </p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00199">199</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8hpp_source.html#l00060">foedus::memory::PagePoolOffsetChunk::empty()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="page__pool_8hpp_source.html#l00064">foedus::memory::PagePoolOffsetChunk::pop_back()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00039">foedus::storage::masstree::allocate_new_border_page()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00323">foedus::storage::sequential::SequentialStoragePimpl::append_record()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00411">foedus::thread::ThreadPimpl::follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">foedus::thread::ThreadPimpl::follow_page_pointers_for_read_batch()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00595">foedus::thread::ThreadPimpl::follow_page_pointers_for_write_batch()</a>, <a class="el" href="thread_8cpp_source.html#l00147">foedus::thread::GrabFreeVolatilePagesScope::grab()</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00208">grab_free_volatile_page_pointer()</a>, and <a class="el" href="masstree__reserve__impl_8cpp_source.html#l00055">foedus::storage::masstree::ReserveRecords::run()</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                                       {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b">empty</a>())) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (grab_free_pages_from_node(free_volatile_pool_chunk_, volatile_pool_) != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b">empty</a>());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">return</span> free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e">pop_back</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_ac661b8baf462a1e969a8a1c7e619858b"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b">foedus::memory::PagePoolOffsetChunk::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00060">page_pool.hpp:60</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_af897b38ac1ef4217ff99018436c0112e"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e">foedus::memory::PagePoolOffsetChunk::pop_back</a></div><div class="ttdeci">PagePoolOffset pop_back()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00064">page_pool.hpp:64</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="491,5,669,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="264,35,443,76"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_ad09e335bbca636246cf2c3d60ec22570_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage_1_1masstree.html#a10e6fe81e5956cfe47566b40794580da" title="foedus::storage::masstree\l::allocate_new_border_page" alt="" coords="265,711,447,752"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1masstree_1_1ReserveRecords.html#aae952c17c2f2b1c760f899da5c368054" title="Execute the system transaction. " alt="" coords="501,651,675,692"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1" title="Appends an already&#45;commited record to this volatile list. " alt="" coords="267,778,445,834"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="733,1016,917,1057"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="264,859,448,915"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="733,935,917,991"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1GrabFreeVolatilePagesScope.html#a51fde507b10c15c4c39e6de2de3c6deb" title="If this thread doesn&#39;t have enough free pages, no page is obtained, returning kErrorCodeMemoryNoFreeP..." alt="" coords="271,1351,441,1392"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#afb436d68c982228d9e4bc66104b2aa98" title="Wrapper for grab_free_volatile_page(). " alt="" coords="264,1045,448,1101"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb" title="Used to apply the effect of appending to volatile list. " alt="" coords="499,717,677,773"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a18cd427115cf86d01382cd0c7e4df417" title="foedus::storage::sequential\l::SequentialAppendLogType\l::apply_record" alt="" coords="734,673,917,729"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="985,1017,1135,1059"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1197,771,1376,827"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1204,851,1369,907"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1205,1091,1369,1147"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1435,1187,1648,1228"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1197,1222,1376,1278"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1200,311,1373,367"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1200,1011,1373,1067"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1449,778,1634,834"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1449,698,1634,754"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1449,618,1634,674"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1449,1005,1634,1061"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1453,925,1629,981"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1424,859,1659,900"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1707,1157,1912,1199"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1455,552,1628,593"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1455,5,1628,76"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1723,86,1896,142"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1455,151,1628,207"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1452,231,1631,287"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1455,311,1628,367"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1449,391,1633,447"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1447,471,1635,527"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="513,797,663,853"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="971,677,1149,733"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="985,934,1135,990"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1197,931,1376,987"/>
<area shape="rect" id="node38" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="501,1319,675,1360"/>
<area shape="rect" id="node40" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="501,1384,675,1425"/>
<area shape="rect" id="node41" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="501,1449,675,1491"/>
<area shape="rect" id="node39" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="739,1359,912,1400"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="504,1198,672,1254"/>
<area shape="rect" id="node46" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="501,877,675,919"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="496,1049,680,1091"/>
<area shape="rect" id="node44" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="743,1278,907,1334"/>
<area shape="rect" id="node45" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="740,1198,911,1254"/>
<area shape="rect" id="node47" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="739,804,912,845"/>
<area shape="rect" id="node48" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="728,869,923,911"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="746,1081,905,1123"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afb436d68c982228d9e4bc66104b2aa98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> foedus::memory::NumaCoreMemory::grab_free_volatile_page_pointer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper for <a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. ">grab_free_volatile_page()</a>. </p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00208">208</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="numa__core__memory_8cpp_source.html#l00199">grab_free_volatile_page()</a>, and <a class="el" href="storage__id_8hpp_source.html#l00212">foedus::storage::VolatilePagePointer::set()</a>.</p>

<p>Referenced by <a class="el" href="hash__reserve__impl_8cpp_source.html#l00187">foedus::storage::hash::ReserveRecords::create_new_tail_page()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="masstree__grow__impl_8cpp_source.html#l00076">foedus::storage::masstree::grow_case_b_common()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00292">foedus::thread::ThreadPimpl::install_a_volatile_page()</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                                           {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  storage::VolatilePagePointer ret;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  ret.set(numa_node_, <a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">grab_free_volatile_page</a>());</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad09e335bbca636246cf2c3d60ec22570"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">foedus::memory::NumaCoreMemory::grab_free_volatile_page</a></div><div class="ttdeci">PagePoolOffset grab_free_volatile_page()</div><div class="ttdoc">Acquires one free volatile page from local page pool. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00199">numa_core_memory.cpp:199</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570" title="Acquires one free volatile page from local page pool. " alt="" coords="237,5,448,47"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69" title="foedus::storage::Volatile\lPagePointer::set" alt="" coords="262,71,423,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ac661b8baf462a1e969a8a1c7e619858b" title="foedus::memory::PagePool\lOffsetChunk::empty" alt="" coords="723,5,901,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#af897b38ac1ef4217ff99018436c0112e" title="foedus::memory::PagePool\lOffsetChunk::pop_back" alt="" coords="496,35,675,76"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_afb436d68c982228d9e4bc66104b2aa98_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a22cd4e9f8619968685921c525d6fa4b8" title="foedus::storage::hash\l::ReserveRecords::create\l_new_tail_page" alt="" coords="245,85,413,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="958,805,1137,861"/>
<area shape="rect" id="node27" href="namespacefoedus_1_1storage_1_1masstree.html#a9747d159e12f82f5fefcaed735947480" title="foedus::storage::masstree\l::grow_case_b_common" alt="" coords="243,669,416,710"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="237,474,421,515"/>
<area shape="rect" id="node3" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ab6a68802f41a8b163aae60825c4ebd38" title="foedus::storage::hash\l::ReserveRecords::find\l_and_lock_spacious_tail" alt="" coords="485,85,649,141"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#acc93c206465207018eb9e29a5fa5342b" title="Installs it as a fresh&#45;new physical record, assuming the given page is the tail and already locked..." alt="" coords="723,5,894,61"/>
<area shape="rect" id="node4" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a846dcb3f3938a2b266756e2d95c0df76" title="foedus::storage::hash\l::ReserveRecords::expand\l_record" alt="" coords="721,85,896,141"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#ad189e0523907caacae334102d9383b15" title="The main loop (well, recursion actually). " alt="" coords="971,41,1123,97"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1hash_1_1ReserveRecords.html#a7e1a17602380cbf9c736d93591a84f5e" title="Execute the system transaction. " alt="" coords="1231,49,1382,90"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1200,770,1413,811"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1472,733,1677,774"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1745,456,1909,512"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1745,565,1909,621"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1737,645,1916,701"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1736,725,1917,781"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1735,805,1918,861"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1729,885,1925,941"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1725,1005,1928,1061"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1990,434,2165,475"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1995,565,2159,621"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1976,499,2179,541"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="2004,645,2151,701"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="2003,725,2151,781"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="2003,805,2152,861"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1979,965,2175,1021"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1996,885,2159,941"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1992,1045,2163,1101"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1GrowFirstLayerRoot.html#a2c3c6cc4a2d74c498cee8f9051d09909" title="Execute the system transaction. " alt="" coords="480,669,653,710"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1masstree_1_1GrowNonFirstLayerRoot.html#a9c47822a3dd14ff40020c13d277820ea" title="Execute the system transaction. " alt="" coords="469,734,664,775"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="487,253,646,294"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="475,510,659,551"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="475,369,659,425"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="712,245,905,301"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="722,165,895,221"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1189,282,1424,323"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1473,282,1676,323"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="953,158,1141,229"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1213,183,1401,239"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="733,551,884,593"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="958,544,1137,600"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="965,464,1130,520"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1225,689,1389,745"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="961,384,1134,440"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="961,624,1134,680"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1214,464,1399,520"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1214,544,1399,600"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1214,384,1399,440"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="733,340,884,396"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="958,304,1137,360"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af7bdd6c02647872c28ecb66d89adb965"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaCoreMemory::initialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#ab8ae37e5f20f312f8b945fc40d3e0250">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00088">88</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="numa__node__memory_8hpp_source.html#l00085">foedus::memory::NumaNodeMemory::allocate_numa_memory()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="numa__core__memory_8cpp_source.html#l00062">calculate_local_small_memory_size()</a>, <a class="el" href="error__stack_8hpp_source.html#l00517">CHECK_ERROR</a>, <a class="el" href="page__pool_8hpp_source.html#l00133">foedus::memory::PagePoolOffsetAndEpochChunk::clear()</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00168">foedus::memory::AlignedMemory::get_block()</a>, <a class="el" href="page__pool_8cpp_source.html#l00120">foedus::memory::PagePool::get_free_pool_capacity()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00100">foedus::memory::NumaNodeMemory::get_log_buffer_memory_piece()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="page__pool_8cpp_source.html#l00124">foedus::memory::PagePool::get_recommended_pages_per_grab()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00096">foedus::memory::NumaNodeMemory::get_snapshot_offset_chunk_memory_piece()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00058">foedus::memory::NumaNodeMemory::get_snapshot_pool()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00092">foedus::memory::NumaNodeMemory::get_volatile_offset_chunk_memory_piece()</a>, <a class="el" href="numa__node__memory_8hpp_source.html#l00057">foedus::memory::NumaNodeMemory::get_volatile_pool()</a>, <a class="el" href="page__pool_8cpp_source.html#l00129">foedus::memory::PagePool::grab()</a>, <a class="el" href="thread__options_8hpp_source.html#l00043">foedus::thread::ThreadOptions::group_count_</a>, <a class="el" href="xct_8hpp_source.html#l00062">foedus::xct::Xct::kMaxPageVersionSets</a>, <a class="el" href="xct_8hpp_source.html#l00061">foedus::xct::Xct::kMaxPointerSets</a>, <a class="el" href="error__stack_8hpp_source.html#l00251">foedus::kRetOk</a>, <a class="el" href="engine__options_8hpp_source.html#l00139">foedus::EngineOptions::memory_</a>, <a class="el" href="memory__options_8hpp_source.html#l00131">foedus::memory::MemoryOptions::private_page_pool_initial_grab_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00050">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::sysxct_workspace_memory_</a>, <a class="el" href="engine__options_8hpp_source.html#l00146">foedus::EngineOptions::thread_</a>, <a class="el" href="thread__options_8hpp_source.html#l00050">foedus::thread::ThreadOptions::thread_count_per_group_</a>, <a class="el" href="error__stack_8hpp_source.html#l00533">WRAP_ERROR_CODE</a>, <a class="el" href="engine__options_8hpp_source.html#l00147">foedus::EngineOptions::xct_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00055">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_lock_free_read_access_memory_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00056">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_lock_free_write_access_memory_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00052">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_page_version_memory_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00051">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_pointer_access_memory_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00053">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_read_access_memory_</a>, and <a class="el" href="numa__core__memory_8hpp_source.html#l00054">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_write_access_memory_</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                           {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Initializing NumaCoreMemory for core &quot;</span> &lt;&lt; core_id_;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  free_volatile_pool_chunk_ = node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#af8652e0d9e6d43a110f31bc5b9f4e692">get_volatile_offset_chunk_memory_piece</a>(</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    core_local_ordinal_);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  free_snapshot_pool_chunk_ = node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#accd3c0534d9385b49168c51da6a56552">get_snapshot_offset_chunk_memory_piece</a>(</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    core_local_ordinal_);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  volatile_pool_ = node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48">get_volatile_pool</a>();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  snapshot_pool_ = node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">get_snapshot_pool</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  log_buffer_memory_ = node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aec426088a6e841b62d8305c4934bff8d">get_log_buffer_memory_piece</a>(core_local_ordinal_);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// allocate small_thread_local_memory_. it&#39;s a collection of small memories</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  uint64_t memory_size = <a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#adb12d1c6977fada9ea158addc0e27130">calculate_local_small_memory_size</a>(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>());</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> (memory_size &gt; (1U &lt;&lt; 21)) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    VLOG(1) &lt;&lt; <span class="stringliteral">&quot;mm, small_local_memory_size is more than 2MB(&quot;</span> &lt;&lt; memory_size &lt;&lt; <span class="stringliteral">&quot;).&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="stringliteral">&quot; not a big issue, but consumes one more TLB entry...&quot;</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7">allocate_numa_memory</a>(memory_size, &amp;small_thread_local_memory_));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">const</span> xct::XctOptions&amp; xct_opt = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">xct_</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keyword">const</span> uint16_t nodes = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keyword">const</span> uint16_t thread_per_group = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordtype">char</span>* memory = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(small_thread_local_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">get_block</a>());</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// &quot;shift&quot; 4kb for each thread on this node so that memory banks are evenly used.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// in many architecture, 13th- or 14th- bits are memory banks (see [JEONG11])</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  memory += <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(core_local_ordinal_) &lt;&lt; 12;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#a3c7ea7789c0989c9ac59a9fb532d7e69">sysxct_workspace_memory_</a> = memory;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::SysxctWorkspace);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#af61d2286d9766ed31244e5ebce1fcfd4">xct_page_version_memory_</a> = memory;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::PageVersionAccess) * <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">xct::Xct::kMaxPageVersionSets</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#a831aaa8b02b924b748d999072a549659">xct_pointer_access_memory_</a> = memory;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::PointerAccess) * <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">xct::Xct::kMaxPointerSets</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#a43d882917b1f12481ebce4a45934dd5a">xct_read_access_memory_</a> = memory;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::ReadXctAccess) * xct_opt.max_read_set_size_;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#a97637e9469b9d93d4df4f7a8c78c8269">xct_write_access_memory_</a> = memory;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::WriteXctAccess) * xct_opt.max_write_set_size_;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#a5f8036024a45def08da764ed1d5cffb1">xct_lock_free_read_access_memory_</a> = memory;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::LockFreeReadXctAccess) * xct_opt.max_lock_free_read_set_size_;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  small_thread_local_memory_pieces_.<a class="code" href="group__MEMHIERARCHY.html#aca2509b57d08a0a9614750c1a69c3622">xct_lock_free_write_access_memory_</a> = memory;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::LockFreeWriteXctAccess) * xct_opt.max_lock_free_write_set_size_;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  retired_volatile_pool_chunks_ = <span class="keyword">reinterpret_cast&lt;</span>PagePoolOffsetAndEpochChunk*<span class="keyword">&gt;</span>(memory);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  memory += <span class="keyword">sizeof</span>(memory::PagePoolOffsetAndEpochChunk) * nodes;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">const</span> uint64_t total_access_sets = xct_opt.max_read_set_size_ + xct_opt.max_write_set_size_;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  current_lock_list_memory_ = <span class="keyword">reinterpret_cast&lt;</span>xct::LockEntry*<span class="keyword">&gt;</span>(memory);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  current_lock_list_capacity_ = total_access_sets;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::LockEntry) * total_access_sets;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  retrospective_lock_list_memory_ = <span class="keyword">reinterpret_cast&lt;</span>xct::LockEntry*<span class="keyword">&gt;</span>(memory);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  retrospective_lock_list_capacity_ = total_access_sets;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  memory += <span class="keyword">sizeof</span>(xct::LockEntry) * total_access_sets;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  memory += <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(thread_per_group - core_local_ordinal_) &lt;&lt; 12;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(reinterpret_cast&lt;char*&gt;(small_thread_local_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">get_block</a>())</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    + memory_size == memory);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">for</span> (uint16_t node = 0; node &lt; nodes; ++node) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    retired_volatile_pool_chunks_[node].<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#ab6ea083336cace77ee5ec742bb99b0d3">clear</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(node_memory_-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7">allocate_numa_memory</a>(</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    xct_opt.local_work_memory_size_mb_ * (1ULL &lt;&lt; 20),</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    &amp;local_work_memory_));</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">// Each core starts from 50%-full free pool chunk (configurable)</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  uint32_t initial_pages = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">memory_</a>.<a class="code" href="structfoedus_1_1memory_1_1MemoryOptions.html#aece3277ecf8d3908dfb25fab83bd057b">private_page_pool_initial_grab_</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    uint32_t grab_count = std::min&lt;uint32_t&gt;(</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      volatile_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#ac3708e19114cb64dbf56c32791686eb2">get_recommended_pages_per_grab</a>(),</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      std::min&lt;uint32_t&gt;(</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        initial_pages,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        volatile_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#adaba316ea864179aa8460a57a61f1ff3">get_free_pool_capacity</a>() / (2U * thread_per_group)));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(volatile_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0">grab</a>(grab_count, free_volatile_pool_chunk_));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    uint32_t grab_count = std::min&lt;uint32_t&gt;(</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      snapshot_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#ac3708e19114cb64dbf56c32791686eb2">get_recommended_pages_per_grab</a>(),</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      std::min&lt;uint32_t&gt;(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        initial_pages,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        snapshot_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#adaba316ea864179aa8460a57a61f1ff3">get_free_pool_capacity</a>() / (2U * thread_per_group)));</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(snapshot_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0">grab</a>(grab_count, free_snapshot_pool_chunk_));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">foedus::xct::Xct::kMaxPointerSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00061">xct.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a347b906362b2d1802069ead12c3ef9b7"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7">foedus::memory::NumaNodeMemory::allocate_numa_memory</a></div><div class="ttdeci">ErrorStack allocate_numa_memory(uint64_t size, AlignedMemory *out) const </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00085">numa_node_memory.hpp:85</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1MemoryOptions_html_aece3277ecf8d3908dfb25fab83bd057b"><div class="ttname"><a href="structfoedus_1_1memory_1_1MemoryOptions.html#aece3277ecf8d3908dfb25fab83bd057b">foedus::memory::MemoryOptions::private_page_pool_initial_grab_</a></div><div class="ttdeci">uint32_t private_page_pool_initial_grab_</div><div class="ttdoc">How many pages each NumaCoreMemory initially grabs when it is initialized. </div><div class="ttdef"><b>Definition:</b> <a href="memory__options_8hpp_source.html#l00131">memory_options.hpp:131</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a0541f9ed9fc128fc2c246a4a3bd2b740"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740">foedus::memory::NumaNodeMemory::get_snapshot_pool</a></div><div class="ttdeci">PagePool * get_snapshot_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00058">numa_node_memory.hpp:58</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_a97637e9469b9d93d4df4f7a8c78c8269"><div class="ttname"><a href="group__MEMHIERARCHY.html#a97637e9469b9d93d4df4f7a8c78c8269">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_write_access_memory_</a></div><div class="ttdeci">char * xct_write_access_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00054">numa_core_memory.hpp:54</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_aca2509b57d08a0a9614750c1a69c3622"><div class="ttname"><a href="group__MEMHIERARCHY.html#aca2509b57d08a0a9614750c1a69c3622">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_lock_free_write_access_memory_</a></div><div class="ttdeci">char * xct_lock_free_write_access_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00056">numa_core_memory.hpp:56</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a1fb740dca84aaaed101bf9f4818c5b4f"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">foedus::EngineOptions::xct_</a></div><div class="ttdeci">xct::XctOptions xct_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00147">engine_options.hpp:147</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_af8652e0d9e6d43a110f31bc5b9f4e692"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#af8652e0d9e6d43a110f31bc5b9f4e692">foedus::memory::NumaNodeMemory::get_volatile_offset_chunk_memory_piece</a></div><div class="ttdeci">PagePoolOffsetChunk * get_volatile_offset_chunk_memory_piece(foedus::thread::ThreadLocalOrdinal core_ordinal)</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00092">numa_node_memory.hpp:92</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a1fdd8ce2a10921faeccc1fe38ffd25c0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0">foedus::memory::PagePool::grab</a></div><div class="ttdeci">ErrorCode grab(uint32_t desired_grab_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Adds the specified number of free pages to the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00129">page_pool.cpp:129</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_a5f8036024a45def08da764ed1d5cffb1"><div class="ttname"><a href="group__MEMHIERARCHY.html#a5f8036024a45def08da764ed1d5cffb1">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_lock_free_read_access_memory_</a></div><div class="ttdeci">char * xct_lock_free_read_access_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00055">numa_core_memory.hpp:55</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_ac3708e19114cb64dbf56c32791686eb2"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#ac3708e19114cb64dbf56c32791686eb2">foedus::memory::PagePool::get_recommended_pages_per_grab</a></div><div class="ttdeci">uint32_t get_recommended_pages_per_grab() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00124">page_pool.cpp:124</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a0fba742942a9ff0de143e354fea34d4b"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a0fba742942a9ff0de143e354fea34d4b">foedus::EngineOptions::memory_</a></div><div class="ttdeci">memory::MemoryOptions memory_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00139">engine_options.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">foedus::xct::Xct::kMaxPageVersionSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00062">xct.hpp:62</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_a831aaa8b02b924b748d999072a549659"><div class="ttname"><a href="group__MEMHIERARCHY.html#a831aaa8b02b924b748d999072a549659">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_pointer_access_memory_</a></div><div class="ttdeci">char * xct_pointer_access_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00051">numa_core_memory.hpp:51</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_a3c7ea7789c0989c9ac59a9fb532d7e69"><div class="ttname"><a href="group__MEMHIERARCHY.html#a3c7ea7789c0989c9ac59a9fb532d7e69">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::sysxct_workspace_memory_</a></div><div class="ttdeci">char * sysxct_workspace_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00050">numa_core_memory.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_af306ba60622e2a87f75ae93dc6c597b1"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1">foedus::memory::AlignedMemory::get_block</a></div><div class="ttdeci">void * get_block() const </div><div class="ttdoc">Returns the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00168">aligned_memory.hpp:168</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_a43d882917b1f12481ebce4a45934dd5a"><div class="ttname"><a href="group__MEMHIERARCHY.html#a43d882917b1f12481ebce4a45934dd5a">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_read_access_memory_</a></div><div class="ttdeci">char * xct_read_access_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00053">numa_core_memory.hpp:53</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_adb12d1c6977fada9ea158addc0e27130"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#adb12d1c6977fada9ea158addc0e27130">foedus::memory::NumaCoreMemory::calculate_local_small_memory_size</a></div><div class="ttdeci">static uint64_t calculate_local_small_memory_size(const EngineOptions &amp;options)</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00062">numa_core_memory.cpp:62</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_accd3c0534d9385b49168c51da6a56552"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#accd3c0534d9385b49168c51da6a56552">foedus::memory::NumaNodeMemory::get_snapshot_offset_chunk_memory_piece</a></div><div class="ttdeci">PagePoolOffsetChunk * get_snapshot_offset_chunk_memory_piece(foedus::thread::ThreadLocalOrdinal core_ordinal)</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00096">numa_node_memory.hpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_adaba316ea864179aa8460a57a61f1ff3"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#adaba316ea864179aa8460a57a61f1ff3">foedus::memory::PagePool::get_free_pool_capacity</a></div><div class="ttdeci">uint64_t get_free_pool_capacity() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00120">page_pool.cpp:120</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk_html_ab6ea083336cace77ee5ec742bb99b0d3"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#ab6ea083336cace77ee5ec742bb99b0d3">foedus::memory::PagePoolOffsetAndEpochChunk::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00133">page_pool.hpp:133</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_aec426088a6e841b62d8305c4934bff8d"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aec426088a6e841b62d8305c4934bff8d">foedus::memory::NumaNodeMemory::get_log_buffer_memory_piece</a></div><div class="ttdeci">AlignedMemorySlice get_log_buffer_memory_piece(log::LoggerId logger)</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00100">numa_node_memory.hpp:100</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemory_html_a630ab6d899053a9afc067e34877edd48"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48">foedus::memory::NumaNodeMemory::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00057">numa_node_memory.hpp:57</a></div></div>
<div class="ttc" id="group__MEMHIERARCHY_html_af61d2286d9766ed31244e5ebce1fcfd4"><div class="ttname"><a href="group__MEMHIERARCHY.html#af61d2286d9766ed31244e5ebce1fcfd4">foedus::memory::NumaCoreMemory::SmallThreadLocalMemoryPieces::xct_page_version_memory_</a></div><div class="ttdeci">char * xct_page_version_memory_</div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8hpp_source.html#l00052">numa_core_memory.hpp:52</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_af7bdd6c02647872c28ecb66d89adb965_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_af7bdd6c02647872c28ecb66d89adb965_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_af7bdd6c02647872c28ecb66d89adb965_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_af7bdd6c02647872c28ecb66d89adb965_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a347b906362b2d1802069ead12c3ef9b7" title="foedus::memory::NumaNode\lMemory::allocate_numa\l_memory" alt="" coords="251,215,437,271"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="783,157,917,198"/>
<area shape="rect" id="node19" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#adb12d1c6977fada9ea158addc0e27130" title="foedus::memory::NumaCore\lMemory::calculate_local\l_small_memory_size" alt="" coords="252,295,436,351"/>
<area shape="rect" id="node20" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#ab6ea083336cace77ee5ec742bb99b0d3" title="foedus::memory::PagePool\lOffsetAndEpochChunk::clear" alt="" coords="249,375,439,417"/>
<area shape="rect" id="node21" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="237,441,451,482"/>
<area shape="rect" id="node22" href="classfoedus_1_1memory_1_1PagePool.html#adaba316ea864179aa8460a57a61f1ff3" title="foedus::memory::PagePool\l::get_free_pool_capacity" alt="" coords="255,506,433,547"/>
<area shape="rect" id="node24" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#aec426088a6e841b62d8305c4934bff8d" title="foedus::memory::NumaNode\lMemory::get_log_buffer\l_memory_piece" alt="" coords="251,572,437,628"/>
<area shape="rect" id="node25" href="classfoedus_1_1memory_1_1PagePool.html#ac3708e19114cb64dbf56c32791686eb2" title="foedus::memory::PagePool\l::get_recommended_pages\l_per_grab" alt="" coords="255,652,433,708"/>
<area shape="rect" id="node26" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#accd3c0534d9385b49168c51da6a56552" title="foedus::memory::NumaNode\lMemory::get_snapshot_offset\l_chunk_memory_piece" alt="" coords="247,732,441,788"/>
<area shape="rect" id="node27" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a0541f9ed9fc128fc2c246a4a3bd2b740" title="foedus::memory::NumaNode\lMemory::get_snapshot_pool" alt="" coords="251,813,437,854"/>
<area shape="rect" id="node28" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#af8652e0d9e6d43a110f31bc5b9f4e692" title="foedus::memory::NumaNode\lMemory::get_volatile_offset\l_chunk_memory_piece" alt="" coords="251,879,437,935"/>
<area shape="rect" id="node29" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a630ab6d899053a9afc067e34877edd48" title="foedus::memory::NumaNode\lMemory::get_volatile_pool" alt="" coords="251,959,437,1001"/>
<area shape="rect" id="node30" href="classfoedus_1_1memory_1_1PagePool.html#a1fdd8ce2a10921faeccc1fe38ffd25c0" title="Adds the specified number of free pages to the chunk. " alt="" coords="255,1025,433,1066"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaNodeMemory.html#a197b63dfdbb7d28dab57fdfae379f28b" title="Allocate a memory of the given size on this NUMA node. " alt="" coords="503,215,690,271"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1AlignedMemory.html#a5166bae2fdad9ffa0d5c279edfd3307e" title="Allocate a memory, releasing the current memory if exists. " alt="" coords="743,222,957,263"/>
<area shape="rect" id="node18" href="classfoedus_1_1memory_1_1AlignedMemory.html#ad11d2289458b26db2aaef9de984045a0" title="Returns if this object doesn&#39;t hold a valid memory block. " alt="" coords="743,287,957,329"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1memory.html#ac2422aa4fe378da8a9594901762e17df" title="foedus::memory::alloc_mmap" alt="" coords="1268,59,1461,85"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="1522,113,1662,154"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1memory.html#ae51e4a90f52316ba9dce8ff783f30d84" title="foedus::memory::alloc\l_mmap_1gb_pages" alt="" coords="1037,54,1188,95"/>
<area shape="rect" id="node10" href="classfoedus_1_1debugging_1_1StopWatch.html#adacc2b7108e7b4df019cc79733050b8c" title="foedus::debugging::\lStopWatch::elapsed_ns" alt="" coords="1284,171,1445,213"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#gab3d1892edaa7db4b02029567b7993f37" title="In order to run even on a non&#45;numa machine or a machine with fewer sockets, we allow specifying arbit..." alt="" coords="1037,339,1188,381"/>
<area shape="rect" id="node12" href="numa_8h.html#a413cadd87796fff247c83d9ad817cc7e" title="numa_available" alt="" coords="1309,303,1420,329"/>
<area shape="rect" id="node14" href="numa_8h.html#aba49c14c68d23dc05d046db02766b928" title="numa_preferred" alt="" coords="1057,405,1168,432"/>
<area shape="rect" id="node15" href="numa_8h.html#a56f33968932f6550e5e5eb4d1acc67b3" title="numa_set_preferred" alt="" coords="1045,456,1181,483"/>
<area shape="rect" id="node16" href="classfoedus_1_1debugging_1_1StopWatch.html#a2ee5315a0f6bf736a2a73b29b1709bd2" title="Take another current time tick. " alt="" coords="1045,222,1180,263"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1memory.html#af6145d9296231995c84badafb6a2a0a9" title="Returns if 1GB hugepages were enabled. " alt="" coords="1509,47,1675,89"/>
<area shape="rect" id="node13" href="numa_8h.html#a22585176d6e08c221de8377637bd72a7" title="numa_num_configured\l_nodes" alt="" coords="1289,354,1441,395"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1debugging.html#a35a786b0492e9799cb74359408079091" title="foedus::debugging::\lget_now_nanosec" alt="" coords="1297,237,1432,278"/>
<area shape="rect" id="node23" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#afb133ecb2760b19892c492b1a8e07fa8" title="foedus::memory::PagePool\lPimpl::get_free_pool_capacity" alt="" coords="499,506,695,547"/>
<area shape="rect" id="node31" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abec400efafc2d5e23b8f240e10abdfb3" title="foedus::memory::PagePool\lPimpl::grab" alt="" coords="507,1025,686,1066"/>
<area shape="rect" id="node32" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2" title="foedus::memory::PagePool\lOffsetChunk::size" alt="" coords="761,806,939,847"/>
<area shape="rect" id="node33" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a73a995a98dc72fa504271482bf14ac56" title="foedus::memory::PagePool\lOffsetChunk::capacity" alt="" coords="761,871,939,913"/>
<area shape="rect" id="node34" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#abd594ac94d8ac0445ebef734b7305fb6" title="foedus::memory::PagePool\lPimpl::get_debug_pool_name" alt="" coords="753,937,947,978"/>
<area shape="rect" id="node37" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a50e6fad1a2e9735182f83a52a5e329b0" title="foedus::memory::PagePool\lPimpl::get_free_pool_count" alt="" coords="1023,1023,1202,1065"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#ab2c94997f724139b950b66b18d786bd5" title="Not thread safe. " alt="" coords="761,1054,939,1095"/>
<area shape="rect" id="node39" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#aa545fc1cffac905225d3a7c7c457b5a8" title="foedus::memory::PagePool\lPimpl::free_pool_head" alt="" coords="1023,1099,1202,1141"/>
<area shape="rect" id="node40" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="761,1171,939,1213"/>
<area shape="rect" id="node42" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a1a41295b63274fb300e5937a9bb1eca7" title="foedus::memory::PagePool\lPimpl::decrease_free_pool_count" alt="" coords="743,1237,957,1278"/>
<area shape="rect" id="node35" href="classfoedus_1_1assorted_1_1FixedString.html#a3269f7c68f175a1fd42e78110a57cbf2" title="Test if string is empty. " alt="" coords="1017,901,1209,942"/>
<area shape="rect" id="node36" href="classfoedus_1_1assorted_1_1FixedString.html#a16f6de0859f599127e2d4a51a6537a01" title="Convert to a std::string object. " alt="" coords="1005,967,1220,993"/>
<area shape="rect" id="node41" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="1023,1171,1202,1213"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7ea5067e450fa872240cb010ddb65464"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::NumaCoreMemory::release_free_snapshot_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same, except it's for snapshot page. </p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00230">230</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8hpp_source.html#l00061">foedus::memory::PagePoolOffsetChunk::full()</a>, <a class="el" href="page__pool_8hpp_source.html#l00068">foedus::memory::PagePoolOffsetChunk::push_back()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00741">foedus::thread::ThreadPimpl::on_snapshot_cache_miss()</a>.</p>
<div class="fragment"><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                                                     {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">full</a>())) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    release_free_pages_to_node(free_snapshot_pool_chunk_, snapshot_pool_);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">full</a>());</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">push_back</a>(offset);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_ace44cb03e7da84d29f3a02a790c69191"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">foedus::memory::PagePoolOffsetChunk::full</a></div><div class="ttdeci">bool full() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00061">page_pool.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_a6f558bb023b2c5c7dd9bf7ab9d054ef0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">foedus::memory::PagePoolOffsetChunk::push_back</a></div><div class="ttdeci">void push_back(PagePoolOffset pointer)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00068">page_pool.hpp:68</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="523,5,701,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="296,35,475,76"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a7ea5067e450fa872240cb010ddb65464_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a3c43ac83a4cdcc3e48d8b125dfcff963" title="foedus::thread::ThreadPimpl\l::on_snapshot_cache_miss" alt="" coords="296,788,480,829"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="528,750,737,792"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="541,816,725,872"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="1249,909,1459,950"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="785,748,969,789"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="1017,670,1201,712"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1507,982,1700,1038"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1759,430,1972,472"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1514,446,1693,502"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1513,1062,1694,1118"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1517,902,1690,958"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1748,992,1983,1033"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="2032,913,2235,954"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="2031,766,2236,808"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2303,1068,2467,1124"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2303,1148,2467,1204"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2296,668,2475,724"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2295,748,2476,804"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2294,828,2477,884"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2287,908,2483,964"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2284,988,2487,1044"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1775,1059,1956,1115"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="2043,979,2224,1035"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="2043,1059,2224,1115"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1771,897,1959,968"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="2039,832,2227,888"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="1275,974,1433,1016"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1017,736,1201,792"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1279,421,1429,462"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1514,576,1693,632"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1521,656,1686,712"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1521,315,1685,371"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1517,210,1690,266"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1517,51,1690,107"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1773,576,1958,632"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1773,496,1958,552"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="1773,816,1958,872"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="1773,736,1958,792"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="1777,656,1953,712"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1779,37,1952,78"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1779,102,1952,173"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="2047,110,2220,166"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1779,248,1952,304"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1279,736,1429,792"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1514,736,1693,792"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="797,998,957,1054"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="785,816,969,872"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="1034,816,1185,872"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1265,816,1443,872"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c9bf7d6b21ac33a61d6f7176023ea3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::memory::NumaCoreMemory::release_free_volatile_page </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">PagePoolOffset</a>&#160;</td>
          <td class="paramname"><em>offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns one free volatile page to <b>local</b> page pool. </p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00213">213</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page__pool_8hpp_source.html#l00061">foedus::memory::PagePoolOffsetChunk::full()</a>, <a class="el" href="page__pool_8hpp_source.html#l00068">foedus::memory::PagePoolOffsetChunk::push_back()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="thread_8cpp_source.html#l00147">foedus::thread::GrabFreeVolatilePagesScope::grab()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00317">foedus::thread::ThreadPimpl::place_a_new_volatile_page()</a>, <a class="el" href="thread_8cpp_source.html#l00165">foedus::thread::GrabFreeVolatilePagesScope::release()</a>, and <a class="el" href="numa__core__memory_8hpp_source.html#l00223">foedus::memory::AutoVolatilePageReleaseScope::~AutoVolatilePageReleaseScope()</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                                     {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">full</a>())) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    release_free_pages_to_node(free_volatile_pool_chunk_, volatile_pool_);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">full</a>());</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">push_back</a>(offset);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_ace44cb03e7da84d29f3a02a790c69191"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">foedus::memory::PagePoolOffsetChunk::full</a></div><div class="ttdeci">bool full() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00061">page_pool.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_a6f558bb023b2c5c7dd9bf7ab9d054ef0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">foedus::memory::PagePoolOffsetChunk::push_back</a></div><div class="ttdeci">void push_back(PagePoolOffset pointer)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00068">page_pool.hpp:68</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191" title="foedus::memory::PagePool\lOffsetChunk::full" alt="" coords="508,5,687,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0" title="foedus::memory::PagePool\lOffsetChunk::push_back" alt="" coords="281,35,460,76"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_icgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_icgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_icgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a6c9bf7d6b21ac33a61d6f7176023ea3a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1285,233,1463,289"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1GrabFreeVolatilePagesScope.html#a51fde507b10c15c4c39e6de2de3c6deb" title="If this thread doesn&#39;t have enough free pages, no page is obtained, returning kErrorCodeMemoryNoFreeP..." alt="" coords="569,1027,740,1068"/>
<area shape="rect" id="node26" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ab1611b1e29b58ee7aaf3b88cc57f9343" title="Subroutine of install_a_volatile_page() and follow_page_pointer() to atomically place the given new v..." alt="" coords="299,873,485,915"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1GrabFreeVolatilePagesScope.html#acbf8a6e96a43f097a20b2d3bcb460d26" title="Idempotent. " alt="" coords="298,1027,486,1068"/>
<area shape="rect" id="node50" href="structfoedus_1_1memory_1_1AutoVolatilePageReleaseScope.html#ac72aea03df3b822c5f278d1db2fa2cdf" title="foedus::memory::AutoVolatile\lPageReleaseScope::~AutoVolatile\lPageReleaseScope" alt="" coords="281,1093,503,1149"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1527,268,1740,309"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1799,305,2004,347"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2071,29,2235,85"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2071,138,2235,194"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2064,218,2243,274"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="2063,298,2244,354"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="2062,378,2245,434"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="2055,458,2251,514"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="2052,578,2255,634"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="2317,5,2491,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="2322,71,2486,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="2303,152,2505,193"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="2331,218,2477,274"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="2330,298,2478,354"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="2329,378,2479,434"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="2306,458,2502,514"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="2323,538,2485,594"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="2319,618,2489,674"/>
<area shape="rect" id="node22" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a8febde13f90f2b61abf29bf1f4a89e3d" title="foedus::storage::masstree\l::Adopt::adopt_case_b" alt="" coords="812,1027,985,1068"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1masstree_1_1SplitBorder.html#ab940fc48706197ec728542a3b4438fc7" title="Border node&#39;s Split. " alt="" coords="812,1092,985,1133"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1masstree_1_1SplitIntermediate.html#aa656a627e949f49b8903908d2ea1204f" title="Interior node&#39;s Split. " alt="" coords="812,1157,985,1199"/>
<area shape="rect" id="node23" href="structfoedus_1_1storage_1_1masstree_1_1Adopt.html#a16f4727fa2ce3b72468618be684af41d" title="Execute the system transaction. " alt="" coords="1049,1033,1222,1075"/>
<area shape="rect" id="node27" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="563,807,747,848"/>
<area shape="rect" id="node33" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="807,735,991,776"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="807,866,991,922"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="563,939,747,995"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="819,800,978,841"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1039,713,1232,769"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1049,793,1222,849"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1516,651,1751,692"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1280,785,1468,856"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="1060,461,1211,503"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1285,414,1463,470"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1291,494,1457,550"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1551,334,1715,390"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1287,574,1461,630"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1287,654,1461,710"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1541,414,1726,470"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1541,494,1726,550"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="1060,873,1211,929"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad0c8eb92d19915b679137e594bdfae31" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_write_batch" alt="" coords="1285,881,1463,937"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="823,946,974,1002"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="1046,953,1225,1009"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1GrabFreeVolatilePagesScope.html#af1155881509611bbf7bb52fb54c58ba2" title="foedus::thread::GrabFree\lVolatilePagesScope::~GrabFree\lVolatilePagesScope" alt="" coords="551,1093,759,1149"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4a7a7f3ef2839774e1e35fc0b9f79336"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::memory::NumaCoreMemory::uninitialize_once </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classfoedus_1_1DefaultInitializable.html#a764be22ce1454279e7a7e78f4c8e380b">foedus::DefaultInitializable</a>.</p>

<p>Definition at line <a class="el" href="numa__core__memory_8cpp_source.html#l00170">170</a> of file <a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="aligned__memory_8hpp_source.html#l00232">foedus::memory::AlignedMemorySlice::clear()</a>, <a class="el" href="page__pool_8hpp_source.html#l00131">foedus::memory::PagePoolOffsetAndEpochChunk::empty()</a>, <a class="el" href="engine_8cpp_source.html#l00074">foedus::Engine::get_soc_count()</a>, <a class="el" href="page__pool_8cpp_source.html#l00134">foedus::memory::PagePool::release()</a>, <a class="el" href="aligned__memory_8cpp_source.html#l00235">foedus::memory::AlignedMemory::release_block()</a>, <a class="el" href="page__pool_8hpp_source.html#l00059">foedus::memory::PagePoolOffsetChunk::size()</a>, and <a class="el" href="error__stack__batch_8hpp_source.html#l00136">SUMMARIZE_ERROR_BATCH</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                             {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Releasing NumaCoreMemory for core &quot;</span> &lt;&lt; core_id_;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  ErrorStackBatch batch;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// return all free pages</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">if</span> (retired_volatile_pool_chunks_) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// this should be already released in ThreadPimpl&#39;s uninitialize.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// we can&#39;t do it here because uninitialization of node/core memories are parallelized</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">for</span> (uint16_t node = 0; node &lt; engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">get_soc_count</a>(); ++node) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      PagePoolOffsetAndEpochChunk* chunk = retired_volatile_pool_chunks_ + node;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunk-&gt;empty());  <span class="comment">// just sanity check</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    retired_volatile_pool_chunks_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> (free_volatile_pool_chunk_) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    volatile_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(free_volatile_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">size</a>(), free_volatile_pool_chunk_);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    free_volatile_pool_chunk_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    volatile_pool_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">if</span> (free_snapshot_pool_chunk_) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    snapshot_pool_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(free_snapshot_pool_chunk_-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">size</a>(), free_snapshot_pool_chunk_);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    free_snapshot_pool_chunk_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    snapshot_pool_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  log_buffer_memory_.<a class="code" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html#ab87f0f0c17ed410be86d7332bd31e068">clear</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  local_work_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  small_thread_local_memory_.<a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">release_block</a>();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a>(batch);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html_afd955f5f991e28943c72ecff1167c16b"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b">foedus::memory::AlignedMemory::release_block</a></div><div class="ttdeci">void release_block()</div><div class="ttdoc">Releases the memory block. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8cpp_source.html#l00235">aligned_memory.cpp:235</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_af0ac9dbae9481b295a8492c6d9f6c1d5"><div class="ttname"><a href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5">foedus::Engine::get_soc_count</a></div><div class="ttdeci">soc::SocId get_soc_count() const </div><div class="ttdoc">Shorthand for get_options().thread_.group_count_. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00074">engine.cpp:74</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a802171ff0578875748d20b4e9c8c9463"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">foedus::memory::PagePool::release</a></div><div class="ttdeci">void release(uint32_t desired_release_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Returns the specified number of free pages from the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00134">page_pool.cpp:134</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga67390b22b0afbe5a4938df9847eafda9"><div class="ttname"><a href="group__ERRORCODES.html#ga67390b22b0afbe5a4938df9847eafda9">SUMMARIZE_ERROR_BATCH</a></div><div class="ttdeci">#define SUMMARIZE_ERROR_BATCH(x)</div><div class="ttdoc">This macro calls ErrorStackBatch::summarize() with automatically provided parameters. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack__batch_8hpp_source.html#l00136">error_stack_batch.hpp:136</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1AlignedMemorySlice_html_ab87f0f0c17ed410be86d7332bd31e068"><div class="ttname"><a href="structfoedus_1_1memory_1_1AlignedMemorySlice.html#ab87f0f0c17ed410be86d7332bd31e068">foedus::memory::AlignedMemorySlice::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00232">aligned_memory.hpp:232</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_affa4e09fc9e251f5cc259de81c23c6e2"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">foedus::memory::PagePoolOffsetChunk::size</a></div><div class="ttdeci">uint32_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00059">page_pool.hpp:59</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1memory_1_1NumaCoreMemory_a4a7a7f3ef2839774e1e35fc0b9f79336_cgraph.png" border="0" usemap="#classfoedus_1_1memory_1_1NumaCoreMemory_a4a7a7f3ef2839774e1e35fc0b9f79336_cgraph" alt=""/></div>
<map name="classfoedus_1_1memory_1_1NumaCoreMemory_a4a7a7f3ef2839774e1e35fc0b9f79336_cgraph" id="classfoedus_1_1memory_1_1NumaCoreMemory_a4a7a7f3ef2839774e1e35fc0b9f79336_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html#ab87f0f0c17ed410be86d7332bd31e068" title="foedus::memory::AlignedMemory\lSlice::clear" alt="" coords="237,5,451,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1PagePoolOffsetAndEpochChunk.html#af96624c49b6035bc5b9254c111c0d07d" title="foedus::memory::PagePool\lOffsetAndEpochChunk::empty" alt="" coords="245,71,443,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1Engine.html#af0ac9dbae9481b295a8492c6d9f6c1d5" title="Shorthand for get_options().thread_.group_count_. " alt="" coords="277,136,411,177"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463" title="Returns the specified number of free pages from the chunk. " alt="" coords="255,201,433,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1AlignedMemory.html#afd955f5f991e28943c72ecff1167c16b" title="Releases the memory block. " alt="" coords="237,267,451,308"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2" title="foedus::memory::PagePool\lOffsetChunk::size" alt="" coords="255,332,433,373"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1PagePoolPimpl.html#a13d785355359fd936c2b3863d296ba2c" title="foedus::memory::PagePool\lPimpl::release" alt="" coords="499,201,677,243"/>
</map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/memory/<a class="el" href="numa__core__memory_8hpp_source.html">numa_core_memory.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/memory/<a class="el" href="numa__core__memory_8cpp_source.html">numa_core_memory.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1memory.html">memory</a></li><li class="navelem"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">NumaCoreMemory</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
