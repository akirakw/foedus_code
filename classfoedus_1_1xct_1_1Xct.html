<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::xct::Xct Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfoedus_1_1xct_1_1Xct.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classfoedus_1_1xct_1_1Xct-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::xct::Xct Class Reference<div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__XCT.html">Transaction Manager</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents a user transaction.  
 <a href="classfoedus_1_1xct_1_1Xct.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents a user transaction. </p>
<p>To obtain this object, call Thread::get_current_xct(). This object represents a <em>user</em> transaction as opposed to physical-only internal transactions (so called <em>system</em> transactions, SysxctScope). </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00058">58</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="xct_8hpp_source.html">xct.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aee285206205aa5ee1df2f044b307ab5f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5f">Constants</a> { <a class="el" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">kMaxPointerSets</a> = 1024, 
<a class="el" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">kMaxPageVersionSets</a> = 1024
 }<tr class="separator:aee285206205aa5ee1df2f044b307ab5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a97f1e851be41dccdc730d7093c111dd2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a97f1e851be41dccdc730d7093c111dd2">Xct</a> (<a class="el" href="classfoedus_1_1Engine.html">Engine</a> *engine, <a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *context, <a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id)</td></tr>
<tr class="separator:a97f1e851be41dccdc730d7093c111dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab627791af5e42bc1a9ebcebdcfcaff46"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ab627791af5e42bc1a9ebcebdcfcaff46">Xct</a> (const <a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;other)=delete</td></tr>
<tr class="separator:ab627791af5e42bc1a9ebcebdcfcaff46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad41a55b3d564111db585a312c6a0bba4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ad41a55b3d564111db585a312c6a0bba4">operator=</a> (const <a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;other)=delete</td></tr>
<tr class="separator:ad41a55b3d564111db585a312c6a0bba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd027b4a8d21f45a60f82d110c5a529"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a9dd027b4a8d21f45a60f82d110c5a529">initialize</a> (<a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">memory::NumaCoreMemory</a> *core_memory, uint32_t *mcs_block_current, uint32_t *mcs_rw_async_mapping_current)</td></tr>
<tr class="separator:a9dd027b4a8d21f45a60f82d110c5a529"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac525c6624f248cd869b111b7d4338b30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ac525c6624f248cd869b111b7d4338b30">activate</a> (<a class="el" href="group__XCT.html#ga9ac5dae4b91a288e9d887f28a7124c13">IsolationLevel</a> isolation_level)</td></tr>
<tr class="memdesc:ac525c6624f248cd869b111b7d4338b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begins the transaction.  <a href="#ac525c6624f248cd869b111b7d4338b30">More...</a><br /></td></tr>
<tr class="separator:ac525c6624f248cd869b111b7d4338b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc9a5e976aadfba9f1fbf9e9fb39a9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#abbc9a5e976aadfba9f1fbf9e9fb39a9a">deactivate</a> ()</td></tr>
<tr class="memdesc:abbc9a5e976aadfba9f1fbf9e9fb39a9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the transaction.  <a href="#abbc9a5e976aadfba9f1fbf9e9fb39a9a">More...</a><br /></td></tr>
<tr class="separator:abbc9a5e976aadfba9f1fbf9e9fb39a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac81cd23819603f9bdbf780b9f6a18e56"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ac81cd23819603f9bdbf780b9f6a18e56">get_mcs_block_current</a> () const </td></tr>
<tr class="separator:ac81cd23819603f9bdbf780b9f6a18e56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29f899dedb76839dd51481f777e8163a"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a29f899dedb76839dd51481f777e8163a">increment_mcs_block_current</a> ()</td></tr>
<tr class="separator:a29f899dedb76839dd51481f777e8163a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e3e36f95410cccc08910497386d0141"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a8e3e36f95410cccc08910497386d0141">decrement_mcs_block_current</a> ()</td></tr>
<tr class="separator:a8e3e36f95410cccc08910497386d0141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a76be25f22fd49683d2a4138ab7b199"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a9a76be25f22fd49683d2a4138ab7b199">is_active</a> () const </td></tr>
<tr class="memdesc:a9a76be25f22fd49683d2a4138ab7b199"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether the object is an active transaction.  <a href="#a9a76be25f22fd49683d2a4138ab7b199">More...</a><br /></td></tr>
<tr class="separator:a9a76be25f22fd49683d2a4138ab7b199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae4b0ccd575851276efddf752c90a273"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#aae4b0ccd575851276efddf752c90a273">is_enable_rll_for_this_xct</a> () const </td></tr>
<tr class="separator:aae4b0ccd575851276efddf752c90a273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6777ca164a194123d0c3ab02dca629e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ac6777ca164a194123d0c3ab02dca629e">set_enable_rll_for_this_xct</a> (bool value)</td></tr>
<tr class="separator:ac6777ca164a194123d0c3ab02dca629e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69664ddec7511d43c04cee6d66b1c1a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a69664ddec7511d43c04cee6d66b1c1a2">is_default_rll_for_this_xct</a> () const </td></tr>
<tr class="separator:a69664ddec7511d43c04cee6d66b1c1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a873d7bb9094918e5d61742c456dbeb61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a873d7bb9094918e5d61742c456dbeb61">set_default_rll_for_this_xct</a> (bool value)</td></tr>
<tr class="separator:a873d7bb9094918e5d61742c456dbeb61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae84fb0f1c8c5c81bac74e79e62da49a6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ae84fb0f1c8c5c81bac74e79e62da49a6">get_hot_threshold_for_this_xct</a> () const </td></tr>
<tr class="separator:ae84fb0f1c8c5c81bac74e79e62da49a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee8a59d28d2d81c2a5673e321851272"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a8ee8a59d28d2d81c2a5673e321851272">set_hot_threshold_for_this_xct</a> (uint16_t value)</td></tr>
<tr class="separator:a8ee8a59d28d2d81c2a5673e321851272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b0e9bc8c0227311e3b1fe1412272992"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a0b0e9bc8c0227311e3b1fe1412272992">get_default_hot_threshold_for_this_xct</a> () const </td></tr>
<tr class="separator:a0b0e9bc8c0227311e3b1fe1412272992"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace9354af4e27109da6affc4d3bd84419"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ace9354af4e27109da6affc4d3bd84419">set_default_hot_threshold_for_this_xct</a> (uint16_t value)</td></tr>
<tr class="separator:ace9354af4e27109da6affc4d3bd84419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5728b0376ffa45b801a560051d7d7a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a8a5728b0376ffa45b801a560051d7d7a">get_rll_threshold_for_this_xct</a> () const </td></tr>
<tr class="separator:a8a5728b0376ffa45b801a560051d7d7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34cbbf2ad0e8ee102d0b3db3c8056bb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a34cbbf2ad0e8ee102d0b3db3c8056bb8">set_rll_threshold_for_this_xct</a> (uint16_t value)</td></tr>
<tr class="separator:a34cbbf2ad0e8ee102d0b3db3c8056bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc8817e57a047f64148add6e63fbd661"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#afc8817e57a047f64148add6e63fbd661">get_default_rll_threshold_for_this_xct</a> () const </td></tr>
<tr class="separator:afc8817e57a047f64148add6e63fbd661"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a339fdd767efdfed418e32792b560b373"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a339fdd767efdfed418e32792b560b373">set_default_rll_threshold_for_this_xct</a> (uint16_t value)</td></tr>
<tr class="separator:a339fdd767efdfed418e32792b560b373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca66ae9959651b7c6fa86a75db287f54"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">SysxctWorkspace</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#aca66ae9959651b7c6fa86a75db287f54">get_sysxct_workspace</a> () const </td></tr>
<tr class="separator:aca66ae9959651b7c6fa86a75db287f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8523ae5dcf4ee3d4554e291ab355230"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ab8523ae5dcf4ee3d4554e291ab355230">is_read_only</a> () const </td></tr>
<tr class="memdesc:ab8523ae5dcf4ee3d4554e291ab355230"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if this transaction makes no writes.  <a href="#ab8523ae5dcf4ee3d4554e291ab355230">More...</a><br /></td></tr>
<tr class="separator:ab8523ae5dcf4ee3d4554e291ab355230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae2ae5210db8eda39a1507940bf7352"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__XCT.html#ga9ac5dae4b91a288e9d887f28a7124c13">IsolationLevel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#abae2ae5210db8eda39a1507940bf7352">get_isolation_level</a> () const </td></tr>
<tr class="memdesc:abae2ae5210db8eda39a1507940bf7352"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the level of isolation for this transaction.  <a href="#abae2ae5210db8eda39a1507940bf7352">More...</a><br /></td></tr>
<tr class="separator:abae2ae5210db8eda39a1507940bf7352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07b332c0f7f0896ad37dc93373af1cb2"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a07b332c0f7f0896ad37dc93373af1cb2">get_id</a> () const </td></tr>
<tr class="memdesc:a07b332c0f7f0896ad37dc93373af1cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ID of this transaction, but note that it is not issued until commit time!  <a href="#a07b332c0f7f0896ad37dc93373af1cb2">More...</a><br /></td></tr>
<tr class="separator:a07b332c0f7f0896ad37dc93373af1cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0247fc32d656c18014c69145e0bef59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ad0247fc32d656c18014c69145e0bef59">get_thread_context</a> ()</td></tr>
<tr class="separator:ad0247fc32d656c18014c69145e0bef59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac822b7fe5234d3681397277b0105256f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ac822b7fe5234d3681397277b0105256f">get_thread_id</a> () const </td></tr>
<tr class="separator:ac822b7fe5234d3681397277b0105256f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b0f4d5bf1485c376f62e97c6053ea43"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a6b0f4d5bf1485c376f62e97c6053ea43">get_pointer_set_size</a> () const </td></tr>
<tr class="separator:a6b0f4d5bf1485c376f62e97c6053ea43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f1a970106386aa9f367195c0a43208"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a67f1a970106386aa9f367195c0a43208">get_page_version_set_size</a> () const </td></tr>
<tr class="separator:a67f1a970106386aa9f367195c0a43208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7b9c43800807db798d2e58bc07ad5cd"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#af7b9c43800807db798d2e58bc07ad5cd">get_read_set_size</a> () const </td></tr>
<tr class="separator:af7b9c43800807db798d2e58bc07ad5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674e3ce0252c1c9d2f73edf3b3c4307e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a674e3ce0252c1c9d2f73edf3b3c4307e">get_write_set_size</a> () const </td></tr>
<tr class="separator:a674e3ce0252c1c9d2f73edf3b3c4307e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af39a25162bfa65a4cc2dea0d64460cbe"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#af39a25162bfa65a4cc2dea0d64460cbe">get_lock_free_read_set_size</a> () const </td></tr>
<tr class="separator:af39a25162bfa65a4cc2dea0d64460cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dfc3cd9b70a93615c3a0a8014aafbe1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a4dfc3cd9b70a93615c3a0a8014aafbe1">get_lock_free_write_set_size</a> () const </td></tr>
<tr class="separator:a4dfc3cd9b70a93615c3a0a8014aafbe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91010b6195657c14f3b681da8102163d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1PointerAccess.html">PointerAccess</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a91010b6195657c14f3b681da8102163d">get_pointer_set</a> () const </td></tr>
<tr class="separator:a91010b6195657c14f3b681da8102163d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98dcc8bc01ee8a365e68c0742c605d08"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structfoedus_1_1xct_1_1PageVersionAccess.html">PageVersionAccess</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a98dcc8bc01ee8a365e68c0742c605d08">get_page_version_set</a> () const </td></tr>
<tr class="separator:a98dcc8bc01ee8a365e68c0742c605d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae523b00cead387e6addb1366fe08546a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ae523b00cead387e6addb1366fe08546a">get_read_set</a> ()</td></tr>
<tr class="separator:ae523b00cead387e6addb1366fe08546a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5fa3dcdb891b99e5bc7d83ff2029f46"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ae5fa3dcdb891b99e5bc7d83ff2029f46">get_write_set</a> ()</td></tr>
<tr class="separator:ae5fa3dcdb891b99e5bc7d83ff2029f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245cedc62930a99cee57290d24932c56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html">LockFreeReadXctAccess</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a245cedc62930a99cee57290d24932c56">get_lock_free_read_set</a> ()</td></tr>
<tr class="separator:a245cedc62930a99cee57290d24932c56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c4f8c691a326c1f632128d13dea2fa2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html">LockFreeWriteXctAccess</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a8c4f8c691a326c1f632128d13dea2fa2">get_lock_free_write_set</a> ()</td></tr>
<tr class="separator:a8c4f8c691a326c1f632128d13dea2fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a208310505c3d16cf2dc10f94f968d4a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4">issue_next_id</a> (<a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> max_xct_id, <a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> *epoch)</td></tr>
<tr class="memdesc:a208310505c3d16cf2dc10f94f968d4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called while a successful commit of xct to issue a new xct id.  <a href="#a208310505c3d16cf2dc10f94f968d4a4">More...</a><br /></td></tr>
<tr class="separator:a208310505c3d16cf2dc10f94f968d4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfd2125c9cc252494693f65719ed53b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#adfd2125c9cc252494693f65719ed53b3">add_to_pointer_set</a> (const <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *pointer_address, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> observed)</td></tr>
<tr class="memdesc:adfd2125c9cc252494693f65719ed53b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given page pointer to the pointer set of this transaction.  <a href="#adfd2125c9cc252494693f65719ed53b3">More...</a><br /></td></tr>
<tr class="separator:adfd2125c9cc252494693f65719ed53b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7bf19bc328c888d70d56e3650b9cde4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ab7bf19bc328c888d70d56e3650b9cde4">overwrite_to_pointer_set</a> (const <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *pointer_address, <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> observed)</td></tr>
<tr class="memdesc:ab7bf19bc328c888d70d56e3650b9cde4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The transaction that has updated the volatile pointer should not abort itself.  <a href="#ab7bf19bc328c888d70d56e3650b9cde4">More...</a><br /></td></tr>
<tr class="separator:ab7bf19bc328c888d70d56e3650b9cde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b92830ccd52b310445b41bfef06fd7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a68b92830ccd52b310445b41bfef06fd7">add_to_page_version_set</a> (const <a class="el" href="structfoedus_1_1storage_1_1PageVersion.html">storage::PageVersion</a> *version_address, <a class="el" href="structfoedus_1_1storage_1_1PageVersionStatus.html">storage::PageVersionStatus</a> observed)</td></tr>
<tr class="memdesc:a68b92830ccd52b310445b41bfef06fd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given page version to the page version set of this transaction.  <a href="#a68b92830ccd52b310445b41bfef06fd7">More...</a><br /></td></tr>
<tr class="separator:a68b92830ccd52b310445b41bfef06fd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3a6688cdf5249c46613a1988b71975"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975">on_record_read</a> (bool intended_for_write, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *tid_address, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> *observed_xid, <a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> **read_set_address, bool no_readset_if_moved=false, bool no_readset_if_next_layer=false)</td></tr>
<tr class="memdesc:abc3a6688cdf5249c46613a1988b71975"><td class="mdescLeft">&#160;</td><td class="mdescRight">The general logic invoked for every record read.  <a href="#abc3a6688cdf5249c46613a1988b71975">More...</a><br /></td></tr>
<tr class="separator:abc3a6688cdf5249c46613a1988b71975"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e7e1454bc26ac3f32116125879d13ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed">on_record_read</a> (bool intended_for_write, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *tid_address, bool no_readset_if_moved=false, bool no_readset_if_next_layer=false)</td></tr>
<tr class="memdesc:a4e7e1454bc26ac3f32116125879d13ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shortcut for a case when you don't need observed_xid/read_set_address back.  <a href="#a4e7e1454bc26ac3f32116125879d13ed">More...</a><br /></td></tr>
<tr class="separator:a4e7e1454bc26ac3f32116125879d13ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab43ebf3a25aedb3e6ffeb3d9724bd080"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">on_record_read_take_locks_if_needed</a> (bool intended_for_write, const <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *page_address, <a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *tid_address)</td></tr>
<tr class="memdesc:ab43ebf3a25aedb3e6ffeb3d9724bd080"><td class="mdescLeft">&#160;</td><td class="mdescRight">subroutine of <a class="el" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. ">on_record_read()</a> to take lock(s).  <a href="#ab43ebf3a25aedb3e6ffeb3d9724bd080">More...</a><br /></td></tr>
<tr class="separator:ab43ebf3a25aedb3e6ffeb3d9724bd080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa23025809d9c2fdff744f98f78c3882a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a">add_related_write_set</a> (<a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> *related_read_set, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *tid_address, char *payload_address, <a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *log_entry)</td></tr>
<tr class="memdesc:aa23025809d9c2fdff744f98f78c3882a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a write-set related to an existing read-set.  <a href="#aa23025809d9c2fdff744f98f78c3882a">More...</a><br /></td></tr>
<tr class="separator:aa23025809d9c2fdff744f98f78c3882a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67553e6e570cdc0b371992db058cf7cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *owner_id_address, <a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> **read_set_address)</td></tr>
<tr class="memdesc:a67553e6e570cdc0b371992db058cf7cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given record to the read set of this transaction.  <a href="#a67553e6e570cdc0b371992db058cf7cb">More...</a><br /></td></tr>
<tr class="separator:a67553e6e570cdc0b371992db058cf7cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd2a90acadfa8e01d93187ee10a55b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a1fd2a90acadfa8e01d93187ee10a55b2">add_to_read_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id, <a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> owner_lock_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *owner_id_address, <a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> **read_set_address)</td></tr>
<tr class="memdesc:a1fd2a90acadfa8e01d93187ee10a55b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this in case you already have owner_lock_id.  <a href="#a1fd2a90acadfa8e01d93187ee10a55b2">More...</a><br /></td></tr>
<tr class="separator:a1fd2a90acadfa8e01d93187ee10a55b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dad4e0e5a6770ee941bd365410f9b6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">add_to_write_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *owner_id_address, char *payload_address, <a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *log_entry)</td></tr>
<tr class="memdesc:a7dad4e0e5a6770ee941bd365410f9b6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given record to the write set of this transaction.  <a href="#a7dad4e0e5a6770ee941bd365410f9b6a">More...</a><br /></td></tr>
<tr class="separator:a7dad4e0e5a6770ee941bd365410f9b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a7332c6a326d914ed9d1132b9bc1004"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a8a7332c6a326d914ed9d1132b9bc1004">add_to_write_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1storage_1_1Record.html">storage::Record</a> *record, <a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *log_entry)</td></tr>
<tr class="memdesc:a8a7332c6a326d914ed9d1132b9bc1004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given record to the write set of this transaction.  <a href="#a8a7332c6a326d914ed9d1132b9bc1004">More...</a><br /></td></tr>
<tr class="separator:a8a7332c6a326d914ed9d1132b9bc1004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad14df45e5685d6725622e28ed45f9726"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#ad14df45e5685d6725622e28ed45f9726">add_to_read_and_write_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *owner_id_address, char *payload_address, <a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *log_entry)</td></tr>
<tr class="memdesc:ad14df45e5685d6725622e28ed45f9726"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a pair of read and write set of this transaction.  <a href="#ad14df45e5685d6725622e28ed45f9726">More...</a><br /></td></tr>
<tr class="separator:ad14df45e5685d6725622e28ed45f9726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e75f1bf22a2b3553b6960799d7f6d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a52e75f1bf22a2b3553b6960799d7f6d6">add_to_lock_free_read_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> observed_owner_id, <a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *owner_id_address)</td></tr>
<tr class="memdesc:a52e75f1bf22a2b3553b6960799d7f6d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given record to the special read-set that is not placed in usual data pages.  <a href="#a52e75f1bf22a2b3553b6960799d7f6d6">More...</a><br /></td></tr>
<tr class="separator:a52e75f1bf22a2b3553b6960799d7f6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a3bb3ad1bee321b677b059cf29fbbbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a3a3bb3ad1bee321b677b059cf29fbbbf">add_to_lock_free_write_set</a> (<a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id, <a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *log_entry)</td></tr>
<tr class="memdesc:a3a3bb3ad1bee321b677b059cf29fbbbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the given log to the lock-free write set of this transaction.  <a href="#a3a3bb3ad1bee321b677b059cf29fbbbf">More...</a><br /></td></tr>
<tr class="separator:a3a3bb3ad1bee321b677b059cf29fbbbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054cf2fca2ce0e5047c817ed10ae1a80"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a054cf2fca2ce0e5047c817ed10ae1a80">remember_previous_xct_id</a> (<a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> new_id)</td></tr>
<tr class="separator:a054cf2fca2ce0e5047c817ed10ae1a80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f299489d8dd719eb055ce2ef29309b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a7f299489d8dd719eb055ce2ef29309b8">acquire_local_work_memory</a> (uint32_t size, void **out, uint32_t alignment=8)</td></tr>
<tr class="memdesc:a7f299489d8dd719eb055ce2ef29309b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a tentative work memory of the specified size from pre-allocated thread-private memory.  <a href="#a7f299489d8dd719eb055ce2ef29309b8">More...</a><br /></td></tr>
<tr class="separator:a7f299489d8dd719eb055ce2ef29309b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0b909c82e905105f4f9701082a16b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">xct::CurrentLockList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8">get_current_lock_list</a> ()</td></tr>
<tr class="separator:afc0b909c82e905105f4f9701082a16b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af667c55fca8430bd9d12bd07f8d259a4"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">xct::CurrentLockList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#af667c55fca8430bd9d12bd07f8d259a4">get_current_lock_list</a> () const </td></tr>
<tr class="separator:af667c55fca8430bd9d12bd07f8d259a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b718008691c004c92d863b8b75dbe07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">xct::RetrospectiveLockList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a8b718008691c004c92d863b8b75dbe07">get_retrospective_lock_list</a> ()</td></tr>
<tr class="separator:a8b718008691c004c92d863b8b75dbe07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148038efa6f37e2b89f057c5d5cd4cb3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a148038efa6f37e2b89f057c5d5cd4cb3">assert_related_read_write</a> () const __attribute__((always_inline))</td></tr>
<tr class="memdesc:a148038efa6f37e2b89f057c5d5cd4cb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This debug method checks whether the related_read_ and related_write_ fileds in read/write sets are consistent.  <a href="#a148038efa6f37e2b89f057c5d5cd4cb3">More...</a><br /></td></tr>
<tr class="separator:a148038efa6f37e2b89f057c5d5cd4cb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a99dca627480b5425eab53916d5918771"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1xct_1_1Xct.html#a99dca627480b5425eab53916d5918771">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;v)</td></tr>
<tr class="separator:a99dca627480b5425eab53916d5918771"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="aee285206205aa5ee1df2f044b307ab5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5f">foedus::xct::Xct::Constants</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"></a>kMaxPointerSets&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239"></a>kMaxPageVersionSets&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00060">60</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                 {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">kMaxPointerSets</a> = 1024,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">kMaxPageVersionSets</a> = 1024,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  };</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">foedus::xct::Xct::kMaxPointerSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00061">xct.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa627e50d0af2c4595204dee4b54a6f239">foedus::xct::Xct::kMaxPageVersionSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00062">xct.hpp:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a97f1e851be41dccdc730d7093c111dd2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::Xct::Xct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Engine.html">Engine</a> *&#160;</td>
          <td class="paramname"><em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a>&#160;</td>
          <td class="paramname"><em>thread_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00041">41</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="storage__options_8hpp_source.html#l00033">foedus::storage::StorageOptions::kDefaultHotThreshold</a>, <a class="el" href="xct__options_8hpp_source.html#l00052">foedus::xct::XctOptions::kDefaultHotThreshold</a>, and <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  : engine_(engine), context_(context), thread_id_(thread_id) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  id_ = XctId();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  active_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  default_rll_for_this_xct_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  enable_rll_for_this_xct_ = default_rll_for_this_xct_;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  default_hot_threshold_for_this_xct_ = <a class="code" href="structfoedus_1_1storage_1_1StorageOptions.html#aad60db937c5dc237347f2ec63b9a0146a719aa48a4b8bccc2056c05d499e9f0be">storage::StorageOptions::kDefaultHotThreshold</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  hot_threshold_for_this_xct_ = default_hot_threshold_for_this_xct_;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  default_rll_threshold_for_this_xct_ = <a class="code" href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea71e7c29b328ca66143553cd4e2a93f35">XctOptions::kDefaultHotThreshold</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  rll_threshold_for_this_xct_ = default_rll_threshold_for_this_xct_;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  sysxct_workspace_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  read_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  read_set_size_ = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  max_read_set_size_ = 0;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  write_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  write_set_size_ = 0;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  max_write_set_size_ = 0;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  lock_free_read_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  max_lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  lock_free_write_set_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  max_lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  pointer_set_size_ = 0;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  page_version_set_size_ = 0;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  isolation_level_ = <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  mcs_block_current_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  mcs_rw_async_mapping_current_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  local_work_memory_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  local_work_memory_size_ = 0;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  local_work_memory_cur_ = 0;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageOptions_html_aad60db937c5dc237347f2ec63b9a0146a719aa48a4b8bccc2056c05d499e9f0be"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageOptions.html#aad60db937c5dc237347f2ec63b9a0146a719aa48a4b8bccc2056c05d499e9f0be">foedus::storage::StorageOptions::kDefaultHotThreshold</a></div><div class="ttdef"><b>Definition:</b> <a href="storage__options_8hpp_source.html#l00033">storage_options.hpp:33</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctOptions_html_a1e874be55edde5eec583d9745a90000ea71e7c29b328ca66143553cd4e2a93f35"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctOptions.html#a1e874be55edde5eec583d9745a90000ea71e7c29b328ca66143553cd4e2a93f35">foedus::xct::XctOptions::kDefaultHotThreshold</a></div><div class="ttdef"><b>Definition:</b> <a href="xct__options_8hpp_source.html#l00052">xct_options.hpp:52</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab627791af5e42bc1a9ebcebdcfcaff46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::xct::Xct::Xct </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a7f299489d8dd719eb055ce2ef29309b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::acquire_local_work_memory </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>alignment</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a tentative work memory of the specified size from pre-allocated thread-private memory. </p>
<p>The local work memory is recycled after the current transaction. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00397">397</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00204">foedus::kErrorCodeXctNoMoreLocalWorkMemory</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00647">foedus::thread::ThreadPimpl::find_or_read_a_snapshot_page()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00687">foedus::thread::ThreadPimpl::find_or_read_snapshot_pages_batch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                                                                                   {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (size % alignment != 0) {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      size = ((size / alignment) + 1U) * alignment;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    uint64_t begin = local_work_memory_cur_;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (begin % alignment != 0) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      begin = ((begin / alignment) + 1U) * alignment;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(size + begin &gt; local_work_memory_size_)) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a7547ac278e72e330f89e9fddd4b06d7d">kErrorCodeXctNoMoreLocalWorkMemory</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    local_work_memory_cur_ = size + begin;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    *out = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(local_work_memory_) + begin;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  }</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a7547ac278e72e330f89e9fddd4b06d7d"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a7547ac278e72e330f89e9fddd4b06d7d">foedus::kErrorCodeXctNoMoreLocalWorkMemory</a></div><div class="ttdoc">0x0A09 : "XCTION : Out of local work memory for the current transaction. Adjust XctOptions::local_wor...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00204">error_code.hpp:204</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a7f299489d8dd719eb055ce2ef29309b8_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a7f299489d8dd719eb055ce2ef29309b8_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a7f299489d8dd719eb055ce2ef29309b8_icgraph" id="classfoedus_1_1xct_1_1Xct_a7f299489d8dd719eb055ce2ef29309b8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a16c6375f66e9f177c908dc1fbc132681" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="216,802,425,843"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a98de2aa47bebca5add3e0550f2c602bf" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="229,904,413,960"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#ad9a1cd82a866fd82299acc66a59c2487" title="Find the given page in snapshot cache, reading it if not found. " alt="" coords="937,750,1147,791"/>
<area shape="rect" id="node24" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="705,699,889,740"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4a95ef1bd710a66e0c24df998f881d04" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="473,819,657,860"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="1447,696,1660,738"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="1202,677,1381,733"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#af64ca224598812767abe9631f280b105" title="Simpler version of locate_record for when we are in snapshot world. " alt="" coords="1201,968,1382,1024"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#abe8cbf3d8edfb47a32d460029707aace" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_follow" alt="" coords="1205,888,1378,944"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af22fe9e661763ca3225eeedf7fa62879" title="foedus::storage::array\l::ArrayStoragePimpl::prefetch\l_pages_recurse" alt="" coords="1195,808,1388,864"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1727,739,1932,780"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1999,921,2180,977"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="2007,1001,2171,1057"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="2007,1081,2171,1137"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1988,601,2191,657"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="2000,681,2179,737"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1991,761,2187,817"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1998,841,2181,897"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1463,966,1644,1022"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1739,950,1920,1006"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1739,870,1920,926"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a4c4630d85af99ceafad404bc5c5c7eef" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::prefetch_pages_normalized\l_recurse" alt="" coords="1459,871,1647,942"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1735,642,1923,698"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="1436,804,1671,846"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#af420e19da8ee4ed731ae387932cc991e" title="Prefetch data pages in this storage. " alt="" coords="1728,804,1931,846"/>
<area shape="rect" id="node25" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="967,522,1117,563"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="1205,144,1378,200"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="1202,336,1381,392"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1467,496,1640,552"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="1209,416,1374,472"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="1209,546,1373,602"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="2003,408,2176,464"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1467,256,1640,312"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1467,176,1640,232"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="1460,45,1647,101"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1719,13,1940,69"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1743,256,1916,312"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1740,338,1919,394"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="1461,416,1646,472"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="1461,336,1646,392"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1743,474,1916,544"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1743,568,1916,610"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1ThreadPimpl.html#aac3821c478965e40c60c819a7e5a83e5" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="705,816,889,872"/>
<area shape="rect" id="node45" href="classfoedus_1_1thread_1_1Thread.html#a13d14670c512a2f2f85ff6519a28488c" title="Installs a volatile page to the given dual pointer as a copy of the snapshot page. " alt="" coords="963,896,1121,938"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#a2b375e7de4d6c9c7b222c45b271126dc" title="Batched version of follow_page_pointer with will_modify==true and tolerate_null_pointer==true. " alt="" coords="967,816,1117,872"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1Thread.html#a878c3aa228a6e8925e21a3b7b0592349" title="Batched version of find_or_read_a_snapshot_page(). " alt="" coords="485,984,645,1040"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="473,904,657,960"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="722,954,873,1010"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="953,962,1131,1018"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac525c6624f248cd869b111b7d4338b30"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::activate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga9ac5dae4b91a288e9d887f28a7124c13">IsolationLevel</a>&#160;</td>
          <td class="paramname"><em>isolation_level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Begins the transaction. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00079">79</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00096">foedus::xct::CurrentLockList::clear_entries()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00248">foedus::xct::RetrospectiveLockList::is_empty()</a>, and <a class="el" href="retrospective__lock__list_8cpp_source.html#l00445">foedus::xct::CurrentLockList::prepopulate_for_retrospective_lock_list()</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                                                               {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!active_);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    active_ = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    enable_rll_for_this_xct_ = default_rll_for_this_xct_;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    hot_threshold_for_this_xct_ = default_hot_threshold_for_this_xct_;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    rll_threshold_for_this_xct_ = default_rll_threshold_for_this_xct_;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    isolation_level_ = isolation_level;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    pointer_set_size_ = 0;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    page_version_set_size_ = 0;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    read_set_size_ = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    write_set_size_ = 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    *mcs_block_current_ = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    *mcs_rw_async_mapping_current_ = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    local_work_memory_cur_ = 0;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">clear_entries</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (!retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">is_empty</a>()) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="comment">// If we have RLL, we will highly likely lock all of them.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="comment">// So, let&#39;s make CLL entries for all of them at the beginning.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="comment">// This is both for simplicity and performance.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5">prepopulate_for_retrospective_lock_list</a>(retrospective_lock_list_);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_abb020fdb3951460f9c283d4700696ad2"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2">foedus::xct::CurrentLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00096">retrospective_lock_list.cpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a4a10e19f1d603ab47e74c605a9909fb5"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5">foedus::xct::CurrentLockList::prepopulate_for_retrospective_lock_list</a></div><div class="ttdeci">void prepopulate_for_retrospective_lock_list(const RetrospectiveLockList &amp;rll)</div><div class="ttdoc">Another batch-insert method used at the beginning of a transaction. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00445">retrospective_lock_list.cpp:445</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a6c96bb5725be6694030bd8ce88d68698"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">foedus::xct::RetrospectiveLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00248">retrospective_lock_list.hpp:248</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_cgraph" id="classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2" title="foedus::xct::CurrentLock\lList::clear_entries" alt="" coords="217,5,381,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="444,31,616,72"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1CurrentLockList.html#a4a10e19f1d603ab47e74c605a9909fb5" title="Another batch&#45;insert method used at the beginning of a transaction. " alt="" coords="217,154,381,210"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1397c6847c1ee46ba9c09457b4f5866e" title="foedus::xct::Retrospective\lLockList::assert_sorted" alt="" coords="444,96,616,137"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="448,161,612,203"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="444,227,616,268"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#afeae5ce72d1c324ecc32dce36459340a" title="foedus::xct::Retrospective\lLockList::get_last_active_entry" alt="" coords="429,292,631,333"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29" title="foedus::xct::CurrentLock\lList::is_empty" alt="" coords="448,357,612,399"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a14d555cbd9ddee31c68c9c81ff84c129" title="foedus::xct::Retrospective\lLockList::assert_sorted_impl" alt="" coords="679,96,868,137"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="933,96,1095,137"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="1191,8,1341,49"/>
<area shape="rect" id="node9" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1183,74,1349,101"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1185,125,1347,167"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1420,60,1613,101"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1436,125,1597,167"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="691,161,855,203"/>
<area shape="rect" id="node15" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="916,165,1112,207"/>
<area shape="rect" id="node16" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1160,195,1372,236"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="1429,191,1605,247"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_icgraph" id="classfoedus_1_1xct_1_1Xct_ac525c6624f248cd869b111b7d4338b30_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="217,5,412,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="460,5,623,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa23025809d9c2fdff744f98f78c3882a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_related_write_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> *&#160;</td>
          <td class="paramname"><em>related_read_set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>tid_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>payload_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *&#160;</td>
          <td class="paramname"><em>log_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a write-set related to an existing read-set. </p>
<p>This is typically invoked after <a class="el" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. ">on_record_read()</a>, which returns the read-set address. </p><dl class="section note"><dt>Note</dt><dd>so far you can't reigster more than one write-set to a read-set. but, registering related read/write sets are just for performance. correctness is guaranteed even if they are not registered as "related". </dd></dl>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00506">506</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00444">add_to_write_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="log__type__invoke_8hpp_source.html#l00111">foedus::log::invoke_assert_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="xct__access_8hpp_source.html#l00102">foedus::xct::RecordXctAccess::owner_id_address_</a>, <a class="el" href="xct__access_8hpp_source.html#l00178">foedus::xct::WriteXctAccess::related_read_</a>, <a class="el" href="xct__access_8hpp_source.html#l00153">foedus::xct::ReadXctAccess::related_write_</a>, and <a class="el" href="xct__access_8hpp_source.html#l00085">foedus::xct::RecordXctAccess::storage_id_</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00645">foedus::storage::masstree::MasstreeStoragePimpl::register_record_write_log()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00260">foedus::storage::hash::HashStoragePimpl::register_record_write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                               {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(related_read_set);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tid_address);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keyword">auto</span>* write = write_set_ + write_set_size_;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keyword">auto</span> storage_id = related_read_set-&gt;storage_id_;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="keyword">auto</span>* owner_id_address = related_read_set-&gt;owner_id_address_;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">add_to_write_set</a>(storage_id, owner_id_address, payload_address, log_entry));</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  related_read_set-&gt;related_write_ = write;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  write-&gt;related_read_ = related_read_set;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(related_read_set-&gt;related_write_-&gt;related_read_ == related_read_set);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;related_read_-&gt;related_write_ == write);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;log_entry_ == log_entry);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;owner_id_address_ == owner_id_address);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set_size_ &gt; 0);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="ttc" id="group__LOGTYPE_html_gad2d33090f44d00949a05c245e5ff1046"><div class="ttname"><a href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">foedus::log::invoke_assert_valid</a></div><div class="ttdeci">void invoke_assert_valid(void *log_buffer)</div><div class="ttdoc">Invokes the assertion logic of each log type. </div><div class="ttdef"><b>Definition:</b> <a href="log__type__invoke_8hpp_source.html#l00111">log_type_invoke.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a7dad4e0e5a6770ee941bd365410f9b6a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">foedus::xct::Xct::add_to_write_set</a></div><div class="ttdeci">ErrorCode add_to_write_set(storage::StorageId storage_id, RwLockableXctId *owner_id_address, char *payload_address, log::RecordLogType *log_entry)</div><div class="ttdoc">Add the given record to the write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00444">xct.cpp:444</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_cgraph" id="classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="195,272,336,313"/>
<area shape="rect" id="node15" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="420,337,549,379"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="399,191,571,247"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="397,272,572,313"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="384,125,585,167"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="655,263,809,319"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1144,123,1317,164"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1401,333,1550,375"/>
<area shape="rect" id="node8" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="879,269,1081,311"/>
<area shape="rect" id="node14" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="897,437,1063,463"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1153,269,1308,311"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1129,189,1332,245"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1398,199,1553,240"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1395,99,1556,140"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1380,268,1571,309"/>
<area shape="rect" id="node16" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="655,344,809,385"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="633,128,831,169"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="659,63,805,104"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="899,63,1061,104"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1134,5,1327,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_icgraph" id="classfoedus_1_1xct_1_1Xct_aa23025809d9c2fdff744f98f78c3882a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="202,579,377,635"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aeea83aff996263bc8e9b3623fbe305a1" title="Used in the following methods. " alt="" coords="195,1265,384,1321"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="447,90,620,146"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="447,298,620,354"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="447,481,620,537"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="447,678,620,734"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="447,991,620,1047"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#af263fb1494c7ac6a5dbfd28b926ede3b" title="foedus::storage::masstree\l::MasstreeCursor::delete_record" alt="" coords="697,5,905,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="976,97,1191,139"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="715,122,888,178"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="686,203,917,244"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="683,268,920,309"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="704,334,899,390"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="695,415,907,456"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="715,481,888,537"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#ab8b1919cb195dd063be409f772b36630" title="foedus::storage::masstree\l::MasstreeCursor::overwrite_record" alt="" coords="690,561,913,603"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="968,653,1199,695"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="708,678,895,734"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a496370a645284f8578875529c6eacb0f" title="foedus::storage::masstree\l::MasstreeCursor::overwrite\l_record_primitive" alt="" coords="711,758,891,814"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="708,838,895,894"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="707,918,896,974"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="693,999,909,1040"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="715,1065,888,1121"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="443,1145,624,1201"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="432,1225,635,1281"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="444,1305,623,1361"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="435,1385,631,1441"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="442,1505,625,1561"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="727,1145,875,1201"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="716,1225,887,1281"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="728,1305,875,1361"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="720,1385,883,1441"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="703,1465,899,1521"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1002,1465,1165,1521"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="727,1545,876,1601"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a52e75f1bf22a2b3553b6960799d7f6d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_lock_free_read_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&#160;</td>
          <td class="paramname"><em>observed_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>owner_id_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the given record to the special read-set that is not placed in usual data pages. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00532">532</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00196">foedus::kErrorCodeXctReadSetOverflow</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, <a class="el" href="xct__access_8hpp_source.html#l00204">foedus::xct::LockFreeReadXctAccess::observed_owner_id_</a>, <a class="el" href="xct__access_8hpp_source.html#l00210">foedus::xct::LockFreeReadXctAccess::owner_id_address_</a>, <a class="el" href="xct__access_8hpp_source.html#l00207">foedus::xct::LockFreeReadXctAccess::storage_id_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00213">foedus::storage::sequential::SequentialStorageControlBlock::optimistic_read_truncate_epoch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                     {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(lock_free_read_set_size_ &gt;= max_lock_free_read_set_size_)) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">kErrorCodeXctReadSetOverflow</a>;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  lock_free_read_set_[lock_free_read_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a4dbed12a2577adcb53657014bae68229">storage_id_</a> = storage_id;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  lock_free_read_set_[lock_free_read_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a1383a6cf8d494678e4a577dbe4c8408e">observed_owner_id_</a> = observed_owner_id;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  lock_free_read_set_[lock_free_read_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a5e4a0a2fe6d9c03a9e18ceacb5ee2547">owner_id_address_</a> = owner_id_address;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  ++lock_free_read_set_size_;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html_a5e4a0a2fe6d9c03a9e18ceacb5ee2547"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a5e4a0a2fe6d9c03a9e18ceacb5ee2547">foedus::xct::LockFreeReadXctAccess::owner_id_address_</a></div><div class="ttdeci">RwLockableXctId * owner_id_address_</div><div class="ttdoc">Pointer to the TID we protect against. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00210">xct_access.hpp:210</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">foedus::kErrorCodeXctReadSetOverflow</a></div><div class="ttdoc">0x0A01 : "XCTION : Too large read-set. Check the config of XctOptions" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00196">error_code.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html_a1383a6cf8d494678e4a577dbe4c8408e"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a1383a6cf8d494678e4a577dbe4c8408e">foedus::xct::LockFreeReadXctAccess::observed_owner_id_</a></div><div class="ttdeci">XctId observed_owner_id_</div><div class="ttdoc">XID value we observed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00204">xct_access.hpp:204</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeReadXctAccess_html_a4dbed12a2577adcb53657014bae68229"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html#a4dbed12a2577adcb53657014bae68229">foedus::xct::LockFreeReadXctAccess::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdoc">The storage we accessed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00207">xct_access.hpp:207</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a52e75f1bf22a2b3553b6960799d7f6d6_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a52e75f1bf22a2b3553b6960799d7f6d6_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a52e75f1bf22a2b3553b6960799d7f6d6_icgraph" id="classfoedus_1_1xct_1_1Xct_a52e75f1bf22a2b3553b6960799d7f6d6_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a8b82d79a7b8aab753945617abbc40b7f" title="foedus::storage::sequential\l::SequentialStorageControlBlock\l::optimistic_read_truncate_epoch" alt="" coords="209,5,424,61"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3a3bb3ad1bee321b677b059cf29fbbbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_lock_free_write_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *&#160;</td>
          <td class="paramname"><em>log_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the given log to the lock-free write set of this transaction. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00551">551</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="log__type__invoke_8hpp_source.html#l00111">foedus::log::invoke_assert_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00197">foedus::kErrorCodeXctWriteSetOverflow</a>, <a class="el" href="xct__access_8hpp_source.html#l00235">foedus::xct::LockFreeWriteXctAccess::log_entry_</a>, <a class="el" href="xct__access_8hpp_source.html#l00232">foedus::xct::LockFreeWriteXctAccess::storage_id_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00056">foedus::storage::sequential::SequentialStorage::append_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                               {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log_entry);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(lock_free_write_set_size_ &gt;= max_lock_free_write_set_size_)) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">kErrorCodeXctWriteSetOverflow</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  lock_free_write_set_[lock_free_write_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#a3fc6550ec39eca7192cee417f02ced60">storage_id_</a> = storage_id;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  lock_free_write_set_[lock_free_write_set_size_].<a class="code" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#ab090fd78276df1811cd70b77eb39f052">log_entry_</a> = log_entry;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  ++lock_free_write_set_size_;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div>
<div class="ttc" id="group__LOGTYPE_html_gad2d33090f44d00949a05c245e5ff1046"><div class="ttname"><a href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">foedus::log::invoke_assert_valid</a></div><div class="ttdeci">void invoke_assert_valid(void *log_buffer)</div><div class="ttdoc">Invokes the assertion logic of each log type. </div><div class="ttdef"><b>Definition:</b> <a href="log__type__invoke_8hpp_source.html#l00111">log_type_invoke.hpp:111</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">foedus::kErrorCodeXctWriteSetOverflow</a></div><div class="ttdoc">0x0A02 : "XCTION : Too large write-set. Check the config of XctOptions" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00197">error_code.hpp:197</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeWriteXctAccess_html_ab090fd78276df1811cd70b77eb39f052"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#ab090fd78276df1811cd70b77eb39f052">foedus::xct::LockFreeWriteXctAccess::log_entry_</a></div><div class="ttdeci">log::RecordLogType * log_entry_</div><div class="ttdoc">Pointer to the log entry in private log buffer for this write opereation. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00235">xct_access.hpp:235</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockFreeWriteXctAccess_html_a3fc6550ec39eca7192cee417f02ced60"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html#a3fc6550ec39eca7192cee417f02ced60">foedus::xct::LockFreeWriteXctAccess::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdoc">The storage we accessed. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00232">xct_access.hpp:232</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_cgraph" id="classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_cgraph">
<area shape="rect" id="node2" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="212,5,341,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="389,5,544,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_icgraph" id="classfoedus_1_1xct_1_1Xct_a3a3bb3ad1bee321b677b059cf29fbbbf_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ab8696b7ccf07c7b8e1efb038d8cd83c2" title="Append one record to this sequential storage. " alt="" coords="212,5,441,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a68b92830ccd52b310445b41bfef06fd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_page_version_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1PageVersion.html">storage::PageVersion</a> *&#160;</td>
          <td class="paramname"><em>version_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1PageVersionStatus.html">storage::PageVersionStatus</a>&#160;</td>
          <td class="paramname"><em>observed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the given page version to the page version set of this transaction. </p>
<p>This is similar to pointer set. The difference is that this remembers the PageVersion value we observed when we accessed the page. This can capture many more concurrency issues in the page because PageVersion contains many flags and counters. However, <a class="el" href="structfoedus_1_1xct_1_1PageVersionAccess.html" title="Represents a record of reading a page during a transaction. ">PageVersionAccess</a> can't be used if the page itself might be swapped.</p>
<p>Both <a class="el" href="structfoedus_1_1xct_1_1PointerAccess.html" title="Represents a record of following a page pointer during a transaction. ">PointerAccess</a> and <a class="el" href="structfoedus_1_1xct_1_1PageVersionAccess.html" title="Represents a record of reading a page during a transaction. ">PageVersionAccess</a> can be considered as "node set" in [TU2013], but for a little bit different purpose. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00242">242</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="xct__access_8hpp_source.html#l00076">foedus::xct::PageVersionAccess::address_</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00201">foedus::kErrorCodeXctPageVersionSetOverflow</a>, <a class="el" href="xct_8hpp_source.html#l00061">kMaxPointerSets</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, <a class="el" href="xct__access_8hpp_source.html#l00079">foedus::xct::PageVersionAccess::observed_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00283">foedus::storage::masstree::MasstreeStoragePimpl::locate_record()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00936">foedus::storage::hash::HashStoragePimpl::locate_record()</a>, and <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00336">foedus::storage::masstree::MasstreeStoragePimpl::locate_record_normalized()</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                                     {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(version_address);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(page_version_set_size_ &gt;= <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">kMaxPointerSets</a>)) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a85287d224b244300a440aaf23971067e">kErrorCodeXctPageVersionSetOverflow</a>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  page_version_set_[page_version_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PageVersionAccess.html#a82120b2cc92778703d51a235b993278b">address_</a> = version_address;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  page_version_set_[page_version_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PageVersionAccess.html#ae2df4e0519ed710eb7ff135cb69616d2">observed_</a> = observed;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  ++page_version_set_size_;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">foedus::xct::Xct::kMaxPointerSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00061">xct.hpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PageVersionAccess_html_a82120b2cc92778703d51a235b993278b"><div class="ttname"><a href="structfoedus_1_1xct_1_1PageVersionAccess.html#a82120b2cc92778703d51a235b993278b">foedus::xct::PageVersionAccess::address_</a></div><div class="ttdeci">const storage::PageVersion * address_</div><div class="ttdoc">Address to the page version. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00076">xct_access.hpp:76</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PageVersionAccess_html_ae2df4e0519ed710eb7ff135cb69616d2"><div class="ttname"><a href="structfoedus_1_1xct_1_1PageVersionAccess.html#ae2df4e0519ed710eb7ff135cb69616d2">foedus::xct::PageVersionAccess::observed_</a></div><div class="ttdeci">storage::PageVersionStatus observed_</div><div class="ttdoc">Value of the page version as of the access. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00079">xct_access.hpp:79</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a85287d224b244300a440aaf23971067e"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a85287d224b244300a440aaf23971067e">foedus::kErrorCodeXctPageVersionSetOverflow</a></div><div class="ttdoc">0x0A06 : "XCTION : Too large page-version set. Consider using snapshot isolation." ...</div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00201">error_code.hpp:201</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a68b92830ccd52b310445b41bfef06fd7_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a68b92830ccd52b310445b41bfef06fd7_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a68b92830ccd52b310445b41bfef06fd7_icgraph" id="classfoedus_1_1xct_1_1Xct_a68b92830ccd52b310445b41bfef06fd7_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="440,199,613,255"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="200,687,381,743"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="201,359,380,415"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="683,9,898,50"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="691,74,890,115"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="704,367,877,423"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="704,140,877,196"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="672,221,909,262"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="675,447,906,489"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="697,287,884,343"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="436,687,617,743"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="436,767,617,823"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="700,513,881,569"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="709,593,873,649"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="709,673,873,729"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="689,753,892,809"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="701,833,880,889"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="693,913,889,969"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="699,1033,882,1089"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="985,461,1133,517"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="971,542,1146,583"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="957,607,1160,649"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="977,673,1141,729"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1208,673,1383,729"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="973,753,1144,809"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="985,833,1132,889"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="977,913,1140,969"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="961,993,1157,1049"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1214,993,1377,1049"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="984,1073,1133,1129"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="440,5,613,61"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="440,101,613,157"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="440,279,613,335"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="432,359,621,415"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="429,439,624,495"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="433,519,620,575"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="432,599,621,655"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adfd2125c9cc252494693f65719ed53b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_pointer_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>observed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the given page pointer to the pointer set of this transaction. </p>
<p>You must call this method in the following cases; </p><ul>
<li>When following a volatile pointer that might be later swapped with the RCU protocol. </li>
<li>When following a snapshot pointer except it is under a snapshot page.</li>
</ul>
<p>To clarify, the first case does not apply to storage types that don't swap volatile pointers. So far, only <a class="el" href="group__MASSTREE.html">Masstree Storage</a> has such a swapping for root pages. All other storage types thus don't have to take pointer sets for this.</p>
<p>The second case doesn't apply to snapshot pointers once we follow a snapshot pointer in the tree because everything is assured to be stable once we follow a snapshot pointer. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00198">198</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="xct__access_8hpp_source.html#l00052">foedus::xct::PointerAccess::address_</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00202">foedus::kErrorCodeXctPointerSetOverflow</a>, <a class="el" href="xct_8hpp_source.html#l00061">kMaxPointerSets</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, <a class="el" href="xct__access_8hpp_source.html#l00055">foedus::xct::PointerAccess::observed_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00411">foedus::thread::ThreadPimpl::follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">foedus::thread::ThreadPimpl::follow_page_pointers_for_read_batch()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00842">foedus::storage::hash::HashStoragePimpl::locate_bin()</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                       {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer_address);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// TASK(Hideaki) even though pointer set should be small, we don&#39;t want sequential search</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="comment">// everytime. but insertion sort requires shifting. mmm.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pointer_set_size_; ++i) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (pointer_set_[i].address_ == pointer_address) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      pointer_set_[i].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">observed_</a> = observed;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(pointer_set_size_ &gt;= <a class="code" href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">kMaxPointerSets</a>)) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae3e777ca7250fb016691a1eaa40cb2b4">kErrorCodeXctPointerSetOverflow</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  }</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="comment">// no need for fence. the observed pointer itself is the only data to verify</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  pointer_set_[pointer_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#ab0a7cedbcc3bbb16450cafa8d6867afa">address_</a> = pointer_address;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  pointer_set_[pointer_set_size_].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">observed_</a> = observed;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  ++pointer_set_size_;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#aee285206205aa5ee1df2f044b307ab5fa596dbd812e6fc3de4f332edbf917903a">foedus::xct::Xct::kMaxPointerSets</a></div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00061">xct.hpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PointerAccess_html_ab0a7cedbcc3bbb16450cafa8d6867afa"><div class="ttname"><a href="structfoedus_1_1xct_1_1PointerAccess.html#ab0a7cedbcc3bbb16450cafa8d6867afa">foedus::xct::PointerAccess::address_</a></div><div class="ttdeci">const storage::VolatilePagePointer * address_</div><div class="ttdoc">Address of the volatile pointer. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00052">xct_access.hpp:52</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1PointerAccess_html_a10634af817a6e33b8f745cd726b7dee1"><div class="ttname"><a href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">foedus::xct::PointerAccess::observed_</a></div><div class="ttdeci">storage::VolatilePagePointer observed_</div><div class="ttdoc">Value of the volatile pointer as of the access. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00055">xct_access.hpp:55</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae3e777ca7250fb016691a1eaa40cb2b4"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae3e777ca7250fb016691a1eaa40cb2b4">foedus::kErrorCodeXctPointerSetOverflow</a></div><div class="ttdoc">0x0A07 : "XCTION : Too large pointer-set. Consider using snapshot isolation." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00202">error_code.hpp:202</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_adfd2125c9cc252494693f65719ed53b3_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_adfd2125c9cc252494693f65719ed53b3_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_adfd2125c9cc252494693f65719ed53b3_icgraph" id="classfoedus_1_1xct_1_1Xct_adfd2125c9cc252494693f65719ed53b3_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="195,799,379,841"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1143,993,1348,1034"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="195,1051,379,1107"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="427,646,577,687"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="628,155,801,211"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="863,547,1076,589"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="625,540,804,596"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="625,671,804,727"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="883,467,1056,523"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="632,773,797,829"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="633,912,797,968"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1419,572,1592,628"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="883,267,1056,323"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="883,187,1056,243"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="876,5,1063,61"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1135,31,1356,87"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1159,187,1332,243"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1156,427,1335,483"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1159,267,1332,323"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1153,347,1337,403"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1415,805,1596,861"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1423,899,1587,955"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1423,985,1587,1041"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1404,1069,1607,1125"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1416,1151,1595,1207"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1407,1232,1603,1288"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1414,712,1597,768"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1682,780,1830,836"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1669,861,1843,902"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1655,926,1857,967"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1674,992,1838,1048"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac8f3eb87098b114b9d4f8b151fee17c1" title="If you have already computed HashCombo, use this. " alt="" coords="1905,992,2080,1048"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1671,1072,1841,1128"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1683,1152,1829,1208"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1675,1232,1837,1288"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1658,1312,1854,1368"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1681,700,1831,756"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="877,693,1062,749"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="877,613,1062,669"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1159,638,1332,709"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1159,733,1332,774"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1151,799,1339,855"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1159,507,1332,563"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a86a1e1fb54d44f15bc17c3f622f9f279" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read_batch" alt="" coords="877,1051,1062,1107"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a77af2675acbbf1c831925b3a2c972aa6" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_write_batch" alt="" coords="877,773,1062,829"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#adbf75cfe4ac8c4c5e1e8a32342b66d00" title="defined in array_storage_prefetch.cpp " alt="" coords="852,854,1087,895"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac612c67d7e9e1a68dcccce98648cad0c" title="foedus::storage::array\l::ArrayStoragePimpl::verify\l_single_thread" alt="" coords="881,920,1057,976"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="427,1051,577,1107"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="625,1051,804,1107"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad14df45e5685d6725622e28ed45f9726"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_read_and_write_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&#160;</td>
          <td class="paramname"><em>observed_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>owner_id_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>payload_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *&#160;</td>
          <td class="paramname"><em>log_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a pair of read and write set of this transaction. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00474">474</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00395">add_to_read_set()</a>, <a class="el" href="xct_8cpp_source.html#l00444">add_to_write_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="log__type__invoke_8hpp_source.html#l00111">foedus::log::invoke_assert_valid()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, and <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>.</p>
<div class="fragment"><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                               {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(observed_owner_id.is_valid());</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keyword">auto</span>* write = write_set_ + write_set_size_;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">add_to_write_set</a>(storage_id, owner_id_address, payload_address, log_entry));</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="keyword">auto</span>* read = read_set_ + read_set_size_;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  ReadXctAccess* dummy;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a>(</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    storage_id,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    observed_owner_id,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    write-&gt;owner_lock_id_,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    owner_id_address,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    &amp;dummy));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read-&gt;owner_id_address_ == owner_id_address);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  read-&gt;related_write_ = write;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  write-&gt;related_read_ = read;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read-&gt;related_write_-&gt;related_read_ == read);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;related_read_-&gt;related_write_ == write);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;log_entry_ == log_entry);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;owner_id_address_ == owner_id_address);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write_set_size_ &gt; 0);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a67553e6e570cdc0b371992db058cf7cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">foedus::xct::Xct::add_to_read_set</a></div><div class="ttdeci">ErrorCode add_to_read_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address, ReadXctAccess **read_set_address)</div><div class="ttdoc">Add the given record to the read set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00395">xct.cpp:395</a></div></div>
<div class="ttc" id="group__LOGTYPE_html_gad2d33090f44d00949a05c245e5ff1046"><div class="ttname"><a href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">foedus::log::invoke_assert_valid</a></div><div class="ttdeci">void invoke_assert_valid(void *log_buffer)</div><div class="ttdoc">Invokes the assertion logic of each log type. </div><div class="ttdef"><b>Definition:</b> <a href="log__type__invoke_8hpp_source.html#l00111">log_type_invoke.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a7dad4e0e5a6770ee941bd365410f9b6a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">foedus::xct::Xct::add_to_write_set</a></div><div class="ttdeci">ErrorCode add_to_write_set(storage::StorageId storage_id, RwLockableXctId *owner_id_address, char *payload_address, log::RecordLogType *log_entry)</div><div class="ttdoc">Add the given record to the write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00444">xct.cpp:444</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ad14df45e5685d6725622e28ed45f9726_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ad14df45e5685d6725622e28ed45f9726_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ad14df45e5685d6725622e28ed45f9726_cgraph" id="classfoedus_1_1xct_1_1Xct_ad14df45e5685d6725622e28ed45f9726_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="212,84,353,125"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="212,223,353,264"/>
<area shape="rect" id="node19" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="437,288,567,329"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="221,347,344,388"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="416,77,588,133"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="677,53,822,95"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="916,53,1079,95"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1151,5,1345,47"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1412,93,1573,135"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="415,223,589,264"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="401,157,603,199"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="672,215,827,271"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1161,123,1335,164"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1418,327,1567,368"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="896,252,1099,293"/>
<area shape="rect" id="node18" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="915,201,1080,227"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1171,188,1325,229"/>
<area shape="rect" id="node17" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1147,254,1349,310"/>
<area shape="rect" id="node15" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1415,257,1570,299"/>
<area shape="rect" id="node16" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1397,188,1588,229"/>
<area shape="rect" id="node20" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="672,296,827,337"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="651,149,848,191"/>
<area shape="rect" id="node24" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="441,353,563,395"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a67553e6e570cdc0b371992db058cf7cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_read_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&#160;</td>
          <td class="paramname"><em>observed_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>owner_id_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> **&#160;</td>
          <td class="paramname"><em>read_set_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the given record to the read set of this transaction. </p>
<p>You must call this method <b>BEFORE</b> reading the data, otherwise it violates the commit protocol. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00395">395</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="retrospective__lock__list_8hpp_source.html#l00258">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver()</a>, and <a class="el" href="xct__id_8hpp_source.html#l01226">foedus::xct::xct_id_to_universal_lock_id()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00474">add_to_read_and_write_set()</a>, and <a class="el" href="xct_8cpp_source.html#l00258">on_record_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                    {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> owner_lock_id = <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a>(</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    storage_id,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    observed_owner_id,</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    owner_lock_id,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    owner_id_address,</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    read_set_address);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a67553e6e570cdc0b371992db058cf7cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">foedus::xct::Xct::add_to_read_set</a></div><div class="ttdeci">ErrorCode add_to_read_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address, ReadXctAccess **read_set_address)</div><div class="ttdoc">Add the given record to the read set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00395">xct.cpp:395</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ae36b3307af22f430a8f11765e3e57748"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">foedus::xct::xct_id_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId xct_id_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, RwLockableXctId *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01226">xct_id.hpp:1226</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a1ff8ccbccdede750fb5a18b4da505ad9"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_volatile_page_resolver() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00258">retrospective_lock_list.hpp:258</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_cgraph" id="classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="195,5,367,61"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="208,86,353,127"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="415,86,577,127"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="625,53,819,94"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="641,118,803,159"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_icgraph" id="classfoedus_1_1xct_1_1Xct_a67553e6e570cdc0b371992db058cf7cb_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#ad14df45e5685d6725622e28ed45f9726" title="Add a pair of read and write set of this transaction. " alt="" coords="195,333,353,375"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="207,399,341,440"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="436,5,571,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="421,71,586,127"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="421,151,586,207"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="421,231,586,287"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="421,311,586,367"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="401,391,605,447"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="421,471,586,527"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="421,551,586,607"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="421,631,586,687"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="415,711,592,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="415,1111,592,1167"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="658,79,833,120"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="658,151,833,207"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="658,231,833,287"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="658,311,833,367"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="660,391,831,447"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="658,471,833,527"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="658,551,833,607"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="658,631,833,687"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="655,711,836,767"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="903,631,1084,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="903,711,1084,767"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1177,551,1359,607"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1186,631,1350,687"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1186,711,1350,767"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="907,951,1080,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="656,1111,835,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="659,1425,832,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="653,1563,837,1619"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1161,799,1375,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1169,864,1367,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1181,1157,1355,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1181,930,1355,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1149,1011,1387,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1153,1257,1383,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1175,1077,1361,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="907,791,1080,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="907,871,1080,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="907,1031,1080,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="899,1111,1088,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="896,1191,1091,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="900,1271,1087,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="899,1351,1088,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="887,1432,1099,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="885,1497,1101,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="907,1563,1080,1619"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="907,1643,1080,1699"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1fd2a90acadfa8e01d93187ee10a55b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_read_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&#160;</td>
          <td class="paramname"><em>observed_owner_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>owner_lock_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>owner_id_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> **&#160;</td>
          <td class="paramname"><em>read_set_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this in case you already have owner_lock_id. </p>
<p>Slightly faster. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00410">410</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00428">foedus::storage::assert_within_valid_volatile_page()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00258">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver()</a>, <a class="el" href="xct__id_8hpp_source.html#l01038">foedus::xct::XctId::is_being_written()</a>, <a class="el" href="xct__id_8hpp_source.html#l01042">foedus::xct::XctId::is_next_layer()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00196">foedus::kErrorCodeXctReadSetOverflow</a>, <a class="el" href="xct__access_8hpp_source.html#l00096">foedus::xct::RecordXctAccess::ordinal_</a>, <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>, and <a class="el" href="xct__id_8hpp_source.html#l01226">foedus::xct::xct_id_to_universal_lock_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                    {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_lock_id == <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(resolver, owner_id_address));</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_id_address);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_owner_id.is_being_written());</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read_set_address);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(read_set_size_ &gt;= max_read_set_size_)) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">kErrorCodeXctReadSetOverflow</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="comment">// if the next-layer bit is ON, the record is not logically a record, so why we are adding</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// it to read-set? we should have already either aborted or retried in this case.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_owner_id.is_next_layer());</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  ReadXctAccess* entry = read_set_ + read_set_size_;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  *read_set_address = entry;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  entry-&gt;ordinal_ = read_set_size_;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  entry-&gt;storage_id_ = storage_id;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  entry-&gt;set_owner_id_and_lock_id(owner_id_address, owner_lock_id);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  entry-&gt;observed_owner_id_ = observed_owner_id;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  entry-&gt;related_write_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  ++read_set_size_;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a8eda47a621b08bb388fe82359fa32c14">foedus::kErrorCodeXctReadSetOverflow</a></div><div class="ttdoc">0x0A01 : "XCTION : Too large read-set. Check the config of XctOptions" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00196">error_code.hpp:196</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ae36b3307af22f430a8f11765e3e57748"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">foedus::xct::xct_id_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId xct_id_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, RwLockableXctId *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01226">xct_id.hpp:1226</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a263602e0a73eedbe5f32128635106e17"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">foedus::storage::assert_within_valid_volatile_page</a></div><div class="ttdeci">void assert_within_valid_volatile_page(const memory::GlobalVolatilePageResolver &amp;resolver, const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00428">page.hpp:428</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a1ff8ccbccdede750fb5a18b4da505ad9"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_volatile_page_resolver() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00258">retrospective_lock_list.hpp:258</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a1fd2a90acadfa8e01d93187ee10a55b2_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a1fd2a90acadfa8e01d93187ee10a55b2_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a1fd2a90acadfa8e01d93187ee10a55b2_cgraph" id="classfoedus_1_1xct_1_1Xct_a1fd2a90acadfa8e01d93187ee10a55b2_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="195,172,369,214"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="196,337,368,393"/>
<area shape="rect" id="node14" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="221,418,343,459"/>
<area shape="rect" id="node15" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="221,483,343,524"/>
<area shape="rect" id="node16" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="209,271,355,312"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="421,100,576,156"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="893,48,1067,90"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1150,107,1299,148"/>
<area shape="rect" id="node6" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="628,107,831,148"/>
<area shape="rect" id="node12" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="647,173,812,200"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="903,246,1057,287"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="879,165,1081,221"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1147,172,1302,214"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1144,304,1305,346"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1129,239,1320,280"/>
<area shape="rect" id="node17" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="417,304,580,346"/>
<area shape="rect" id="node18" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="633,363,826,404"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7dad4e0e5a6770ee941bd365410f9b6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_write_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>owner_id_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>payload_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *&#160;</td>
          <td class="paramname"><em>log_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add the given record to the write set of this transaction. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00444">444</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00428">foedus::storage::assert_within_valid_volatile_page()</a>, <a class="el" href="cxx11_8hpp_source.html#l00132">CXX11_NULLPTR</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00258">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver()</a>, <a class="el" href="log__type__invoke_8hpp_source.html#l00111">foedus::log::invoke_assert_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00197">foedus::kErrorCodeXctWriteSetOverflow</a>, <a class="el" href="xct__access_8hpp_source.html#l00175">foedus::xct::WriteXctAccess::log_entry_</a>, <a class="el" href="xct__access_8hpp_source.html#l00096">foedus::xct::RecordXctAccess::ordinal_</a>, <a class="el" href="xct__access_8hpp_source.html#l00172">foedus::xct::WriteXctAccess::payload_address_</a>, <a class="el" href="xct__access_8hpp_source.html#l00178">foedus::xct::WriteXctAccess::related_read_</a>, <a class="el" href="xct__access_8cpp_source.html#l00093">foedus::xct::RecordXctAccess::set_owner_id_resolve_lock_id()</a>, <a class="el" href="xct__access_8hpp_source.html#l00085">foedus::xct::RecordXctAccess::storage_id_</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00506">add_related_write_set()</a>, <a class="el" href="xct_8cpp_source.html#l00474">add_to_read_and_write_set()</a>, <a class="el" href="xct_8hpp_source.html#l00354">add_to_write_set()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00486">foedus::storage::array::ArrayStoragePimpl::increment_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00512">foedus::storage::array::ArrayStoragePimpl::increment_record_oneshot()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00449">foedus::storage::array::ArrayStoragePimpl::overwrite_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00468">foedus::storage::array::ArrayStoragePimpl::overwrite_record_primitive()</a>, <a class="el" href="masstree__storage__pimpl_8cpp_source.html#l00645">foedus::storage::masstree::MasstreeStoragePimpl::register_record_write_log()</a>, and <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00260">foedus::storage::hash::HashStoragePimpl::register_record_write_log()</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                               {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(owner_id_address);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(payload_address);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(log_entry);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">get_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, owner_id_address);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <a class="code" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">log::invoke_assert_valid</a>(log_entry);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(write_set_size_ &gt;= max_write_set_size_)) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">kErrorCodeXctWriteSetOverflow</a>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  WriteXctAccess* write = write_set_ + write_set_size_;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  write-&gt;ordinal_ = write_set_size_;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  write-&gt;payload_address_ = payload_address;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  write-&gt;log_entry_ = log_entry;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  write-&gt;storage_id_ = storage_id;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  write-&gt;set_owner_id_resolve_lock_id(resolver, owner_id_address);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  write-&gt;related_read_ = <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  ++write_set_size_;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="group__LOGTYPE_html_gad2d33090f44d00949a05c245e5ff1046"><div class="ttname"><a href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046">foedus::log::invoke_assert_valid</a></div><div class="ttdeci">void invoke_assert_valid(void *log_buffer)</div><div class="ttdoc">Invokes the assertion logic of each log type. </div><div class="ttdef"><b>Definition:</b> <a href="log__type__invoke_8hpp_source.html#l00111">log_type_invoke.hpp:111</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a263602e0a73eedbe5f32128635106e17"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">foedus::storage::assert_within_valid_volatile_page</a></div><div class="ttdeci">void assert_within_valid_volatile_page(const memory::GlobalVolatilePageResolver &amp;resolver, const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00428">page.hpp:428</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56aac1c24bb129b8311c26721602fa95ad8">foedus::kErrorCodeXctWriteSetOverflow</a></div><div class="ttdoc">0x0A02 : "XCTION : Too large write-set. Check the config of XctOptions" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00197">error_code.hpp:197</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a1ff8ccbccdede750fb5a18b4da505ad9"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9">foedus::xct::RetrospectiveLockList::get_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_volatile_page_resolver() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00258">retrospective_lock_list.hpp:258</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_cgraph" id="classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="208,163,383,204"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="209,331,381,387"/>
<area shape="rect" id="node14" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="231,412,360,453"/>
<area shape="rect" id="node16" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="195,265,396,307"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="465,82,620,138"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="955,39,1128,80"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1211,97,1361,139"/>
<area shape="rect" id="node6" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="689,148,892,189"/>
<area shape="rect" id="node12" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="708,97,873,123"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="964,236,1119,277"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="940,155,1143,211"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1209,167,1363,208"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1205,331,1367,372"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1191,236,1381,277"/>
<area shape="rect" id="node15" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="465,412,620,453"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="444,331,641,372"/>
<area shape="rect" id="node18" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="470,265,615,307"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="709,301,872,343"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="945,301,1138,343"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_icgraph" id="classfoedus_1_1xct_1_1Xct_a7dad4e0e5a6770ee941bd365410f9b6a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#aa23025809d9c2fdff744f98f78c3882a" title="Registers a write&#45;set related to an existing read&#45;set. " alt="" coords="226,1115,367,1156"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a3036d6662c0bd89e330ca19cbca1f549" title="Used in the following methods. " alt="" coords="454,718,629,774"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aeea83aff996263bc8e9b3623fbe305a1" title="Used in the following methods. " alt="" coords="447,1225,636,1281"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1Xct.html#ad14df45e5685d6725622e28ed45f9726" title="Add a pair of read and write set of this transaction. " alt="" coords="217,1232,376,1273"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1Xct.html#a8a7332c6a326d914ed9d1132b9bc1004" title="Add the given record to the write set of this transaction. " alt="" coords="226,1297,367,1339"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="195,1363,399,1419"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#af77ff710cf2f8ef3800e97861ea94e8f" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record_oneshot" alt="" coords="195,1443,399,1499"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7dde5581eee977242b5373e30365183f" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record" alt="" coords="198,1523,395,1579"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7d324da4dcd35490820cb97e7124001b" title="foedus::storage::array\l::ArrayStoragePimpl::overwrite\l_record_primitive" alt="" coords="198,1603,395,1659"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a45396b70b246f330355397b447af55f3" title="implementation of delete_record family. " alt="" coords="699,90,872,146"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aa71566d3a4d56ded35df567784b13525" title="implementation of increment_record family. " alt="" coords="699,298,872,354"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#af0b96482a874777c4871a152ad733da3" title="implementation of insert_record family. " alt="" coords="699,481,872,537"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ab9cc59cbbef3fd23a62cbd25cbd00abb" title="implementation of overwrite_record family. " alt="" coords="699,718,872,774"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aeeccc272d2f9a4d895f4d117f6b96b27" title="implementation of upsert_record family. " alt="" coords="699,991,872,1047"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#af263fb1494c7ac6a5dbfd28b926ede3b" title="foedus::storage::masstree\l::MasstreeCursor::delete_record" alt="" coords="949,5,1157,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1228,97,1443,139"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="967,122,1140,178"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a81ce493961aa7dedc518ca4230d01868" title="foedus::storage::masstree\l::MasstreeCursor::increment_record" alt="" coords="938,203,1169,244"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="935,268,1172,309"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="956,334,1151,390"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="947,415,1159,456"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="967,481,1140,537"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#ab8b1919cb195dd063be409f772b36630" title="foedus::storage::masstree\l::MasstreeCursor::overwrite_record" alt="" coords="942,561,1165,603"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1220,653,1451,695"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="960,678,1147,734"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a496370a645284f8578875529c6eacb0f" title="foedus::storage::masstree\l::MasstreeCursor::overwrite\l_record_primitive" alt="" coords="963,758,1143,814"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="960,838,1147,894"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="959,918,1148,974"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="945,999,1161,1040"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="967,1065,1140,1121"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="695,1145,876,1201"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="684,1225,887,1281"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="696,1305,875,1361"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="687,1385,883,1441"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="694,1505,877,1561"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="979,1145,1127,1201"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="968,1225,1139,1281"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="980,1305,1127,1361"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="972,1385,1135,1441"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="955,1465,1151,1521"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a04310f074b93b1bd110b69954595170d" title="If you have already computed HashCombo, use this. " alt="" coords="1254,1465,1417,1521"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="979,1545,1128,1601"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="456,1363,627,1419"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a5093ba18b241e5179a363476bdd20066" title="This is a faster increment that does not return the value after increment. " alt="" coords="456,1443,627,1499"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a7332c6a326d914ed9d1132b9bc1004"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::add_to_write_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>&#160;</td>
          <td class="paramname"><em>storage_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1Record.html">storage::Record</a> *&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1log_1_1RecordLogType.html">log::RecordLogType</a> *&#160;</td>
          <td class="paramname"><em>log_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the given record to the write set of this transaction. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00354">354</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00444">add_to_write_set()</a>, <a class="el" href="record_8hpp_source.html#l00039">foedus::storage::Record::owner_id_</a>, and <a class="el" href="record_8hpp_source.html#l00045">foedus::storage::Record::payload_</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                 {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">add_to_write_set</a>(storage_id, &amp;record-&gt;owner_id_, record-&gt;payload_, log_entry);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a7dad4e0e5a6770ee941bd365410f9b6a"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a">foedus::xct::Xct::add_to_write_set</a></div><div class="ttdeci">ErrorCode add_to_write_set(storage::StorageId storage_id, RwLockableXctId *owner_id_address, char *payload_address, log::RecordLogType *log_entry)</div><div class="ttdoc">Add the given record to the write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00444">xct.cpp:444</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a8a7332c6a326d914ed9d1132b9bc1004_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a8a7332c6a326d914ed9d1132b9bc1004_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a8a7332c6a326d914ed9d1132b9bc1004_cgraph" id="classfoedus_1_1xct_1_1Xct_a8a7332c6a326d914ed9d1132b9bc1004_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a7dad4e0e5a6770ee941bd365410f9b6a" title="Add the given record to the write set of this transaction. " alt="" coords="195,303,336,344"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="397,163,572,204"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="399,331,571,387"/>
<area shape="rect" id="node15" href="group__LOGTYPE.html#gad2d33090f44d00949a05c245e5ff1046" title="Invokes the assertion logic of each log type. " alt="" coords="420,412,549,453"/>
<area shape="rect" id="node17" href="structfoedus_1_1xct_1_1RecordXctAccess.html#ace820ba89437e4d3a59fdb47a47525ba" title="Calculate owner_lock_id using the resolver. " alt="" coords="384,265,585,307"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="655,82,809,138"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1144,39,1317,80"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1401,97,1550,139"/>
<area shape="rect" id="node7" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="879,148,1081,189"/>
<area shape="rect" id="node13" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="897,97,1063,123"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1153,236,1308,277"/>
<area shape="rect" id="node12" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1129,155,1332,211"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1398,167,1553,208"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1395,331,1556,372"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1380,236,1571,277"/>
<area shape="rect" id="node16" href="structfoedus_1_1log_1_1LogHeader.html#a6ebe3b99442f2a58a4adeeb60f9a37e0" title="Convenience method to cast into LogCode. " alt="" coords="655,412,809,453"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1RecordXctAccess.html#adf2e2a9d414bf5cfe86f33198ebdf434" title="Setter for owner_id_address_/owner_lock_id_. " alt="" coords="633,331,831,372"/>
<area shape="rect" id="node19" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="659,265,805,307"/>
<area shape="rect" id="node20" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="899,301,1061,343"/>
<area shape="rect" id="node21" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1134,301,1327,343"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a148038efa6f37e2b89f057c5d5cd4cb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::Xct::assert_related_read_write </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This debug method checks whether the related_read_ and related_write_ fileds in read/write sets are consistent. </p>
<p>This method is completely wiped out in release build. </p><dl class="section return"><dt>Returns</dt><dd>whether it is consistent. but this method anyway asserts as of finding inconsistency. </dd></dl>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00538">538</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__access_8hpp_source.html#l00102">foedus::xct::RecordXctAccess::owner_id_address_</a>, <a class="el" href="xct__access_8hpp_source.html#l00178">foedus::xct::WriteXctAccess::related_read_</a>, and <a class="el" href="xct__access_8hpp_source.html#l00153">foedus::xct::ReadXctAccess::related_write_</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00478">foedus::xct::XctManagerPimpl::precommit_xct_sort_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                                                 {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; write_set_size_; ++i) {</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    WriteXctAccess* write = write_set_ + i;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (write-&gt;related_read_) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;related_read_ &gt;= read_set_);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      uint32_t index = write-&gt;related_read_ - read_set_;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; read_set_size_);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write-&gt;owner_id_address_ == write-&gt;related_read_-&gt;owner_id_address_);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(write == write-&gt;related_read_-&gt;related_write_);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; read_set_size_; ++i) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    ReadXctAccess* read = read_set_ + i;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">if</span> (read-&gt;related_write_) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read-&gt;related_write_ &gt;= write_set_);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      uint32_t index = read-&gt;related_write_ - write_set_;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(index &lt; write_set_size_);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read-&gt;owner_id_address_ == read-&gt;related_write_-&gt;owner_id_address_);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read == read-&gt;related_write_-&gt;related_read_);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a148038efa6f37e2b89f057c5d5cd4cb3_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a148038efa6f37e2b89f057c5d5cd4cb3_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a148038efa6f37e2b89f057c5d5cd4cb3_icgraph" id="classfoedus_1_1xct_1_1Xct_a148038efa6f37e2b89f057c5d5cd4cb3_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="937,5,1132,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="452,35,647,76"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a09e66e6f76cf08131e11a18a44b5d0a4" title="foedus::xct::XctManagerPimpl\l::precommit_xct_sort_access" alt="" coords="209,85,404,127"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1180,5,1343,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="695,35,889,76"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abbc9a5e976aadfba9f1fbf9e9fb39a9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::deactivate </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Closes the transaction. </p>
<dl class="section pre"><dt>Precondition</dt><dd>Before calling this method, all locks must be already released. </dd></dl>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00108">108</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="retrospective__lock__list_8hpp_source.html#l00365">foedus::xct::CurrentLockList::is_empty()</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                   {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(active_);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">is_empty</a>());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    active_ = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    *mcs_block_current_ = 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    *mcs_rw_async_mapping_current_ = 0;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  }</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a761b506c86d1d8e5681cab34fac1ad29"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29">foedus::xct::CurrentLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00365">retrospective_lock_list.hpp:365</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_cgraph" id="classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1CurrentLockList.html#a761b506c86d1d8e5681cab34fac1ad29" title="foedus::xct::CurrentLock\lList::is_empty" alt="" coords="232,5,396,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_icgraph" id="classfoedus_1_1xct_1_1Xct_abbc9a5e976aadfba9f1fbf9e9fb39a9a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="232,12,427,53"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="475,71,669,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="491,5,653,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="717,71,880,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8e3e36f95410cccc08910497386d0141"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::decrement_mcs_block_current </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00118">118</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{ --(*mcs_block_current_); }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afc0b909c82e905105f4f9701082a16b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">xct::CurrentLockList</a>* foedus::xct::Xct::get_current_lock_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00413">413</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00930">foedus::thread::ThreadPimpl::cll_get_max_locked_id()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00887">foedus::thread::ThreadPimpl::cll_giveup_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00919">foedus::thread::ThreadPimpl::cll_release_all_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00876">foedus::thread::ThreadPimpl::cll_release_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00909">foedus::thread::ThreadPimpl::cll_try_or_acquire_multiple_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00898">foedus::thread::ThreadPimpl::cll_try_or_acquire_single_lock()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00997">foedus::xct::XctManagerPimpl::release_and_clear_all_current_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{ <span class="keywordflow">return</span> &amp;current_lock_list_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_afc0b909c82e905105f4f9701082a16b8_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_afc0b909c82e905105f4f9701082a16b8_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_afc0b909c82e905105f4f9701082a16b8_icgraph" id="classfoedus_1_1xct_1_1Xct_afc0b909c82e905105f4f9701082a16b8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6ff575610172c3b1ed337665a277f761" title="foedus::thread::ThreadPimpl\l::cll_get_max_locked_id" alt="" coords="211,767,395,808"/>
<area shape="rect" id="node28" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="211,912,395,953"/>
<area shape="rect" id="node34" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a6367855f3aa3549b2d7b74adf383c87a" title="foedus::thread::ThreadPimpl\l::cll_release_all_locks" alt="" coords="211,1212,395,1253"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a3c2ee2d08709ff62e77e0dff6eded376" title="unlocking all acquired locks, used when commit/abort. " alt="" coords="733,1183,973,1224"/>
<area shape="rect" id="node37" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="1264,1153,1459,1195"/>
<area shape="rect" id="node42" href="classfoedus_1_1thread_1_1ThreadPimpl.html#af1783a8b90bfcd0fa87c4947fc406b0b" title="RW&#45;locks. " alt="" coords="211,1395,395,1436"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="756,1309,951,1351"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="192,977,415,1019"/>
<area shape="rect" id="node49" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="201,1095,405,1136"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="482,688,666,729"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="778,648,929,689"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1528,21,1701,77"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="1032,527,1205,583"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1275,658,1448,714"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1269,498,1453,554"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="1032,607,1205,663"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="1032,367,1205,423"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1029,738,1208,794"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="1028,818,1209,874"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1027,898,1210,954"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1771,54,1944,110"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1275,578,1448,634"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1272,418,1451,474"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1509,643,1721,684"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1507,708,1723,749"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1528,458,1701,514"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1528,538,1701,594"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="1275,45,1448,116"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="1275,272,1448,313"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="1267,338,1455,394"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="1275,141,1448,197"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1288,738,1435,794"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1271,818,1452,874"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1287,898,1436,954"/>
<area shape="rect" id="node29" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="486,912,662,953"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1Thread.html#a7827896a031940da7d2361dcb2d236d2" title="foedus::thread::Thread\l::cll_giveup_all_locks\l_at_and_after" alt="" coords="778,887,929,943"/>
<area shape="rect" id="node31" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="770,967,937,1023"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="1051,979,1186,1020"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="1294,979,1429,1020"/>
<area shape="rect" id="node35" href="classfoedus_1_1thread_1_1Thread.html#a21bff0861e0c12573bc0a6b776857b76" title="foedus::thread::Thread\l::cll_release_all_locks" alt="" coords="499,1212,649,1253"/>
<area shape="rect" id="node41" href="structfoedus_1_1thread_1_1ThreadPimplCllReleaseAllFunctor.html#a3c10a09a949ac94c2134e14e30d70e1e" title="foedus::thread::ThreadPimpl\lCllReleaseAllFunctor::operator()" alt="" coords="471,1277,677,1319"/>
<area shape="rect" id="node39" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="1021,1212,1216,1253"/>
<area shape="rect" id="node38" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1533,1153,1696,1195"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="1280,1219,1443,1260"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a4ff4d49ae69ae490afb0cc09c4c19507" title="Release all locks in CLL of this thread whose addresses are canonically ordered before the parameter..." alt="" coords="483,1395,665,1436"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1Thread.html#af2f4da1c6c9bf0b580ca62464b80c365" title="same as mcs_release_all_current_locks_after(address &#45; 1) " alt="" coords="778,1387,929,1443"/>
<area shape="rect" id="node46" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="1021,1299,1216,1340"/>
<area shape="rect" id="node48" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="463,977,685,1019"/>
<area shape="rect" id="node50" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="472,1095,676,1136"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af667c55fca8430bd9d12bd07f8d259a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classfoedus_1_1xct_1_1CurrentLockList.html">xct::CurrentLockList</a>* foedus::xct::Xct::get_current_lock_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00414">414</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{ <span class="keywordflow">return</span> &amp;current_lock_list_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b0e9bc8c0227311e3b1fe1412272992"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::xct::Xct::get_default_hot_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00130">130</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                           {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> default_hot_threshold_for_this_xct_ ; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a0b0e9bc8c0227311e3b1fe1412272992_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a0b0e9bc8c0227311e3b1fe1412272992_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a0b0e9bc8c0227311e3b1fe1412272992_icgraph" id="classfoedus_1_1xct_1_1Xct_a0b0e9bc8c0227311e3b1fe1412272992_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="205,20,363,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afc8817e57a047f64148add6e63fbd661"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::xct::Xct::get_default_rll_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00137">137</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                                           {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> default_rll_threshold_for_this_xct_ ; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_afc8817e57a047f64148add6e63fbd661_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_afc8817e57a047f64148add6e63fbd661_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_afc8817e57a047f64148add6e63fbd661_icgraph" id="classfoedus_1_1xct_1_1Xct_afc8817e57a047f64148add6e63fbd661_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="197,20,355,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae84fb0f1c8c5c81bac74e79e62da49a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::xct::Xct::get_hot_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00128">128</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="page_8cpp_source.html#l00081">foedus::storage::PageHeader::contains_hot_records()</a>, <a class="el" href="thread_8cpp_source.html#l00142">foedus::thread::Thread::is_hot_page()</a>, and <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{ <span class="keywordflow">return</span> hot_threshold_for_this_xct_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ae84fb0f1c8c5c81bac74e79e62da49a6_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ae84fb0f1c8c5c81bac74e79e62da49a6_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ae84fb0f1c8c5c81bac74e79e62da49a6_icgraph" id="classfoedus_1_1xct_1_1Xct_ae84fb0f1c8c5c81bac74e79e62da49a6_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1storage_1_1PageHeader.html#a9d43e66022a4171e578fcd79ba10a948" title="foedus::storage::PageHeader\l::contains_hot_records" alt="" coords="235,328,425,369"/>
<area shape="rect" id="node4" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="255,395,405,436"/>
<area shape="rect" id="node50" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="251,461,409,487"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1RwLockableXctId.html#a5901bd2379f57ce799dcd58efd342790" title="foedus::xct::RwLockableXct\lId::is_hot" alt="" coords="473,325,656,367"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="481,391,648,447"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="704,399,839,440"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="921,5,1056,47"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="906,71,1071,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="906,151,1071,207"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="906,231,1071,287"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="906,311,1071,367"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="887,391,1091,447"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="906,471,1071,527"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="906,551,1071,607"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="906,631,1071,687"/>
<area shape="rect" id="node24" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="900,711,1077,767"/>
<area shape="rect" id="node28" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="900,1111,1077,1167"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="1143,79,1318,120"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="1143,151,1318,207"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="1143,231,1318,287"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="1143,311,1318,367"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="1145,391,1316,447"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="1143,471,1318,527"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="1143,551,1318,607"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="1143,631,1318,687"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="1140,711,1321,767"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1388,631,1569,687"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1388,711,1569,767"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1392,951,1565,1007"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="1141,1111,1320,1167"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="1144,1425,1317,1481"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="1139,1534,1323,1590"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1646,799,1861,840"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1654,864,1853,905"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1667,1157,1840,1213"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1667,930,1840,986"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1635,1011,1872,1052"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1638,1257,1869,1299"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1660,1077,1847,1133"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1392,791,1565,847"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1392,871,1565,927"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1392,1031,1565,1087"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1384,1111,1573,1167"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1381,1191,1576,1247"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1385,1271,1572,1327"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1384,1351,1573,1407"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1373,1432,1585,1473"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1371,1497,1587,1539"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1392,1563,1565,1619"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a07b332c0f7f0896ad37dc93373af1cb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&amp; foedus::xct::Xct::get_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the ID of this transaction, but note that it is not issued until commit time! </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00151">151</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00868">foedus::xct::XctManagerPimpl::precommit_xct_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{ <span class="keywordflow">return</span> id_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a07b332c0f7f0896ad37dc93373af1cb2_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a07b332c0f7f0896ad37dc93373af1cb2_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a07b332c0f7f0896ad37dc93373af1cb2_icgraph" id="classfoedus_1_1xct_1_1Xct_a07b332c0f7f0896ad37dc93373af1cb2_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="227,5,384,32"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="208,57,403,98"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="451,57,645,98"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="693,57,888,98"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="936,57,1099,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abae2ae5210db8eda39a1507940bf7352"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__XCT.html#ga9ac5dae4b91a288e9d887f28a7124c13">IsolationLevel</a> foedus::xct::Xct::get_isolation_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the level of isolation for this transaction. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00149">149</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00679">foedus::storage::hash::HashStoragePimpl::follow_page_bin_head()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00411">foedus::thread::ThreadPimpl::follow_page_pointer()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00484">foedus::thread::ThreadPimpl::follow_page_pointers_for_read_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00419">foedus::storage::array::ArrayStoragePimpl::get_record_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00746">foedus::storage::array::ArrayStoragePimpl::get_record_for_write_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00403">foedus::storage::array::ArrayStoragePimpl::get_record_payload()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00717">foedus::storage::array::ArrayStoragePimpl::get_record_payload_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00678">foedus::storage::array::ArrayStoragePimpl::get_record_primitive_batch()</a>, <a class="el" href="hash__storage__pimpl_8cpp_source.html#l00842">foedus::storage::hash::HashStoragePimpl::locate_bin()</a>, and <a class="el" href="sequential__cursor_8cpp_source.html#l00050">foedus::storage::sequential::SequentialCursor::SequentialCursor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{ <span class="keywordflow">return</span> isolation_level_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_abae2ae5210db8eda39a1507940bf7352_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_abae2ae5210db8eda39a1507940bf7352_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_abae2ae5210db8eda39a1507940bf7352_icgraph" id="classfoedus_1_1xct_1_1Xct_abae2ae5210db8eda39a1507940bf7352_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a21ed664fcd1889aa4dab0f150fd06c02" title="subroutine to follow a pointer to head of bin from a volatile parent " alt="" coords="699,343,877,399"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a0f073a76a5abeac0829ba1e47a40c02c" title="Find a pointer to the bin that contains records for the hash. " alt="" coords="1195,306,1400,347"/>
<area shape="rect" id="node21" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a9b77133f66157bca81a49caeca9a9904" title="A general method to follow (read) a page pointer. " alt="" coords="218,523,402,565"/>
<area shape="rect" id="node37" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a89fe2af2a31e70a89e143cbc2d687ffb" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="218,589,402,645"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="227,669,393,725"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="227,749,393,805"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="227,829,393,885"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="227,909,393,965"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="227,989,393,1045"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1sequential_1_1SequentialCursor.html#a63f0ef6e7a9171191d4117e08da4e7d3" title="Constructs a cursor to read tuples from this storage. " alt="" coords="192,1070,428,1111"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a3d443bf6ef79608f06b5ca1aa4ea7e6f" title="for non&#45;root " alt="" coords="925,306,1139,347"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1467,19,1648,75"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1475,112,1639,168"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1475,219,1639,275"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1456,299,1659,355"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1468,379,1647,435"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#add8aafbb32713dc6be20804da789f43d" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record" alt="" coords="1459,459,1655,515"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1466,579,1649,635"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a4ce8eaf2bf2674b777888c812ca5f269" title="If you have already computed HashCombo, use this. " alt="" coords="1734,5,1882,61"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af64f22f350167426098b6a99c15f864d" title="If you have already computed HashCombo, use this. " alt="" coords="1721,86,1895,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#ac9ae382b1110aec44a1df2a768c4cee3" title="If you have already computed HashCombo, use this. " alt="" coords="1707,233,1909,274"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a660df9f0d685df28fbe19f52cdbdc7e2" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_primitive" alt="" coords="1726,152,1890,208"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a7ba3b8d1b3f0242f53b46c8a9b2ebaca" title="If you have already computed HashCombo, use this. " alt="" coords="1723,299,1893,355"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1735,379,1881,435"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#affd9e7a6674a1a8daced6ad1ef603857" title="If you have already computed HashCombo, use this. " alt="" coords="1727,539,1889,595"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a26fdac44f55a502f17cb82e98966dd84" title="foedus::storage::hash\l::HashStoragePimpl::overwrite\l_record_primitive" alt="" coords="1710,459,1906,515"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1733,619,1883,675"/>
<area shape="rect" id="node22" href="classfoedus_1_1thread_1_1Thread.html#a81e03c29d8931350b4df1fd1f8b9e4b6" title="A general method to follow (read) a page pointer. " alt="" coords="488,523,639,565"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#aff31f521523d7a7b81ff5b750e081dac" title="Thread::follow_page_pointer() for masstree. " alt="" coords="701,553,875,609"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae0f40ca19aa9b9ac924542746e1b53c1" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointer" alt="" coords="699,716,877,772"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="701,909,875,965"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abae9ebd099ebba507d98b8df782bd143" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_root_page" alt="" coords="705,796,871,852"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a579927a24cc690c8d4d6362bcb9e8538" title="Retrieves the root page of this storage. " alt="" coords="706,473,870,529"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1211,960,1384,1016"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="945,553,1119,609"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="945,633,1119,689"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a688e9af62605f137637cc239f161c84f" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_border" alt="" coords="939,423,1125,479"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a351ca64071b130468a9ba9f200ccd417" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::verify_single_thread_intermediate" alt="" coords="1187,456,1408,512"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1211,633,1384,689"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a7f9205c706c8be3ad4f0c030a285d884" title="foedus::storage::array\l::ArrayStoragePimpl::lookup\l_for_read" alt="" coords="939,764,1125,820"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a10c44402ff1533f5fee533cc13119759" title="This version always returns a volatile page, installing a new one if needed. " alt="" coords="939,844,1125,900"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="945,1026,1119,1097"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#abb36cf6186f747e38d98a13c6419e128" title="Batched version of follow_page_pointer with will_modify==false. " alt="" coords="488,589,639,645"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac71ccdf1742ae0e9a7119cc92fcac092" title="foedus::storage::array\l::ArrayStoragePimpl::follow\l_pointers_for_read_batch" alt="" coords="699,989,877,1045"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="476,669,651,725"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="476,749,651,805"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="476,829,651,885"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="476,909,651,965"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="476,989,651,1045"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a245cedc62930a99cee57290d24932c56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockFreeReadXctAccess.html">LockFreeReadXctAccess</a>* foedus::xct::Xct::get_lock_free_read_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00164">164</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00648">foedus::xct::XctManagerPimpl::precommit_xct_verify_readonly()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00731">foedus::xct::XctManagerPimpl::precommit_xct_verify_readwrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{ <span class="keywordflow">return</span> lock_free_read_set_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a245cedc62930a99cee57290d24932c56_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a245cedc62930a99cee57290d24932c56_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a245cedc62930a99cee57290d24932c56_icgraph" id="classfoedus_1_1xct_1_1Xct_a245cedc62930a99cee57290d24932c56_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="193,5,401,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="192,71,403,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="451,5,645,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="693,39,888,80"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="936,39,1099,80"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="451,71,645,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af39a25162bfa65a4cc2dea0d64460cbe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_lock_free_read_set_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00158">158</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00648">foedus::xct::XctManagerPimpl::precommit_xct_verify_readonly()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00731">foedus::xct::XctManagerPimpl::precommit_xct_verify_readwrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{ <span class="keywordflow">return</span> lock_free_read_set_size_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_af39a25162bfa65a4cc2dea0d64460cbe_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_af39a25162bfa65a4cc2dea0d64460cbe_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_af39a25162bfa65a4cc2dea0d64460cbe_icgraph" id="classfoedus_1_1xct_1_1Xct_af39a25162bfa65a4cc2dea0d64460cbe_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="249,5,407,32"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="224,57,432,98"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="223,122,433,163"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="481,57,676,98"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="724,90,919,131"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="967,90,1129,131"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="481,122,676,163"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c4f8c691a326c1f632128d13dea2fa2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1LockFreeWriteXctAccess.html">LockFreeWriteXctAccess</a>* foedus::xct::Xct::get_lock_free_write_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00165">165</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00868">foedus::xct::XctManagerPimpl::precommit_xct_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{ <span class="keywordflow">return</span> lock_free_write_set_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a8c4f8c691a326c1f632128d13dea2fa2_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a8c4f8c691a326c1f632128d13dea2fa2_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a8c4f8c691a326c1f632128d13dea2fa2_icgraph" id="classfoedus_1_1xct_1_1Xct_a8c4f8c691a326c1f632128d13dea2fa2_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="193,5,388,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="436,5,631,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="679,5,873,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="921,5,1084,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4dfc3cd9b70a93615c3a0a8014aafbe1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_lock_free_write_set_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00159">159</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>, <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00868">foedus::xct::XctManagerPimpl::precommit_xct_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{ <span class="keywordflow">return</span> lock_free_write_set_size_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a4dfc3cd9b70a93615c3a0a8014aafbe1_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a4dfc3cd9b70a93615c3a0a8014aafbe1_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a4dfc3cd9b70a93615c3a0a8014aafbe1_icgraph" id="classfoedus_1_1xct_1_1Xct_a4dfc3cd9b70a93615c3a0a8014aafbe1_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="224,5,419,47"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="243,71,400,98"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="224,123,419,164"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="483,5,645,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="467,123,661,164"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="709,123,904,164"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="952,123,1115,164"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac81cd23819603f9bdbf780b9f6a18e56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_mcs_block_current </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00116">116</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;{ <span class="keywordflow">return</span> *mcs_block_current_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ac81cd23819603f9bdbf780b9f6a18e56_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ac81cd23819603f9bdbf780b9f6a18e56_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ac81cd23819603f9bdbf780b9f6a18e56_icgraph" id="classfoedus_1_1xct_1_1Xct_ac81cd23819603f9bdbf780b9f6a18e56_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="192,5,387,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="435,5,597,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98dcc8bc01ee8a365e68c0742c605d08"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1PageVersionAccess.html">PageVersionAccess</a>* foedus::xct::Xct::get_page_version_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00161">161</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00847">foedus::xct::XctManagerPimpl::precommit_xct_verify_page_version_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{ <span class="keywordflow">return</span> page_version_set_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a98dcc8bc01ee8a365e68c0742c605d08_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a98dcc8bc01ee8a365e68c0742c605d08_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a98dcc8bc01ee8a365e68c0742c605d08_icgraph" id="classfoedus_1_1xct_1_1Xct_a98dcc8bc01ee8a365e68c0742c605d08_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ab21414e107b53d6276e1d20bc12dce9d" title="Returns false if there is any page version conflict. " alt="" coords="192,31,387,87"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="436,5,644,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="435,71,645,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="693,5,888,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="936,39,1131,80"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1179,39,1341,80"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="693,71,888,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a67f1a970106386aa9f367195c0a43208"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_page_version_set_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00155">155</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00847">foedus::xct::XctManagerPimpl::precommit_xct_verify_page_version_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{ <span class="keywordflow">return</span> page_version_set_size_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a67f1a970106386aa9f367195c0a43208_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a67f1a970106386aa9f367195c0a43208_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a67f1a970106386aa9f367195c0a43208_icgraph" id="classfoedus_1_1xct_1_1Xct_a67f1a970106386aa9f367195c0a43208_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="232,5,389,32"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ab21414e107b53d6276e1d20bc12dce9d" title="Returns false if there is any page version conflict. " alt="" coords="213,56,408,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="457,30,665,71"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="456,95,667,137"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="715,30,909,71"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="957,63,1152,105"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1200,63,1363,105"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="715,95,909,137"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a91010b6195657c14f3b681da8102163d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structfoedus_1_1xct_1_1PointerAccess.html">PointerAccess</a>* foedus::xct::Xct::get_pointer_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00160">160</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00828">foedus::xct::XctManagerPimpl::precommit_xct_verify_pointer_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;{ <span class="keywordflow">return</span> pointer_set_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a91010b6195657c14f3b681da8102163d_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a91010b6195657c14f3b681da8102163d_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a91010b6195657c14f3b681da8102163d_icgraph" id="classfoedus_1_1xct_1_1Xct_a91010b6195657c14f3b681da8102163d_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a011f72c9cc830a943b9dccd62d323209" title="Returns false if there is any pointer set conflict. " alt="" coords="192,39,415,80"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="464,5,672,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="463,71,673,112"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="721,5,916,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="964,39,1159,80"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1207,39,1369,80"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="721,71,916,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6b0f4d5bf1485c376f62e97c6053ea43"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_pointer_set_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00154">154</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00828">foedus::xct::XctManagerPimpl::precommit_xct_verify_pointer_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;{ <span class="keywordflow">return</span> pointer_set_size_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a6b0f4d5bf1485c376f62e97c6053ea43_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a6b0f4d5bf1485c376f62e97c6053ea43_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a6b0f4d5bf1485c376f62e97c6053ea43_icgraph" id="classfoedus_1_1xct_1_1Xct_a6b0f4d5bf1485c376f62e97c6053ea43_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="225,5,382,32"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a011f72c9cc830a943b9dccd62d323209" title="Returns false if there is any pointer set conflict. " alt="" coords="192,57,415,98"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="464,23,672,65"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="463,89,673,130"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="721,23,916,65"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="964,57,1159,98"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1207,57,1369,98"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="721,89,916,130"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae523b00cead387e6addb1366fe08546a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a>* foedus::xct::Xct::get_read_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00162">162</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00252">foedus::xct::RetrospectiveLockList::construct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00648">foedus::xct::XctManagerPimpl::precommit_xct_verify_readonly()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00731">foedus::xct::XctManagerPimpl::precommit_xct_verify_readwrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{ <span class="keywordflow">return</span> read_set_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ae523b00cead387e6addb1366fe08546a_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ae523b00cead387e6addb1366fe08546a_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ae523b00cead387e6addb1366fe08546a_icgraph" id="classfoedus_1_1xct_1_1Xct_ae523b00cead387e6addb1366fe08546a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="451,31,645,72"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e" title="Fill out this retrospetive lock list for the next run of the given transaction. " alt="" coords="211,31,383,72"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="193,96,401,138"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="192,162,403,203"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="709,31,872,72"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="693,96,888,138"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="936,96,1099,138"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="451,96,645,138"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="451,162,645,203"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af7b9c43800807db798d2e58bc07ad5cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_read_set_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00156">156</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00252">foedus::xct::RetrospectiveLockList::construct()</a>, <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00648">foedus::xct::XctManagerPimpl::precommit_xct_verify_readonly()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00731">foedus::xct::XctManagerPimpl::precommit_xct_verify_readwrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{ <span class="keywordflow">return</span> read_set_size_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_af7b9c43800807db798d2e58bc07ad5cd_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_af7b9c43800807db798d2e58bc07ad5cd_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_af7b9c43800807db798d2e58bc07ad5cd_icgraph" id="classfoedus_1_1xct_1_1Xct_af7b9c43800807db798d2e58bc07ad5cd_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="451,40,645,81"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="200,105,395,147"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e" title="Fill out this retrospetive lock list for the next run of the given transaction. " alt="" coords="211,40,383,81"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="219,171,376,198"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2c3befa16f448a004d548a2b4675a13b" title="Phase 2 of precommit_xct() for read&#45;only case. " alt="" coords="193,223,401,264"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a9534e63f498a012d9fa401a10e2b4e0b" title="Phase 2 of precommit_xct() for read&#45;write case. " alt="" coords="192,288,403,329"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="709,40,872,81"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="693,223,888,264"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="936,223,1099,264"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="467,105,629,147"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#add42c2f0d559eafa1f67fd9c048a4855" title="precommit_xct() if the transaction is read&#45;only " alt="" coords="451,223,645,264"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="451,288,645,329"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8b718008691c004c92d863b8b75dbe07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html">xct::RetrospectiveLockList</a>* foedus::xct::Xct::get_retrospective_lock_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00415">415</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                                          {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> &amp;retrospective_lock_list_;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a8b718008691c004c92d863b8b75dbe07_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a8b718008691c004c92d863b8b75dbe07_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a8b718008691c004c92d863b8b75dbe07_icgraph" id="classfoedus_1_1xct_1_1Xct_a8b718008691c004c92d863b8b75dbe07_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="211,15,405,56"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="453,71,648,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="211,133,405,175"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="469,5,632,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="696,71,859,112"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="469,136,632,177"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8a5728b0376ffa45b801a560051d7d7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t foedus::xct::Xct::get_rll_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00135">135</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, and <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{ <span class="keywordflow">return</span> rll_threshold_for_this_xct_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a8a5728b0376ffa45b801a560051d7d7a_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a8a5728b0376ffa45b801a560051d7d7a_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a8a5728b0376ffa45b801a560051d7d7a_icgraph" id="classfoedus_1_1xct_1_1Xct_a8a5728b0376ffa45b801a560051d7d7a_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="227,39,421,80"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="245,105,403,131"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="485,5,648,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="469,71,664,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="712,71,875,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aca66ae9959651b7c6fa86a75db287f54"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1SysxctWorkspace.html">SysxctWorkspace</a>* foedus::xct::Xct::get_sysxct_workspace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00142">142</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, and <a class="el" href="thread__pimpl_8cpp_source.html#l00980">foedus::thread::ThreadPimpl::run_nested_sysxct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{ <span class="keywordflow">return</span> sysxct_workspace_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_aca66ae9959651b7c6fa86a75db287f54_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_aca66ae9959651b7c6fa86a75db287f54_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_aca66ae9959651b7c6fa86a75db287f54_icgraph" id="classfoedus_1_1xct_1_1Xct_aca66ae9959651b7c6fa86a75db287f54_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="205,848,363,875"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a498a6a07313bf9fbb2c0e3d02f075221" title="Sysxct&#45;related. " alt="" coords="192,899,376,941"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1Thread.html#a2a5e6b008138d755e7e401f25927400c" title="Methods related to System transactions (sysxct) nested under this thread. " alt="" coords="424,899,575,941"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a32332060560b864a857a839bb0adb4fd" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::fatify_first_root_double" alt="" coords="1109,1243,1283,1299"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a738313356f0e54e8e2d732c2017797c0" title="Find a border node in the layer that corresponds to the given key slice. " alt="" coords="627,552,800,608"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="859,320,1033,376"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="854,819,1038,875"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a6188e676e564b4ebecaa556178cdb81e" title="Follows to next layer&#39;s root page. " alt="" coords="627,385,800,441"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#adc32aaf6f4537fcc1ada207e1d6902ec" title="Root&#45;node related, such as a method to retrieve 1st&#45;root, to grow, etc. " alt="" coords="627,892,800,948"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="1381,1293,1560,1349"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#afa2342b5f0a374e38f0ec00242494a34" title="Subroutine of locate_record() to create/migrate a physical record of the given key in the page or its..." alt="" coords="623,1373,804,1429"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a49df48b50c0c645d3a047e8b153c4015" title="foedus::storage::hash\l::HashStoragePimpl::upsert\l_record" alt="" coords="1379,1613,1562,1669"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ac3b15bb4f888327ba49050f62d020f52" title="Defined in masstree_storage_fatify.cpp. " alt="" coords="1384,1195,1557,1251"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a70b1c5e023fa0aac150e7b607e37727c" title="Deliberately causes splits under the volatile root of first layer, or &quot;fatify&quot; it. " alt="" coords="1637,1195,1811,1251"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="1109,152,1283,208"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="857,552,1035,608"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1363,511,1578,553"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1371,609,1570,650"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1384,232,1557,288"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1384,85,1557,141"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1352,166,1589,207"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1355,397,1586,438"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1377,5,1564,61"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="1109,552,1283,608"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="1109,632,1283,688"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="1109,232,1283,288"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="1101,312,1291,368"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="1099,392,1293,448"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="1103,472,1289,528"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="1101,712,1291,768"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1090,86,1302,127"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="1088,21,1304,62"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1109,872,1283,928"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="1109,792,1283,848"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#ad6c9eb02ad32cc1bffe9daac3521ad24" title="Returns the count of direct children in the first&#45;root node. " alt="" coords="859,1126,1033,1197"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="859,899,1033,941"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a99bb085d9e427fc36182b13bb20371e9" title="defined in masstree_storage_prefetch.cpp " alt="" coords="852,965,1040,1021"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a2a4e90569074d49ab538041caedacf6a" title="These are defined in masstree_storage_verify.cpp. " alt="" coords="859,1045,1033,1101"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a3ca58d4acdbc13f9cfd341d95f45caa2" title="foedus::storage::masstree\l::MasstreeCursor::open\l_normalized" alt="" coords="1109,952,1283,1008"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a10db264b9d354e1813bd20ef8fdb72bb" title="Prefetch data pages in this storage. " alt="" coords="1105,1032,1287,1088"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aedee683fbced316953d1cbc622f22c87" title="foedus::storage::masstree\l::MasstreeStorage::verify\l_single_thread" alt="" coords="1109,1112,1283,1168"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#a3617930288b1cfa90723b56916044a10" title="If you have already computed HashCombo, use this. " alt="" coords="1651,1293,1797,1349"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="855,1373,1037,1429"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="1105,1453,1287,1509"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="1105,1373,1287,1429"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1380,1453,1561,1509"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1389,1533,1553,1589"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1389,1373,1553,1429"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStorage.html#af75f511796795cd4ffe731fdae173325" title="If you have already computed HashCombo, use this. " alt="" coords="1649,1613,1799,1669"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad0247fc32d656c18014c69145e0bef59"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* foedus::xct::Xct::get_thread_context </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00152">152</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{ <span class="keywordflow">return</span> context_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac822b7fe5234d3681397277b0105256f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> foedus::xct::Xct::get_thread_id </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00153">153</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{ <span class="keywordflow">return</span> thread_id_; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5fa3dcdb891b99e5bc7d83ff2029f46"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1xct_1_1WriteXctAccess.html">WriteXctAccess</a>* foedus::xct::Xct::get_write_set </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00163">163</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="retrospective__lock__list_8cpp_source.html#l00252">foedus::xct::RetrospectiveLockList::construct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00868">foedus::xct::XctManagerPimpl::precommit_xct_apply()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00514">foedus::xct::XctManagerPimpl::precommit_xct_lock_batch_track_moved()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00384">foedus::xct::XctManagerPimpl::precommit_xct_readwrite()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00478">foedus::xct::XctManagerPimpl::precommit_xct_sort_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{ <span class="keywordflow">return</span> write_set_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ae5fa3dcdb891b99e5bc7d83ff2029f46_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ae5fa3dcdb891b99e5bc7d83ff2029f46_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ae5fa3dcdb891b99e5bc7d83ff2029f46_icgraph" id="classfoedus_1_1xct_1_1Xct_ae5fa3dcdb891b99e5bc7d83ff2029f46_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e" title="Fill out this retrospetive lock list for the next run of the given transaction. " alt="" coords="203,8,375,49"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="435,71,629,112"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="677,128,872,169"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="435,216,629,257"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ada7782b43556708daa3bb94f7662409a" title="Subroutine of precommit_xct_lock to track most of moved records in write&#45;set. " alt="" coords="192,238,387,294"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a09e66e6f76cf08131e11a18a44b5d0a4" title="foedus::xct::XctManagerPimpl\l::precommit_xct_sort_access" alt="" coords="192,319,387,360"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="435,5,629,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="693,5,856,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="920,97,1115,139"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1163,97,1325,139"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a674e3ce0252c1c9d2f73edf3b3c4307e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::get_write_set_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00157">157</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00252">foedus::xct::RetrospectiveLockList::construct()</a>, <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00868">foedus::xct::XctManagerPimpl::precommit_xct_apply()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00539">foedus::xct::XctManagerPimpl::precommit_xct_lock()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00514">foedus::xct::XctManagerPimpl::precommit_xct_lock_batch_track_moved()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00384">foedus::xct::XctManagerPimpl::precommit_xct_readwrite()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00478">foedus::xct::XctManagerPimpl::precommit_xct_sort_access()</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{ <span class="keywordflow">return</span> write_set_size_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a674e3ce0252c1c9d2f73edf3b3c4307e_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a674e3ce0252c1c9d2f73edf3b3c4307e_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a674e3ce0252c1c9d2f73edf3b3c4307e_icgraph" id="classfoedus_1_1xct_1_1Xct_a674e3ce0252c1c9d2f73edf3b3c4307e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="192,5,387,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e" title="Fill out this retrospetive lock list for the next run of the given transaction. " alt="" coords="203,71,375,112"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="211,137,368,163"/>
<area shape="rect" id="node10" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="435,172,629,213"/>
<area shape="rect" id="node11" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="677,225,872,267"/>
<area shape="rect" id="node12" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a2376431f079ce60800c9c25d89d74896" title="Phase 1 of precommit_xct() " alt="" coords="435,317,629,359"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ada7782b43556708daa3bb94f7662409a" title="Subroutine of precommit_xct_lock to track most of moved records in write&#45;set. " alt="" coords="192,339,387,395"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a09e66e6f76cf08131e11a18a44b5d0a4" title="foedus::xct::XctManagerPimpl\l::precommit_xct_sort_access" alt="" coords="192,420,387,461"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="451,5,613,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="435,89,629,131"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="693,89,856,131"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="920,191,1115,232"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1163,191,1325,232"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a29f899dedb76839dd51481f777e8163a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t foedus::xct::Xct::increment_mcs_block_current </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00117">117</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{ <span class="keywordflow">return</span> ++(*mcs_block_current_); }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9dd027b4a8d21f45a60f82d110c5a529"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1memory_1_1NumaCoreMemory.html">memory::NumaCoreMemory</a> *&#160;</td>
          <td class="paramname"><em>core_memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>mcs_block_current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>mcs_rw_async_mapping_current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00077">77</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__options_8hpp_source.html#l00123">foedus::xct::XctOptions::enable_retrospective_lock_list_</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00095">foedus::memory::NumaCoreMemory::get_current_lock_list_capacity()</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00092">foedus::memory::NumaCoreMemory::get_current_lock_list_memory()</a>, <a class="el" href="engine__memory_8hpp_source.html#l00090">foedus::memory::EngineMemory::get_global_volatile_page_resolver()</a>, <a class="el" href="savepoint__manager_8cpp_source.html#l00036">foedus::savepoint::SavepointManager::get_initial_current_epoch()</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00109">foedus::memory::NumaCoreMemory::get_local_work_memory()</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00110">foedus::memory::NumaCoreMemory::get_local_work_memory_size()</a>, <a class="el" href="engine_8cpp_source.html#l00050">foedus::Engine::get_memory_manager()</a>, <a class="el" href="engine_8cpp_source.html#l00039">foedus::Engine::get_options()</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00101">foedus::memory::NumaCoreMemory::get_retrospective_lock_list_capacity()</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00098">foedus::memory::NumaCoreMemory::get_retrospective_lock_list_memory()</a>, <a class="el" href="engine_8cpp_source.html#l00053">foedus::Engine::get_savepoint_manager()</a>, <a class="el" href="numa__core__memory_8hpp_source.html#l00105">foedus::memory::NumaCoreMemory::get_small_thread_local_memory_pieces()</a>, <a class="el" href="storage__options_8hpp_source.html#l00056">foedus::storage::StorageOptions::hot_threshold_</a>, <a class="el" href="xct__options_8hpp_source.html#l00135">foedus::xct::XctOptions::hot_threshold_for_retrospective_lock_list_</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00049">foedus::xct::RetrospectiveLockList::init()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00086">foedus::xct::CurrentLockList::init()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00462">foedus::xct::SysxctWorkspace::init()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="xct__options_8hpp_source.html#l00084">foedus::xct::XctOptions::max_lock_free_read_set_size_</a>, <a class="el" href="xct__options_8hpp_source.html#l00092">foedus::xct::XctOptions::max_lock_free_write_set_size_</a>, <a class="el" href="xct__options_8hpp_source.html#l00060">foedus::xct::XctOptions::max_read_set_size_</a>, <a class="el" href="xct__options_8hpp_source.html#l00076">foedus::xct::XctOptions::max_write_set_size_</a>, <a class="el" href="xct__id_8hpp_source.html#l00965">foedus::xct::XctId::set_epoch()</a>, <a class="el" href="xct__id_8hpp_source.html#l00980">foedus::xct::XctId::set_ordinal()</a>, <a class="el" href="engine__options_8hpp_source.html#l00145">foedus::EngineOptions::storage_</a>, and <a class="el" href="engine__options_8hpp_source.html#l00147">foedus::EngineOptions::xct_</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00081">foedus::thread::ThreadPimpl::initialize_once()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                          {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc">set_epoch</a>(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">get_savepoint_manager</a>()-&gt;<a class="code" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee">get_initial_current_epoch</a>());</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce">set_ordinal</a>(0);  <span class="comment">// ordinal 0 is possible only as a dummy &quot;latest&quot; XctId</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">is_valid</a>());</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  memory::NumaCoreMemory:: SmallThreadLocalMemoryPieces pieces</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    = core_memory-&gt;get_small_thread_local_memory_pieces();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">const</span> XctOptions&amp; xct_opt = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">xct_</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  default_rll_for_this_xct_ = xct_opt.enable_retrospective_lock_list_;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  enable_rll_for_this_xct_ = default_rll_for_this_xct_;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  default_hot_threshold_for_this_xct_ = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a3e40cfe4530b10e87344b42be16927e1">storage_</a>.<a class="code" href="structfoedus_1_1storage_1_1StorageOptions.html#ac27b7919baf2e41da1057dd666442e6f">hot_threshold_</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  hot_threshold_for_this_xct_ = default_hot_threshold_for_this_xct_;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  default_rll_threshold_for_this_xct_ = xct_opt.hot_threshold_for_retrospective_lock_list_;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  rll_threshold_for_this_xct_ = default_rll_threshold_for_this_xct_;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  sysxct_workspace_ = <span class="keyword">reinterpret_cast&lt;</span>SysxctWorkspace*<span class="keyword">&gt;</span>(pieces.sysxct_workspace_memory_);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  read_set_ = <span class="keyword">reinterpret_cast&lt;</span>ReadXctAccess*<span class="keyword">&gt;</span>(pieces.xct_read_access_memory_);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  read_set_size_ = 0;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  max_read_set_size_ = xct_opt.max_read_set_size_;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  write_set_ = <span class="keyword">reinterpret_cast&lt;</span>WriteXctAccess*<span class="keyword">&gt;</span>(pieces.xct_write_access_memory_);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  write_set_size_ = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  max_write_set_size_ = xct_opt.max_write_set_size_;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  lock_free_read_set_ = <span class="keyword">reinterpret_cast&lt;</span>LockFreeReadXctAccess*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    pieces.xct_lock_free_read_access_memory_);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  lock_free_read_set_size_ = 0;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  max_lock_free_read_set_size_ = xct_opt.max_lock_free_read_set_size_;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  lock_free_write_set_ = <span class="keyword">reinterpret_cast&lt;</span>LockFreeWriteXctAccess*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    pieces.xct_lock_free_write_access_memory_);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  lock_free_write_set_size_ = 0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  max_lock_free_write_set_size_ = xct_opt.max_lock_free_write_set_size_;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  pointer_set_ = <span class="keyword">reinterpret_cast&lt;</span>PointerAccess*<span class="keyword">&gt;</span>(pieces.xct_pointer_access_memory_);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  pointer_set_size_ = 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  page_version_set_ = <span class="keyword">reinterpret_cast&lt;</span>PageVersionAccess*<span class="keyword">&gt;</span>(pieces.xct_page_version_memory_);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  page_version_set_size_ = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  mcs_block_current_ = mcs_block_current;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  *mcs_block_current_ = 0;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  mcs_rw_async_mapping_current_ = mcs_rw_async_mapping_current;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  *mcs_rw_async_mapping_current_ = 0;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  local_work_memory_ = core_memory-&gt;get_local_work_memory();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  local_work_memory_size_ = core_memory-&gt;get_local_work_memory_size();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  local_work_memory_cur_ = 0;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  sysxct_workspace_-&gt;<a class="code" href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4">init</a>(context_);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">init</a>(</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    core_memory-&gt;get_current_lock_list_memory(),</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    core_memory-&gt;get_current_lock_list_capacity(),</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535">init</a>(</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    core_memory-&gt;get_retrospective_lock_list_memory(),</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    core_memory-&gt;get_retrospective_lock_list_capacity(),</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>());</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_af25a0de9ca35e854b50d5f5621fb23dc"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc">foedus::xct::XctId::set_epoch</a></div><div class="ttdeci">void set_epoch(Epoch epoch) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00965">xct_id.hpp:965</a></div></div>
<div class="ttc" id="classfoedus_1_1savepoint_1_1SavepointManager_html_a82624b3d7edff1d02e29c1b8863dd4ee"><div class="ttname"><a href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee">foedus::savepoint::SavepointManager::get_initial_current_epoch</a></div><div class="ttdeci">Epoch get_initial_current_epoch() const </div><div class="ttdef"><b>Definition:</b> <a href="savepoint__manager_8cpp_source.html#l00036">savepoint_manager.cpp:36</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a1fb740dca84aaaed101bf9f4818c5b4f"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a1fb740dca84aaaed101bf9f4818c5b4f">foedus::EngineOptions::xct_</a></div><div class="ttdeci">xct::XctOptions xct_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00147">engine_options.hpp:147</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a449da7fea452dd81c194f94b28e7a7e2"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">foedus::xct::XctId::is_valid</a></div><div class="ttdeci">bool is_valid() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00973">xct_id.hpp:973</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a4f168d41ea00249fefe905def87e80c8"><div class="ttname"><a href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8">foedus::Engine::get_savepoint_manager</a></div><div class="ttdeci">savepoint::SavepointManager * get_savepoint_manager() const </div><div class="ttdoc">See Savepoint Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00053">engine.cpp:53</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageOptions_html_ac27b7919baf2e41da1057dd666442e6f"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageOptions.html#ac27b7919baf2e41da1057dd666442e6f">foedus::storage::StorageOptions::hot_threshold_</a></div><div class="ttdeci">uint64_t hot_threshold_</div><div class="ttdoc">Page hotness >= this value will be considered hot (hybrid CC only). </div><div class="ttdef"><b>Definition:</b> <a href="storage__options_8hpp_source.html#l00056">storage_options.hpp:56</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a3e40cfe4530b10e87344b42be16927e1"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a3e40cfe4530b10e87344b42be16927e1">foedus::EngineOptions::storage_</a></div><div class="ttdeci">storage::StorageOptions storage_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00145">engine_options.hpp:145</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ac79149bb167fa69b2afc7861c0c70483"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483">foedus::xct::CurrentLockList::init</a></div><div class="ttdeci">void init(LockEntry *array, uint32_t capacity, const memory::GlobalVolatilePageResolver &amp;resolver)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00086">retrospective_lock_list.cpp:86</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a27c23f58d7a94bed0dde10dd57a9dcce"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce">foedus::xct::XctId::set_ordinal</a></div><div class="ttdeci">void set_ordinal(uint32_t ordinal) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00980">xct_id.hpp:980</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1SysxctWorkspace_html_aa106365bb7c8ac68eb2bd67bd729bfb4"><div class="ttname"><a href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4">foedus::xct::SysxctWorkspace::init</a></div><div class="ttdeci">void init(thread::Thread *enclosing_thread)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00462">sysxct_impl.hpp:462</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a94b7a86ff61fec046d3c0645023fb535"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535">foedus::xct::RetrospectiveLockList::init</a></div><div class="ttdeci">void init(LockEntry *array, uint32_t capacity, const memory::GlobalVolatilePageResolver &amp;resolver)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00049">retrospective_lock_list.cpp:49</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_cgraph" id="classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a1542703e9d39b62b7269192a4db8e4b6" title="foedus::memory::NumaCore\lMemory::get_current_lock\l_list_capacity" alt="" coords="233,5,417,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ac62f3ab84bf9ac7f5b7a07c656d5190a" title="foedus::memory::NumaCore\lMemory::get_current_lock\l_list_memory" alt="" coords="233,85,417,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0" title="Returns the page resolver to convert volatile page ID to page pointer. " alt="" coords="220,165,431,221"/>
<area shape="rect" id="node5" href="classfoedus_1_1savepoint_1_1SavepointManager.html#a82624b3d7edff1d02e29c1b8863dd4ee" title="foedus::savepoint::\lSavepointManager::get\l_initial_current_epoch" alt="" coords="248,245,403,301"/>
<area shape="rect" id="node7" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a8f55dee0a9b4f7f55d22a60cd677f39e" title="foedus::memory::NumaCore\lMemory::get_local_work\l_memory" alt="" coords="233,325,417,381"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a318c160df3a63c1063665a1f19e741e8" title="foedus::memory::NumaCore\lMemory::get_local_work\l_memory_size" alt="" coords="233,405,417,461"/>
<area shape="rect" id="node11" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6" title="See Memory Manager. " alt="" coords="258,486,393,527"/>
<area shape="rect" id="node12" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1" title="foedus::Engine::get\l_options" alt="" coords="258,551,393,593"/>
<area shape="rect" id="node13" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#aa15ff5555f06dfff58b3fd11f60f2ca7" title="foedus::memory::NumaCore\lMemory::get_retrospective\l_lock_list_capacity" alt="" coords="233,617,417,673"/>
<area shape="rect" id="node14" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a11de415935b61a9f48e35719d500cbb9" title="foedus::memory::NumaCore\lMemory::get_retrospective\l_lock_list_memory" alt="" coords="233,697,417,753"/>
<area shape="rect" id="node15" href="classfoedus_1_1Engine.html#a4f168d41ea00249fefe905def87e80c8" title="See Savepoint Manager. " alt="" coords="255,778,395,819"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#a3f376657b7efceecf12e0cc504ab8c17" title="foedus::memory::NumaCore\lMemory::get_small_thread\l_local_memory_pieces" alt="" coords="233,844,417,900"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a94b7a86ff61fec046d3c0645023fb535" title="foedus::xct::Retrospective\lLockList::init" alt="" coords="239,925,411,966"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1CurrentLockList.html#ac79149bb167fa69b2afc7861c0c70483" title="foedus::xct::CurrentLock\lList::init" alt="" coords="243,990,407,1031"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1SysxctWorkspace.html#aa106365bb7c8ac68eb2bd67bd729bfb4" title="foedus::xct::SysxctWorkspace\l::init" alt="" coords="225,1055,426,1097"/>
<area shape="rect" id="node23" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="264,1121,387,1162"/>
<area shape="rect" id="node25" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc" title="foedus::xct::XctId\l::set_epoch" alt="" coords="264,1186,387,1227"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce" title="foedus::xct::XctId\l::set_ordinal" alt="" coords="264,1251,387,1293"/>
<area shape="rect" id="node6" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#a69656b017856d4e6b2bcda9085c0d316" title="foedus::savepoint::\lSavepointManagerPimpl\l::get_initial_current_epoch" alt="" coords="498,245,673,301"/>
<area shape="rect" id="node8" href="classfoedus_1_1memory_1_1AlignedMemory.html#af306ba60622e2a87f75ae93dc6c597b1" title="Returns the memory block. " alt="" coords="479,333,692,374"/>
<area shape="rect" id="node10" href="classfoedus_1_1memory_1_1AlignedMemory.html#a8db2e188293eaeebdf36cf39920efedd" title="Returns the byte size of the memory block. " alt="" coords="479,413,692,454"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846" title="foedus::xct::Retrospective\lLockList::clear_entries" alt="" coords="499,925,671,966"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1CurrentLockList.html#abb020fdb3951460f9c283d4700696ad2" title="foedus::xct::CurrentLock\lList::clear_entries" alt="" coords="503,990,667,1031"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1SysxctLockList.html#a6b39d3dca4a4abc65c8d02140cedeff3" title="foedus::xct::SysxctLockList\l::init" alt="" coords="493,1055,677,1097"/>
<area shape="rect" id="node24" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="524,1121,647,1162"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#afd81e3e00ee902aa673a9d3fe62be17b" title="foedus::xct::XctId\l::set_epoch_int" alt="" coords="524,1186,647,1227"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_icgraph" id="classfoedus_1_1xct_1_1Xct_a9dd027b4a8d21f45a60f82d110c5a529_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="220,5,404,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9a76be25f22fd49683d2a4138ab7b199"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::Xct::is_active </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns whether the object is an active transaction. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00121">121</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00307">foedus::xct::XctManagerPimpl::begin_xct()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00252">foedus::xct::RetrospectiveLockList::construct()</a>, <a class="el" href="thread_8cpp_source.html#l00076">foedus::thread::Thread::is_running_xct()</a>, <a class="el" href="masstree__cursor_8cpp_source.html#l00932">foedus::storage::masstree::MasstreeCursor::open()</a>, <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>, <a class="el" href="sequential__storage__pimpl_8cpp_source.html#l00213">foedus::storage::sequential::SequentialStorageControlBlock::optimistic_read_truncate_epoch()</a>, and <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{ <span class="keywordflow">return</span> active_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a9a76be25f22fd49683d2a4138ab7b199_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a9a76be25f22fd49683d2a4138ab7b199_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a9a76be25f22fd49683d2a4138ab7b199_icgraph" id="classfoedus_1_1xct_1_1Xct_a9a76be25f22fd49683d2a4138ab7b199_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="447,44,641,85"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="689,105,884,146"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad01b60a93f2e107d9c63e7c28799ac1a" title="User transactions related methods. " alt="" coords="194,164,389,205"/>
<area shape="rect" id="node8" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a38d217000e4df1d2d8e829c37218f93e" title="Fill out this retrospetive lock list for the next run of the given transaction. " alt="" coords="205,46,377,88"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1Thread.html#a0b69ebf736941b07378feabc8d23fd66" title="Returns if this thread is running an active transaction. " alt="" coords="216,229,367,270"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a226f6c437144cfb13f8e64baecb41d8a" title="foedus::storage::masstree\l::MasstreeCursor::open" alt="" coords="205,294,378,336"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="213,360,370,387"/>
<area shape="rect" id="node13" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a8b82d79a7b8aab753945617abbc40b7f" title="foedus::storage::sequential\l::SequentialStorageControlBlock\l::optimistic_read_truncate_epoch" alt="" coords="184,411,399,467"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="705,40,868,81"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="932,105,1095,146"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManager.html#a0cd2ffb750756de7132eabf6d6a284ce" title="Begins a new transaction on the thread. " alt="" coords="463,164,625,205"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeCursor.html#a3ca58d4acdbc13f9cfd341d95f45caa2" title="foedus::storage::masstree\l::MasstreeCursor::open\l_normalized" alt="" coords="457,287,631,343"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a69664ddec7511d43c04cee6d66b1c1a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::Xct::is_default_rll_for_this_xct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00125">125</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{ <span class="keywordflow">return</span> default_rll_for_this_xct_ ; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a69664ddec7511d43c04cee6d66b1c1a2_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a69664ddec7511d43c04cee6d66b1c1a2_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a69664ddec7511d43c04cee6d66b1c1a2_icgraph" id="classfoedus_1_1xct_1_1Xct_a69664ddec7511d43c04cee6d66b1c1a2_icgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="212,13,369,39"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aae4b0ccd575851276efddf752c90a273"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::Xct::is_enable_rll_for_this_xct </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00123">123</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00954">foedus::xct::XctManagerPimpl::abort_xct()</a>, and <a class="el" href="xct_8cpp_source.html#l00168">foedus::xct::operator&lt;&lt;()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{ <span class="keywordflow">return</span> enable_rll_for_this_xct_; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_aae4b0ccd575851276efddf752c90a273_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_aae4b0ccd575851276efddf752c90a273_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_aae4b0ccd575851276efddf752c90a273_icgraph" id="classfoedus_1_1xct_1_1Xct_aae4b0ccd575851276efddf752c90a273_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a71f565f69929d90febd7beb6b1dca696" title="foedus::xct::XctManagerPimpl\l::abort_xct" alt="" coords="212,39,407,80"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1xct.html#adf92a2ee952c5b71c00bad525666fe12" title="foedus::xct::operator\&lt;\&lt;" alt="" coords="231,105,388,131"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#aa176159e8ab007d35ea467226f5d2475" title="Aborts the currently running transaction on the thread. " alt="" coords="471,5,633,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="455,71,649,112"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="697,71,860,112"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab8523ae5dcf4ee3d4554e291ab355230"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::xct::Xct::is_read_only </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if this transaction makes no writes. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00145">145</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00343">foedus::xct::XctManagerPimpl::precommit_xct()</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                           {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> write_set_size_ == 0 &amp;&amp; lock_free_write_set_size_ == 0;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ab8523ae5dcf4ee3d4554e291ab355230_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ab8523ae5dcf4ee3d4554e291ab355230_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ab8523ae5dcf4ee3d4554e291ab355230_icgraph" id="classfoedus_1_1xct_1_1Xct_ab8523ae5dcf4ee3d4554e291ab355230_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="184,5,379,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="427,5,589,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a208310505c3d16cf2dc10f94f968d4a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::issue_next_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&#160;</td>
          <td class="paramname"><em>max_xct_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfoedus_1_1Epoch.html">Epoch</a> *&#160;</td>
          <td class="paramname"><em>epoch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called while a successful commit of xct to issue a new xct id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">max_xct_id</td><td>largest xct_id this transaction depends on. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">epoch</td><td>(in) The <em>minimal</em> epoch this transaction has to be in. (out) the epoch this transaction ended up with, which is epoch+1 only when it found ordinal is full for the current epoch.</td></tr>
  </table>
  </dd>
</dl>
<p>This method issues a <a class="el" href="structfoedus_1_1xct_1_1XctId.html" title="Persistent status part of Transaction ID. ">XctId</a> that satisfies the following properties (see [TU13]). Clarification: "larger" hereby means either a) the epoch is larger or b) the epoch is same and ordinal is larger. </p><ul>
<li>Larger than the most recent <a class="el" href="structfoedus_1_1xct_1_1XctId.html" title="Persistent status part of Transaction ID. ">XctId</a> issued for read-write transaction on this thread. </li>
<li>Larger than every <a class="el" href="structfoedus_1_1xct_1_1XctId.html" title="Persistent status part of Transaction ID. ">XctId</a> of any record read or written by this transaction. </li>
<li>In the <em>returned(out)</em> epoch (which is same or larger than the given(in) epoch).</li>
</ul>
<p>This method also advancec epoch when ordinal is full for the current epoch. This method never fails. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00134">134</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00070">foedus::xct::XctManager::advance_current_global_epoch()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="epoch_8hpp_source.html#l00176">foedus::Epoch::before()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00057">foedus::xct::XctManager::get_current_global_epoch()</a>, <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00060">foedus::xct::XctManager::get_current_global_epoch_weak()</a>, <a class="el" href="xct__id_8hpp_source.html#l00964">foedus::xct::XctId::get_epoch()</a>, <a class="el" href="xct__id_8hpp_source.html#l00976">foedus::xct::XctId::get_ordinal()</a>, <a class="el" href="engine_8cpp_source.html#l00061">foedus::Engine::get_xct_manager()</a>, <a class="el" href="xct__id_8hpp_source.html#l00973">foedus::xct::XctId::is_valid()</a>, <a class="el" href="xct__id_8hpp_source.html#l00898">foedus::xct::kMaxXctOrdinal</a>, <a class="el" href="xct_8hpp_source.html#l00386">remember_previous_xct_id()</a>, <a class="el" href="xct__id_8hpp_source.html#l00965">foedus::xct::XctId::set_epoch()</a>, <a class="el" href="xct__id_8hpp_source.html#l00980">foedus::xct::XctId::set_ordinal()</a>, <a class="el" href="xct__id_8hpp_source.html#l01059">foedus::xct::XctId::store_max()</a>, and <a class="el" href="compiler_8hpp_source.html#l00104">UNLIKELY</a>.</p>

<p>Referenced by <a class="el" href="xct__manager__pimpl_8cpp_source.html#l00868">foedus::xct::XctManagerPimpl::precommit_xct_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                                       {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">is_valid</a>());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// invariant 1: Larger than latest XctId of this thread.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    XctId new_id = id_;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// invariant 2: Larger than every XctId of any record read or written by this transaction.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    new_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#a2878cd14b103f72c8bce5a330e03e2b2">store_max</a>(max_xct_id);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// invariant 3: in the epoch</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (new_id.get_epoch().before(*epoch)) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      new_id.set_epoch(*epoch);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      new_id.set_ordinal(0);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_id.get_epoch() == *epoch);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// Now, is it possible to get an ordinal one larger than this one?</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(new_id.get_ordinal() &gt;= <a class="code" href="group__XCT.html#ga862d4c5383d7344a8cfd44e6c060d6db">kMaxXctOrdinal</a>)) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="comment">// oh, that&#39;s rare.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Reached the maximum ordinal in this epoch. Advancing current epoch&quot;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; just for this reason. It&#39;s rare, but not an error.&quot;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">advance_current_global_epoch</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(epoch-&gt;before(engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">get_current_global_epoch</a>()));</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="comment">// we have already issued fence by now, so we can use nonatomic version.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      *epoch = engine_-&gt;<a class="code" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">get_xct_manager</a>()-&gt;<a class="code" href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0">get_current_global_epoch_weak</a>();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">continue</span>;  <span class="comment">// try again with this epoch.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(new_id.get_ordinal() &lt; <a class="code" href="group__XCT.html#ga862d4c5383d7344a8cfd44e6c060d6db">kMaxXctOrdinal</a>);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    new_id.set_ordinal(new_id.get_ordinal() + 1U);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classfoedus_1_1xct_1_1Xct.html#a054cf2fca2ce0e5047c817ed10ae1a80">remember_previous_xct_id</a>(new_id);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a4578dd6dab7925b95d7810335ae5cec0"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0">foedus::xct::XctManager::get_current_global_epoch_weak</a></div><div class="ttdeci">Epoch get_current_global_epoch_weak() const </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00060">xct_manager_pimpl.cpp:60</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_a419a270d62522ede9bd871dd4adc0e2a"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a">foedus::xct::XctManager::get_current_global_epoch</a></div><div class="ttdeci">Epoch get_current_global_epoch() const </div><div class="ttdoc">Returns the current global epoch, the epoch a newly started transaction will be in. </div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00057">xct_manager_pimpl.cpp:57</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a449da7fea452dd81c194f94b28e7a7e2"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2">foedus::xct::XctId::is_valid</a></div><div class="ttdeci">bool is_valid() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00973">xct_id.hpp:973</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a054cf2fca2ce0e5047c817ed10ae1a80"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a054cf2fca2ce0e5047c817ed10ae1a80">foedus::xct::Xct::remember_previous_xct_id</a></div><div class="ttdeci">void remember_previous_xct_id(XctId new_id)</div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00386">xct.hpp:386</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_a2878cd14b103f72c8bce5a330e03e2b2"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#a2878cd14b103f72c8bce5a330e03e2b2">foedus::xct::XctId::store_max</a></div><div class="ttdeci">void store_max(const XctId &amp;other) __attribute__((always_inline))</div><div class="ttdoc">Kind of std::max(this, other). </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01059">xct_id.hpp:1059</a></div></div>
<div class="ttc" id="group__XCT_html_ga862d4c5383d7344a8cfd44e6c060d6db"><div class="ttname"><a href="group__XCT.html#ga862d4c5383d7344a8cfd44e6c060d6db">foedus::xct::kMaxXctOrdinal</a></div><div class="ttdeci">const uint64_t kMaxXctOrdinal</div><div class="ttdoc">Maximum value of in-epoch ordinal. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00898">xct_id.hpp:898</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a48d5e1f7ce2f70161c253f650c75ed95"><div class="ttname"><a href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95">foedus::Engine::get_xct_manager</a></div><div class="ttdeci">xct::XctManager * get_xct_manager() const </div><div class="ttdoc">See Transaction Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00061">engine.cpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1XctManager_html_aa75089821b48c98a00cd7e4ddc0615da"><div class="ttname"><a href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da">foedus::xct::XctManager::advance_current_global_epoch</a></div><div class="ttdeci">void advance_current_global_epoch()</div><div class="ttdoc">Requests to advance the current global epoch as soon as possible and blocks until it actually does...</div><div class="ttdef"><b>Definition:</b> <a href="xct__manager__pimpl_8cpp_source.html#l00070">xct_manager_pimpl.cpp:70</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_cgraph" id="classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManager.html#aa75089821b48c98a00cd7e4ddc0615da" title="Requests to advance the current global epoch as soon as possible and blocks until it actually does..." alt="" coords="208,217,415,259"/>
<area shape="rect" id="node15" href="classfoedus_1_1Epoch.html#aaef554452ea9ac7b072af98cde1558dc" title="Returns if this epoch is before the given epoch in the sense of distance defined in RFC 1982..." alt="" coords="756,371,904,398"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1XctManager.html#a419a270d62522ede9bd871dd4adc0e2a" title="Returns the current global epoch, the epoch a newly started transaction will be in. " alt="" coords="485,64,663,105"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1XctManager.html#a4578dd6dab7925b95d7810335ae5cec0" title="foedus::xct::XctManager\l::get_current_global_epoch_weak" alt="" coords="204,644,419,685"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="769,473,891,515"/>
<area shape="rect" id="node22" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f" title="foedus::xct::XctId\l::get_ordinal" alt="" coords="769,539,891,580"/>
<area shape="rect" id="node23" href="classfoedus_1_1Engine.html#a48d5e1f7ce2f70161c253f650c75ed95" title="See Transaction Manager. " alt="" coords="244,709,379,751"/>
<area shape="rect" id="node24" href="structfoedus_1_1xct_1_1XctId.html#a449da7fea452dd81c194f94b28e7a7e2" title="foedus::xct::XctId\l::is_valid" alt="" coords="513,593,635,635"/>
<area shape="rect" id="node25" href="classfoedus_1_1xct_1_1Xct.html#a054cf2fca2ce0e5047c817ed10ae1a80" title="foedus::xct::Xct::remember\l_previous_xct_id" alt="" coords="222,360,401,401"/>
<area shape="rect" id="node27" href="structfoedus_1_1xct_1_1XctId.html#af25a0de9ca35e854b50d5f5621fb23dc" title="foedus::xct::XctId\l::set_epoch" alt="" coords="250,775,373,816"/>
<area shape="rect" id="node29" href="structfoedus_1_1xct_1_1XctId.html#a27c23f58d7a94bed0dde10dd57a9dcce" title="foedus::xct::XctId\l::set_ordinal" alt="" coords="250,840,373,881"/>
<area shape="rect" id="node30" href="structfoedus_1_1xct_1_1XctId.html#a2878cd14b103f72c8bce5a330e03e2b2" title="Kind of std::max(this, other). " alt="" coords="250,425,373,467"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a925da0bb4b846daa21eb947e4f67b0c6" title="foedus::xct::XctManagerPimpl\l::advance_current_global_epoch" alt="" coords="471,188,677,229"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a787bb892079cb32d5a2065188825a522" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch" alt="" coords="733,5,927,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1Epoch.html#a786afd92afdc87b54dfa11ef093f06f3" title="foedus::Epoch::one_more" alt="" coords="745,254,915,281"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a03678427b184e7ce71f9bbb164dd0bad" title="foedus::xct::XctManagerPimpl\l::set_requested_global_epoch" alt="" coords="733,305,927,347"/>
<area shape="rect" id="node9" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#afce787897428bd372c67224acd3e8ea7" title="foedus::xct::XctManagerPimpl\l::wakeup_epoch_chime_thread" alt="" coords="729,71,931,112"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="987,133,1165,175"/>
<area shape="rect" id="node14" href="classfoedus_1_1soc_1_1SharedPolling.html#a9fc7bfaf57e1f2224be9869a8e9708d3" title="Unconditionally wait for signal. " alt="" coords="741,188,919,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a6071efec3ffc3876192101db2a1873b4" title="foedus::xct::XctManagerPimpl\l::get_requested_global_epoch" alt="" coords="979,251,1173,292"/>
<area shape="rect" id="node8" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf" title="Returns the raw integer representation. " alt="" coords="1005,317,1147,343"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SharedPolling.html#ae523f3b3bda39c0c81bfb5cb0d5ad626" title="Signal it to let waiters exit. " alt="" coords="987,68,1165,109"/>
<area shape="rect" id="node11" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="1230,129,1403,171"/>
<area shape="rect" id="node12" href="namespacefoedus_1_1soc.html#ad6b40c6c8e2db3fbf1bbdf6daa025275" title="foedus::soc::ugly_atomic_inc" alt="" coords="1221,75,1412,102"/>
<area shape="rect" id="node16" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="999,371,1153,398"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#acd49fd67f3459df687ed08d5d8b54082" title="foedus::xct::XctManagerPimpl\l::get_current_global_epoch_weak" alt="" coords="467,659,681,700"/>
<area shape="rect" id="node21" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="1015,473,1137,515"/>
<area shape="rect" id="node26" href="structfoedus_1_1xct_1_1XctId.html#ac151128ff0040de166018da6133f8d85" title="Returns if this XctId is before other in serialization order, meaning this is either an invalid (unus..." alt="" coords="513,419,635,460"/>
<area shape="rect" id="node28" href="structfoedus_1_1xct_1_1XctId.html#afd81e3e00ee902aa673a9d3fe62be17b" title="foedus::xct::XctId\l::set_epoch_int" alt="" coords="513,775,635,816"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_icgraph" id="classfoedus_1_1xct_1_1Xct_a208310505c3d16cf2dc10f94f968d4a4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="204,5,399,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="447,5,641,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="689,5,884,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="932,5,1095,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abc3a6688cdf5249c46613a1988b71975"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::on_record_read </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>intended_for_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>tid_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a> *&#160;</td>
          <td class="paramname"><em>observed_xid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1ReadXctAccess.html">ReadXctAccess</a> **&#160;</td>
          <td class="paramname"><em>read_set_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>no_readset_if_moved</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>no_readset_if_next_layer</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The general logic invoked for every record read. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">intended_for_write</td><td>Hints whether the record will be written after this read </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">tid_address</td><td>The record's TID address </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">observed_xid</td><td>Returns the observed XID. See below for more details. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">read_set_address</td><td>If this method took a read-set, points to the read-set record. nullptr if it didn't. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">no_readset_if_moved</td><td>When this is true, and if we observe an XID whose is_moved() is on, we do not add it to readset. See the comment below for more details. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">no_readset_if_next_layer</td><td>When this is true, and if we observe an XID whose is_next_layer() is on, we do not add it to readset. See the comment below for more details. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The only possible error is read-set full. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>tid_address != nullptr &amp;&amp; observed_xid != nullptr </dd>
<dd>
tid_address must be pointing to somewhere in an aligned data page. We reinterpret_cast the address to acquire the enclosing page and its header. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>returns error code, or !observed_xid-&gt;is_being_written().</dd></dl>
<p>You must call this method <b>BEFORE</b> reading the data, otherwise it violates the commit protocol. This method does a few things listed below:</p>
<dl class="section user"><dt>Observes XID</dt><dd>Observes XID in the TID and spins until we at least observe an XID that is !observed_xid-&gt;is_being_written(). However, remember that concurrent threads might write the data and XID after this method leaves. If you want to make sure your "read" is strictly as of one time point, you must call this method in a loop. In terms of serializability, you don't need it because commit protocol will catch it.</dd></dl>
<dl class="section user"><dt>Takes lock(s) recommended by RLL or temperature stat.</dt><dd>This happens only when MOCC is on, and the page is a volatile page. This method might take a PCC-like lock on this record, and also other locks to keep the transaction in canonical mode.</dd></dl>
<dl class="section user"><dt>Add to read set</dt><dd>This happens only when the transaction has higher isolation level (serializable), and the page is a volatile page. To protect the read, we add the observed XID and the address to read set of this transaction.</dd></dl>
<dl class="section user"><dt>no_readset_if_moved/next_layer</dt><dd>After invoking <a class="el" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. ">on_record_read()</a>, we might find the observed TID tells that the record is now permanently out of our interest (e.g., moved/next-layer). In that case, the caller doesn't want to have the entry in read-set. These flags tell this method to not add such entries to read-set. Note that such a protocol is safe <b>because</b> moved/next-layer flags in the storage type is immutable once set, eg masstree storage only changes moved-flag off-&gt;on, not the other way around. deleted flag is mutable (can off-&gt;on-&gt;off), so we can't skip such readset. Use it appropriately according to the protcol in the storage type. If you are unsure, don't give "true" to these parameters. Having unnecessary read-sets is just a performance issue, not correctness. </dd></dl>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00258">258</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00395">add_to_read_set()</a>, <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00428">foedus::storage::assert_within_valid_volatile_page()</a>, <a class="el" href="error__code_8hpp_source.html#l00155">CHECK_ERROR_CODE</a>, <a class="el" href="storage__id_8hpp_source.html#l00230">foedus::storage::construct_volatile_page_pointer()</a>, <a class="el" href="thread_8cpp_source.html#l00125">foedus::thread::Thread::get_global_volatile_page_resolver()</a>, <a class="el" href="page_8hpp_source.html#l00336">foedus::storage::Page::get_header()</a>, <a class="el" href="storage__id_8hpp_source.html#l00201">foedus::storage::VolatilePagePointer::get_numa_node()</a>, <a class="el" href="storage__id_8hpp_source.html#l00202">foedus::storage::VolatilePagePointer::get_offset()</a>, <a class="el" href="xct__id_8hpp_source.html#l01038">foedus::xct::XctId::is_being_written()</a>, <a class="el" href="xct__id_8hpp_source.html#l01041">foedus::xct::XctId::is_moved()</a>, <a class="el" href="xct__id_8hpp_source.html#l01042">foedus::xct::XctId::is_next_layer()</a>, <a class="el" href="xct__id_8hpp_source.html#l00065">foedus::xct::kDirtyRead</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, <a class="el" href="xct__id_8hpp_source.html#l00078">foedus::xct::kSnapshot</a>, <a class="el" href="atomic__fences_8hpp_source.html#l00046">foedus::assorted::memory_fence_acquire()</a>, <a class="el" href="xct_8cpp_source.html#l00334">on_record_read_take_locks_if_needed()</a>, <a class="el" href="xct__id_8hpp_source.html#l01190">foedus::xct::XctId::spin_while_being_written()</a>, <a class="el" href="page_8hpp_source.html#l00196">foedus::storage::PageHeader::storage_id_</a>, <a class="el" href="page_8hpp_source.html#l00395">foedus::storage::to_page()</a>, <a class="el" href="sysxct__impl_8hpp_source.html#l00063">foedus::xct::to_universal_lock_id()</a>, and <a class="el" href="xct__id_8hpp_source.html#l01137">foedus::xct::RwLockableXctId::xct_id_</a>.</p>

<p>Referenced by <a class="el" href="array__storage__pimpl_8cpp_source.html#l00372">foedus::storage::array::ArrayStoragePimpl::get_record()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00419">foedus::storage::array::ArrayStoragePimpl::get_record_for_write()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00746">foedus::storage::array::ArrayStoragePimpl::get_record_for_write_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00403">foedus::storage::array::ArrayStoragePimpl::get_record_payload()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00717">foedus::storage::array::ArrayStoragePimpl::get_record_payload_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00388">foedus::storage::array::ArrayStoragePimpl::get_record_primitive()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00678">foedus::storage::array::ArrayStoragePimpl::get_record_primitive_batch()</a>, <a class="el" href="array__storage__pimpl_8cpp_source.html#l00486">foedus::storage::array::ArrayStoragePimpl::increment_record()</a>, <a class="el" href="xct_8hpp_source.html#l00286">on_record_read()</a>, <a class="el" href="masstree__record__location_8cpp_source.html#l00027">foedus::storage::masstree::RecordLocation::populate_logical()</a>, and <a class="el" href="hash__record__location_8cpp_source.html#l00027">foedus::storage::hash::RecordLocation::populate_logical()</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                 {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tid_address);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(observed_xid);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(read_set_address);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  *read_set_address = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keyword">const</span> storage::Page* page = <a class="code" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25">storage::to_page</a>(reinterpret_cast&lt;const void*&gt;(tid_address));</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; page_header = page-&gt;get_header();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (page_header.snapshot_) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// Snapshot page is immutable.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// No read-set, lock, or check for being_written flag needed.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    *observed_xid = tid_address-&gt;xct_id_;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_xid-&gt;is_being_written());</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// No read-set or read-locks needed in non-serializable transactions.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// Also no point to conservatively take write-locks recommended by RLL</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// because we don&#39;t take any read locks in these modes, so the</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">// original SILO&#39;s write-lock protocol is enough and abort-free.</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(isolation_level_ == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">kDirtyRead</a> || isolation_level_ == <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934">kSnapshot</a>);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    *observed_xid = tid_address-&gt;xct_id_.spin_while_being_written();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_xid-&gt;is_being_written());</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  storage::VolatilePagePointer vpp(<a class="code" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">storage::construct_volatile_page_pointer</a>(page_header.page_id_));</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, tid_address);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(vpp.get_numa_node() &lt; resolver.numa_node_count_);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(vpp.get_offset() &gt;= resolver.begin_);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(vpp.get_offset() &lt; resolver.end_);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// This is a serializable transaction, and we are reading a record from a volatile page.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// We might take a pessimisitic lock for the record, which is our MOCC protocol.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="comment">// However, we need to do this _before_ observing XctId. Otherwise there is a</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// chance of aborts even with the lock.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a> lock_id = <a class="code" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">to_universal_lock_id</a>(</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    vpp.get_numa_node(),</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    vpp.get_offset(),</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keyword">reinterpret_cast&lt;</span>uintptr_t<span class="keyword">&gt;</span>(tid_address));</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">on_record_read_take_locks_if_needed</a>(intended_for_write, page, lock_id, tid_address);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  *observed_xid = tid_address-&gt;xct_id_.spin_while_being_written();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!observed_xid-&gt;is_being_written());</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// Now that we observe XID in its own (non-inlined) function, probably not needed...</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">assorted::memory_fence_acquire</a>();  <span class="comment">// following reads must happen *after* observing xid</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// check non-reversible flags and skip read-set</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (observed_xid-&gt;is_moved() &amp;&amp; no_readset_if_moved) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (observed_xid-&gt;is_next_layer() &amp;&amp; no_readset_if_next_layer) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">const</span> <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id = page-&gt;get_header().storage_id_;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(storage_id != 0);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">add_to_read_set</a>(</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    storage_id,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    *observed_xid,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    lock_id,</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    tid_address,</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    read_set_address));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_aa77cde98794b5a55e0d295284acb3e6d"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">foedus::thread::Thread::get_global_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00125">thread.cpp:125</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a67553e6e570cdc0b371992db058cf7cb"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb">foedus::xct::Xct::add_to_read_set</a></div><div class="ttdeci">ErrorCode add_to_read_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address, ReadXctAccess **read_set_address)</div><div class="ttdoc">Add the given record to the read set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00395">xct.cpp:395</a></div></div>
<div class="ttc" id="group__STORAGE_html_gaa114fc1859c2d4cb8b9e2021cb11cb25"><div class="ttname"><a href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25">foedus::storage::to_page</a></div><div class="ttdeci">Page * to_page(const void *address)</div><div class="ttdoc">super-dirty way to obtain Page the address belongs to. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00395">page.hpp:395</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga595ca7fc4a3011a9704a883a25141e5f"><div class="ttname"><a href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">foedus::storage::StorageId</a></div><div class="ttdeci">uint32_t StorageId</div><div class="ttdoc">Unique ID for storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00055">storage_id.hpp:55</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a993994249cc0179cf24c63cc329e7934">foedus::xct::kSnapshot</a></div><div class="ttdoc">Snapshot isolation (SI), meaning the transaction reads a consistent and complete image of the databas...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00078">xct_id.hpp:78</a></div></div>
<div class="ttc" id="group__XCT_html_ga21ce32adf787156f3dd820273426026a"><div class="ttname"><a href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">foedus::xct::UniversalLockId</a></div><div class="ttdeci">uintptr_t UniversalLockId</div><div class="ttdoc">Universally ordered identifier of each lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00134">xct_id.hpp:134</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a94b21516b530d0be271c6005a72009ad"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad">foedus::xct::to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId to_universal_lock_id(storage::VolatilePagePointer page_id, uintptr_t addr)</div><div class="ttdef"><b>Definition:</b> <a href="sysxct__impl_8hpp_source.html#l00063">sysxct_impl.hpp:63</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a263602e0a73eedbe5f32128635106e17"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">foedus::storage::assert_within_valid_volatile_page</a></div><div class="ttdeci">void assert_within_valid_volatile_page(const memory::GlobalVolatilePageResolver &amp;resolver, const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00428">page.hpp:428</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_ab43ebf3a25aedb3e6ffeb3d9724bd080"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080">foedus::xct::Xct::on_record_read_take_locks_if_needed</a></div><div class="ttdeci">void on_record_read_take_locks_if_needed(bool intended_for_write, const storage::Page *page_address, UniversalLockId lock_id, RwLockableXctId *tid_address)</div><div class="ttdoc">subroutine of on_record_read() to take lock(s). </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00334">xct.cpp:334</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a67e1af2de6e13b000e66609cf60849b6"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6">foedus::storage::construct_volatile_page_pointer</a></div><div class="ttdeci">VolatilePagePointer construct_volatile_page_pointer(uint64_t word)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00230">storage_id.hpp:230</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaf84f9944a16c5848f69beacdfeedf939"><div class="ttname"><a href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">foedus::assorted::memory_fence_acquire</a></div><div class="ttdeci">void memory_fence_acquire()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acquire). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00046">atomic_fences.hpp:46</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a11a892f8d919f2b279058a3adda57011">foedus::xct::kDirtyRead</a></div><div class="ttdoc">No guarantee at all for reads, for the sake of best performance and scalability. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00065">xct_id.hpp:65</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_cgraph" id="classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="204,350,345,392"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="981,110,1143,152"/>
<area shape="rect" id="node6" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1227,52,1421,93"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1476,110,1637,152"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="433,409,608,450"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1237,169,1411,210"/>
<area shape="rect" id="node11" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1482,425,1631,466"/>
<area shape="rect" id="node16" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="979,227,1145,254"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="445,526,596,582"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="213,574,336,616"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="213,640,336,681"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="213,705,336,746"/>
<area shape="rect" id="node21" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="188,770,361,812"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="191,843,358,899"/>
<area shape="rect" id="node50" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="188,924,361,965"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="435,278,607,334"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="719,336,864,377"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="714,402,869,458"/>
<area shape="rect" id="node12" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="961,329,1163,370"/>
<area shape="rect" id="node13" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1247,316,1401,357"/>
<area shape="rect" id="node15" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1223,235,1425,291"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1479,280,1634,321"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="435,657,607,698"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="435,722,607,764"/>
<area shape="rect" id="node25" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="435,788,607,829"/>
<area shape="rect" id="node26" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="445,918,596,960"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="439,853,603,894"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="1475,1286,1639,1328"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="1480,1193,1633,1234"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="419,1049,623,1090"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="409,1114,632,1156"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="433,984,609,1025"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846" title="foedus::xct::Retrospective\lLockList::clear_entries" alt="" coords="435,1257,607,1298"/>
<area shape="rect" id="node27" href="classfoedus_1_1xct_1_1Xct.html#ae84fb0f1c8c5c81bac74e79e62da49a6" title="foedus::xct::Xct::get\l_hot_threshold_for_this_xct" alt="" coords="701,918,882,960"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="1687,836,1883,877"/>
<area shape="rect" id="node31" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="1242,865,1406,906"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="1242,697,1406,738"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44" title="foedus::xct::LockEntry::set" alt="" coords="702,662,881,688"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1931,836,2143,877"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="1475,865,1639,906"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="1703,1286,1867,1328"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="689,1049,893,1090"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="993,1033,1131,1074"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="970,1098,1154,1140"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="1221,1164,1427,1205"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="680,1114,903,1156"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="951,1164,1173,1205"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="699,984,883,1025"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="980,916,1144,957"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_icgraph" id="classfoedus_1_1xct_1_1Xct_abc3a6688cdf5249c46613a1988b71975_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="207,5,373,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="207,85,373,141"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="207,165,373,221"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="207,245,373,301"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="207,325,373,381"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="207,405,373,461"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="207,485,373,541"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="188,565,392,621"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="223,646,357,687"/>
<area shape="rect" id="node19" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="201,712,379,768"/>
<area shape="rect" id="node42" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="201,1009,379,1065"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="445,13,619,54"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="445,85,619,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="445,165,619,221"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="445,245,619,301"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="445,325,619,381"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="445,405,619,461"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="445,485,619,541"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="447,565,617,621"/>
<area shape="rect" id="node20" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="693,456,867,512"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="443,696,621,752"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="445,929,619,985"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="440,1068,624,1124"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="947,303,1162,345"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="955,369,1154,410"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="968,661,1141,717"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="968,435,1141,491"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="936,515,1173,557"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="939,763,1170,805"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="961,581,1148,637"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="693,296,867,352"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="693,376,867,432"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="693,536,867,592"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="685,616,875,672"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="683,696,877,752"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="687,776,873,832"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="685,856,875,912"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="674,937,886,978"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="672,1002,888,1043"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="693,1068,867,1124"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="693,1148,867,1204"/>
<area shape="rect" id="node43" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="441,1228,623,1284"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="689,1228,871,1284"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="689,1308,871,1364"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="964,1068,1145,1124"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="973,1148,1137,1204"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="973,1228,1137,1284"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="953,1308,1156,1364"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#ac9c35890555ddb10d908b77602a1f28c" title="foedus::storage::hash\l::HashStoragePimpl::insert\l_record" alt="" coords="965,1388,1144,1444"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4e7e1454bc26ac3f32116125879d13ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> foedus::xct::Xct::on_record_read </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>intended_for_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>tid_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>no_readset_if_moved</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>no_readset_if_next_layer</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shortcut for a case when you don't need observed_xid/read_set_address back. </p>

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00286">286</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="xct_8cpp_source.html#l00258">on_record_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                           {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    XctId dummy_xctid;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    ReadXctAccess* dummy_read_set;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975">on_record_read</a>(</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      intended_for_write,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      tid_address,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      &amp;dummy_xctid,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      &amp;dummy_read_set,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      no_readset_if_moved ,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      no_readset_if_next_layer);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  }</div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_abc3a6688cdf5249c46613a1988b71975"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975">foedus::xct::Xct::on_record_read</a></div><div class="ttdeci">ErrorCode on_record_read(bool intended_for_write, RwLockableXctId *tid_address, XctId *observed_xid, ReadXctAccess **read_set_address, bool no_readset_if_moved=false, bool no_readset_if_next_layer=false)</div><div class="ttdoc">The general logic invoked for every record read. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00258">xct.cpp:258</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a4e7e1454bc26ac3f32116125879d13ed_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a4e7e1454bc26ac3f32116125879d13ed_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a4e7e1454bc26ac3f32116125879d13ed_cgraph" id="classfoedus_1_1xct_1_1Xct_a4e7e1454bc26ac3f32116125879d13ed_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="188,383,323,424"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1Xct.html#a67553e6e570cdc0b371992db058cf7cb" title="Add the given record to the read set of this transaction. " alt="" coords="387,324,528,365"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1163,103,1326,144"/>
<area shape="rect" id="node7" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="1410,52,1603,93"/>
<area shape="rect" id="node8" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="1659,111,1820,152"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="616,532,791,573"/>
<area shape="rect" id="node11" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1420,229,1593,271"/>
<area shape="rect" id="node12" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1665,353,1814,395"/>
<area shape="rect" id="node16" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1162,270,1327,297"/>
<area shape="rect" id="node17" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="628,451,779,507"/>
<area shape="rect" id="node18" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0" title="foedus::xct::XctId\l::is_being_written" alt="" coords="396,492,519,533"/>
<area shape="rect" id="node19" href="structfoedus_1_1xct_1_1XctId.html#a41264f4ced33dae443651f57bc09e964" title="foedus::xct::XctId\l::is_moved" alt="" coords="396,557,519,599"/>
<area shape="rect" id="node20" href="structfoedus_1_1xct_1_1XctId.html#aa3d33ca4fe97b735ce59594993a1dd94" title="foedus::xct::XctId\l::is_next_layer" alt="" coords="396,623,519,664"/>
<area shape="rect" id="node21" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939" title="Equivalent to std::atomic_thread_fence(std::memory_order_acquire). " alt="" coords="371,688,544,729"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1Xct.html#ab43ebf3a25aedb3e6ffeb3d9724bd080" title="subroutine of on_record_read() to take lock(s). " alt="" coords="374,795,541,851"/>
<area shape="rect" id="node50" href="structfoedus_1_1xct_1_1XctId.html#a5c7082819f333ce0b621c2c34fe91a41" title="Returns a version of this Xid whose being_written flag is off. " alt="" coords="371,876,544,917"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a1ff8ccbccdede750fb5a18b4da505ad9" title="foedus::xct::Retrospective\lLockList::get_volatile\l_page_resolver" alt="" coords="617,321,789,377"/>
<area shape="rect" id="node5" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="901,339,1047,380"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="897,405,1051,461"/>
<area shape="rect" id="node13" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="1143,372,1346,413"/>
<area shape="rect" id="node14" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1429,295,1584,336"/>
<area shape="rect" id="node15" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1405,411,1608,467"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="617,1028,789,1069"/>
<area shape="rect" id="node24" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="617,1159,789,1200"/>
<area shape="rect" id="node25" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="617,1276,789,1317"/>
<area shape="rect" id="node26" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="628,649,779,691"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="621,715,785,756"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="1657,1085,1821,1127"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="1663,899,1816,940"/>
<area shape="rect" id="node38" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="601,963,805,1004"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="592,1093,815,1135"/>
<area shape="rect" id="node46" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="615,832,791,873"/>
<area shape="rect" id="node49" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846" title="foedus::xct::Retrospective\lLockList::clear_entries" alt="" coords="617,897,789,939"/>
<area shape="rect" id="node27" href="classfoedus_1_1xct_1_1Xct.html#ae84fb0f1c8c5c81bac74e79e62da49a6" title="foedus::xct::Xct::get\l_hot_threshold_for_this_xct" alt="" coords="883,485,1065,527"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="1869,737,2065,779"/>
<area shape="rect" id="node31" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="1425,755,1589,796"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="1657,704,1821,745"/>
<area shape="rect" id="node34" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44" title="foedus::xct::LockEntry::set" alt="" coords="885,602,1063,629"/>
<area shape="rect" id="node30" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="2113,737,2325,779"/>
<area shape="rect" id="node32" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="1657,769,1821,811"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="1885,1085,2049,1127"/>
<area shape="rect" id="node39" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="872,975,1076,1016"/>
<area shape="rect" id="node40" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="1175,987,1314,1028"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="1153,921,1337,963"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="1404,1045,1609,1087"/>
<area shape="rect" id="node44" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="863,1072,1085,1113"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="1133,1104,1356,1145"/>
<area shape="rect" id="node47" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="882,889,1066,931"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="1163,856,1327,897"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab43ebf3a25aedb3e6ffeb3d9724bd080"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::on_record_read_take_locks_if_needed </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>intended_for_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a> *&#160;</td>
          <td class="paramname"><em>page_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__XCT.html#ga21ce32adf787156f3dd820273426026a">UniversalLockId</a>&#160;</td>
          <td class="paramname"><em>lock_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1RwLockableXctId.html">RwLockableXctId</a> *&#160;</td>
          <td class="paramname"><em>tid_address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>subroutine of <a class="el" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. ">on_record_read()</a> to take lock(s). </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00334">334</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="page_8hpp_source.html#l00428">foedus::storage::assert_within_valid_volatile_page()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00193">foedus::xct::RetrospectiveLockList::binary_search()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00059">foedus::xct::RetrospectiveLockList::clear_entries()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00847">foedus::thread::Thread::cll_giveup_all_locks_after()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00853">foedus::thread::Thread::cll_try_or_acquire_multiple_locks()</a>, <a class="el" href="thread__pimpl_8cpp_source.html#l00850">foedus::thread::Thread::cll_try_or_acquire_single_lock()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00234">foedus::xct::RetrospectiveLockList::get_array()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00352">foedus::xct::CurrentLockList::get_entry()</a>, <a class="el" href="thread_8cpp_source.html#l00125">foedus::thread::Thread::get_global_volatile_page_resolver()</a>, <a class="el" href="retrospective__lock__list_8cpp_source.html#l00204">foedus::xct::CurrentLockList::get_or_add_entry()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00248">foedus::xct::RetrospectiveLockList::is_empty()</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00163">foedus::xct::LockEntry::is_enough()</a>, <a class="el" href="thread_8cpp_source.html#l00142">foedus::thread::Thread::is_hot_page()</a>, <a class="el" href="error__code_8hpp_source.html#l00087">foedus::kErrorCodeOk</a>, <a class="el" href="error__code_8hpp_source.html#l00206">foedus::kErrorCodeXctLockAbort</a>, <a class="el" href="xct__id_8hpp_source.html#l00149">foedus::xct::kLockListPositionInvalid</a>, <a class="el" href="xct__id_8hpp_source.html#l00137">foedus::xct::kNullUniversalLockId</a>, <a class="el" href="xct__id_8hpp_source.html#l00105">foedus::xct::kReadLock</a>, <a class="el" href="xct__id_8hpp_source.html#l00110">foedus::xct::kWriteLock</a>, <a class="el" href="retrospective__lock__list_8hpp_source.html#l00125">foedus::xct::LockEntry::universal_lock_id_</a>, and <a class="el" href="xct__id_8hpp_source.html#l01226">foedus::xct::xct_id_to_universal_lock_id()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00258">on_record_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span>&amp; resolver = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">storage::assert_within_valid_volatile_page</a>(resolver, tid_address);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_id == <a class="code" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">xct_id_to_universal_lock_id</a>(resolver, tid_address));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">#endif  // NDEBUG</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> rll_pos = <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordtype">bool</span> lets_take_lock = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (!retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">is_empty</a>()) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="comment">// RLL is set, which means the previous run aborted for race.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="comment">// binary-search for each read-set is not cheap, but in this case better than aborts.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="comment">// So, let&#39;s see if we should take the lock.</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    rll_pos = retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38">binary_search</a>(lock_id);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordflow">if</span> (rll_pos != <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">get_array</a>()[rll_pos].<a class="code" href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">universal_lock_id_</a> == lock_id);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      DVLOG(1) &lt;&lt; <span class="stringliteral">&quot;RLL recommends to take lock on this record!&quot;</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      lets_take_lock = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (!lets_take_lock &amp;&amp; context_-&gt;<a class="code" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2">is_hot_page</a>(page_address)) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    lets_take_lock = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (lets_take_lock) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">LockMode</a> mode = intended_for_write ? <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">kWriteLock</a> : <a class="code" href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">kReadLock</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">LockListPosition</a> cll_pos = current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">get_or_add_entry</a>(lock_id, tid_address, mode);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    LockEntry* cll_entry = current_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">get_entry</a>(cll_pos);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (cll_entry-&gt;is_enough()) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span>;  <span class="comment">// already had the lock</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> lock_ret;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (rll_pos == <a class="code" href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">kLockListPositionInvalid</a>) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="comment">// Then, this is a single read-lock to take.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      lock_ret = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e">cll_try_or_acquire_single_lock</a>(cll_pos);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">// TODO(Hideaki) The above locks unconditionally in canonnical mode. Even in non-canonical,</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="comment">// when it returns kErrorCodeXctLockAbort AND we haven&#39;t taken any write-lock yet,</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="comment">// we might still want a retry here.. but it has pros/cons. Revisit later.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// Then we should take all locks before this too.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      lock_ret = context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d">cll_try_or_acquire_multiple_locks</a>(cll_pos);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">if</span> (lock_ret != <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(lock_ret == <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">kErrorCodeXctLockAbort</a>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      DVLOG(0) &lt;&lt; <span class="stringliteral">&quot;Failed to take some of the lock that might be beneficial later&quot;</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;. We still go on because the locks here are not mandatory.&quot;</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="comment">// At this point, no point to be advised by RLL any longer.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="comment">// Let&#39;s clear it, and let&#39;s give-up all incomplete locks in CLL.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      context_-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85">cll_giveup_all_locks_after</a>(<a class="code" href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">kNullUniversalLockId</a>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      retrospective_lock_list_.<a class="code" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846">clear_entries</a>();</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_aa77cde98794b5a55e0d295284acb3e6d"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d">foedus::thread::Thread::get_global_volatile_page_resolver</a></div><div class="ttdeci">const memory::GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00125">thread.cpp:125</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca86b3d42905f04dcb855f26eb27fd9a85">foedus::xct::kReadLock</a></div><div class="ttdoc">taken_mode_: we took a read-lock, not write-lock yet. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00105">xct_id.hpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1LockEntry_html_ac4dd063e8f157e49b468d9acb3efa276"><div class="ttname"><a href="structfoedus_1_1xct_1_1LockEntry.html#ac4dd063e8f157e49b468d9acb3efa276">foedus::xct::LockEntry::universal_lock_id_</a></div><div class="ttdeci">UniversalLockId universal_lock_id_</div><div class="ttdoc">Used to order locks in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00125">retrospective_lock_list.hpp:125</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_aa962bee534789c572b6c38984c5d5d38"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38">foedus::xct::RetrospectiveLockList::binary_search</a></div><div class="ttdeci">LockListPosition binary_search(UniversalLockId lock) const </div><div class="ttdoc">Analogous to std::binary_search() for the given lock. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00193">retrospective_lock_list.cpp:193</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_ab52244fbb6c13b0c0774431af72d482e"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e">foedus::thread::Thread::cll_try_or_acquire_single_lock</a></div><div class="ttdeci">ErrorCode cll_try_or_acquire_single_lock(xct::LockListPosition pos)</div><div class="ttdoc">Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00850">thread_pimpl.cpp:850</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a3882c3684e3adb4a6992ef230443a02c"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a3882c3684e3adb4a6992ef230443a02c">foedus::xct::kLockListPositionInvalid</a></div><div class="ttdeci">const LockListPosition kLockListPositionInvalid</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00149">xct_id.hpp:149</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a662fe45f4d738afaf946b46ded73ef40">foedus::kErrorCodeXctLockAbort</a></div><div class="ttdoc">0x0AA1 : "XCTION : Lock acquire failed." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00206">error_code.hpp:206</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acdd6c3ee6c1e8b0da192818e70fec846"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846">foedus::xct::RetrospectiveLockList::clear_entries</a></div><div class="ttdeci">void clear_entries()</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00059">retrospective_lock_list.cpp:59</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_ae36b3307af22f430a8f11765e3e57748"><div class="ttname"><a href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748">foedus::xct::xct_id_to_universal_lock_id</a></div><div class="ttdeci">UniversalLockId xct_id_to_universal_lock_id(const memory::GlobalVolatilePageResolver &amp;resolver, RwLockableXctId *lock)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01226">xct_id.hpp:1226</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_a6c96bb5725be6694030bd8ce88d68698"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698">foedus::xct::RetrospectiveLockList::is_empty</a></div><div class="ttdeci">bool is_empty() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00248">retrospective_lock_list.hpp:248</a></div></div>
<div class="ttc" id="group__XCT_html_gaf1e1817b6663c210b329ce1ea57e63fb"><div class="ttname"><a href="group__XCT.html#gaf1e1817b6663c210b329ce1ea57e63fb">foedus::xct::LockListPosition</a></div><div class="ttdeci">uint32_t LockListPosition</div><div class="ttdoc">Index in a lock-list, either RLL or CLL. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00148">xct_id.hpp:148</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_html_a263602e0a73eedbe5f32128635106e17"><div class="ttname"><a href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17">foedus::storage::assert_within_valid_volatile_page</a></div><div class="ttdeci">void assert_within_valid_volatile_page(const memory::GlobalVolatilePageResolver &amp;resolver, const void *address)</div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00428">page.hpp:428</a></div></div>
<div class="ttc" id="group__XCT_html_ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826"><div class="ttname"><a href="group__XCT.html#ggae2b82bc723691c581c22944ef3cef43ca05c9c6b8c4d5e6e6cb32d7d407189826">foedus::xct::kWriteLock</a></div><div class="ttdoc">taken_mode_: we took a write-lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00110">xct_id.hpp:110</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_ab360f7fc3d8c0880b394084d45e492e9"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9">foedus::xct::CurrentLockList::get_entry</a></div><div class="ttdeci">LockEntry * get_entry(LockListPosition pos)</div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00352">retrospective_lock_list.hpp:352</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a94b9b35db175ad18d7e889b3bd57ea85"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85">foedus::thread::Thread::cll_giveup_all_locks_after</a></div><div class="ttdeci">void cll_giveup_all_locks_after(xct::UniversalLockId address)</div><div class="ttdoc">This gives-up locks in CLL that are not yet taken. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00847">thread_pimpl.cpp:847</a></div></div>
<div class="ttc" id="group__RLL_html_gadca5ec640ccba5dbdc6860ebb15850d2"><div class="ttname"><a href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2">foedus::thread::Thread::is_hot_page</a></div><div class="ttdeci">bool is_hot_page(const storage::Page *page) const </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00142">thread.cpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1RetrospectiveLockList_html_acd7b6530aeff7f5323880bf0b6b14ce0"><div class="ttname"><a href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0">foedus::xct::RetrospectiveLockList::get_array</a></div><div class="ttdeci">const LockEntry * get_array() const </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8hpp_source.html#l00234">retrospective_lock_list.hpp:234</a></div></div>
<div class="ttc" id="group__XCT_html_gae2b82bc723691c581c22944ef3cef43c"><div class="ttname"><a href="group__XCT.html#gae2b82bc723691c581c22944ef3cef43c">foedus::xct::LockMode</a></div><div class="ttdeci">LockMode</div><div class="ttdoc">Represents a mode of lock. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00095">xct_id.hpp:95</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="namespacefoedus_1_1xct_html_a599719d9d5b1849a94510b779c1163fe"><div class="ttname"><a href="namespacefoedus_1_1xct.html#a599719d9d5b1849a94510b779c1163fe">foedus::xct::kNullUniversalLockId</a></div><div class="ttdeci">const UniversalLockId kNullUniversalLockId</div><div class="ttdoc">This never points to a valid lock, and also evaluates less than any vaild alocks. ...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00137">xct_id.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a476c43885a66c28ac33e624d071a7a7d"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d">foedus::thread::Thread::cll_try_or_acquire_multiple_locks</a></div><div class="ttdeci">ErrorCode cll_try_or_acquire_multiple_locks(xct::LockListPosition upto_pos)</div><div class="ttdoc">Acquire multiple locks up to the given position in canonical order. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8cpp_source.html#l00853">thread_pimpl.cpp:853</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1CurrentLockList_html_a6db689767722f1d30821d63144bf8bde"><div class="ttname"><a href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde">foedus::xct::CurrentLockList::get_or_add_entry</a></div><div class="ttdeci">LockListPosition get_or_add_entry(UniversalLockId lock_id, RwLockableXctId *lock, LockMode preferred_mode)</div><div class="ttdoc">Adds an entry to this list, re-sorting part of the list if necessary to keep the sortedness. </div><div class="ttdef"><b>Definition:</b> <a href="retrospective__lock__list_8cpp_source.html#l00204">retrospective_lock_list.cpp:204</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_cgraph" id="classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_cgraph">
<area shape="rect" id="node2" href="namespacefoedus_1_1storage.html#a263602e0a73eedbe5f32128635106e17" title="foedus::storage::assert\l_within_valid_volatile_page" alt="" coords="244,340,419,381"/>
<area shape="rect" id="node13" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#aa962bee534789c572b6c38984c5d5d38" title="Analogous to std::binary_search() for the given lock. " alt="" coords="245,1099,417,1140"/>
<area shape="rect" id="node14" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acdd6c3ee6c1e8b0da192818e70fec846" title="foedus::xct::Retrospective\lLockList::clear_entries" alt="" coords="245,1164,417,1205"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1Thread.html#a94b9b35db175ad18d7e889b3bd57ea85" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="243,779,419,820"/>
<area shape="rect" id="node31" href="classfoedus_1_1thread_1_1Thread.html#a476c43885a66c28ac33e624d071a7a7d" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="220,856,443,897"/>
<area shape="rect" id="node35" href="classfoedus_1_1xct_1_1CurrentLockList.html#ab360f7fc3d8c0880b394084d45e492e9" title="foedus::xct::CurrentLock\lList::get_entry" alt="" coords="1299,991,1463,1032"/>
<area shape="rect" id="node38" href="structfoedus_1_1xct_1_1LockEntry.html#a57dc541a4a80230e2fc0b45aeb6b879a" title="foedus::xct::LockEntry\l::is_enough" alt="" coords="1304,1056,1457,1097"/>
<area shape="rect" id="node40" href="classfoedus_1_1thread_1_1Thread.html#ab52244fbb6c13b0c0774431af72d482e" title="Methods related to Current Lock List (CLL) These are the only interface in Thread to lock records..." alt="" coords="229,928,433,969"/>
<area shape="rect" id="node42" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#acd7b6530aeff7f5323880bf0b6b14ce0" title="foedus::xct::Retrospective\lLockList::get_array" alt="" coords="245,1229,417,1271"/>
<area shape="rect" id="node43" href="classfoedus_1_1thread_1_1Thread.html#aa77cde98794b5a55e0d295284acb3e6d" title="Returns the page resolver to convert page ID to page pointer. " alt="" coords="256,1295,407,1351"/>
<area shape="rect" id="node44" href="classfoedus_1_1xct_1_1CurrentLockList.html#a6db689767722f1d30821d63144bf8bde" title="Adds an entry to this list, re&#45;sorting part of the list if necessary to keep the sortedness. " alt="" coords="791,609,955,651"/>
<area shape="rect" id="node47" href="namespacefoedus_1_1xct.html#ae36b3307af22f430a8f11765e3e57748" title="foedus::xct::xct_id\l_to_universal_lock_id" alt="" coords="1062,465,1207,507"/>
<area shape="rect" id="node48" href="classfoedus_1_1xct_1_1RetrospectiveLockList.html#a6c96bb5725be6694030bd8ce88d68698" title="foedus::xct::Retrospective\lLockList::is_empty" alt="" coords="245,1376,417,1417"/>
<area shape="rect" id="node49" href="group__RLL.html#gadca5ec640ccba5dbdc6860ebb15850d2" title="foedus::thread::Thread\l::is_hot_page" alt="" coords="256,471,407,512"/>
<area shape="rect" id="node3" href="namespacefoedus_1_1storage.html#ad38ebb5eb992249a7b42001fe464ec48" title="foedus::storage::assert\l_within_valid_volatile\l_page_impl" alt="" coords="525,298,679,354"/>
<area shape="rect" id="node4" href="namespacefoedus_1_1storage.html#a67e1af2de6e13b000e66609cf60849b6" title="foedus::storage::construct\l_volatile_page_pointer" alt="" coords="1048,247,1221,288"/>
<area shape="rect" id="node5" href="structfoedus_1_1storage_1_1Page.html#abee44ea141b30e613f3de40831d6ff8e" title="At least the basic header exists in all pages. " alt="" coords="1306,247,1455,288"/>
<area shape="rect" id="node6" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a56250946b7719a7bd15532d211eac88f" title="Resolves offset plus NUMA node ID to storage::Page*. " alt="" coords="771,188,974,229"/>
<area shape="rect" id="node12" href="group__STORAGE.html#gaa114fc1859c2d4cb8b9e2021cb11cb25" title="super&#45;dirty way to obtain Page the address belongs to. " alt="" coords="1791,414,1957,441"/>
<area shape="rect" id="node7" href="namespacefoedus_1_1storage.html#a9220f4aff16817a668990bd85f2f527d" title="foedus::storage::assert\l_valid_volatile_page" alt="" coords="1057,49,1212,91"/>
<area shape="rect" id="node11" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35" title="As the name suggests, this version is for new pages, which don&#39;t have sanity checks. " alt="" coords="1033,115,1236,171"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1storage.html#ab7207e6e276af504c0e358a923ee75ec" title="foedus::storage::assert\l_aligned_page" alt="" coords="1303,123,1458,164"/>
<area shape="rect" id="node9" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#ac3d7cb1649528efa8b9aa22b63bf52e6" title="foedus::storage::Volatile\lPagePointer::get_offset" alt="" coords="2044,232,2205,273"/>
<area shape="rect" id="node10" href="structfoedus_1_1storage_1_1PageHeader.html#a1bdd725342fd4aa90f983fec651f6956" title="foedus::storage::PageHeader\l::get_page_type" alt="" coords="1285,5,1476,47"/>
<area shape="rect" id="node16" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a4197d522317d6177fd0d9a0ee811cdf5" title="foedus::thread::ThreadPimpl\l::cll_giveup_all_locks_after" alt="" coords="510,765,694,807"/>
<area shape="rect" id="node17" href="classfoedus_1_1xct_1_1Xct.html#afc0b909c82e905105f4f9701082a16b8" title="foedus::xct::Xct::get\l_current_lock_list" alt="" coords="803,749,942,791"/>
<area shape="rect" id="node18" href="classfoedus_1_1xct_1_1CurrentLockList.html#a3ac4e854509ec8a1cf9a70fcba501a68" title="This gives&#45;up locks in CLL that are not yet taken. " alt="" coords="791,684,955,725"/>
<area shape="rect" id="node30" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a33a1b8b428cd84029b8b377867197ea4" title="foedus::thread::ThreadPimpl\l::is_simple_mcs_rw" alt="" coords="781,815,965,856"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1CurrentLockList.html#acbed8e324b88389217b42a132e0547b8" title="foedus::xct::CurrentLock\lList::assert_sorted" alt="" coords="1053,684,1217,725"/>
<area shape="rect" id="node28" href="classfoedus_1_1xct_1_1CurrentLockList.html#ae0cbd2f6b369d0340c3222f124fe122b" title="foedus::xct::CurrentLock\lList::begin" alt="" coords="1053,749,1217,791"/>
<area shape="rect" id="node29" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad34e69a6289f0860fe000c3bbecda1cb" title="foedus::xct::CurrentLock\lList::end" alt="" coords="1053,815,1217,856"/>
<area shape="rect" id="node20" href="classfoedus_1_1xct_1_1CurrentLockList.html#a7485f0d26810767b3bef18e12233daa7" title="foedus::xct::CurrentLock\lList::assert_sorted_impl" alt="" coords="1299,691,1463,732"/>
<area shape="rect" id="node21" href="classfoedus_1_1xct_1_1CurrentLockList.html#aed99dee60f9529d5cfabb5e1742038da" title="foedus::xct::CurrentLock\lList::assert_last_locked_entry" alt="" coords="1524,691,1720,732"/>
<area shape="rect" id="node24" href="namespacefoedus_1_1xct.html#a736225e9852f9c75b92e134dbbe40a68" title="foedus::xct::lock_assert\l_sorted" alt="" coords="1541,527,1703,568"/>
<area shape="rect" id="node22" href="classfoedus_1_1xct_1_1CurrentLockList.html#a1a668d5dd1b711abed1a9962a8cb4ec1" title="Calculate last_locked_entry_ by really checking the whole list. " alt="" coords="1768,781,1980,823"/>
<area shape="rect" id="node23" href="classfoedus_1_1xct_1_1CurrentLockList.html#a03e818494c4d716f9fc996081f6c419f" title="Only searches among entries at or before &quot;from&quot;. " alt="" coords="2037,849,2213,905"/>
<area shape="rect" id="node25" href="structfoedus_1_1storage_1_1Page.html#ac2a6248866335cc84b16bb0530eb76f4" title="foedus::storage::Page\l::get_volatile_page_id" alt="" coords="1799,531,1949,572"/>
<area shape="rect" id="node26" href="namespacefoedus_1_1xct.html#a94b21516b530d0be271c6005a72009ad" title="foedus::xct::to_universal\l_lock_id" alt="" coords="1793,465,1955,507"/>
<area shape="rect" id="node27" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#adb76c33cd20ea764c7a8e554e8201077" title="foedus::storage::Volatile\lPagePointer::get_numa_node" alt="" coords="2028,465,2221,507"/>
<area shape="rect" id="node32" href="classfoedus_1_1thread_1_1ThreadPimpl.html#ae594169d3ecc7b0d4d356d1ed6dfa8b2" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_multiple_locks" alt="" coords="491,843,713,884"/>
<area shape="rect" id="node33" href="classfoedus_1_1xct_1_1CurrentLockList.html#ad7029aa2b4a2d3ec394aa0a0b378b088" title="Acquire multiple locks up to the given position in canonical order. " alt="" coords="761,880,984,921"/>
<area shape="rect" id="node34" href="classfoedus_1_1xct_1_1CurrentLockList.html#aa8023ecc3dc58816a010a3415ebfc1dd" title="Methods below take or release locks, so they receive MCS_RW_IMPL, a template param. " alt="" coords="1032,905,1237,947"/>
<area shape="rect" id="node37" href="structfoedus_1_1xct_1_1RwLockableXctId.html#afe5afad486230afbf7d1b21875a90f13" title="foedus::xct::RwLockableXct\lId::get_key_lock" alt="" coords="1289,808,1472,849"/>
<area shape="rect" id="node39" href="structfoedus_1_1xct_1_1LockEntry.html#a3aa9be8584009d4fa0d1bea4ab563167" title="foedus::xct::LockEntry\l::is_locked" alt="" coords="1304,873,1457,915"/>
<area shape="rect" id="node36" href="classfoedus_1_1xct_1_1CurrentLockList.html#a78b6d1612fda232b7e8c52dd3f6c2504" title="foedus::xct::CurrentLock\lList::is_valid_entry" alt="" coords="1540,991,1704,1032"/>
<area shape="rect" id="node41" href="classfoedus_1_1thread_1_1ThreadPimpl.html#afd87e3c9d855306d2c8115571eb79fa6" title="foedus::thread::ThreadPimpl\l::cll_try_or_acquire_single_lock" alt="" coords="500,917,704,959"/>
<area shape="rect" id="node45" href="classfoedus_1_1xct_1_1CurrentLockList.html#af0b8f0d95e3ae99293ffc14cf4067573" title="Analogous to std::lower_bound() for the given lock. " alt="" coords="1299,625,1463,667"/>
<area shape="rect" id="node46" href="structfoedus_1_1xct_1_1LockEntry.html#a54190c5faf4f6943043c1d83ed435f44" title="foedus::xct::LockEntry::set" alt="" coords="1045,531,1224,558"/>
<area shape="rect" id="node50" href="classfoedus_1_1xct_1_1Xct.html#ae84fb0f1c8c5c81bac74e79e62da49a6" title="foedus::xct::Xct::get\l_hot_threshold_for_this_xct" alt="" coords="511,471,693,512"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_icgraph" id="classfoedus_1_1xct_1_1Xct_ab43ebf3a25aedb3e6ffeb3d9724bd080_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#abc3a6688cdf5249c46613a1988b71975" title="The general logic invoked for every record read. " alt="" coords="220,413,355,454"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#aa9de7dd9ec971f2011cc84d72aa32521" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record" alt="" coords="422,5,587,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ac3d0167bd2765ad6cea232fd999e9d5f" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write" alt="" coords="422,85,587,141"/>
<area shape="rect" id="node7" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ad4da0329b11bd50970765c7d4b1f669a" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_for_write_batch" alt="" coords="422,165,587,221"/>
<area shape="rect" id="node9" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a22b2486d4531522d5949034232e90f32" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload" alt="" coords="422,245,587,301"/>
<area shape="rect" id="node11" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#ae4373a9f195884ab885458e9c1a18ee7" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_payload_batch" alt="" coords="422,325,587,381"/>
<area shape="rect" id="node13" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#abdf449a053e85072d1236f47364b484d" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive" alt="" coords="422,405,587,461"/>
<area shape="rect" id="node15" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a23cc3a8049590a9c4be3177ab9b5661b" title="foedus::storage::array\l::ArrayStoragePimpl::get\l_record_primitive_batch" alt="" coords="422,485,587,541"/>
<area shape="rect" id="node17" href="classfoedus_1_1storage_1_1array_1_1ArrayStoragePimpl.html#a435ff8b148161ca7296b12eea744a344" title="foedus::storage::array\l::ArrayStoragePimpl::increment\l_record" alt="" coords="403,565,607,621"/>
<area shape="rect" id="node19" href="classfoedus_1_1xct_1_1Xct.html#a4e7e1454bc26ac3f32116125879d13ed" title="Shortcut for a case when you don&#39;t need observed_xid/read_set_address back. " alt="" coords="437,646,572,687"/>
<area shape="rect" id="node20" href="structfoedus_1_1storage_1_1masstree_1_1RecordLocation.html#aee3fe977e78528510c5ac422cc31f534" title="Populates the result with XID and possibly readset. " alt="" coords="416,712,593,768"/>
<area shape="rect" id="node43" href="structfoedus_1_1storage_1_1hash_1_1RecordLocation.html#a5c39383806af101855b26268abbb00e3" title="Populates the result with XID and possibly readset. " alt="" coords="416,1009,593,1065"/>
<area shape="rect" id="node4" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#ae5da0aa4f609d2b80a64a6fcaf4e6d81" title="Retrieves a part of record of the given offset in this array storage. " alt="" coords="659,13,834,54"/>
<area shape="rect" id="node6" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#acb10150d96e7a6fe9c7bc00da6a13e80" title="Retrieves a pointer to the entire record for write (thus always in volatile page). " alt="" coords="659,85,834,141"/>
<area shape="rect" id="node8" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a58183bfb0f5e70653f7f450ecac9f501" title="foedus::storage::array\l::ArrayStorage::get_record\l_for_write_batch" alt="" coords="659,165,834,221"/>
<area shape="rect" id="node10" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a35580e9eb07d46212c1cf0a15520cb24" title="Retrieves a pointer to the entire payload. " alt="" coords="659,245,834,301"/>
<area shape="rect" id="node12" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a69f548ffc92c96cc52238068d781bbf8" title="foedus::storage::array\l::ArrayStorage::get_record\l_payload_batch" alt="" coords="659,325,834,381"/>
<area shape="rect" id="node14" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a1b9cd919a7b95297f1ad5ef5d5971be7" title="Retrieves a part of record of the given offset as a primitive type in this array storage. " alt="" coords="659,405,834,461"/>
<area shape="rect" id="node16" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a7a0a99eb452ebc4ec0e2e86d520d315f" title="batched interface " alt="" coords="659,485,834,541"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1array_1_1ArrayStorage.html#a3cfbd23c4239f8a63ac5719007a8305b" title="This one further optimizes overwrite_record_primitive() for the frequent use case of incrementing som..." alt="" coords="661,565,832,621"/>
<area shape="rect" id="node21" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a91dac48625f8f7d2906fcfba5908cbc1" title="Identifies page and record for the key. " alt="" coords="908,456,1081,512"/>
<area shape="rect" id="node29" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a0ce23624d660da08cb1ee04ac2297171" title="Identifies page and record for the normalized key. " alt="" coords="657,696,836,752"/>
<area shape="rect" id="node37" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#a52a1bce48d9230ad2ce3f52c4da51b8e" title="Like locate_record(), this is also a logical operation. " alt="" coords="660,929,833,985"/>
<area shape="rect" id="node40" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStoragePimpl.html#acac5f9308b4aed46777d34f6fa171c8e" title="foedus::storage::masstree\l::MasstreeStoragePimpl\l::reserve_record_normalized" alt="" coords="655,1068,839,1124"/>
<area shape="rect" id="node22" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ac6b8b9c2d3b756b4559e43fbe93950a5" title="Deletes a record of the given key from this Masstree. " alt="" coords="1162,303,1377,345"/>
<area shape="rect" id="node23" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#acdf38eea62d1432e3715a661d0790caf" title="Retrieves an entire record of the given key in this Masstree. " alt="" coords="1170,369,1369,410"/>
<area shape="rect" id="node24" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a01a2996a1ee370611b72c88f33fe2753" title="Retrieves a part of the given key in this Masstree. " alt="" coords="1183,661,1356,717"/>
<area shape="rect" id="node25" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a3be736c76c38dd23444cbd78947a63fd" title="Retrieves a part of the given key in this Masstree as a primitive value. " alt="" coords="1183,435,1356,491"/>
<area shape="rect" id="node26" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0fc21940320e38fa61ebfc88af210fde" title="This one further optimizes overwrite methods for the frequent use case of incrementing some data in p..." alt="" coords="1151,515,1388,557"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae7221368afad2669e36cdf1bfe8dcb5f" title="Overwrites a part of one record of the given key in this Masstree. " alt="" coords="1154,763,1385,805"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a384c8fadf63901aa055285c7f680570f" title="Overwrites a part of one record of the given key in this Masstree as a primitive value. " alt="" coords="1176,581,1363,637"/>
<area shape="rect" id="node30" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0051986148bca838483cf3a81d3f5236" title="Deletes a record of the given primitive key from this Masstree. " alt="" coords="908,296,1081,352"/>
<area shape="rect" id="node31" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a4f2492b6a04c2db18cdf2a4a2d7fecc0" title="Retrieves an entire record of the given primitive key in this Masstree. " alt="" coords="908,376,1081,432"/>
<area shape="rect" id="node32" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adda60c43db1237644270e90f2a255d35" title="Retrieves a part of the given primitive key in this Masstree. " alt="" coords="908,536,1081,592"/>
<area shape="rect" id="node33" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ae4bf2da94babc15bf43bd50b17ffb562" title="Retrieves a part of the given primitive key in this Masstree as a primitive value. " alt="" coords="900,616,1089,672"/>
<area shape="rect" id="node34" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#adba3fe323a9ea3e8f8e006459ef7e442" title="For primitive key. " alt="" coords="897,696,1092,752"/>
<area shape="rect" id="node35" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#ad27ac2a920f1f63adc768f7c95ea5c6f" title="Overwrites a part of one record of the given primitive key in this Masstree. " alt="" coords="901,776,1088,832"/>
<area shape="rect" id="node36" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#aadbf62a4594062706294a2402777e223" title="Overwrites a part of one record of the given primitive key in this Masstree as a primitive value..." alt="" coords="900,856,1089,912"/>
<area shape="rect" id="node38" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a86b4db183c677a364c7ddf71100699b9" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="889,937,1101,978"/>
<area shape="rect" id="node39" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a0f917244d33e9cdb2fa6ffd686a2a701" title="With this method, you can also specify physical_payload_hint, the physical size of the record&#39;s paylo..." alt="" coords="887,1002,1103,1043"/>
<area shape="rect" id="node41" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a6d7f9dea9af7356face9815ac10c37b4" title="With this method, you can also specify physical_payload_hint. " alt="" coords="908,1068,1081,1124"/>
<area shape="rect" id="node42" href="classfoedus_1_1storage_1_1masstree_1_1MasstreeStorage.html#a152a0ecbad9b56385ec7f13e8a1fce19" title="With this method, you can also specify physical_payload_hint. " alt="" coords="908,1148,1081,1204"/>
<area shape="rect" id="node44" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a86af9aa3326dd20ffdac2a1beffea0b4" title="Usually follows locate_bin to locate the exact physical record for the key, or create a new one if no..." alt="" coords="656,1228,837,1284"/>
<area shape="rect" id="node45" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a07025464a0eba08710f6fa92d7c0f32d" title="locate_record()&#39;s logical+physical version. " alt="" coords="904,1228,1085,1284"/>
<area shape="rect" id="node50" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#aa8d098fb8e3b997b1dc52ede62b8acb6" title="locate_record()&#39;s physical_only version. " alt="" coords="904,1308,1085,1364"/>
<area shape="rect" id="node46" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a357386c8e5be667334520a33aff51725" title="foedus::storage::hash\l::HashStoragePimpl::delete\l_record" alt="" coords="1179,1108,1360,1164"/>
<area shape="rect" id="node47" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a222e0d485305f3253b0e1c97720dc0c8" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record" alt="" coords="1187,1188,1351,1244"/>
<area shape="rect" id="node48" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a4eff8bc4e42a5973c8553830890d8a24" title="foedus::storage::hash\l::HashStoragePimpl::get\l_record_part" alt="" coords="1187,1268,1351,1324"/>
<area shape="rect" id="node49" href="classfoedus_1_1storage_1_1hash_1_1HashStoragePimpl.html#a233fcd7ffd24bd59d2d0943af3d0de03" title="foedus::storage::hash\l::HashStoragePimpl::increment\l_record" alt="" coords="1168,1348,1371,1404"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad41a55b3d564111db585a312c6a0bba4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a>&amp; foedus::xct::Xct::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab7bf19bc328c888d70d56e3650b9cde4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::overwrite_to_pointer_set </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a> *&#160;</td>
          <td class="paramname"><em>pointer_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">storage::VolatilePagePointer</a>&#160;</td>
          <td class="paramname"><em>observed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The transaction that has updated the volatile pointer should not abort itself. </p>
<p>So, it calls this method to apply the version it installed. </p>

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00226">226</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="xct__id_8hpp_source.html#l00086">foedus::xct::kSerializable</a>, and <a class="el" href="xct__access_8hpp_source.html#l00055">foedus::xct::PointerAccess::observed_</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                       {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(pointer_address);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (isolation_level_ != <a class="code" href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">kSerializable</a>) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; pointer_set_size_; ++i) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">if</span> (pointer_set_[i].address_ == pointer_address) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      pointer_set_[i].<a class="code" href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">observed_</a> = observed;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1xct_1_1PointerAccess_html_a10634af817a6e33b8f745cd726b7dee1"><div class="ttname"><a href="structfoedus_1_1xct_1_1PointerAccess.html#a10634af817a6e33b8f745cd726b7dee1">foedus::xct::PointerAccess::observed_</a></div><div class="ttdeci">storage::VolatilePagePointer observed_</div><div class="ttdoc">Value of the volatile pointer as of the access. </div><div class="ttdef"><b>Definition:</b> <a href="xct__access_8hpp_source.html#l00055">xct_access.hpp:55</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__XCT_html_gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630"><div class="ttname"><a href="group__XCT.html#gga9ac5dae4b91a288e9d887f28a7124c13a5e9c22688eea55cea2bf4380b03a8630">foedus::xct::kSerializable</a></div><div class="ttdoc">Protects against all anomalies in all situations. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00086">xct_id.hpp:86</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a054cf2fca2ce0e5047c817ed10ae1a80"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::remember_previous_xct_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1xct_1_1XctId.html">XctId</a>&#160;</td>
          <td class="paramname"><em>new_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00386">386</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, and <a class="el" href="xct__id_8hpp_source.html#l01074">foedus::xct::XctId::before()</a>.</p>

<p>Referenced by <a class="el" href="xct_8cpp_source.html#l00134">issue_next_id()</a>.</p>
<div class="fragment"><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                                                             {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ac151128ff0040de166018da6133f8d85">before</a>(new_id));</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    id_ = new_id;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.get_ordinal() &gt; 0);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(id_.is_valid());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_ac151128ff0040de166018da6133f8d85"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#ac151128ff0040de166018da6133f8d85">foedus::xct::XctId::before</a></div><div class="ttdeci">bool before(const XctId &amp;other) const __attribute__((always_inline))</div><div class="ttdoc">Returns if this XctId is before other in serialization order, meaning this is either an invalid (unus...</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01074">xct_id.hpp:1074</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_cgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_cgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_cgraph" id="classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1xct_1_1XctId.html#ac151128ff0040de166018da6133f8d85" title="Returns if this XctId is before other in serialization order, meaning this is either an invalid (unus..." alt="" coords="232,64,355,105"/>
<area shape="rect" id="node3" href="structfoedus_1_1xct_1_1XctId.html#aa9ea819b1fb68a729e1c92825190a39c" title="foedus::xct::XctId\l::get_epoch_int" alt="" coords="615,5,737,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83" title="foedus::xct::XctId\l::get_epoch" alt="" coords="415,35,538,76"/>
<area shape="rect" id="node5" href="classfoedus_1_1Epoch.html#aaef554452ea9ac7b072af98cde1558dc" title="Returns if this epoch is before the given epoch in the sense of distance defined in RFC 1982..." alt="" coords="403,101,551,127"/>
<area shape="rect" id="node7" href="structfoedus_1_1xct_1_1XctId.html#a936888dbc82de6e76194b72c28c9a10f" title="foedus::xct::XctId\l::get_ordinal" alt="" coords="415,152,538,193"/>
<area shape="rect" id="node6" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9" title="foedus::Epoch::is_valid" alt="" coords="599,101,753,127"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_icgraph" id="classfoedus_1_1xct_1_1Xct_a054cf2fca2ce0e5047c817ed10ae1a80_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1xct_1_1Xct.html#a208310505c3d16cf2dc10f94f968d4a4" title="Called while a successful commit of xct to issue a new xct id. " alt="" coords="232,5,383,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#ad91daff37c2b78b8c6620d67869e9d7f" title="Phase 3 of precommit_xct() " alt="" coords="431,5,625,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a777caaecec0e7bb19b1cd2841771f755" title="precommit_xct() if the transaction is read&#45;write " alt="" coords="673,5,868,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1xct_1_1XctManagerPimpl.html#a014506b605e14b3df1b1b7522e8a23b2" title="This is the gut of commit protocol. " alt="" coords="916,5,1111,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1xct_1_1XctManager.html#a486c653445cb64cc9514af3f1031bdf0" title="Prepares the currently running transaction on the thread for commit. " alt="" coords="1159,5,1321,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ace9354af4e27109da6affc4d3bd84419"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::set_default_hot_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00132">132</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">foedus::thread::ThreadPimpl::handle_tasks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                                               {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    default_hot_threshold_for_this_xct_ = value; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_ace9354af4e27109da6affc4d3bd84419_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_ace9354af4e27109da6affc4d3bd84419_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_ace9354af4e27109da6affc4d3bd84419_icgraph" id="classfoedus_1_1xct_1_1Xct_ace9354af4e27109da6affc4d3bd84419_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb" title="Main routine of the worker thread. " alt="" coords="205,13,389,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="437,13,621,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a873d7bb9094918e5d61742c456dbeb61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::set_default_rll_for_this_xct </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00126">126</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">foedus::thread::ThreadPimpl::handle_tasks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{ default_rll_for_this_xct_ = value; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a873d7bb9094918e5d61742c456dbeb61_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a873d7bb9094918e5d61742c456dbeb61_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a873d7bb9094918e5d61742c456dbeb61_icgraph" id="classfoedus_1_1xct_1_1Xct_a873d7bb9094918e5d61742c456dbeb61_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb" title="Main routine of the worker thread. " alt="" coords="212,5,396,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="444,5,628,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a339fdd767efdfed418e32792b560b373"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::set_default_rll_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00139">139</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>

<p>Referenced by <a class="el" href="thread__pimpl_8cpp_source.html#l00163">foedus::thread::ThreadPimpl::handle_tasks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                                               {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    default_rll_threshold_for_this_xct_ = value; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classfoedus_1_1xct_1_1Xct_a339fdd767efdfed418e32792b560b373_icgraph.png" border="0" usemap="#classfoedus_1_1xct_1_1Xct_a339fdd767efdfed418e32792b560b373_icgraph" alt=""/></div>
<map name="classfoedus_1_1xct_1_1Xct_a339fdd767efdfed418e32792b560b373_icgraph" id="classfoedus_1_1xct_1_1Xct_a339fdd767efdfed418e32792b560b373_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a73a9dfcab4771b1a5c6362406b27faeb" title="Main routine of the worker thread. " alt="" coords="197,13,381,54"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPimpl.html#a741208e803d0a0bb5f979ebb099d2a8d" title="foedus::thread::ThreadPimpl\l::initialize_once" alt="" coords="429,13,613,54"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac6777ca164a194123d0c3ab02dca629e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::set_enable_rll_for_this_xct </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00124">124</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{ enable_rll_for_this_xct_ = value; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ee8a59d28d2d81c2a5673e321851272"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::set_hot_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00129">129</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{ hot_threshold_for_this_xct_ = value; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a34cbbf2ad0e8ee102d0b3db3c8056bb8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::xct::Xct::set_rll_threshold_for_this_xct </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8hpp_source.html#l00136">136</a> of file <a class="el" href="xct_8hpp_source.html">xct.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{ rll_threshold_for_this_xct_ = value; }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a99dca627480b5425eab53916d5918771"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="xct_8cpp_source.html#l00168">168</a> of file <a class="el" href="xct_8cpp_source.html">xct.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                                                    {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;Xct&gt;&quot;</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;active_&gt;&quot;</span> &lt;&lt; v.is_active() &lt;&lt; <span class="stringliteral">&quot;&lt;/active_&gt;&quot;</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;enable_rll_for_this_xct_&gt;&quot;</span> &lt;&lt; v.is_enable_rll_for_this_xct()</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/enable_rll_for_this_xct_&gt;&quot;</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;default_rll_for_this_xct_&gt;&quot;</span> &lt;&lt; v.is_default_rll_for_this_xct()</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/default_rll_for_this_xct_&gt;&quot;</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;hot_threshold&gt;&quot;</span> &lt;&lt; v.get_hot_threshold_for_this_xct() &lt;&lt; <span class="stringliteral">&quot;&lt;/hot_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;default_hot_threshold&gt;&quot;</span> &lt;&lt; v.get_default_hot_threshold_for_this_xct()</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/default_hot_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;rll_threshold&gt;&quot;</span> &lt;&lt; v.get_rll_threshold_for_this_xct() &lt;&lt; <span class="stringliteral">&quot;&lt;/rll_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;default_rll_threshold&gt;&quot;</span> &lt;&lt; v.get_default_rll_threshold_for_this_xct()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;&lt;/default_rll_threshold&gt;&quot;</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (v.is_active()) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;&lt;id_&gt;&quot;</span> &lt;&lt; v.get_id() &lt;&lt; <span class="stringliteral">&quot;&lt;/id_&gt;&quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;read_set_size&gt;&quot;</span> &lt;&lt; v.get_read_set_size() &lt;&lt; <span class="stringliteral">&quot;&lt;/read_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;write_set_size&gt;&quot;</span> &lt;&lt; v.get_write_set_size() &lt;&lt; <span class="stringliteral">&quot;&lt;/write_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;pointer_set_size&gt;&quot;</span> &lt;&lt; v.get_pointer_set_size() &lt;&lt; <span class="stringliteral">&quot;&lt;/pointer_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;page_version_set_size&gt;&quot;</span> &lt;&lt; v.get_page_version_set_size() &lt;&lt; <span class="stringliteral">&quot;&lt;/page_version_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;lock_free_read_set_size&gt;&quot;</span> &lt;&lt; v.get_lock_free_read_set_size()</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;&lt;/lock_free_read_set_size&gt;&quot;</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;&lt;lock_free_write_set_size&gt;&quot;</span> &lt;&lt; v.get_lock_free_write_set_size()</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;&lt;/lock_free_write_set_size&gt;&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keyword">const</span> SysxctWorkspace* sysxct_workspace = v.get_sysxct_workspace();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    o &lt;&lt; *sysxct_workspace;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;&lt;/Xct&gt;&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/xct/<a class="el" href="xct_8hpp_source.html">xct.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/xct/<a class="el" href="xct_8cpp_source.html">xct.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1xct.html">xct</a></li><li class="navelem"><a class="el" href="classfoedus_1_1xct_1_1Xct.html">Xct</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
