<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: foedus::thread::ImpersonateSession Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structfoedus_1_1thread_1_1ImpersonateSession.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="structfoedus_1_1thread_1_1ImpersonateSession-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">foedus::thread::ImpersonateSession Struct Reference<span class="mlabels"><span class="mlabel">final</span></span><div class="ingroups"><a class="el" href="group__COMPONENTS.html">FOEDUS Components</a> &raquo; <a class="el" href="group__THREAD.html">Thread and Thread-Group</a> &raquo; <a class="el" href="group__THREADPOOL.html">Thread-Pool and Impersonation</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A user session running on an <em>impersonated</em> thread.  
 <a href="structfoedus_1_1thread_1_1ImpersonateSession.html#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A user session running on an <em>impersonated</em> thread. </p>
<dl class="section user"><dt>Overview</dt><dd>This object represents an impersonated session, which is obtained by calling <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">ThreadPool::impersonate()</a> and running the given task on a pre-allocated thread. This object also works as a <em>future</em> to synchronously or asynchronously wait for the completion of the functor from the client program's thread.</dd></dl>
<dl class="section user"><dt>Result of Impersonation</dt><dd>The client program has to first check <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a> for the given session because there are two possible cases as the result of impersonation. <ul>
<li>Impersonation succeded (<a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>==true), running the task on the impersonated thread. In this case, the client's thread (original thread that invoked <a class="el" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre-allocated threads in this engine, executing the procedure on the impersonat...">ThreadPool::impersonate()</a>) can either wait for the end of the impersonated thread (call <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. ">wait()</a> or <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a951cd701218b88d9a4cfe9bd6ee2ece6" title="Blocks until either the asynchronous session completes or the specified time elapses. ">wait_for()</a>), or do other things (e.g., launch more impersonated threads).</li>
</ul>
<ul>
<li>Impersonation failed (<a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>==false). This might happen for various reasons; timeout, the engine shuts down while waiting, unexpected errors, etc. In this case, get_invalid_cause() indicates the causes of the failed impersonation.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Wait for the completion of the session</dt><dd>When <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>==true, this object also behaves as std::shared_future&lt;ErrorStack&gt;, and we actually use it. But, because of the <a class="el" href="group__CXX11.html">C++11 Keywords in Public Headers</a> issue, we wrap it as a usual class. This object is copiable like std::shared_future, not std::future. Actually, this class is based on std::shared_future just to provide copy semantics for non-C++11 clients. Additional overheads shouldn't matter, hopeully.</dd></dl>
<dl class="section user"><dt>Copy/Move</dt><dd>This object is not copy-able because the destructor closes the session in shared memory. However, it is moveable, which moves the ownership (available only with C++11 though). </dd></dl>

<p>Definition at line <a class="el" href="impersonate__session_8hpp_source.html#l00061">61</a> of file <a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for foedus::thread::ImpersonateSession:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession__coll__graph.png" border="0" usemap="#foedus_1_1thread_1_1ImpersonateSession_coll__map" alt="Collaboration graph"/></div>
<map name="foedus_1_1thread_1_1ImpersonateSession_coll__map" id="foedus_1_1thread_1_1ImpersonateSession_coll__map">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html" title="A view of Thread object for other SOCs and master engine. " alt="" coords="11,5,182,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acd58fd831855d5a26258b2fdd903760a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acd58fd831855d5a26258b2fdd903760a">ImpersonateSession</a> ()</td></tr>
<tr class="separator:acd58fd831855d5a26258b2fdd903760a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9720d4c9a7d76b538127b88e6419472"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472">~ImpersonateSession</a> ()</td></tr>
<tr class="separator:ad9720d4c9a7d76b538127b88e6419472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887a1a9c0cd5a97f63c62a2e25ae4243"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a887a1a9c0cd5a97f63c62a2e25ae4243">ImpersonateSession</a> (const <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;other)=delete</td></tr>
<tr class="separator:a887a1a9c0cd5a97f63c62a2e25ae4243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70eb2d21133eb512e613e48266f0dea0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a70eb2d21133eb512e613e48266f0dea0">operator=</a> (const <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;other)=delete</td></tr>
<tr class="separator:a70eb2d21133eb512e613e48266f0dea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac36e0683e68b57995a291254e040e4bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ac36e0683e68b57995a291254e040e4bd">ImpersonateSession</a> (<a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&amp;other)</td></tr>
<tr class="separator:ac36e0683e68b57995a291254e040e4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a3785c8d205baf5b9c538ee2dfd6cc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a6a3785c8d205baf5b9c538ee2dfd6cc6">operator=</a> (<a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&amp;other)</td></tr>
<tr class="separator:a6a3785c8d205baf5b9c538ee2dfd6cc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d8cc1dfcf5c73a344567c5903da9e6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">is_valid</a> () const </td></tr>
<tr class="memdesc:a30d8cc1dfcf5c73a344567c5903da9e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the impersonation succeeded.  <a href="#a30d8cc1dfcf5c73a344567c5903da9e6">More...</a><br /></td></tr>
<tr class="separator:a30d8cc1dfcf5c73a344567c5903da9e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38c08d2bd83f427928291221e620b835"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a> () const </td></tr>
<tr class="memdesc:a38c08d2bd83f427928291221e620b835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the task is still running.  <a href="#a38c08d2bd83f427928291221e620b835">More...</a><br /></td></tr>
<tr class="separator:a38c08d2bd83f427928291221e620b835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03dead1ca09cc22dce6b8e63622e5ed4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4">get_result</a> ()</td></tr>
<tr class="memdesc:a03dead1ca09cc22dce6b8e63622e5ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until the completion of the asynchronous session and retrieves the result.  <a href="#a03dead1ca09cc22dce6b8e63622e5ed4">More...</a><br /></td></tr>
<tr class="separator:a03dead1ca09cc22dce6b8e63622e5ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36abebd6554ea9e3f5cd3fa6d656d1f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f">get_output_size</a> ()</td></tr>
<tr class="memdesc:ab36abebd6554ea9e3f5cd3fa6d656d1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the byte size of output.  <a href="#ab36abebd6554ea9e3f5cd3fa6d656d1f">More...</a><br /></td></tr>
<tr class="separator:ab36abebd6554ea9e3f5cd3fa6d656d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dfc509ff49415cd24aab9d5870e1d0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a8dfc509ff49415cd24aab9d5870e1d0e">get_output</a> (void *output_buffer)</td></tr>
<tr class="memdesc:a8dfc509ff49415cd24aab9d5870e1d0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies the output to the given buffer, whose size must be at least <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f" title="Returns the byte size of output. ">get_output_size()</a>.  <a href="#a8dfc509ff49415cd24aab9d5870e1d0e">More...</a><br /></td></tr>
<tr class="separator:a8dfc509ff49415cd24aab9d5870e1d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad126784f2ded82c0942d0871ea7099bc"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad126784f2ded82c0942d0871ea7099bc">get_raw_output_buffer</a> ()</td></tr>
<tr class="memdesc:ad126784f2ded82c0942d0871ea7099bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the pointer to the raw output buffer on shared memory.  <a href="#ad126784f2ded82c0942d0871ea7099bc">More...</a><br /></td></tr>
<tr class="separator:ad126784f2ded82c0942d0871ea7099bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a553f421acf03b382ef97a3ab909dba61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61">wait</a> () const </td></tr>
<tr class="memdesc:a553f421acf03b382ef97a3ab909dba61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until the completion of the asynchronous session.  <a href="#a553f421acf03b382ef97a3ab909dba61">More...</a><br /></td></tr>
<tr class="separator:a553f421acf03b382ef97a3ab909dba61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a951cd701218b88d9a4cfe9bd6ee2ece6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a951cd701218b88d9a4cfe9bd6ee2ece6">wait_for</a> (uint64_t timeout_microsec) const </td></tr>
<tr class="memdesc:a951cd701218b88d9a4cfe9bd6ee2ece6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until either the asynchronous session completes or the specified time elapses.  <a href="#a951cd701218b88d9a4cfe9bd6ee2ece6">More...</a><br /></td></tr>
<tr class="separator:a951cd701218b88d9a4cfe9bd6ee2ece6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b7dea75e89a6384dfcadb72e338520"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520">release</a> ()</td></tr>
<tr class="memdesc:a68b7dea75e89a6384dfcadb72e338520"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases all resources and ownerships this session has acquired.  <a href="#a68b7dea75e89a6384dfcadb72e338520">More...</a><br /></td></tr>
<tr class="separator:a68b7dea75e89a6384dfcadb72e338520"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab6acb1671abf77d9fcc722a86ab2dde4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classfoedus_1_1thread_1_1ThreadRef.html">thread::ThreadRef</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a></td></tr>
<tr class="memdesc:ab6acb1671abf77d9fcc722a86ab2dde4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The impersonated thread.  <a href="#ab6acb1671abf77d9fcc722a86ab2dde4">More...</a><br /></td></tr>
<tr class="separator:ab6acb1671abf77d9fcc722a86ab2dde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfaa03e864bdad25f4171234d511f5e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__THREAD.html#gaea68524aab03a0e194a18ac008f9d484">thread::ThreadTicket</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a></td></tr>
<tr class="memdesc:acfaa03e864bdad25f4171234d511f5e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ticket issued as of impersonation.  <a href="#acfaa03e864bdad25f4171234d511f5e0">More...</a><br /></td></tr>
<tr class="separator:acfaa03e864bdad25f4171234d511f5e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a05382739440e094a9abc550992a6b921"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a05382739440e094a9abc550992a6b921">operator&lt;&lt;</a> (std::ostream &amp;o, const <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;v)</td></tr>
<tr class="separator:a05382739440e094a9abc550992a6b921"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="acd58fd831855d5a26258b2fdd903760a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ImpersonateSession::ImpersonateSession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="impersonate__session_8hpp_source.html#l00062">62</a> of file <a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;: <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>(<a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a>), <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a>(0) {}</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad9720d4c9a7d76b538127b88e6419472"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ImpersonateSession::~ImpersonateSession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="impersonate__session_8hpp_source.html#l00063">63</a> of file <a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>.</p>

<p>References <a class="el" href="impersonate__session_8cpp_source.html#l00114">release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;{ <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520">release</a>(); }</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a68b7dea75e89a6384dfcadb72e338520"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520">foedus::thread::ImpersonateSession::release</a></div><div class="ttdeci">void release()</div><div class="ttdoc">Releases all resources and ownerships this session has acquired. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8cpp_source.html#l00114">impersonate_session.cpp:114</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_ad9720d4c9a7d76b538127b88e6419472_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_ad9720d4c9a7d76b538127b88e6419472_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_ad9720d4c9a7d76b538127b88e6419472_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_ad9720d4c9a7d76b538127b88e6419472_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="256,136,439,177"/>
<area shape="rect" id="node3" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="717,5,900,47"/>
<area shape="rect" id="node4" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="487,136,669,177"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="949,260,1120,301"/>
<area shape="rect" id="node5" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="717,201,900,243"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="720,71,897,112"/>
<area shape="rect" id="node9" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="720,136,897,177"/>
<area shape="rect" id="node8" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="948,71,1121,112"/>
<area shape="rect" id="node10" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="962,136,1107,177"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a887a1a9c0cd5a97f63c62a2e25ae4243"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ImpersonateSession::ImpersonateSession </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac36e0683e68b57995a291254e040e4bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">foedus::thread::ImpersonateSession::ImpersonateSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00030">30</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00139">ticket_</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                                                                 {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a> = other.ticket_;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a> = other.thread_;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  other.ticket_ = 0;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  other.thread_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a8dfc509ff49415cd24aab9d5870e1d0e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ImpersonateSession::get_output </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>output_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies the output to the given buffer, whose size must be at least <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f" title="Returns the byte size of output. ">get_output_size()</a>. </p>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00058">58</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="impersonate__session_8cpp_source.html#l00065">get_output_size()</a>, <a class="el" href="thread__ref_8hpp_source.html#l00063">foedus::thread::ThreadRef::get_task_output_memory()</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                                                       {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  std::memcpy(output_buffer, <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a5153a246ee0a42eff267cc8040805302">get_task_output_memory</a>(), <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f">get_output_size</a>());</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab36abebd6554ea9e3f5cd3fa6d656d1f"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f">foedus::thread::ImpersonateSession::get_output_size</a></div><div class="ttdeci">uint64_t get_output_size()</div><div class="ttdoc">Returns the byte size of output. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8cpp_source.html#l00065">impersonate_session.cpp:65</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a5153a246ee0a42eff267cc8040805302"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a5153a246ee0a42eff267cc8040805302">foedus::thread::ThreadRef::get_task_output_memory</a></div><div class="ttdeci">void * get_task_output_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00063">thread_ref.hpp:63</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a8dfc509ff49415cd24aab9d5870e1d0e_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a8dfc509ff49415cd24aab9d5870e1d0e_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a8dfc509ff49415cd24aab9d5870e1d0e_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a8dfc509ff49415cd24aab9d5870e1d0e_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f" title="Returns the byte size of output. " alt="" coords="236,5,419,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadRef.html#a5153a246ee0a42eff267cc8040805302" title="foedus::thread::ThreadRef\l::get_task_output_memory" alt="" coords="239,71,416,112"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="467,5,637,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab36abebd6554ea9e3f5cd3fa6d656d1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::thread::ImpersonateSession::get_output_size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the byte size of output. </p>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00065">65</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00129">foedus::thread::ThreadControlBlock::output_len_</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>.</p>

<p>Referenced by <a class="el" href="impersonate__session_8cpp_source.html#l00058">get_output()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                             {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>()-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a89719222034c3e53fde2d3042b8741df">output_len_</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a89719222034c3e53fde2d3042b8741df"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a89719222034c3e53fde2d3042b8741df">foedus::thread::ThreadControlBlock::output_len_</a></div><div class="ttdeci">uint32_t output_len_</div><div class="ttdoc">Byte size of output as the result of the procedure. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00129">thread_pimpl.hpp:129</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="236,5,407,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_icgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_icgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_icgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_ab36abebd6554ea9e3f5cd3fa6d656d1f_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a8dfc509ff49415cd24aab9d5870e1d0e" title="Copies the output to the given buffer, whose size must be at least get_output_size(). " alt="" coords="236,5,419,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad126784f2ded82c0942d0871ea7099bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const void * foedus::thread::ImpersonateSession::get_raw_output_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the pointer to the raw output buffer on shared memory. </p>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00061">61</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="thread__ref_8hpp_source.html#l00063">foedus::thread::ThreadRef::get_task_output_memory()</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                                      {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a5153a246ee0a42eff267cc8040805302">get_task_output_memory</a>();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a5153a246ee0a42eff267cc8040805302"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a5153a246ee0a42eff267cc8040805302">foedus::thread::ThreadRef::get_task_output_memory</a></div><div class="ttdeci">void * get_task_output_memory() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00063">thread_ref.hpp:63</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_ad126784f2ded82c0942d0871ea7099bc_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_ad126784f2ded82c0942d0871ea7099bc_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_ad126784f2ded82c0942d0871ea7099bc_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_ad126784f2ded82c0942d0871ea7099bc_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a5153a246ee0a42eff267cc8040805302" title="foedus::thread::ThreadRef\l::get_task_output_memory" alt="" coords="256,5,433,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a03dead1ca09cc22dce6b8e63622e5ed4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> foedus::thread::ImpersonateSession::get_result </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits until the completion of the asynchronous session and retrieves the result. </p>
<p>It effectively calls <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. ">wait()</a> in order to wait for the result. The behavior is undefined if <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>== false. </p><dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>==true </dd></dl>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00046">46</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00120">foedus::thread::ThreadControlBlock::current_ticket_</a>, <a class="el" href="error__stack_8hpp_source.html#l00480">ERROR_STACK</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00078">is_valid()</a>, <a class="el" href="error__code_8hpp_source.html#l00114">foedus::kErrorCodeSessionExpired</a>, <a class="el" href="thread__id_8hpp_source.html#l00213">foedus::thread::kWaitingForClientRelease</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00132">foedus::thread::ThreadControlBlock::proc_result_</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00110">foedus::thread::ThreadControlBlock::status_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00139">ticket_</a>, <a class="el" href="fixed__error__stack_8cpp_source.html#l00076">foedus::FixedErrorStack::to_error_stack()</a>, and <a class="el" href="impersonate__session_8cpp_source.html#l00069">wait()</a>.</p>

<p>Referenced by <a class="el" href="thread__pool_8hpp_source.html#l00224">foedus::thread::ThreadPool::impersonate_on_numa_core_synchronous()</a>, <a class="el" href="thread__pool_8hpp_source.html#l00197">foedus::thread::ThreadPool::impersonate_on_numa_node_synchronous()</a>, and <a class="el" href="thread__pool_8hpp_source.html#l00171">foedus::thread::ThreadPool::impersonate_synchronous()</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                          {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61">wait</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">is_valid</a>()) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    ThreadControlBlock* block = <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>();</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span> (block-&gt;current_ticket_ != <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a> || block-&gt;status_ != <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">kWaitingForClientRelease</a>) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56acf1828cd0c0c7b8ae0c20ee2cdb018d2">kErrorCodeSessionExpired</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> block-&gt;proc_result_.to_error_stack();</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56acf1828cd0c0c7b8ae0c20ee2cdb018d2">kErrorCodeSessionExpired</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a553f421acf03b382ef97a3ab909dba61"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61">foedus::thread::ImpersonateSession::wait</a></div><div class="ttdeci">void wait() const </div><div class="ttdoc">Blocks until the completion of the asynchronous session. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8cpp_source.html#l00069">impersonate_session.cpp:69</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56acf1828cd0c0c7b8ae0c20ee2cdb018d2"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56acf1828cd0c0c7b8ae0c20ee2cdb018d2">foedus::kErrorCodeSessionExpired</a></div><div class="ttdoc">0x000A : "GENERAL: The session has expired." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00114">error_code.hpp:114</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a30d8cc1dfcf5c73a344567c5903da9e6"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">foedus::thread::ImpersonateSession::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdoc">Returns if the impersonation succeeded. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00078">impersonate_session.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">foedus::thread::kWaitingForClientRelease</a></div><div class="ttdoc">The thread has completed the task and set the result. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00213">thread_id.hpp:213</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="699,580,869,621"/>
<area shape="rect" id="node3" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="467,488,649,529"/>
<area shape="rect" id="node4" href="classfoedus_1_1FixedErrorStack.html#ae188e11e3d0fb9481b8d20bd252c7920" title="Instantiates an ErrorStack object based on this object. " alt="" coords="246,267,409,308"/>
<area shape="rect" id="node16" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="236,583,419,624"/>
<area shape="rect" id="node5" href="classfoedus_1_1FixedErrorStack.html#a473b0d84aaa49e9e27d630ded372c641" title="Returns if this return code is not kErrorCodeOk. " alt="" coords="703,5,865,47"/>
<area shape="rect" id="node6" href="classfoedus_1_1FixedErrorStack.html#ab8644e6aea98412c534fac81e88e9203" title="Describe this object to the given stream. " alt="" coords="477,267,639,308"/>
<area shape="rect" id="node7" href="classfoedus_1_1FixedErrorStack.html#a24e01e0f89b47b93d3d0a547ee8f1017" title="Returns the custom error message. " alt="" coords="703,332,865,373"/>
<area shape="rect" id="node8" href="group__ERRORCODES.html#gaa2ded6dcdd1da8d29d893eeb014a78e9" title="Returns the names of ErrorCode enum defined in error_code.xmacro. " alt="" coords="705,398,863,425"/>
<area shape="rect" id="node9" href="classfoedus_1_1FixedErrorStack.html#a77e87960b6fa0c79b0b88d52197041e5" title="Returns the file name of the given stack position. " alt="" coords="703,449,865,491"/>
<area shape="rect" id="node10" href="classfoedus_1_1FixedErrorStack.html#ac3e802ea3b5a27d120a1b815216d4a53" title="Returns the function name of the given stack position. " alt="" coords="703,515,865,556"/>
<area shape="rect" id="node11" href="classfoedus_1_1FixedErrorStack.html#a7781080b8033dbe9afa7de813e39aa7c" title="Returns the line number of the given stack position. " alt="" coords="703,71,865,112"/>
<area shape="rect" id="node12" href="classfoedus_1_1FixedErrorStack.html#adce404a955c1598c740094be0ae796e1" title="Returns the error message inferred by the error code. " alt="" coords="703,136,865,177"/>
<area shape="rect" id="node14" href="classfoedus_1_1FixedErrorStack.html#a66b70d71bc70fc6d94c7d8cb6759437d" title="Returns the depth of stack this error code has collected. " alt="" coords="703,201,865,243"/>
<area shape="rect" id="node15" href="group__ASSORTED.html#gaaa260096daf8620266c2799d1f5a0270" title="Thread&#45;safe strerror(errno). " alt="" coords="714,267,854,308"/>
<area shape="rect" id="node13" href="group__ERRORCODES.html#gaefc0aeec33bc4adc2f147fd1828b816e" title="Returns the error messages corresponding to ErrorCode enum defined in error_code.xmacro. " alt="" coords="919,143,1097,170"/>
<area shape="rect" id="node17" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="467,553,649,595"/>
<area shape="rect" id="node18" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="469,736,647,777"/>
<area shape="rect" id="node20" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="469,671,647,712"/>
<area shape="rect" id="node19" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="697,736,871,777"/>
<area shape="rect" id="node21" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="711,671,857,712"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_icgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_icgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_icgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a03dead1ca09cc22dce6b8e63622e5ed4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="237,5,431,61"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="236,85,432,141"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="243,166,425,207"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a38c08d2bd83f427928291221e620b835"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ImpersonateSession::is_running </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns if the task is still running. </p>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00105">105</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00120">foedus::thread::ThreadControlBlock::current_ticket_</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="thread__id_8hpp_source.html#l00211">foedus::thread::kRunningTask</a>, <a class="el" href="thread__id_8hpp_source.html#l00209">foedus::thread::kWaitingForExecution</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00110">foedus::thread::ThreadControlBlock::status_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00139">ticket_</a>.</p>

<p>Referenced by <a class="el" href="impersonate__session_8cpp_source.html#l00069">wait()</a>, and <a class="el" href="impersonate__session_8cpp_source.html#l00083">wait_for()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                          {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>()-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aae7748033c051126eb9bbbb3d487e5e0">current_ticket_</a> &gt;= <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>()-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aae7748033c051126eb9bbbb3d487e5e0">current_ticket_</a> != <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a>) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>()-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">status_</a> == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12afa60273eee5d8d1548d0da34187b2a08">kWaitingForExecution</a> ||</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>()-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">status_</a> == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12ae4da726d3c3a0db2b9e657ddcee9444d">kRunningTask</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_aae7748033c051126eb9bbbb3d487e5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#aae7748033c051126eb9bbbb3d487e5e0">foedus::thread::ThreadControlBlock::current_ticket_</a></div><div class="ttdeci">ThreadTicket current_ticket_</div><div class="ttdoc">The most recently issued impersonation ticket. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00120">thread_pimpl.hpp:120</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12afa60273eee5d8d1548d0da34187b2a08"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12afa60273eee5d8d1548d0da34187b2a08">foedus::thread::kWaitingForExecution</a></div><div class="ttdoc">A client has set a next task. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00209">thread_id.hpp:209</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12ae4da726d3c3a0db2b9e657ddcee9444d"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12ae4da726d3c3a0db2b9e657ddcee9444d">foedus::thread::kRunningTask</a></div><div class="ttdoc">The thread has picked the task up and is now running. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00211">thread_id.hpp:211</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a21f70ae9d374cc919ab50bb410172415"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">foedus::thread::ThreadControlBlock::status_</a></div><div class="ttdeci">ThreadStatus status_</div><div class="ttdoc">Impersonation status of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00110">thread_pimpl.hpp:110</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="236,5,407,47"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_icgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_icgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_icgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a38c08d2bd83f427928291221e620b835_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="236,42,419,83"/>
<area shape="rect" id="node16" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a951cd701218b88d9a4cfe9bd6ee2ece6" title="Blocks until either the asynchronous session completes or the specified time elapses. " alt="" coords="236,107,419,149"/>
<area shape="rect" id="node3" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="1232,71,1415,113"/>
<area shape="rect" id="node7" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="467,71,649,113"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1471,5,1664,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1469,171,1665,227"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1476,93,1659,134"/>
<area shape="rect" id="node8" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472" title="foedus::thread::Impersonate\lSession::~ImpersonateSession" alt="" coords="697,71,900,113"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="713,137,884,178"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="974,137,1151,178"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="948,202,1177,243"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="949,71,1176,113"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="1235,137,1412,178"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="1225,202,1421,243"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="1227,6,1420,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a30d8cc1dfcf5c73a344567c5903da9e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ImpersonateSession::is_valid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if the impersonation succeeded. </p>

<p>Definition at line <a class="el" href="impersonate__session_8hpp_source.html#l00078">78</a> of file <a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>.</p>

<p>References <a class="el" href="cxx11_8hpp_source.html#l00132">CXX11_NULLPTR</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00139">ticket_</a>.</p>

<p>Referenced by <a class="el" href="impersonate__session_8cpp_source.html#l00046">get_result()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00130">foedus::thread::operator&lt;&lt;()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00114">release()</a>, <a class="el" href="thread__ref_8cpp_source.html#l00059">foedus::thread::ThreadRef::try_impersonate()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00069">wait()</a>, and <a class="el" href="impersonate__session_8cpp_source.html#l00083">wait_for()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a> != <a class="code" href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a> &amp;&amp; <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a> != 0; }</div>
<div class="ttc" id="group__CXX11_html_ga213f92e16813051c59cdccf6d28baa78"><div class="ttname"><a href="group__CXX11.html#ga213f92e16813051c59cdccf6d28baa78">CXX11_NULLPTR</a></div><div class="ttdeci">#define CXX11_NULLPTR</div><div class="ttdoc">Used in public headers in place of "nullptr" of C++11. </div><div class="ttdef"><b>Definition:</b> <a href="cxx11_8hpp_source.html#l00132">cxx11.hpp:132</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a30d8cc1dfcf5c73a344567c5903da9e6_icgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a30d8cc1dfcf5c73a344567c5903da9e6_icgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a30d8cc1dfcf5c73a344567c5903da9e6_icgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a30d8cc1dfcf5c73a344567c5903da9e6_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="1232,201,1415,243"/>
<area shape="rect" id="node6" href="namespacefoedus_1_1thread.html#a7e8a64b3ee5c31f6a981f9dfbb114bc6" title="foedus::thread::operator\&lt;\&lt;" alt="" coords="240,95,415,122"/>
<area shape="rect" id="node7" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="467,139,649,180"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="713,71,884,112"/>
<area shape="rect" id="node16" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="236,197,419,239"/>
<area shape="rect" id="node17" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a951cd701218b88d9a4cfe9bd6ee2ece6" title="Blocks until either the asynchronous session completes or the specified time elapses. " alt="" coords="236,315,419,356"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1471,173,1664,229"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1469,82,1665,138"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1476,11,1659,52"/>
<area shape="rect" id="node8" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472" title="foedus::thread::Impersonate\lSession::~ImpersonateSession" alt="" coords="697,139,900,180"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="974,5,1151,47"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="948,71,1177,112"/>
<area shape="rect" id="node14" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="949,136,1176,177"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="1235,5,1412,47"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="1225,71,1421,112"/>
<area shape="rect" id="node15" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="1227,136,1420,177"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a70eb2d21133eb512e613e48266f0dea0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a>&amp; foedus::thread::ImpersonateSession::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6a3785c8d205baf5b9c538ee2dfd6cc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp; foedus::thread::ImpersonateSession::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00037">37</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00139">ticket_</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                                                            {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a> = other.ticket_;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a> = other.thread_;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  other.ticket_ = 0;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  other.thread_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a68b7dea75e89a6384dfcadb72e338520"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ImpersonateSession::release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases all resources and ownerships this session has acquired. </p>
<p>This method is idempotent, you can call it in any state and many times. Actually, this is also called from the destructor. This method might block if the session is still running. We do not allow the user to discard this session without completing the currently running task. </p><dl class="section attention"><dt>Attention</dt><dd>Once you invoke this method, you can't call <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. ">get_result()</a>, <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a8dfc509ff49415cd24aab9d5870e1d0e" title="Copies the output to the given buffer, whose size must be at least get_output_size(). ">get_output()</a>, <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab36abebd6554ea9e3f5cd3fa6d656d1f" title="Returns the byte size of output. ">get_output_size()</a> any longer. </dd></dl>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00114">114</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="thread__pimpl_8hpp_source.html#l00120">foedus::thread::ThreadControlBlock::current_ticket_</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00078">is_valid()</a>, <a class="el" href="thread__id_8hpp_source.html#l00213">foedus::thread::kWaitingForClientRelease</a>, <a class="el" href="thread__id_8hpp_source.html#l00207">foedus::thread::kWaitingForTask</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00110">foedus::thread::ThreadControlBlock::status_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00139">ticket_</a>, and <a class="el" href="impersonate__session_8cpp_source.html#l00069">wait()</a>.</p>

<p>Referenced by <a class="el" href="thread__ref_8cpp_source.html#l00059">foedus::thread::ThreadRef::try_impersonate()</a>, and <a class="el" href="impersonate__session_8hpp_source.html#l00063">~ImpersonateSession()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                 {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">is_valid</a>()) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61">wait</a>();</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  ThreadControlBlock* block = <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>();</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> (block-&gt;current_ticket_ == <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a> &amp;&amp; block-&gt;status_ == <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">kWaitingForClientRelease</a>) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    block-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">status_</a> = <a class="code" href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd">kWaitingForTask</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">ticket_</a> = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a72aee7fe031aa8f5648f624a68616ecd">foedus::thread::kWaitingForTask</a></div><div class="ttdoc">Idle state, receiving a new task. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00207">thread_id.hpp:207</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a553f421acf03b382ef97a3ab909dba61"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61">foedus::thread::ImpersonateSession::wait</a></div><div class="ttdeci">void wait() const </div><div class="ttdoc">Blocks until the completion of the asynchronous session. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8cpp_source.html#l00069">impersonate_session.cpp:69</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_acfaa03e864bdad25f4171234d511f5e0"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#acfaa03e864bdad25f4171234d511f5e0">foedus::thread::ImpersonateSession::ticket_</a></div><div class="ttdeci">thread::ThreadTicket ticket_</div><div class="ttdoc">The ticket issued as of impersonation. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00139">impersonate_session.hpp:139</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a30d8cc1dfcf5c73a344567c5903da9e6"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">foedus::thread::ImpersonateSession::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdoc">Returns if the impersonation succeeded. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00078">impersonate_session.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_a21f70ae9d374cc919ab50bb410172415"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#a21f70ae9d374cc919ab50bb410172415">foedus::thread::ThreadControlBlock::status_</a></div><div class="ttdeci">ThreadStatus status_</div><div class="ttdoc">Impersonation status of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00110">thread_pimpl.hpp:110</a></div></div>
<div class="ttc" id="group__THREAD_html_gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6"><div class="ttname"><a href="group__THREAD.html#gga8c4e8dcff52aa5328fe569fa44853d12a348b1e174a3d845ea1c808defd1de2a6">foedus::thread::kWaitingForClientRelease</a></div><div class="ttdoc">The thread has completed the task and set the result. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00213">thread_id.hpp:213</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="699,102,869,144"/>
<area shape="rect" id="node3" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="467,44,649,85"/>
<area shape="rect" id="node4" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a553f421acf03b382ef97a3ab909dba61" title="Blocks until the completion of the asynchronous session. " alt="" coords="236,132,419,173"/>
<area shape="rect" id="node5" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="467,161,649,202"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="469,226,647,268"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="469,292,647,333"/>
<area shape="rect" id="node7" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="697,226,871,268"/>
<area shape="rect" id="node9" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="711,292,857,333"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_icgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_icgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_icgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a68b7dea75e89a6384dfcadb72e338520_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="252,79,423,120"/>
<area shape="rect" id="node12" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472" title="foedus::thread::Impersonate\lSession::~ImpersonateSession" alt="" coords="236,144,439,185"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="513,12,690,53"/>
<area shape="rect" id="node6" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="487,79,716,120"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="488,148,715,189"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="773,8,951,49"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1015,5,1197,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="764,79,960,120"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1008,71,1204,127"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="765,151,959,192"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1009,151,1203,207"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a553f421acf03b382ef97a3ab909dba61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void foedus::thread::ImpersonateSession::wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks until the completion of the asynchronous session. </p>
<p>The behavior is undefined if <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>== false. It effectively calls wait_for(-1) in order to unconditionally wait for the result. This is analogous to std::future::wait(). </p><dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>==true </dd></dl>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00069">69</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="shared__polling_8cpp_source.html#l00105">foedus::soc::SharedPolling::acquire_ticket()</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00105">is_running()</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00078">is_valid()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00137">foedus::thread::ThreadControlBlock::task_complete_cond_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, and <a class="el" href="shared__polling_8cpp_source.html#l00063">foedus::soc::SharedPolling::timedwait()</a>.</p>

<p>Referenced by <a class="el" href="impersonate__session_8cpp_source.html#l00046">get_result()</a>, and <a class="el" href="impersonate__session_8cpp_source.html#l00114">release()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                    {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">is_valid</a>() || !<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>()) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  ThreadControlBlock* block = <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>()) {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    uint64_t demand = block-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ab1c6c84dd0b2db603cc1e362cd4ae7ea">task_complete_cond_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b">acquire_ticket</a>();</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>()) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    block-&gt;task_complete_cond_.timedwait(demand, 100000ULL);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_ab1c6c84dd0b2db603cc1e362cd4ae7ea"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ab1c6c84dd0b2db603cc1e362cd4ae7ea">foedus::thread::ThreadControlBlock::task_complete_cond_</a></div><div class="ttdeci">soc::SharedPolling task_complete_cond_</div><div class="ttdoc">When the current task has been completed, the thread signals this. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00137">thread_pimpl.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedPolling_html_ac6ad7822e42e2e942b55708b1da8516b"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b">foedus::soc::SharedPolling::acquire_ticket</a></div><div class="ttdeci">uint64_t acquire_ticket() const </div><div class="ttdoc">Gives the ticket to. </div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8cpp_source.html#l00105">shared_polling.cpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a38c08d2bd83f427928291221e620b835"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">foedus::thread::ImpersonateSession::is_running</a></div><div class="ttdeci">bool is_running() const </div><div class="ttdoc">Returns if the task is still running. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8cpp_source.html#l00105">impersonate_session.cpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a30d8cc1dfcf5c73a344567c5903da9e6"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">foedus::thread::ImpersonateSession::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdoc">Returns if the impersonation succeeded. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00078">impersonate_session.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="239,5,416,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="468,97,639,139"/>
<area shape="rect" id="node5" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="236,123,419,164"/>
<area shape="rect" id="node6" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="236,188,419,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="239,253,416,295"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="467,5,640,47"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="481,253,626,295"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_icgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_icgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_icgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a553f421acf03b382ef97a3ab909dba61_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a03dead1ca09cc22dce6b8e63622e5ed4" title="Waits until the completion of the asynchronous session and retrieves the result. " alt="" coords="1001,71,1184,113"/>
<area shape="rect" id="node6" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a68b7dea75e89a6384dfcadb72e338520" title="Releases all resources and ownerships this session has acquired. " alt="" coords="236,71,419,113"/>
<area shape="rect" id="node3" href="classfoedus_1_1thread_1_1ThreadPool.html#a3024f0646533edde18e9718d9180e97e" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1240,5,1433,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadPool.html#ad660d97b51456a1a4f819087f7dfeee7" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1239,171,1435,227"/>
<area shape="rect" id="node5" href="classfoedus_1_1thread_1_1ThreadPool.html#abc0bb4530f9e58c38b0e3ce0e1058be4" title="A shorthand for impersonating a session and synchronously waiting for its end. " alt="" coords="1245,93,1428,134"/>
<area shape="rect" id="node7" href="classfoedus_1_1thread_1_1ThreadRef.html#a34020c7e3fc51100fb188f69e95926ed" title="Conditionally try to occupy this thread, or impersonate. " alt="" coords="483,137,653,178"/>
<area shape="rect" id="node14" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ad9720d4c9a7d76b538127b88e6419472" title="foedus::thread::Impersonate\lSession::~ImpersonateSession" alt="" coords="467,71,669,113"/>
<area shape="rect" id="node8" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a05fc63b02a5aa1d938f7220d40d7e8db" title="foedus::thread::ThreadPool\lPimpl::impersonate" alt="" coords="743,137,921,178"/>
<area shape="rect" id="node10" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#af768218c3f43620264c7559fa089ed80" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_node" alt="" coords="717,202,947,243"/>
<area shape="rect" id="node12" href="classfoedus_1_1thread_1_1ThreadPoolPimpl.html#a15f304020e9adda3eb4f7c00f5b9311f" title="foedus::thread::ThreadPool\lPimpl::impersonate_on_numa_core" alt="" coords="719,71,945,113"/>
<area shape="rect" id="node9" href="classfoedus_1_1thread_1_1ThreadPool.html#a34531989c3885ab6e0cccc19bf53d87c" title="Impersonate as one of pre&#45;allocated threads in this engine, executing the procedure on the impersonat..." alt="" coords="1004,137,1181,178"/>
<area shape="rect" id="node11" href="classfoedus_1_1thread_1_1ThreadPool.html#a5e3ba16ba231dab64401f2413a504f1d" title="Overload to specify a NUMA node to run on. " alt="" coords="995,202,1191,243"/>
<area shape="rect" id="node13" href="classfoedus_1_1thread_1_1ThreadPool.html#a4f8014506cf0eea7986d26df628d4a71" title="Overload to specify a core to run on. " alt="" coords="996,6,1189,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a951cd701218b88d9a4cfe9bd6ee2ece6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::thread::ImpersonateSession::wait_for </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>timeout_microsec</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocks until either the asynchronous session completes or the specified time elapses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_microsec</td><td>timeout in microsec. 0 means an instant check without waiting. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True when we observed completion.</dd></dl>
<p>The behavior is undefined if <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>== false. It effectively calls wait_for(timeout) in order to conditionally wait for the result. This is analogous to std::future::wait_for(). </p><dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. ">is_valid()</a>==true </dd></dl>

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00083">83</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>

<p>References <a class="el" href="shared__polling_8cpp_source.html#l00105">foedus::soc::SharedPolling::acquire_ticket()</a>, <a class="el" href="thread__ref_8hpp_source.html#l00071">foedus::thread::ThreadRef::get_control_block()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00105">is_running()</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00078">is_valid()</a>, <a class="el" href="thread__pimpl_8hpp_source.html#l00137">foedus::thread::ThreadControlBlock::task_complete_cond_</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00136">thread_</a>, and <a class="el" href="shared__polling_8cpp_source.html#l00063">foedus::soc::SharedPolling::timedwait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                                                 {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">is_valid</a>()) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>()) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (timeout_microsec == 0) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// instant check. return immediately</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  ThreadControlBlock* block = <a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">thread_</a>-&gt;<a class="code" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">get_control_block</a>();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>()) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    uint64_t demand = block-&gt;<a class="code" href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ab1c6c84dd0b2db603cc1e362cd4ae7ea">task_complete_cond_</a>.<a class="code" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b">acquire_ticket</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>()) {  <span class="comment">// in case it completes between is_running above and acquire_ticket</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    block-&gt;task_complete_cond_.timedwait(demand, timeout_microsec);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">is_running</a>();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_ab6acb1671abf77d9fcc722a86ab2dde4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#ab6acb1671abf77d9fcc722a86ab2dde4">foedus::thread::ImpersonateSession::thread_</a></div><div class="ttdeci">thread::ThreadRef * thread_</div><div class="ttdoc">The impersonated thread. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00136">impersonate_session.hpp:136</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadControlBlock_html_ab1c6c84dd0b2db603cc1e362cd4ae7ea"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadControlBlock.html#ab1c6c84dd0b2db603cc1e362cd4ae7ea">foedus::thread::ThreadControlBlock::task_complete_cond_</a></div><div class="ttdeci">soc::SharedPolling task_complete_cond_</div><div class="ttdoc">When the current task has been completed, the thread signals this. </div><div class="ttdef"><b>Definition:</b> <a href="thread__pimpl_8hpp_source.html#l00137">thread_pimpl.hpp:137</a></div></div>
<div class="ttc" id="classfoedus_1_1soc_1_1SharedPolling_html_ac6ad7822e42e2e942b55708b1da8516b"><div class="ttname"><a href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b">foedus::soc::SharedPolling::acquire_ticket</a></div><div class="ttdeci">uint64_t acquire_ticket() const </div><div class="ttdoc">Gives the ticket to. </div><div class="ttdef"><b>Definition:</b> <a href="shared__polling_8cpp_source.html#l00105">shared_polling.cpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a38c08d2bd83f427928291221e620b835"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835">foedus::thread::ImpersonateSession::is_running</a></div><div class="ttdeci">bool is_running() const </div><div class="ttdoc">Returns if the task is still running. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8cpp_source.html#l00105">impersonate_session.cpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ImpersonateSession_html_a30d8cc1dfcf5c73a344567c5903da9e6"><div class="ttname"><a href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6">foedus::thread::ImpersonateSession::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdoc">Returns if the impersonation succeeded. </div><div class="ttdef"><b>Definition:</b> <a href="impersonate__session_8hpp_source.html#l00078">impersonate_session.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1ThreadRef_html_a989d82d0632117ab23c4fd1ad041ff3f"><div class="ttname"><a href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f">foedus::thread::ThreadRef::get_control_block</a></div><div class="ttdeci">ThreadControlBlock * get_control_block() const </div><div class="ttdef"><b>Definition:</b> <a href="thread__ref_8hpp_source.html#l00071">thread_ref.hpp:71</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="structfoedus_1_1thread_1_1ImpersonateSession_a951cd701218b88d9a4cfe9bd6ee2ece6_cgraph.png" border="0" usemap="#structfoedus_1_1thread_1_1ImpersonateSession_a951cd701218b88d9a4cfe9bd6ee2ece6_cgraph" alt=""/></div>
<map name="structfoedus_1_1thread_1_1ImpersonateSession_a951cd701218b88d9a4cfe9bd6ee2ece6_cgraph" id="structfoedus_1_1thread_1_1ImpersonateSession_a951cd701218b88d9a4cfe9bd6ee2ece6_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1soc_1_1SharedPolling.html#ac6ad7822e42e2e942b55708b1da8516b" title="Gives the ticket to. " alt="" coords="239,5,416,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1thread_1_1ThreadRef.html#a989d82d0632117ab23c4fd1ad041ff3f" title="foedus::thread::ThreadRef\l::get_control_block" alt="" coords="468,97,639,139"/>
<area shape="rect" id="node5" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a38c08d2bd83f427928291221e620b835" title="Returns if the task is still running. " alt="" coords="236,123,419,164"/>
<area shape="rect" id="node6" href="structfoedus_1_1thread_1_1ImpersonateSession.html#a30d8cc1dfcf5c73a344567c5903da9e6" title="Returns if the impersonation succeeded. " alt="" coords="236,188,419,229"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedPolling.html#a1b9f5c8b129c454887a77d3255956157" title="Wait for signal up to the given timeout. " alt="" coords="239,253,416,295"/>
<area shape="rect" id="node3" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf" title="Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). " alt="" coords="467,5,640,47"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1soc.html#a875ded688a72b32f8f690f37750e609f" title="foedus::soc::get_now\l_microsec" alt="" coords="481,253,626,295"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a05382739440e094a9abc550992a6b921"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>o</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a> &amp;&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="impersonate__session_8cpp_source.html#l00130">130</a> of file <a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                                   {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  o &lt;&lt; <span class="stringliteral">&quot;ImpersonateSession: valid=&quot;</span> &lt;&lt; v.is_valid();</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span> (v.is_valid()) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    o &lt;&lt; <span class="stringliteral">&quot;, thread_id=&quot;</span> &lt;&lt; v.thread_-&gt;get_thread_id();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">return</span> o;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab6acb1671abf77d9fcc722a86ab2dde4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classfoedus_1_1thread_1_1ThreadRef.html">thread::ThreadRef</a>* foedus::thread::ImpersonateSession::thread_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The impersonated thread. </p>
<p>If impersonation failed, null. </p>

<p>Definition at line <a class="el" href="impersonate__session_8hpp_source.html#l00136">136</a> of file <a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>.</p>

<p>Referenced by <a class="el" href="impersonate__session_8cpp_source.html#l00058">get_output()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00065">get_output_size()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00061">get_raw_output_buffer()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00046">get_result()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00030">ImpersonateSession()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00105">is_running()</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00078">is_valid()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00130">foedus::thread::operator&lt;&lt;()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00037">operator=()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00114">release()</a>, <a class="el" href="thread__ref_8cpp_source.html#l00059">foedus::thread::ThreadRef::try_impersonate()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00069">wait()</a>, and <a class="el" href="impersonate__session_8cpp_source.html#l00083">wait_for()</a>.</p>

</div>
</div>
<a class="anchor" id="acfaa03e864bdad25f4171234d511f5e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__THREAD.html#gaea68524aab03a0e194a18ac008f9d484">thread::ThreadTicket</a> foedus::thread::ImpersonateSession::ticket_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ticket issued as of impersonation. </p>
<p>If impersonation failed, 0. </p>

<p>Definition at line <a class="el" href="impersonate__session_8hpp_source.html#l00139">139</a> of file <a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a>.</p>

<p>Referenced by <a class="el" href="impersonate__session_8cpp_source.html#l00046">get_result()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00030">ImpersonateSession()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00105">is_running()</a>, <a class="el" href="impersonate__session_8hpp_source.html#l00078">is_valid()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00037">operator=()</a>, <a class="el" href="impersonate__session_8cpp_source.html#l00114">release()</a>, and <a class="el" href="thread__ref_8cpp_source.html#l00059">foedus::thread::ThreadRef::try_impersonate()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li>/home/shino/foedus_code/foedus-core/include/foedus/thread/<a class="el" href="impersonate__session_8hpp_source.html">impersonate_session.hpp</a></li>
<li>/home/shino/foedus_code/foedus-core/src/foedus/thread/<a class="el" href="impersonate__session_8cpp_source.html">impersonate_session.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacefoedus.html">foedus</a></li><li class="navelem"><a class="el" href="namespacefoedus_1_1thread.html">thread</a></li><li class="navelem"><a class="el" href="structfoedus_1_1thread_1_1ImpersonateSession.html">ImpersonateSession</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
