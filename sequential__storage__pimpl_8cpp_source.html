<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/src/foedus/storage/sequential/sequential_storage_pimpl.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sequential__storage__pimpl_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sequential_storage_pimpl.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="sequential__storage__pimpl_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequential__storage__pimpl_8hpp.html">foedus/storage/sequential/sequential_storage_pimpl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;glog/logging.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine_8hpp.html">foedus/engine.hpp</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assorted__func_8hpp.html">foedus/assorted/assorted_func.hpp</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="stop__watch_8hpp.html">foedus/debugging/stop_watch.hpp</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log__manager_8hpp.html">foedus/log/log_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log__type_8hpp.html">foedus/log/log_type.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="meta__log__buffer_8hpp.html">foedus/log/meta_log_buffer.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread__log__buffer_8hpp.html">foedus/log/thread_log_buffer.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine__memory_8hpp.html">foedus/memory/engine_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memory__id_8hpp.html">foedus/memory/memory_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="numa__core__memory_8hpp.html">foedus/memory/numa_core_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="page__pool_8hpp.html">foedus/memory/page_pool.hpp</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot_8hpp.html">foedus/snapshot/snapshot.hpp</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="record_8hpp.html">foedus/storage/record.hpp</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage__manager_8hpp.html">foedus/storage/storage_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage__manager__pimpl_8hpp.html">foedus/storage/storage_manager_pimpl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequential__id_8hpp.html">foedus/storage/sequential/sequential_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequential__log__types_8hpp.html">foedus/storage/sequential/sequential_log_types.hpp</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequential__metadata_8hpp.html">foedus/storage/sequential/sequential_metadata.hpp</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequential__page__impl_8hpp.html">foedus/storage/sequential/sequential_page_impl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sequential__storage_8hpp.html">foedus/storage/sequential/sequential_storage.hpp</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread_8hpp.html">foedus/thread/thread.hpp</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct_8hpp.html">foedus/xct/xct.hpp</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="xct__manager_8hpp.html">foedus/xct/xct_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">namespace </span>storage {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">namespace </span>sequential {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// Defines SequentialStorage methods so that we can inline implementation calls</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ab8696b7ccf07c7b8e1efb038d8cd83c2">   56</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ab8696b7ccf07c7b8e1efb038d8cd83c2">SequentialStorage::append_record</a>(</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* context,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span> *payload,</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  uint16_t payload_count) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">if</span> (payload_count &gt;= <a class="code" href="group__SEQUENTIAL.html#ga976717e2d78b52aec5e8d9657093a5e7">kMaxPayload</a>) {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">kErrorCodeStrTooLongPayload</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// Sequential storage doesn&#39;t need to check its current state for appends.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="comment">// we are sure we can append it anyways, so we just create a log record.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  uint16_t log_length = <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a719ba3ad7fc61a7b8048a57804b3fd51">SequentialAppendLogType::calculate_log_length</a>(payload_count);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html">SequentialAppendLogType</a>* log_entry = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html">SequentialAppendLogType</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee">get_thread_log_buffer</a>().<a class="code" href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9">reserve_new_log</a>(log_length));</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  log_entry-&gt;<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a64d63f4dcd9a92a5180a64dd9cf50572">populate</a>(<a class="code" href="classfoedus_1_1storage_1_1Storage.html#ad9fcb57f0ee2a79e884c0b8b64c8b824">get_id</a>(), payload, payload_count);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="comment">// also, we don&#39;t have to take a lock while commit because our SequentialVolatileList is</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="comment">// lock-free. So, we maintain a special lock-free write-set for sequential storage.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3">get_current_xct</a>().<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a3a3bb3ad1bee321b677b059cf29fbbbf">add_to_lock_free_write_set</a>(<a class="code" href="classfoedus_1_1storage_1_1Storage.html#ad9fcb57f0ee2a79e884c0b8b64c8b824">get_id</a>(), log_entry);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb">   76</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb">SequentialStorage::apply_append_record</a>(</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* context,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html">SequentialAppendLogType</a>* log_entry) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html">SequentialStoragePimpl</a>(<span class="keyword">this</span>).<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1">append_record</a>(</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    context,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    log_entry-&gt;<a class="code" href="structfoedus_1_1log_1_1BaseLogType.html#a574e9dac4445db7814303700a9910821">header_</a>.<a class="code" href="structfoedus_1_1log_1_1LogHeader.html#a63a070d41928ad05b55976bc6e32cdcd">xct_id_</a>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    log_entry-&gt;<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a40835452417ed6a79fd904f4c9536660">payload_</a>,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    log_entry-&gt;<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#aa7eed00b696ed7dddfa12130abcf9208">payload_count_</a>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c">   86</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c">SequentialStoragePimpl::drop</a>() {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Uninitializing an sequential-storage &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="comment">// release all pages in this list.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  uint16_t nodes = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  uint16_t threads_per_node = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">for</span> (uint16_t node = 0; node &lt; nodes; ++node) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// we are sure these pages are from only one NUMA node, so we can easily batch-return.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html">memory::NumaNodeMemoryRef</a>* memory = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a>* pool = memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a>&amp; resolver = pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">get_resolver</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">memory::PagePoolOffsetChunk</a> chunk;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">for</span> (uint16_t local_ordinal = 0; local_ordinal &lt; threads_per_node; ++local_ordinal) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id = <a class="code" href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">thread::compose_thread_id</a>(node, local_ordinal);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>* page = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">get_head</a>(resolver, thread_id); page;) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page-&gt;header().page_id_);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> cur_pointer;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        cur_pointer.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">word</a> = page-&gt;header().page_id_;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(page == reinterpret_cast&lt;SequentialPage*&gt;(resolver.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be">resolve_offset</a>(</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;          cur_pointer.get_offset())));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(node == cur_pointer.get_numa_node());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> next_pointer = page-&gt;next_page().volatile_pointer_;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">if</span> (chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">full</a>()) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">size</a>(), &amp;chunk);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(!chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">full</a>());</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">push_back</a>(cur_pointer.get_offset());</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="keywordflow">if</span> (!next_pointer.is_null()) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;          <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(node == next_pointer.get_numa_node());</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;          page = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>*<span class="keyword">&gt;</span>(resolver.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be">resolve_offset</a>(</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            next_pointer.get_offset()));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;          page = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">if</span> (chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">size</a>() &gt; 0) {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">release</a>(chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">size</a>(), &amp;chunk);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(chunk.<a class="code" href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">size</a>() == 0);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// release pointer pages</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">for</span> (uint16_t p = 0; p * 4 &lt; nodes; ++p) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    uint16_t node = p * 4;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html">memory::NumaNodeMemoryRef</a>* memory = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a>* pool = memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].is_null()) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].get_numa_node() == node);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995">release_one</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].get_offset());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].is_null()) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].get_numa_node() == node);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995">release_one</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].get_offset());</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_));</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b">  147</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b">SequentialStoragePimpl::create</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata.html">SequentialMetadata</a>&amp; metadata) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9e7deab12645a7867f1c4e262c3d9b0b">exists</a>()) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;This sequential-storage already exists: &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8">kErrorCodeStrAlreadyExists</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_ = metadata;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keyword">const</span> <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> initial_truncate_epoch = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">get_earliest_epoch</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = initial_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(initial_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>());</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.reset();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_epoch(initial_truncate_epoch);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_ordinal(1);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">initialize_head_tail_pages</a>());</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;status_ = <a class="code" href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">kExists</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Newly created a sequential-storage &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f">  166</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f">SequentialStoragePimpl::load</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1StorageControlBlock.html">StorageControlBlock</a>&amp; snapshot_block) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// for sequential storage, whether the snapshot root pointer is null or not doesn&#39;t matter.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// essentially load==create, except that it just sets the snapshot root pointer.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_ = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata.html">SequentialMetadata</a>&amp;<span class="keyword">&gt;</span>(snapshot_block.<a class="code" href="structfoedus_1_1storage_1_1StorageControlBlock.html#ae20f48002ac04f92b32085ee52a56ed0">meta_</a>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> initial_truncate_epoch(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span> (!initial_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>()) {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    initial_truncate_epoch = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">get_earliest_epoch</a>();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(initial_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>());</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = initial_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(initial_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>());</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.reset();</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_epoch(initial_truncate_epoch);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_ordinal(1);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a>(<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">initialize_head_tail_pages</a>());</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;root_page_pointer_.snapshot_pointer_</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    = <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.root_snapshot_page_id_;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;status_ = <a class="code" href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">kExists</a>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Loaded a sequential-storage &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">  188</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">SequentialStoragePimpl::initialize_head_tail_pages</a>() {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  std::memset(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_, 0, <span class="keyword">sizeof</span>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// we pre-allocate pointer pages for all required nodes.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="comment">// 2^10 pointers (threads) per page : 4 nodes per page</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  uint32_t nodes = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">for</span> (uint16_t p = 0; p * 4 &lt; nodes; ++p) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    uint16_t node = p * 4;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html">memory::NumaNodeMemoryRef</a>* memory = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">get_node_memory</a>(node);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1PagePool.html">memory::PagePool</a>* pool = memory-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">get_volatile_pool</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> head_offset, tail_offset;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// minor todo: gracefully fail in case of out of memory</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4">grab_one</a>(&amp;head_offset));</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a>(pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4">grab_one</a>(&amp;tail_offset));</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[p].set(node, head_offset);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[p].set(node, tail_offset);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">void</span>* head_page =  pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">get_resolver</a>().<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(head_offset);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">void</span>* tail_page =  pool-&gt;<a class="code" href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">get_resolver</a>().<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(tail_offset);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    std::memset(head_page, 0, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    std::memset(tail_page, 0, <a class="code" href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">kPageSize</a>);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a8b82d79a7b8aab753945617abbc40b7f">  213</a></span>&#160;<a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a> <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a8b82d79a7b8aab753945617abbc40b7f">SequentialStorageControlBlock::optimistic_read_truncate_epoch</a>(</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* context,</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>* out)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <a class="code" href="classfoedus_1_1xct_1_1Xct.html">xct::Xct</a>&amp; cur_xct = context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3">get_current_xct</a>();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">if</span> (!cur_xct.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a9a76be25f22fd49683d2a4138ab7b199">is_active</a>()) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a72dcb6f3cd90cdeb9cbc8fbcecd0da3b">kErrorCodeXctNoXct</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keyword">auto</span>* address = &amp;<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a778c00564de6031b30808f7219c20c5f">cur_truncate_epoch_tid_</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> observed = address-&gt;xct_id_;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(observed.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">is_being_written</a>())) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">assorted::memory_fence_acquire</a>();</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    observed = address-&gt;xct_id_;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  *out = <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>(<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a3072846a0ca4bc44b5d49cb0b5f51f33">cur_truncate_epoch_</a>.load());  <span class="comment">// atomic!</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a>(cur_xct.<a class="code" href="classfoedus_1_1xct_1_1Xct.html#a52e75f1bf22a2b3553b6960799d7f6d6">add_to_lock_free_read_set</a>(</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a854a77e18af17a430511a48a0b3f0bfa">meta_</a>.<a class="code" href="structfoedus_1_1storage_1_1Metadata.html#a2187b39e4d71b81227dc6f09b0c711e8">id_</a>,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    observed,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    const_cast&lt; xct::RwLockableXctId* &gt;(address)));  <span class="comment">// why it doesn&#39;t receive const? I forgot..</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">kErrorCodeOk</a>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f">  236</a></span>&#160;<a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f">SequentialStoragePimpl::truncate</a>(<a class="code" href="classfoedus_1_1Epoch.html">Epoch</a> new_truncate_epoch, <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>* commit_epoch) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Truncating &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>() &lt;&lt; <span class="stringliteral">&quot; upto Epoch &quot;</span> &lt;&lt; new_truncate_epoch</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    &lt;&lt; <span class="stringliteral">&quot;. old value=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (!new_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">is_valid</a>()) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;truncate() was called with an invalid epoch&quot;</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">kErrorCodeInvalidParameter</a>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_truncate_epoch &lt; engine_-&gt;get_earliest_epoch()) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    LOG(ERROR) &lt;&lt; <span class="stringliteral">&quot;too-old epoch for this system. &quot;</span> &lt;&lt; new_truncate_epoch;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a>(<a class="code" href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">kErrorCodeInvalidParameter</a>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// will check this again after locking.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_) &gt;= new_truncate_epoch) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Already truncated up to &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      &lt;&lt; <span class="stringliteral">&quot;. Requested = &quot;</span> &lt;&lt; new_truncate_epoch;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (new_truncate_epoch &gt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1">get_current_global_epoch</a>()) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    LOG(WARNING) &lt;&lt; <span class="stringliteral">&quot;Ohh? we don&#39;t prohibit it, but are you sure? Truncating up to a future&quot;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; epoch-&quot;</span> &lt;&lt; new_truncate_epoch &lt;&lt; <span class="stringliteral">&quot;. cur_global=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1">get_current_global_epoch</a>();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// We lock it first so that there are no concurrent truncate.</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// TODO(Hideaki) Ownerless-lock here</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// xct::McsOwnerlessLockScope scope(&amp;control_block_-&gt;cur_truncate_epoch_tid_);</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_) &gt;= new_truncate_epoch) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Already truncated up to &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Epoch.html">Epoch</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;. Requested = &quot;</span> &lt;&lt; new_truncate_epoch;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// First, let scanner know that something is happening.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// 1. Scanners that didn&#39;t observe this and commit before us: fine.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// 2. Scanners that didn&#39;t observe this and commit after us:</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">//      will see this flag and abort in precommit, fine.</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// 3. Scanners that observe this:</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">//      spin until we are done, fine (see optimistic_read_truncate_epoch()).</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">// NOTE: Below, we must NOT have any error-return path. Otherwise being_written state is left.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_.set_being_written();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <a class="code" href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">assorted::memory_fence_acq_rel</a>();</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="comment">// Log this operation as a metadata operation. We get a commit_epoch here.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordtype">char</span> log_buffer[<span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a>)];</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      std::memset(log_buffer, 0, <span class="keyword">sizeof</span>(log_buffer));</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a>* the_log = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a>*<span class="keyword">&gt;</span>(log_buffer);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      the_log-&gt;<a class="code" href="structfoedus_1_1log_1_1BaseLogType.html#a574e9dac4445db7814303700a9910821">header_</a>.<a class="code" href="structfoedus_1_1log_1_1LogHeader.html#a4130fa3f2304558f7a357c7cbd4bac95">storage_id_</a> = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">get_id</a>();</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      the_log-&gt;<a class="code" href="structfoedus_1_1log_1_1BaseLogType.html#a574e9dac4445db7814303700a9910821">header_</a>.<a class="code" href="structfoedus_1_1log_1_1LogHeader.html#a7c382058dce51839469c0f7da72f7003">log_type_code_</a> = log::get_log_code&lt;SequentialTruncateLogType&gt;();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      the_log-&gt;<a class="code" href="structfoedus_1_1log_1_1BaseLogType.html#a574e9dac4445db7814303700a9910821">header_</a>.<a class="code" href="structfoedus_1_1log_1_1LogHeader.html#a1400e0567816605732d3c5d0070c5a54">log_length_</a> = <span class="keyword">sizeof</span>(<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      the_log-&gt;<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html#a06f0416993bcb733a6bca77ad4b293de">new_truncate_epoch_</a> = new_truncate_epoch;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc">get_log_manager</a>()-&gt;<a class="code" href="classfoedus_1_1log_1_1LogManager.html#a52b21aa441034df16ef60232abde9760">get_meta_buffer</a>()-&gt;<a class="code" href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3">commit</a>(the_log, commit_epoch);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// Then, apply it. This also clears the being_written flag</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> xct_id;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      xct_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#ad18a2d4a528fa063786b6efaf1035377">set</a>(commit_epoch-&gt;<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>(), 1);  <span class="comment">// no dependency, so minimal ordinal is always correct</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(new_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>());  <span class="comment">// atomic!</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_ = xct_id;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="comment">// Also set to the metadata to make this permanent.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="comment">// The metadata will be written out in next snapshot.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="comment">// Until that, REDO-operation below will re-apply that after crash.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = new_truncate_epoch.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">assorted::memory_fence_release</a>();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Truncated&quot;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">kRetOk</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4">  313</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4">SequentialStoragePimpl::apply_truncate</a>(<span class="keyword">const</span> <a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">SequentialTruncateLogType</a>&amp; the_log) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// this method is called only during restart, so no race.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;exists());</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_tid_.xct_id_ = the_log.<a class="code" href="structfoedus_1_1log_1_1BaseLogType.html#a574e9dac4445db7814303700a9910821">header_</a>.<a class="code" href="structfoedus_1_1log_1_1LogHeader.html#a63a070d41928ad05b55976bc6e32cdcd">xct_id_</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_.store(the_log.<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html#a06f0416993bcb733a6bca77ad4b293de">new_truncate_epoch_</a>.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>());</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;meta_.truncate_epoch_ = the_log.<a class="code" href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html#a06f0416993bcb733a6bca77ad4b293de">new_truncate_epoch_</a>.<a class="code" href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">value</a>();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;Applied redo-log of truncation on sequential storage- &quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">get_name</a>()</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; epoch=&quot;</span> &lt;&lt; <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;cur_truncate_epoch_;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1">  323</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1">SequentialStoragePimpl::append_record</a>(</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="classfoedus_1_1thread_1_1Thread.html">thread::Thread</a>* context,</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <a class="code" href="structfoedus_1_1xct_1_1XctId.html">xct::XctId</a> owner_id,</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* payload,</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  uint16_t payload_count) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id = context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da">get_thread_id</a>();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <a class="code" href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">thread::ThreadGroupId</a> node = context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8">get_numa_node</a>();</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="comment">// the list is local to this core, so no race possible EXCEPT scanning thread</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// and snapshot thread, but they are read-only or only dropping pages.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>* tail_pointer = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">get_tail_pointer</a>(thread_id);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tail_pointer);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>* tail = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordflow">if</span> (*tail_pointer != 0) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    tail = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#ac8953b86c90ec5ee1730b05397a259da">get_local_volatile_page_resolver</a>().<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be">resolve_offset</a>(*tail_pointer));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (tail == <span class="keyword">nullptr</span> ||</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      !tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac3f12983b3c02d8a6e3cae2867f9d4a2">can_insert_record</a>(payload_count) ||</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// note: we make sure no volatile page has records from two epochs.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="comment">// this makes us easy to drop volatile pages after snapshotting.</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      (tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#adfc56f09f9e4e09466c4f102b9283076">get_record_count</a>() &gt; 0 &amp;&amp; tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aebcdc0447e1317476fe28d4303680112">get_first_record_epoch</a>() != owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83">get_epoch</a>())) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> new_page_offset</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      = context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#a4e553f5e14ec00d8ba23fbdfa26d687e">get_thread_memory</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">grab_free_volatile_page</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a>(new_page_offset == 0)) {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      LOG(FATAL) &lt;&lt; <span class="stringliteral">&quot; Unexpected error. we ran out of free page while inserting to sequential&quot;</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="stringliteral">&quot; storage after commit.&quot;</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html">VolatilePagePointer</a> new_page_pointer;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    new_page_pointer.<a class="code" href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69">set</a>(node, new_page_offset);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>* new_page = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      context-&gt;<a class="code" href="classfoedus_1_1thread_1_1Thread.html#ac8953b86c90ec5ee1730b05397a259da">get_local_volatile_page_resolver</a>().<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">resolve_offset_newpage</a>(new_page_offset));</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    new_page-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac05740b312c9c0024d090145d2a4dde0">initialize_volatile_page</a>(<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">get_id</a>(), new_page_pointer);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (tail == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="comment">// this is the first access to this head pointer. Let&#39;s install the first page.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*tail_pointer == 0);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>* head_pointer = <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a>(thread_id);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*head_pointer == 0);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      *head_pointer = new_page_offset;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      *tail_pointer = new_page_offset;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(*<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a>(thread_id) != 0);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      *tail_pointer = new_page_offset;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a7ed4fd4e290f1e49a0b187d43b83674e">next_page</a>().<a class="code" href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">volatile_pointer_</a> = new_page_pointer;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    tail = new_page;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(tail &amp;&amp;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac3f12983b3c02d8a6e3cae2867f9d4a2">can_insert_record</a>(payload_count) &amp;&amp;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    (tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#adfc56f09f9e4e09466c4f102b9283076">get_record_count</a>() == 0 || tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aebcdc0447e1317476fe28d4303680112">get_first_record_epoch</a>() == owner_id.<a class="code" href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83">get_epoch</a>()));</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  tail-&gt;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aec915d81c404fca9de77c9eed625afa9">append_record_nosync</a>(owner_id, payload_count, payload);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">  378</a></span>&#160;<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>* <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">SequentialStoragePimpl::get_head_pointer</a>(<a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">thread::decompose_numa_node</a>(thread_id) &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">thread::decompose_numa_local_ordinal</a>(thread_id)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  uint16_t page;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  uint16_t index;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">get_pointer_page_and_index</a>(thread_id, &amp;page, &amp;index);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; resolver</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <a class="code" href="group__SEQUENTIAL.html#structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage">PointerPage</a>* head_page</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__SEQUENTIAL.html#structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage">PointerPage</a>*<span class="keyword">&gt;</span>(resolver.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35">resolve_offset_newpage</a>(</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;head_pointer_pages_[page]));</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> head_page-&gt;<a class="code" href="group__SEQUENTIAL.html#a1e571fc655b7991d9a6c621d2050488e">pointers_</a> + index;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">  392</a></span>&#160;<a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a>* <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">SequentialStoragePimpl::get_tail_pointer</a>(<a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">thread::decompose_numa_node</a>(thread_id) &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">group_count_</a>);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">thread::decompose_numa_local_ordinal</a>(thread_id)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    &lt; <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">get_options</a>().<a class="code" href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">thread_</a>.<a class="code" href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">thread_count_per_group_</a>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  uint16_t page;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  uint16_t index;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">get_pointer_page_and_index</a>(thread_id, &amp;page, &amp;index);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">memory::GlobalVolatilePageResolver</a>&amp; resolver</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    = <a class="code" href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">engine_</a>-&gt;<a class="code" href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">get_memory_manager</a>()-&gt;<a class="code" href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">get_global_volatile_page_resolver</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="group__SEQUENTIAL.html#structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage">PointerPage</a>* tail_page</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="group__SEQUENTIAL.html#structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage">PointerPage</a>*<span class="keyword">&gt;</span>(resolver.<a class="code" href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35">resolve_offset_newpage</a>(</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">control_block_</a>-&gt;tail_pointer_pages_[page]));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> tail_page-&gt;<a class="code" href="group__SEQUENTIAL.html#a1e571fc655b7991d9a6c621d2050488e">pointers_</a> + index;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">  407</a></span>&#160;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>* <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">SequentialStoragePimpl::get_head</a>(</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a>&amp; resolver,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = *<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">get_head_pointer</a>(thread_id);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span> (offset == 0) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>*<span class="keyword">&gt;</span>(resolver.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be">resolve_offset</a>(offset));</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aeed5645880f0c4dfe3bca57ad9846ea4">  417</a></span>&#160;<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>* <a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aeed5645880f0c4dfe3bca57ad9846ea4">SequentialStoragePimpl::get_tail</a>(</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keyword">const</span> <a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html">memory::LocalPageResolver</a>&amp; resolver,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">thread::ThreadId</a> thread_id)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">memory::PagePoolOffset</a> offset = *<a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">get_tail_pointer</a>(thread_id);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">if</span> (offset == 0) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">SequentialPage</a>*<span class="keyword">&gt;</span>(resolver.<a class="code" href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be">resolve_offset</a>(offset));</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}  <span class="comment">// namespace sequential</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}  <span class="comment">// namespace storage</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="ttc" id="assorted__func_8hpp_html"><div class="ttname"><a href="assorted__func_8hpp.html">assorted_func.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType_html_a06f0416993bcb733a6bca77ad4b293de"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html#a06f0416993bcb733a6bca77ad4b293de">foedus::storage::sequential::SequentialTruncateLogType::new_truncate_epoch_</a></div><div class="ttdeci">Epoch new_truncate_epoch_</div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00082">sequential_log_types.hpp:82</a></div></div>
<div class="ttc" id="classfoedus_1_1log_1_1LogManager_html_a52b21aa441034df16ef60232abde9760"><div class="ttname"><a href="classfoedus_1_1log_1_1LogManager.html#a52b21aa441034df16ef60232abde9760">foedus::log::LogManager::get_meta_buffer</a></div><div class="ttdeci">MetaLogBuffer * get_meta_buffer()</div><div class="ttdef"><b>Definition:</b> <a href="log__manager_8cpp_source.html#l00061">log_manager.cpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageControlBlock_html_ae20f48002ac04f92b32085ee52a56ed0"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageControlBlock.html#ae20f48002ac04f92b32085ee52a56ed0">foedus::storage::StorageControlBlock::meta_</a></div><div class="ttdeci">Metadata meta_</div><div class="ttdoc">common part of the metadata. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00084">storage.hpp:84</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_ac48c54832becbaa9141926af14705ba3"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#ac48c54832becbaa9141926af14705ba3">foedus::thread::Thread::get_current_xct</a></div><div class="ttdeci">xct::Xct &amp; get_current_xct()</div><div class="ttdoc">Returns the transaction that is currently running on this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00075">thread.cpp:75</a></div></div>
<div class="ttc" id="storage__manager_8hpp_html"><div class="ttname"><a href="storage__manager_8hpp.html">storage_manager.hpp</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a01914ad44c1e130dd69580da3c04a195">foedus::kErrorCodeInvalidParameter</a></div><div class="ttdoc">0x0002 : "GENERAL: Invalid parameter given" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00106">error_code.hpp:106</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage_html_ab8696b7ccf07c7b8e1efb038d8cd83c2"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#ab8696b7ccf07c7b8e1efb038d8cd83c2">foedus::storage::sequential::SequentialStorage::append_record</a></div><div class="ttdeci">ErrorCode append_record(thread::Thread *context, const void *payload, uint16_t payload_count)</div><div class="ttdoc">Append one record to this sequential storage. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00056">sequential_storage_pimpl.cpp:56</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a4e553f5e14ec00d8ba23fbdfa26d687e"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a4e553f5e14ec00d8ba23fbdfa26d687e">foedus::thread::Thread::get_thread_memory</a></div><div class="ttdeci">memory::NumaCoreMemory * get_thread_memory() const </div><div class="ttdoc">Returns the private memory repository of this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00057">thread.cpp:57</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a65a45c9727f65048b1b55b7b69dfdce1"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a65a45c9727f65048b1b55b7b69dfdce1">foedus::storage::sequential::SequentialStoragePimpl::append_record</a></div><div class="ttdeci">void append_record(thread::Thread *context, xct::XctId owner_id, const void *payload, uint16_t payload_count)</div><div class="ttdoc">Appends an already-commited record to this volatile list. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00323">sequential_storage_pimpl.cpp:323</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaCoreMemory_html_ad09e335bbca636246cf2c3d60ec22570"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaCoreMemory.html#ad09e335bbca636246cf2c3d60ec22570">foedus::memory::NumaCoreMemory::grab_free_volatile_page</a></div><div class="ttdeci">PagePoolOffset grab_free_volatile_page()</div><div class="ttdoc">Acquires one free volatile page from local page pool. </div><div class="ttdef"><b>Definition:</b> <a href="numa__core__memory_8cpp_source.html#l00199">numa_core_memory.cpp:199</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType_html_a40835452417ed6a79fd904f4c9536660"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a40835452417ed6a79fd904f4c9536660">foedus::storage::sequential::SequentialAppendLogType::payload_</a></div><div class="ttdeci">char payload_[6]</div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00099">sequential_log_types.hpp:99</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html">foedus::storage::sequential::SequentialStoragePimpl</a></div><div class="ttdoc">Lock-free list of records stored in the volatile part of sequential storage. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00139">sequential_storage_pimpl.hpp:139</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_aaf7d413df08f874c5d7caf175260c02f"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aaf7d413df08f874c5d7caf175260c02f">foedus::storage::sequential::SequentialStoragePimpl::load</a></div><div class="ttdeci">ErrorStack load(const StorageControlBlock &amp;snapshot_block)</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00166">sequential_storage_pimpl.cpp:166</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType_html_a64d63f4dcd9a92a5180a64dd9cf50572"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a64d63f4dcd9a92a5180a64dd9cf50572">foedus::storage::sequential::SequentialAppendLogType::populate</a></div><div class="ttdeci">void populate(StorageId storage_id, const void *payload, uint16_t payload_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00106">sequential_log_types.hpp:106</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa598b0ca7f0de626ecfa17f2cd58d5b4"><div class="ttname"><a href="group__ERRORCODES.html#gaa598b0ca7f0de626ecfa17f2cd58d5b4">ERROR_STACK</a></div><div class="ttdeci">#define ERROR_STACK(e)        </div><div class="ttdoc">Instantiates ErrorStack with the given foedus::error_code, creating an error stack with the current f...</div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00480">error_stack.hpp:480</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html">foedus::memory::PagePool</a></div><div class="ttdoc">Page pool for volatile read/write store (VolatilePage) and the read-only bufferpool (SnapshotPage)...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00173">page_pool.hpp:173</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock_html_a3072846a0ca4bc44b5d49cb0b5f51f33"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a3072846a0ca4bc44b5d49cb0b5f51f33">foedus::storage::sequential::SequentialStorageControlBlock::cur_truncate_epoch_</a></div><div class="ttdeci">std::atomic&lt; Epoch::EpochInteger &gt; cur_truncate_epoch_</div><div class="ttdoc">The min epoch value (truncate-epoch) for all valid records in this storage. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00077">sequential_storage_pimpl.hpp:77</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html_ac3f12983b3c02d8a6e3cae2867f9d4a2"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac3f12983b3c02d8a6e3cae2867f9d4a2">foedus::storage::sequential::SequentialPage::can_insert_record</a></div><div class="ttdeci">bool can_insert_record(uint16_t payload_length) const </div><div class="ttdoc">Returns if this page has enough room to insert a record with the given payload length. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00184">sequential_page_impl.hpp:184</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_a8bb6c37c44056c5f986f6dd164b5b23a"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a8bb6c37c44056c5f986f6dd164b5b23a">foedus::storage::VolatilePagePointer::word</a></div><div class="ttdeci">uint64_t word</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00195">storage_id.hpp:195</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a3e9390381783077a504116988cae05c4"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a3e9390381783077a504116988cae05c4">foedus::memory::PagePool::grab_one</a></div><div class="ttdeci">ErrorCode grab_one(PagePoolOffset *offset)</div><div class="ttdoc">Grab only one page. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00132">page_pool.cpp:132</a></div></div>
<div class="ttc" id="snapshot_8hpp_html"><div class="ttname"><a href="snapshot_8hpp.html">snapshot.hpp</a></div></div>
<div class="ttc" id="group__SEQUENTIAL_html_structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage"><div class="ttname"><a href="group__SEQUENTIAL.html#structfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_1_1PointerPage">foedus::storage::sequential::SequentialStoragePimpl::PointerPage</a></div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00141">sequential_storage_pimpl.hpp:141</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html">foedus::thread::Thread</a></div><div class="ttdoc">Represents one thread running on one NUMA core. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8hpp_source.html#l00048">thread.hpp:48</a></div></div>
<div class="ttc" id="group__MEMORY_html_gaf7ed7c23d184b14ce978b1775a86dfae"><div class="ttname"><a href="group__MEMORY.html#gaf7ed7c23d184b14ce978b1775a86dfae">foedus::memory::PagePoolOffset</a></div><div class="ttdeci">uint32_t PagePoolOffset</div><div class="ttdoc">Offset in PagePool that compactly represents the page address (unlike 8 bytes pointer). </div><div class="ttdef"><b>Definition:</b> <a href="memory__id_8hpp_source.html#l00044">memory_id.hpp:44</a></div></div>
<div class="ttc" id="log__type_8hpp_html"><div class="ttname"><a href="log__type_8hpp.html">log_type.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html_aebcdc0447e1317476fe28d4303680112"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aebcdc0447e1317476fe28d4303680112">foedus::storage::sequential::SequentialPage::get_first_record_epoch</a></div><div class="ttdeci">Epoch get_first_record_epoch() const </div><div class="ttdoc">Returns the epoch of the fist record in this page (undefined behavior if no record). </div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00193">sequential_page_impl.hpp:193</a></div></div>
<div class="ttc" id="xct_8hpp_html"><div class="ttname"><a href="xct_8hpp.html">xct.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html_a7ed4fd4e290f1e49a0b187d43b83674e"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#a7ed4fd4e290f1e49a0b187d43b83674e">foedus::storage::sequential::SequentialPage::next_page</a></div><div class="ttdeci">DualPagePointer &amp; next_page()</div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00130">sequential_page_impl.hpp:130</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a62b2d4de6a72644e9e31d35a7f9beae0"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a62b2d4de6a72644e9e31d35a7f9beae0">foedus::memory::EngineMemory::get_global_volatile_page_resolver</a></div><div class="ttdeci">const GlobalVolatilePageResolver &amp; get_global_volatile_page_resolver() const </div><div class="ttdoc">Returns the page resolver to convert volatile page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00090">engine_memory.hpp:90</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_acc045528304f2d22f64b3f1c76b99fa5"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#acc045528304f2d22f64b3f1c76b99fa5">foedus::storage::sequential::SequentialStoragePimpl::initialize_head_tail_pages</a></div><div class="ttdeci">ErrorStack initialize_head_tail_pages()</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00188">sequential_storage_pimpl.cpp:188</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_af98ed86adde3f5e39c9cab39440f38da"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#af98ed86adde3f5e39c9cab39440f38da">foedus::thread::Thread::get_thread_id</a></div><div class="ttdeci">ThreadId get_thread_id() const </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00053">thread.cpp:53</a></div></div>
<div class="ttc" id="group__THREAD_html_ga93083d6b052db01851cb61c120522c1d"><div class="ttname"><a href="group__THREAD.html#ga93083d6b052db01851cb61c120522c1d">foedus::thread::decompose_numa_local_ordinal</a></div><div class="ttdeci">ThreadLocalOrdinal decompose_numa_local_ordinal(ThreadId global_id)</div><div class="ttdoc">Extracts local ordinal from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00139">thread_id.hpp:139</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock_html_a778c00564de6031b30808f7219c20c5f"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a778c00564de6031b30808f7219c20c5f">foedus::storage::sequential::SequentialStorageControlBlock::cur_truncate_epoch_tid_</a></div><div class="ttdeci">xct::RwLockableXctId cur_truncate_epoch_tid_</div><div class="ttdoc">Protects accesses to cur_truncate_epoch_. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00074">sequential_storage_pimpl.hpp:74</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_aa7220391af1f368d1fd36b48cc1e2995"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#aa7220391af1f368d1fd36b48cc1e2995">foedus::memory::PagePool::release_one</a></div><div class="ttdeci">void release_one(PagePoolOffset offset)</div><div class="ttdoc">Returns only one page. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00144">page_pool.cpp:144</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html">foedus::storage::VolatilePagePointer</a></div><div class="ttdoc">Represents a pointer to a volatile page with modification count for preventing ABA. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00194">storage_id.hpp:194</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html">foedus::xct::Xct</a></div><div class="ttdoc">Represents a user transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00058">xct.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_aa9d2266686c3a66678b37241a3ac434f"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#aa9d2266686c3a66678b37241a3ac434f">foedus::memory::LocalPageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00064">page_resolver.hpp:64</a></div></div>
<div class="ttc" id="engine_8hpp_html"><div class="ttname"><a href="engine_8hpp.html">engine.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html">foedus::xct::XctId</a></div><div class="ttdoc">Persistent status part of Transaction ID. </div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00955">xct_id.hpp:955</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_aeed5645880f0c4dfe3bca57ad9846ea4"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aeed5645880f0c4dfe3bca57ad9846ea4">foedus::storage::sequential::SequentialStoragePimpl::get_tail</a></div><div class="ttdeci">SequentialPage * get_tail(const memory::LocalPageResolver &amp;resolver, thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00417">sequential_storage_pimpl.cpp:417</a></div></div>
<div class="ttc" id="classfoedus_1_1ErrorStack_html"><div class="ttname"><a href="classfoedus_1_1ErrorStack.html">foedus::ErrorStack</a></div><div class="ttdoc">Brings error stacktrace information as return value of functions. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00081">error_stack.hpp:81</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html_aec915d81c404fca9de77c9eed625afa9"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#aec915d81c404fca9de77c9eed625afa9">foedus::storage::sequential::SequentialPage::append_record_nosync</a></div><div class="ttdeci">void append_record_nosync(xct::XctId owner_id, uint16_t payload_length, const void *payload)</div><div class="ttdoc">Appends a record to this page. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00155">sequential_page_impl.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html"><div class="ttname"><a href="classfoedus_1_1Epoch.html">foedus::Epoch</a></div><div class="ttdoc">Represents a time epoch. </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00061">epoch.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a9a76be25f22fd49683d2a4138ab7b199"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a9a76be25f22fd49683d2a4138ab7b199">foedus::xct::Xct::is_active</a></div><div class="ttdeci">bool is_active() const </div><div class="ttdoc">Returns whether the object is an active transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8hpp_source.html#l00121">xct.hpp:121</a></div></div>
<div class="ttc" id="stop__watch_8hpp_html"><div class="ttname"><a href="stop__watch_8hpp.html">stop_watch.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_a5f84f871a1d36f9ee990f3175661cd99"><div class="ttname"><a href="classfoedus_1_1Attachable.html#a5f84f871a1d36f9ee990f3175661cd99">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::engine_</a></div><div class="ttdeci">Engine * engine_</div><div class="ttdoc">Most attachable object stores an engine pointer (local engine), so we define it here. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00107">attachable.hpp:107</a></div></div>
<div class="ttc" id="storage__manager__pimpl_8hpp_html"><div class="ttname"><a href="storage__manager__pimpl_8hpp.html">storage_manager_pimpl.hpp</a></div></div>
<div class="ttc" id="group__STORAGE_html_ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1"><div class="ttname"><a href="group__STORAGE.html#ggaa532fc59a87dc23b6d432d444e98d63fadb3a41d3a531bce354f2df2aebef8dd1">foedus::storage::kExists</a></div><div class="ttdoc">The storage has been created and ready for use. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00158">storage_id.hpp:158</a></div></div>
<div class="ttc" id="memory__id_8hpp_html"><div class="ttname"><a href="memory__id_8hpp.html">memory_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a9e7deab12645a7867f1c4e262c3d9b0b"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9e7deab12645a7867f1c4e262c3d9b0b">foedus::storage::sequential::SequentialStoragePimpl::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00154">sequential_storage_pimpl.hpp:154</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html">foedus::storage::sequential::SequentialPage</a></div><div class="ttdoc">Represents one data page in Sequential Storage. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00053">sequential_page_impl.hpp:53</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56ae054d2163146603e747288bc86e8f3ed">foedus::kErrorCodeStrTooLongPayload</a></div><div class="ttdoc">0x0808 : "STORAGE: Payload of the record is too long" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00174">error_code.hpp:174</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a52e75f1bf22a2b3553b6960799d7f6d6"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a52e75f1bf22a2b3553b6960799d7f6d6">foedus::xct::Xct::add_to_lock_free_read_set</a></div><div class="ttdeci">ErrorCode add_to_lock_free_read_set(storage::StorageId storage_id, XctId observed_owner_id, RwLockableXctId *owner_id_address)</div><div class="ttdoc">Add the given record to the special read-set that is not placed in usual data pages. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00532">xct.cpp:532</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a6546930099132529543c320327367ef1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a6546930099132529543c320327367ef1">foedus::Engine::get_options</a></div><div class="ttdeci">const EngineOptions &amp; get_options() const </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00039">engine.cpp:39</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_aae76de27898d6474ca21a00cf107a3d4"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#aae76de27898d6474ca21a00cf107a3d4">foedus::thread::ThreadOptions::thread_count_per_group_</a></div><div class="ttdeci">ThreadLocalOrdinal thread_count_per_group_</div><div class="ttdoc">Number of Thread in each ThreadGroup. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00050">thread_options.hpp:50</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html">foedus::memory::NumaNodeMemoryRef</a></div><div class="ttdoc">A view of NumaNodeMemory for other SOCs and master engine. </div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00167">numa_node_memory.hpp:167</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_ad18a2d4a528fa063786b6efaf1035377"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#ad18a2d4a528fa063786b6efaf1035377">foedus::xct::XctId::set</a></div><div class="ttdeci">void set(Epoch::EpochInteger epoch_int, uint32_t ordinal)</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00958">xct_id.hpp:958</a></div></div>
<div class="ttc" id="namespacefoedus_1_1storage_1_1sequential_html_af598f2edf5a573df9e636aa314250d94"><div class="ttname"><a href="namespacefoedus_1_1storage_1_1sequential.html#af598f2edf5a573df9e636aa314250d94">foedus::storage::sequential::get_pointer_page_and_index</a></div><div class="ttdeci">void get_pointer_page_and_index(uint16_t thread_id, uint16_t *page, uint16_t *index)</div><div class="ttdoc">Calculate the page/index of the thread-private head/tail pointer. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__id_8hpp_source.html#l00108">sequential_id.hpp:108</a></div></div>
<div class="ttc" id="sequential__storage__pimpl_8hpp_html"><div class="ttname"><a href="sequential__storage__pimpl_8hpp.html">sequential_storage_pimpl.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_ace44cb03e7da84d29f3a02a790c69191"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#ace44cb03e7da84d29f3a02a790c69191">foedus::memory::PagePoolOffsetChunk::full</a></div><div class="ttdeci">bool full() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00061">page_pool.hpp:61</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_a9a5d37d6dac9966989e23381f600fcee"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#a9a5d37d6dac9966989e23381f600fcee">foedus::thread::Thread::get_thread_log_buffer</a></div><div class="ttdeci">log::ThreadLogBuffer &amp; get_thread_log_buffer()</div><div class="ttdoc">Returns the private log buffer for this thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00078">thread.cpp:78</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1DualPagePointer_html_a99e67179a5576a52a4710c700ac309f4"><div class="ttname"><a href="structfoedus_1_1storage_1_1DualPagePointer.html#a99e67179a5576a52a4710c700ac309f4">foedus::storage::DualPagePointer::volatile_pointer_</a></div><div class="ttdeci">VolatilePagePointer volatile_pointer_</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00308">storage_id.hpp:308</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a6fe6714ceb6dbd09ad6f627d11b775c9">foedus::kErrorCodeOk</a></div><div class="ttdoc">0 means no-error. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00087">error_code.hpp:87</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a8917edb5d2712fba660a33c6cf2fb19f"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a8917edb5d2712fba660a33c6cf2fb19f">foedus::storage::sequential::SequentialStoragePimpl::truncate</a></div><div class="ttdeci">ErrorStack truncate(Epoch new_truncate_epoch, Epoch *commit_epoch)</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00236">sequential_storage_pimpl.cpp:236</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock_html_a8b82d79a7b8aab753945617abbc40b7f"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a8b82d79a7b8aab753945617abbc40b7f">foedus::storage::sequential::SequentialStorageControlBlock::optimistic_read_truncate_epoch</a></div><div class="ttdeci">ErrorCode optimistic_read_truncate_epoch(thread::Thread *context, Epoch *out) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00213">sequential_storage_pimpl.cpp:213</a></div></div>
<div class="ttc" id="classfoedus_1_1Attachable_html_af9f87c691e2df0b04322e6df8d7c0d81"><div class="ttname"><a href="classfoedus_1_1Attachable.html#af9f87c691e2df0b04322e6df8d7c0d81">foedus::Attachable&lt; SequentialStorageControlBlock &gt;::control_block_</a></div><div class="ttdeci">SequentialStorageControlBlock * control_block_</div><div class="ttdoc">The shared data on shared memory that has been initialized in some SOC or master engine. </div><div class="ttdef"><b>Definition:</b> <a href="attachable_8hpp_source.html#l00111">attachable.hpp:111</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_aa27f031bd1e256d38e616ec9a499eefc"><div class="ttname"><a href="classfoedus_1_1Engine.html#aa27f031bd1e256d38e616ec9a499eefc">foedus::Engine::get_log_manager</a></div><div class="ttdeci">log::LogManager * get_log_manager() const </div><div class="ttdoc">See Log Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00049">engine.cpp:49</a></div></div>
<div class="ttc" id="classfoedus_1_1xct_1_1Xct_html_a3a3bb3ad1bee321b677b059cf29fbbbf"><div class="ttname"><a href="classfoedus_1_1xct_1_1Xct.html#a3a3bb3ad1bee321b677b059cf29fbbbf">foedus::xct::Xct::add_to_lock_free_write_set</a></div><div class="ttdeci">ErrorCode add_to_lock_free_write_set(storage::StorageId storage_id, log::RecordLogType *log_entry)</div><div class="ttdoc">Add the given log to the lock-free write set of this transaction. </div><div class="ttdef"><b>Definition:</b> <a href="xct_8cpp_source.html#l00551">xct.cpp:551</a></div></div>
<div class="ttc" id="record_8hpp_html"><div class="ttname"><a href="record_8hpp.html">record.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a8d468737935eab05b3f9757cb6757fe1"><div class="ttname"><a href="classfoedus_1_1Engine.html#a8d468737935eab05b3f9757cb6757fe1">foedus::Engine::get_current_global_epoch</a></div><div class="ttdeci">Epoch get_current_global_epoch() const </div><div class="ttdoc">Returns the current global epoch, the epoch a newly started transaction will be in. </div><div class="ttdef"><b>Definition:</b> <a href="engine__pimpl_8cpp_source.html#l00282">engine_pimpl.cpp:282</a></div></div>
<div class="ttc" id="numa__core__memory_8hpp_html"><div class="ttname"><a href="numa__core__memory_8hpp.html">numa_core_memory.hpp</a></div></div>
<div class="ttc" id="page__pool_8hpp_html"><div class="ttname"><a href="page__pool_8hpp.html">page_pool.hpp</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a0a03edf7d6ab7385275f50b23173dce8">foedus::kErrorCodeStrAlreadyExists</a></div><div class="ttdoc">0x0802 : "STORAGE: This storage already exists" . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00168">error_code.hpp:168</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#af9fd4d7cf6f1fcd1a4df6ca7bc7b7ae4">foedus::storage::sequential::SequentialStoragePimpl::apply_truncate</a></div><div class="ttdeci">void apply_truncate(const SequentialTruncateLogType &amp;the_log)</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00313">sequential_storage_pimpl.cpp:313</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1EngineMemory_html_a8bf8832e627cd97fe92c60d38ed96ac8"><div class="ttname"><a href="classfoedus_1_1memory_1_1EngineMemory.html#a8bf8832e627cd97fe92c60d38ed96ac8">foedus::memory::EngineMemory::get_node_memory</a></div><div class="ttdeci">NumaNodeMemoryRef * get_node_memory(foedus::thread::ThreadGroupId group) const </div><div class="ttdef"><b>Definition:</b> <a href="engine__memory_8hpp_source.html#l00076">engine_memory.hpp:76</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_af48118bbaf92a957116ae2873fe55b83"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#af48118bbaf92a957116ae2873fe55b83">foedus::xct::XctId::get_epoch</a></div><div class="ttdeci">Epoch get_epoch() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l00964">xct_id.hpp:964</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1LogHeader_html_a63a070d41928ad05b55976bc6e32cdcd"><div class="ttname"><a href="structfoedus_1_1log_1_1LogHeader.html#a63a070d41928ad05b55976bc6e32cdcd">foedus::log::LogHeader::xct_id_</a></div><div class="ttdeci">xct::XctId xct_id_</div><div class="ttdoc">Epoch and in-epoch ordinal of this log. </div><div class="ttdef"><b>Definition:</b> <a href="common__log__types_8hpp_source.html#l00075">common_log_types.hpp:75</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad4ea4254f3eefd06d1c62ca8fdbe217c"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad4ea4254f3eefd06d1c62ca8fdbe217c">foedus::storage::sequential::SequentialStoragePimpl::drop</a></div><div class="ttdeci">ErrorStack drop()</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00086">sequential_storage_pimpl.cpp:86</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType_html_aa7eed00b696ed7dddfa12130abcf9208"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#aa7eed00b696ed7dddfa12130abcf9208">foedus::storage::sequential::SequentialAppendLogType::payload_count_</a></div><div class="ttdeci">uint16_t payload_count_</div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00098">sequential_log_types.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1VolatilePagePointer_html_a273a4c4f51c06ebc91663329742e1c69"><div class="ttname"><a href="structfoedus_1_1storage_1_1VolatilePagePointer.html#a273a4c4f51c06ebc91663329742e1c69">foedus::storage::VolatilePagePointer::set</a></div><div class="ttdeci">void set(uint8_t numa_node, memory::PagePoolOffset offset)</div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00212">storage_id.hpp:212</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1LogHeader_html_a7c382058dce51839469c0f7da72f7003"><div class="ttname"><a href="structfoedus_1_1log_1_1LogHeader.html#a7c382058dce51839469c0f7da72f7003">foedus::log::LogHeader::log_type_code_</a></div><div class="ttdeci">uint16_t log_type_code_</div><div class="ttdoc">Actually of LogCode defined in the X-Macro, but we want to make sure the type size is 2 bytes...</div><div class="ttdef"><b>Definition:</b> <a href="common__log__types_8hpp_source.html#l00055">common_log_types.hpp:55</a></div></div>
<div class="ttc" id="sequential__storage_8hpp_html"><div class="ttname"><a href="sequential__storage_8hpp.html">sequential_storage.hpp</a></div></div>
<div class="ttc" id="thread_8hpp_html"><div class="ttname"><a href="thread_8hpp.html">thread.hpp</a></div></div>
<div class="ttc" id="group__THREAD_html_ga1622c6d8c64ca80f51c1bef5190ec4fa"><div class="ttname"><a href="group__THREAD.html#ga1622c6d8c64ca80f51c1bef5190ec4fa">foedus::thread::decompose_numa_node</a></div><div class="ttdeci">ThreadGroupId decompose_numa_node(ThreadId global_id)</div><div class="ttdoc">Extracts NUMA node ID from the given globally unique ID of Thread (core). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00131">thread_id.hpp:131</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1Storage_html_ad9fcb57f0ee2a79e884c0b8b64c8b824"><div class="ttname"><a href="classfoedus_1_1storage_1_1Storage.html#ad9fcb57f0ee2a79e884c0b8b64c8b824">foedus::storage::Storage&lt; SequentialStorageControlBlock &gt;::get_id</a></div><div class="ttdeci">StorageId get_id() const</div><div class="ttdoc">Returns the unique ID of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00145">storage.hpp:145</a></div></div>
<div class="ttc" id="sequential__id_8hpp_html"><div class="ttname"><a href="sequential__id_8hpp.html">sequential_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="structfoedus_1_1log_1_1LogHeader_html_a1400e0567816605732d3c5d0070c5a54"><div class="ttname"><a href="structfoedus_1_1log_1_1LogHeader.html#a1400e0567816605732d3c5d0070c5a54">foedus::log::LogHeader::log_length_</a></div><div class="ttdeci">uint16_t log_length_</div><div class="ttdoc">Byte size of this log entry including this header itself and everything. </div><div class="ttdef"><b>Definition:</b> <a href="common__log__types_8hpp_source.html#l00061">common_log_types.hpp:61</a></div></div>
<div class="ttc" id="structfoedus_1_1thread_1_1ThreadOptions_html_ad9cfcfe5d16d5c394694919d2f59e627"><div class="ttname"><a href="structfoedus_1_1thread_1_1ThreadOptions.html#ad9cfcfe5d16d5c394694919d2f59e627">foedus::thread::ThreadOptions::group_count_</a></div><div class="ttdeci">uint16_t group_count_</div><div class="ttdoc">Number of ThreadGroup in the engine. </div><div class="ttdef"><b>Definition:</b> <a href="thread__options_8hpp_source.html#l00043">thread_options.hpp:43</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_ac8953b86c90ec5ee1730b05397a259da"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#ac8953b86c90ec5ee1730b05397a259da">foedus::thread::Thread::get_local_volatile_page_resolver</a></div><div class="ttdeci">const memory::LocalPageResolver &amp; get_local_volatile_page_resolver() const </div><div class="ttdoc">Returns page resolver to convert only local page ID to page pointer. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00080">thread.cpp:80</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a802171ff0578875748d20b4e9c8c9463"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a802171ff0578875748d20b4e9c8c9463">foedus::memory::PagePool::release</a></div><div class="ttdeci">void release(uint32_t desired_release_count, PagePoolOffsetChunk *chunk)</div><div class="ttdoc">Returns the specified number of free pages from the chunk. </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00134">page_pool.cpp:134</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType_html_a719ba3ad7fc61a7b8048a57804b3fd51"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html#a719ba3ad7fc61a7b8048a57804b3fd51">foedus::storage::sequential::SequentialAppendLogType::calculate_log_length</a></div><div class="ttdeci">static uint16_t calculate_log_length(uint16_t payload_count) __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00101">sequential_log_types.hpp:101</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html_a389ef2027f0d0dc27d35856733e2f9be"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html#a389ef2027f0d0dc27d35856733e2f9be">foedus::memory::LocalPageResolver::resolve_offset</a></div><div class="ttdeci">storage::Page * resolve_offset(PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">Resolves offset in this pool to storage::Page*. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00057">page_resolver.hpp:57</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialMetadata.html">foedus::storage::sequential::SequentialMetadata</a></div><div class="ttdoc">Metadata of a sequential storage. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__metadata_8hpp_source.html#l00053">sequential_metadata.hpp:53</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_aa13fb52d28c1ad2fd240bc877b18dc85"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#aa13fb52d28c1ad2fd240bc877b18dc85">foedus::storage::sequential::SequentialStoragePimpl::get_head_pointer</a></div><div class="ttdeci">memory::PagePoolOffset * get_head_pointer(thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00378">sequential_storage_pimpl.cpp:378</a></div></div>
<div class="ttc" id="group__THREAD_html_ga3cfa4441e96554e775ec6013c180e192"><div class="ttname"><a href="group__THREAD.html#ga3cfa4441e96554e775ec6013c180e192">foedus::thread::compose_thread_id</a></div><div class="ttdeci">ThreadId compose_thread_id(ThreadGroupId node, ThreadLocalOrdinal local_core)</div><div class="ttdoc">Returns a globally unique ID of Thread (core) for the given node and ordinal in the node...</div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00123">thread_id.hpp:123</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html_a63ab3e809b38145565cef7791f211a35"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html#a63ab3e809b38145565cef7791f211a35">foedus::memory::GlobalVolatilePageResolver::resolve_offset_newpage</a></div><div class="ttdeci">storage::Page * resolve_offset_newpage(uint8_t numa_node, PagePoolOffset offset) const __attribute__((always_inline))</div><div class="ttdoc">As the name suggests, this version is for new pages, which don&#39;t have sanity checks. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00134">page_resolver.hpp:134</a></div></div>
<div class="ttc" id="xct__manager_8hpp_html"><div class="ttname"><a href="xct__manager_8hpp.html">xct_manager.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_a8228a1a49b7db9b93498a778cb40f8e9"><div class="ttname"><a href="classfoedus_1_1Epoch.html#a8228a1a49b7db9b93498a778cb40f8e9">foedus::Epoch::is_valid</a></div><div class="ttdeci">bool is_valid() const </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00096">epoch.hpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_a6f558bb023b2c5c7dd9bf7ab9d054ef0"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#a6f558bb023b2c5c7dd9bf7ab9d054ef0">foedus::memory::PagePoolOffsetChunk::push_back</a></div><div class="ttdeci">void push_back(PagePoolOffset pointer)</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00068">page_pool.hpp:68</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaa3832e1d1faf1540161d389edf2a9c17"><div class="ttname"><a href="group__ERRORCODES.html#gaa3832e1d1faf1540161d389edf2a9c17">CHECK_ERROR_CODE</a></div><div class="ttdeci">#define CHECK_ERROR_CODE(x)</div><div class="ttdoc">This macro calls x and checks its returned error code. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00155">error_code.hpp:155</a></div></div>
<div class="ttc" id="structfoedus_1_1EngineOptions_html_a97a206187b610b15a6edbfc75a384b1a"><div class="ttname"><a href="structfoedus_1_1EngineOptions.html#a97a206187b610b15a6edbfc75a384b1a">foedus::EngineOptions::thread_</a></div><div class="ttdeci">thread::ThreadOptions thread_</div><div class="ttdef"><b>Definition:</b> <a href="engine__options_8hpp_source.html#l00146">engine_options.hpp:146</a></div></div>
<div class="ttc" id="sequential__log__types_8hpp_html"><div class="ttname"><a href="sequential__log__types_8hpp.html">sequential_log_types.hpp</a></div><div class="ttdoc">Declares all log types used in this storage type. </div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html">foedus::memory::PagePoolOffsetChunk</a></div><div class="ttdoc">To reduce the overhead of grabbing/releasing pages from pool, we pack this many pointers for each gra...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00047">page_pool.hpp:47</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga72a80915c3588aea09c053ab567e19c4"><div class="ttname"><a href="group__ERRORCODES.html#ga72a80915c3588aea09c053ab567e19c4">CHECK_ERROR</a></div><div class="ttdeci">#define CHECK_ERROR(x)</div><div class="ttdoc">This macro calls x and checks its returned value. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00517">error_stack.hpp:517</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a9754dc5a7c8b8f1f45a77714dfa8a53f"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a9754dc5a7c8b8f1f45a77714dfa8a53f">foedus::storage::sequential::SequentialStoragePimpl::get_head</a></div><div class="ttdeci">SequentialPage * get_head(const memory::LocalPageResolver &amp;resolver, thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00407">sequential_storage_pimpl.cpp:407</a></div></div>
<div class="ttc" id="classfoedus_1_1log_1_1MetaLogBuffer_html_ab94212c9c14361971679c5581c99e7c3"><div class="ttname"><a href="classfoedus_1_1log_1_1MetaLogBuffer.html#ab94212c9c14361971679c5581c99e7c3">foedus::log::MetaLogBuffer::commit</a></div><div class="ttdeci">void commit(BaseLogType *metalog, Epoch *commit_epoch)</div><div class="ttdoc">Synchronously writes out the given log to metadata log file. </div><div class="ttdef"><b>Definition:</b> <a href="meta__log__buffer_8cpp_source.html#l00033">meta_log_buffer.cpp:33</a></div></div>
<div class="ttc" id="group__THREAD_html_ga709a79fc1ed05a3543d8309ba391da93"><div class="ttname"><a href="group__THREAD.html#ga709a79fc1ed05a3543d8309ba391da93">foedus::thread::ThreadId</a></div><div class="ttdeci">uint16_t ThreadId</div><div class="ttdoc">Typedef for a global ID of Thread (core), which is unique across NUMA nodes. </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00080">thread_id.hpp:80</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html_adfc56f09f9e4e09466c4f102b9283076"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#adfc56f09f9e4e09466c4f102b9283076">foedus::storage::sequential::SequentialPage::get_record_count</a></div><div class="ttdeci">uint16_t get_record_count() const </div><div class="ttdoc">Returns how many records in this page placed so far. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00071">sequential_page_impl.hpp:71</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga61f52cd33eb500d6997a91e704ace244"><div class="ttname"><a href="group__ERRORCODES.html#ga61f52cd33eb500d6997a91e704ace244">foedus::kRetOk</a></div><div class="ttdeci">const ErrorStack kRetOk</div><div class="ttdoc">Normal return value for no-error case. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00251">error_stack.hpp:251</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1LocalPageResolver_html"><div class="ttname"><a href="structfoedus_1_1memory_1_1LocalPageResolver.html">foedus::memory::LocalPageResolver</a></div><div class="ttdoc">Resolves an offset in local (same NUMA node) page pool to a pointer and vice versa. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00042">page_resolver.hpp:42</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialTruncateLogType.html">foedus::storage::sequential::SequentialTruncateLogType</a></div><div class="ttdoc">Log type of TRUNCATE SEQUENTIAL STORAGE operation. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00080">sequential_log_types.hpp:80</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_a637f582ce67ec9d4bfe7d6f1f55829a9"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#a637f582ce67ec9d4bfe7d6f1f55829a9">foedus::storage::sequential::SequentialStoragePimpl::get_id</a></div><div class="ttdeci">StorageId get_id() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00155">sequential_storage_pimpl.hpp:155</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ab9ccf59655effed1a259100c4d46b06b"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ab9ccf59655effed1a259100c4d46b06b">foedus::storage::sequential::SequentialStoragePimpl::create</a></div><div class="ttdeci">ErrorStack create(const SequentialMetadata &amp;metadata)</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00147">sequential_storage_pimpl.cpp:147</a></div></div>
<div class="ttc" id="sequential__page__impl_8hpp_html"><div class="ttname"><a href="sequential__page__impl_8hpp.html">sequential_page_impl.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1thread_1_1Thread_html_aa07f33f2b78aa6e6c66a2149b1db52e8"><div class="ttname"><a href="classfoedus_1_1thread_1_1Thread.html#aa07f33f2b78aa6e6c66a2149b1db52e8">foedus::thread::Thread::get_numa_node</a></div><div class="ttdeci">ThreadGroupId get_numa_node() const </div><div class="ttdef"><b>Definition:</b> <a href="thread_8hpp_source.html#l00066">thread.hpp:66</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage_html_a4179bc96227e441860739b66e5b676cb"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStorage.html#a4179bc96227e441860739b66e5b676cb">foedus::storage::sequential::SequentialStorage::apply_append_record</a></div><div class="ttdeci">void apply_append_record(thread::Thread *context, const SequentialAppendLogType *log_entry)</div><div class="ttdoc">Used to apply the effect of appending to volatile list. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00076">sequential_storage_pimpl.cpp:76</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1NumaNodeMemoryRef_html_a70b68580143ce771f5b5b1f9a209f774"><div class="ttname"><a href="classfoedus_1_1memory_1_1NumaNodeMemoryRef.html#a70b68580143ce771f5b5b1f9a209f774">foedus::memory::NumaNodeMemoryRef::get_volatile_pool</a></div><div class="ttdeci">PagePool * get_volatile_pool()</div><div class="ttdef"><b>Definition:</b> <a href="numa__node__memory_8hpp_source.html#l00175">numa_node_memory.hpp:175</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1LogHeader_html_a4130fa3f2304558f7a357c7cbd4bac95"><div class="ttname"><a href="structfoedus_1_1log_1_1LogHeader.html#a4130fa3f2304558f7a357c7cbd4bac95">foedus::log::LogHeader::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdoc">The storage this loggable operation mainly affects. </div><div class="ttdef"><b>Definition:</b> <a href="common__log__types_8hpp_source.html#l00066">common_log_types.hpp:66</a></div></div>
<div class="ttc" id="structfoedus_1_1xct_1_1XctId_html_ad5be23a25e650f1bad81ce8c87630af0"><div class="ttname"><a href="structfoedus_1_1xct_1_1XctId.html#ad5be23a25e650f1bad81ce8c87630af0">foedus::xct::XctId::is_being_written</a></div><div class="ttdeci">bool is_being_written() const __attribute__((always_inline))</div><div class="ttdef"><b>Definition:</b> <a href="xct__id_8hpp_source.html#l01038">xct_id.hpp:1038</a></div></div>
<div class="ttc" id="group__SEQUENTIAL_html_ga976717e2d78b52aec5e8d9657093a5e7"><div class="ttname"><a href="group__SEQUENTIAL.html#ga976717e2d78b52aec5e8d9657093a5e7">foedus::storage::sequential::kMaxPayload</a></div><div class="ttdeci">const uint16_t kMaxPayload</div><div class="ttdoc">Payload must be shorter than this length. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__id_8hpp_source.html#l00054">sequential_id.hpp:54</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaf84f9944a16c5848f69beacdfeedf939"><div class="ttname"><a href="group__ASSORTED.html#gaf84f9944a16c5848f69beacdfeedf939">foedus::assorted::memory_fence_acquire</a></div><div class="ttdeci">void memory_fence_acquire()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acquire). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00046">atomic_fences.hpp:46</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1GlobalVolatilePageResolver_html"><div class="ttname"><a href="structfoedus_1_1memory_1_1GlobalVolatilePageResolver.html">foedus::memory::GlobalVolatilePageResolver</a></div><div class="ttdoc">Resolves an offset in a volatile page pool to an actual pointer and vice versa. </div><div class="ttdef"><b>Definition:</b> <a href="page__resolver_8hpp_source.html#l00092">page_resolver.hpp:92</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialAppendLogType.html">foedus::storage::sequential::SequentialAppendLogType</a></div><div class="ttdoc">Log type of sequential-storage&#39;s append operation. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__log__types_8hpp_source.html#l00096">sequential_log_types.hpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePool_html_a18916c76eea7aa49572e69e48e75717e"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePool.html#a18916c76eea7aa49572e69e48e75717e">foedus::memory::PagePool::get_resolver</a></div><div class="ttdeci">const LocalPageResolver &amp; get_resolver() const </div><div class="ttdoc">Gives an object to resolve an offset in this page pool (thus local) to an actual pointer and vice ver...</div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8cpp_source.html#l00146">page_pool.cpp:146</a></div></div>
<div class="ttc" id="namespacefoedus_html_gaae5f98d1b4caace7febc49e59ae5ac56a72dcb6f3cd90cdeb9cbc8fbcecd0da3b"><div class="ttname"><a href="namespacefoedus.html#gaae5f98d1b4caace7febc49e59ae5ac56a72dcb6f3cd90cdeb9cbc8fbcecd0da3b">foedus::kErrorCodeXctNoXct</a></div><div class="ttdoc">0x0A04 : "XCTION : This thread is not running any transaction." . </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00199">error_code.hpp:199</a></div></div>
<div class="ttc" id="thread__log__buffer_8hpp_html"><div class="ttname"><a href="thread__log__buffer_8hpp.html">thread_log_buffer.hpp</a></div></div>
<div class="ttc" id="group__COMPILER_html_ga967462e28f63546ee191a661cd4b9dd2"><div class="ttname"><a href="group__COMPILER.html#ga967462e28f63546ee191a661cd4b9dd2">UNLIKELY</a></div><div class="ttdeci">#define UNLIKELY(x)    </div><div class="ttdoc">Hints that x is highly likely false. </div><div class="ttdef"><b>Definition:</b> <a href="compiler_8hpp_source.html#l00104">compiler.hpp:104</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a32ee0dd2b600a921b7f6b7e99a579550"><div class="ttname"><a href="classfoedus_1_1Engine.html#a32ee0dd2b600a921b7f6b7e99a579550">foedus::Engine::get_earliest_epoch</a></div><div class="ttdeci">Epoch get_earliest_epoch() const </div><div class="ttdoc">Returns the Earliest-Epoch, the minimum epoch that is valid within this engine. </div><div class="ttdef"><b>Definition:</b> <a href="engine__pimpl_8cpp_source.html#l00279">engine_pimpl.cpp:279</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_ga952ce4f5f860d7b28a70095b450d3f4d"><div class="ttname"><a href="group__ERRORCODES.html#ga952ce4f5f860d7b28a70095b450d3f4d">WRAP_ERROR_CODE</a></div><div class="ttdeci">#define WRAP_ERROR_CODE(x)</div><div class="ttdoc">Same as CHECK_ERROR(x) except it receives only an error code, thus more efficient. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00533">error_stack.hpp:533</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gafc1110de4c6bb85c7e1f7feccc27f6d7"><div class="ttname"><a href="group__ASSORTED.html#gafc1110de4c6bb85c7e1f7feccc27f6d7">foedus::assorted::memory_fence_release</a></div><div class="ttdeci">void memory_fence_release()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_release). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00058">atomic_fences.hpp:58</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1StorageControlBlock_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1StorageControlBlock.html">foedus::storage::StorageControlBlock</a></div><div class="ttdoc">A base layout of shared data for all storage types. </div><div class="ttdef"><b>Definition:</b> <a href="storage_8hpp_source.html#l00053">storage.hpp:53</a></div></div>
<div class="ttc" id="group__THREAD_html_ga22e72bf147e8d7430e97721633adb3a7"><div class="ttname"><a href="group__THREAD.html#ga22e72bf147e8d7430e97721633adb3a7">foedus::thread::ThreadGroupId</a></div><div class="ttdeci">uint8_t ThreadGroupId</div><div class="ttdoc">Typedef for an ID of ThreadGroup (NUMA node). </div><div class="ttdef"><b>Definition:</b> <a href="thread__id_8hpp_source.html#l00038">thread_id.hpp:38</a></div></div>
<div class="ttc" id="engine__memory_8hpp_html"><div class="ttname"><a href="engine__memory_8hpp.html">engine_memory.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Metadata_html_a2187b39e4d71b81227dc6f09b0c711e8"><div class="ttname"><a href="structfoedus_1_1storage_1_1Metadata.html#a2187b39e4d71b81227dc6f09b0c711e8">foedus::storage::Metadata::id_</a></div><div class="ttdeci">StorageId id_</div><div class="ttdoc">the unique ID of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="metadata_8hpp_source.html#l00103">metadata.hpp:103</a></div></div>
<div class="ttc" id="classfoedus_1_1log_1_1ThreadLogBuffer_html_a9a8c4e8f3a994272f52ddddb312f15b9"><div class="ttname"><a href="classfoedus_1_1log_1_1ThreadLogBuffer.html#a9a8c4e8f3a994272f52ddddb312f15b9">foedus::log::ThreadLogBuffer::reserve_new_log</a></div><div class="ttdeci">char * reserve_new_log(uint16_t log_length) __attribute__((always_inline))</div><div class="ttdoc">Reserves a space for a new (uncommitted) log entry at the tail. </div><div class="ttdef"><b>Definition:</b> <a href="thread__log__buffer_8hpp_source.html#l00320">thread_log_buffer.hpp:320</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html_a02ed05009c7baa8d75e04f202a86b2c6"><div class="ttname"><a href="classfoedus_1_1Engine.html#a02ed05009c7baa8d75e04f202a86b2c6">foedus::Engine::get_memory_manager</a></div><div class="ttdeci">memory::EngineMemory * get_memory_manager() const </div><div class="ttdoc">See Memory Manager. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8cpp_source.html#l00050">engine.cpp:50</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga1a3c05fe1d44455fc3e761947c6e21e6"><div class="ttname"><a href="group__STORAGE.html#ga1a3c05fe1d44455fc3e761947c6e21e6">foedus::storage::kPageSize</a></div><div class="ttdeci">const uint16_t kPageSize</div><div class="ttdoc">A constant defining the page size (in bytes) of both snapshot pages and volatile pages. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00045">storage_id.hpp:45</a></div></div>
<div class="ttc" id="meta__log__buffer_8hpp_html"><div class="ttname"><a href="meta__log__buffer_8hpp.html">meta_log_buffer.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1PagePoolOffsetChunk_html_affa4e09fc9e251f5cc259de81c23c6e2"><div class="ttname"><a href="classfoedus_1_1memory_1_1PagePoolOffsetChunk.html#affa4e09fc9e251f5cc259de81c23c6e2">foedus::memory::PagePoolOffsetChunk::size</a></div><div class="ttdeci">uint32_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="page__pool_8hpp_source.html#l00059">page_pool.hpp:59</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ae819655e8bea414d1152509866ddfd39"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ae819655e8bea414d1152509866ddfd39">foedus::storage::sequential::SequentialStoragePimpl::get_tail_pointer</a></div><div class="ttdeci">memory::PagePoolOffset * get_tail_pointer(thread::ThreadId thread_id) const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8cpp_source.html#l00392">sequential_storage_pimpl.cpp:392</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock_html_a854a77e18af17a430511a48a0b3f0bfa"><div class="ttname"><a href="structfoedus_1_1storage_1_1sequential_1_1SequentialStorageControlBlock.html#a854a77e18af17a430511a48a0b3f0bfa">foedus::storage::sequential::SequentialStorageControlBlock::meta_</a></div><div class="ttdeci">SequentialMetadata meta_</div><div class="ttdoc">metadata of this storage. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00063">sequential_storage_pimpl.hpp:63</a></div></div>
<div class="ttc" id="group__SEQUENTIAL_html_a1e571fc655b7991d9a6c621d2050488e"><div class="ttname"><a href="group__SEQUENTIAL.html#a1e571fc655b7991d9a6c621d2050488e">foedus::storage::sequential::SequentialStoragePimpl::PointerPage::pointers_</a></div><div class="ttdeci">memory::PagePoolOffset pointers_[kPointersPerPage]</div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00142">sequential_storage_pimpl.hpp:142</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl_html_ad8cfc752735602f2b1afeacf10a94b6d"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialStoragePimpl.html#ad8cfc752735602f2b1afeacf10a94b6d">foedus::storage::sequential::SequentialStoragePimpl::get_name</a></div><div class="ttdeci">const StorageName &amp; get_name() const </div><div class="ttdef"><b>Definition:</b> <a href="sequential__storage__pimpl_8hpp_source.html#l00156">sequential_storage_pimpl.hpp:156</a></div></div>
<div class="ttc" id="structfoedus_1_1log_1_1BaseLogType_html_a574e9dac4445db7814303700a9910821"><div class="ttname"><a href="structfoedus_1_1log_1_1BaseLogType.html#a574e9dac4445db7814303700a9910821">foedus::log::BaseLogType::header_</a></div><div class="ttdeci">LogHeader header_</div><div class="ttdef"><b>Definition:</b> <a href="common__log__types_8hpp_source.html#l00113">common_log_types.hpp:113</a></div></div>
<div class="ttc" id="classfoedus_1_1Epoch_html_af13cf48db2b5bd1d273f5f7350a4d8cf"><div class="ttname"><a href="classfoedus_1_1Epoch.html#af13cf48db2b5bd1d273f5f7350a4d8cf">foedus::Epoch::value</a></div><div class="ttdeci">EpochInteger value() const </div><div class="ttdoc">Returns the raw integer representation. </div><div class="ttdef"><b>Definition:</b> <a href="epoch_8hpp_source.html#l00102">epoch.hpp:102</a></div></div>
<div class="ttc" id="log__manager_8hpp_html"><div class="ttname"><a href="log__manager_8hpp.html">log_manager.hpp</a></div></div>
<div class="ttc" id="group__ASSORTED_html_gaff9fa4aedd631410da28740f6e1dddbf"><div class="ttname"><a href="group__ASSORTED.html#gaff9fa4aedd631410da28740f6e1dddbf">foedus::assorted::memory_fence_acq_rel</a></div><div class="ttdeci">void memory_fence_acq_rel()</div><div class="ttdoc">Equivalent to std::atomic_thread_fence(std::memory_order_acq_rel). </div><div class="ttdef"><b>Definition:</b> <a href="atomic__fences_8hpp_source.html#l00069">atomic_fences.hpp:69</a></div></div>
<div class="ttc" id="classfoedus_1_1storage_1_1sequential_1_1SequentialPage_html_ac05740b312c9c0024d090145d2a4dde0"><div class="ttname"><a href="classfoedus_1_1storage_1_1sequential_1_1SequentialPage.html#ac05740b312c9c0024d090145d2a4dde0">foedus::storage::sequential::SequentialPage::initialize_volatile_page</a></div><div class="ttdeci">void initialize_volatile_page(StorageId storage_id, VolatilePagePointer page_id)</div><div class="ttdoc">Called only when this page is initialized. </div><div class="ttdef"><b>Definition:</b> <a href="sequential__page__impl_8hpp_source.html#l00134">sequential_page_impl.hpp:134</a></div></div>
<div class="ttc" id="sequential__metadata_8hpp_html"><div class="ttname"><a href="sequential__metadata_8hpp.html">sequential_metadata.hpp</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_d7a805ee636aca3e828841913b8fee6f.html">src</a></li><li class="navelem"><a class="el" href="dir_69f399cb2d64e6ca2c29e4a5a8e5672b.html">foedus</a></li><li class="navelem"><a class="el" href="dir_7ce05622802b44ef7dab2138a2d07843.html">storage</a></li><li class="navelem"><a class="el" href="dir_05734202208f6d46fb8524d30705aced.html">sequential</a></li><li class="navelem"><a class="el" href="sequential__storage__pimpl_8cpp.html">sequential_storage_pimpl.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
