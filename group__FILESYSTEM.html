<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: Filesystem wrapper</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__FILESYSTEM.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Filesystem wrapper<div class="ingroups"><a class="el" href="group__IDIOMS.html">FOEDUS Programming Idioms</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><b>Filesystem</b> wrapper, an analogue of boost::filesystem.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><b>Filesystem</b> wrapper, an analogue of boost::filesystem. </p>
<p>These methods abstract accesses to filesystems like boost::filesystem and std::filesystem in C++1z(?). We should not directly call POSIX or Windows filesystem APIs in other modules. Instead, all of them should go through this package.</p>
<dl class="section user"><dt>Why this package exists</dt><dd>The best case scenario for us is the standard C++ library provides filesystem abstraction. However, the spec (based on Boost filesystem ver2) didn't get into even C++14, let alone its implmentations. Thus, we can't rely on it at all. Boost filesystem has a few issues, too. First, it is changing and has some issue when C++11 is enabled. Furthermore, the filesystem package is NOT a header-only module in boost. We do not want to introduce additional dependencies to the gigantic boost shared library, which might not be available or has versioning issues in some environment. Rather, we just need only a small subset of functionalities in those libraries because our usage of filesystem is quite minimal and simplistic. Hence, we do it ourselves.</dd></dl>
<dl class="section user"><dt>Direct File I/O</dt><dd>Another goal to have this package is to abstract Direct I/O (O_DIRECT in linux and FILE_FLAG_NO_BUFFERING in Windows). We need them to bypass filesystem-level caching, but these are not in C++ standards at all and won't be (if it happens, Linus would get a heart attack: <a href="https://lkml.org/lkml/2007/1/10/233">https://lkml.org/lkml/2007/1/10/233</a> ).</dd></dl>
<dl class="section user"><dt>Class/method designs</dt><dd>Basically, we clone Boost filesystem's class/method into this package when we find a need for some filesystem API access in our code. Due to our specialized needs, we might simplify the API. Our goal is not to duplicate all Boost filesystem classes. Just add what we need. </dd></dl>
<div class="dynheader">
Collaboration diagram for Filesystem wrapper:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__FILESYSTEM.png" border="0" alt="" usemap="#group____FILESYSTEM"/>
<map name="group____FILESYSTEM" id="group____FILESYSTEM">
<area shape="rect" id="node1" href="group__IDIOMS.html" title="You must first get used to these things to use/develop libfoedus. " alt="" coords="5,5,163,47"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:fs_2fwd_8hpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_2fwd_8hpp.html">fwd.hpp</a></td></tr>
<tr class="memdesc:fs_2fwd_8hpp"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward declarations of classes in filesystem package. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1fs_1_1DeviceEmulationOptions.html">foedus::fs::DeviceEmulationOptions</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set of configurations to emulate slower devices for some experiments.  <a href="structfoedus_1_1fs_1_1DeviceEmulationOptions.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1fs_1_1DirectIoFile.html">foedus::fs::DirectIoFile</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents an I/O stream on one file without filesystem caching.  <a href="classfoedus_1_1fs_1_1DirectIoFile.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1fs_1_1FileStatus.html">foedus::fs::FileStatus</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogue of boost::filesystem::file_status.  <a href="structfoedus_1_1fs_1_1FileStatus.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structfoedus_1_1fs_1_1SpaceInfo.html">foedus::fs::SpaceInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogue of boost::filesystem::space_info.  <a href="structfoedus_1_1fs_1_1SpaceInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfoedus_1_1fs_1_1Path.html">foedus::fs::Path</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogue of boost::filesystem::path.  <a href="classfoedus_1_1fs_1_1Path.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac7bdc72d1c4acefb7b14ed375f1b3bb2"><td class="memItemLeft" align="right" valign="top">typedef assorted::FixedString&lt; 508 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gac7bdc72d1c4acefb7b14ed375f1b3bb2">foedus::fs::FixedPath</a></td></tr>
<tr class="memdesc:gac7bdc72d1c4acefb7b14ed375f1b3bb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a fixed (thus can be placed in shared memory) path string.  <a href="group__FILESYSTEM.html#gac7bdc72d1c4acefb7b14ed375f1b3bb2">More...</a><br /></td></tr>
<tr class="separator:gac7bdc72d1c4acefb7b14ed375f1b3bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga2cb359324242a11b65b9a4b999f2a25f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25f">foedus::fs::FileType</a> { <br />
&#160;&#160;<a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2">foedus::fs::kStatusError</a> = 0, 
<a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7">foedus::fs::kFileNotFound</a>, 
<a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928">foedus::fs::kRegularFile</a>, 
<a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4">foedus::fs::kDirectoryFile</a>, 
<br />
&#160;&#160;<a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65">foedus::fs::kTypeUnknown</a>
<br />
 }<tr class="memdesc:ga2cb359324242a11b65b9a4b999f2a25f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogue of boost::filesystem::file_type.  <a href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25f">More...</a><br /></td></tr>
<tr class="separator:ga2cb359324242a11b65b9a4b999f2a25f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
<tr class="memitem:ga4e30e47dcbf7545b742dfe9c48a55c89"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89">foedus::fs::FilePermission</a> { <br />
&#160;&#160;<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a72c00ac910e531b631569b144470c007">foedus::fs::kNoPerms</a> = 0, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a282841d5b39e697f35ce7e868677197f">foedus::fs::kOwnerRead</a> = 0400, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a16795402dea8189a56b5d1f951bc9bf4">foedus::fs::kOwnerWrite</a> = 0200, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89aea7ca870a364cf7217270e17865ff712">foedus::fs::kOwnerExe</a> = 0100, 
<br />
&#160;&#160;<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a6f3a1cf50d9cf143a5b6a52d1a9e4545">foedus::fs::kOwnerAll</a> = 0700, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89acb431c1ece6241fdbeb2b22f39becef5">foedus::fs::kGroupRead</a> = 040, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a7f5c2be70bad3053891873a3af2e29da">foedus::fs::kGroupWrite</a> = 020, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a7028c8473bfaaec1ee55a2a58ceafc6e">foedus::fs::kGroupExe</a> = 010, 
<br />
&#160;&#160;<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a57383d0619e3d0ce0a7dfb609c1f890f">foedus::fs::kGroupAll</a> = 070, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89aecc156fa3f7d8063d72786b45baba455">foedus::fs::kOthersRead</a> = 04, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89ab856f0103cd26d6a1a31ccb238176395">foedus::fs::kOthersWrite</a> = 02, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89ab1dce748035077c348326ab52afc8ae3">foedus::fs::kOthersExe</a> = 01, 
<br />
&#160;&#160;<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89afa566673c4ae923a9ee752d525d73115">foedus::fs::kOthersAll</a> = 07, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89ae20c0d454b32dea1fb58d2d9d6619dd1">foedus::fs::kAllAll</a> = kOwnerAll|kGroupAll|kOthersAll, 
<a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89a5e4fa9a356554723cfb21e2e4ffd10c8">foedus::fs::kPermsNotKnown</a> = 0xFFFF
<br />
 }<tr class="memdesc:ga4e30e47dcbf7545b742dfe9c48a55c89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analogue of boost::filesystem::perm.  <a href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89">More...</a><br /></td></tr>
<tr class="separator:ga4e30e47dcbf7545b742dfe9c48a55c89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaaa833e3af93824a2485400b32dab7bcd"><td class="memItemLeft" align="right" valign="top">FileStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">foedus::fs::status</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:gaaa833e3af93824a2485400b32dab7bcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the status of the file.  <a href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">More...</a><br /></td></tr>
<tr class="separator:gaaa833e3af93824a2485400b32dab7bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f8f53901e9c98fce72b6b3c52cf83a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4">foedus::fs::exists</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:ga4f8f53901e9c98fce72b6b3c52cf83a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the file exists.  <a href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4">More...</a><br /></td></tr>
<tr class="separator:ga4f8f53901e9c98fce72b6b3c52cf83a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87c90d834f65aad6f7b6540ae226f305"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305">foedus::fs::is_directory</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:ga87c90d834f65aad6f7b6540ae226f305"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the file is a directory.  <a href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305">More...</a><br /></td></tr>
<tr class="separator:ga87c90d834f65aad6f7b6540ae226f305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17ed5fb221648976114e4320e8dc7185"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga17ed5fb221648976114e4320e8dc7185">foedus::fs::is_regular_file</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:ga17ed5fb221648976114e4320e8dc7185"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns if the file is a regular file.  <a href="group__FILESYSTEM.html#ga17ed5fb221648976114e4320e8dc7185">More...</a><br /></td></tr>
<tr class="separator:ga17ed5fb221648976114e4320e8dc7185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea7b35a8cbd3690f97459e66ba150279"><td class="memItemLeft" align="right" valign="top">Path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gaea7b35a8cbd3690f97459e66ba150279">foedus::fs::current_path</a> ()</td></tr>
<tr class="memdesc:gaea7b35a8cbd3690f97459e66ba150279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current working directory.  <a href="group__FILESYSTEM.html#gaea7b35a8cbd3690f97459e66ba150279">More...</a><br /></td></tr>
<tr class="separator:gaea7b35a8cbd3690f97459e66ba150279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25755cb9b3f7c60fa059c17bf0b6dcb5"><td class="memItemLeft" align="right" valign="top">Path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga25755cb9b3f7c60fa059c17bf0b6dcb5">foedus::fs::home_path</a> ()</td></tr>
<tr class="memdesc:ga25755cb9b3f7c60fa059c17bf0b6dcb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the absolute path of the home directory of the user running this process.  <a href="group__FILESYSTEM.html#ga25755cb9b3f7c60fa059c17bf0b6dcb5">More...</a><br /></td></tr>
<tr class="separator:ga25755cb9b3f7c60fa059c17bf0b6dcb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab047b441cfb9018c5c704e384b0a8cbb"><td class="memItemLeft" align="right" valign="top">Path&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gab047b441cfb9018c5c704e384b0a8cbb">foedus::fs::absolute</a> (const std::string &amp;p)</td></tr>
<tr class="memdesc:gab047b441cfb9018c5c704e384b0a8cbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the absolue path of the specified path.  <a href="group__FILESYSTEM.html#gab047b441cfb9018c5c704e384b0a8cbb">More...</a><br /></td></tr>
<tr class="separator:gab047b441cfb9018c5c704e384b0a8cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca1dd0a627c83ff76e30603ea67c4816"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816">foedus::fs::create_directories</a> (const Path &amp;p, bool sync=false)</td></tr>
<tr class="memdesc:gaca1dd0a627c83ff76e30603ea67c4816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursive mkdir (mkdirs).  <a href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816">More...</a><br /></td></tr>
<tr class="separator:gaca1dd0a627c83ff76e30603ea67c4816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5cf40c936f78178ef58af0a900031b8b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b">foedus::fs::create_directory</a> (const Path &amp;p, bool sync=false)</td></tr>
<tr class="memdesc:ga5cf40c936f78178ef58af0a900031b8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">mkdir.  <a href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b">More...</a><br /></td></tr>
<tr class="separator:ga5cf40c936f78178ef58af0a900031b8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1048a33bafe4dcea89991112ae2660d8"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga1048a33bafe4dcea89991112ae2660d8">foedus::fs::file_size</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:ga1048a33bafe4dcea89991112ae2660d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns size of the file.  <a href="group__FILESYSTEM.html#ga1048a33bafe4dcea89991112ae2660d8">More...</a><br /></td></tr>
<tr class="separator:ga1048a33bafe4dcea89991112ae2660d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad1f62b080fa246b5f8c166f44c72134f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gad1f62b080fa246b5f8c166f44c72134f">foedus::fs::remove</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:gad1f62b080fa246b5f8c166f44c72134f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a regular file or an empty directory.  <a href="group__FILESYSTEM.html#gad1f62b080fa246b5f8c166f44c72134f">More...</a><br /></td></tr>
<tr class="separator:gad1f62b080fa246b5f8c166f44c72134f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaee757fd655c10771e8047fb6226ebba"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gaaee757fd655c10771e8047fb6226ebba">foedus::fs::remove_all</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:gaaee757fd655c10771e8047fb6226ebba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively deletes a directory.  <a href="group__FILESYSTEM.html#gaaee757fd655c10771e8047fb6226ebba">More...</a><br /></td></tr>
<tr class="separator:gaaee757fd655c10771e8047fb6226ebba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe48dfc9198eee44e96373833feb0e21"><td class="memItemLeft" align="right" valign="top">SpaceInfo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gafe48dfc9198eee44e96373833feb0e21">foedus::fs::space</a> (const Path &amp;p)</td></tr>
<tr class="memdesc:gafe48dfc9198eee44e96373833feb0e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns free space information for the device the file is on.  <a href="group__FILESYSTEM.html#gafe48dfc9198eee44e96373833feb0e21">More...</a><br /></td></tr>
<tr class="separator:gafe48dfc9198eee44e96373833feb0e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3bc4f808e645c94d80e86221b0d32301"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga3bc4f808e645c94d80e86221b0d32301">foedus::fs::unique_name</a> (uint64_t differentiator=0)</td></tr>
<tr class="memdesc:ga3bc4f808e645c94d80e86221b0d32301"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equivalent to unique_path("%%%%-%%%%-%%%%-%%%%").  <a href="group__FILESYSTEM.html#ga3bc4f808e645c94d80e86221b0d32301">More...</a><br /></td></tr>
<tr class="separator:ga3bc4f808e645c94d80e86221b0d32301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f713a354acc587b14576b14d721b1f2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga6f713a354acc587b14576b14d721b1f2">foedus::fs::unique_name</a> (const std::string &amp;model, uint64_t differentiator=0)</td></tr>
<tr class="memdesc:ga6f713a354acc587b14576b14d721b1f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a randomly generated file name with the given template.  <a href="group__FILESYSTEM.html#ga6f713a354acc587b14576b14d721b1f2">More...</a><br /></td></tr>
<tr class="separator:ga6f713a354acc587b14576b14d721b1f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08865450d848cb894243005bdd226d1e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">foedus::fs::fsync</a> (const Path &amp;path, bool sync_parent_directory=false)</td></tr>
<tr class="memdesc:ga08865450d848cb894243005bdd226d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Makes the content and metadata of the file durable all the way up to devices.  <a href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">More...</a><br /></td></tr>
<tr class="separator:ga08865450d848cb894243005bdd226d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7728f7a6fdfeeb13567e1f1f110fcd8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8">foedus::fs::atomic_rename</a> (const Path &amp;old_path, const Path &amp;new_path)</td></tr>
<tr class="memdesc:gae7728f7a6fdfeeb13567e1f1f110fcd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames the old file to the new file with the POSIX atomic-rename semantics.  <a href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8">More...</a><br /></td></tr>
<tr class="separator:gae7728f7a6fdfeeb13567e1f1f110fcd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71591d3386f8adc320dac30d0320a3ee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee">foedus::fs::durable_atomic_rename</a> (const Path &amp;old_path, const Path &amp;new_path)</td></tr>
<tr class="memdesc:ga71591d3386f8adc320dac30d0320a3ee"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a> on source file before rename, then <a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a> on the parent folder after rename.  <a href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee">More...</a><br /></td></tr>
<tr class="separator:ga71591d3386f8adc320dac30d0320a3ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e0f9ca119eb0d4fc1159716c95822eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb">foedus::fs::rename</a> (const Path &amp;old_path, const Path &amp;new_path)</td></tr>
<tr class="memdesc:ga9e0f9ca119eb0d4fc1159716c95822eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just a synonym of <a class="el" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8" title="Renames the old file to the new file with the POSIX atomic-rename semantics. ">atomic_rename()</a> to avoid confusion.  <a href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb">More...</a><br /></td></tr>
<tr class="separator:ga9e0f9ca119eb0d4fc1159716c95822eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gac7bdc72d1c4acefb7b14ed375f1b3bb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef assorted::FixedString&lt;508&gt; <a class="el" href="group__FILESYSTEM.html#gac7bdc72d1c4acefb7b14ed375f1b3bb2">foedus::fs::FixedPath</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Represents a fixed (thus can be placed in shared memory) path string. </p>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00083">83</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__FILESYSTEM.html#ga4e30e47dcbf7545b742dfe9c48a55c89">foedus::fs::FilePermission</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analogue of boost::filesystem::perm. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a72c00ac910e531b631569b144470c007"></a>kNoPerms&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a282841d5b39e697f35ce7e868677197f"></a>kOwnerRead&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a16795402dea8189a56b5d1f951bc9bf4"></a>kOwnerWrite&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89aea7ca870a364cf7217270e17865ff712"></a>kOwnerExe&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a6f3a1cf50d9cf143a5b6a52d1a9e4545"></a>kOwnerAll&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89acb431c1ece6241fdbeb2b22f39becef5"></a>kGroupRead&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a7f5c2be70bad3053891873a3af2e29da"></a>kGroupWrite&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a7028c8473bfaaec1ee55a2a58ceafc6e"></a>kGroupExe&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a57383d0619e3d0ce0a7dfb609c1f890f"></a>kGroupAll&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89aecc156fa3f7d8063d72786b45baba455"></a>kOthersRead&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89ab856f0103cd26d6a1a31ccb238176395"></a>kOthersWrite&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89ab1dce748035077c348326ab52afc8ae3"></a>kOthersExe&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89afa566673c4ae923a9ee752d525d73115"></a>kOthersAll&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89ae20c0d454b32dea1fb58d2d9d6619dd1"></a>kAllAll&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga4e30e47dcbf7545b742dfe9c48a55c89a5e4fa9a356554723cfb21e2e4ffd10c8"></a>kPermsNotKnown&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00051">51</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a72c00ac910e531b631569b144470c007">kNoPerms</a> = 0,       <span class="comment">// kFileNotFound is kNoPerms rather than kPermsNotKnown</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// POSIX equivalent macros given in comments.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// Values are from POSIX and are given in octal per the POSIX standard.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// permission bits</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a282841d5b39e697f35ce7e868677197f">kOwnerRead</a> = 0400,      <span class="comment">// S_IRUSR, Read permission, owner</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a16795402dea8189a56b5d1f951bc9bf4">kOwnerWrite</a> = 0200,     <span class="comment">// S_IWUSR, Write permission, owner</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89aea7ca870a364cf7217270e17865ff712">kOwnerExe</a> = 0100,       <span class="comment">// S_IXUSR, Execute/search permission, owner</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a6f3a1cf50d9cf143a5b6a52d1a9e4545">kOwnerAll</a> = 0700,       <span class="comment">// S_IRWXU, Read, write, execute/search by owner</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89acb431c1ece6241fdbeb2b22f39becef5">kGroupRead</a> = 040,       <span class="comment">// S_IRGRP, Read permission, group</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a7f5c2be70bad3053891873a3af2e29da">kGroupWrite</a> = 020,      <span class="comment">// S_IWGRP, Write permission, group</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a7028c8473bfaaec1ee55a2a58ceafc6e">kGroupExe</a> = 010,        <span class="comment">// S_IXGRP, Execute/search permission, group</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a57383d0619e3d0ce0a7dfb609c1f890f">kGroupAll</a> = 070,        <span class="comment">// S_IRWXG, Read, write, execute/search by group</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89aecc156fa3f7d8063d72786b45baba455">kOthersRead</a> = 04,       <span class="comment">// S_IROTH, Read permission, others</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89ab856f0103cd26d6a1a31ccb238176395">kOthersWrite</a> = 02,      <span class="comment">// S_IWOTH, Write permission, others</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89ab1dce748035077c348326ab52afc8ae3">kOthersExe</a> = 01,        <span class="comment">// S_IXOTH, Execute/search permission, others</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89afa566673c4ae923a9ee752d525d73115">kOthersAll</a> = 07,        <span class="comment">// S_IRWXO, Read, write, execute/search by others</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89ae20c0d454b32dea1fb58d2d9d6619dd1">kAllAll</a> = <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a6f3a1cf50d9cf143a5b6a52d1a9e4545">kOwnerAll</a>|<a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a57383d0619e3d0ce0a7dfb609c1f890f">kGroupAll</a>|<a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89afa566673c4ae923a9ee752d525d73115">kOthersAll</a>,  <span class="comment">// 0777</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a5e4fa9a356554723cfb21e2e4ffd10c8">kPermsNotKnown</a> = 0xFFFF,   <span class="comment">// present when directory_entry cache not loaded</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;};</div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a57383d0619e3d0ce0a7dfb609c1f890f"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a57383d0619e3d0ce0a7dfb609c1f890f">foedus::fs::kGroupAll</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00067">filesystem.hpp:67</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a7f5c2be70bad3053891873a3af2e29da"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a7f5c2be70bad3053891873a3af2e29da">foedus::fs::kGroupWrite</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00065">filesystem.hpp:65</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89ab1dce748035077c348326ab52afc8ae3"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89ab1dce748035077c348326ab52afc8ae3">foedus::fs::kOthersExe</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00071">filesystem.hpp:71</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89afa566673c4ae923a9ee752d525d73115"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89afa566673c4ae923a9ee752d525d73115">foedus::fs::kOthersAll</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00072">filesystem.hpp:72</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89acb431c1ece6241fdbeb2b22f39becef5"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89acb431c1ece6241fdbeb2b22f39becef5">foedus::fs::kGroupRead</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00064">filesystem.hpp:64</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a282841d5b39e697f35ce7e868677197f"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a282841d5b39e697f35ce7e868677197f">foedus::fs::kOwnerRead</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00059">filesystem.hpp:59</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a7028c8473bfaaec1ee55a2a58ceafc6e"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a7028c8473bfaaec1ee55a2a58ceafc6e">foedus::fs::kGroupExe</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00066">filesystem.hpp:66</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89ab856f0103cd26d6a1a31ccb238176395"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89ab856f0103cd26d6a1a31ccb238176395">foedus::fs::kOthersWrite</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00070">filesystem.hpp:70</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a72c00ac910e531b631569b144470c007"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a72c00ac910e531b631569b144470c007">foedus::fs::kNoPerms</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00052">filesystem.hpp:52</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a6f3a1cf50d9cf143a5b6a52d1a9e4545"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a6f3a1cf50d9cf143a5b6a52d1a9e4545">foedus::fs::kOwnerAll</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00062">filesystem.hpp:62</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89aea7ca870a364cf7217270e17865ff712"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89aea7ca870a364cf7217270e17865ff712">foedus::fs::kOwnerExe</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00061">filesystem.hpp:61</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89aecc156fa3f7d8063d72786b45baba455"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89aecc156fa3f7d8063d72786b45baba455">foedus::fs::kOthersRead</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00069">filesystem.hpp:69</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a5e4fa9a356554723cfb21e2e4ffd10c8"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a5e4fa9a356554723cfb21e2e4ffd10c8">foedus::fs::kPermsNotKnown</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00076">filesystem.hpp:76</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89ae20c0d454b32dea1fb58d2d9d6619dd1"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89ae20c0d454b32dea1fb58d2d9d6619dd1">foedus::fs::kAllAll</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00074">filesystem.hpp:74</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga4e30e47dcbf7545b742dfe9c48a55c89a16795402dea8189a56b5d1f951bc9bf4"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga4e30e47dcbf7545b742dfe9c48a55c89a16795402dea8189a56b5d1f951bc9bf4">foedus::fs::kOwnerWrite</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00060">filesystem.hpp:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2cb359324242a11b65b9a4b999f2a25f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__FILESYSTEM.html#ga2cb359324242a11b65b9a4b999f2a25f">foedus::fs::FileType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analogue of boost::filesystem::file_type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2"></a>kStatusError&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7"></a>kFileNotFound&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928"></a>kRegularFile&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4"></a>kDirectoryFile&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65"></a>kTypeUnknown&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00038">38</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;              {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2">kStatusError</a> = 0,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7">kFileNotFound</a>,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928">kRegularFile</a>,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4">kDirectoryFile</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65">kTypeUnknown</a>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;};</div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65">foedus::fs::kTypeUnknown</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00043">filesystem.hpp:43</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7">foedus::fs::kFileNotFound</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00040">filesystem.hpp:40</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928">foedus::fs::kRegularFile</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00041">filesystem.hpp:41</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2">foedus::fs::kStatusError</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00039">filesystem.hpp:39</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4">foedus::fs::kDirectoryFile</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00042">filesystem.hpp:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gab047b441cfb9018c5c704e384b0a8cbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Path foedus::fs::absolute </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the absolue path of the specified path. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00062">62</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                  {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">return</span> Path(p);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gae7728f7a6fdfeeb13567e1f1f110fcd8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::atomic_rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>old_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>new_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames the old file to the new file with the POSIX atomic-rename semantics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">old_path</td><td>path of the file to rename </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">new_path</td><td>path after rename </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the rename succeeded </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>exists(old_path) </dd>
<dd>
!exists(new_path) is <b>NOT</b> a pre-condition. See below.</dd></dl>
<p>This is analogus to <a class="el" href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb" title="Just a synonym of atomic_rename() to avoid confusion. ">boost::filesystem::rename()</a>, but we named this atomic_rename to clarify that this implementation guarantees the POSIX atomic-rename semantics. When new_path already exists, this method atomically swaps the file on filesystem with the old_path file, appropriately deleting the old file. This is an essential semantics to achieve safe and fault-tolerant file writes. And, for that usecase, do NOT forget to also call fsync before/after rename, too. Use <a class="el" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee" title="fsync() on source file before rename, then fsync() on the parent folder after rename. ">durable_atomic_rename()</a> to make sure.</p>
<dl class="section see"><dt>See also</dt><dd><a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/rename.html">http://pubs.opengroup.org/onlinepubs/009695399/functions/rename.html</a> </dd>
<dd>
Eat My Data: How Everybody Gets File IO Wrong: <a href="https://www.flamingspork.com/talks/2007/06/eat_my_data.odp">https://www.flamingspork.com/talks/2007/06/eat_my_data.odp</a> </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00199">199</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8hpp_source.html#l00064">foedus::fs::Path::c_str()</a>, and <a class="el" href="filesystem_8hpp_source.html#l00286">foedus::fs::rename()</a>.</p>

<p>Referenced by <a class="el" href="filesystem_8cpp_source.html#l00236">foedus::fs::durable_atomic_rename()</a>, and <a class="el" href="filesystem_8hpp_source.html#l00286">foedus::fs::rename()</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                                               {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb">return ::rename</a>(old_path.c_str(), new_path.c_str()) == 0;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_ga9e0f9ca119eb0d4fc1159716c95822eb"><div class="ttname"><a href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb">foedus::fs::rename</a></div><div class="ttdeci">bool rename(const Path &amp;old_path, const Path &amp;new_path)</div><div class="ttdoc">Just a synonym of atomic_rename() to avoid confusion. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00286">filesystem.hpp:286</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_cgraph.png" border="0" usemap="#group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_cgraph" id="group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="179,5,329,32"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb" title="Just a synonym of atomic_rename() to avoid confusion. " alt="" coords="189,56,319,83"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_icgraph.png" border="0" usemap="#group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_icgraph" id="group__FILESYSTEM_gae7728f7a6fdfeeb13567e1f1f110fcd8_icgraph">
<area shape="rect" id="node2" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee" title="fsync() on source file before rename, then fsync() on the parent folder after rename. " alt="" coords="179,45,307,86"/>
<area shape="rect" id="node12" href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb" title="Just a synonym of atomic_rename() to avoid confusion. " alt="" coords="179,111,308,137"/>
<area shape="rect" id="node3" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="356,37,503,93"/>
<area shape="rect" id="node4" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="807,5,969,61"/>
<area shape="rect" id="node5" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="562,37,723,93"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="551,117,735,173"/>
<area shape="rect" id="node7" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="783,117,993,173"/>
<area shape="rect" id="node8" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1069,91,1224,133"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1041,157,1252,198"/>
<area shape="rect" id="node9" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1300,91,1495,133"/>
<area shape="rect" id="node11" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1300,157,1495,198"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaca1dd0a627c83ff76e30603ea67c4816"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::create_directories </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sync</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursive mkdir (mkdirs). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>path of the directory to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sync</td><td>(optional, default false) wheter to call <a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a> on the created directories and their parents. This is required to make sure the new directory entries become durable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the directory already exists or creation succeeded </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00089">89</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="filesystem_8cpp_source.html#l00108">foedus::fs::create_directory()</a>, <a class="el" href="path_8hpp_source.html#l00075">foedus::fs::Path::empty()</a>, <a class="el" href="filesystem_8hpp_source.html#l00128">foedus::fs::exists()</a>, and <a class="el" href="path_8cpp_source.html#l00055">foedus::fs::Path::parent_path()</a>.</p>

<p>Referenced by <a class="el" href="meta__logger__impl_8cpp_source.html#l00036">foedus::log::MetaLogger::initialize_once()</a>, <a class="el" href="log__manager__pimpl_8cpp_source.html#l00049">foedus::log::LogManagerPimpl::initialize_once()</a>, <a class="el" href="direct__io__file_8cpp_source.html#l00055">foedus::fs::DirectIoFile::open()</a>, <a class="el" href="externalizable_8cpp_source.html#l00096">foedus::externalize::Externalizable::save_to_file()</a>, and <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00401">foedus::snapshot::SnapshotManagerPimpl::snapshot_metadata()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                                  {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4">exists</a>(p)) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b">create_directory</a>(p, sync)) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// if failed, create parent then try again</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  Path parent = p.parent_path();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (parent.empty()) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816">create_directories</a>(parent, sync) &amp;&amp; !<a class="code" href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4">exists</a>(parent)) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// now ancestors exist.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b">create_directory</a>(p, sync);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_ga5cf40c936f78178ef58af0a900031b8b"><div class="ttname"><a href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b">foedus::fs::create_directory</a></div><div class="ttdeci">bool create_directory(const Path &amp;p, bool sync=false)</div><div class="ttdoc">mkdir. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00108">filesystem.cpp:108</a></div></div>
<div class="ttc" id="group__FILESYSTEM_html_gaca1dd0a627c83ff76e30603ea67c4816"><div class="ttname"><a href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816">foedus::fs::create_directories</a></div><div class="ttdeci">bool create_directories(const Path &amp;p, bool sync=false)</div><div class="ttdoc">Recursive mkdir (mkdirs). </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00089">filesystem.cpp:89</a></div></div>
<div class="ttc" id="group__FILESYSTEM_html_ga4f8f53901e9c98fce72b6b3c52cf83a4"><div class="ttname"><a href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4">foedus::fs::exists</a></div><div class="ttdeci">bool exists(const Path &amp;p)</div><div class="ttdoc">Returns if the file exists. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00128">filesystem.hpp:128</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_cgraph.png" border="0" usemap="#group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_cgraph" id="group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_cgraph">
<area shape="rect" id="node2" href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b" title="mkdir. " alt="" coords="193,215,316,257"/>
<area shape="rect" id="node8" href="classfoedus_1_1fs_1_1Path.html#a9859706102ecca097e723d762ec468ae" title="foedus::fs::Path::parent_path" alt="" coords="575,311,764,337"/>
<area shape="rect" id="node10" href="classfoedus_1_1fs_1_1Path.html#a4efe9caad4e61d844b04a90a4c43b3cb" title="foedus::fs::Path::empty" alt="" coords="176,332,333,359"/>
<area shape="rect" id="node11" href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4" title="Returns if the file exists. " alt="" coords="194,33,315,60"/>
<area shape="rect" id="node3" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="1008,143,1159,169"/>
<area shape="rect" id="node4" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. " alt="" coords="395,231,513,257"/>
<area shape="rect" id="node5" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305" title="Returns if the file is a directory. " alt="" coords="593,201,746,228"/>
<area shape="rect" id="node6" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="825,143,947,169"/>
<area shape="rect" id="node7" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5" title="foedus::fs::FileStatus\l::is_directory" alt="" coords="813,194,959,235"/>
<area shape="rect" id="node9" href="classfoedus_1_1fs_1_1Path.html#a95efbd1ef2b5f97560bdc964ab0b00ed" title="foedus::fs::Path::Path" alt="" coords="812,311,960,337"/>
<area shape="rect" id="node12" href="structfoedus_1_1fs_1_1FileStatus.html#ac4ab24d4308aab673c8d1606a84367e5" title="foedus::fs::FileStatus\l::exists" alt="" coords="381,26,527,67"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_icgraph.png" border="0" usemap="#group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_icgraph" id="group__FILESYSTEM_gaca1dd0a627c83ff76e30603ea67c4816_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="433,5,594,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="176,335,373,376"/>
<area shape="rect" id="node4" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="199,148,350,189"/>
<area shape="rect" id="node5" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="440,71,587,127"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="653,226,837,282"/>
<area shape="rect" id="node14" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="447,217,579,259"/>
<area shape="rect" id="node15" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="421,152,605,193"/>
<area shape="rect" id="node6" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="910,105,1071,161"/>
<area shape="rect" id="node7" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="665,105,826,161"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="885,226,1096,282"/>
<area shape="rect" id="node10" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1172,200,1327,241"/>
<area shape="rect" id="node12" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1144,265,1355,307"/>
<area shape="rect" id="node11" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1403,200,1597,241"/>
<area shape="rect" id="node13" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1403,265,1597,307"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5cf40c936f78178ef58af0a900031b8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::create_directory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sync</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mkdir. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p</td><td>path of the directory to create </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sync</td><td>(optional, default false) wheter to call <a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a> on the created directory and its parent. This is required to make sure the new directory entry becomes durable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the directory already exists or creation whether succeeded </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00108">108</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8hpp_source.html#l00064">foedus::fs::Path::c_str()</a>, and <a class="el" href="filesystem_8cpp_source.html#l00203">foedus::fs::fsync()</a>.</p>

<p>Referenced by <a class="el" href="filesystem_8cpp_source.html#l00089">foedus::fs::create_directories()</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                                {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordtype">int</span> ret = ::mkdir(p.c_str(), S_IRWXU);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span> (sync) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">fsync</a>(p, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_ga08865450d848cb894243005bdd226d1e"><div class="ttname"><a href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">foedus::fs::fsync</a></div><div class="ttdeci">bool fsync(const Path &amp;path, bool sync_parent_directory=false)</div><div class="ttdoc">Makes the content and metadata of the file durable all the way up to devices. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00203">filesystem.cpp:203</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_cgraph" id="group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="775,38,925,65"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. " alt="" coords="176,63,293,90"/>
<area shape="rect" id="node4" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305" title="Returns if the file is a directory. " alt="" coords="359,89,513,115"/>
<area shape="rect" id="node7" href="classfoedus_1_1fs_1_1Path.html#a9859706102ecca097e723d762ec468ae" title="foedus::fs::Path::parent_path" alt="" coords="341,173,531,199"/>
<area shape="rect" id="node5" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="591,89,714,115"/>
<area shape="rect" id="node6" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5" title="foedus::fs::FileStatus\l::is_directory" alt="" coords="580,140,725,181"/>
<area shape="rect" id="node8" href="classfoedus_1_1fs_1_1Path.html#a95efbd1ef2b5f97560bdc964ab0b00ed" title="foedus::fs::Path::Path" alt="" coords="579,206,727,233"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_icgraph" id="group__FILESYSTEM_ga5cf40c936f78178ef58af0a900031b8b_icgraph">
<area shape="rect" id="node2" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816" title="Recursive mkdir (mkdirs). " alt="" coords="176,148,299,189"/>
<area shape="rect" id="node3" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="603,5,765,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="347,335,544,376"/>
<area shape="rect" id="node5" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="370,148,521,189"/>
<area shape="rect" id="node6" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="611,71,757,127"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="824,226,1008,282"/>
<area shape="rect" id="node15" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="618,217,750,259"/>
<area shape="rect" id="node16" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="592,152,776,193"/>
<area shape="rect" id="node7" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="1081,105,1242,161"/>
<area shape="rect" id="node8" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="835,105,997,161"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1056,226,1267,282"/>
<area shape="rect" id="node11" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1343,200,1497,241"/>
<area shape="rect" id="node13" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1315,265,1525,307"/>
<area shape="rect" id="node12" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1573,200,1768,241"/>
<area shape="rect" id="node14" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1573,265,1768,307"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaea7b35a8cbd3690f97459e66ba150279"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Path foedus::fs::current_path </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current working directory. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00066">66</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="assert__nd_8hpp_source.html#l00072">ASSERT_ND</a>.</p>

<p>Referenced by <a class="el" href="path_8cpp_source.html#l00029">foedus::fs::Path::Path()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                    {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  Path cur;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> path_max = 128;; path_max *=2) {  <span class="comment">// loop &#39;til buffer large enough</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    std::vector&lt;char&gt; buf(path_max);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">if</span> (::getcwd(&amp;buf[0], path_max) == 0) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(errno == ERANGE);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      cur = std::string(&amp;buf[0]);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">return</span> cur;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gaea7b35a8cbd3690f97459e66ba150279_icgraph.png" border="0" usemap="#group__FILESYSTEM_gaea7b35a8cbd3690f97459e66ba150279_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_gaea7b35a8cbd3690f97459e66ba150279_icgraph" id="group__FILESYSTEM_gaea7b35a8cbd3690f97459e66ba150279_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a38ae00c2ea18fbf949b1f2d494921332" title="This one resolves ~ at beginning. " alt="" coords="212,5,360,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga71591d3386f8adc320dac30d0320a3ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::durable_atomic_rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>old_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>new_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a> on source file before rename, then <a class="el" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. ">fsync()</a> on the parent folder after rename. </p>
<p>This method makes 2 fsync calls, one on old file <b>before</b> rename and another on the parent directory <b>after</b> rename.</p>
<p>Note that we don't need fsync on parent directory before rename assuming old_path and new_path is in the same folder (if not, you have to call fsync yourself before calling this method). Even if a crash happens right after rename, we still see the old content of new_path.</p>
<p>Also, we don't need fsync on new_path after rename because POSIX rename doesn't change the inode of renamed file. It's already there as soon as parent folder's fsync is done.</p>
<p>Quite complex and expensive, but this is required to make it durable regardless of filesystems. Fortunately, we have to call this method only once per epoch-advance. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00236">236</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="filesystem_8cpp_source.html#l00199">foedus::fs::atomic_rename()</a>, <a class="el" href="filesystem_8cpp_source.html#l00203">foedus::fs::fsync()</a>, and <a class="el" href="path_8cpp_source.html#l00055">foedus::fs::Path::parent_path()</a>.</p>

<p>Referenced by <a class="el" href="externalizable_8cpp_source.html#l00096">foedus::externalize::Externalizable::save_to_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                                                       {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">fsync</a>(old_path, <span class="keyword">false</span>)) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8">atomic_rename</a>(old_path, new_path)) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">fsync</a>(new_path.parent_path(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_gae7728f7a6fdfeeb13567e1f1f110fcd8"><div class="ttname"><a href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8">foedus::fs::atomic_rename</a></div><div class="ttdeci">bool atomic_rename(const Path &amp;old_path, const Path &amp;new_path)</div><div class="ttdoc">Renames the old file to the new file with the POSIX atomic-rename semantics. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00199">filesystem.cpp:199</a></div></div>
<div class="ttc" id="group__FILESYSTEM_html_ga08865450d848cb894243005bdd226d1e"><div class="ttname"><a href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">foedus::fs::fsync</a></div><div class="ttdeci">bool fsync(const Path &amp;path, bool sync_parent_directory=false)</div><div class="ttdoc">Makes the content and metadata of the file durable all the way up to devices. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00203">filesystem.cpp:203</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_cgraph" id="group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_cgraph">
<area shape="rect" id="node2" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8" title="Renames the old file to the new file with the POSIX atomic&#45;rename semantics. " alt="" coords="181,17,307,59"/>
<area shape="rect" id="node5" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. " alt="" coords="185,126,303,153"/>
<area shape="rect" id="node9" href="classfoedus_1_1fs_1_1Path.html#a9859706102ecca097e723d762ec468ae" title="foedus::fs::Path::parent_path" alt="" coords="355,177,544,203"/>
<area shape="rect" id="node3" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="788,75,939,102"/>
<area shape="rect" id="node4" href="group__FILESYSTEM.html#ga9e0f9ca119eb0d4fc1159716c95822eb" title="Just a synonym of atomic_rename() to avoid confusion. " alt="" coords="385,25,514,51"/>
<area shape="rect" id="node6" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305" title="Returns if the file is a directory. " alt="" coords="373,126,526,153"/>
<area shape="rect" id="node7" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="605,126,727,153"/>
<area shape="rect" id="node8" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5" title="foedus::fs::FileStatus\l::is_directory" alt="" coords="593,177,739,219"/>
<area shape="rect" id="node10" href="classfoedus_1_1fs_1_1Path.html#a95efbd1ef2b5f97560bdc964ab0b00ed" title="foedus::fs::Path::Path" alt="" coords="592,243,740,270"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_icgraph" id="group__FILESYSTEM_ga71591d3386f8adc320dac30d0320a3ee_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="181,37,328,93"/>
<area shape="rect" id="node3" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="633,5,794,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="387,37,549,93"/>
<area shape="rect" id="node5" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="376,117,560,173"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="608,117,819,173"/>
<area shape="rect" id="node7" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="895,91,1049,133"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="867,157,1077,198"/>
<area shape="rect" id="node8" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1125,91,1320,133"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1125,157,1320,198"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4f8f53901e9c98fce72b6b3c52cf83a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::exists </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if the file exists. </p>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00128">128</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>

<p>References <a class="el" href="filesystem_8hpp_source.html#l00097">foedus::fs::FileStatus::exists()</a>, and <a class="el" href="filesystem_8cpp_source.html#l00045">foedus::fs::status()</a>.</p>

<p>Referenced by <a class="el" href="shared__memory_8cpp_source.html#l00067">foedus::memory::SharedMemory::alloc()</a>, <a class="el" href="shared__memory_8cpp_source.html#l00157">foedus::memory::SharedMemory::attach()</a>, <a class="el" href="filesystem_8cpp_source.html#l00089">foedus::fs::create_directories()</a>, <a class="el" href="meta__logger__impl_8cpp_source.html#l00036">foedus::log::MetaLogger::initialize_once()</a>, <a class="el" href="log__manager__pimpl_8cpp_source.html#l00049">foedus::log::LogManagerPimpl::initialize_once()</a>, <a class="el" href="savepoint__manager__pimpl_8cpp_source.html#l00037">foedus::savepoint::SavepointManagerPimpl::initialize_once()</a>, <a class="el" href="externalizable_8cpp_source.html#l00075">foedus::externalize::Externalizable::load_from_file()</a>, <a class="el" href="direct__io__file_8cpp_source.html#l00055">foedus::fs::DirectIoFile::open()</a>, <a class="el" href="metadata_8cpp_source.html#l00166">foedus::storage::MetadataSerializer::save_all_storages_to_xml()</a>, <a class="el" href="externalizable_8cpp_source.html#l00096">foedus::externalize::Externalizable::save_to_file()</a>, and <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00401">foedus::snapshot::SnapshotManagerPimpl::snapshot_metadata()</a>.</p>
<div class="fragment"><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;{<span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">status</a>(p).<a class="code" href="structfoedus_1_1fs_1_1FileStatus.html#ac4ab24d4308aab673c8d1606a84367e5">exists</a>(); }</div>
<div class="ttc" id="group__FILESYSTEM_html_gaaa833e3af93824a2485400b32dab7bcd"><div class="ttname"><a href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">foedus::fs::status</a></div><div class="ttdeci">FileStatus status(const Path &amp;p)</div><div class="ttdoc">Returns the status of the file. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00045">filesystem.cpp:45</a></div></div>
<div class="ttc" id="structfoedus_1_1fs_1_1FileStatus_html_ac4ab24d4308aab673c8d1606a84367e5"><div class="ttname"><a href="structfoedus_1_1fs_1_1FileStatus.html#ac4ab24d4308aab673c8d1606a84367e5">foedus::fs::FileStatus::exists</a></div><div class="ttdeci">bool exists() const </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00097">filesystem.hpp:97</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_cgraph" id="group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1fs_1_1FileStatus.html#ac4ab24d4308aab673c8d1606a84367e5" title="foedus::fs::FileStatus\l::exists" alt="" coords="175,5,320,47"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="186,71,309,98"/>
<area shape="rect" id="node4" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="368,71,519,98"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_icgraph" id="group__FILESYSTEM_ga4f8f53901e9c98fce72b6b3c52cf83a4_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1SharedMemory.html#ae4b91eee2dce03e4b3aac612c71b88a0" title="Newly allocate a shared memory of given size on given NUMA node. " alt="" coords="186,13,397,55"/>
<area shape="rect" id="node6" href="classfoedus_1_1memory_1_1SharedMemory.html#a690fd766729121b64adf28994a8a6660" title="Attach an already&#45;allocated shared memory so that this object points to the memory. " alt="" coords="186,80,397,121"/>
<area shape="rect" id="node9" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816" title="Recursive mkdir (mkdirs). " alt="" coords="230,384,353,425"/>
<area shape="rect" id="node10" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="739,136,901,177"/>
<area shape="rect" id="node11" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="465,485,662,527"/>
<area shape="rect" id="node12" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="488,267,639,308"/>
<area shape="rect" id="node13" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="747,445,893,501"/>
<area shape="rect" id="node14" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="1245,553,1406,609"/>
<area shape="rect" id="node16" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="979,369,1163,425"/>
<area shape="rect" id="node24" href="structfoedus_1_1externalize_1_1Externalizable.html#a6f66d8519bcfee0a582cae47a822fe18" title="Load the content of this object from the specified XML file. " alt="" coords="219,653,363,709"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1MetadataSerializer.html#a83f2453d6adbfbc52375d8c02d0cb24a" title="foedus::storage::Metadata\lSerializer::save_all_storages_to_xml" alt="" coords="175,759,408,800"/>
<area shape="rect" id="node3" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa42d7f6cd529569e79e4cfc298adb39b" title="Master process creates shared memories by calling this method. " alt="" coords="456,5,671,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a3dd3a524e5fbb0b8f9cb52dd21689d0a" title="Called as part of initialize_once() if this is a master engine. " alt="" coords="719,5,921,47"/>
<area shape="rect" id="node5" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#aa14e68e8b8e3902f2b139b6388e712d8" title="foedus::soc::SocManagerPimpl\l::initialize_once" alt="" coords="969,39,1172,80"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a4b6032d62764c145607306973945bb8c" title="Child processes (emulated or not) set a reference to shared memory and receive the EngnieOption value..." alt="" coords="460,72,667,113"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d09b3bd25667fccd9bb831303788401" title="Called as part of initialize_once() if this is a child SOC engine. " alt="" coords="719,71,921,112"/>
<area shape="rect" id="node22" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="754,267,886,308"/>
<area shape="rect" id="node23" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="728,201,912,243"/>
<area shape="rect" id="node15" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="990,517,1151,573"/>
<area shape="rect" id="node17" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1220,369,1431,425"/>
<area shape="rect" id="node18" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1507,343,1661,384"/>
<area shape="rect" id="node20" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1479,408,1689,449"/>
<area shape="rect" id="node19" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1737,343,1932,384"/>
<area shape="rect" id="node21" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1737,408,1932,449"/>
<area shape="rect" id="node25" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a12f213f8bc7b46e75428a7624999c3fd" title="foedus::snapshot::Snapshot\lManagerPimpl::read_snapshot\l_metadata" alt="" coords="464,703,663,759"/>
<area shape="rect" id="node26" href="classfoedus_1_1snapshot_1_1SnapshotManager.html#a4508beef5e0c55a8db38b95f42c41fad" title="Read the snapshot metadata file that contains storages as of the snapshot. " alt="" coords="728,703,912,759"/>
<area shape="rect" id="node27" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a49864b0bae19e6c2fe61a2422d1650af" title="foedus::storage::Storage\lManagerPimpl::initialize\l_read_latest_snapshot" alt="" coords="989,703,1153,759"/>
<area shape="rect" id="node28" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#ad89ca2bb2619e01c3b13d65302a3d7c9" title="foedus::storage::Storage\lManagerPimpl::initialize_once" alt="" coords="1228,711,1423,752"/>
<area shape="rect" id="node30" href="structfoedus_1_1snapshot_1_1SnapshotMetadata.html#a559726ceaa8b7887e384b2277292cc8d" title="Writes the content of this object to the given XML element. " alt="" coords="471,784,655,825"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga1048a33bafe4dcea89991112ae2660d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::fs::file_size </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns size of the file. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00120">120</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8hpp_source.html#l00064">foedus::fs::Path::c_str()</a>.</p>

<p>Referenced by <a class="el" href="log__mapper__impl_8cpp_source.html#l00140">foedus::snapshot::LogMapper::handle_process()</a>, <a class="el" href="snapshot__writer__impl_8cpp_source.html#l00082">foedus::snapshot::SnapshotWriter::open()</a>, <a class="el" href="direct__io__file_8cpp_source.html#l00055">foedus::fs::DirectIoFile::open()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00453">foedus::snapshot::SnapshotManagerPimpl::read_snapshot_metadata()</a>, <a class="el" href="restart__manager__pimpl_8cpp_source.html#l00110">foedus::restart::RestartManagerPimpl::redo_meta_logs()</a>, and <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00401">foedus::snapshot::SnapshotManagerPimpl::snapshot_metadata()</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                  {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">struct </span>stat path_stat;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordtype">int</span> ret = ::stat(p.c_str(), &amp;path_stat);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(-1);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (!S_ISREG(path_stat.st_mode)) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(-1);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(path_stat.st_size);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_cgraph" id="group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="187,5,337,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_icgraph" id="group__FILESYSTEM_ga1048a33bafe4dcea89991112ae2660d8_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1snapshot_1_1LogMapper.html#a661014d4832400f072544ff4b7e74a45" title="Implements the specific logics in derived class. " alt="" coords="189,64,383,105"/>
<area shape="rect" id="node3" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="433,5,617,47"/>
<area shape="rect" id="node4" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="211,181,361,223"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="676,251,860,307"/>
<area shape="rect" id="node16" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a12f213f8bc7b46e75428a7624999c3fd" title="foedus::snapshot::Snapshot\lManagerPimpl::read_snapshot\l_metadata" alt="" coords="187,334,385,390"/>
<area shape="rect" id="node20" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#ac587afcb72a4b29b67a56fb49c49b503" title="Redo metadata operation (create/drop storage) since the latest snapshot. " alt="" coords="665,412,871,453"/>
<area shape="rect" id="node5" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="452,137,599,193"/>
<area shape="rect" id="node14" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="459,217,591,259"/>
<area shape="rect" id="node15" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="445,71,606,112"/>
<area shape="rect" id="node6" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="943,149,1105,205"/>
<area shape="rect" id="node7" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="687,102,849,158"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="919,255,1129,311"/>
<area shape="rect" id="node10" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1205,365,1360,407"/>
<area shape="rect" id="node12" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1177,263,1388,304"/>
<area shape="rect" id="node11" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1436,365,1631,407"/>
<area shape="rect" id="node13" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1436,263,1631,304"/>
<area shape="rect" id="node17" href="classfoedus_1_1snapshot_1_1SnapshotManager.html#a4508beef5e0c55a8db38b95f42c41fad" title="Read the snapshot metadata file that contains storages as of the snapshot. " alt="" coords="433,334,617,390"/>
<area shape="rect" id="node18" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#a49864b0bae19e6c2fe61a2422d1650af" title="foedus::storage::Storage\lManagerPimpl::initialize\l_read_latest_snapshot" alt="" coords="686,331,850,387"/>
<area shape="rect" id="node19" href="classfoedus_1_1storage_1_1StorageManagerPimpl.html#ad89ca2bb2619e01c3b13d65302a3d7c9" title="foedus::storage::Storage\lManagerPimpl::initialize_once" alt="" coords="927,339,1121,380"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga08865450d848cb894243005bdd226d1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::fsync </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sync_parent_directory</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Makes the content and metadata of the file durable all the way up to devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">path</td><td>path of the file to make durable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sync_parent_directory</td><td>(optional, default false) whether to also call fsync on the parent directory to make sure the directory entry is written to device. This is required when you create a new file, rename, etc. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the sync succeeded or not. If failed, check the errno global variable (set by lower-level library).</dd></dl>
<p>Surprisingly, there is no analogus method in boost::filesystem. This method provides the fundamental building block of fault-tolerant systems; fsync. We so far don't provide fdatasync (no metadata sync), but this should suffice. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00203">203</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8hpp_source.html#l00064">foedus::fs::Path::c_str()</a>, <a class="el" href="filesystem_8hpp_source.html#l00133">foedus::fs::is_directory()</a>, and <a class="el" href="path_8cpp_source.html#l00055">foedus::fs::Path::parent_path()</a>.</p>

<p>Referenced by <a class="el" href="snapshot__writer__impl_8cpp_source.html#l00053">foedus::snapshot::SnapshotWriter::close()</a>, <a class="el" href="filesystem_8cpp_source.html#l00108">foedus::fs::create_directory()</a>, <a class="el" href="filesystem_8cpp_source.html#l00236">foedus::fs::durable_atomic_rename()</a>, <a class="el" href="externalizable_8cpp_source.html#l00096">foedus::externalize::Externalizable::save_to_file()</a>, <a class="el" href="snapshot__manager__pimpl_8cpp_source.html#l00401">foedus::snapshot::SnapshotManagerPimpl::snapshot_metadata()</a>, <a class="el" href="direct__io__file_8cpp_source.html#l00360">foedus::fs::DirectIoFile::sync()</a>, and <a class="el" href="direct__io__file_8cpp_source.html#l00296">foedus::fs::DirectIoFile::truncate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                                         {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordtype">int</span> sync_ret;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305">is_directory</a>(path)) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">int</span> descriptor = ::open(path.c_str(), O_RDONLY);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (descriptor &lt; 0) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    sync_ret = <a class="code" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">::fsync</a>(descriptor);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    ::close(descriptor);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    DIR *dir = ::opendir(path.c_str());</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (!dir) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">int</span> descriptor = ::dirfd(dir);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (descriptor &lt; 0) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    sync_ret = <a class="code" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">::fsync</a>(descriptor);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    ::closedir(dir);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">if</span> (sync_ret != 0) {</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (sync_parent_directory) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">fsync</a>(path.parent_path(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_ga87c90d834f65aad6f7b6540ae226f305"><div class="ttname"><a href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305">foedus::fs::is_directory</a></div><div class="ttdeci">bool is_directory(const Path &amp;p)</div><div class="ttdoc">Returns if the file is a directory. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00133">filesystem.hpp:133</a></div></div>
<div class="ttc" id="group__FILESYSTEM_html_ga08865450d848cb894243005bdd226d1e"><div class="ttname"><a href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e">foedus::fs::fsync</a></div><div class="ttdeci">bool fsync(const Path &amp;path, bool sync_parent_directory=false)</div><div class="ttdoc">Makes the content and metadata of the file durable all the way up to devices. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00203">filesystem.cpp:203</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_cgraph" id="group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="604,5,755,32"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305" title="Returns if the file is a directory. " alt="" coords="189,60,342,87"/>
<area shape="rect" id="node6" href="classfoedus_1_1fs_1_1Path.html#a9859706102ecca097e723d762ec468ae" title="foedus::fs::Path::parent_path" alt="" coords="171,115,360,141"/>
<area shape="rect" id="node4" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="421,31,543,57"/>
<area shape="rect" id="node5" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5" title="foedus::fs::FileStatus\l::is_directory" alt="" coords="409,82,555,123"/>
<area shape="rect" id="node7" href="classfoedus_1_1fs_1_1Path.html#a95efbd1ef2b5f97560bdc964ab0b00ed" title="foedus::fs::Path::Path" alt="" coords="408,148,556,175"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_icgraph" id="group__FILESYSTEM_ga08865450d848cb894243005bdd226d1e_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a4944523eeeba60c3b677a8147b1f9e42" title="Close the file and makes sure all writes become durable (including the directory entry). " alt="" coords="171,107,355,148"/>
<area shape="rect" id="node5" href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b" title="mkdir. " alt="" coords="201,248,324,289"/>
<area shape="rect" id="node10" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="899,205,1045,261"/>
<area shape="rect" id="node13" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="1112,270,1296,326"/>
<area shape="rect" id="node20" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee" title="fsync() on source file before rename, then fsync() on the parent folder after rename. " alt="" coords="431,320,559,361"/>
<area shape="rect" id="node21" href="classfoedus_1_1fs_1_1DirectIoFile.html#a357db1ed5dbab29245011a2c79d12023" title="Analogues of POSIX fsync(). " alt="" coords="187,555,338,596"/>
<area shape="rect" id="node22" href="classfoedus_1_1fs_1_1DirectIoFile.html#ad59b9d5dc37a89ee993565865bb36b01" title="Discard the content of the file after the given offset. " alt="" coords="658,437,809,479"/>
<area shape="rect" id="node3" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a3c24b7f707e02abf63c2708b0090c02e" title="foedus::snapshot::Snapshot\lWriter::~SnapshotWriter" alt="" coords="403,107,587,148"/>
<area shape="rect" id="node4" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="880,5,1064,47"/>
<area shape="rect" id="node6" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816" title="Recursive mkdir (mkdirs). " alt="" coords="433,200,556,241"/>
<area shape="rect" id="node7" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="891,92,1053,133"/>
<area shape="rect" id="node8" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="635,168,832,209"/>
<area shape="rect" id="node9" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="658,103,809,144"/>
<area shape="rect" id="node19" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="906,387,1038,428"/>
<area shape="rect" id="node11" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="1369,165,1530,221"/>
<area shape="rect" id="node12" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="1123,139,1285,195"/>
<area shape="rect" id="node14" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1344,270,1555,326"/>
<area shape="rect" id="node15" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1631,244,1785,285"/>
<area shape="rect" id="node17" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1603,309,1813,351"/>
<area shape="rect" id="node16" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1861,244,2056,285"/>
<area shape="rect" id="node18" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1861,309,2056,351"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga25755cb9b3f7c60fa059c17bf0b6dcb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Path foedus::fs::home_path </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the absolute path of the home directory of the user running this process. </p>
<p>So far this checks only HOME environment variable, which might not be set in some environment. In that case, this returns an empty path. A truly crossplatform home_path is not in standard C++, unfortunately. </p><dl class="section see"><dt>See also</dt><dd><a href="http://stackoverflow.com/questions/2552416/how-can-i-find-the-users-home-dir-in-a-cross-platform-manner-using-c">http://stackoverflow.com/questions/2552416/how-can-i-find-the-users-home-dir-in-a-cross-platform-manner-using-c</a> </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00080">80</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>Referenced by <a class="el" href="path_8cpp_source.html#l00029">foedus::fs::Path::Path()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                 {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *home = ::getenv(<span class="stringliteral">&quot;HOME&quot;</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">if</span> (home) {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> Path(home);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> Path();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga25755cb9b3f7c60fa059c17bf0b6dcb5_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga25755cb9b3f7c60fa059c17bf0b6dcb5_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga25755cb9b3f7c60fa059c17bf0b6dcb5_icgraph" id="group__FILESYSTEM_ga25755cb9b3f7c60fa059c17bf0b6dcb5_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a38ae00c2ea18fbf949b1f2d494921332" title="This one resolves ~ at beginning. " alt="" coords="204,5,352,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga87c90d834f65aad6f7b6540ae226f305"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::is_directory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if the file is a directory. </p>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00133">133</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>

<p>References <a class="el" href="filesystem_8hpp_source.html#l00099">foedus::fs::FileStatus::is_directory()</a>, and <a class="el" href="filesystem_8cpp_source.html#l00045">foedus::fs::status()</a>.</p>

<p>Referenced by <a class="el" href="path_8cpp_source.html#l00064">foedus::fs::Path::child_paths()</a>, and <a class="el" href="filesystem_8cpp_source.html#l00203">foedus::fs::fsync()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{<span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">status</a>(p).<a class="code" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5">is_directory</a>(); }</div>
<div class="ttc" id="structfoedus_1_1fs_1_1FileStatus_html_a7b8858f191dee3d9a92cae0cd759c1e5"><div class="ttname"><a href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5">foedus::fs::FileStatus::is_directory</a></div><div class="ttdeci">bool is_directory() const </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00099">filesystem.hpp:99</a></div></div>
<div class="ttc" id="group__FILESYSTEM_html_gaaa833e3af93824a2485400b32dab7bcd"><div class="ttname"><a href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">foedus::fs::status</a></div><div class="ttdeci">FileStatus status(const Path &amp;p)</div><div class="ttdoc">Returns the status of the file. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00045">filesystem.cpp:45</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_cgraph" id="group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5" title="foedus::fs::FileStatus\l::is_directory" alt="" coords="207,5,352,47"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="218,71,341,98"/>
<area shape="rect" id="node4" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="400,71,551,98"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_icgraph" id="group__FILESYSTEM_ga87c90d834f65aad6f7b6540ae226f305_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a080a0053aa2d32ca6547d8e5d3474486" title="foedus::fs::Path::child\l_paths" alt="" coords="207,53,355,94"/>
<area shape="rect" id="node4" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. " alt="" coords="222,203,339,229"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#gaaee757fd655c10771e8047fb6226ebba" title="Recursively deletes a directory. " alt="" coords="421,5,568,32"/>
<area shape="rect" id="node5" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a4944523eeeba60c3b677a8147b1f9e42" title="Close the file and makes sure all writes become durable (including the directory entry). " alt="" coords="403,225,587,266"/>
<area shape="rect" id="node8" href="group__FILESYSTEM.html#ga5cf40c936f78178ef58af0a900031b8b" title="mkdir. " alt="" coords="433,302,556,343"/>
<area shape="rect" id="node13" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="1131,444,1277,500"/>
<area shape="rect" id="node16" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="1344,327,1528,383"/>
<area shape="rect" id="node23" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee" title="fsync() on source file before rename, then fsync() on the parent folder after rename. " alt="" coords="663,425,791,466"/>
<area shape="rect" id="node24" href="classfoedus_1_1fs_1_1DirectIoFile.html#a357db1ed5dbab29245011a2c79d12023" title="Analogues of POSIX fsync(). " alt="" coords="419,107,570,149"/>
<area shape="rect" id="node25" href="classfoedus_1_1fs_1_1DirectIoFile.html#ad59b9d5dc37a89ee993565865bb36b01" title="Discard the content of the file after the given offset. " alt="" coords="890,107,1041,149"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a3c24b7f707e02abf63c2708b0090c02e" title="foedus::snapshot::Snapshot\lWriter::~SnapshotWriter" alt="" coords="635,225,819,266"/>
<area shape="rect" id="node7" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="1112,186,1296,227"/>
<area shape="rect" id="node9" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816" title="Recursive mkdir (mkdirs). " alt="" coords="665,313,788,354"/>
<area shape="rect" id="node10" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="1123,270,1285,311"/>
<area shape="rect" id="node11" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="867,393,1064,434"/>
<area shape="rect" id="node12" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="890,225,1041,266"/>
<area shape="rect" id="node22" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="1138,111,1270,153"/>
<area shape="rect" id="node14" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="1601,439,1762,495"/>
<area shape="rect" id="node15" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="1355,407,1517,463"/>
<area shape="rect" id="node17" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="1576,327,1787,383"/>
<area shape="rect" id="node18" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1863,301,2017,342"/>
<area shape="rect" id="node20" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1835,366,2045,407"/>
<area shape="rect" id="node19" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="2093,301,2288,342"/>
<area shape="rect" id="node21" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="2093,366,2288,407"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga17ed5fb221648976114e4320e8dc7185"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::is_regular_file </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns if the file is a regular file. </p>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00138">138</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>

<p>References <a class="el" href="filesystem_8hpp_source.html#l00098">foedus::fs::FileStatus::is_regular_file()</a>, and <a class="el" href="filesystem_8cpp_source.html#l00045">foedus::fs::status()</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{<span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">status</a>(p).<a class="code" href="structfoedus_1_1fs_1_1FileStatus.html#a76000c37b9fc4c1d9596240409972809">is_regular_file</a>(); }</div>
<div class="ttc" id="group__FILESYSTEM_html_gaaa833e3af93824a2485400b32dab7bcd"><div class="ttname"><a href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">foedus::fs::status</a></div><div class="ttdeci">FileStatus status(const Path &amp;p)</div><div class="ttdoc">Returns the status of the file. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00045">filesystem.cpp:45</a></div></div>
<div class="ttc" id="structfoedus_1_1fs_1_1FileStatus_html_a76000c37b9fc4c1d9596240409972809"><div class="ttname"><a href="structfoedus_1_1fs_1_1FileStatus.html#a76000c37b9fc4c1d9596240409972809">foedus::fs::FileStatus::is_regular_file</a></div><div class="ttdeci">bool is_regular_file() const </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00098">filesystem.hpp:98</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga17ed5fb221648976114e4320e8dc7185_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga17ed5fb221648976114e4320e8dc7185_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga17ed5fb221648976114e4320e8dc7185_cgraph" id="group__FILESYSTEM_ga17ed5fb221648976114e4320e8dc7185_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1fs_1_1FileStatus.html#a76000c37b9fc4c1d9596240409972809" title="foedus::fs::FileStatus\l::is_regular_file" alt="" coords="219,5,364,47"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="230,71,353,98"/>
<area shape="rect" id="node4" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="412,71,563,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad1f62b080fa246b5f8c166f44c72134f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::remove </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a regular file or an empty directory. </p>
<dl class="section return"><dt>Returns</dt><dd>whether succeeded </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00132">132</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="filesystem_8hpp_source.html#l00097">foedus::fs::FileStatus::exists()</a>, <a class="el" href="filesystem_8hpp_source.html#l00098">foedus::fs::FileStatus::is_regular_file()</a>, and <a class="el" href="filesystem_8cpp_source.html#l00045">foedus::fs::status()</a>.</p>

<p>Referenced by <a class="el" href="shared__memory_8cpp_source.html#l00222">foedus::memory::SharedMemory::release_block()</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                           {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  FileStatus s = <a class="code" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">status</a>(p);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (!s.exists()) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (s.is_regular_file()) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#gad1f62b080fa246b5f8c166f44c72134f">std::remove</a>(p.c_str()) == 0;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">int</span> ret = ::rmdir(p.c_str());</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (ret == 0) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_gad1f62b080fa246b5f8c166f44c72134f"><div class="ttname"><a href="group__FILESYSTEM.html#gad1f62b080fa246b5f8c166f44c72134f">foedus::fs::remove</a></div><div class="ttdeci">bool remove(const Path &amp;p)</div><div class="ttdoc">Deletes a regular file or an empty directory. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00132">filesystem.cpp:132</a></div></div>
<div class="ttc" id="group__FILESYSTEM_html_gaaa833e3af93824a2485400b32dab7bcd"><div class="ttname"><a href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd">foedus::fs::status</a></div><div class="ttdeci">FileStatus status(const Path &amp;p)</div><div class="ttdoc">Returns the status of the file. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00045">filesystem.cpp:45</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_cgraph.png" border="0" usemap="#group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_cgraph" id="group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_cgraph">
<area shape="rect" id="node2" href="structfoedus_1_1fs_1_1FileStatus.html#ac4ab24d4308aab673c8d1606a84367e5" title="foedus::fs::FileStatus\l::exists" alt="" coords="180,5,325,47"/>
<area shape="rect" id="node3" href="structfoedus_1_1fs_1_1FileStatus.html#a76000c37b9fc4c1d9596240409972809" title="foedus::fs::FileStatus\l::is_regular_file" alt="" coords="180,71,325,112"/>
<area shape="rect" id="node4" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="191,137,314,163"/>
<area shape="rect" id="node5" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="373,137,524,163"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_icgraph.png" border="0" usemap="#group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_icgraph" id="group__FILESYSTEM_gad1f62b080fa246b5f8c166f44c72134f_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1memory_1_1SharedMemory.html#a20f2fb7b7f86ab5c4134452f1267eeb5" title="Releases the memory block IF this process has an ownership. " alt="" coords="180,144,391,185"/>
<area shape="rect" id="node3" href="classfoedus_1_1memory_1_1SharedMemory.html#a7094d7eaf5f5c149a5d52fd9ce6fadd0" title="Automatically releases the memory. " alt="" coords="439,13,649,55"/>
<area shape="rect" id="node4" href="classfoedus_1_1memory_1_1SharedMemory.html#afab2d81be8ba9c96b24dcf977cc3b792" title="Move assignment operator that steals the memory block from other. " alt="" coords="439,79,649,120"/>
<area shape="rect" id="node5" href="classfoedus_1_1memory_1_1SharedMemory.html#ae4b91eee2dce03e4b3aac612c71b88a0" title="Newly allocate a shared memory of given size on given NUMA node. " alt="" coords="439,144,649,185"/>
<area shape="rect" id="node9" href="classfoedus_1_1memory_1_1SharedMemory.html#a690fd766729121b64adf28994a8a6660" title="Attach an already&#45;allocated shared memory so that this object points to the memory. " alt="" coords="439,341,649,383"/>
<area shape="rect" id="node12" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa961c615ceddd0dd0d3943629fd1a147" title="Detaches and releases the shared memories. " alt="" coords="451,210,637,266"/>
<area shape="rect" id="node6" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa42d7f6cd529569e79e4cfc298adb39b" title="Master process creates shared memories by calling this method. " alt="" coords="697,5,912,47"/>
<area shape="rect" id="node7" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a3dd3a524e5fbb0b8f9cb52dd21689d0a" title="Called as part of initialize_once() if this is a master engine. " alt="" coords="1211,267,1413,308"/>
<area shape="rect" id="node8" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#aa14e68e8b8e3902f2b139b6388e712d8" title="foedus::soc::SocManagerPimpl\l::initialize_once" alt="" coords="1461,315,1664,356"/>
<area shape="rect" id="node10" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a4b6032d62764c145607306973945bb8c" title="Child processes (emulated or not) set a reference to shared memory and receive the EngnieOption value..." alt="" coords="701,423,908,464"/>
<area shape="rect" id="node11" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d09b3bd25667fccd9bb831303788401" title="Called as part of initialize_once() if this is a child SOC engine. " alt="" coords="1211,361,1413,403"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#ae93958bcd01826cc39e3b84333d1c3d9" title="foedus::soc::SharedMemory\lRepo::~SharedMemoryRepo" alt="" coords="711,123,898,164"/>
<area shape="rect" id="node14" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d435277bd229b7988c3f249c0a0730f" title="foedus::soc::SocManagerPimpl\l::uninitialize_once" alt="" coords="703,188,906,229"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a998409bf9e2aff10ec8dfb02f17bb956" title="Wait for child SOCs to start up and at least finish attaching shared memory. " alt="" coords="703,305,906,347"/>
<area shape="rect" id="node17" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#ad9ef70c0b175a6535731e2cf0c2370f1" title="Launch children via fork. " alt="" coords="960,364,1163,405"/>
<area shape="rect" id="node18" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a4a9091baae2ba21b2cb888da8d391818" title="Launch children via spawn. " alt="" coords="960,233,1163,275"/>
<area shape="rect" id="node16" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a77d275f92471e6ac9e0c4bb4c609665f" title="Launch emulated children as threads. " alt="" coords="960,299,1163,340"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaaee757fd655c10771e8047fb6226ebba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t foedus::fs::remove_all </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively deletes a directory. </p>
<dl class="section return"><dt>Returns</dt><dd>number of files/directories deleted. </dd></dl>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00148">148</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8cpp_source.html#l00064">foedus::fs::Path::child_paths()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                   {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  uint64_t count = 1;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  std::vector&lt; Path &gt; child_paths = p.child_paths();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">for</span> (Path child : child_paths) {</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    count += <a class="code" href="group__FILESYSTEM.html#gaaee757fd655c10771e8047fb6226ebba">remove_all</a>(child);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keyword">remove</span>(p);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">return</span> count;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_gaaee757fd655c10771e8047fb6226ebba"><div class="ttname"><a href="group__FILESYSTEM.html#gaaee757fd655c10771e8047fb6226ebba">foedus::fs::remove_all</a></div><div class="ttdeci">uint64_t remove_all(const Path &amp;p)</div><div class="ttdoc">Recursively deletes a directory. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00148">filesystem.cpp:148</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gaaee757fd655c10771e8047fb6226ebba_cgraph.png" border="0" usemap="#group__FILESYSTEM_gaaee757fd655c10771e8047fb6226ebba_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_gaaee757fd655c10771e8047fb6226ebba_cgraph" id="group__FILESYSTEM_gaaee757fd655c10771e8047fb6226ebba_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a080a0053aa2d32ca6547d8e5d3474486" title="foedus::fs::Path::child\l_paths" alt="" coords="200,89,348,131"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305" title="Returns if the file is a directory. " alt="" coords="396,71,549,98"/>
<area shape="rect" id="node6" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="791,97,941,123"/>
<area shape="rect" id="node4" href="structfoedus_1_1fs_1_1FileStatus.html#a7b8858f191dee3d9a92cae0cd759c1e5" title="foedus::fs::FileStatus\l::is_directory" alt="" coords="597,5,743,47"/>
<area shape="rect" id="node5" href="group__FILESYSTEM.html#gaaa833e3af93824a2485400b32dab7bcd" title="Returns the status of the file. " alt="" coords="609,71,731,98"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga9e0f9ca119eb0d4fc1159716c95822eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool foedus::fs::rename </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>old_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>new_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Just a synonym of <a class="el" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8" title="Renames the old file to the new file with the POSIX atomic-rename semantics. ">atomic_rename()</a> to avoid confusion. </p>

<p>Definition at line <a class="el" href="filesystem_8hpp_source.html#l00286">286</a> of file <a class="el" href="filesystem_8hpp_source.html">filesystem.hpp</a>.</p>

<p>References <a class="el" href="filesystem_8cpp_source.html#l00199">foedus::fs::atomic_rename()</a>.</p>

<p>Referenced by <a class="el" href="filesystem_8cpp_source.html#l00199">foedus::fs::atomic_rename()</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                                               {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8">atomic_rename</a>(old_path, new_path);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_gae7728f7a6fdfeeb13567e1f1f110fcd8"><div class="ttname"><a href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8">foedus::fs::atomic_rename</a></div><div class="ttdeci">bool atomic_rename(const Path &amp;old_path, const Path &amp;new_path)</div><div class="ttdoc">Renames the old file to the new file with the POSIX atomic-rename semantics. </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00199">filesystem.cpp:199</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_cgraph.png" border="0" usemap="#group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_cgraph" id="group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_cgraph">
<area shape="rect" id="node2" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8" title="Renames the old file to the new file with the POSIX atomic&#45;rename semantics. " alt="" coords="183,5,308,47"/>
<area shape="rect" id="node3" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="356,13,507,39"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_icgraph" id="group__FILESYSTEM_ga9e0f9ca119eb0d4fc1159716c95822eb_icgraph">
<area shape="rect" id="node2" href="group__FILESYSTEM.html#gae7728f7a6fdfeeb13567e1f1f110fcd8" title="Renames the old file to the new file with the POSIX atomic&#45;rename semantics. " alt="" coords="183,45,308,86"/>
<area shape="rect" id="node3" href="group__FILESYSTEM.html#ga71591d3386f8adc320dac30d0320a3ee" title="fsync() on source file before rename, then fsync() on the parent folder after rename. " alt="" coords="356,45,484,86"/>
<area shape="rect" id="node4" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="532,37,679,93"/>
<area shape="rect" id="node5" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="983,5,1145,61"/>
<area shape="rect" id="node6" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="738,37,899,93"/>
<area shape="rect" id="node7" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="727,117,911,173"/>
<area shape="rect" id="node8" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="959,117,1169,173"/>
<area shape="rect" id="node9" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="1245,91,1400,133"/>
<area shape="rect" id="node11" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="1217,157,1428,198"/>
<area shape="rect" id="node10" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1476,91,1671,133"/>
<area shape="rect" id="node12" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1476,157,1671,198"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gafe48dfc9198eee44e96373833feb0e21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SpaceInfo foedus::fs::space </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns free space information for the device the file is on. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00158">158</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8hpp_source.html#l00064">foedus::fs::Path::c_str()</a>, and <a class="el" href="filesystem_8hpp_source.html#l00111">foedus::fs::SpaceInfo::capacity_</a>.</p>
<div class="fragment"><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                               {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">struct </span>statfs vfs;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  SpaceInfo info;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordtype">int</span> ret = ::statfs(p.c_str(), &amp;vfs);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span> (ret == 0) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    info.capacity_    = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(vfs.f_blocks) * vfs.f_bsize;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    info.free_        = static_cast&lt;uint64_t&gt;(vfs.f_bfree)  * vfs.f_bsize;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    info.available_   = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(vfs.f_bavail) * vfs.f_bsize;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    info.available_ = 0;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    info.capacity_ = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    info.free_ = 0;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gafe48dfc9198eee44e96373833feb0e21_cgraph.png" border="0" usemap="#group__FILESYSTEM_gafe48dfc9198eee44e96373833feb0e21_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_gafe48dfc9198eee44e96373833feb0e21_cgraph" id="group__FILESYSTEM_gafe48dfc9198eee44e96373833feb0e21_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="175,5,325,32"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaaa833e3af93824a2485400b32dab7bcd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FileStatus foedus::fs::status </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classfoedus_1_1fs_1_1Path.html">Path</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the status of the file. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00045">45</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>References <a class="el" href="path_8hpp_source.html#l00064">foedus::fs::Path::c_str()</a>, <a class="el" href="filesystem_8hpp_source.html#l00042">foedus::fs::kDirectoryFile</a>, <a class="el" href="filesystem_8hpp_source.html#l00040">foedus::fs::kFileNotFound</a>, <a class="el" href="filesystem_8hpp_source.html#l00041">foedus::fs::kRegularFile</a>, <a class="el" href="filesystem_8hpp_source.html#l00039">foedus::fs::kStatusError</a>, and <a class="el" href="filesystem_8hpp_source.html#l00043">foedus::fs::kTypeUnknown</a>.</p>

<p>Referenced by <a class="el" href="sequential__composer__impl_8cpp_source.html#l00154">foedus::storage::sequential::SequentialComposer::compose()</a>, <a class="el" href="assorted__func_8cpp_source.html#l00151">foedus::assorted::demangle_type_name()</a>, <a class="el" href="filesystem_8hpp_source.html#l00128">foedus::fs::exists()</a>, <a class="el" href="log__mapper__impl_8cpp_source.html#l00140">foedus::snapshot::LogMapper::handle_process()</a>, <a class="el" href="soc__manager__pimpl_8cpp_source.html#l00086">foedus::soc::SocManagerPimpl::initialize_master()</a>, <a class="el" href="engine__pimpl_8cpp_source.html#l00096">foedus::EnginePimpl::initialize_once()</a>, <a class="el" href="merge__sort_8cpp_source.html#l00093">foedus::snapshot::MergeSort::initialize_once()</a>, <a class="el" href="filesystem_8hpp_source.html#l00133">foedus::fs::is_directory()</a>, <a class="el" href="filesystem_8hpp_source.html#l00138">foedus::fs::is_regular_file()</a>, <a class="el" href="filesystem_8cpp_source.html#l00132">foedus::fs::remove()</a>, <a class="el" href="soc__manager__pimpl_8cpp_source.html#l00067">foedus::soc::SocManagerPimpl::report_engine_fatal_error()</a>, <a class="el" href="soc__manager__pimpl_8cpp_source.html#l00152">foedus::soc::SocManagerPimpl::wait_for_child_attach()</a>, <a class="el" href="soc__manager__pimpl_8cpp_source.html#l00228">foedus::soc::SocManagerPimpl::wait_for_child_terminate()</a>, <a class="el" href="soc__manager__pimpl_8cpp_source.html#l00360">foedus::soc::SocManagerPimpl::wait_for_children_module()</a>, and <a class="el" href="soc__manager__pimpl_8cpp_source.html#l00327">foedus::soc::SocManagerPimpl::wait_for_master_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                 {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">struct </span>stat path_stat;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordtype">int</span> ret = ::stat(p.c_str(), &amp;path_stat);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// This is quite normal as we use this to check if a file exists. No message for it.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span> (errno == ENOENT || errno == ENOTDIR) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keywordflow">return</span> FileStatus(<a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7">kFileNotFound</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> FileStatus(<a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2">kStatusError</a>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISDIR(path_stat.st_mode)) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> FileStatus(<a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4">kDirectoryFile</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (S_ISREG(path_stat.st_mode)) {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">return</span> FileStatus(<a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928">kRegularFile</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordflow">return</span> FileStatus(<a class="code" href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65">kTypeUnknown</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa2a2bde77d0f04639d8e7caaf0a331b65">foedus::fs::kTypeUnknown</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00043">filesystem.hpp:43</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fab6c7514c9b07689e31b5fec72b5905b7">foedus::fs::kFileNotFound</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00040">filesystem.hpp:40</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25fa11d2ffc697743972b74688e52baaf928">foedus::fs::kRegularFile</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00041">filesystem.hpp:41</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf52b20d313092f33d1ff9860a9fd81b2">foedus::fs::kStatusError</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00039">filesystem.hpp:39</a></div></div>
<div class="ttc" id="namespacefoedus_1_1fs_html_ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4"><div class="ttname"><a href="namespacefoedus_1_1fs.html#ga2cb359324242a11b65b9a4b999f2a25faf4300927b4ba3b6d3036c36b6b51d5a4">foedus::fs::kDirectoryFile</a></div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8hpp_source.html#l00042">filesystem.hpp:42</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_cgraph.png" border="0" usemap="#group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_cgraph" alt=""/></div>
<map name="group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_cgraph" id="group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_cgraph">
<area shape="rect" id="node2" href="classfoedus_1_1fs_1_1Path.html#a821cee2f2cec808d90e187513064f40f" title="foedus::fs::Path::c_str" alt="" coords="176,5,327,32"/>
</map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_icgraph.png" border="0" usemap="#group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_icgraph" id="group__FILESYSTEM_gaaa833e3af93824a2485400b32dab7bcd_icgraph">
<area shape="rect" id="node2" href="classfoedus_1_1storage_1_1sequential_1_1SequentialComposer.html#a3e005713f9a1c12bb2a4771a192b47a5" title="foedus::storage::sequential\l::SequentialComposer::compose" alt="" coords="176,43,387,84"/>
<area shape="rect" id="node4" href="group__ASSORTED.html#gaaaeeef9a7bd86c89f96e337fdd88caab" title="Demangle the given C++ type name if possible (otherwise the original string). " alt="" coords="190,177,373,219"/>
<area shape="rect" id="node11" href="group__FILESYSTEM.html#ga4f8f53901e9c98fce72b6b3c52cf83a4" title="Returns if the file exists. " alt="" coords="221,618,342,645"/>
<area shape="rect" id="node14" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a3dd3a524e5fbb0b8f9cb52dd21689d0a" title="Called as part of initialize_once() if this is a master engine. " alt="" coords="1237,1192,1440,1233"/>
<area shape="rect" id="node30" href="classfoedus_1_1snapshot_1_1LogMapper.html#a661014d4832400f072544ff4b7e74a45" title="Implements the specific logics in derived class. " alt="" coords="185,957,378,999"/>
<area shape="rect" id="node31" href="classfoedus_1_1EnginePimpl.html#a15c27fd38d4219abdf0b2deb5e5f365c" title="foedus::EnginePimpl\l::initialize_once" alt="" coords="751,1331,892,1372"/>
<area shape="rect" id="node32" href="classfoedus_1_1snapshot_1_1MergeSort.html#a990f4ab6b1e22a9ec86184c402decd15" title="foedus::snapshot::MergeSort\l::initialize_once" alt="" coords="187,1075,376,1116"/>
<area shape="rect" id="node33" href="group__FILESYSTEM.html#ga87c90d834f65aad6f7b6540ae226f305" title="Returns if the file is a directory. " alt="" coords="475,906,628,933"/>
<area shape="rect" id="node36" href="group__FILESYSTEM.html#ga17ed5fb221648976114e4320e8dc7185" title="Returns if the file is a regular file. " alt="" coords="199,1191,364,1218"/>
<area shape="rect" id="node37" href="group__FILESYSTEM.html#gad1f62b080fa246b5f8c166f44c72134f" title="Deletes a regular file or an empty directory. " alt="" coords="218,1023,345,1050"/>
<area shape="rect" id="node39" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a36ec21a4c2b374ce071755a8b2696e3a" title="foedus::soc::SocManagerPimpl\l::report_engine_fatal_error" alt="" coords="180,1293,383,1335"/>
<area shape="rect" id="node41" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a998409bf9e2aff10ec8dfb02f17bb956" title="Wait for child SOCs to start up and at least finish attaching shared memory. " alt="" coords="720,1245,923,1287"/>
<area shape="rect" id="node45" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#afa01a52797a06b55092eeb900a7f62ef" title="Wait for child SOCs to terminate. " alt="" coords="180,1411,383,1452"/>
<area shape="rect" id="node47" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#ab34e312e55cd449909c9096b45c200fe" title="foedus::soc::SocManagerPimpl\l::wait_for_children_module" alt="" coords="180,1476,383,1517"/>
<area shape="rect" id="node49" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1e8d5c98af1d33d7a77a05503eedc7be" title="foedus::soc::SocManagerPimpl\l::wait_for_master_module" alt="" coords="180,1541,383,1583"/>
<area shape="rect" id="node3" href="classfoedus_1_1storage_1_1Composer.html#a28c752ec784b85418c0bfafab7ee60c0" title="Construct snapshot pages from sorted run files of one storage. " alt="" coords="462,5,641,47"/>
<area shape="rect" id="node5" href="group__ASSORTED.html#ga8987f6c9cf72dc6468cc7c798b96cd42" title="Returns the name of the C++ type as readable as possible. " alt="" coords="479,71,623,112"/>
<area shape="rect" id="node7" href="structfoedus_1_1assorted_1_1BacktraceContext.html#a81b13dea0366cfd6550ac20185e2abba" title="foedus::assorted::Backtrace\lContext::get_results" alt="" coords="729,209,914,251"/>
<area shape="rect" id="node9" href="structfoedus_1_1assorted_1_1BacktraceContext_1_1GlibcBacktraceInfo.html#a0b04cb8aaae8c393146f430ee8fec8e4" title="foedus::assorted::Backtrace\lContext::GlibcBacktraceInfo\l::parse_symbol" alt="" coords="459,137,644,193"/>
<area shape="rect" id="node6" href="structfoedus_1_1externalize_1_1Externalizable.html#aa244cc67103f063ec614c7183e9a845f" title="vector version " alt="" coords="751,63,892,119"/>
<area shape="rect" id="node8" href="namespacefoedus_1_1assorted.html#aa2bd2568f3a2851d781b7e141073412f" title="Returns the backtrace information of the current stack. " alt="" coords="1010,177,1154,219"/>
<area shape="rect" id="node10" href="structfoedus_1_1assorted_1_1BacktraceContext.html#a3e70d52451e788dc085aec8bacdfad60" title="foedus::assorted::Backtrace\lContext::call_glibc_backtrace" alt="" coords="725,144,918,185"/>
<area shape="rect" id="node12" href="classfoedus_1_1memory_1_1SharedMemory.html#ae4b91eee2dce03e4b3aac612c71b88a0" title="Newly allocate a shared memory of given size on given NUMA node. " alt="" coords="716,1075,927,1116"/>
<area shape="rect" id="node16" href="classfoedus_1_1memory_1_1SharedMemory.html#a690fd766729121b64adf28994a8a6660" title="Attach an already&#45;allocated shared memory so that this object points to the memory. " alt="" coords="716,1009,927,1051"/>
<area shape="rect" id="node18" href="group__FILESYSTEM.html#gaca1dd0a627c83ff76e30603ea67c4816" title="Recursive mkdir (mkdirs). " alt="" coords="490,640,613,681"/>
<area shape="rect" id="node19" href="classfoedus_1_1log_1_1MetaLogger.html#a5a3484d094947ced0a08a5e162f08a88" title="foedus::log::MetaLogger\l::initialize_once" alt="" coords="1001,588,1163,629"/>
<area shape="rect" id="node20" href="classfoedus_1_1log_1_1LogManagerPimpl.html#a8b2cfe458668cc3f8cf4ccbfeab179dc" title="foedus::log::LogManagerPimpl\l::initialize_once" alt="" coords="723,457,920,499"/>
<area shape="rect" id="node21" href="classfoedus_1_1fs_1_1DirectIoFile.html#aaa3c1e50680d02783b61f5fe23f98b14" title="Tries to open the file for the specified volume. " alt="" coords="746,523,897,564"/>
<area shape="rect" id="node22" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="1009,693,1155,749"/>
<area shape="rect" id="node23" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="1258,391,1419,447"/>
<area shape="rect" id="node24" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="1247,802,1431,858"/>
<area shape="rect" id="node27" href="structfoedus_1_1externalize_1_1Externalizable.html#a6f66d8519bcfee0a582cae47a822fe18" title="Load the content of this object from the specified XML file. " alt="" coords="479,275,623,331"/>
<area shape="rect" id="node29" href="structfoedus_1_1storage_1_1MetadataSerializer.html#a83f2453d6adbfbc52375d8c02d0cb24a" title="foedus::storage::Metadata\lSerializer::save_all_storages_to_xml" alt="" coords="435,356,668,397"/>
<area shape="rect" id="node13" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#aa42d7f6cd529569e79e4cfc298adb39b" title="Master process creates shared memories by calling this method. " alt="" coords="975,1075,1189,1116"/>
<area shape="rect" id="node15" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#aa14e68e8b8e3902f2b139b6388e712d8" title="foedus::soc::SocManagerPimpl\l::initialize_once" alt="" coords="1488,1192,1691,1233"/>
<area shape="rect" id="node17" href="classfoedus_1_1soc_1_1SharedMemoryRepo.html#a4b6032d62764c145607306973945bb8c" title="Child processes (emulated or not) set a reference to shared memory and receive the EngnieOption value..." alt="" coords="979,1009,1185,1051"/>
<area shape="rect" id="node25" href="classfoedus_1_1log_1_1Logger.html#a3b1d647f1458d1172a511b7e57a2a237" title="foedus::log::Logger\l::initialize_once" alt="" coords="1016,457,1148,499"/>
<area shape="rect" id="node26" href="classfoedus_1_1snapshot_1_1SnapshotWriter.html#a7d71f940f088efa51d0b5769d4fdd31f" title="Open the file so that the writer can start writing. " alt="" coords="990,523,1174,564"/>
<area shape="rect" id="node28" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a12f213f8bc7b46e75428a7624999c3fd" title="foedus::snapshot::Snapshot\lManagerPimpl::read_snapshot\l_metadata" alt="" coords="722,275,921,331"/>
<area shape="rect" id="node34" href="classfoedus_1_1fs_1_1Path.html#a080a0053aa2d32ca6547d8e5d3474486" title="foedus::fs::Path::child\l_paths" alt="" coords="747,944,895,985"/>
<area shape="rect" id="node35" href="group__FILESYSTEM.html#ga08865450d848cb894243005bdd226d1e" title="Makes the content and metadata of the file durable all the way up to devices. " alt="" coords="763,893,880,919"/>
<area shape="rect" id="node38" href="classfoedus_1_1memory_1_1SharedMemory.html#a20f2fb7b7f86ab5c4134452f1267eeb5" title="Releases the memory block IF this process has an ownership. " alt="" coords="446,1016,657,1057"/>
<area shape="rect" id="node40" href="classfoedus_1_1soc_1_1SocManager.html#abffe61e3c3cd7959937bf3f81b4579d7" title="Announce fatal error state of this (either master or child) engine if possible. " alt="" coords="465,1293,637,1335"/>
<area shape="rect" id="node42" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a77d275f92471e6ac9e0c4bb4c609665f" title="Launch emulated children as threads. " alt="" coords="981,1192,1183,1233"/>
<area shape="rect" id="node43" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#ad9ef70c0b175a6535731e2cf0c2370f1" title="Launch children via fork. " alt="" coords="981,1257,1183,1299"/>
<area shape="rect" id="node44" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a4a9091baae2ba21b2cb888da8d391818" title="Launch children via spawn. " alt="" coords="981,1323,1183,1364"/>
<area shape="rect" id="node46" href="classfoedus_1_1soc_1_1SocManagerPimpl.html#a1d435277bd229b7988c3f249c0a0730f" title="foedus::soc::SocManagerPimpl\l::uninitialize_once" alt="" coords="450,1411,653,1452"/>
<area shape="rect" id="node48" href="classfoedus_1_1soc_1_1SocManager.html#a7a9cd36f9f5daf08d2424026f611dc11" title="Wait for other engines to finish init/uninit the module. " alt="" coords="464,1476,639,1517"/>
<area shape="rect" id="node50" href="classfoedus_1_1soc_1_1SocManager.html#a73369a529df5147ddacd8d749ae2e002" title="Wait for master engine to finish init/uninit the module. " alt="" coords="466,1541,637,1583"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga3bc4f808e645c94d80e86221b0d32301"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::fs::unique_name </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>differentiator</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Equivalent to unique_path("%%%%-%%%%-%%%%-%%%%"). </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00174">174</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>

<p>Referenced by <a class="el" href="externalizable_8cpp_source.html#l00096">foedus::externalize::Externalizable::save_to_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                               {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="group__FILESYSTEM.html#ga3bc4f808e645c94d80e86221b0d32301">unique_name</a>(<span class="stringliteral">&quot;%%%%-%%%%-%%%%-%%%%&quot;</span>, differentiator);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="ttc" id="group__FILESYSTEM_html_ga3bc4f808e645c94d80e86221b0d32301"><div class="ttname"><a href="group__FILESYSTEM.html#ga3bc4f808e645c94d80e86221b0d32301">foedus::fs::unique_name</a></div><div class="ttdeci">std::string unique_name(uint64_t differentiator=0)</div><div class="ttdoc">Equivalent to unique_path("%%%%-%%%%-%%%%-%%%%"). </div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00174">filesystem.cpp:174</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group__FILESYSTEM_ga3bc4f808e645c94d80e86221b0d32301_icgraph.png" border="0" usemap="#group__FILESYSTEM_ga3bc4f808e645c94d80e86221b0d32301_icgraph" alt=""/></div>
<map name="group__FILESYSTEM_ga3bc4f808e645c94d80e86221b0d32301_icgraph" id="group__FILESYSTEM_ga3bc4f808e645c94d80e86221b0d32301_icgraph">
<area shape="rect" id="node2" href="structfoedus_1_1externalize_1_1Externalizable.html#af4e4989a732573c1bbd538a3fbfad930" title="Atomically and durably writes out this object to the specified XML file. " alt="" coords="216,37,363,93"/>
<area shape="rect" id="node3" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ad75cdea74e547a1f66d62b85a938a2cd" title="foedus::savepoint::\lSavepointManagerPimpl\l::initialize_once" alt="" coords="667,5,829,61"/>
<area shape="rect" id="node4" href="classfoedus_1_1savepoint_1_1SavepointManagerPimpl.html#ae5e8a2671c819fc0ada038b3fa47105a" title="foedus::savepoint::\lSavepointManagerPimpl\l::savepoint_main" alt="" coords="422,37,583,93"/>
<area shape="rect" id="node5" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a4ae6b016213cb70bb6e5df636b24d129" title="Sub&#45;routine of handle_snapshot_triggered(). " alt="" coords="411,117,595,173"/>
<area shape="rect" id="node6" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a905ccf76fe0e076980dc1965f038fe10" title="handle_snapshot() calls this when it should start snapshotting. " alt="" coords="643,117,853,173"/>
<area shape="rect" id="node7" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a8c5418a3e6d3558aa3920a605834df08" title="Recover the state of database from recent snapshot files and transaction logs. " alt="" coords="929,91,1084,133"/>
<area shape="rect" id="node9" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a64e3c7594b7d7d0d5f8a144bd802d910" title="Main routine for snapshot_thread_ in master engine. " alt="" coords="901,157,1112,198"/>
<area shape="rect" id="node8" href="classfoedus_1_1restart_1_1RestartManagerPimpl.html#a868dca9015af77e04202ead68fd7a136" title="foedus::restart::Restart\lManagerPimpl::initialize_once" alt="" coords="1160,91,1355,133"/>
<area shape="rect" id="node10" href="classfoedus_1_1snapshot_1_1SnapshotManagerPimpl.html#a632a4da7b3c67dd687f7eba4f6ec1d76" title="foedus::snapshot::Snapshot\lManagerPimpl::initialize_once" alt="" coords="1160,157,1355,198"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6f713a354acc587b14576b14d721b1f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string foedus::fs::unique_name </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>differentiator</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a randomly generated file name with the given template. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">model</td><td>file name template where % will be replaced with random hex numbers. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">differentiator</td><td>optional parameter to further randomize this method.</td></tr>
  </table>
  </dd>
</dl>
<p>We use std::chrono::high_resolution_clock::now() to get a random seed. <b>However</b>, even high_resolution_clock sometimes has low precision depending on environment. When you are concerned with a conflict (eg running many concurrent testcases), also give a differentiator. </p>

<p>Definition at line <a class="el" href="filesystem_8cpp_source.html#l00177">177</a> of file <a class="el" href="filesystem_8cpp_source.html">filesystem.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                                                                       {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* kHexChars = <span class="stringliteral">&quot;0123456789abcdef&quot;</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  uint64_t seed64 = std::chrono::high_resolution_clock::now().time_since_epoch().count();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  seed64 += ::getpid();  <span class="comment">// further use process ID to randomize. may help.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  seed64 ^= differentiator;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  uint32_t seed32 = (seed64 &gt;&gt; 32) ^ seed64;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  std::string s(model);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; s.size(); ++i) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (s[i] == <span class="charliteral">&#39;%&#39;</span>) {                 <span class="comment">// digit request</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      seed32 = ::rand_r(&amp;seed32);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      s[i] = kHexChars[seed32 &amp; 0xf];  <span class="comment">// convert to hex digit and replace</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
