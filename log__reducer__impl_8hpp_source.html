<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>libfoedus-core: /home/shino/foedus_code/foedus-core/include/foedus/snapshot/log_reducer_impl.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libfoedus-core
   </div>
   <div id="projectbrief">FOEDUS Core Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/centos7/"><span>Jenkins&#160;(x86_64&#160;Fedora)</span></a></li>
      <li><a href="http://cihead.labs.hpe.com/ub1404/"><span>Jenkins&#160;(x86_64&#160;Ubuntu)</span></a></li>
      <li><a href="http://ms01915-003.hpl.hp.com:8080/"><span>Jenkins&#160;(aarch64&#160;Ubuntu)</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/tree/master"><span>Github</span></a></li>
      <li><a href="http://github.com/hkimura/foedus_code/wiki"><span>Wiki</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('log__reducer__impl_8hpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">log_reducer_impl.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="log__reducer__impl_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2014-2015, Hewlett-Packard Development Company, LP.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * This program is free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * under the terms of the GNU General Public License as published by the Free</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Software Foundation; either version 2 of the License, or (at your option)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * This program is distributed in the hope that it will be useful, but WITHOUT</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * more details. You should have received a copy of the GNU General Public</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * License along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * HP designates this particular file as subject to the &quot;Classpath&quot; exception</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * as provided by HP in the LICENSE.txt file that accompanied this code.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#ifndef FOEDUS_SNAPSHOT_LOG_REDUCER_IMPL_HPP_</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#define FOEDUS_SNAPSHOT_LOG_REDUCER_IMPL_HPP_</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;atomic&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;iosfwd&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="attachable_8hpp.html">foedus/attachable.hpp</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fwd_8hpp.html">foedus/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="initializable_8hpp.html">foedus/initializable.hpp</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cacheline_8hpp.html">foedus/assorted/cacheline.hpp</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__atomics_8hpp.html">foedus/assorted/raw_atomics.hpp</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot__file__set_8hpp.html">foedus/cache/snapshot_file_set.hpp</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fs_2fwd_8hpp.html">foedus/fs/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="path_8hpp.html">foedus/fs/path.hpp</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_2fwd_8hpp.html">foedus/log/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log__id_8hpp.html">foedus/log/log_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="aligned__memory_8hpp.html">foedus/memory/aligned_memory.hpp</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot_2fwd_8hpp.html">foedus/snapshot/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log__reducer__ref_8hpp.html">foedus/snapshot/log_reducer_ref.hpp</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mapreduce__base__impl_8hpp.html">foedus/snapshot/mapreduce_base_impl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot__id_8hpp.html">foedus/snapshot/snapshot_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="snapshot__writer__impl_8hpp.html">foedus/snapshot/snapshot_writer_impl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shared__cond_8hpp.html">foedus/soc/shared_cond.hpp</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="shared__memory__repo_8hpp.html">foedus/soc/shared_memory_repo.hpp</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage_2fwd_8hpp.html">foedus/storage/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="storage__id_8hpp.html">foedus/storage/storage_id.hpp</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="condition__variable__impl_8hpp.html">foedus/thread/condition_variable_impl.hpp</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="thread_2fwd_8hpp.html">foedus/thread/fwd.hpp</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacefoedus.html">foedus</a> {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">namespace </span>snapshot {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0">   55</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0">ReducerConstants</a> {</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0aff1acff80c35cb454d09cdd425e7f1a7">   60</a></span>&#160;  <a class="code" href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0aff1acff80c35cb454d09cdd425e7f1a7">kFlagNoMoreWriters</a> = 0x0001,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;};</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">   69</a></span>&#160;<span class="keyword">union </span><a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">ReducerBufferStatus</a> {</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#af9722c3bae7835c04e11ad7469e8b0cd">   70</a></span>&#160;  uint64_t <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#af9722c3bae7835c04e11ad7469e8b0cd">word</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="group__SNAPSHOT.html">   71</a></span>&#160;  <span class="keyword">struct </span><a class="code" href="group__SNAPSHOT.html#structfoedus_1_1snapshot_1_1ReducerBufferStatus_1_1Components">Components</a> {</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="group__SNAPSHOT.html#a1bb6dc9193b46847d47c1c68c1f1fea7">   72</a></span>&#160;    uint16_t        <a class="code" href="group__SNAPSHOT.html#a1bb6dc9193b46847d47c1c68c1f1fea7">active_writers_</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="group__SNAPSHOT.html#a90ca730fb707345d1d69bc0e4bfe7ff9">   73</a></span>&#160;    uint16_t        <a class="code" href="group__SNAPSHOT.html#a90ca730fb707345d1d69bc0e4bfe7ff9">flags_</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="group__SNAPSHOT.html#af04897d1e53bd495598781eacddd253b">   74</a></span>&#160;    <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">BufferPosition</a>  <a class="code" href="group__SNAPSHOT.html#af04897d1e53bd495598781eacddd253b">tail_position_</a>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  } <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#acf1de9dfdc97fdfc44bfdde0237b39c7">components</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#add166bd2377a5f285d5f4d184c2f1829">   77</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#add166bd2377a5f285d5f4d184c2f1829">is_no_more_writers</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#acf1de9dfdc97fdfc44bfdde0237b39c7">components</a>.<a class="code" href="group__SNAPSHOT.html#a90ca730fb707345d1d69bc0e4bfe7ff9">flags_</a> &amp; <a class="code" href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0aff1acff80c35cb454d09cdd425e7f1a7">kFlagNoMoreWriters</a>) != 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#a56e3bf6d9682880703bd381a35ba2289">   80</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#a56e3bf6d9682880703bd381a35ba2289">is_clear</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> word == 0; }</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#ae90337c08524763770e87bcaeb520c35">   81</a></span>&#160;  uint16_t <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#ae90337c08524763770e87bcaeb520c35">get_active_writers</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#acf1de9dfdc97fdfc44bfdde0237b39c7">components</a>.<a class="code" href="group__SNAPSHOT.html#a1bb6dc9193b46847d47c1c68c1f1fea7">active_writers_</a>; }</div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#ac9bfa8c81d7bdd875703387622b38ccc">   82</a></span>&#160;  <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">BufferPosition</a> <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#ac9bfa8c81d7bdd875703387622b38ccc">get_tail_position</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#acf1de9dfdc97fdfc44bfdde0237b39c7">components</a>.<a class="code" href="group__SNAPSHOT.html#af04897d1e53bd495598781eacddd253b">tail_position_</a>; }</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#a0a0ef4ca2f2ebeb8bf9fbea20ba8a914">   83</a></span>&#160;  uint64_t <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#a0a0ef4ca2f2ebeb8bf9fbea20ba8a914">get_tail_bytes</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a">from_buffer_position</a>(<a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#acf1de9dfdc97fdfc44bfdde0237b39c7">components</a>.<a class="code" href="group__SNAPSHOT.html#af04897d1e53bd495598781eacddd253b">tail_position_</a>); }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;};</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html">   93</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html">BlockHeaderBase</a> {</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82">   94</a></span>&#160;  <span class="keyword">enum</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82">Constants</a> {</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1">   96</a></span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1">kFullBlockHeaderMagicWord</a> = 0xDEADBEEF,</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7">   98</a></span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7">kFillerBlockHeaderMagicWord</a> = 0x8BADF00D,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  };</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a91a613671f2cfdbc32f50dcfef1af345">  100</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a91a613671f2cfdbc32f50dcfef1af345">is_full_block</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a> == <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1">kFullBlockHeaderMagicWord</a></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      || <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a> == <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7">kFillerBlockHeaderMagicWord</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a> == <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1">kFullBlockHeaderMagicWord</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#aac854ef965de2120aa2e11145bb83b82">  105</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#aac854ef965de2120aa2e11145bb83b82">is_filler</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(<a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a> == <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1">kFullBlockHeaderMagicWord</a></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      || <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a> == <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7">kFillerBlockHeaderMagicWord</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a> == <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7">kFillerBlockHeaderMagicWord</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keyword">friend</span> std::ostream&amp; <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a954010c93455e8509468ca02a68c0a9f">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html">BlockHeaderBase</a>&amp; v);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">  117</a></span>&#160;  uint32_t            <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">magic_word_</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#adbd0a3b5abc04a6a141df09c2830f105">  119</a></span>&#160;  <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">BufferPosition</a>      <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#adbd0a3b5abc04a6a141df09c2830f105">block_length_</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;};</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html">  128</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html">FullBlockHeader</a> : <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html">BlockHeaderBase</a> {</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aa13c862cf8f9b5d84cc88087080c9bb3">  129</a></span>&#160;  <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>  <a class="code" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aa13c862cf8f9b5d84cc88087080c9bb3">storage_id_</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aec9f296f5c3beb867e4d13e2d8fd2629">  130</a></span>&#160;  uint32_t            <a class="code" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aec9f296f5c3beb867e4d13e2d8fd2629">log_count_</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#a068983007ba6db97f2ed7f4cd31ec5b0">  132</a></span>&#160;  uint32_t            <a class="code" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#a068983007ba6db97f2ed7f4cd31ec5b0">shortest_key_length_</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#ae8513482abdd59fcf0118f068d233de8">  134</a></span>&#160;  uint32_t            <a class="code" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#ae8513482abdd59fcf0118f068d233de8">longest_key_length_</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aaa94c0c5f6d325b21654123b5179c35c">  135</a></span>&#160;  <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aaa94c0c5f6d325b21654123b5179c35c">assert_key_length</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(shortest_key_length_ &gt; 0);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a>(shortest_key_length_ &lt;= longest_key_length_);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  }</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;};</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1FillerBlockHeader.html">  152</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1snapshot_1_1FillerBlockHeader.html">FillerBlockHeader</a> : <span class="keyword">public</span> <a class="code" href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html">BlockHeaderBase</a> {};</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html">  159</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html">LogReducerControlBlock</a> {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// this is backed by shared memory. not instantiation. just reinterpret_cast.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#acf236c887790f5e74bf6a7caf209a992">LogReducerControlBlock</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a196fa099a7679822e3535c290eae4351">~LogReducerControlBlock</a>() = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a966d8e3e1ef26127add6b515174599b2">  164</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a966d8e3e1ef26127add6b515174599b2">initialize</a>() {</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a10138591711bd165e6605de2b9d43b10">clear</a>();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  }</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a10138591711bd165e6605de2b9d43b10">  167</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a10138591711bd165e6605de2b9d43b10">clear</a>() {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a2e5f8d0f9222e8c716b74edff4afe3b7">current_buffer_</a> = 0;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">buffer_status_</a>[0].store(0U);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">buffer_status_</a>[1].store(0U);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a54a1ec2612036dcdfa7513949eb861ff">total_storage_count_</a> = 0;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  }</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a380a05209f90e3b273f9904d7bd1fc33">  173</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a380a05209f90e3b273f9904d7bd1fc33">uninitialize</a>() {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a7c8feb59a8368bdae9ffea4b2e3fa8e8">  176</a></span>&#160;  <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">ReducerBufferStatus</a> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a7c8feb59a8368bdae9ffea4b2e3fa8e8">get_buffer_status_atomic</a>(uint32_t index)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">ReducerBufferStatus</a> ret;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    ret.<a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#af9722c3bae7835c04e11ad7469e8b0cd">word</a> = <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">buffer_status_</a>[index % 2].load();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a35ab8a50220c6e05a6c9685d74fd461c">  181</a></span>&#160;  std::atomic&lt;uint64_t&gt;* <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a35ab8a50220c6e05a6c9685d74fd461c">get_buffer_status_address</a>(uint32_t index) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">buffer_status_</a>[index % 2];</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a6612d60371c0574a953a66da6b929471">  185</a></span>&#160;  <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">ReducerBufferStatus</a> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a6612d60371c0574a953a66da6b929471">get_current_buffer_status</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a7c8feb59a8368bdae9ffea4b2e3fa8e8">get_buffer_status_atomic</a>(<a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a2e5f8d0f9222e8c716b74edff4afe3b7">current_buffer_</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#adfcf739cfe0fac8aa7c5eca80c8f684b">  188</a></span>&#160;  <a class="code" href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">ReducerBufferStatus</a> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#adfcf739cfe0fac8aa7c5eca80c8f684b">get_non_current_buffer_status</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a7c8feb59a8368bdae9ffea4b2e3fa8e8">get_buffer_status_atomic</a>(<a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a2e5f8d0f9222e8c716b74edff4afe3b7">current_buffer_</a> + 1U);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">  196</a></span>&#160;  std::atomic&lt;uint64_t&gt; <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">buffer_status_</a>[2];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a2e5f8d0f9222e8c716b74edff4afe3b7">  202</a></span>&#160;  std::atomic&lt;uint32_t&gt; <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a2e5f8d0f9222e8c716b74edff4afe3b7">current_buffer_</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a54a1ec2612036dcdfa7513949eb861ff">  209</a></span>&#160;  std::atomic&lt;uint32_t&gt; <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a54a1ec2612036dcdfa7513949eb861ff">total_storage_count_</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#af2a537aa1d0ef7b0c08d9f9c736e1cab">  212</a></span>&#160;  uint16_t              <a class="code" href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#af2a537aa1d0ef7b0c08d9f9c736e1cab">id_</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;};</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="classfoedus_1_1snapshot_1_1LogReducer.html">  293</a></span>&#160;<span class="keyword">class </span><a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html">LogReducer</a> final : <span class="keyword">public</span> <a class="code" href="classfoedus_1_1snapshot_1_1MapReduceBase.html">MapReduceBase</a> {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; <span class="keyword">public</span>:</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="keyword">explicit</span> <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html#addaf1ec8c392fb0384c0ae90e46a1b34">LogReducer</a>(<a class="code" href="classfoedus_1_1Engine.html">Engine</a>* engine);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html#a2f5f2664fee7cafc37ad28a657e37e9c">initialize_once</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html#a9dc30e3460f4d9e5a9fb56f8bd20f0c2">uninitialize_once</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="classfoedus_1_1snapshot_1_1LogReducer.html#a87f87c814bddb6a113be600ed415d92c">  300</a></span>&#160;  std::string <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html#a87f87c814bddb6a113be600ed415d92c">to_string</a>()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> std::string(<span class="stringliteral">&quot;Reducer-&quot;</span>) + std::to_string(<a class="code" href="classfoedus_1_1snapshot_1_1MapReduceBase.html#ad999cfc08cc7d7072ae6e0ed73651fca">id_</a>); }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keyword">friend</span> std::ostream&amp;    <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html#a0f46ae94b8c2f43b2dcae4b4eed6438b">operator&lt;&lt;</a>(std::ostream&amp; o, <span class="keyword">const</span> <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html">LogReducer</a>&amp; v);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  <a class="code" href="classfoedus_1_1snapshot_1_1LogReducer.html#a09b348c18e707b626d9873a7a69fbfc7">handle_process</a>() <span class="keyword">override</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">struct </span>MergeContext {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keyword">explicit</span> MergeContext(uint32_t dumped_files_count_);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    ~MergeContext();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">const</span> uint32_t                            dumped_files_count_;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a>                     io_memory_;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    std::vector&lt; memory::AlignedMemorySlice &gt; io_buffers_;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    std::vector&lt; std::unique_ptr&lt;SortedBuffer&gt; &gt;  sorted_buffers_;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    std::vector&lt; std::unique_ptr&lt;fs::DirectIoFile&gt; &gt; sorted_files_auto_ptrs_;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classfoedus_1_1snapshot_1_1SortedBuffer.html">SortedBuffer</a>**                          tmp_sorted_buffer_array_;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    uint32_t                                tmp_sorted_buffer_count_;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>  get_min_storage_id() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordtype">void</span>                set_tmp_sorted_buffer_array(<a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  };</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  LogReducerControlBlock* control_block_;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">void</span>*                   buffers_[2];</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  uint64_t                buffer_half_size_bytes_;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="structfoedus_1_1storage_1_1Page.html">storage::Page</a>*          root_info_pages_;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="classfoedus_1_1cache_1_1SnapshotFileSet.html">cache::SnapshotFileSet</a>  previous_snapshot_files_;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a>   dump_io_buffer_;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a>   sort_buffer_;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a>   positions_buffers_;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">memory::AlignedMemorySlice</a> input_positions_slice_;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">memory::AlignedMemorySlice</a> output_positions_slice_;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a>   writer_pool_memory_;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a>   writer_intermediate_memory_;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  uint32_t      sorted_runs_;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordtype">void</span> expand_if_needed(</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    uint64_t required_size,</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="classfoedus_1_1memory_1_1AlignedMemory.html">memory::AlignedMemory</a> *memory,</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">const</span> std::string&amp; name);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">void</span> expand_positions_buffers_if_needed(uint64_t required_size_per_buffer);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <a class="code" href="classfoedus_1_1fs_1_1Path.html">fs::Path</a> get_sorted_run_file_path(uint32_t sorted_run) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> dump_buffer();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> dump_buffer_wait_for_writers(uint32_t buffer_index) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordtype">void</span> dump_buffer_scan_block_headers(</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordtype">char</span>* buffer_base,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">BufferPosition</a> tail_position,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    std::map&lt;<a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a>, std::vector&lt;BufferPosition&gt; &gt; *blocks) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> dump_buffer_sort_storage(</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keyword">const</span> LogBuffer &amp;buffer,</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">const</span> std::vector&lt;BufferPosition&gt;&amp; log_positions,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    uint32_t* out_shortest_key_length,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    uint32_t* out_longest_key_length,</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    uint32_t* written_count);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a> dump_buffer_sort_storage_write(</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keyword">const</span> LogBuffer &amp;buffer,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">BufferPosition</a>* sorted_logs,</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    uint32_t shortest_key_length,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    uint32_t longest_key_length,</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    uint32_t log_count,</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="classfoedus_1_1fs_1_1DirectIoFile.html">fs::DirectIoFile</a> *dump_file);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  uint64_t dump_block_header(</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keyword">const</span> LogBuffer &amp;buffer,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> storage_id,</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keyword">const</span> <a class="code" href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">BufferPosition</a>* sorted_logs,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    uint32_t shortest_key_length,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    uint32_t longest_key_length,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    uint32_t log_count,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordtype">void</span>* destination) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  merge_sort();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordtype">void</span>        merge_sort_check_buffer_status() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  merge_sort_dump_last_buffer();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordtype">void</span>        merge_sort_allocate_io_buffers(MergeContext* context) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  merge_sort_open_sorted_runs(MergeContext* context) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <a class="code" href="classfoedus_1_1ErrorStack.html">ErrorStack</a>  merge_sort_initialize_sort_buffers(MergeContext* context) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <a class="code" href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">ErrorCode</a>   merge_sort_advance_sort_buffers(</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    SortedBuffer* buffer,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <a class="code" href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">storage::StorageId</a> processed_storage_id) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  uint32_t    get_max_storage_count() <span class="keyword">const</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;};</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;static_assert(</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keyword">sizeof</span>(LogReducerControlBlock) &lt;= <a class="code" href="structfoedus_1_1soc_1_1NodeMemoryAnchors.html#a8d6fc8477c8fa29fc8bef20b629d7de0a007c4bb27406657ed3002c5d26d87ed0">soc::NodeMemoryAnchors::kLogReducerMemorySize</a>,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="stringliteral">&quot;LogReducerControlBlock is too large.&quot;</span>);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;}  <span class="comment">// namespace snapshot</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}  <span class="comment">// namespace foedus</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="preprocessor">#endif  // FOEDUS_SNAPSHOT_LOG_REDUCER_IMPL_HPP_</span></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_a0a0ef4ca2f2ebeb8bf9fbea20ba8a914"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#a0a0ef4ca2f2ebeb8bf9fbea20ba8a914">foedus::snapshot::ReducerBufferStatus::get_tail_bytes</a></div><div class="ttdeci">uint64_t get_tail_bytes() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00083">log_reducer_impl.hpp:83</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_a954010c93455e8509468ca02a68c0a9f"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a954010c93455e8509468ca02a68c0a9f">foedus::snapshot::BlockHeaderBase::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const BlockHeaderBase &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8cpp_source.html#l00925">log_reducer_impl.cpp:925</a></div></div>
<div class="ttc" id="log__reducer__ref_8hpp_html"><div class="ttname"><a href="log__reducer__ref_8hpp.html">log_reducer_ref.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a35ab8a50220c6e05a6c9685d74fd461c"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a35ab8a50220c6e05a6c9685d74fd461c">foedus::snapshot::LogReducerControlBlock::get_buffer_status_address</a></div><div class="ttdeci">std::atomic&lt; uint64_t &gt; * get_buffer_status_address(uint32_t index)</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00181">log_reducer_impl.hpp:181</a></div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_add166bd2377a5f285d5f4d184c2f1829"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#add166bd2377a5f285d5f4d184c2f1829">foedus::snapshot::ReducerBufferStatus::is_no_more_writers</a></div><div class="ttdeci">bool is_no_more_writers() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00077">log_reducer_impl.hpp:77</a></div></div>
<div class="ttc" id="aligned__memory_8hpp_html"><div class="ttname"><a href="aligned__memory_8hpp.html">aligned_memory.hpp</a></div></div>
<div class="ttc" id="fs_2fwd_8hpp_html"><div class="ttname"><a href="fs_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in filesystem package. </div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html_a2f5f2664fee7cafc37ad28a657e37e9c"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html#a2f5f2664fee7cafc37ad28a657e37e9c">foedus::snapshot::LogReducer::initialize_once</a></div><div class="ttdeci">ErrorStack initialize_once() override</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8cpp_source.html#l00068">log_reducer_impl.cpp:68</a></div></div>
<div class="ttc" id="shared__memory__repo_8hpp_html"><div class="ttname"><a href="shared__memory__repo_8hpp.html">shared_memory_repo.hpp</a></div></div>
<div class="ttc" id="storage__id_8hpp_html"><div class="ttname"><a href="storage__id_8hpp.html">storage_id.hpp</a></div><div class="ttdoc">Definitions of IDs in this package and a few related constant values. </div></div>
<div class="ttc" id="log_2fwd_8hpp_html"><div class="ttname"><a href="log_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in log manager package. </div></div>
<div class="ttc" id="snapshot__id_8hpp_html"><div class="ttname"><a href="snapshot__id_8hpp.html">snapshot_id.hpp</a></div><div class="ttdoc">Typedefs of ID types used in snapshot package. </div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html">foedus::snapshot::ReducerBufferStatus</a></div><div class="ttdoc">Compactly represents important status informations of a reducer buffer. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00069">log_reducer_impl.hpp:69</a></div></div>
<div class="ttc" id="group__STORAGE_html_ga595ca7fc4a3011a9704a883a25141e5f"><div class="ttname"><a href="group__STORAGE.html#ga595ca7fc4a3011a9704a883a25141e5f">foedus::storage::StorageId</a></div><div class="ttdeci">uint32_t StorageId</div><div class="ttdoc">Unique ID for storage. </div><div class="ttdef"><b>Definition:</b> <a href="storage__id_8hpp_source.html#l00055">storage_id.hpp:55</a></div></div>
<div class="ttc" id="namespacefoedus_html"><div class="ttname"><a href="namespacefoedus.html">foedus</a></div><div class="ttdoc">Root package of FOEDUS (Fast Optimistic Engine for Data Unification Services). </div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00044">assert_nd.hpp:44</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a6612d60371c0574a953a66da6b929471"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a6612d60371c0574a953a66da6b929471">foedus::snapshot::LogReducerControlBlock::get_current_buffer_status</a></div><div class="ttdeci">ReducerBufferStatus get_current_buffer_status() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00185">log_reducer_impl.hpp:185</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_structfoedus_1_1snapshot_1_1ReducerBufferStatus_1_1Components"><div class="ttname"><a href="group__SNAPSHOT.html#structfoedus_1_1snapshot_1_1ReducerBufferStatus_1_1Components">foedus::snapshot::ReducerBufferStatus::Components</a></div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00071">log_reducer_impl.hpp:71</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_gad2482840d665e70d93678f530b452b79"><div class="ttname"><a href="group__SNAPSHOT.html#gad2482840d665e70d93678f530b452b79">foedus::snapshot::BufferPosition</a></div><div class="ttdeci">uint32_t BufferPosition</div><div class="ttdoc">Represents a position in some buffer. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__id_8hpp_source.html#l00072">snapshot_id.hpp:72</a></div></div>
<div class="ttc" id="condition__variable__impl_8hpp_html"><div class="ttname"><a href="condition__variable__impl_8hpp.html">condition_variable_impl.hpp</a></div></div>
<div class="ttc" id="fwd_8hpp_html"><div class="ttname"><a href="fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in root package. </div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a2e5f8d0f9222e8c716b74edff4afe3b7"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a2e5f8d0f9222e8c716b74edff4afe3b7">foedus::snapshot::LogReducerControlBlock::current_buffer_</a></div><div class="ttdeci">std::atomic&lt; uint32_t &gt; current_buffer_</div><div class="ttdoc">buffers_[current_buffer_ % 2] is the buffer mappers should append to. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00202">log_reducer_impl.hpp:202</a></div></div>
<div class="ttc" id="classfoedus_1_1ErrorStack_html"><div class="ttname"><a href="classfoedus_1_1ErrorStack.html">foedus::ErrorStack</a></div><div class="ttdoc">Brings error stacktrace information as return value of functions. </div><div class="ttdef"><b>Definition:</b> <a href="error__stack_8hpp_source.html#l00081">error_stack.hpp:81</a></div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_ae90337c08524763770e87bcaeb520c35"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#ae90337c08524763770e87bcaeb520c35">foedus::snapshot::ReducerBufferStatus::get_active_writers</a></div><div class="ttdeci">uint16_t get_active_writers() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00081">log_reducer_impl.hpp:81</a></div></div>
<div class="ttc" id="snapshot_2fwd_8hpp_html"><div class="ttname"><a href="snapshot_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in snapshot manager package. </div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_acf236c887790f5e74bf6a7caf209a992"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#acf236c887790f5e74bf6a7caf209a992">foedus::snapshot::LogReducerControlBlock::LogReducerControlBlock</a></div><div class="ttdeci">LogReducerControlBlock()=delete</div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_acf1de9dfdc97fdfc44bfdde0237b39c7"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#acf1de9dfdc97fdfc44bfdde0237b39c7">foedus::snapshot::ReducerBufferStatus::components</a></div><div class="ttdeci">struct foedus::snapshot::ReducerBufferStatus::Components components</div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1SortedBuffer_html"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1SortedBuffer.html">foedus::snapshot::SortedBuffer</a></div><div class="ttdoc">Represents one input stream of sorted log entries. </div><div class="ttdef"><b>Definition:</b> <a href="log__buffer_8hpp_source.html#l00081">log_buffer.hpp:81</a></div></div>
<div class="ttc" id="namespacefoedus_1_1snapshot_html_a4f25261ad53b056011203342a22b40d0aff1acff80c35cb454d09cdd425e7f1a7"><div class="ttname"><a href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0aff1acff80c35cb454d09cdd425e7f1a7">foedus::snapshot::kFlagNoMoreWriters</a></div><div class="ttdoc">A bit-wise flag in ReducerBufferStatus&#39;s flags_. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00060">log_reducer_impl.hpp:60</a></div></div>
<div class="ttc" id="classfoedus_1_1cache_1_1SnapshotFileSet_html"><div class="ttname"><a href="classfoedus_1_1cache_1_1SnapshotFileSet.html">foedus::cache::SnapshotFileSet</a></div><div class="ttdoc">Holds a set of read-only file objects for snapshot files. </div><div class="ttdef"><b>Definition:</b> <a href="snapshot__file__set_8hpp_source.html#l00052">snapshot_file_set.hpp:52</a></div></div>
<div class="ttc" id="log__id_8hpp_html"><div class="ttname"><a href="log__id_8hpp.html">log_id.hpp</a></div><div class="ttdoc">Typedefs of ID types used in log package. </div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html_a09b348c18e707b626d9873a7a69fbfc7"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html#a09b348c18e707b626d9873a7a69fbfc7">foedus::snapshot::LogReducer::handle_process</a></div><div class="ttdeci">ErrorStack handle_process() override</div><div class="ttdoc">Implements the specific logics in derived class. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8cpp_source.html#l00134">log_reducer_impl.cpp:134</a></div></div>
<div class="ttc" id="shared__cond_8hpp_html"><div class="ttname"><a href="shared__cond_8hpp.html">shared_cond.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_adfcf739cfe0fac8aa7c5eca80c8f684b"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#adfcf739cfe0fac8aa7c5eca80c8f684b">foedus::snapshot::LogReducerControlBlock::get_non_current_buffer_status</a></div><div class="ttdeci">ReducerBufferStatus get_non_current_buffer_status() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00188">log_reducer_impl.hpp:188</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a94579349b70f73665e3603a6e920ef3c"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a94579349b70f73665e3603a6e920ef3c">foedus::snapshot::LogReducerControlBlock::buffer_status_</a></div><div class="ttdeci">std::atomic&lt; uint64_t &gt; buffer_status_[2]</div><div class="ttdoc">Status of the two reducer buffers. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00196">log_reducer_impl.hpp:196</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a7c8feb59a8368bdae9ffea4b2e3fa8e8"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a7c8feb59a8368bdae9ffea4b2e3fa8e8">foedus::snapshot::LogReducerControlBlock::get_buffer_status_atomic</a></div><div class="ttdeci">ReducerBufferStatus get_buffer_status_atomic(uint32_t index) const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00176">log_reducer_impl.hpp:176</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FillerBlockHeader_html"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FillerBlockHeader.html">foedus::snapshot::FillerBlockHeader</a></div><div class="ttdoc">A header for a dummy storage block that fills the gap between the end of previous storage block and t...</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00152">log_reducer_impl.hpp:152</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html_a9dc30e3460f4d9e5a9fb56f8bd20f0c2"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html#a9dc30e3460f4d9e5a9fb56f8bd20f0c2">foedus::snapshot::LogReducer::uninitialize_once</a></div><div class="ttdeci">ErrorStack uninitialize_once() override</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8cpp_source.html#l00122">log_reducer_impl.cpp:122</a></div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_af9722c3bae7835c04e11ad7469e8b0cd"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#af9722c3bae7835c04e11ad7469e8b0cd">foedus::snapshot::ReducerBufferStatus::word</a></div><div class="ttdeci">uint64_t word</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00070">log_reducer_impl.hpp:70</a></div></div>
<div class="ttc" id="snapshot__file__set_8hpp_html"><div class="ttname"><a href="snapshot__file__set_8hpp.html">snapshot_file_set.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a966d8e3e1ef26127add6b515174599b2"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a966d8e3e1ef26127add6b515174599b2">foedus::snapshot::LogReducerControlBlock::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00164">log_reducer_impl.hpp:164</a></div></div>
<div class="ttc" id="namespacefoedus_1_1snapshot_html_a499edf9829f41f833e2057346e8bbf3a"><div class="ttname"><a href="namespacefoedus_1_1snapshot.html#a499edf9829f41f833e2057346e8bbf3a">foedus::snapshot::from_buffer_position</a></div><div class="ttdeci">uint64_t from_buffer_position(BufferPosition buffer_position)</div><div class="ttdef"><b>Definition:</b> <a href="snapshot__id_8hpp_source.html#l00078">snapshot_id.hpp:78</a></div></div>
<div class="ttc" id="classfoedus_1_1fs_1_1Path_html"><div class="ttname"><a href="classfoedus_1_1fs_1_1Path.html">foedus::fs::Path</a></div><div class="ttdoc">Analogue of boost::filesystem::path. </div><div class="ttdef"><b>Definition:</b> <a href="path_8hpp_source.html#l00037">path.hpp:37</a></div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_ac9bfa8c81d7bdd875703387622b38ccc"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#ac9bfa8c81d7bdd875703387622b38ccc">foedus::snapshot::ReducerBufferStatus::get_tail_position</a></div><div class="ttdeci">BufferPosition get_tail_position() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00082">log_reducer_impl.hpp:82</a></div></div>
<div class="ttc" id="storage_2fwd_8hpp_html"><div class="ttname"><a href="storage_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in storage package. </div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html_addaf1ec8c392fb0384c0ae90e46a1b34"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html#addaf1ec8c392fb0384c0ae90e46a1b34">foedus::snapshot::LogReducer::LogReducer</a></div><div class="ttdeci">LogReducer(Engine *engine)</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8cpp_source.html#l00052">log_reducer_impl.cpp:52</a></div></div>
<div class="ttc" id="path_8hpp_html"><div class="ttname"><a href="path_8hpp.html">path.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FullBlockHeader_html"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FullBlockHeader.html">foedus::snapshot::FullBlockHeader</a></div><div class="ttdoc">All blocks that have content start with this header. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00128">log_reducer_impl.hpp:128</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html_a87f87c814bddb6a113be600ed415d92c"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html#a87f87c814bddb6a113be600ed415d92c">foedus::snapshot::LogReducer::to_string</a></div><div class="ttdeci">std::string to_string() const  override</div><div class="ttdoc">Expects "LogReducer-x", "LogMapper-y" etc. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00300">log_reducer_impl.hpp:300</a></div></div>
<div class="ttc" id="cacheline_8hpp_html"><div class="ttname"><a href="cacheline_8hpp.html">cacheline.hpp</a></div><div class="ttdoc">Constants and methods related to CPU cacheline and its prefetching. </div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_a697f96f550c7b60ea6e04cb69a5e8b82"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82">foedus::snapshot::BlockHeaderBase::Constants</a></div><div class="ttdeci">Constants</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00094">log_reducer_impl.hpp:94</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html">foedus::snapshot::BlockHeaderBase</a></div><div class="ttdoc">All log blocks in mapper/reducers start with this header. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00093">log_reducer_impl.hpp:93</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FullBlockHeader_html_aaa94c0c5f6d325b21654123b5179c35c"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aaa94c0c5f6d325b21654123b5179c35c">foedus::snapshot::FullBlockHeader::assert_key_length</a></div><div class="ttdeci">void assert_key_length() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00135">log_reducer_impl.hpp:135</a></div></div>
<div class="ttc" id="classfoedus_1_1Engine_html"><div class="ttname"><a href="classfoedus_1_1Engine.html">foedus::Engine</a></div><div class="ttdoc">Database engine object that holds all resources and provides APIs. </div><div class="ttdef"><b>Definition:</b> <a href="engine_8hpp_source.html#l00109">engine.hpp:109</a></div></div>
<div class="ttc" id="mapreduce__base__impl_8hpp_html"><div class="ttname"><a href="mapreduce__base__impl_8hpp.html">mapreduce_base_impl.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_adbd0a3b5abc04a6a141df09c2830f105"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#adbd0a3b5abc04a6a141df09c2830f105">foedus::snapshot::BlockHeaderBase::block_length_</a></div><div class="ttdeci">BufferPosition block_length_</div><div class="ttdoc">Length (in 8-bytes) of this block including the header. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00119">log_reducer_impl.hpp:119</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_a9acb7afcb29646e0252252346b8bf70a"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a9acb7afcb29646e0252252346b8bf70a">foedus::snapshot::BlockHeaderBase::magic_word_</a></div><div class="ttdeci">uint32_t magic_word_</div><div class="ttdoc">This is used to identify the storage block is a dummy (filler) one or a full one. ...</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00117">log_reducer_impl.hpp:117</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html">foedus::snapshot::LogReducerControlBlock</a></div><div class="ttdoc">Shared data for LogReducer. </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00159">log_reducer_impl.hpp:159</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FullBlockHeader_html_aec9f296f5c3beb867e4d13e2d8fd2629"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aec9f296f5c3beb867e4d13e2d8fd2629">foedus::snapshot::FullBlockHeader::log_count_</a></div><div class="ttdeci">uint32_t log_count_</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00130">log_reducer_impl.hpp:130</a></div></div>
<div class="ttc" id="structfoedus_1_1storage_1_1Page_html"><div class="ttname"><a href="structfoedus_1_1storage_1_1Page.html">foedus::storage::Page</a></div><div class="ttdoc">Just a marker to denote that the memory region represents a data page. </div><div class="ttdef"><b>Definition:</b> <a href="page_8hpp_source.html#l00334">page.hpp:334</a></div></div>
<div class="ttc" id="initializable_8hpp_html"><div class="ttname"><a href="initializable_8hpp.html">initializable.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1memory_1_1AlignedMemorySlice_html"><div class="ttname"><a href="structfoedus_1_1memory_1_1AlignedMemorySlice.html">foedus::memory::AlignedMemorySlice</a></div><div class="ttdoc">A slice of foedus::memory::AlignedMemory. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00210">aligned_memory.hpp:210</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_a1bb6dc9193b46847d47c1c68c1f1fea7"><div class="ttname"><a href="group__SNAPSHOT.html#a1bb6dc9193b46847d47c1c68c1f1fea7">foedus::snapshot::ReducerBufferStatus::Components::active_writers_</a></div><div class="ttdeci">uint16_t active_writers_</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00072">log_reducer_impl.hpp:72</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a10138591711bd165e6605de2b9d43b10"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a10138591711bd165e6605de2b9d43b10">foedus::snapshot::LogReducerControlBlock::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00167">log_reducer_impl.hpp:167</a></div></div>
<div class="ttc" id="attachable_8hpp_html"><div class="ttname"><a href="attachable_8hpp.html">attachable.hpp</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1MapReduceBase_html_ad999cfc08cc7d7072ae6e0ed73651fca"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1MapReduceBase.html#ad999cfc08cc7d7072ae6e0ed73651fca">foedus::snapshot::MapReduceBase::id_</a></div><div class="ttdeci">const uint16_t id_</div><div class="ttdoc">Unique ID of this mapper or reducer. </div><div class="ttdef"><b>Definition:</b> <a href="mapreduce__base__impl_8hpp_source.html#l00074">mapreduce_base_impl.hpp:74</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a54a1ec2612036dcdfa7513949eb861ff"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a54a1ec2612036dcdfa7513949eb861ff">foedus::snapshot::LogReducerControlBlock::total_storage_count_</a></div><div class="ttdeci">std::atomic&lt; uint32_t &gt; total_storage_count_</div><div class="ttdoc">Set at the end of merge_sort(). </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00209">log_reducer_impl.hpp:209</a></div></div>
<div class="ttc" id="snapshot__writer__impl_8hpp_html"><div class="ttname"><a href="snapshot__writer__impl_8hpp.html">snapshot_writer_impl.hpp</a></div></div>
<div class="ttc" id="structfoedus_1_1soc_1_1NodeMemoryAnchors_html_a8d6fc8477c8fa29fc8bef20b629d7de0a007c4bb27406657ed3002c5d26d87ed0"><div class="ttname"><a href="structfoedus_1_1soc_1_1NodeMemoryAnchors.html#a8d6fc8477c8fa29fc8bef20b629d7de0a007c4bb27406657ed3002c5d26d87ed0">foedus::soc::NodeMemoryAnchors::kLogReducerMemorySize</a></div><div class="ttdef"><b>Definition:</b> <a href="shared__memory__repo_8hpp_source.html#l00317">shared_memory_repo.hpp:317</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_a91a613671f2cfdbc32f50dcfef1af345"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a91a613671f2cfdbc32f50dcfef1af345">foedus::snapshot::BlockHeaderBase::is_full_block</a></div><div class="ttdeci">bool is_full_block() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00100">log_reducer_impl.hpp:100</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_af04897d1e53bd495598781eacddd253b"><div class="ttname"><a href="group__SNAPSHOT.html#af04897d1e53bd495598781eacddd253b">foedus::snapshot::ReducerBufferStatus::Components::tail_position_</a></div><div class="ttdeci">BufferPosition tail_position_</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00074">log_reducer_impl.hpp:74</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a849b43b33dbfa0c41fa4066017066ad1">foedus::snapshot::BlockHeaderBase::kFullBlockHeaderMagicWord</a></div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00096">log_reducer_impl.hpp:96</a></div></div>
<div class="ttc" id="classfoedus_1_1fs_1_1DirectIoFile_html"><div class="ttname"><a href="classfoedus_1_1fs_1_1DirectIoFile.html">foedus::fs::DirectIoFile</a></div><div class="ttdoc">Represents an I/O stream on one file without filesystem caching. </div><div class="ttdef"><b>Definition:</b> <a href="direct__io__file_8hpp_source.html#l00048">direct_io_file.hpp:48</a></div></div>
<div class="ttc" id="classfoedus_1_1memory_1_1AlignedMemory_html"><div class="ttname"><a href="classfoedus_1_1memory_1_1AlignedMemory.html">foedus::memory::AlignedMemory</a></div><div class="ttdoc">Represents one memory block aligned to actual OS/hardware pages. </div><div class="ttdef"><b>Definition:</b> <a href="aligned__memory_8hpp_source.html#l00067">aligned_memory.hpp:67</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_aac854ef965de2120aa2e11145bb83b82"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#aac854ef965de2120aa2e11145bb83b82">foedus::snapshot::BlockHeaderBase::is_filler</a></div><div class="ttdeci">bool is_filler() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00105">log_reducer_impl.hpp:105</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a380a05209f90e3b273f9904d7bd1fc33"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a380a05209f90e3b273f9904d7bd1fc33">foedus::snapshot::LogReducerControlBlock::uninitialize</a></div><div class="ttdeci">void uninitialize()</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00173">log_reducer_impl.hpp:173</a></div></div>
<div class="ttc" id="namespacefoedus_1_1snapshot_html_a4f25261ad53b056011203342a22b40d0"><div class="ttname"><a href="namespacefoedus_1_1snapshot.html#a4f25261ad53b056011203342a22b40d0">foedus::snapshot::ReducerConstants</a></div><div class="ttdeci">ReducerConstants</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00055">log_reducer_impl.hpp:55</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1MapReduceBase_html"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1MapReduceBase.html">foedus::snapshot::MapReduceBase</a></div><div class="ttdoc">Base class for LogMapper and LogReducer to share common code. </div><div class="ttdef"><b>Definition:</b> <a href="mapreduce__base__impl_8hpp_source.html#l00051">mapreduce_base_impl.hpp:51</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FullBlockHeader_html_ae8513482abdd59fcf0118f068d233de8"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#ae8513482abdd59fcf0118f068d233de8">foedus::snapshot::FullBlockHeader::longest_key_length_</a></div><div class="ttdeci">uint32_t longest_key_length_</div><div class="ttdoc">additional statistics for masstree/hash </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00134">log_reducer_impl.hpp:134</a></div></div>
<div class="ttc" id="group__IDIOMS_html_gaa5c1d074da423c0f330d1bc8a098ecb8"><div class="ttname"><a href="group__IDIOMS.html#gaa5c1d074da423c0f330d1bc8a098ecb8">ASSERT_ND</a></div><div class="ttdeci">#define ASSERT_ND(x)</div><div class="ttdoc">A warning-free wrapper macro of assert() that has no performance effect in release mode even when &#39;x&#39;...</div><div class="ttdef"><b>Definition:</b> <a href="assert__nd_8hpp_source.html#l00072">assert_nd.hpp:72</a></div></div>
<div class="ttc" id="group__SNAPSHOT_html_a90ca730fb707345d1d69bc0e4bfe7ff9"><div class="ttname"><a href="group__SNAPSHOT.html#a90ca730fb707345d1d69bc0e4bfe7ff9">foedus::snapshot::ReducerBufferStatus::Components::flags_</a></div><div class="ttdeci">uint16_t flags_</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00073">log_reducer_impl.hpp:73</a></div></div>
<div class="ttc" id="thread_2fwd_8hpp_html"><div class="ttname"><a href="thread_2fwd_8hpp.html">fwd.hpp</a></div><div class="ttdoc">Forward declarations of classes in thread package. </div></div>
<div class="ttc" id="raw__atomics_8hpp_html"><div class="ttname"><a href="raw__atomics_8hpp.html">raw_atomics.hpp</a></div><div class="ttdoc">Raw atomic operations that work for both C++11 and non-C++11 code. </div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html">foedus::snapshot::LogReducer</a></div><div class="ttdoc">A log reducer, which receives log entries sent from mappers and applies them to construct new snapsho...</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00293">log_reducer_impl.hpp:293</a></div></div>
<div class="ttc" id="group__ERRORCODES_html_gaae5f98d1b4caace7febc49e59ae5ac56"><div class="ttname"><a href="group__ERRORCODES.html#gaae5f98d1b4caace7febc49e59ae5ac56">foedus::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Enum of error codes defined in error_code.xmacro. </div><div class="ttdef"><b>Definition:</b> <a href="error__code_8hpp_source.html#l00085">error_code.hpp:85</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FullBlockHeader_html_aa13c862cf8f9b5d84cc88087080c9bb3"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#aa13c862cf8f9b5d84cc88087080c9bb3">foedus::snapshot::FullBlockHeader::storage_id_</a></div><div class="ttdeci">storage::StorageId storage_id_</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00129">log_reducer_impl.hpp:129</a></div></div>
<div class="ttc" id="classfoedus_1_1snapshot_1_1LogReducer_html_a0f46ae94b8c2f43b2dcae4b4eed6438b"><div class="ttname"><a href="classfoedus_1_1snapshot_1_1LogReducer.html#a0f46ae94b8c2f43b2dcae4b4eed6438b">foedus::snapshot::LogReducer::operator&lt;&lt;</a></div><div class="ttdeci">friend std::ostream &amp; operator&lt;&lt;(std::ostream &amp;o, const LogReducer &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8cpp_source.html#l00912">log_reducer_impl.cpp:912</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_af2a537aa1d0ef7b0c08d9f9c736e1cab"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#af2a537aa1d0ef7b0c08d9f9c736e1cab">foedus::snapshot::LogReducerControlBlock::id_</a></div><div class="ttdeci">uint16_t id_</div><div class="ttdoc">ID of this reducer (or numa node ID). </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00212">log_reducer_impl.hpp:212</a></div></div>
<div class="ttc" id="unionfoedus_1_1snapshot_1_1ReducerBufferStatus_html_a56e3bf6d9682880703bd381a35ba2289"><div class="ttname"><a href="unionfoedus_1_1snapshot_1_1ReducerBufferStatus.html#a56e3bf6d9682880703bd381a35ba2289">foedus::snapshot::ReducerBufferStatus::is_clear</a></div><div class="ttdeci">bool is_clear() const </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00080">log_reducer_impl.hpp:80</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1LogReducerControlBlock_html_a196fa099a7679822e3535c290eae4351"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1LogReducerControlBlock.html#a196fa099a7679822e3535c290eae4351">foedus::snapshot::LogReducerControlBlock::~LogReducerControlBlock</a></div><div class="ttdeci">~LogReducerControlBlock()=delete</div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1BlockHeaderBase_html_a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1BlockHeaderBase.html#a697f96f550c7b60ea6e04cb69a5e8b82a58b2b174ede7aaad17e24d84a36c56e7">foedus::snapshot::BlockHeaderBase::kFillerBlockHeaderMagicWord</a></div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00098">log_reducer_impl.hpp:98</a></div></div>
<div class="ttc" id="structfoedus_1_1snapshot_1_1FullBlockHeader_html_a068983007ba6db97f2ed7f4cd31ec5b0"><div class="ttname"><a href="structfoedus_1_1snapshot_1_1FullBlockHeader.html#a068983007ba6db97f2ed7f4cd31ec5b0">foedus::snapshot::FullBlockHeader::shortest_key_length_</a></div><div class="ttdeci">uint32_t shortest_key_length_</div><div class="ttdoc">additional statistics for masstree/hash </div><div class="ttdef"><b>Definition:</b> <a href="log__reducer__impl_8hpp_source.html#l00132">log_reducer_impl.hpp:132</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_8937f9425540f92243ad585d5de884fc.html">foedus-core</a></li><li class="navelem"><a class="el" href="dir_6f67f5e5099bcaca1b86c6412add5f6c.html">include</a></li><li class="navelem"><a class="el" href="dir_e2c6bc5bd212a768ceff7b155baa199e.html">foedus</a></li><li class="navelem"><a class="el" href="dir_f5668b5e9bf4ae7a05656be813574d64.html">snapshot</a></li><li class="navelem"><a class="el" href="log__reducer__impl_8hpp.html">log_reducer_impl.hpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
